[
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky I'm not entirely sure if a5c05df fixes (all) the problem(s) you pointed at in your earlier review",
      "created_at" : "2020-12-10T13:51:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#issuecomment-742533285",
      "id" : 742533285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjUzMzI4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T13:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742533285",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541839142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541839142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think this  sentence adds much value, and is guaranteed to have to be modified in future.",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-13T04:10:31Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+## Autoconf archive\n+\n+All files in this folder are from the [Autoconf Archive](https://www.gnu.org/software/autoconf-archive/)\n+([Github](https://github.com/autoconf-archive/autoconf-archive/tree/master/m4) may be ahead of the site).\n+They are unmodified, but may not be the most recent serial.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541839142",
      "id" : 541839142,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzOTE0Mg==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "build-aux/m4/README.md",
      "position" : 5,
      "pull_request_review_id" : 550882827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-13T04:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541839142",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541839258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541839258"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We shouldn't need to list modifications to the `.m4` files in 2 separate places. Any modifications should already be documented by the commits to this directory that introduce them.",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-13T04:11:33Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+## Autoconf archive\n+\n+All files in this folder are from the [Autoconf Archive](https://www.gnu.org/software/autoconf-archive/)\n+([Github](https://github.com/autoconf-archive/autoconf-archive/tree/master/m4) may be ahead of the site).\n+They are unmodified, but may not be the most recent serial.\n+\n+Future modifications to these files should be listed here and at the top of each file,\n+to prevent accidentally overriding them.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541839258",
      "id" : 541839258,
      "line" : 8,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzOTI1OA==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "build-aux/m4/README.md",
      "position" : 8,
      "pull_request_review_id" : 550882827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-13T04:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541839258",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541930723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541930723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I (briefly) found it useful myself when I cloned the most recent archive, copied the files and did a git diff.",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-13T13:56:49Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+## Autoconf archive\n+\n+All files in this folder are from the [Autoconf Archive](https://www.gnu.org/software/autoconf-archive/)\n+([Github](https://github.com/autoconf-archive/autoconf-archive/tree/master/m4) may be ahead of the site).\n+They are unmodified, but may not be the most recent serial.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541930723",
      "id" : 541930723,
      "in_reply_to_id" : 541839142,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkzMDcyMw==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "build-aux/m4/README.md",
      "position" : 5,
      "pull_request_review_id" : 550923274,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-13T13:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541930723",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541930948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541930948"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We did that before and (at least I) managed to accidentally forget about those changes in a followup. That said, I don't know if this note in the README can prevent that either. A linter script might.",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-13T13:58:09Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+## Autoconf archive\n+\n+All files in this folder are from the [Autoconf Archive](https://www.gnu.org/software/autoconf-archive/)\n+([Github](https://github.com/autoconf-archive/autoconf-archive/tree/master/m4) may be ahead of the site).\n+They are unmodified, but may not be the most recent serial.\n+\n+Future modifications to these files should be listed here and at the top of each file,\n+to prevent accidentally overriding them.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r541930948",
      "id" : 541930948,
      "in_reply_to_id" : 541839258,
      "line" : 8,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTkzMDk0OA==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "build-aux/m4/README.md",
      "position" : 8,
      "pull_request_review_id" : 550923387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-13T13:58:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/541930948",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake thanks for the review. I'll split the commits (a bit later).",
      "created_at" : "2020-12-13T13:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#issuecomment-744011903",
      "id" : 744011903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDAxMTkwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-13T13:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744011903",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542525771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542525771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does bp::child need this workaround too? If not, that seems like a reason to avoid bp::system...",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-14T16:33:16Z",
      "diff_hunk" : "@@ -1200,25 +1200,30 @@ UniValue RunCommandParseJSON(const std::string& str_command, const std::string&\n \n     if (str_command.empty()) return UniValue::VNULL;\n \n-    bp::child c(\n+    // This is here because boost::process quotes the argument given to\n+    // system when used in combination with boost::process::shell.\n+    // https://github.com/boostorg/process/issues/95",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542525771",
      "id" : 542525771,
      "line" : 1205,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUyNTc3MQ==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 1205,
      "original_position" : 7,
      "original_start_line" : 1203,
      "path" : "src/util/system.cpp",
      "position" : 7,
      "pull_request_review_id" : 551566272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : 1203,
      "start_side" : "RIGHT",
      "updated_at" : "2020-12-14T16:37:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542525771",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542527922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542527922"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This shouldn't work: bp::system won't return until the child process is complete, which means it's done with stdin...",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-14T16:35:55Z",
      "diff_hunk" : "@@ -1200,25 +1200,30 @@ UniValue RunCommandParseJSON(const std::string& str_command, const std::string&\n \n     if (str_command.empty()) return UniValue::VNULL;\n \n-    bp::child c(\n+    // This is here because boost::process quotes the argument given to\n+    // system when used in combination with boost::process::shell.\n+    // https://github.com/boostorg/process/issues/95\n+    auto exit =\n+#ifdef _WIN32\n+    bp::system(\n+    bp::shell(), cmd, bp::std_out > stdout_stream);\n+#else\n+    bp::system(bp::shell(),\n+        \"-c\",\n         str_command,\n         bp::std_out > stdout_stream,\n         bp::std_err > stderr_stream,\n         bp::std_in < stdin_stream\n     );\n-    if (!str_std_in.empty()) {\n-        stdin_stream << str_std_in << std::endl;\n-    }\n+#endif\n+    stdin_stream << str_std_in << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542527922",
      "id" : 542527922,
      "line" : 1219,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUyNzkyMg==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 1219,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 24,
      "pull_request_review_id" : 551566272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-14T16:37:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542527922",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542528650"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542528650"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Depending on stdout/stderr buffer sizes and amount of output, the process may block and not exit until we read the output...",
      "commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "created_at" : "2020-12-14T16:36:52Z",
      "diff_hunk" : "@@ -1200,25 +1200,30 @@ UniValue RunCommandParseJSON(const std::string& str_command, const std::string&\n \n     if (str_command.empty()) return UniValue::VNULL;\n \n-    bp::child c(\n+    // This is here because boost::process quotes the argument given to\n+    // system when used in combination with boost::process::shell.\n+    // https://github.com/boostorg/process/issues/95\n+    auto exit =\n+#ifdef _WIN32\n+    bp::system(\n+    bp::shell(), cmd, bp::std_out > stdout_stream);\n+#else\n+    bp::system(bp::shell(),\n+        \"-c\",\n         str_command,\n         bp::std_out > stdout_stream,\n         bp::std_err > stderr_stream,\n         bp::std_in < stdin_stream\n     );\n-    if (!str_std_in.empty()) {\n-        stdin_stream << str_std_in << std::endl;\n-    }\n+#endif\n+    stdin_stream << str_std_in << std::endl;\n     stdin_stream.pipe().close();\n \n-    std::string result;\n-    std::string error;\n-    std::getline(stdout_stream, result);\n-    std::getline(stderr_stream, error);\n-\n-    c.wait();\n-    const int n_error = c.exit_code();\n-    if (n_error) throw std::runtime_error(strprintf(\"RunCommandParseJSON error: process(%s) returned %d: %s\\n\", str_command, n_error, error));\n+    if (exit) {\n+        std::string error{std::istreambuf_iterator<char>(stderr_stream), {}};\n+        throw std::runtime_error(strprintf(\"RunCommandParseJSON error: process(%s) returned %d: %s\\n\", str_command, exit, error));\n+    }\n+    std::string result{std::istreambuf_iterator<char>(stdout_stream), {}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#discussion_r542528650",
      "id" : 542528650,
      "line" : 1226,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUyODY1MA==",
      "original_commit_id" : "a5c05dfe11550d2d88512cfdfe2bdc89283fadf2",
      "original_line" : 1226,
      "original_position" : 39,
      "original_start_line" : 1222,
      "path" : "src/util/system.cpp",
      "position" : 39,
      "pull_request_review_id" : 551566272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20614",
      "side" : "RIGHT",
      "start_line" : 1222,
      "start_side" : "RIGHT",
      "updated_at" : "2020-12-14T16:37:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542528650",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some of this has been superseeded by changes on master, and the rest I'm not clear what to do. So closing this for now.",
      "created_at" : "2021-02-24T15:06:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#issuecomment-785140055",
      "id" : 785140055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NTE0MDA1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-24T15:06:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785140055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Mark as up for grabs? For possible followup to #21935 ?",
      "created_at" : "2021-06-21T04:05:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#issuecomment-864709188",
      "id" : 864709188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2NDcwOTE4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-21T04:05:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864709188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is https://github.com/boostorg/process/issues/95 a pre-req for this?",
      "created_at" : "2021-06-22T18:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20614#issuecomment-866218154",
      "id" : 866218154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2NjIxODE1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-22T18:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866218154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   }
]
