{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "nStartingHeight was introduced in commit 7a47324c7 (Bitcoin version\r\n0.2.9, P2P version 209) with the comment \"better prevention of inventory\r\nrelaying during initial download\". At that time, there was no function\r\nto determine whether the node was still in Initial Block Download, so to\r\nprevent syncing nodes from relaying old blocks to their peers, a check\r\nwas added to never relay a block to a peer where the height was lower\r\nthan 2000 less than the peer's best block. That check was updated\r\nseveral times in later commits to ensure that we weren't relaying blocks\r\nbefore the latest checkpoint if the peer didn't provide a\r\nstartingheight. The checkpoint comparison was changed to compare with an\r\nestimate of the highest block in commit eae82d8e.\r\n\r\nIn commit 202e0194, all block relay was gated on being out of Initial\r\nBlock Download. In commit 0278fb5f, the comparison to nBlockEstimate was\r\nremoved since \"we already checked IsIBD()\".\r\n\r\nWe can remove the check against nStartingHeight entirely. If the node is\r\nout of Initial Block Download, then its tip height must have been within\r\n24 hours of current time, so should not be more than ~144 blocks behind\r\nthe most work tip.\r\n\r\nThis simplifies moving block inventory state into the `Peer` object (#19829).",
   "closed_at" : "2020-12-14T10:03:28Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20624/comments",
   "created_at" : "2020-12-11T10:49:36Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20624/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/20624",
   "id" : 762229947,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "description" : null,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20624/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NTM2Nzk5NDYw",
   "number" : 20624,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/20624.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20624",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/20624.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20624"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "net processing: Remove nStartingHeight check from block relay",
   "updated_at" : "2020-12-14T10:29:43Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20624",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
      "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
      "followers_url" : "https://api.github.com/users/jnewbery/followers",
      "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/jnewbery",
      "id" : 1063656,
      "login" : "jnewbery",
      "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
      "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
      "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
      "repos_url" : "https://api.github.com/users/jnewbery/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/jnewbery"
   }
}
