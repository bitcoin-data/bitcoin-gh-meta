[
   {
      "author_association" : "MEMBER",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25003](https://github.com/bitcoin/bitcoin/pull/25003) (tracing: fix `coin_selection:aps_create_tx_internal` calling logic by theStack)\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#24845](https://github.com/bitcoin/bitcoin/pull/24845) (wallet: createTransaction, return proper error description for  \"too-long-mempool-chain\" + introduce generic Result classes by furszy)\n* [#24752](https://github.com/bitcoin/bitcoin/pull/24752) (wallet: increase BnB upper limit by S3RK)\n* [#24649](https://github.com/bitcoin/bitcoin/pull/24649) (wallet: do not count wallet utxos as external by S3RK)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-13T06:45:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-743962460",
      "id" : 743962460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0Mzk2MjQ2MA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743962460/reactions"
      },
      "updated_at" : "2022-05-17T21:09:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743962460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "While it's arguably not, strictly speaking, part of the proposed change, the comment about the change position parameter that's being maintained here is a bit misleading. This is a bit nit-picky, so bare with me please, but I think it's more appropriate to:\r\n1. Use a const instead of inline comment in order to convey the meaning. e.g. `const int RANDOM_CHANGE_POSITION = -1`). This value is used more than once, so another reason to use a const.\r\n2. Convey that passing `-1` means \"actively set the position to a random one\" rather than \"no requested location\" which doesn't really let the reader know what's going to happen.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2020-12-19T05:27:43Z",
      "diff_hunk" : "@@ -215,21 +215,19 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, /* No requested location for change */ -1, fail_reason, new_coin_control, fee_calc_out, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751",
      "id" : 546194751,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE5NDc1MQ==",
      "original_commit_id" : "8e9266fb7ec8577c989d09937f3de958b2a0332f",
      "original_line" : 220,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 555918142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-03-31T18:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/47615825?v=4",
         "events_url" : "https://api.github.com/users/pox/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pox/followers",
         "following_url" : "https://api.github.com/users/pox/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pox/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pox",
         "id" : 47615825,
         "login" : "pox",
         "node_id" : "MDQ6VXNlcjQ3NjE1ODI1",
         "organizations_url" : "https://api.github.com/users/pox/orgs",
         "received_events_url" : "https://api.github.com/users/pox/received_events",
         "repos_url" : "https://api.github.com/users/pox/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pox/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pox/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pox"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546195248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is a lot more readable indeed! ð",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2020-12-19T05:33:54Z",
      "diff_hunk" : "@@ -3099,42 +3103,34 @@ bool CWallet::CreateTransactionInternal(\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n               (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool) > 0.0 ? 100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool) : 0.0,\n               feeCalc.est.fail.withinTarget, feeCalc.est.fail.totalConfirmed, feeCalc.est.fail.inMempool, feeCalc.est.fail.leftMempool);\n-    return true;\n+    return CreatedTransactionResult(tx, nFeeRet, nChangePosInOut);\n }\n \n-bool CWallet::CreateTransaction(\n+std::optional<CreatedTransactionResult> CWallet::CreateTransaction(\n         const std::vector<CRecipient>& vecSend,\n-        CTransactionRef& tx,\n-        CAmount& nFeeRet,\n-        int& nChangePosInOut,\n+        int nChangePos,\n         bilingual_str& error,\n         const CCoinControl& coin_control,\n         FeeCalculation& fee_calc_out,\n         bool sign)\n {\n-    int nChangePosIn = nChangePosInOut;\n-    Assert(!tx); // tx is an out-param. TODO change the return type from bool to tx (or nullptr)\n-    bool res = CreateTransactionInternal(vecSend, tx, nFeeRet, nChangePosInOut, error, coin_control, fee_calc_out, sign);\n+    auto txr_ungrouped = CreateTransactionInternal(vecSend, nChangePos, error, coin_control, fee_calc_out, sign);\n+    if (!txr_ungrouped) return {};\n     // try with avoidpartialspends unless it's enabled already\n-    if (res && nFeeRet > 0 /* 0 means non-functional fee rate estimation */ && m_max_aps_fee > -1 && !coin_control.m_avoid_partial_spends) {\n+    if (txr_ungrouped->fee > 0 /* 0 means non-functional fee rate estimation */ && m_max_aps_fee > -1 && !coin_control.m_avoid_partial_spends) {\n         CCoinControl tmp_cc = coin_control;\n         tmp_cc.m_avoid_partial_spends = true;\n-        CAmount nFeeRet2;\n-        CTransactionRef tx2;\n-        int nChangePosInOut2 = nChangePosIn;\n         bilingual_str error2; // fired and forgotten; if an error occurs, we discard the results\n-        if (CreateTransactionInternal(vecSend, tx2, nFeeRet2, nChangePosInOut2, error2, tmp_cc, fee_calc_out, sign)) {\n+        auto txr_grouped = CreateTransactionInternal(vecSend, nChangePos, error2, tmp_cc, fee_calc_out, sign);\n+        if (txr_grouped) {\n             // if fee of this alternative one is within the range of the max fee, we use this one\n-            const bool use_aps = nFeeRet2 <= nFeeRet + m_max_aps_fee;\n-            WalletLogPrintf(\"Fee non-grouped = %lld, grouped = %lld, using %s\\n\", nFeeRet, nFeeRet2, use_aps ? \"grouped\" : \"non-grouped\");\n-            if (use_aps) {\n-                tx = tx2;\n-                nFeeRet = nFeeRet2;\n-                nChangePosInOut = nChangePosInOut2;\n-            }\n+            const bool use_aps = txr_grouped->fee <= txr_ungrouped->fee + m_max_aps_fee;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546195248",
      "id" : 546195248,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE5NTI0OA==",
      "original_commit_id" : "8e9266fb7ec8577c989d09937f3de958b2a0332f",
      "original_line" : 3132,
      "original_position" : 208,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 555918142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-03-31T18:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/47615825?v=4",
         "events_url" : "https://api.github.com/users/pox/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pox/followers",
         "following_url" : "https://api.github.com/users/pox/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pox/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pox",
         "id" : 47615825,
         "login" : "pox",
         "node_id" : "MDQ6VXNlcjQ3NjE1ODI1",
         "organizations_url" : "https://api.github.com/users/pox/orgs",
         "received_events_url" : "https://api.github.com/users/pox/received_events",
         "repos_url" : "https://api.github.com/users/pox/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pox/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pox/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pox"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549154793"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks a lot for reviewing, good point! I probably was a bit over-enthusiastic in getting rid of as many variables as possible before the call to `CreateTransaction` ;-) Introducing a `RANDOM_CHANGE_POSITION` constant makes a lot of sense to me, see latest force-push of the second commit. Not sure yet if putting the constant into the header is a good idea, as it is only used for one single method and hence many modules that don't need the constant would see it as well. Probably a candidate for a follow-up PR?",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2020-12-27T19:26:21Z",
      "diff_hunk" : "@@ -215,21 +215,19 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, /* No requested location for change */ -1, fail_reason, new_coin_control, fee_calc_out, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549154793",
      "id" : 549154793,
      "in_reply_to_id" : 546194751,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE1NDc5Mw==",
      "original_commit_id" : "8e9266fb7ec8577c989d09937f3de958b2a0332f",
      "original_line" : 220,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 558954188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-03-31T18:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Force-pushed with the proposed changes by @pox (see https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751), introducing new constants `RANDOM_CHANGE_POSITION` to be used as second parameter for `CWallet::CreateTransaction`.",
      "created_at" : "2020-12-27T19:29:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-751506956",
      "id" : 751506956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MTUwNjk1Ng==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751506956/reactions"
      },
      "updated_at" : "2020-12-27T19:29:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751506956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: Using `auto` here obscures the fact that `txr` is an optional. I think being explicit about the optionality is better in order to avoid mistakes in the future.\r\n\r\nApplies throughout this PR.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2020-12-27T22:50:30Z",
      "diff_hunk" : "@@ -215,21 +215,20 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n+    constexpr int RANDOM_CHANGE_POSITION = -1;\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, RANDOM_CHANGE_POSITION, fail_reason, new_coin_control, fee_calc_out, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268",
      "id" : 549173268,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE3MzI2OA==",
      "original_commit_id" : "5865c38c6a3dd6a98ff3d03ad5e49c550db49a21",
      "original_line" : 221,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 558963146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-03-31T18:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK 5865c38\r\nð",
      "created_at" : "2020-12-28T05:02:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-751575553",
      "id" : 751575553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MTU3NTU1Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751575553/reactions"
      },
      "updated_at" : "2020-12-28T05:02:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751575553",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/47615825?v=4",
         "events_url" : "https://api.github.com/users/pox/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pox/followers",
         "following_url" : "https://api.github.com/users/pox/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pox/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pox",
         "id" : 47615825,
         "login" : "pox",
         "node_id" : "MDQ6VXNlcjQ3NjE1ODI1",
         "organizations_url" : "https://api.github.com/users/pox/orgs",
         "received_events_url" : "https://api.github.com/users/pox/received_events",
         "repos_url" : "https://api.github.com/users/pox/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pox/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pox/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pox"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r550322819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for reviewing! Agree that being explicit is better here. Done.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2020-12-30T20:47:52Z",
      "diff_hunk" : "@@ -215,21 +215,20 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n+    constexpr int RANDOM_CHANGE_POSITION = -1;\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, RANDOM_CHANGE_POSITION, fail_reason, new_coin_control, fee_calc_out, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r550322819",
      "id" : 550322819,
      "in_reply_to_id" : 549173268,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDMyMjgxOQ==",
      "original_commit_id" : "5865c38c6a3dd6a98ff3d03ad5e49c550db49a21",
      "original_line" : 221,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 560195916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-03-31T18:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Force-pushed with changes [as suggested by practicalswift](https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268), using explicit datatype `std::optional<CreatedTransactionalResult>` rather instead of `auto` for storing return values of `CreateTransaction{Internal}()`. Should be straight-forward to re-review, see [range-diff](https://github.com/bitcoin/bitcoin/compare/5865c38c6a3dd6a98ff3d03ad5e49c550db49a21..c32e2b1ccd1145082c29d80e62affa66e246e2fc).",
      "created_at" : "2020-12-30T20:52:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-752754743",
      "id" : 752754743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1Mjc1NDc0Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752754743/reactions"
      },
      "updated_at" : "2020-12-30T20:52:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752754743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master.",
      "created_at" : "2021-03-01T00:11:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-787552800",
      "id" : 787552800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NzU1MjgwMA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787552800/reactions"
      },
      "updated_at" : "2021-03-01T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787552800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master and changed code to return uninitialized values explicitely via `return std::nullopt` rather than `return {}` (see https://github.com/bitcoin/bitcoin/pull/21498, https://github.com/bitcoin/bitcoin/pull/21415#issuecomment-800236640 for further explanation why this is preferred).",
      "created_at" : "2021-03-31T18:38:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-811327725",
      "id" : 811327725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTMyNzcyNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811327725/reactions"
      },
      "updated_at" : "2021-03-31T18:38:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811327725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master.",
      "created_at" : "2021-05-29T12:17:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-850823401",
      "id" : 850823401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MDgyMzQwMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/850823401/reactions"
      },
      "updated_at" : "2021-05-29T12:17:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/850823401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master again. (This time it was a bit more complex, as the involved methods have moved from `wallet/wallet.cpp` to `wallet/spend.cpp`).",
      "created_at" : "2021-06-09T15:44:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-857817383",
      "id" : 857817383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NzgxNzM4Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857817383/reactions"
      },
      "updated_at" : "2021-06-09T15:44:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857817383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master.",
      "created_at" : "2021-09-10T20:31:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-917193358",
      "id" : 917193358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII5842q0KO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917193358/reactions"
      },
      "updated_at" : "2021-09-10T20:31:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917193358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master again.",
      "created_at" : "2021-10-29T00:08:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-954310439",
      "id" : 954310439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII58444Z8n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954310439/reactions"
      },
      "updated_at" : "2021-10-29T00:08:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954310439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 @glozow any Concept ACK / NACK thoughts on this PR?",
      "created_at" : "2022-03-22T10:15:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1074984708",
      "id" : 1074984708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585AEvcE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1074984708/reactions"
      },
      "updated_at" : "2022-03-22T10:15:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1074984708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-03-22T14:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1075249633",
      "id" : 1075249633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585AFwHh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075249633/reactions"
      },
      "updated_at" : "2022-03-22T14:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075249633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master.",
      "created_at" : "2022-03-22T15:15:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1075311380",
      "id" : 1075311380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585AF_MU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075311380/reactions"
      },
      "updated_at" : "2022-03-22T15:15:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075311380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master again.",
      "created_at" : "2022-03-31T23:14:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1085220558",
      "id" : 1085220558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585ArybO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085220558/reactions"
      },
      "updated_at" : "2022-03-31T23:14:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085220558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Returning things is much cleaner for out-only arguments than using mutable arguments (which would ideally be reserved for inout-arguments only).",
      "created_at" : "2022-04-21T17:51:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1105528369",
      "id" : 1105528369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585B5QYx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105528369/reactions"
      },
      "updated_at" : "2022-04-21T17:51:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105528369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r856443118"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856443118"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 5238022161a1ecd361916c6f425439e7c7604758 \"wallet: CreateTransaction(): return out-params as (optional) struct\"\r\n\r\nnit: new variables should be snake_case.\r\n\r\nPerhaps we should consider changing this to `std::optional<int>` and get rid of using `-1` as a magic number.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2022-04-22T17:36:54Z",
      "diff_hunk" : "@@ -95,9 +97,9 @@ struct CreatedTransactionResult\n /**\n  * Create a new transaction paying the recipients with a set of coins\n  * selected by SelectCoins(); Also create the change output, when needed\n- * @note passing nChangePosInOut as -1 will result in setting a random position\n+ * @note passing nChangePos as -1 will result in setting a random position\n  */\n-bool CreateTransaction(CWallet& wallet, const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, const CCoinControl& coin_control, FeeCalculation& fee_calc_out, bool sign = true);\n+std::optional<CreatedTransactionResult> CreateTransaction(CWallet& wallet, const std::vector<CRecipient>& vecSend, int nChangePos, bilingual_str& error, const CCoinControl& coin_control, FeeCalculation& fee_calc_out, bool sign = true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r856443118",
      "id" : 856443118,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zDEju",
      "original_commit_id" : "5238022161a1ecd361916c6f425439e7c7604758",
      "original_line" : 102,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 950398719,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856443118/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2022-04-22T17:38:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856443118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r870481347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870481347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Optional: I stumble a bit on past tense in the Class name here. I think I'd prefer either `CreateTransactionResult` to emphasize it's the result of a function called `CreateTransactionâ¦`, or maybe just either `CreatedTransaction` or `TransactionResult`, since having both \"result\" and \"created\" feels a bit redundant.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2022-05-11T15:45:43Z",
      "diff_hunk" : "@@ -82,6 +82,16 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vector<COutput>& vAvailableCoins, const CAmount& nTargetValue, const CCoinControl& coin_control,\n                  const CoinSelectionParams& coin_selection_params) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n \n+struct CreatedTransactionResult",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r870481347",
      "id" : 870481347,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII584z4n3D",
      "original_commit_id" : "cc3a1617049e88157e1db856d04b8613df9bdbbd",
      "original_line" : 87,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 13,
      "pull_request_review_id" : 969616059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870481347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2022-05-16T17:45:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870481347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r873893384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873893384"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> nit: new variables should be snake_case.\r\n\r\nThanks, renamed `nChangePos` to `change_pos` in both functions `CreateTransaction` and `CreateTransactionInternal` in the latest rebase.\r\n\r\n> Perhaps we should consider changing this to std::optional<int> and get rid of using -1 as a magic number.\r\n\r\nGood idea, I think this would make a good follow-up PR candidate.",
      "commit_id" : "4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2022-05-16T15:53:24Z",
      "diff_hunk" : "@@ -95,9 +97,9 @@ struct CreatedTransactionResult\n /**\n  * Create a new transaction paying the recipients with a set of coins\n  * selected by SelectCoins(); Also create the change output, when needed\n- * @note passing nChangePosInOut as -1 will result in setting a random position\n+ * @note passing nChangePos as -1 will result in setting a random position\n  */\n-bool CreateTransaction(CWallet& wallet, const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, const CCoinControl& coin_control, FeeCalculation& fee_calc_out, bool sign = true);\n+std::optional<CreatedTransactionResult> CreateTransaction(CWallet& wallet, const std::vector<CRecipient>& vecSend, int nChangePos, bilingual_str& error, const CCoinControl& coin_control, FeeCalculation& fee_calc_out, bool sign = true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r873893384",
      "id" : 873893384,
      "in_reply_to_id" : 856443118,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Fo4I",
      "original_commit_id" : "5238022161a1ecd361916c6f425439e7c7604758",
      "original_line" : 102,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 974200141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873893384/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2022-05-16T15:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873893384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master. Thanks to @furszy for getting the ball rolling on this PR again by pinging me up on IRC (I was planning to wait for #25003, but it seems that this will not be merged soon, as it was suggested to remove the affected tracepoint completely).",
      "created_at" : "2022-05-16T15:57:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1127848930",
      "id" : 1127848930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585DOZvi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127848930/reactions"
      },
      "updated_at" : "2022-05-16T15:57:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127848930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 4c5ceb040cf50d24201903a9200fb23be88d96fb",
      "created_at" : "2022-05-16T20:00:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-1128079570",
      "id" : 1128079570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
      "node_id" : "IC_kwDOABII585DPSDS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128079570/reactions"
      },
      "updated_at" : "2022-05-16T20:00:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128079570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
