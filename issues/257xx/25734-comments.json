[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tagging @furszy , @LarryRuane , @Xekyo , and @aureleoules for review as this addresses feedback from y'all on #24584 . thanks for the thorough review and great suggestions, let me know if i missed anything!",
      "created_at" : "2022-07-29T11:18:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1199162255",
      "id" : 1199162255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585HecOP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199162255/reactions"
      },
      "updated_at" : "2022-07-29T11:18:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199162255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Cool. Obvious concept ACK due co-authoring some of the commits.\r\n\r\nThis cleans a lot of boilerplate code of the recently introduced changes.",
      "created_at" : "2022-07-29T12:16:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1199208731",
      "id" : 1199208731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585Henkb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 1,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199208731/reactions"
      },
      "updated_at" : "2022-07-29T12:16:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199208731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25806](https://github.com/bitcoin/bitcoin/pull/25806) (wallet: single outputs grouping calculation by furszy)\n* [#25789](https://github.com/bitcoin/bitcoin/pull/25789) (test: clean and extend availablecoins_tests coverage by furszy)\n* [#25685](https://github.com/bitcoin/bitcoin/pull/25685) (wallet: Faster transaction creation by removing pre-set-inputs fetching responsibility from Coin Selection by furszy)\n* [#25659](https://github.com/bitcoin/bitcoin/pull/25659) (wallet: simplify ListCoins implementation by furszy)\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#23417](https://github.com/bitcoin/bitcoin/pull/23417) (wallet, spkm: Move key management from DescriptorScriptPubKeyMan to wallet level KeyManager by achow101)\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add getxpub by Sjors)\n* [#19602](https://github.com/bitcoin/bitcoin/pull/19602) (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-07-29T21:59:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1199971878",
      "id" : 1199971878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585Hhh4m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199971878/reactions"
      },
      "updated_at" : "2022-08-16T20:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199971878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r933795213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795213"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this doesn't seem to fix it :/\r\n```\r\npython test/functional/wallet_avoid_mixing_output_types.py\r\n...\r\ntest_framework.authproxy.JSONRPCException: Legacy wallets cannot provide bech32m addresses (-8)\r\n```",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-07-30T11:36:03Z",
      "diff_hunk" : "@@ -124,6 +124,7 @@ def set_test_params(self):\n \n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r933795213",
      "id" : 933795213,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII5843qJWN",
      "original_commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "original_line" : 127,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_avoid_mixing_output_types.py",
      "position" : 4,
      "pull_request_review_id" : 1056294573,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795213/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-30T11:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r933795281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795281"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\r\n```",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-07-30T11:36:31Z",
      "diff_hunk" : "@@ -79,30 +79,70 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-uint64_t CoinsResult::size() const\n+size_t CoinsResult::size() const\n {\n-    return bech32m.size() + bech32.size() + P2SH_segwit.size() + legacy.size() + other.size();\n+    size_t size{0};\n+    for (const auto& it : coins) {\n+        size += it.second.size();\n+    }\n+    return size;\n }\n \n std::vector<COutput> CoinsResult::all() const\n {\n     std::vector<COutput> all;\n     all.reserve(this->size());\n-    all.insert(all.end(), bech32m.begin(), bech32m.end());\n-    all.insert(all.end(), bech32.begin(), bech32.end());\n-    all.insert(all.end(), P2SH_segwit.begin(), P2SH_segwit.end());\n-    all.insert(all.end(), legacy.begin(), legacy.end());\n-    all.insert(all.end(), other.begin(), other.end());\n+    for (const auto& it : coins) {\n+        all.insert(all.end(), it.second.begin(), it.second.end());\n+    }\n     return all;\n }\n \n-void CoinsResult::clear()\n+void CoinsResult::clear() {\n+    coins.clear();\n+}\n+\n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)\n+{\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r933795281",
      "id" : 933795281,
      "line" : 109,
      "node_id" : "PRRC_kwDOABII5843qJXR",
      "original_commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "original_line" : 109,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 39,
      "pull_request_review_id" : 1056294573,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795281/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-30T11:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933795281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934015710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934015710"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i think this is the best we can do right now with the test framework. if no sqlite, skip. if sqlite and bdb, pass the `--descriptors` flag, else the test will fail",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-07-31T17:16:18Z",
      "diff_hunk" : "@@ -124,6 +124,7 @@ def set_test_params(self):\n \n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934015710",
      "id" : 934015710,
      "in_reply_to_id" : 933795213,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII5843q_Le",
      "original_commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "original_line" : 127,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_avoid_mixing_output_types.py",
      "position" : 4,
      "pull_request_review_id" : 1056596142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934015710/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-31T17:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934015710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934720804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934720804"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "would make it private so the field access is encapsulated.",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-08-01T16:38:39Z",
      "diff_hunk" : "@@ -38,6 +38,7 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * the CoinsResult struct as if it was a vector\n  */\n struct CoinsResult {\n+    std::map<OutputType, std::vector<COutput>> coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934720804",
      "id" : 934720804,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5843trUk",
      "original_commit_id" : "b4852bce6a132ffd342b252ba6afce9e532ce27a",
      "original_line" : 41,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 4,
      "pull_request_review_id" : 1057333057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934720804/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-01T18:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934720804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934721187"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934721187"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note: this function will not longer be needed after #25685.",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-08-01T16:39:07Z",
      "diff_hunk" : "@@ -54,6 +55,9 @@ struct CoinsResult {\n      * i.e., methods can work with individual OutputType vectors or on the entire object */\n     uint64_t size() const;\n     void clear();\n+    void erase(std::set<COutPoint>& preset_coins);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934721187",
      "id" : 934721187,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII5843traj",
      "original_commit_id" : "b4852bce6a132ffd342b252ba6afce9e532ce27a",
      "original_line" : 58,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 12,
      "pull_request_review_id" : 1057333057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934721187/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-01T18:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934721187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934803955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934803955"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could assert(false) here.\r\n`DescriptorScriptPubKeyMan::SetupDescriptorGeneration` is called from `CWallet::SetupDescriptorScriptPubKeyMans` and this latter function is already skipping this type.",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-08-01T18:29:52Z",
      "diff_hunk" : "@@ -1966,6 +1966,10 @@ bool DescriptorScriptPubKeyMan::SetupDescriptorGeneration(const CExtKey& master_\n         desc_prefix = \"tr(\" + xpub  + \"/86'\";\n         break;\n     }\n+    case OutputType::UNKNOWN: {\n+        // Do nothing if the address is of UNKNOWN OutputType\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r934803955",
      "id" : 934803955,
      "line" : 1972,
      "node_id" : "PRRC_kwDOABII5843t_nz",
      "original_commit_id" : "c81cb2aa86069e916ec2a50f2d04cd666f56d2c0",
      "original_line" : 1972,
      "original_position" : 7,
      "original_start_line" : 1969,
      "path" : "src/wallet/scriptpubkeyman.cpp",
      "position" : 7,
      "pull_request_review_id" : 1057333057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934803955/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1969,
      "start_side" : "RIGHT",
      "updated_at" : "2022-08-01T18:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934803955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Another point, `CanGetAddresses` and `GetActiveScriptPubKeyMans` loop through the available output types vector as well. And they are not included in [c81cb2a](https://github.com/bitcoin/bitcoin/commit/c81cb2aa86069e916ec2a50f2d04cd666f56d2c0)\r\n\r\nboth functions you mentioned call `GetScriptPubKeyMan()`, which checks if there is a spk_m for the specified output type in either `m_internal_spk_managers` or `m_external_spk_managers`. spk_ms are setup by `SetupDescriptorPubKeyMans`, where we are skipping the unknown type",
      "created_at" : "2022-08-02T08:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1202195124",
      "id" : 1202195124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585HqAq0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202195124/reactions"
      },
      "updated_at" : "2022-08-02T08:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202195124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r935282768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935282768"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "good point, `SetupDescriptorGeneration` is actually defined on the `DescriptorScriptPubKeyMan` and we should never have a spk_m setup for the unknown type, so assert(false) is better than just returning a bool.",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-08-02T08:44:26Z",
      "diff_hunk" : "@@ -1966,6 +1966,10 @@ bool DescriptorScriptPubKeyMan::SetupDescriptorGeneration(const CExtKey& master_\n         desc_prefix = \"tr(\" + xpub  + \"/86'\";\n         break;\n     }\n+    case OutputType::UNKNOWN: {\n+        // Do nothing if the address is of UNKNOWN OutputType\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r935282768",
      "id" : 935282768,
      "in_reply_to_id" : 934803955,
      "line" : 1972,
      "node_id" : "PRRC_kwDOABII5843v0hQ",
      "original_commit_id" : "c81cb2aa86069e916ec2a50f2d04cd666f56d2c0",
      "original_line" : 1972,
      "original_position" : 7,
      "original_start_line" : 1969,
      "path" : "src/wallet/scriptpubkeyman.cpp",
      "position" : 7,
      "pull_request_review_id" : 1058353300,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935282768/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1969,
      "start_side" : "RIGHT",
      "updated_at" : "2022-08-02T08:44:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935282768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r935332262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935332262"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "id prefer to keep it simple for now. im not convinced it's worth re-writing the `coinselection_tests` to create TxoutTypes just to map them back to COutPuts and to add methods just for checking the size in the `availablecoins_tests`",
      "commit_id" : "e40eaf6e1d12afe5fe3ce1bc76fc5a5a84f5bef7",
      "created_at" : "2022-08-02T09:33:30Z",
      "diff_hunk" : "@@ -38,6 +38,7 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * the CoinsResult struct as if it was a vector\n  */\n struct CoinsResult {\n+    std::map<OutputType, std::vector<COutput>> coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r935332262",
      "id" : 935332262,
      "in_reply_to_id" : 934720804,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5843wAmm",
      "original_commit_id" : "b4852bce6a132ffd342b252ba6afce9e532ce27a",
      "original_line" : 41,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 4,
      "pull_request_review_id" : 1058432385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935332262/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-02T09:33:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/935332262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> [3e6cbb2](https://github.com/bitcoin/bitcoin/commit/3e6cbb2d4aa8452f73e43a62d5b4168d212745bf) doesn't compile without [ac0585d](https://github.com/bitcoin/bitcoin/commit/ac0585d4dd0174edd841ac3fc9d0799a6619a804). Better to squash them.\r\n\r\nI split the changes into two commits to make the review easier and to be able to do the second part as a scripted-diff. This is mentioned in the commit message and the description, so it shouldn't be a surprise to reviewers",
      "created_at" : "2022-08-02T09:45:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1202262166",
      "id" : 1202262166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585HqRCW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202262166/reactions"
      },
      "updated_at" : "2022-08-02T09:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202262166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "force pushed to address comments from @furszy and @aureleoules ; `git range-diff master e40eaf6 7089df5`",
      "created_at" : "2022-08-02T10:46:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1202321309",
      "id" : 1202321309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585Hqfed",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202321309/reactions"
      },
      "updated_at" : "2022-08-02T10:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202321309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > [3e6cbb2](https://github.com/bitcoin/bitcoin/commit/3e6cbb2d4aa8452f73e43a62d5b4168d212745bf) doesn't compile without [ac0585d](https://github.com/bitcoin/bitcoin/commit/ac0585d4dd0174edd841ac3fc9d0799a6619a804). Better to squash them.\r\n> \r\n> I split the changes into two commits to make the review easier and to be able to do the second part as a scripted-diff. This is mentioned in the commit message and the description, so it shouldn't be a surprise to reviewers\r\n\r\nIsn't about being surprised by it or not. It's about being able to compile each commit separately while traversing the repository history. It's useful when you are tracking bugs to know where test started failing.\r\nPlus AFAIK, it's a repository \"policy\".",
      "created_at" : "2022-08-02T13:56:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1202626939",
      "id" : 1202626939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585HrqF7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202626939/reactions"
      },
      "updated_at" : "2022-08-02T15:05:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1202626939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Approach ACK: 7089df5e9e084a61d66860e01f5aeffdcd348df9\r\n\r\nI'm leaving a ~few~ minor nit~s~.  Feel free to ignore or take ~them~ it into consideration.",
      "created_at" : "2022-08-03T16:59:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1204232062",
      "id" : 1204232062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585Hxx9-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204232062/reactions"
      },
      "updated_at" : "2022-08-03T18:54:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204232062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/749118?v=4",
         "events_url" : "https://api.github.com/users/adam2k/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adam2k/followers",
         "following_url" : "https://api.github.com/users/adam2k/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adam2k/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adam2k",
         "id" : 749118,
         "login" : "adam2k",
         "node_id" : "MDQ6VXNlcjc0OTExOA==",
         "organizations_url" : "https://api.github.com/users/adam2k/orgs",
         "received_events_url" : "https://api.github.com/users/adam2k/received_events",
         "repos_url" : "https://api.github.com/users/adam2k/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adam2k/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adam2k/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adam2k"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r937007498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/937007498"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: two of the `case` statements with the early `return` have `break;` and the first one does not. Could this be more consistent without the `break;` statements?",
      "commit_id" : "7089df5e9e084a61d66860e01f5aeffdcd348df9",
      "created_at" : "2022-08-03T18:29:04Z",
      "diff_hunk" : "@@ -105,6 +105,49 @@ void CoinsResult::clear()\n     other.clear();\n }\n \n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)\n+{\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::push_back(OutputType type, const COutput& out)\n+{\n+    coins[type].emplace_back(out);\n+}\n+\n+static OutputType getOutputType(TxoutType type, bool is_from_p2sh)\n+{\n+    switch (type) {\n+        case TxoutType::WITNESS_V1_TAPROOT:\n+            return OutputType::BECH32M;\n+        case TxoutType::WITNESS_V0_KEYHASH:\n+        case TxoutType::WITNESS_V0_SCRIPTHASH:\n+            if (is_from_p2sh) return OutputType::P2SH_SEGWIT;\n+            else return OutputType::BECH32;\n+            break;\n+        case TxoutType::SCRIPTHASH:\n+        case TxoutType::PUBKEYHASH:\n+            return OutputType::LEGACY;\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r937007498",
      "id" : 937007498,
      "line" : 142,
      "node_id" : "PRRC_kwDOABII58432ZmK",
      "original_commit_id" : "a0abea26692e63e9205ec68bdbc04cfad8c95a3d",
      "original_line" : 145,
      "original_position" : 41,
      "original_start_line" : 135,
      "path" : "src/wallet/spend.cpp",
      "position" : 41,
      "pull_request_review_id" : 1060822350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/937007498/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 132,
      "start_side" : "RIGHT",
      "updated_at" : "2022-08-03T18:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/937007498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/749118?v=4",
         "events_url" : "https://api.github.com/users/adam2k/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adam2k/followers",
         "following_url" : "https://api.github.com/users/adam2k/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adam2k/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adam2k",
         "id" : 749118,
         "login" : "adam2k",
         "node_id" : "MDQ6VXNlcjc0OTExOA==",
         "organizations_url" : "https://api.github.com/users/adam2k/orgs",
         "received_events_url" : "https://api.github.com/users/adam2k/received_events",
         "repos_url" : "https://api.github.com/users/adam2k/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adam2k/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adam2k/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adam2k"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938112932"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938112932"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a0abea26692e63e9205ec68bdbc04cfad8c95a3d \"refactor: add new helper methods\"\r\n\r\nnit: We prefer UpperCamelCase for function names.",
      "commit_id" : "7089df5e9e084a61d66860e01f5aeffdcd348df9",
      "created_at" : "2022-08-04T18:16:00Z",
      "diff_hunk" : "@@ -105,6 +105,49 @@ void CoinsResult::clear()\n     other.clear();\n }\n \n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)\n+{\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::push_back(OutputType type, const COutput& out)\n+{\n+    coins[type].emplace_back(out);\n+}\n+\n+static OutputType getOutputType(TxoutType type, bool is_from_p2sh)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938112932",
      "id" : 938112932,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII58436nek",
      "original_commit_id" : "a0abea26692e63e9205ec68bdbc04cfad8c95a3d",
      "original_line" : 132,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 28,
      "pull_request_review_id" : 1062400709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938112932/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-04T18:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938112932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113056"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a0abea26692e63e9205ec68bdbc04cfad8c95a3d \"refactor: add new helper methods\"\r\n\r\nnit: We prefer UpperCamelCase for function names.",
      "commit_id" : "7089df5e9e084a61d66860e01f5aeffdcd348df9",
      "created_at" : "2022-08-04T18:16:07Z",
      "diff_hunk" : "@@ -105,6 +105,49 @@ void CoinsResult::clear()\n     other.clear();\n }\n \n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)\n+{\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::push_back(OutputType type, const COutput& out)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113056",
      "id" : 938113056,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII58436ngg",
      "original_commit_id" : "a0abea26692e63e9205ec68bdbc04cfad8c95a3d",
      "original_line" : 127,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 23,
      "pull_request_review_id" : 1062400709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113056/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-04T18:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113060"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a0abea26692e63e9205ec68bdbc04cfad8c95a3d \"refactor: add new helper methods\"\r\n\r\nnit: We prefer UpperCamelCase for function names.",
      "commit_id" : "7089df5e9e084a61d66860e01f5aeffdcd348df9",
      "created_at" : "2022-08-04T18:16:08Z",
      "diff_hunk" : "@@ -105,6 +105,49 @@ void CoinsResult::clear()\n     other.clear();\n }\n \n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)\n+{\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::shuffle(FastRandomContext& rng_fast)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113060",
      "id" : 938113060,
      "line" : 117,
      "node_id" : "PRRC_kwDOABII58436ngk",
      "original_commit_id" : "a0abea26692e63e9205ec68bdbc04cfad8c95a3d",
      "original_line" : 120,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 16,
      "pull_request_review_id" : 1062400709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113060/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-04T18:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113087"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a0abea26692e63e9205ec68bdbc04cfad8c95a3d \"refactor: add new helper methods\"\r\n\r\nnit: We prefer UpperCamelCase for function names.",
      "commit_id" : "7089df5e9e084a61d66860e01f5aeffdcd348df9",
      "created_at" : "2022-08-04T18:16:10Z",
      "diff_hunk" : "@@ -105,6 +105,49 @@ void CoinsResult::clear()\n     other.clear();\n }\n \n+void CoinsResult::erase(std::set<COutPoint>& preset_coins)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r938113087",
      "id" : 938113087,
      "line" : 105,
      "node_id" : "PRRC_kwDOABII58436ng_",
      "original_commit_id" : "a0abea26692e63e9205ec68bdbc04cfad8c95a3d",
      "original_line" : 108,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 4,
      "pull_request_review_id" : 1062400709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113087/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-04T18:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/938113087",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-05T13:55:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1206485783",
      "id" : 1206485783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585H6YMX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206485783/reactions"
      },
      "updated_at" : "2022-08-05T13:55:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206485783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > > [3e6cbb2](https://github.com/bitcoin/bitcoin/commit/3e6cbb2d4aa8452f73e43a62d5b4168d212745bf) doesn't compile without [ac0585d](https://github.com/bitcoin/bitcoin/commit/ac0585d4dd0174edd841ac3fc9d0799a6619a804). Better to squash them.\r\n> > \r\n> > \r\n> > I split the changes into two commits to make the review easier and to be able to do the second part as a scripted-diff. This is mentioned in the commit message and the description, so it shouldn't be a surprise to reviewers\r\n> \r\n> Isn't about being surprised by it or not. It's about being able to compile each commit separately while traversing the repository history. It's useful when you are tracking bugs to know where test started failing. Plus AFAIK, it's a repository \"policy\".\r\n\r\nGood point re: repository history; I squashed the two together so it compiles now",
      "created_at" : "2022-08-10T13:21:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1210666588",
      "id" : 1210666588,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585IKU5c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210666588/reactions"
      },
      "updated_at" : "2022-08-10T13:21:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210666588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "force pushed to rebase, address feedback + a few minor fixups, and added a scripted-diff to uppercase the `CoinsResult` functions. `git range-diff master 7089df5 8cd21bb`",
      "created_at" : "2022-08-10T13:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1210674910",
      "id" : 1210674910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585IKW7e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210674910/reactions"
      },
      "updated_at" : "2022-08-10T13:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210674910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946295387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946295387"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps a `std::map` is overkill since there are only a few fixed types, and they're represented as small integers (since it's an `enum`). It seems like an array, with type as the array index, would be more appropriate. I started to leave a suggestion here to make this an array, but first wanted to check that suggestion would work, so I made the necessary changes and pushed it up to a branch: https://github.com/LarryRuane/bitcoin/commits/suggestions-25734\r\n\r\nThat branch directly modifies only the second commit \"refactor: add new helper methods\", then I cherry-picked the following commits to work with that commit (so the changes to those commits are only side-effects).\r\n\r\nI like the way this came out, but I understand if you would rather not lose any ACKs or take the trouble to cherry-pick this branch. Just a suggestion.",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-16T03:02:29Z",
      "diff_hunk" : "@@ -34,26 +34,22 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * This struct is really just a wrapper around OutputType vectors with a convenient\n  * method for concatenating and returning all COutputs as one vector.\n  *\n- * clear(), size() methods are implemented so that one can interact with\n- * the CoinsResult struct as if it was a vector\n+ * Size(), Clear(), Erase(), Shuffle(), and Add() methods are implemented to\n+ * allow easy interaction with the struct.\n  */\n struct CoinsResult {\n-    /** Vectors for each OutputType */\n-    std::vector<COutput> legacy;\n-    std::vector<COutput> P2SH_segwit;\n-    std::vector<COutput> bech32;\n-    std::vector<COutput> bech32m;\n-\n-    /** Other is a catch-all for anything that doesn't match the known OutputTypes */\n-    std::vector<COutput> other;\n+    std::map<OutputType, std::vector<COutput>> coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946295387",
      "id" : 946295387,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5844Z1Jb",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 41,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 18,
      "pull_request_review_id" : 1073439498,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946295387/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-16T03:05:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946295387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946787875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946787875"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think that this comment is more suited for a commit description, not for the sources. It doesn't provide any meaningful information.",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-16T13:36:07Z",
      "diff_hunk" : "@@ -34,26 +34,18 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * This struct is really just a wrapper around OutputType vectors with a convenient\n  * method for concatenating and returning all COutputs as one vector.\n  *\n- * Clear(), Size() methods are implemented so that one can interact with\n- * the CoinsResult struct as if it was a vector\n+ * Size(), Clear(), Erase(), Shuffle(), and Add() methods are implemented to\n+ * allow easy interaction with the struct.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946787875",
      "id" : 946787875,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5844btYj",
      "original_commit_id" : "db09aec9378c5e8cc49c866fa50bfcb6c567d66c",
      "original_line" : 38,
      "original_position" : 7,
      "original_start_line" : 37,
      "path" : "src/wallet/spend.h",
      "position" : 7,
      "pull_request_review_id" : 1074131502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946787875/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 37,
      "start_side" : "RIGHT",
      "updated_at" : "2022-08-16T13:44:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946787875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946830465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946830465"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Quick look on GitHub while waiting for a build:\r\n - any reason not to inline some of these methods? i.e. remove it from the .cpp and change the .h file to the following:\r\n```cpp\r\nvoid Add(OutputType type, const COutput& output) { coins[type].emplace_back(output); }\r\n```\r\n  same for Clear() (and maybe Shuffle() but only if it's a hotspot)\r\n\r\n- naming nit: a param named `out` reads like an out-param; maybe `output` instead\r\n- header nit: maybe add missing `#include <random.h>` in the commit where the call to `::Shuffle` is added, feel free to ignore",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-16T14:11:52Z",
      "diff_hunk" : "@@ -79,30 +79,68 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-uint64_t CoinsResult::size() const\n+size_t CoinsResult::Size() const\n {\n-    return bech32m.size() + bech32.size() + P2SH_segwit.size() + legacy.size() + other.size();\n+    size_t size{0};\n+    for (const auto& it : coins) {\n+        size += it.second.size();\n+    }\n+    return size;\n }\n \n-std::vector<COutput> CoinsResult::all() const\n+std::vector<COutput> CoinsResult::All() const\n {\n     std::vector<COutput> all;\n-    all.reserve(this->size());\n-    all.insert(all.end(), bech32m.begin(), bech32m.end());\n-    all.insert(all.end(), bech32.begin(), bech32.end());\n-    all.insert(all.end(), P2SH_segwit.begin(), P2SH_segwit.end());\n-    all.insert(all.end(), legacy.begin(), legacy.end());\n-    all.insert(all.end(), other.begin(), other.end());\n+    all.reserve(coins.size());\n+    for (const auto& it : coins) {\n+        all.insert(all.end(), it.second.begin(), it.second.end());\n+    }\n     return all;\n }\n \n-void CoinsResult::clear()\n+void CoinsResult::Clear() {\n+    coins.clear();\n+}\n+\n+void CoinsResult::Erase(std::set<COutPoint>& preset_coins)\n {\n-    bech32m.clear();\n-    bech32.clear();\n-    P2SH_segwit.clear();\n-    legacy.clear();\n-    other.clear();\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::Shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        ::Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::Add(OutputType type, const COutput& out)\n+{\n+    coins[type].emplace_back(out);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r946830465",
      "id" : 946830465,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII5844b3yB",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 127,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 64,
      "pull_request_review_id" : 1074193457,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946830465/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-17T11:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946830465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-17T00:00:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#issuecomment-1217289383",
      "id" : 1217289383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25734",
      "node_id" : "IC_kwDOABII585Ijlyn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217289383/reactions"
      },
      "updated_at" : "2022-08-17T00:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217289383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947793814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947793814"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review and suggestions, @LarryRuane and sorry for the slow response. I do like this approach. Will definitely keep this in mind if I am working on the `CoinsResult` struct again soon",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-17T11:06:37Z",
      "diff_hunk" : "@@ -34,26 +34,22 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * This struct is really just a wrapper around OutputType vectors with a convenient\n  * method for concatenating and returning all COutputs as one vector.\n  *\n- * clear(), size() methods are implemented so that one can interact with\n- * the CoinsResult struct as if it was a vector\n+ * Size(), Clear(), Erase(), Shuffle(), and Add() methods are implemented to\n+ * allow easy interaction with the struct.\n  */\n struct CoinsResult {\n-    /** Vectors for each OutputType */\n-    std::vector<COutput> legacy;\n-    std::vector<COutput> P2SH_segwit;\n-    std::vector<COutput> bech32;\n-    std::vector<COutput> bech32m;\n-\n-    /** Other is a catch-all for anything that doesn't match the known OutputTypes */\n-    std::vector<COutput> other;\n+    std::map<OutputType, std::vector<COutput>> coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947793814",
      "id" : 947793814,
      "in_reply_to_id" : 946295387,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5844fi-W",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 41,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 18,
      "pull_request_review_id" : 1075527112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947793814/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-17T11:06:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947793814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947794682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947794682"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "good point, I'll remove if I touch this in a later PR",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-17T11:07:43Z",
      "diff_hunk" : "@@ -34,26 +34,18 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n  * This struct is really just a wrapper around OutputType vectors with a convenient\n  * method for concatenating and returning all COutputs as one vector.\n  *\n- * Clear(), Size() methods are implemented so that one can interact with\n- * the CoinsResult struct as if it was a vector\n+ * Size(), Clear(), Erase(), Shuffle(), and Add() methods are implemented to\n+ * allow easy interaction with the struct.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947794682",
      "id" : 947794682,
      "in_reply_to_id" : 946787875,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5844fjL6",
      "original_commit_id" : "db09aec9378c5e8cc49c866fa50bfcb6c567d66c",
      "original_line" : 38,
      "original_position" : 7,
      "original_start_line" : 37,
      "path" : "src/wallet/spend.h",
      "position" : 7,
      "pull_request_review_id" : 1075528426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947794682/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 37,
      "start_side" : "RIGHT",
      "updated_at" : "2022-08-17T11:07:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947794682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947796210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947796210"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @jonatack , great suggestions. Generally speaking, is there a heuristic we use in core for when to inline vs not?\r\n\r\nAlso, will include your suggestions if working with `CoinsResult` again",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-17T11:09:39Z",
      "diff_hunk" : "@@ -79,30 +79,68 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-uint64_t CoinsResult::size() const\n+size_t CoinsResult::Size() const\n {\n-    return bech32m.size() + bech32.size() + P2SH_segwit.size() + legacy.size() + other.size();\n+    size_t size{0};\n+    for (const auto& it : coins) {\n+        size += it.second.size();\n+    }\n+    return size;\n }\n \n-std::vector<COutput> CoinsResult::all() const\n+std::vector<COutput> CoinsResult::All() const\n {\n     std::vector<COutput> all;\n-    all.reserve(this->size());\n-    all.insert(all.end(), bech32m.begin(), bech32m.end());\n-    all.insert(all.end(), bech32.begin(), bech32.end());\n-    all.insert(all.end(), P2SH_segwit.begin(), P2SH_segwit.end());\n-    all.insert(all.end(), legacy.begin(), legacy.end());\n-    all.insert(all.end(), other.begin(), other.end());\n+    all.reserve(coins.size());\n+    for (const auto& it : coins) {\n+        all.insert(all.end(), it.second.begin(), it.second.end());\n+    }\n     return all;\n }\n \n-void CoinsResult::clear()\n+void CoinsResult::Clear() {\n+    coins.clear();\n+}\n+\n+void CoinsResult::Erase(std::set<COutPoint>& preset_coins)\n {\n-    bech32m.clear();\n-    bech32.clear();\n-    P2SH_segwit.clear();\n-    legacy.clear();\n-    other.clear();\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::Shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        ::Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::Add(OutputType type, const COutput& out)\n+{\n+    coins[type].emplace_back(out);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947796210",
      "id" : 947796210,
      "in_reply_to_id" : 946830465,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII5844fjjy",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 127,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 64,
      "pull_request_review_id" : 1075531644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947796210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-17T11:09:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947796210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947814513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947814513"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> when to inline vs not?\r\n\r\nInlining improves performance with the potential trade-off of increasing the code in the .h file and making changes to it slower to compile, so I think about it as: inline where performance is important, or for methods that are both very short (e.g. a single line or maybe 2-3) and that don't add an include dependency to the header file (rather than in the implementation file).  Maybe people have other criteria or thoughts about it, though.",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-17T11:29:46Z",
      "diff_hunk" : "@@ -79,30 +79,68 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-uint64_t CoinsResult::size() const\n+size_t CoinsResult::Size() const\n {\n-    return bech32m.size() + bech32.size() + P2SH_segwit.size() + legacy.size() + other.size();\n+    size_t size{0};\n+    for (const auto& it : coins) {\n+        size += it.second.size();\n+    }\n+    return size;\n }\n \n-std::vector<COutput> CoinsResult::all() const\n+std::vector<COutput> CoinsResult::All() const\n {\n     std::vector<COutput> all;\n-    all.reserve(this->size());\n-    all.insert(all.end(), bech32m.begin(), bech32m.end());\n-    all.insert(all.end(), bech32.begin(), bech32.end());\n-    all.insert(all.end(), P2SH_segwit.begin(), P2SH_segwit.end());\n-    all.insert(all.end(), legacy.begin(), legacy.end());\n-    all.insert(all.end(), other.begin(), other.end());\n+    all.reserve(coins.size());\n+    for (const auto& it : coins) {\n+        all.insert(all.end(), it.second.begin(), it.second.end());\n+    }\n     return all;\n }\n \n-void CoinsResult::clear()\n+void CoinsResult::Clear() {\n+    coins.clear();\n+}\n+\n+void CoinsResult::Erase(std::set<COutPoint>& preset_coins)\n {\n-    bech32m.clear();\n-    bech32.clear();\n-    P2SH_segwit.clear();\n-    legacy.clear();\n-    other.clear();\n+    for (auto& it : coins) {\n+        auto& vec = it.second;\n+        auto i = std::find_if(vec.begin(), vec.end(), [&](const COutput &c) { return preset_coins.count(c.outpoint);});\n+        if (i != vec.end()) {\n+            vec.erase(i);\n+            break;\n+        }\n+    }\n+}\n+\n+void CoinsResult::Shuffle(FastRandomContext& rng_fast)\n+{\n+    for (auto& it : coins) {\n+        ::Shuffle(it.second.begin(), it.second.end(), rng_fast);\n+    }\n+}\n+\n+void CoinsResult::Add(OutputType type, const COutput& out)\n+{\n+    coins[type].emplace_back(out);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r947814513",
      "id" : 947814513,
      "in_reply_to_id" : 946830465,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII5844foBx",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 127,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 64,
      "pull_request_review_id" : 1075556291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947814513/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-17T11:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947814513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r949502998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949502998"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=50329",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-18T19:04:53Z",
      "diff_hunk" : "@@ -19,13 +19,15 @@ enum class OutputType {\n     P2SH_SEGWIT,\n     BECH32,\n     BECH32M,\n+    UNKNOWN,\n };\n \n static constexpr auto OUTPUT_TYPES = std::array{\n     OutputType::LEGACY,\n     OutputType::P2SH_SEGWIT,\n     OutputType::BECH32,\n     OutputType::BECH32M,\n+    OutputType::UNKNOWN,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r949502998",
      "id" : 949502998,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII5844mEQW",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 30,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/outputtype.h",
      "position" : 12,
      "pull_request_review_id" : 1077862459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949502998/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-18T19:04:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949502998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r949535952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949535952"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Straightforward #25869",
      "commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "created_at" : "2022-08-18T19:49:30Z",
      "diff_hunk" : "@@ -19,13 +19,15 @@ enum class OutputType {\n     P2SH_SEGWIT,\n     BECH32,\n     BECH32M,\n+    UNKNOWN,\n };\n \n static constexpr auto OUTPUT_TYPES = std::array{\n     OutputType::LEGACY,\n     OutputType::P2SH_SEGWIT,\n     OutputType::BECH32,\n     OutputType::BECH32M,\n+    OutputType::UNKNOWN,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25734#discussion_r949535952",
      "id" : 949535952,
      "in_reply_to_id" : 949502998,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII5844mMTQ",
      "original_commit_id" : "8cd21bb2799d37ed00dc9d0490bb5f5f1375932b",
      "original_line" : 30,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/outputtype.h",
      "position" : 12,
      "pull_request_review_id" : 1077909909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25734",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949535952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-18T19:49:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/949535952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   }
]
