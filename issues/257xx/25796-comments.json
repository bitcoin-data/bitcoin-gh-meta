[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1555399958), [instagibbs](https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1555885480) |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1207443331), [Sjors](https://github.com/bitcoin/bitcoin/pull/25796#pullrequestreview-1065169942) |\n| Approach ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/25796#pullrequestreview-1162450535) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-08-07T09:35:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1207368407",
      "id" : 1207368407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585H9vrX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207368407/reactions"
      },
      "updated_at" : "2023-05-20T10:49:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207368407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR implements the last suggestion in #14739 (with a slightly modified name)",
      "created_at" : "2022-08-07T14:40:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1207423061",
      "id" : 1207423061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585H99BV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207423061/reactions"
      },
      "updated_at" : "2022-08-07T14:40:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207423061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r939680058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/939680058"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This changes the behavior of `utxoupdatepsbt` since previously it didn't throw an error if an input has already been spent or doesn't exist. I'm not sure if the lack of an error here when `utxoupdatepsbt` was initially implemented was intentional. If it was intentional, then I will remove this. ",
      "commit_id" : "0061b6d8bf42b13e8d2990f9c72ec6c98fe99f9e",
      "created_at" : "2022-08-07T14:52:05Z",
      "diff_hunk" : "@@ -162,6 +162,76 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors.\n+// Optionally sign the inputs which we can using information from the descriptors.\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider, int sighash_type = 1, bool finalize = false)\n+{\n+    // Unserialize the transactions\n+    PartiallySignedTransaction psbtx;\n+    std::string error;\n+    if (!DecodeBase64PSBT(psbtx, request.params[0].get_str(), error)) {\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, strprintf(\"TX decode failed %s\", error));\n+    }\n+\n+    // Fetch previous transactions (inputs):\n+    CCoinsView viewDummy;\n+    CCoinsViewCache view(&viewDummy);\n+    {\n+        NodeContext& node = EnsureAnyNodeContext(request.context);\n+        const CTxMemPool& mempool = EnsureMemPool(node);\n+        ChainstateManager& chainman = EnsureChainman(node);\n+        LOCK2(cs_main, mempool.cs);\n+        CCoinsViewCache &viewChain = chainman.ActiveChainstate().CoinsTip();\n+        CCoinsViewMemPool viewMempool(&viewChain, mempool);\n+        view.SetBackend(viewMempool); // temporarily switch cache backend to db+mempool view\n+\n+        for (const CTxIn& txin : psbtx.tx->vin) {\n+            view.AccessCoin(txin.prevout); // Load entries from viewChain into view; can fail.\n+        }\n+\n+        view.SetBackend(viewDummy); // switch back to avoid locking mempool for too long\n+    }\n+\n+    // Fill the inputs\n+    for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+        PSBTInput& input = psbtx.inputs.at(i);\n+\n+        if (input.non_witness_utxo || !input.witness_utxo.IsNull()) {\n+            continue;\n+        }\n+\n+        const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n+\n+        if (coin.IsSpent()) {\n+            throw JSONRPCError(RPC_VERIFY_ERROR, \"Input not found or already spent\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r939680058",
      "id" : 939680058,
      "line" : 206,
      "node_id" : "PRRC_kwDOABII5844AmE6",
      "original_commit_id" : "0061b6d8bf42b13e8d2990f9c72ec6c98fe99f9e",
      "original_line" : 206,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 45,
      "pull_request_review_id" : 1064434861,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/939680058/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-07T14:52:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/939680058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n<details><summary>A few suggestions for your consideration</summary><p>\r\n\r\n```diff\r\ndiff --git a/src/rpc/rawtransaction.cpp b/src/rpc/rawtransaction.cpp\r\nindex b6715f7f20..1ccc267ec1 100644\r\n--- a/src/rpc/rawtransaction.cpp\r\n+++ b/src/rpc/rawtransaction.cpp\r\n@@ -164,7 +164,7 @@ static std::vector<RPCArg> CreateTxDoc()\r\n \r\n // Update PSBT with information from the mempool, the UTXO set, and the provided descriptors.\r\n // Optionally sign the inputs which we can using information from the descriptors.\r\n-PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider, int sighash_type = 1, bool finalize = false)\r\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider& provider, int sighash_type, bool finalize)\r\n {\r\n     // Unserialize the transactions\r\n     PartiallySignedTransaction psbtx;\r\n@@ -179,11 +179,9 @@ PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const Hidi\r\n     {\r\n-        NodeContext& node = EnsureAnyNodeContext(request.context);\r\n+        const NodeContext& node = EnsureAnyNodeContext(request.context);\r\n         const CTxMemPool& mempool = EnsureMemPool(node);\r\n-        ChainstateManager& chainman = EnsureChainman(node);\r\n-        LOCK2(cs_main, mempool.cs);\r\n-        CCoinsViewCache &viewChain = chainman.ActiveChainstate().CoinsTip();\r\n-        CCoinsViewMemPool viewMempool(&viewChain, mempool);\r\n-        view.SetBackend(viewMempool); // temporarily switch cache backend to db+mempool view\r\n+        LOCK2(::cs_main, mempool.cs);\r\n+        CCoinsViewMemPool view_mempool{&EnsureChainman(node).ActiveChainstate().CoinsTip(), mempool};\r\n+        view.SetBackend(view_mempool); // temporarily switch cache backend to db+mempool view\r\n \r\n         for (const CTxIn& txin : psbtx.tx->vin) {\r\n             view.AccessCoin(txin.prevout); // Load entries from viewChain into view; can fail.\r\n@@ -211,7 +209,7 @@ PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const Hidi\r\n         }\r\n     }\r\n \r\n-    const PrecomputedTransactionData txdata = PrecomputePSBTData(psbtx);\r\n+    const PrecomputedTransactionData& txdata = PrecomputePSBTData(psbtx);\r\n \r\n     for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\r\n         if (PSBTInputSigned(psbtx.inputs.at(i))) {\r\n@@ -220,9 +218,9 @@ PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const Hidi\r\n \r\n         // Update script/keypath information using descriptor data.\r\n         // Note that SignPSBTInput does a lot more than just constructing ECDSA signatures.\r\n-        // We only actually care about those if our signing provider doesn't hide private \r\n+        // We only actually care about those if our signing provider doesn't hide private\r\n         // information, as is the case with `descriptorprocesspsbt`\r\n-        SignPSBTInput(provider, psbtx, i, &txdata, sighash_type, nullptr, finalize);\r\n+        SignPSBTInput(provider, psbtx, /*index=*/i, &txdata, sighash_type, /*out_sigdata=*/nullptr, finalize);\r\n     }\r\n \r\n     // Update script/keypath information using descriptor data.\r\n@@ -1649,7 +1647,11 @@ static RPCHelpMan utxoupdatepsbt()\r\n     }\r\n \r\n     // We don't actually need private keys further on; hide them as a precaution.\r\n-    PartiallySignedTransaction psbtx = ProcessPSBT(request, HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false));\r\n+    const PartiallySignedTransaction& psbtx = ProcessPSBT(\r\n+        request,\r\n+        HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false),\r\n+        /*sighash_type=*/1,\r\n+        /*finalize=*/false);\r\n \r\n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\r\n     ssTx << psbtx;\r\ndiff --git a/src/rpc/util.cpp b/src/rpc/util.cpp\r\nindex d5693dc555..86311adfed 100644\r\n--- a/src/rpc/util.cpp\r\n+++ b/src/rpc/util.cpp\r\n@@ -1087,7 +1087,7 @@ std::vector<CScript> EvalDescriptorStringOrObject(const UniValue& scanobject, Fl\r\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Cannot derive script without private keys: '%s'\", desc_str));\r\n         }\r\n         if (expand_priv) {\r\n-            desc->ExpandPrivate(i, provider, provider);\r\n+            desc->ExpandPrivate(/*pos=*/i, provider, /*out=*/provider);\r\n         }\r\n         std::move(scripts.begin(), scripts.end(), std::back_inserter(ret));\r\n     }\r\ndiff --git a/test/functional/rpc_psbt.py b/test/functional/rpc_psbt.py\r\nindex d6db6fbfc6..b7a2a4628f 100755\r\n--- a/test/functional/rpc_psbt.py\r\n+++ b/test/functional/rpc_psbt.py\r\n@@ -581,7 +581,7 @@ class PSBTTest(BitcoinTestFramework):\r\n                 break\r\n         assert shuffled\r\n \r\n-        # Test that we can update and sign a psbt with descriptors\r\n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\r\n         key_info = get_generate_key()\r\n         key1 = key_info[0]\r\n         wpkh_addr = key_info[5]\r\n```\r\n</p></details>\r\n",
      "created_at" : "2022-08-07T16:36:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1207443331",
      "id" : 1207443331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585H-B-D",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207443331/reactions"
      },
      "updated_at" : "2022-08-07T17:06:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207443331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @jonatack, I've implemented you're suggestions",
      "created_at" : "2022-08-07T23:39:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1207509242",
      "id" : 1207509242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585H-SD6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207509242/reactions"
      },
      "updated_at" : "2022-08-07T23:39:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1207509242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940230739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940230739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "b7c6179db597d00b465b4e83047af56292e372a6  Not sure what the original intention was, @achow101? Perhaps it's useful to be able to process a PSBT on a node that's behind (knows about its own cold storage UTXO, but not about others)?\r\n\r\nIn any case it should probably be its own commit (along with the test you added in the next commit)",
      "commit_id" : "4d1f46cc50aca561a141d1fe3ea292acc0338160",
      "created_at" : "2022-08-08T13:21:05Z",
      "diff_hunk" : "@@ -162,6 +162,76 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors.\n+// Optionally sign the inputs which we can using information from the descriptors.\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider, int sighash_type = 1, bool finalize = false)\n+{\n+    // Unserialize the transactions\n+    PartiallySignedTransaction psbtx;\n+    std::string error;\n+    if (!DecodeBase64PSBT(psbtx, request.params[0].get_str(), error)) {\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, strprintf(\"TX decode failed %s\", error));\n+    }\n+\n+    // Fetch previous transactions (inputs):\n+    CCoinsView viewDummy;\n+    CCoinsViewCache view(&viewDummy);\n+    {\n+        NodeContext& node = EnsureAnyNodeContext(request.context);\n+        const CTxMemPool& mempool = EnsureMemPool(node);\n+        ChainstateManager& chainman = EnsureChainman(node);\n+        LOCK2(cs_main, mempool.cs);\n+        CCoinsViewCache &viewChain = chainman.ActiveChainstate().CoinsTip();\n+        CCoinsViewMemPool viewMempool(&viewChain, mempool);\n+        view.SetBackend(viewMempool); // temporarily switch cache backend to db+mempool view\n+\n+        for (const CTxIn& txin : psbtx.tx->vin) {\n+            view.AccessCoin(txin.prevout); // Load entries from viewChain into view; can fail.\n+        }\n+\n+        view.SetBackend(viewDummy); // switch back to avoid locking mempool for too long\n+    }\n+\n+    // Fill the inputs\n+    for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+        PSBTInput& input = psbtx.inputs.at(i);\n+\n+        if (input.non_witness_utxo || !input.witness_utxo.IsNull()) {\n+            continue;\n+        }\n+\n+        const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n+\n+        if (coin.IsSpent()) {\n+            throw JSONRPCError(RPC_VERIFY_ERROR, \"Input not found or already spent\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940230739",
      "id" : 940230739,
      "in_reply_to_id" : 939680058,
      "line" : 204,
      "node_id" : "PRRC_kwDOABII5844CshT",
      "original_commit_id" : "0061b6d8bf42b13e8d2990f9c72ec6c98fe99f9e",
      "original_line" : 204,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 43,
      "pull_request_review_id" : 1065169942,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940230739/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T13:36:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940230739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940536508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940536508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 58f265f4de0051bbecb0f7e367a39258b24d5a40 \"rpc: extract psbt updating logic into ProcessPSBT()\"\r\n\r\nI think it would be better to give the `UniValue` for the PSBT and a `NodeContext` rather than passing in the entire `JSONRPCRequest`.",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T18:26:17Z",
      "diff_hunk" : "@@ -162,6 +162,61 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940536508",
      "id" : 940536508,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844D3K8",
      "original_commit_id" : "58f265f4de0051bbecb0f7e367a39258b24d5a40",
      "original_line" : 166,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065606228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940536508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T18:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940536508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940537232"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940537232"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In b7c6179db597d00b465b4e83047af56292e372a6 \"rpc: add descriptorprocesspsbt rpc\"\r\n\r\nnit: snake_case",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T18:27:10Z",
      "diff_hunk" : "@@ -1857,6 +1874,83 @@ static RPCHelpMan analyzepsbt()\n     };\n }\n \n+RPCHelpMan descriptorprocesspsbt()\n+{\n+    return RPCHelpMan{\"descriptorprocesspsbt\",\n+                \"\\nUpdate all segwit inputs in a PSBT with information from output descriptors, the UTXO set or the mempool. \\n\"\n+                \"Then, sign the inputs we are able to with information from the output descriptors. \",\n+                {\n+                    {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The transaction base64 string\"},\n+                    {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of either strings or objects\", {\n+                        {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"An output descriptor\"},\n+                        {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with an output descriptor and extra information\", {\n+                             {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"An output descriptor\"},\n+                             {\"range\", RPCArg::Type::RANGE, RPCArg::Default{1000}, \"Up to what index HD chains should be explored (either end or [begin,end])\"},\n+                        }},\n+                    }},\n+                    {\"sighashtype\", RPCArg::Type::STR, RPCArg::Default{\"DEFAULT for Taproot, ALL otherwise\"}, \"The signature hash type to sign with if not specified by the PSBT. Must be one of\\n\"\n+            \"       \\\"DEFAULT\\\"\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\"},\n+                    {\"bip32derivs\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Include BIP 32 derivation paths for public keys if we know them\"},\n+                    {\"finalize\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Also finalize inputs if possible\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"psbt\", \"The base64-encoded partially signed transaction\"},\n+                        {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[\\\\\\\"descriptor1\\\\\\\", \\\\\\\"descriptor2\\\\\\\"]\\\"\") +\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[{\\\\\\\"desc\\\\\\\":\\\\\\\"mydescriptor\\\\\\\", \\\\\\\"range\\\\\\\":21}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheck(request.params, {UniValue::VSTR, UniValue::VARR});\n+\n+    // Add descriptor information to a signing provider\n+    FlatSigningProvider provider;\n+\n+    auto descs = request.params[1].get_array();\n+    for (size_t i = 0; i < descs.size(); ++i) {\n+        EvalDescriptorStringOrObject(descs[i], provider, /*expand_priv=*/true);\n+    }\n+\n+    int nHashType = ParseSighashString(request.params[2]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940537232",
      "id" : 940537232,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844D3WQ",
      "original_commit_id" : "b7c6179db597d00b465b4e83047af56292e372a6",
      "original_line" : 1925,
      "original_position" : 116,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065606228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940537232/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T18:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940537232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940540574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940540574"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't remember if it was intentional, however a PSBT could spend UTXOs that do not exist yet (e.g. not-yet-broadcast transactions) so I think it would still be correct to allow UTXOs that do not exist.",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T18:30:28Z",
      "diff_hunk" : "@@ -162,6 +162,76 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors.\n+// Optionally sign the inputs which we can using information from the descriptors.\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider, int sighash_type = 1, bool finalize = false)\n+{\n+    // Unserialize the transactions\n+    PartiallySignedTransaction psbtx;\n+    std::string error;\n+    if (!DecodeBase64PSBT(psbtx, request.params[0].get_str(), error)) {\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, strprintf(\"TX decode failed %s\", error));\n+    }\n+\n+    // Fetch previous transactions (inputs):\n+    CCoinsView viewDummy;\n+    CCoinsViewCache view(&viewDummy);\n+    {\n+        NodeContext& node = EnsureAnyNodeContext(request.context);\n+        const CTxMemPool& mempool = EnsureMemPool(node);\n+        ChainstateManager& chainman = EnsureChainman(node);\n+        LOCK2(cs_main, mempool.cs);\n+        CCoinsViewCache &viewChain = chainman.ActiveChainstate().CoinsTip();\n+        CCoinsViewMemPool viewMempool(&viewChain, mempool);\n+        view.SetBackend(viewMempool); // temporarily switch cache backend to db+mempool view\n+\n+        for (const CTxIn& txin : psbtx.tx->vin) {\n+            view.AccessCoin(txin.prevout); // Load entries from viewChain into view; can fail.\n+        }\n+\n+        view.SetBackend(viewDummy); // switch back to avoid locking mempool for too long\n+    }\n+\n+    // Fill the inputs\n+    for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+        PSBTInput& input = psbtx.inputs.at(i);\n+\n+        if (input.non_witness_utxo || !input.witness_utxo.IsNull()) {\n+            continue;\n+        }\n+\n+        const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n+\n+        if (coin.IsSpent()) {\n+            throw JSONRPCError(RPC_VERIFY_ERROR, \"Input not found or already spent\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940540574",
      "id" : 940540574,
      "in_reply_to_id" : 939680058,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844D4Ke",
      "original_commit_id" : "0061b6d8bf42b13e8d2990f9c72ec6c98fe99f9e",
      "original_line" : 204,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065606228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940540574/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T18:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940540574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940604387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940604387"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Makes sense, in that case I'll remove this. ",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T19:45:30Z",
      "diff_hunk" : "@@ -162,6 +162,76 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors.\n+// Optionally sign the inputs which we can using information from the descriptors.\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider, int sighash_type = 1, bool finalize = false)\n+{\n+    // Unserialize the transactions\n+    PartiallySignedTransaction psbtx;\n+    std::string error;\n+    if (!DecodeBase64PSBT(psbtx, request.params[0].get_str(), error)) {\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, strprintf(\"TX decode failed %s\", error));\n+    }\n+\n+    // Fetch previous transactions (inputs):\n+    CCoinsView viewDummy;\n+    CCoinsViewCache view(&viewDummy);\n+    {\n+        NodeContext& node = EnsureAnyNodeContext(request.context);\n+        const CTxMemPool& mempool = EnsureMemPool(node);\n+        ChainstateManager& chainman = EnsureChainman(node);\n+        LOCK2(cs_main, mempool.cs);\n+        CCoinsViewCache &viewChain = chainman.ActiveChainstate().CoinsTip();\n+        CCoinsViewMemPool viewMempool(&viewChain, mempool);\n+        view.SetBackend(viewMempool); // temporarily switch cache backend to db+mempool view\n+\n+        for (const CTxIn& txin : psbtx.tx->vin) {\n+            view.AccessCoin(txin.prevout); // Load entries from viewChain into view; can fail.\n+        }\n+\n+        view.SetBackend(viewDummy); // switch back to avoid locking mempool for too long\n+    }\n+\n+    // Fill the inputs\n+    for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+        PSBTInput& input = psbtx.inputs.at(i);\n+\n+        if (input.non_witness_utxo || !input.witness_utxo.IsNull()) {\n+            continue;\n+        }\n+\n+        const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n+\n+        if (coin.IsSpent()) {\n+            throw JSONRPCError(RPC_VERIFY_ERROR, \"Input not found or already spent\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940604387",
      "id" : 940604387,
      "in_reply_to_id" : 939680058,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844EHvj",
      "original_commit_id" : "0061b6d8bf42b13e8d2990f9c72ec6c98fe99f9e",
      "original_line" : 204,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065706718,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940604387/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T19:45:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940604387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940608267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608267"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T19:50:43Z",
      "diff_hunk" : "@@ -1857,6 +1874,83 @@ static RPCHelpMan analyzepsbt()\n     };\n }\n \n+RPCHelpMan descriptorprocesspsbt()\n+{\n+    return RPCHelpMan{\"descriptorprocesspsbt\",\n+                \"\\nUpdate all segwit inputs in a PSBT with information from output descriptors, the UTXO set or the mempool. \\n\"\n+                \"Then, sign the inputs we are able to with information from the output descriptors. \",\n+                {\n+                    {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The transaction base64 string\"},\n+                    {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of either strings or objects\", {\n+                        {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"An output descriptor\"},\n+                        {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with an output descriptor and extra information\", {\n+                             {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"An output descriptor\"},\n+                             {\"range\", RPCArg::Type::RANGE, RPCArg::Default{1000}, \"Up to what index HD chains should be explored (either end or [begin,end])\"},\n+                        }},\n+                    }},\n+                    {\"sighashtype\", RPCArg::Type::STR, RPCArg::Default{\"DEFAULT for Taproot, ALL otherwise\"}, \"The signature hash type to sign with if not specified by the PSBT. Must be one of\\n\"\n+            \"       \\\"DEFAULT\\\"\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\"},\n+                    {\"bip32derivs\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Include BIP 32 derivation paths for public keys if we know them\"},\n+                    {\"finalize\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Also finalize inputs if possible\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"psbt\", \"The base64-encoded partially signed transaction\"},\n+                        {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[\\\\\\\"descriptor1\\\\\\\", \\\\\\\"descriptor2\\\\\\\"]\\\"\") +\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[{\\\\\\\"desc\\\\\\\":\\\\\\\"mydescriptor\\\\\\\", \\\\\\\"range\\\\\\\":21}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheck(request.params, {UniValue::VSTR, UniValue::VARR});\n+\n+    // Add descriptor information to a signing provider\n+    FlatSigningProvider provider;\n+\n+    auto descs = request.params[1].get_array();\n+    for (size_t i = 0; i < descs.size(); ++i) {\n+        EvalDescriptorStringOrObject(descs[i], provider, /*expand_priv=*/true);\n+    }\n+\n+    int nHashType = ParseSighashString(request.params[2]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940608267",
      "id" : 940608267,
      "in_reply_to_id" : 940537232,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844EIsL",
      "original_commit_id" : "b7c6179db597d00b465b4e83047af56292e372a6",
      "original_line" : 1925,
      "original_position" : 116,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065712230,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608267/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T19:50:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940608531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608531"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "09ba185dfb171b7f48decc53023da85a1d6c0c9b",
      "created_at" : "2022-08-08T19:51:06Z",
      "diff_hunk" : "@@ -162,6 +162,61 @@ static std::vector<RPCArg> CreateTxDoc()\n     };\n }\n \n+// Update PSBT with information from the mempool, the UTXO set, and the provided descriptors\n+PartiallySignedTransaction ProcessPSBT(const JSONRPCRequest& request, const HidingSigningProvider provider)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r940608531",
      "id" : 940608531,
      "in_reply_to_id" : 940536508,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844EIwT",
      "original_commit_id" : "58f265f4de0051bbecb0f7e367a39258b24d5a40",
      "original_line" : 166,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1065712610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608531/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-08T19:51:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/940608531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "While working on this PR, I noticed that it might be useful for `utxoupdatepbst` to also look in the txindex (if enabled) for the full tx that an input is spending from, which would allow legacy inputs to be updated as well. I have opened a separate PR for this, #25939, and this PR builds on top of that one so that `descriptorprocesspsbt` can do this as well.",
      "created_at" : "2022-08-26T19:14:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1228830963",
      "id" : 1228830963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585JPnjz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1228830963/reactions"
      },
      "updated_at" : "2022-08-26T19:14:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1228830963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1009788787"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009788787"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 2b67f9b73143e07a30add5f372395a612762da46 \"rpc: add descriptorprocesspsbt rpc\"\r\n\r\nSeems like this should be in the previous commit.",
      "commit_id" : "c2e4a182ae417507142c6ae4e168e31d2ef81d1b",
      "created_at" : "2022-10-31T19:33:12Z",
      "diff_hunk" : "@@ -207,25 +208,34 @@ PartiallySignedTransaction ProcessPSBT(const std::string& psbt_string, const std\n     }\n \n     // If we still haven't found all of the inputs, look for the missing ones in the utxo set\n-    if (!coins.empty()) FindCoins(node, coins);\n+    if (!coins.empty()) {\n+        FindCoins(node, coins);\n+        for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+            PSBTInput& input = psbtx.inputs.at(i);\n+\n+            // If there are still missing utxos, add them if they were found in the utxo set\n+            if (!input.non_witness_utxo) {\n+                const CTxIn& tx_in = psbtx.tx->vin.at(i);\n+                const Coin& coin = coins.at(tx_in.prevout);\n+                if (IsSegWitOutput(provider, coin.out.scriptPubKey) && !coin.out.IsNull()) {\n+                    input.witness_utxo = coin.out;\n+                }\n+            }\n+        }\n+    }\n+\n+    const PrecomputedTransactionData& txdata = PrecomputePSBTData(psbtx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1009788787",
      "id" : 1009788787,
      "line" : 227,
      "node_id" : "PRRC_kwDOABII5848MCdz",
      "original_commit_id" : "2b67f9b73143e07a30add5f372395a612762da46",
      "original_line" : 227,
      "original_position" : 33,
      "original_start_line" : 210,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 33,
      "pull_request_review_id" : 1162435212,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009788787/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2022-10-31T19:40:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009788787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1014863134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1014863134"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I've moved this to the previous commit.",
      "commit_id" : "c3816818d850fc8718e6f20f7c91ed291751c2d9",
      "created_at" : "2022-11-06T17:05:50Z",
      "diff_hunk" : "@@ -207,25 +208,34 @@ PartiallySignedTransaction ProcessPSBT(const std::string& psbt_string, const std\n     }\n \n     // If we still haven't found all of the inputs, look for the missing ones in the utxo set\n-    if (!coins.empty()) FindCoins(node, coins);\n+    if (!coins.empty()) {\n+        FindCoins(node, coins);\n+        for (unsigned int i = 0; i < psbtx.tx->vin.size(); ++i) {\n+            PSBTInput& input = psbtx.inputs.at(i);\n+\n+            // If there are still missing utxos, add them if they were found in the utxo set\n+            if (!input.non_witness_utxo) {\n+                const CTxIn& tx_in = psbtx.tx->vin.at(i);\n+                const Coin& coin = coins.at(tx_in.prevout);\n+                if (IsSegWitOutput(provider, coin.out.scriptPubKey) && !coin.out.IsNull()) {\n+                    input.witness_utxo = coin.out;\n+                }\n+            }\n+        }\n+    }\n+\n+    const PrecomputedTransactionData& txdata = PrecomputePSBTData(psbtx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1014863134",
      "id" : 1014863134,
      "in_reply_to_id" : 1009788787,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5848fZUe",
      "original_commit_id" : "2b67f9b73143e07a30add5f372395a612762da46",
      "original_line" : 227,
      "original_position" : 33,
      "original_start_line" : 210,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1169627346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1014863134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2022-11-06T17:05:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1014863134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-01-17T10:13:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1385151050",
      "id" : 1385151050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585Sj7pK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1385151050/reactions"
      },
      "updated_at" : "2023-01-17T10:13:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1385151050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2023-01-19T04:09:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1396414770",
      "id" : 1396414770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585TO5ky",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1396414770/reactions"
      },
      "updated_at" : "2023-01-19T04:09:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1396414770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-04-21T19:29:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1518251778",
      "id" : 1518251778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585afq8C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518251778/reactions"
      },
      "updated_at" : "2023-04-21T19:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518251778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Now that #25939 has been merged, this is now ready for review.",
      "created_at" : "2023-04-22T02:25:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1518475401",
      "id" : 1518475401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585aghiJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518475401/reactions"
      },
      "updated_at" : "2023-04-22T02:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518475401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "created_at" : "2023-05-03T21:30:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1533778952",
      "id" : 1533778952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585ba5wI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533778952/reactions"
      },
      "updated_at" : "2023-05-03T21:30:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533778952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185038780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185038780"
         }
      },
      "author_association" : "MEMBER",
      "body" : "use `SIGHASH_ALL` for clarity",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T13:43:38Z",
      "diff_hunk" : "@@ -1697,7 +1699,9 @@ static RPCHelpMan utxoupdatepsbt()\n     const PartiallySignedTransaction& psbtx = ProcessPSBT(\n         request.params[0].get_str(),\n         request.context,\n-        HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false));\n+        HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false),\n+        /*sighash_type=*/1,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185038780",
      "id" : 1185038780,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GokG8",
      "original_commit_id" : "efc62d61e69c18b5441cce291f806bff052a2422",
      "original_line" : 1703,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185038780/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185038780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185042239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185042239"
         }
      },
      "author_association" : "MEMBER",
      "body" : "future work: someone make this a subroutine since this shows up in many places",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T13:45:40Z",
      "diff_hunk" : "@@ -1916,6 +1920,82 @@ static RPCHelpMan analyzepsbt()\n     };\n }\n \n+RPCHelpMan descriptorprocesspsbt()\n+{\n+    return RPCHelpMan{\"descriptorprocesspsbt\",\n+                \"\\nUpdate all segwit inputs in a PSBT with information from output descriptors, the UTXO set or the mempool. \\n\"\n+                \"Then, sign the inputs we are able to with information from the output descriptors. \",\n+                {\n+                    {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The transaction base64 string\"},\n+                    {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"An array of either strings or objects\", {\n+                        {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"An output descriptor\"},\n+                        {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with an output descriptor and extra information\", {\n+                             {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"An output descriptor\"},\n+                             {\"range\", RPCArg::Type::RANGE, RPCArg::Default{1000}, \"Up to what index HD chains should be explored (either end or [begin,end])\"},\n+                        }},\n+                    }},\n+                    {\"sighashtype\", RPCArg::Type::STR, RPCArg::Default{\"DEFAULT for Taproot, ALL otherwise\"}, \"The signature hash type to sign with if not specified by the PSBT. Must be one of\\n\"\n+            \"       \\\"DEFAULT\\\"\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\"},\n+                    {\"bip32derivs\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Include BIP 32 derivation paths for public keys if we know them\"},\n+                    {\"finalize\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"Also finalize inputs if possible\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"psbt\", \"The base64-encoded partially signed transaction\"},\n+                        {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[\\\\\\\"descriptor1\\\\\\\", \\\\\\\"descriptor2\\\\\\\"]\\\"\") +\n+                    HelpExampleCli(\"descriptorprocesspsbt\", \"\\\"psbt\\\" \\\"[{\\\\\\\"desc\\\\\\\":\\\\\\\"mydescriptor\\\\\\\", \\\\\\\"range\\\\\\\":21}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    // Add descriptor information to a signing provider\n+    FlatSigningProvider provider;\n+\n+    auto descs = request.params[1].get_array();\n+    for (size_t i = 0; i < descs.size(); ++i) {\n+        EvalDescriptorStringOrObject(descs[i], provider, /*expand_priv=*/true);\n+    }\n+\n+    int sighash_type = ParseSighashString(request.params[2]);\n+    bool bip32derivs = request.params[3].isNull() ? true : request.params[3].get_bool();\n+    bool finalize = request.params[4].isNull() ? true : request.params[4].get_bool();\n+\n+    const PartiallySignedTransaction& psbtx = ProcessPSBT(\n+        request.params[0].get_str(),\n+        request.context,\n+        HidingSigningProvider(&provider, /*hide_secret=*/false, !bip32derivs),\n+        sighash_type,\n+        finalize);\n+\n+    // Check whether or not all of the inputs are now signed\n+    bool complete = true;\n+    for (const auto& input : psbtx.inputs) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185042239",
      "id" : 1185042239,
      "line" : 1982,
      "node_id" : "PRRC_kwDOABII585Gok8_",
      "original_commit_id" : "efc62d61e69c18b5441cce291f806bff052a2422",
      "original_line" : 1982,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 100,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185042239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185042239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185068008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068008"
         }
      },
      "author_association" : "MEMBER",
      "body" : "key_info.privkey?",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T14:02:33Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185068008",
      "id" : 1185068008,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GorPo",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 668,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068008/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185068135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "key_info.p2wpkh_addr?",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T14:02:39Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185068135",
      "id" : 1185068135,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GorRn",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 669,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068135/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185068135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185072414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185072414"
         }
      },
      "author_association" : "MEMBER",
      "body" : "use named tuple args where you can",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T14:05:41Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]\n+        descriptor1 = descsum_create(f\"wpkh({key1})\")\n+\n+        a_key_info = get_generate_key()\n+        b_key_info = get_generate_key()\n+        c_key_info = get_generate_key()\n+        a_key = a_key_info[0]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185072414",
      "id" : 1185072414,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GosUe",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 675,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185072414/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185072414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185073629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185073629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you leave comments on each step to make it clear what's happening? It's been a few minutes of staring and I'm not quite sure what's exactly being tested here, making it difficult to update in the future.\r\n\r\nMy basic test flow would probably follow the lines of:\r\n\r\n1) pick a node that doesn't have a wallet\r\n2) make a single wpkh utxo\r\n3) make single input psbt with that utxo\r\n4) make sure it signs it when expected, and finalizes when expected (e.g., give it a descriptor unrelated to the utxo, partial_signature lying around when expected, vary sighash modes)\r\n5) make sure extracted tx submits to mempool ok\r\n\r\nimo we don't need to re-test all of the descriptor logic that's internal and hopefully already tested; we just want to check that the API here makes sense and pipes through. The 2-of-3 multisig, multi-input stuff just seems like a distraction.",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-04T14:06:36Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]\n+        descriptor1 = descsum_create(f\"wpkh({key1})\")\n+\n+        a_key_info = get_generate_key()\n+        b_key_info = get_generate_key()\n+        c_key_info = get_generate_key()\n+        a_key = a_key_info[0]\n+        a_pubkey = a_key_info[1]\n+        b_key = b_key_info[0]\n+        b_pubkey = b_key_info[1]\n+        c_pubkey = c_key_info[1]\n+\n+        descriptor_a = descsum_create(f\"wsh(multi(2,{a_key},{b_pubkey},{c_pubkey}))\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1185073629",
      "id" : 1185073629,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gosnd",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 681,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1413132311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185073629/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T14:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185073629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186226669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226669"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:24:14Z",
      "diff_hunk" : "@@ -1697,7 +1699,9 @@ static RPCHelpMan utxoupdatepsbt()\n     const PartiallySignedTransaction& psbtx = ProcessPSBT(\n         request.params[0].get_str(),\n         request.context,\n-        HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false));\n+        HidingSigningProvider(&provider, /*hide_secret=*/true, /*hide_origin=*/false),\n+        /*sighash_type=*/1,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186226669",
      "id" : 1186226669,
      "in_reply_to_id" : 1185038780,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GtGHt",
      "original_commit_id" : "efc62d61e69c18b5441cce291f806bff052a2422",
      "original_line" : 1703,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1415004707,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226669/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T15:24:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186226878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226878"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:24:27Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186226878",
      "id" : 1186226878,
      "in_reply_to_id" : 1185068008,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GtGK-",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 668,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1415005055,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226878/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T15:24:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186226878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186227089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186227089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:24:38Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186227089",
      "id" : 1186227089,
      "in_reply_to_id" : 1185068135,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GtGOR",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 669,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1415005350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186227089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T15:24:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186227089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186230858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186230858"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I've rewritten the test to reflect this. I've also added more comments.",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:28:17Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]\n+        descriptor1 = descsum_create(f\"wpkh({key1})\")\n+\n+        a_key_info = get_generate_key()\n+        b_key_info = get_generate_key()\n+        c_key_info = get_generate_key()\n+        a_key = a_key_info[0]\n+        a_pubkey = a_key_info[1]\n+        b_key = b_key_info[0]\n+        b_pubkey = b_key_info[1]\n+        c_pubkey = c_key_info[1]\n+\n+        descriptor_a = descsum_create(f\"wsh(multi(2,{a_key},{b_pubkey},{c_pubkey}))\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186230858",
      "id" : 1186230858,
      "in_reply_to_id" : 1185073629,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GtHJK",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 681,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1415011124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186230858/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T15:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186230858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186237537"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186237537"
         }
      },
      "author_association" : "MEMBER",
      "body" : "great, thanks!",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:35:00Z",
      "diff_hunk" : "@@ -660,6 +663,55 @@ def test_psbt_input_keys(psbt_input, keys):\n                 break\n         assert shuffled\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+        key_info = get_generate_key()\n+        key1 = key_info[0]\n+        wpkh_addr = key_info[5]\n+        descriptor1 = descsum_create(f\"wpkh({key1})\")\n+\n+        a_key_info = get_generate_key()\n+        b_key_info = get_generate_key()\n+        c_key_info = get_generate_key()\n+        a_key = a_key_info[0]\n+        a_pubkey = a_key_info[1]\n+        b_key = b_key_info[0]\n+        b_pubkey = b_key_info[1]\n+        c_pubkey = c_key_info[1]\n+\n+        descriptor_a = descsum_create(f\"wsh(multi(2,{a_key},{b_pubkey},{c_pubkey}))\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186237537",
      "id" : 1186237537,
      "in_reply_to_id" : 1185073629,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GtIxh",
      "original_commit_id" : "9bf2d303295594b8327ce0d67b9c1de98701f80a",
      "original_line" : 681,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1415021637,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186237537/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T15:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186237537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/25796/commits/80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T15:35:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1536435297",
      "id" : 1536435297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585blCRh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536435297/reactions"
      },
      "updated_at" : "2023-05-05T15:35:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536435297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186505286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186505286"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 80f8bdfeb3d9301e0aec4b797689cbe569eff5a6 \"test: add test for `descriptorprocesspsbt` RPC\"\r\n\r\nThis sync is failing due to an earlier unconfirmed transaction not persisting after the restart. A possible fix is to generate a block before restarting ndoe 2.",
      "commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "created_at" : "2023-05-05T21:14:47Z",
      "diff_hunk" : "@@ -944,6 +947,46 @@ def test_psbt_input_keys(psbt_input, keys):\n         self.log.info(\"Test we don't crash when making a 0-value funded transaction at 0 fee without forcing an input selection\")\n         assert_raises_rpc_error(-4, \"Transaction requires one destination of non-0 value, a non-0 feerate, or a pre-selected input\", self.nodes[0].walletcreatefundedpsbt, [], [{\"data\": \"deadbeef\"}], 0, {\"fee_rate\": \"0\"})\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+\n+        # Disable the wallet for node 2 since `descriptorprocesspsbt` does not use the wallet\n+        self.restart_node(2, extra_args=[\"-disablewallet\"])\n+        self.connect_nodes(0, 2)\n+        self.connect_nodes(1, 2)\n+\n+        key_info = get_generate_key()\n+        key = key_info.privkey\n+        address = key_info.p2wpkh_addr\n+\n+        descriptor = descsum_create(f\"wpkh({key})\")\n+\n+        txid = self.nodes[0].sendtoaddress(address, 1)\n+        self.sync_all()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186505286",
      "id" : 1186505286,
      "line" : 964,
      "node_id" : "PRRC_kwDOABII585GuKJG",
      "original_commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "original_line" : 964,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1415466651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186505286/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T21:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186505286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186711555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186711555"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I've fixed it. ",
      "commit_id" : "1bce12acd3e271a7c88d9400b4e3a5645bc8a911",
      "created_at" : "2023-05-06T15:28:19Z",
      "diff_hunk" : "@@ -944,6 +947,46 @@ def test_psbt_input_keys(psbt_input, keys):\n         self.log.info(\"Test we don't crash when making a 0-value funded transaction at 0 fee without forcing an input selection\")\n         assert_raises_rpc_error(-4, \"Transaction requires one destination of non-0 value, a non-0 feerate, or a pre-selected input\", self.nodes[0].walletcreatefundedpsbt, [], [{\"data\": \"deadbeef\"}], 0, {\"fee_rate\": \"0\"})\n \n+        self.log.info(\"Test descriptorprocesspsbt updates and signs a psbt with descriptors\")\n+\n+        # Disable the wallet for node 2 since `descriptorprocesspsbt` does not use the wallet\n+        self.restart_node(2, extra_args=[\"-disablewallet\"])\n+        self.connect_nodes(0, 2)\n+        self.connect_nodes(1, 2)\n+\n+        key_info = get_generate_key()\n+        key = key_info.privkey\n+        address = key_info.p2wpkh_addr\n+\n+        descriptor = descsum_create(f\"wpkh({key})\")\n+\n+        txid = self.nodes[0].sendtoaddress(address, 1)\n+        self.sync_all()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#discussion_r1186711555",
      "id" : 1186711555,
      "in_reply_to_id" : 1186505286,
      "line" : 966,
      "node_id" : "PRRC_kwDOABII585Gu8gD",
      "original_commit_id" : "80f8bdfeb3d9301e0aec4b797689cbe569eff5a6",
      "original_line" : 966,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 32,
      "pull_request_review_id" : 1415789066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25796",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186711555/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-06T15:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186711555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 1bce12acd3e271a7c88d9400b4e3a5645bc8a911",
      "created_at" : "2023-05-20T00:41:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1555399958",
      "id" : 1555399958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585ctYUW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555399958/reactions"
      },
      "updated_at" : "2023-05-20T00:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555399958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK https://github.com/bitcoin/bitcoin/pull/25796/commits/1bce12acd3e271a7c88d9400b4e3a5645bc8a911\r\n",
      "created_at" : "2023-05-20T10:49:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25796#issuecomment-1555885480",
      "id" : 1555885480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25796",
      "node_id" : "IC_kwDOABII585cvO2o",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555885480/reactions"
      },
      "updated_at" : "2023-05-20T10:49:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555885480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
