[
   {
      "body" : "Interesting concept. \r\n\r\nIt's a good observation that it is possible to 'freeze' transactions that are fully spent and no longer count toward the balance. They can be excluded from GetBalance() computations and such. You could hide them in default views.\r\n\r\nI'm not so sure about actually deleting them though - storage is cheap so it doesn't really make much sense to remove old transaction data for storage concerns. And for privacy, well, the transactions are still there in the block chain. You could delete the metadata, but not much more.\r\n(if no-address-reuse was rigorously enforced in Bitcoin one could also prune old keys and have some plausible deniablity, i suppose... but right now that would be foot-shooting waiting to happen)\r\n",
      "created_at" : "2014-12-02T08:36:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65197888",
      "id" : 65197888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T08:36:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65197888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ok, closing.",
      "created_at" : "2014-12-02T10:35:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65211159",
      "id" : 65211159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T10:35:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65211159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "I didn't mean that as 'go close this!'. I just wanted to get a discussion started. There could be other people for which this may be just what they needed.",
      "created_at" : "2014-12-02T10:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65213682",
      "id" : 65213682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T10:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65213682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The reorging of the data to avoid needlesly iterating over them sounds interesting.  I agree that deleting is less exciting.  An additional thing to contemplate is deleting only the data which is in the chain, e.g. keeping any metadata. ",
      "created_at" : "2014-12-02T14:21:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65236968",
      "id" : 65236968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T14:21:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65236968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Our wallet by design loads everything in memory, including all transactions. So you reduce memory usage, disk space and speed up many wallet operations.\r\n\r\nOf course maybe nobody even has a wallet that big, where things make difference.\r\nBut the feature doesnt hurt anybody, and just in case someone complains about performance or memory issues with a large wallet, we could point him to this.\r\n\r\nOr if people make regular wallet online-backups, they might want to trim down the wallet.\r\n\r\nBesides useful, to me at least its kind of a cool feature to see all transactions disappear, except those actually holding your coins.",
      "created_at" : "2014-12-03T12:03:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65397440",
      "id" : 65397440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T12:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65397440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz Absolutely. We should improve the scalability, but I think permantly deleting irrecoverable finiancial information is a cost too great.   Instead we should be making possible to load some of this data only on demand, or archiving it off without deleting it completely. ",
      "created_at" : "2014-12-03T16:06:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65434825",
      "id" : 65434825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T16:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65434825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Ultimately, I think the correct solution is considering the UTXO set and the transaction list/ledger as separate entities, and maybe just occasionally check for consistency between them, rather than constantly computing one from the other. Doing that probably means pretty much a total rewrite.",
      "created_at" : "2014-12-03T16:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65435948",
      "id" : 65435948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T16:11:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65435948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gmaxwell agreed about \"loading on demand\", but I dont think anybody will redesign the wallet anytime soon, so I was just trying to find a rather simple solution which fits in the current design.\r\nFor archiving you can simply use backupwallet.\r\n\r\nAbout \"irrecoverable finiancial information\", not sure what you mean. Wallet-pruning is disabled when using the account-feature, and payment-request is not even exposed to rpc and we only show the merchant in the gui in the tx-details.\r\nSo there is only the actual bitcoin transaction, which I dont consider as irrecoverable.\r\n(simple rescan will do)\r\n\r\nOur wallet grows forever by design, so I just thought that a simple straighforward pruning feature might be useful to someone.",
      "created_at" : "2014-12-03T21:22:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65493198",
      "id" : 65493198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T21:22:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65493198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "Agree with comments that we should just hide and optimise, not delete. Especially not delete on the basis of what is to users essentially random (the UTXOs created when a userside-transaction is received don't remain associated to that userside-transaction).",
      "created_at" : "2014-12-05T12:59:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65786548",
      "id" : 65786548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-05T12:59:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65786548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "We have been researching this possibility of deleting fully-spent transactions in an effort to improve performance and reliability of backups with very large wallets. Finding this patch was quite pleasant as it has implemented the solution exactly as we had imagined it might work.\r\n\r\nThe main idea behind this is rather simple. It would greatly improve performance for large wallets containing many hundreds of thousands of transactions where a majority portion of transactions are fully-spent and have many hundreds or thousands of confirmations.\r\n\r\nAnother reason for this patch would be to alleviate the stress of handling wallet backups. While storage is not a concern, creating backups that get quite large(and will continue to grow) is time consuming and can be rather concerning. It would seem reasonable that a task requiring more time to complete would also have more time to fail.\r\n\r\nWe believe this feature to be exactly what we need. We are experiencing these issues now and it's obvious that the problem will only worsen with continued use.",
      "created_at" : "2015-01-27T17:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-71685685",
      "id" : 71685685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-01-27T17:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71685685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10603424?v=3",
         "events_url" : "https://api.github.com/users/mchatham/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mchatham/followers",
         "following_url" : "https://api.github.com/users/mchatham/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mchatham/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mchatham",
         "id" : 10603424,
         "login" : "mchatham",
         "organizations_url" : "https://api.github.com/users/mchatham/orgs",
         "received_events_url" : "https://api.github.com/users/mchatham/received_events",
         "repos_url" : "https://api.github.com/users/mchatham/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mchatham/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mchatham/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mchatham"
      }
   },
   {
      "body" : "We're in almost the same situation as @mchatham. We've been researching to develop this functionality ourselves, and are delighted to see that it has been already done. Thank you, @cozz.\r\n\r\nSome of bitcoind's functionality does depend on the fact that the involved addresses are in the wallet. For high-throughput installations (e.g., merchants), this was always a problem: one had to chose between having the functionality and facing the absolute non-scalability of the wallet, or implement the whole wallet functionality separately. This patch allows one to use bitcoind for high-throughput installations again, which is very useful.\r\n\r\nHas anyone used this patch in production yet? @cozz, does this play ball with #4702?",
      "created_at" : "2015-02-07T10:44:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-73359181",
      "id" : 73359181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-07T10:44:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73359181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   },
   {
      "body" : "@arnuschky not yet, you would also need to delete from mapOrderedTxItems. But that would be easy.\r\n\r\nI think it would be good to have a final decision on both patches.",
      "created_at" : "2015-02-07T21:10:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-73383278",
      "id" : 73383278,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-07T21:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73383278",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz: Ok, thanks. I am going to deploy this PR on a test instance and see how it behaves. ",
      "created_at" : "2015-02-08T03:33:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-73395304",
      "id" : 73395304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-08T03:33:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73395304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   },
   {
      "body" : "We agree that it's like @arnuschky has stated, this patch will allow bitcoind to be used in high-throughput situations again. We would add that for those already using bitcoind and finding themselves needing this patch, it will be a godsend.\r\n\r\nIn an article by Mike Hearn wrote back in December 2013, he made the statement about server wallet problems saying, \"As far as I know exchanges and major payment processors have all had to implement lots of custom code to work around the lack of scalability of Bitcoin-Qt\"(https://medium.com/@octskyward/merge-avoidance-7f95a386692f). In our research of the topic we've learned that this issue has largely gone unaddressed. While he specifically is referring to wallets with large numbers of keys we feel the same applies to wallets with lots of transactions.\r\n\r\nIt's our belief this decreases stability in the Bitcoin world if every exchange or payment processor must develop their own wallet software versus simply using the default wallet implementation.",
      "created_at" : "2015-02-17T01:55:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74605794",
      "id" : 74605794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-17T01:55:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74605794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10603424?v=3",
         "events_url" : "https://api.github.com/users/mchatham/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mchatham/followers",
         "following_url" : "https://api.github.com/users/mchatham/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mchatham/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mchatham",
         "id" : 10603424,
         "login" : "mchatham",
         "organizations_url" : "https://api.github.com/users/mchatham/orgs",
         "received_events_url" : "https://api.github.com/users/mchatham/received_events",
         "repos_url" : "https://api.github.com/users/mchatham/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mchatham/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mchatham/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mchatham"
      }
   },
   {
      "body" : "@mchatham The lobbying isn't helpful.  If you're interested in this you could work on an alternative which does not destroy information and instead just skips loading it when a switch is set, as that would address the concern.\r\n\r\nI believe the project is not interested in a workaround that creates any data loss risk. ",
      "created_at" : "2015-02-17T02:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74607863",
      "id" : 74607863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-17T02:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74607863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell: I don't really get this \"loss of financial information\" argument. All information is contained in the blockchain and can be recovered anytime with a rescan, or am I wrong here?\r\n\r\nOn the other hand, I think it is very reasonable to allow the user to decide to which extend the wallet stores/replicates information on past transactions. Especially as this functionality allows users to use the current wallet implementation for addresses with large amounts of transactions.",
      "created_at" : "2015-02-18T08:18:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74827933",
      "id" : 74827933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T08:18:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74827933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   },
   {
      "body" : "It does not contain all information. It misses timing data, comments that\nmay have been added, data due to the usage of the payment protocol, and\neverything from unconfirmed transactions (which isn't a consideration here\nspecifically).\n\nWorse, it is incompatible with blockchain pruning which we'd very much like\nto get in the next release.\n\nPlease, the memory usage problem is trivial to solve in a much less\ninvasive way.\n",
      "created_at" : "2015-02-18T10:16:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74841320",
      "id" : 74841320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T10:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74841320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "It seems like this is going nowhere anyway, so closing it, saving us further pointless discussion.",
      "created_at" : "2015-02-18T19:52:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74935096",
      "id" : 74935096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T19:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74935096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "We're in agreement, the risk of data loss is apparent, but it's always a risk. For those in our situation, the risk of data loss increases with wallet database size. Because of this, managing backups for these wallets is a genuine concern for us. We make backups every 100 addresses.\r\n\r\nHow often would you recommend wallet backups be created? We've seen one recommendation recently that indicated every 90 transactions. If we followed this recommendation we'd be creating a backup of our wallet many times a day. This overall would not be an issue if it were not for the sheer size of the wallet on disk. Ours is currently at 1.2GB, and as we all know for sure, will continue to get larger.\r\n\r\nIn the case of this patch, what's the real concern with losing data? As far as we see, there's nothing in this patch that would in effect destroy any value that we own. No coins could be destroyed. Not by normal operation. If the concern is with losing meta-data, be reminded that we can already provide -zapwallettxes with 2, and it will simply not restore the old meta-data after rescan.\r\n\r\nWhile an alternative to destroying data would improve performance for large wallets, it completely ignores the other issue: ALL data forever being stored in a single, very important file.\r\n\r\n@gmaxwell What else to do when a wallet file gets this large? Your recommendations for an alternative only solve one half of the current problem and this patch solves both.\r\n\r\nWe've given this feature a lot of thought and we're well aware of the risks involved. Just the same as we're aware of the risks involved with other features available in the client, which some, with improper use could actually result in losing bitcoins.",
      "created_at" : "2015-02-18T20:34:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74942312",
      "id" : 74942312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T20:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74942312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10603424?v=3",
         "events_url" : "https://api.github.com/users/mchatham/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mchatham/followers",
         "following_url" : "https://api.github.com/users/mchatham/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mchatham/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mchatham",
         "id" : 10603424,
         "login" : "mchatham",
         "organizations_url" : "https://api.github.com/users/mchatham/orgs",
         "received_events_url" : "https://api.github.com/users/mchatham/received_events",
         "repos_url" : "https://api.github.com/users/mchatham/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mchatham/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mchatham/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mchatham"
      }
   },
   {
      "body" : "@mchatham The correct (initial) coarse of action would be to fix the issues causing your wallet to become 1.2GB.  What version of the software are you using that is creating wallets that large? (I ask because some issues that caused wallet bloat were previously fixed).",
      "created_at" : "2015-02-18T20:40:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74943325",
      "id" : 74943325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T20:40:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74943325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell We have been in 0.9.4 for quite sometime.",
      "created_at" : "2015-02-18T20:54:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-74945787",
      "id" : 74945787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-18T20:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74945787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10603424?v=3",
         "events_url" : "https://api.github.com/users/mchatham/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mchatham/followers",
         "following_url" : "https://api.github.com/users/mchatham/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mchatham/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mchatham",
         "id" : 10603424,
         "login" : "mchatham",
         "organizations_url" : "https://api.github.com/users/mchatham/orgs",
         "received_events_url" : "https://api.github.com/users/mchatham/received_events",
         "repos_url" : "https://api.github.com/users/mchatham/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mchatham/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mchatham/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mchatham"
      }
   },
   {
      "body" : "@gmaxwell  Same here, our `wallet.dat` is > 2.5 GB. Running 0.9.3 (currently evaluating 0.10.0). No, nothing is broken with that wallet, we simply have few addresses with tens of thousands transactions each. We might split this up on multiple nodes (one address each), but that is kind of a last-resort workaround.\r\n\r\nOnce the wallet is this big, it becomes extremely slow - it doesn't scale at all. `AddToWallet` currently takes 2-3 seconds, a rescan is accordingly an operation that takes a 1-2 weeks. \r\n\r\nNow, one might claim that we're an edge case, pushing bitcoin core beyond it's limits. I agree that this is the case at the moment, but over time, more and more users will reach similar wallet sizes if there's no pruning. This PR might not be the solution and just a temporary workaround (a quite acceptable one for us, but maybe not for the general public). However, the scalability problem of the wallet needs to be addresses at some point.\r\n\r\n@cozz Tested your patch. `prunewallet 60` goes away and does something for a long time and claims to have pruned a few thousand tx. However, there's nothing in the debug log and `wallet.dat` didn't shrink at all. Am I missing something obvious here?",
      "created_at" : "2015-02-19T10:14:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75027342",
      "id" : 75027342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-19T10:14:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75027342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   },
   {
      "body" : "@arnuschky I fixed the biggest wallet-bottlenecks here #4805 #4712 and #4702. However the last one has recently been closed, because a guy is eventually going to redesign the wallet at some unknown point in the future, but still going to load the whole wallet in memory on startup.\r\n\r\nTo me wallet-pruning is a feature as obvious as blockchain-pruning. Making the two compatible would not be a problem. The argument that you should shrink your 1.2GB wallet by upgrading, is not an argument to me. Even if there is wallet-bloat and he can shrink his wallet to 120MB, what if bitcoin scales to 10MB blocks, or his company by factor 10, or he just keeps using his wallet for years. We must assume scale. There should be an option to be able to delete old transactions from the wallet somehow for sure. The potential performance boost is just a side-effect here, because our wallet design is bad.\r\n\r\nThere is another patch which improves wallet performance here #5411, this has been closed, because its a little hacky. But with this patch and the other 2 closed ones, even the current wallet design could be used on larger scale. Its just 3 simple patches, as long as we have the current wallet design and they are making such a drama. The whole wallet is hacky, as most might agree, so I am just adapting to what is there, but improve performance. I hope that they are not thinking of removing the wallet completely to solve problems, as they do with the account features.\r\n\r\nAs why the patch didnt work for you, I dont know. There should be lots of EraseFromWallet in debug.log. I hope you compiled the branch as is, and did not apply the patch to some other branch like master or 0.10.\r\nBack in the day, when I tested it, I actually saw the transactions disappear in the GUI, and I also saw the wallet.dat file to actually shrink from 20MB to like 100kb.\r\n\r\nHowever, I am not going to spend anymore time on this patch, if the bitcoin core developers disagree with it.\r\n",
      "created_at" : "2015-02-20T00:19:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75167207",
      "id" : 75167207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-20T00:19:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75167207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "> We must assume scale\r\n\r\nWhich is part of why why addressing performance problems by irrecoverably deleting financial information is just not considered acceptable here. We're happy to work on features that improve scale and efficiency, but not ones where the system forces (or strongly encourages) behavior which is irresponsible.\r\n\r\nI consider deleting transaction data to be irresponsible, and I think there is a general consensus around this among comitters on this point.  People are, of course, free to run their own wallet software if they wish to adopt this kind of behavior (see also: mtgox).  Part of the value the reference wallet can provide is sticking to responsible, safe behavior even when it stands in the way of commercial expedience. Instead we should adopt designs that accomplish a goal of scaling without compromise (as Pieter suggested in his first response).\r\n\r\nA 2.5GB wallet is just outright broken-- assuming that it's not somehow responsible for 5% or more of all Bitcoin transactions which have ever happened, and we should figure out whats causing that. This ecosystem has enough irresponsible behavior from people patching over issues instead of fixing things. We don't need to add more.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2015-02-20T00:45:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75170044",
      "id" : 75170044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-20T08:49:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75170044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@arnuschky Nobody is saying that scaling problems shouldn't be addressed. The reason the wallet is slow is not because the file is large, but because all transactions are loaded into memory, and almost all operations iterate over all of them. It's been suggested  to remove old fully-spent ones from memory at loading time, which is much less invasive instead.",
      "created_at" : "2015-02-20T08:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75203228",
      "id" : 75203228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-20T08:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75203228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, sorry for taking this discussion further than needed. I keep forgetting that these are PRs for merging into the bitcoin core mainline, and this kept arguing that this patch has merit for some individuals/specific applications.\r\n\r\nRegarding a more constructive direction of discussion: is someone working on a new wallet implementation? If yes, who/where? Is there a feature- or task-list? Can we contribute? I guess you are referring to the work of @jonasschnelli and #5752, #5758, #5744, #5761, #5745, no?\r\n\r\n@gmaxwell What's a normal wallet size for, say, 1 million transactions? What's \"normal\" unbroken use for you?\r\n\r\n@cozz Thank you for your work and your reply. I'll have a look at the other PRs and debug this one. It might be hacky, but it's the only way how we can keep running in the current situation - even if this solution is only temporary.",
      "created_at" : "2015-02-20T12:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75231044",
      "id" : 75231044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-20T12:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75231044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   },
   {
      "body" : "@arnushky: I'm willing to spend around 20-30h a week in improving/rewriting the wallet. #5761 should be the ticket to discuss wallet related improvements. I don't have a final wallet concept in my mind.\r\n\r\nRegarding this issue, I'd prefere to write scripts or preforget regtests-wallet-and-blocks-datadir with huge amount of transaction to track down the problems and find solutions to handle such sizes.\r\nIMO a 2.5GB wallet must be totally unoptimized. Please have a look at the logdb wallet storage work. There is also a rewriting function. With this new storage backend, the wallet file should not be much bigger then all wtx serialized (+count(wtx)*(keysize+8bytechecksum)).\r\nOf course you have to add the amount of keys and metadata to the calculation.\r\n\r\nAnd handling a 1mio wtx wallet should not be the main scope. It should work but could require large amount of free ram and probably a slowdown of some wallet related functions.",
      "created_at" : "2015-02-21T04:01:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75354499",
      "id" : 75354499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-21T04:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75354499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli thanks for your answer and all your effort. We will have a look at your logdb wallet as soon as we resolve our current scalability issues. However, I do not understand what you mean by \"I'd prefere to write scripts or preforget regtests-wallet-and-blocks-datadir \"?\r\n\r\nOn the long run, I think a wallet must be able to handle 1mio transactions, even though it might not be the main scope right now.",
      "created_at" : "2015-02-22T09:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-75427687",
      "id" : 75427687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-02-22T09:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75427687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/179920?v=3",
         "events_url" : "https://api.github.com/users/arnuschky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnuschky/followers",
         "following_url" : "https://api.github.com/users/arnuschky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnuschky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnuschky",
         "id" : 179920,
         "login" : "arnuschky",
         "organizations_url" : "https://api.github.com/users/arnuschky/orgs",
         "received_events_url" : "https://api.github.com/users/arnuschky/received_events",
         "repos_url" : "https://api.github.com/users/arnuschky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnuschky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnuschky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnuschky"
      }
   }
]
