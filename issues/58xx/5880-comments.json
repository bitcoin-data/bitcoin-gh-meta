[
   {
      "body" : "Binaries to test: https://builds.jonasschnelli.ch/pulls/5880/",
      "created_at" : "2015-03-11T23:48:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-78397839",
      "id" : 78397839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-11T23:48:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78397839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Tested https://builds.jonasschnelli.ch/pulls/5880/bitcoin-0.10.99-osx-unsigned.dmg on 10.7 and 10.9.\r\nWorks fine there.\r\nAssume 10.8 will also work.",
      "created_at" : "2015-03-12T07:29:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-78434961",
      "id" : 78434961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-12T07:29:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78434961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26288418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26288418"
         }
      },
      "body" : "Does s_instance ever get freed?",
      "commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "created_at" : "2015-03-12T09:45:43Z",
      "diff_hunk" : "@@ -11,52 +11,46 @@\n \n #undef slots\n #include <Cocoa/Cocoa.h>\n+#include <objc/objc.h>\n+#include <objc/message.h>\n \n #if QT_VERSION < 0x050000\n extern void qt_mac_set_dock_menu(QMenu *);\n #endif\n \n-@interface DockIconClickEventHandler : NSObject\n-{\n-    MacDockIconHandler* dockIconHandler;\n-}\n-\n-@end\n-\n-@implementation DockIconClickEventHandler\n+static MacDockIconHandler *s_instance = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26288418",
      "id" : 26288418,
      "original_commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "original_position" : 19,
      "path" : "src/qt/macdockiconhandler.mm",
      "position" : 19,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880",
      "updated_at" : "2015-03-12T09:45:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26288418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26288841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26288841"
         }
      },
      "body" : "No. It's a singleton pattern and i assume the OS will care about the cleanup.\r\nBut i could try to proactive free it within the destructor of `~MacDockIconHandler`. But this might be more or less the same cleanup as the os does.",
      "commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "created_at" : "2015-03-12T09:54:25Z",
      "diff_hunk" : "@@ -11,52 +11,46 @@\n \n #undef slots\n #include <Cocoa/Cocoa.h>\n+#include <objc/objc.h>\n+#include <objc/message.h>\n \n #if QT_VERSION < 0x050000\n extern void qt_mac_set_dock_menu(QMenu *);\n #endif\n \n-@interface DockIconClickEventHandler : NSObject\n-{\n-    MacDockIconHandler* dockIconHandler;\n-}\n-\n-@end\n-\n-@implementation DockIconClickEventHandler\n+static MacDockIconHandler *s_instance = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26288841",
      "id" : 26288841,
      "original_commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "original_position" : 19,
      "path" : "src/qt/macdockiconhandler.mm",
      "position" : 19,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880",
      "updated_at" : "2015-03-12T09:54:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26288841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Tested ACK",
      "created_at" : "2015-03-12T13:31:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-78479294",
      "id" : 78479294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-12T13:31:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78479294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26368989"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26368989"
         }
      },
      "body" : "I'd prefer if it was freed. Otherwise it will show up as a memory leak. Would be even better to do it without introducing a singleton, but I suppose that isn't possible.",
      "commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "created_at" : "2015-03-13T07:41:25Z",
      "diff_hunk" : "@@ -11,52 +11,46 @@\n \n #undef slots\n #include <Cocoa/Cocoa.h>\n+#include <objc/objc.h>\n+#include <objc/message.h>\n \n #if QT_VERSION < 0x050000\n extern void qt_mac_set_dock_menu(QMenu *);\n #endif\n \n-@interface DockIconClickEventHandler : NSObject\n-{\n-    MacDockIconHandler* dockIconHandler;\n-}\n-\n-@end\n-\n-@implementation DockIconClickEventHandler\n+static MacDockIconHandler *s_instance = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#discussion_r26368989",
      "id" : 26368989,
      "original_commit_id" : "89e70e931d3d320d2dae4c296601aab113b2e508",
      "original_position" : 19,
      "path" : "src/qt/macdockiconhandler.mm",
      "position" : 19,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5880",
      "updated_at" : "2015-03-13T07:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26368989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@fanquake on what version of OSX?",
      "created_at" : "2015-03-13T07:42:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-78851392",
      "id" : 78851392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-13T07:42:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78851392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj 10.9 & 10.10",
      "created_at" : "2015-03-13T09:46:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-78891735",
      "id" : 78891735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-13T09:46:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78891735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "Updated with @laanwj nits (mem cleanup).\r\nAlso removed unused code.\r\n@fanquake mind retesting?\r\nBinaries: https://builds.jonasschnelli.ch/pulls/5880/\r\n",
      "created_at" : "2015-03-13T15:21:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-79039606",
      "id" : 79039606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-13T15:24:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/79039606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Retested on 10.7 and 10.9. Works fine there.",
      "created_at" : "2015-03-13T15:24:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-79042991",
      "id" : 79042991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-13T15:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/79042991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ReACK Checked 10.9 & 10.10",
      "created_at" : "2015-03-14T04:57:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-79883608",
      "id" : 79883608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-14T04:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/79883608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "Cherry-picked to 0.10 as 81145a6 and 2c08406",
      "created_at" : "2015-03-16T12:57:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5880#issuecomment-81642663",
      "id" : 81642663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5880",
      "updated_at" : "2015-03-16T12:57:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/81642663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
