{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Since the release of 0.10.0, we've seen several reports of failed sanity tests due to failing to catch basic exceptions. At the moment, Debian Wheezy fails to run the official Linux binary, and FreeBSD fails to run when compiled natively. I assume that there are several other broken setups as well.\n\nFrom what I've seen, the brokenness is always due to type_info visibility. Building with -fvisibility=hidden can cause problems with old/busted stdlibs. See [here](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=19664) for some background.\n\nIt's nearly impossible to tell (without blacklisting std libs like we already do with boost) if libstdc++ is going to play nice with --enable-reduce-exports. Rather than trying, just disable it by default. Packagers can re-enable if it's known to be safe.\n\nFor Linux, when compiling against a new libstdc++ but using an older one at runtime, exceptions can again be missed. Rather than take any chances, use -static-libstdc++. This means we don't have to worry about trying to maintain a compat wrapper.\n\nBinaries become slightly bigger (about 1M each), but not enough to worry about imo. The final compressed sizes:\n\n```\nbefore:\n17416   built/linux/bitcoin-0.10.0-linux32.tar.gz\n17196   built/linux/bitcoin-0.10.0-linux64.tar.gz\n```\n\n```\nafter:\n18920   build/out/bitcoin-0.10.99-linux32.tar.gz\n18804   build/out/bitcoin-0.10.99-linux64.tar.gz\n```\n\nDebian Wheezy is verified fixed. @koobs has verified that building without reduced exports fixes freebsd.\n",
   "closed_at" : "2015-03-03T15:28:13Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 15,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5819/comments",
   "created_at" : "2015-02-24T02:23:02Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5819/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/5819",
   "id" : 58684360,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "id" : 61889416,
         "name" : "Build system",
         "node_id" : "MDU6TGFiZWw2MTg4OTQxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5819/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0Mjk4NjU5NzE=",
   "number" : 5819,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/5819.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5819",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/5819.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5819"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "release: use static libstdc++ and disable reduced exports by default",
   "updated_at" : "2015-03-03T15:28:13Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5819",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
      "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
      "followers_url" : "https://api.github.com/users/theuni/followers",
      "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/theuni",
      "id" : 417043,
      "login" : "theuni",
      "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
      "organizations_url" : "https://api.github.com/users/theuni/orgs",
      "received_events_url" : "https://api.github.com/users/theuni/received_events",
      "repos_url" : "https://api.github.com/users/theuni/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/theuni"
   }
}
