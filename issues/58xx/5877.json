{
   "active_lock_reason" : "resolved",
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "1. Boost path seems to use variables which are lazy initialized and not thread safe, and in particular this results in leaks and unexpected behavior, if they are not explicitly initialized by the main thread, because resources may no longer be accessible, if the related thread isn't either. This is basically the underlying issue I'm trying to address, and related issues affected by this are #3136 and #5380.\n2. path::imbue(std::locale()) appears to initialize those.\n3. std::locale() constructs a copy of the current global locale. The global locale is the locale set by a previous call to std::locale::global, or std::locale::classic (\"C\"), if std::locale::global has not been called. std::locale(\"\") however uses the default environment value.\n4. Setting locale::global(loc) also sets the C global locale, as if the C library function setlocale was called with LC_ALL, which appears to be more robust, while setenv may not be available in any case.\n5. locale(\"\") throw exceptions, if invalid environment locales are used, but locale() does only so, if locale::global was set with an invalid locale before, which should not be the case in Bitcoin Core, so I'd assume the old L732 never throws at all.\n6. I tested it with several build configurations, but I'm not entirely sure, if this is 100 % side effect free. \n",
   "closed_at" : "2015-03-24T07:34:02Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877/comments",
   "created_at" : "2015-03-11T15:34:10Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/5877",
   "id" : 60677362,
   "labels" : [
      {
         "color" : "E6F6D6",
         "default" : false,
         "description" : null,
         "id" : 135961,
         "name" : "Refactoring",
         "node_id" : "MDU6TGFiZWwxMzU5NjE=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877/labels{/name}",
   "locked" : true,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MzA5NTQ0NjE=",
   "number" : 5877,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/5877.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5877",
      "merged_at" : "2015-03-24T07:34:02Z",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/5877.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5877"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877/timeline",
   "title" : "Initialization: set Boost path locale in main thread",
   "updated_at" : "2021-09-08T11:16:54Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5877",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=4",
      "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dexX7/followers",
      "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dexX7",
      "id" : 5836089,
      "login" : "dexX7",
      "node_id" : "MDQ6VXNlcjU4MzYwODk=",
      "organizations_url" : "https://api.github.com/users/dexX7/orgs",
      "received_events_url" : "https://api.github.com/users/dexX7/received_events",
      "repos_url" : "https://api.github.com/users/dexX7/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dexX7"
   }
}
