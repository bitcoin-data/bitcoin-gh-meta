[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`git grep \"= current_time\"`\r\n```shell\r\nsrc/index/base.cpp:                last_log_time = current_time;\r\nsrc/index/base.cpp:                last_locator_write_time = current_time;\r\nsrc/net.cpp:        cache_entry.m_cache_entry_expiration = current_time + std::chrono::hours(21) + GetRandMillis(std::chrono::hours(6));\r\nsrc/net_processing.cpp:        peer->m_addr_token_timestamp = current_time;\r\nsrc/net_processing.cpp:        pto.m_tx_relay->m_next_send_feefilter = current_time + GetRandomDuration<std::chrono::microseconds>(MAX_FEEFILTER_CHANGE_DELAY);\r\nsrc/net_processing.cpp:                state.m_headers_sync_timeout = current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE +\r\nsrc/net_processing.cpp:                    State(staller)->m_stalling_since = current_time;\r\nsrc/randomenv.cpp:    last_perfmon = current_time;\r\n```\r\n\r\n\r\n`git grep \"HEADERS_DOWNLOAD_TIMEOUT_BASE\"`\r\n```shell\r\nsrc/net_processing.cpp:static constexpr auto HEADERS_DOWNLOAD_TIMEOUT_BASE = 15min;\r\nsrc/net_processing.cpp:                state.m_headers_sync_timeout = current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE +\r\n```\r\n\r\n`git grep \" Commit()\"`\r\n\r\n```shell\r\nsrc/index/base.cpp:                Commit();\r\nsrc/index/base.cpp:                    Commit();\r\nsrc/index/base.cpp:                Commit();\r\nsrc/index/base.cpp:    Commit();\r\nsrc/index/base.h:    bool Commit();\r\n```\r\n`git grep \"< current_time\"`\r\n```shell\r\nsrc/index/base.cpp:            if (last_log_time + SYNC_LOG_INTERVAL < current_time) {\r\nsrc/index/base.cpp:            if (last_locator_write_time + SYNC_LOCATOR_WRITE_INTERVAL < current_time) {\r\nsrc/net.cpp:    if (cache_entry.m_cache_entry_expiration < current_time) { // If emplace() added new one it has expiration 0.\r\nsrc/net_processing.cpp:        peer.m_next_local_addr_send < current_time) {\r\nsrc/net_processing.cpp:                if (pto->m_tx_relay->nNextInvSend < current_time) {\r\nsrc/net_processing.cpp:                            while (!g_relay_expiration.empty() && g_relay_expiration.front().first < current_time)\r\nsrc/net_processing.cpp:        if (state.m_stalling_since.count() && state.m_stalling_since < current_time - BLOCK_STALLING_TIMEOUT) {\r\n```\r\n\r\n`git grep \"SYNC_LOCATOR_WRITE_INTERVAL\"`\r\n\r\n```shell\r\nsrc/index/base.cpp:constexpr int64_t SYNC_LOCATOR_WRITE_INTERVAL = 30; // seconds\r\nsrc/index/base.cpp:            if (last_locator_write_time + SYNC_LOCATOR_WRITE_INTERVAL < current_time) {\r\n```\r\n\r\n` git grep \"SYNC_LOG_INTERVAL\"`\r\n```shell\r\nsrc/index/base.cpp:constexpr int64_t SYNC_LOG_INTERVAL = 30; // seconds\r\nsrc/index/base.cpp:            if (last_log_time + SYNC_LOG_INTERVAL < current_time) {\r\n```\r\n\r\nIt is interesting to think about this in context of other events that's are potentially going on at `current_time` and what is forced to trail behind `current_time` and by how much.\r\n\r\nbase.cpp: LINE: 167\r\n```shell\r\n            int64_t current_time = GetTime();\r\n            if (last_log_time + SYNC_LOG_INTERVAL < current_time) {\r\n                LogPrintf(\"Syncing %s with block chain from height %d\\n\",\r\n                          GetName(), pindex->nHeight);\r\n                last_log_time = current_time;\r\n            }\r\n\r\n            if (last_locator_write_time + SYNC_LOCATOR_WRITE_INTERVAL < current_time) {\r\n                m_best_block_index = pindex;\r\n                last_locator_write_time = current_time;\r\n                // No need to handle errors in Commit. See rationale above.\r\n                Commit();\r\n            }\r\n```\r\n\r\nOne possible optimization would be to compare the difference between `last_log_time` and `last_locator_write_time` on different systems - in fact SYNC_LOG_INTERVAL and SYNC_LOCATOR_WRITE_INTERVAL could be incremented +/- 1 second based on success/fail write commits that are tracked/counted.\r\n\r\nJust a thought. :)\r\n",
      "created_at" : "2022-02-18T21:58:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24354#issuecomment-1045241977",
      "id" : 1045241977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24354",
      "node_id" : "IC_kwDOABII584-TSB5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045241977/reactions"
      },
      "updated_at" : "2022-02-18T21:58:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045241977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152159?v=4",
         "events_url" : "https://api.github.com/users/RandyMcMillan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RandyMcMillan/followers",
         "following_url" : "https://api.github.com/users/RandyMcMillan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RandyMcMillan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RandyMcMillan",
         "id" : 152159,
         "login" : "RandyMcMillan",
         "node_id" : "MDQ6VXNlcjE1MjE1OQ==",
         "organizations_url" : "https://api.github.com/users/RandyMcMillan/orgs",
         "received_events_url" : "https://api.github.com/users/RandyMcMillan/received_events",
         "repos_url" : "https://api.github.com/users/RandyMcMillan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RandyMcMillan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RandyMcMillan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RandyMcMillan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "REF: [94b4f8bbb9e7e37f3057b47bf13a74de12b8e0cc](https://github.com/bitcoin/bitcoin/blame/94b4f8bbb9e7e37f3057b47bf13a74de12b8e0cc/src/index/txindex.cpp)\r\n\r\nWe can deduce that these PARAMETERS were actually set arbitrarily. SYNC_LOG_INTERVAL and SYNC_LOCATOR_WRITE_INTERVAL currently equal 30 seconds. In both cases the LogPrintf() and the Commit() are limited to at best executing at 30+1 seconds intervals - this is due to GetTime() returning time in seconds by default. @[katesalazar](https://github.com/katesalazar) is correct in her assertion that millisecond resolution may be beneficial. Coupled with benchmarking analysis, 30 seconds could safely be reduced to 20 seconds or even 15 seconds?\r\n",
      "created_at" : "2022-02-18T23:11:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24354#issuecomment-1045328121",
      "id" : 1045328121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24354",
      "node_id" : "IC_kwDOABII584-TnD5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045328121/reactions"
      },
      "updated_at" : "2022-02-18T23:40:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045328121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152159?v=4",
         "events_url" : "https://api.github.com/users/RandyMcMillan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RandyMcMillan/followers",
         "following_url" : "https://api.github.com/users/RandyMcMillan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RandyMcMillan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RandyMcMillan",
         "id" : 152159,
         "login" : "RandyMcMillan",
         "node_id" : "MDQ6VXNlcjE1MjE1OQ==",
         "organizations_url" : "https://api.github.com/users/RandyMcMillan/orgs",
         "received_events_url" : "https://api.github.com/users/RandyMcMillan/received_events",
         "repos_url" : "https://api.github.com/users/RandyMcMillan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RandyMcMillan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RandyMcMillan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RandyMcMillan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The feature request didn't seem to attract much attention in the past. Also, the issue seems not important enough right now to keep it sitting around idle in the list of open issues.\r\n\r\nClosing due to lack of interest. Pull requests with improvements are always welcome.",
      "created_at" : "2022-03-25T16:25:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24354#issuecomment-1079192018",
      "id" : 1079192018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24354",
      "node_id" : "IC_kwDOABII585AUynS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1079192018/reactions"
      },
      "updated_at" : "2022-03-25T16:25:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1079192018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
