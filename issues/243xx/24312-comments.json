[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23962](https://github.com/bitcoin/bitcoin/pull/23962) (Use int32_t type for transaction size/weight consistently by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-11T11:00:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1036087605",
      "id" : 1036087605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII5849wXE1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036087605/reactions"
      },
      "updated_at" : "2022-02-26T04:35:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036087605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804604731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804604731"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doubt: If I understood it correctly, changing the type of `lowest_compatible` to 32-bit signed integer would have been enough. So was there any specific reason to choose a 64-bit integer for the type?",
      "commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "created_at" : "2022-02-11T12:29:09Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804604731",
      "id" : 804604731,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584v9Us7",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 880115024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804604731/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T12:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804604731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804607822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804607822"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: \r\n```suggestion\r\n            \"Unsupported format of addrman database: %u. It is compatible with formats >=%i, \"\r\n```",
      "commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "created_at" : "2022-02-11T12:33:40Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};\n+    if (lowest_compatible < 0 || lowest_compatible > FILE_FORMAT) {\n         throw std::ios_base::failure(strprintf(\n-            \"Unsupported format of addrman database: %u. It is compatible with formats >=%u, \"\n+            \"Unsupported format of addrman database: %i. It is compatible with formats >=%u, \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804607822",
      "id" : 804607822,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII584v9VdO",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 252,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 10,
      "pull_request_review_id" : 880115024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804607822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T12:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804607822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804618105"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804618105"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`int` *is* 32-bit on all of our supported platforms. See compat/assumptions.h. I could change to int32_t, but is there a reason?",
      "commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "created_at" : "2022-02-11T12:49:00Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804618105",
      "id" : 804618105,
      "in_reply_to_id" : 804604731,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584v9X95",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 880133866,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804618105/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T12:49:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804618105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804719310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804719310"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> is there a reason?\r\n\r\nNot any specific reason. This was more of a question out of curiosity rather than a doubt. I have observed that we avoid going with a higher size type for the variable when we can sufficiently work with a smaller size type; that's why I asked the question.\r\n\r\n> See compat/assumptions.h.\r\n\r\nLet me take a look through it.",
      "commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "created_at" : "2022-02-11T14:48:28Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804719310",
      "id" : 804719310,
      "in_reply_to_id" : 804604731,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584v9wrO",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 880276297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804719310/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T14:48:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804719310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804788437"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804788437"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it should be like this:\r\n\r\n```cpp\r\nif (compat < INCOMPATIBILITY_BASE) {\r\n    throw std::ios_base::failure(strprintf(\"Corrupted peers.dat: the compat value is lower than the expected 32\"));\r\n}\r\n// original code follows that is now guaranteed not to underflow\r\nconst uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\r\n...\r\n```\r\n\r\nThe proposed change in this PR is ok in a sense that it will fix the underflow if too low value is read from disk. However, if that happens, then the printed message would be puzzling and we have to adjust that too. Normally, the meaning of the message is this:\r\n\r\n> it is compatible with >=7, but I can only read up to 5 (so it is too high for me because 7>5)\r\n\r\nand with a bricked `peers.dat` it could be:\r\n\r\n> it is compatible with >=-10, but I can only read up to 5 (so it is too high for me because -10>5)\r\n\r\nit is puzzling because -10 is not higher than 5.",
      "commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "created_at" : "2022-02-11T16:01:10Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804788437",
      "id" : 804788437,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584v-BjV",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : 249,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 880372333,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804788437/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 249,
      "start_side" : "LEFT",
      "updated_at" : "2022-02-11T16:02:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804788437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804954933"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804954933"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thx, done",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-11T19:44:34Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804954933",
      "id" : 804954933,
      "in_reply_to_id" : 804788437,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v-qM1",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : 249,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 880607899,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804954933/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2022-02-11T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804954933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804955143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955143"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reverted hunk",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-11T19:44:53Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};\n+    if (lowest_compatible < 0 || lowest_compatible > FILE_FORMAT) {\n         throw std::ios_base::failure(strprintf(\n-            \"Unsupported format of addrman database: %u. It is compatible with formats >=%u, \"\n+            \"Unsupported format of addrman database: %i. It is compatible with formats >=%u, \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804955143",
      "id" : 804955143,
      "in_reply_to_id" : 804607822,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v-qQH",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 252,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 880608452,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955143/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T19:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804955224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955224"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reverted hunk",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-11T19:44:59Z",
      "diff_hunk" : "@@ -246,12 +246,12 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n-    const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n-    if (lowest_compatible > FILE_FORMAT) {\n+    const int lowest_compatible{int{compat} - int{INCOMPATIBILITY_BASE}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r804955224",
      "id" : 804955224,
      "in_reply_to_id" : 804604731,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v-qRY",
      "original_commit_id" : "fa4f9311c75923f74303b4988ba9cc5f779039aa",
      "original_line" : 249,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 880608645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955224/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-11T19:44:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/804955224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I wish we had a hidden RPC for:\r\n\r\nI wish we don't. Generally I am not a fan of baking test code into the production system, unless there is a need for it.",
      "created_at" : "2022-02-12T07:18:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1037037446",
      "id" : 1037037446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII5849z--G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037037446/reactions"
      },
      "updated_at" : "2022-02-12T07:18:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037037446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "\r\n> I wish we don't. Generally I am not a fan of baking test code into the production system, unless there is a need for it.\r\n\r\nFuzzing becomes easier with hidden RPC and I noticed this addrman function in one more [pull request](https://github.com/bitcoin/bitcoin/pull/24201)",
      "created_at" : "2022-02-13T04:03:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1037744260",
      "id" : 1037744260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII58492riE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037744260/reactions"
      },
      "updated_at" : "2022-02-13T04:03:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037744260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805749407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805749407"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why is it necessary to cast the variable to the same type it already is!? I read https://github.com/bitcoin/bitcoin/pull/22879 but it seems that issue is only with enums? I think we have a general problem with `strprintf()` if it must be used like this (for all `int/uintX_t` types):\r\n\r\n```cpp\r\nuint8_t x;\r\nstrprintf(\"%u\", uint8_t{x});\r\n```",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-14T11:28:17Z",
      "diff_hunk" : "@@ -246,6 +246,11 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               uint8_t{compat}, uint8_t{INCOMPATIBILITY_BASE}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805749407",
      "id" : 805749407,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII584wBsKf",
      "original_commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "original_line" : 252,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 7,
      "pull_request_review_id" : 881497874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805749407/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T11:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805749407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The test failed with `lowest_compatible=-33`, as this would make `compat=-1`, which is out of range, but I don't think this condition would ever arise in real-life situations.\r\n\r\nThe test fails with `struct.error: ubyte format requires 0 <= number <= 255` because the python test code refuses to write -1 with the `B` format (see https://docs.python.org/3/library/struct.html) to disk. The addrman deserialization is not even invoked in this case.",
      "created_at" : "2022-02-14T11:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1038981503",
      "id" : 1038981503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII58497Zl_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1038981503/reactions"
      },
      "updated_at" : "2022-02-14T11:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1038981503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805781632"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805781632"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, it is only needed for FILE_FORMAT. Should I remove it from the rest?",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-14T12:12:40Z",
      "diff_hunk" : "@@ -246,6 +246,11 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               uint8_t{compat}, uint8_t{INCOMPATIBILITY_BASE}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805781632",
      "id" : 805781632,
      "in_reply_to_id" : 805749407,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII584wB0CA",
      "original_commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "original_line" : 252,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 7,
      "pull_request_review_id" : 881542971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805781632/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T12:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805781632",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "A `compat` value of `-1` doesn't exist. `compat` is unsigned in both Bitcoin Core and the python mock.",
      "created_at" : "2022-02-14T12:14:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1039016346",
      "id" : 1039016346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII58497iGa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039016346/reactions"
      },
      "updated_at" : "2022-02-14T12:14:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039016346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805830364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805830364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It is unnecessary, I think it is better without it.",
      "commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "created_at" : "2022-02-14T13:16:48Z",
      "diff_hunk" : "@@ -246,6 +246,11 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               uint8_t{compat}, uint8_t{INCOMPATIBILITY_BASE}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r805830364",
      "id" : 805830364,
      "in_reply_to_id" : 805749407,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII584wB_7c",
      "original_commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "original_line" : 252,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 7,
      "pull_request_review_id" : 881612622,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805830364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T13:16:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805830364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806029542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806029542"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, removed.",
      "commit_id" : "fab4df17fca8e50f45ba4452b82a5a5bcd3d7190",
      "created_at" : "2022-02-14T16:36:51Z",
      "diff_hunk" : "@@ -246,6 +246,11 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               uint8_t{compat}, uint8_t{INCOMPATIBILITY_BASE}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806029542",
      "id" : 806029542,
      "in_reply_to_id" : 805749407,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wCwjm",
      "original_commit_id" : "fac32775c8e451527b48e855aebd13b7ed0e820d",
      "original_line" : 252,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 881897628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806029542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T16:36:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806029542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806584904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806584904"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The `format` variable is of type `enum Format : uint8_t` and I think it hit that bug in tinyformat. It printed a symbol with ASCII code 1 instead of the number 1.\r\n\r\n```\r\n6461 7461 6261 7365 3a20 012e         database: ..\r\n                         ^^                     ^\r\n```\r\n",
      "commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "created_at" : "2022-02-15T08:46:54Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               compat, INCOMPATIBILITY_BASE));\n+    }\n     const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n     if (lowest_compatible > FILE_FORMAT) {\n         throw std::ios_base::failure(strprintf(\n             \"Unsupported format of addrman database: %u. It is compatible with formats >=%u, \"\n             \"but the maximum supported by this version of %s is %u.\",\n-            uint8_t{format}, uint8_t{lowest_compatible}, PACKAGE_NAME, uint8_t{FILE_FORMAT}));\n+            format, lowest_compatible, PACKAGE_NAME, uint8_t{FILE_FORMAT}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806584904",
      "id" : 806584904,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wE4JI",
      "original_commit_id" : "fab4df17fca8e50f45ba4452b82a5a5bcd3d7190",
      "original_line" : 259,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 882642990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806584904/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-15T08:49:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806584904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806589496"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806589496"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thanks, fixed",
      "commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "created_at" : "2022-02-15T08:52:09Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",\n+                                               compat, INCOMPATIBILITY_BASE));\n+    }\n     const uint8_t lowest_compatible = compat - INCOMPATIBILITY_BASE;\n     if (lowest_compatible > FILE_FORMAT) {\n         throw std::ios_base::failure(strprintf(\n             \"Unsupported format of addrman database: %u. It is compatible with formats >=%u, \"\n             \"but the maximum supported by this version of %s is %u.\",\n-            uint8_t{format}, uint8_t{lowest_compatible}, PACKAGE_NAME, uint8_t{FILE_FORMAT}));\n+            format, lowest_compatible, PACKAGE_NAME, uint8_t{FILE_FORMAT}));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r806589496",
      "id" : 806589496,
      "in_reply_to_id" : 806584904,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wE5Q4",
      "original_commit_id" : "fab4df17fca8e50f45ba4452b82a5a5bcd3d7190",
      "original_line" : 259,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 882649257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806589496/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-15T08:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806589496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, the first commit is completely unrelated",
      "created_at" : "2022-02-15T13:52:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1040300274",
      "id" : 1040300274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584-Abjy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040300274/reactions"
      },
      "updated_at" : "2022-02-15T13:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040300274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813305199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813305199"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "INCOMPATIBILITY_BASE isn't the expected compat value but a lower bound: expected are values >= INCOMPATIBILITY_BASE.",
      "commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "created_at" : "2022-02-23T20:48:57Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813305199",
      "id" : 813305199,
      "line" : 251,
      "node_id" : "PRRC_kwDOABII584weg1v",
      "original_commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "original_line" : 251,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 891662322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813305199/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-23T20:53:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813305199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813614937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813614937"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, I can see how this can be misinterpreted.\r\n\r\nWhat about:\r\n\r\n```suggestion\r\n                                               \"is lower than the expected minimum value %u.\",\r\n```",
      "commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "created_at" : "2022-02-24T07:36:15Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813614937",
      "id" : 813614937,
      "in_reply_to_id" : 813305199,
      "line" : 251,
      "node_id" : "PRRC_kwDOABII584wfsdZ",
      "original_commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "original_line" : 251,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 6,
      "pull_request_review_id" : 892071844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813614937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-24T07:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813614937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813886114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813886114"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, I'd prefer that.",
      "commit_id" : "fa0fb76b7772eda83ec9c7030911a63331f590c5",
      "created_at" : "2022-02-24T13:38:00Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813886114",
      "id" : 813886114,
      "in_reply_to_id" : 813305199,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wguqi",
      "original_commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "original_line" : 251,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 892449982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813886114/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-24T13:38:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813886114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813896546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813896546"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thanks, done",
      "commit_id" : "fa0fb76b7772eda83ec9c7030911a63331f590c5",
      "created_at" : "2022-02-24T13:49:54Z",
      "diff_hunk" : "@@ -246,12 +246,17 @@ void AddrManImpl::Unserialize(Stream& s_)\n \n     uint8_t compat;\n     s >> compat;\n+    if (compat < INCOMPATIBILITY_BASE) {\n+        throw std::ios_base::failure(strprintf(\"Corrupted addrman database: The compat value (%u) \"\n+                                               \"is lower than the expected %u.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#discussion_r813896546",
      "id" : 813896546,
      "in_reply_to_id" : 813305199,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wgxNi",
      "original_commit_id" : "faaa6c2af56eedaf8d50b33015d98c7bc289c2f4",
      "original_line" : 251,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 892464655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813896546/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-24T13:49:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813896546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK fa0fb76b7772eda83ec9c7030911a63331f590c5\r\n\r\nOnly change: Rewording of the error message",
      "created_at" : "2022-02-24T15:12:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1049959360",
      "id" : 1049959360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584-lRvA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1049959360/reactions"
      },
      "updated_at" : "2022-02-24T15:12:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1049959360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-02-25T08:37:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1050646852",
      "id" : 1050646852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584-n5lE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050646852/reactions"
      },
      "updated_at" : "2022-02-25T08:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050646852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2022-02-25T10:05:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1050712500",
      "id" : 1050712500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584-oJm0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050712500/reactions"
      },
      "updated_at" : "2022-02-25T10:05:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050712500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK fa097d074bc1afcc2a52976796bb618f7c6a68b3",
      "created_at" : "2022-03-02T13:21:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1056925290",
      "id" : 1056925290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584-_2Zq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1056925290/reactions"
      },
      "updated_at" : "2022-03-02T13:21:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1056925290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild Mind taking another look? Should be easy to re-ACK",
      "created_at" : "2022-03-08T08:47:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24312#issuecomment-1061540968",
      "id" : 1061540968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24312",
      "node_id" : "IC_kwDOABII584_RdRo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061540968/reactions"
      },
      "updated_at" : "2022-03-08T08:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061540968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
