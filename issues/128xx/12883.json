{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "# What behavior did you expect?\r\n\r\nWhen the mempool contains a transaction that conflicts with a wallet transaction, for this to (always) be visible in both bitcoin-qt GUI and bitcoin-cli output.\r\n\r\n# What was the actual behavior (provide screenshots if the issue is GUI-related)?\r\n\r\nRPC:\r\nIf the conflicting transaction touches the wallet (eg. if you are the sender, or if you are the recipient and we are considering an honest RBF feebump), the conflict is visible in the (undocumented) `walletconflicts` return value of the `listtransactions` and `gettransaction` RPC calls. In the case the conflicting transaction does NOT touch the wallet (eg. if you are the receiver of a maliciously doublespent RBF transaction), this is not indicated.\r\n\r\nGUI:\r\nIf the conflicting transaction touches the wallet (eg. if you are the sender, or if you are the recipient and we are considering an honest RBF feebump), all versions are visible in the GUI, without indication of conflict between them, but the \"pending\" part of the balance (correctly) does not show a duplicate amount of incoming money. In the case the conflicting transaction does NOT touch the wallet (eg. if you are the receiver of a maliciously doublespent RBF transaction), there is no indication of any conflict (pending balance still counts the incoming transaction that has been doublespent) aside from the transaction details stating it is not in the mempool.\r\n\r\n![rbfdoublespend1](https://user-images.githubusercontent.com/37372069/38313687-eb5b8e02-3824-11e8-8f02-cd124946f54f.png)\r\n\r\n![rbfdoublespend2](https://user-images.githubusercontent.com/37372069/38313690-ef300f1c-3824-11e8-80e8-0506924c6454.png)\r\n\r\n![rbfdoublespend3](https://user-images.githubusercontent.com/37372069/38313695-f1a1819a-3824-11e8-9c6b-eba5778353e3.png)\r\n\r\n# How reliably can you reproduce the issue, what are the steps to do so?\r\n\r\nVery reliably; screenshots provided are from 3 interconnected regtest nodes, the top node has mined some coins and has first spent them to the middle node, RBF-feebumped that transaction (only second transaction shown in screenshots), RBF-doublespent it to the bottom node, then RBF-doublespent it to itself. All nodes have only the latest transaction in the mempool.\r\n\r\n# What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)?\r\n\r\nVersion 0.16.0, pre-compiled version from bitcoincore.org.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12883/comments",
   "created_at" : "2018-04-04T14:30:01Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12883/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12883",
   "id" : 311255133,
   "labels" : [
      {
         "color" : "fef2c0",
         "default" : false,
         "id" : 164208572,
         "name" : "Mempool",
         "node_id" : "MDU6TGFiZWwxNjQyMDg1NzI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool"
      },
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12883/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzMTEyNTUxMzM=",
   "number" : 12883,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Transactions in mempool that conflict with wallet transactions are not (always) shown in GUI or RPC",
   "updated_at" : "2019-06-08T09:12:01Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12883",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/37372069?v=4",
      "events_url" : "https://api.github.com/users/setpill/events{/privacy}",
      "followers_url" : "https://api.github.com/users/setpill/followers",
      "following_url" : "https://api.github.com/users/setpill/following{/other_user}",
      "gists_url" : "https://api.github.com/users/setpill/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/setpill",
      "id" : 37372069,
      "login" : "setpill",
      "node_id" : "MDQ6VXNlcjM3MzcyMDY5",
      "organizations_url" : "https://api.github.com/users/setpill/orgs",
      "received_events_url" : "https://api.github.com/users/setpill/received_events",
      "repos_url" : "https://api.github.com/users/setpill/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/setpill/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/setpill/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/setpill"
   }
}
