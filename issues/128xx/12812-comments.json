[
   {
      "author_association" : "MEMBER",
      "body" : "unit tests failing in travis:\r\n\r\n```\r\ntest/getarg_tests.cpp(39): error in \"configfile\": check gArgs.GetBoolArg(\"-foo\", false) failed\r\ntest/getarg_tests.cpp(43): error in \"configfile\": check !gArgs.GetBoolArg(\"-bar\", true) failed\r\ntest/getarg_tests.cpp(46): error in \"configfile\": check gArgs.GetArg(\"-baz\", \"\") == \"11\" failed [ != 11]\r\ntest/getarg_tests.cpp(47): error in \"configfile\": check gArgs.GetArg(\"-baz\", \"eleven\") == \"11\" failed [eleven != 11]\r\ntest/getarg_tests.cpp(49): error in \"configfile\": check gArgs.GetArg(\"-qux\", \"\") == \"eleven\" failed [ != eleven]\r\ntest/getarg_tests.cpp(53): error in \"configfile\": check gArgs.GetArg(\"-baz\", 0) == 11 failed [0 != 11]\r\ntest/getarg_tests.cpp(54): error in \"configfile\": check gArgs.GetArg(\"-qux\", 11) == 0 failed [11 != 0]\r\ntest/getarg_tests.cpp(58): error in \"configfile\": check !gArgs.GetBoolArg(\"-quux\", true) failed\r\ntest/getarg_tests.cpp(70): error in \"configfile\": exception std::runtime_error is expected\r\n```",
      "created_at" : "2018-03-29T15:37:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-377276447",
      "id" : 377276447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-03-29T15:37:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377276447",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jnewbery Seems like it was a datadir caching issue, clearing the cache worked.\r\n\r\nIronically, ParseParameters('-datadir') does not clear the datadir cache, probably because ParseParameters is called once and at the beginning of the run.",
      "created_at" : "2018-03-30T00:58:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-377415743",
      "id" : 377415743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-03-30T00:58:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377415743",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rerunning after rebase for good measure.",
      "created_at" : "2018-03-30T01:00:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-377415947",
      "id" : 377415947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-03-30T01:00:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377415947",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
      "created_at" : "2018-03-30T14:19:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-377534031",
      "id" : 377534031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-03-30T14:19:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377534031",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14220652?v=4",
         "events_url" : "https://api.github.com/users/conscott/events{/privacy}",
         "followers_url" : "https://api.github.com/users/conscott/followers",
         "following_url" : "https://api.github.com/users/conscott/following{/other_user}",
         "gists_url" : "https://api.github.com/users/conscott/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/conscott",
         "id" : 14220652,
         "login" : "conscott",
         "organizations_url" : "https://api.github.com/users/conscott/orgs",
         "received_events_url" : "https://api.github.com/users/conscott/received_events",
         "repos_url" : "https://api.github.com/users/conscott/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/conscott/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/conscott/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/conscott"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12812#discussion_r178528177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12812"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178528177"
         }
      },
      "author_association" : "OWNER",
      "body" : "The practice for the unit tests has been to embed all test files in the source code - by including the generated test files (in this case `bitcoin.conf.raw.h`, I think).\r\nThe reason is that it should be possible to copy `test_bitcoin` to a new platform (for example by installing the distributed binaries) and run it without copying the entire source tree.\r\nIf you really need a file (for testing) instead of data in memory, create the file in a temporary directory.",
      "commit_id" : "3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
      "created_at" : "2018-04-02T11:25:29Z",
      "diff_hunk" : "@@ -30,6 +30,50 @@ static void ResetArgs(const std::string& strArg)\n     gArgs.ParseParameters(vecChar.size(), vecChar.data());\n }\n \n+BOOST_AUTO_TEST_CASE(configfile)\n+{\n+  fs::path expectedConfigPath(fs::system_complete(\"test/data/bitcoin.conf\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#discussion_r178528177",
      "id" : 178528177,
      "original_commit_id" : "3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
      "original_position" : 6,
      "path" : "src/test/getarg_tests.cpp",
      "position" : 6,
      "pull_request_review_id" : 108596524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12812",
      "updated_at" : "2018-04-02T11:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178528177",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but agree with @laanwj about the test file. Take a look at https://github.com/bitcoin/bitcoin/blob/821980c00feef143a6ecf6af65926e18cfd30396/src/Makefile.test.include#L161 to see how the `.json.h` files are generated.",
      "created_at" : "2018-04-02T13:52:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-377933559",
      "id" : 377933559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-04-02T13:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377933559",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Take a look at bitcoin/src/Makefile.test.include\r\n\r\nFeel free to fix this whatever way is simplest, but I would probably chose to avoid dealing with make, and instead just put the config in a multiline raw `R\"(...)\"` string that maybe gets written to a temporary file at runtime, if necessary.",
      "created_at" : "2018-04-03T15:37:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-378294402",
      "id" : 378294402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-04-03T15:37:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378294402",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : ">instead just put the config in a multiline raw R\"(...)\" string that maybe gets written to a temporary file at runtime, if necessary.\r\n\r\nWhat, C++11 has multi-line string literals? TIL",
      "created_at" : "2018-04-03T16:50:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-378318943",
      "id" : 378318943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-04-03T16:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378318943",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think #12878 covers most of this (without needing the separate file, due to splitting ReadConfigStream out of ReadConfigFile), and that the `-datadir` and file-reading testing is probably better done via the functional test suite rather than the unit tests.",
      "created_at" : "2018-04-05T00:19:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-378784650",
      "id" : 378784650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-04-05T00:19:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378784650",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Agreed, I prefer #12878 Ã°ÂÂÂ ",
      "created_at" : "2018-04-05T01:32:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12812#issuecomment-378794806",
      "id" : 378794806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12812",
      "updated_at" : "2018-04-05T01:32:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378794806",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   }
]
