{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Currently, users can open multiple connections to a reachable node using the same IP address and a different port and request blockchain data at each connection. This behavior has the following impacts.\r\n(1) Overwhelm the reachable node and consume its bandwidth by requesting data and discarding it (see video demonstrations here: https://www.dropbox.com/s/pvasua7lnepdgfq/Occupy_Connections.mp4?dl=0 and https://www.dropbox.com/s/45ld1h7cxi3xzj6/RequestingBlockchain.mp4?dl=0)\r\n\r\n(2) Undermine the transaction relaying anonymity since multiple connections to each node increase the probability of mapping a transaction to an IP address (currently, the random delay factor in the trickling effect implicitly assumes the attacker has one connection to each node). By establishing multiple connections, the attacker undermines the anonymity property. \r\n\r\nTo address the two concerns above, we enforce 1 incoming connection per IP address. Please note that it will not significantly affect the nodes behind NAT since there are close to 10K reachable nodes and NATed nodes only need 8-10 outbound connections. Assuming 10K reachable nodes, each with default 117 incoming connections, there are 10K*117 incoming slots available out of which (10K*8) are supposedly occupied by the reachable nodes. As a result, the network has 1090000 slots for unreachable nodes. In the worst case, (i.e., the unreachable nodes really exceed in count), a natural equilibrium is self-enforced where some of the unreachable nodes must become reachable and support the rest of the network (altruism in the P2P network). \r\n\r\nWe were motivated to apply 1IP per-connection policy since we observed malicious behavior on our node whereby two IP addresses occupied multiple incoming connection slots which led to the bandwidth and privacy concerns.",
   "closed_at" : "2021-04-21T05:15:46Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 13,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21687/comments",
   "created_at" : "2021-04-15T04:46:56Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21687/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/21687",
   "id" : 858477602,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "description" : null,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21687/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NjE1NzA5ODE2",
   "number" : 21687,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/21687.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21687",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/21687.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21687"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "p2p: 1 IP per-connection policy",
   "updated_at" : "2021-04-21T05:15:46Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21687",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6051784?v=4",
      "events_url" : "https://api.github.com/users/am33r/events{/privacy}",
      "followers_url" : "https://api.github.com/users/am33r/followers",
      "following_url" : "https://api.github.com/users/am33r/following{/other_user}",
      "gists_url" : "https://api.github.com/users/am33r/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/am33r",
      "id" : 6051784,
      "login" : "am33r",
      "node_id" : "MDQ6VXNlcjYwNTE3ODQ=",
      "organizations_url" : "https://api.github.com/users/am33r/orgs",
      "received_events_url" : "https://api.github.com/users/am33r/received_events",
      "repos_url" : "https://api.github.com/users/am33r/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/am33r/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/am33r/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/am33r"
   }
}
