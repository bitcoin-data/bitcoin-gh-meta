{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "```\r\nsrc/test/test_bitcoin --run_test=wallet_tests\r\n```\r\n\r\nPassed when configured without BDB, fails when configured with BDB:\r\n\r\n```sh\r\n./configure 'BDB_LIBS=-L/â¦' BDB_CFLAGS=-I/â¦/include CC=clang CXX=clang++ --enable-suppress-external-warnings --disable-asm --with-sanitizers=address --disable-fuzz-binary --without-gui\r\nmake -C src/test\r\nsrc/test/test_bitcoin --run_test=wallet_tests\r\n\r\nâ¦\r\n\r\n*** No errors detected\r\n\r\n=================================================================\r\n==637422==ERROR: LeakSanitizer: detected memory leaks\r\n\r\nDirect leak of 320 byte(s) in 2 object(s) allocated from:\r\n    #0 0x555592a03dbe in malloc (/home/sjors/dev/bitcoin/src/test/test_bitcoin+0x470dbe) (BuildId: 8a0fe1527885800d0ca318fefe6c7e66c608d5eb)\r\n    #1 0x555595965e64 in __os_malloc (/home/sjors/dev/bitcoin/src/test/test_bitcoin+0x33d2e64) (BuildId: 8a0fe1527885800d0ca318fefe6c7e66c608d5eb)\r\n\r\nSUMMARY: AddressSanitizer: 320 byte(s) leaked in 2 allocation(s).\r\nmake[3]: *** [Makefile:21823: wallet/test/wallet_tests.cpp.test] Error 1\r\n```\r\n\r\nThere's other BDB related `-with-sanitizers=address` issues: #22592, #19034.\r\n\r\nThere's currently no suppression file for the address sanitizer and I don't know how to make one. It could make sense to suppress the ones we've found, keep a Github issue open for each of one to fix & remove the suppression.\r\n\r\nWithout BDB I can run the full unit and functional test suite just fine, so that's good news in the long run. But in the shorter run it's good to be able to thoroughly test all the legacy -> descriptor migration code that's being written.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 7,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283/comments",
   "created_at" : "2023-03-20T12:01:19Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/27283",
   "id" : 1631965664,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585hRdHg",
   "number" : 27283,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283/timeline",
   "title" : "Memory leak in wallet_tests with BDB using address sanitizer",
   "updated_at" : "2023-03-20T12:58:58Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27283",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
