[
   {
      "author_association" : "NONE",
      "body" : "@fanquake, I suppose it can be OS independent bug.",
      "created_at" : "2023-03-12T16:00:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1465235684",
      "id" : 1465235684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XVbjk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1465235684/reactions"
      },
      "updated_at" : "2023-03-12T16:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1465235684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There were some changes in the code which is responsible for handling settings.\r\n\r\n@desirepl \r\n\r\nMind checking out the recent master branch please?",
      "created_at" : "2023-03-13T10:21:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1465872252",
      "id" : 1465872252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XX298",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1465872252/reactions"
      },
      "updated_at" : "2023-03-13T10:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1465872252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I see only translation changes 2 hours ago.\r\nI'm not so familiar with git, so checked code updates here at main and other branches. Only your updates to translations 2 hours ago. Seems doing something wrong or don't understand.",
      "created_at" : "2023-03-13T12:22:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1466048126",
      "id" : 1466048126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XYh5-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466048126/reactions"
      },
      "updated_at" : "2023-03-13T13:36:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466048126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I see only translation changes 2 hours ago. I'm not so familiar with git, so checked code updates here at main and other branches. Only your updates to translations 2 hours ago. Seems doing something wrong or don't understand, ÐºÐ¾ÑÐ¾ÑÐµ.\r\n\r\nI'm talking about changes since v24.0.1 release which was tested by you. For example, https://github.com/bitcoin/bitcoin/pull/27150.",
      "created_at" : "2023-03-13T13:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1466131399",
      "id" : 1466131399,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XY2PH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466131399/reactions"
      },
      "updated_at" : "2023-03-13T13:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466131399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I'm talking about changes since v24.0.1 release which was tested by you. For example, #27150.\r\n\r\nOmg. I've cloned not the last code. I thought after \"git tag\" that 24.0.1 is the latest, not the rc's.\r\nOk, I'll try later when it's be possible. Now it isn't.",
      "created_at" : "2023-03-13T13:35:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1466158043",
      "id" : 1466158043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XY8vb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466158043/reactions"
      },
      "updated_at" : "2023-03-13T13:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466158043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I couldn't reproduce this issue on macOS, here's what I tried:\r\n\r\n- remove bitcoin plist file\r\n- open bitcoin-qt with `-regtest`, setup wizard pops up, enter custom non-default path\r\n- close bitcoin\r\n- add `bitcoin.conf` file at custom path including the line `blocksdir=/tmp/blocks-test`\r\n- restart bitcoin-qt\r\n\r\nthe result was expected, bitcoin used the specified blocks directory.",
      "created_at" : "2023-03-14T17:29:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1468528728",
      "id" : 1468528728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585Xh_hY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468528728/reactions"
      },
      "updated_at" : "2023-03-14T17:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468528728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hebasto git clone --depth 1 > build > run & tested\r\nall the same, it ignores .conf's datadir\r\n\r\n@pinheadmz add custom datadir too\r\nand look where bitcoin will write it's data - to the non-default path you entered before or to the conf's path",
      "created_at" : "2023-03-14T18:46:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1468646427",
      "id" : 1468646427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XicQb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468646427/reactions"
      },
      "updated_at" : "2023-03-14T18:46:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468646427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@desirepl ok got it, I can reproduce. I think this is only an issue with the GUI. I also noticed one or two other little oddities around config file and will open a PR soon.",
      "created_at" : "2023-03-14T20:26:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1468791319",
      "id" : 1468791319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585Xi_oX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468791319/reactions"
      },
      "updated_at" : "2023-03-14T20:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468791319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@pinheadmz bitcoin-cli also ignores .conf's datadir (and blocksdir, now I forgot what's wrong with that, maybe when it ignores datadir same time it ignores blocksdir :( I can't read cpp code so can't help there much), so not only GUI\r\nThat's why I adopded my code to run -qt/cli with addition of both datadir and blocksdir arguments, not only datadir. Some of the 3 days tests (alot of them) lead me to that decision.\r\nmaybe bitcoind too, didn't checked it, because spent too much time for -qt/-cli to understand why it's not working as must be\r\n\r\nPS: label [Windows] is wrong, it's OS irrelevant as I supposed in https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1465235684",
      "created_at" : "2023-03-14T22:29:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1468925984",
      "id" : 1468925984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585Xjggg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468925984/reactions"
      },
      "updated_at" : "2023-03-14T22:37:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468925984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It's not the only GUI bug.\r\n1. Start bitcoind -debuglogfile\r\n2. It says it's default datadir is in %AppData%\\Bitcoin and \"using this data directory\" if no bitcoin.conf there (-qt.exe reads Registry value for default datadir in that case)\r\n3. Place bitcoin.conf there and add two lines: datadir and blocksdir (out of sections, in global scope)\r\n4. Start bitcoind -debuglogfile again\r\n5. It says it's default datadir and using it the same as in 2; blocksdir is used as in .conf. Now it is ignoring datadir in global scope\r\n6. Edit bitcoin.conf and add section [main], place there other datadir\r\n7. Repeat N4\r\n8. Now it says it's default datadir is in %AppData% but using datadirectory from [main] section in .conf\r\n\r\nThe same with -cli\r\nFor example, if I run bitcoin-cli -getinfo (no running bitcoin client, just to see what's happening) and when bitcoin.conf is in %AppData% and in state as in N3 - then -cli searching for cookie in %AppData% and not in the datadir in .conf, but when datadir is in [main] section then running cli -getinfo searching for cookie in datadir from conf.\r\n\r\nSo it is NOT GUI relevand and NOT OS relevant as stated previously.",
      "created_at" : "2023-03-15T13:23:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470006043",
      "id" : 1470006043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XnoMb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470006043/reactions"
      },
      "updated_at" : "2023-03-15T14:29:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470006043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "bitcoin_wallet -datadir=*** info: \"Failed to load database path '***'. Data is not in recognized format.\"\r\n*** = any valid datadir/blocksdir/walletdir (only one wallet is in sqlite format, regtest)\r\nbitcoin_wallet searches wallets on datadir? but for other tools there are walletdir parameter...",
      "created_at" : "2023-03-15T14:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470110239",
      "id" : 1470110239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XoBof",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470110239/reactions"
      },
      "updated_at" : "2023-03-15T14:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470110239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems like there is a problem to be addressed here, though I'm not 100% sure what the best way to address it would be. You could have a datadir A containing a bitcoin.conf file specifying another datadir B that contains another bitcoin.conf file specifying another datadir C that contains another bitcoin.conf file, and so on.\r\n\r\nVarious ways this could be handled:\r\n\r\n1. Follow the path forever just merging all the bitcoin.conf settings values together and only failing if there is a loop.\r\n2. Follow the path forever, but just use the final datadir and settings from the final bitcoin.conf file. Make it an error or warning if there are settings from earlier bitcoin.conf files that are ignored.\r\n3. Follow the path until parsing the first conf file. Make it an error or warning if the conf file specifies a datadir with a different bitcoin.conf file and that file would be ignored.\r\n\r\nI believe the current behavior is basically (3) for bitcoind (but not bitcoin-qt, see below) except we are missing errors/warnings if there is an ignored bitcoin.conf file in the last datadir. Relevant code is:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c4958bd4c06026dc108bc7f5f063d1f389d279b/src/common/init.cpp#L20-L49\r\n\r\nI think if we keep stick with option 3 and just add an error if the datadir contains a bitcoin.conf file that is being ignored, that should be good enough for most use-cases. But if there are applications for options 1 or option 2, it would be interesting to know about them, they wouldn't be much harder to implement.\r\n\r\n---\r\n\r\nUnfortunately the behavior for `bitcoin-qt` is stupider than `bitcoind`, because if the user chooses a GUI datadir setting that is different *in any way* from the default datadir setting, the `Intro::showIfNeeded` function makes the GUI datadir setting sticky, overriding any value in `bitcoin.conf`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c4958bd4c06026dc108bc7f5f063d1f389d279b/src/qt/intro.cpp#L259-L266\r\n\r\n~The comment in that code about \"make it possible to override -datadir in the bitcoin.conf file\" is not correct, because at the time of that `Intro::showIfNeeded` is called, the bitcoin.conf file will not have been parsed, so `SoftSetArg` will override any value `bitcoin.conf` may contain. It seems like that comment was not correct even at the time when it was written in https://github.com/bitcoin/bitcoin/pull/3935/commits/c61fe44194ea6d549adfe9ae944ce6fa3a467e0f from #3935~. (EDIT: Technically the comment is correct because it doesn't say it is always possible for bitcoin.conf datadir= setting to be applied, just that it is sometimes possible for it to be applied. It would been better if the code always let the bitcoin.conf setting take precedence consistently, but the comment does accurately describe what the code does)\r\n\r\nCleanest way to fix GUI issue would be probably be for Qt to override the lower priority `GetDefaultDataDir` value, instead of using `SoftSetArg` and changing the `datadir` setting.",
      "created_at" : "2023-03-15T15:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470284856",
      "id" : 1470284856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XosQ4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470284856/reactions"
      },
      "updated_at" : "2023-03-24T15:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470284856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> bitcoin_wallet searches wallets on datadir? but for other tools there are walletdir parameter...\r\n\r\nThis looks like another thing that should be fixed, though in practice right now `bitcoin-wallet` only operates on one wallet at a time, so if you wanted to specify `bitcoin-wallet -walletdir=/path -wallet=mywallet` you could just specify `bitcoin-wallet -wallet=/path/mywallet` instead\r\n\r\nThe `bitcoin-wallet` code actually would already use the `-walletdir` value if it could be passed:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c4958bd4c06026dc108bc7f5f063d1f389d279b/src/wallet/walletutil.cpp#L15\r\n\r\nIt just can't be passed right now because `SetupWalletToolArgs` does not add it:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c4958bd4c06026dc108bc7f5f063d1f389d279b/src/bitcoin-wallet.cpp#L32",
      "created_at" : "2023-03-15T15:58:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470305275",
      "id" : 1470305275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XoxP7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470305275/reactions"
      },
      "updated_at" : "2023-03-15T15:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470305275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@ryanofsky \"Various ways this could be handled\"\r\nLet's think about situation:\r\n1) we have external dir/disk with blocks only (blk* and rev* for now are stick together :|)\r\n2) we have datadir with indexes/chainstate and other files currently belongs to datadir (peers/mempool etc) at another second/disk\r\n3) we have configuration files at third dir/disk\r\n4) we have logdir for everything at fourth dir/disk\r\n\r\nIt's a good solution to divide them all.\r\nNow we do some magic - place bitcoin.conf at default datadir, add datadir/blockdir/debuglogfile there.\r\nAnd... if all this is \"online\" (exist or connected etc) then all goes right, everything starts and work.\r\nif not exist/unavailable - then any tool can't start with errors/warnings and this is fine.\r\n\r\nNow all this ignores .conf when starting core utils. And if I don't need by any reason to write anything to %AppData% especially bitcoin blockchain now it is filling with unneeded files and crushing everything. To \"fix\" that I need to remember each time add parameters to programs, make links for that or any other thing must be remembered.\r\nI or any other IT in most of the cases if using it everyday will remember. But if just occasionally? (my case now) or just unexperienced user that just want to have his \"little SSD\" with just an OS and other things at external drives?\r\nNow it is a challenge and people can think that they are stupid because something goes wrong but they don't understand what's wrong. \"Googling\" it without results but there just a couple of bugs.\r\n\r\nSo answering your question - yes, it must check conf at default dir, open it, get parameters from it, use them, if there are datadir again - take conf from there... or, add another parameter that will allow recursion of conf's in datadirs? But original .conf parameters must be used 100%. datadir too - there must be placed indexes, chainstate etc.",
      "created_at" : "2023-03-15T16:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470344927",
      "id" : 1470344927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585Xo67f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470344927/reactions"
      },
      "updated_at" : "2023-03-15T16:23:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470344927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/desirepl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/desirepl/followers",
         "following_url" : "https://api.github.com/users/desirepl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/desirepl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/desirepl",
         "id" : 18093731,
         "login" : "desirepl",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/desirepl/orgs",
         "received_events_url" : "https://api.github.com/users/desirepl/received_events",
         "repos_url" : "https://api.github.com/users/desirepl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/desirepl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/desirepl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/desirepl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@desirepl thanks for clarifying your use case, that makes a lot of sense. I see the appeal of placing a stub bitcoin.conf in the default location that points to other blocks, index, and log directories, as well as to another config file. This lets you specify disk layout separately from network configuration, and makes applications and command line utilities work \"magically\" as you say without requiring manual arguments.\r\n\r\nSo I can see how behavior (3) from https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470284856 of only using the first `bitcoin.conf` file and not loading another `bitcoin.conf` file in the new datadir would be unappealing, while (1) would be more appealing. Behavior (2) would also not be helpful because it would only load settings from the last `bitcoin.conf` file.\r\n\r\nHowever, I don't actually think you need behavior (1), because instead of relying on `datadir=` in the original config file to implicitly load another config file, you could explicitly specify `includeconf=` in the original config file to include the other config file.\r\n\r\nSo I think (3) might be a better solution than (1), as long as there is an explicit error when a datadir contains a `bitcoin.conf` that is being ignored. (Right now the second `bitcoin.conf` file is being silently ignored which is bad.) The reason I think that (3) could be better than (1) is that bitcoin settings precedence is already very confusing (see #17508) so merging multiple config files together when they might contain duplicate settings could lead to surprising and unintuitive behaviors. If you explicitly include another conf file with `includeconf`, then we can be pretty sure that you actually want multiple config files to be merged. But if you just happen to have two `bitcoin.conf` files in two different datadirs, it's not obvious that you want the files merged or you how want to merge them. You could accidentally have two `bitcoin.conf` files because of a configuration error, or a failed data transfer, or bad backup. So it would seem safest to just stop and treat this is a misconfiguration.",
      "created_at" : "2023-03-15T17:12:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470430978",
      "id" : 1470430978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XpP8C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470430978/reactions"
      },
      "updated_at" : "2023-03-15T17:12:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470430978",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky there is a discrepancy between bitcoind and the GUI though. I think it comes down to this line:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c4958bd4c06026dc108bc7f5f063d1f389d279b/src/qt/intro.cpp#L259-L265\r\n\r\nThe comment is well-meaning but I think what ends up happening is that `SoftSetArg()` ends up calling `ForceSetArg()` and that setting takes precedence over the `datadir` setting in the actual conf file.\r\n\r\nwith bitcoind you CAN:\r\n- put conf file in default location\r\n- that conf file specifies separate `datadir` and `blocksdir`\r\n\r\nbut the GUI also has this `QSettings` object which is stored in the system and is parsed before anything else. so if a non-default location is specified there the behavior changes.\r\n\r\nIt almost seems like `datadir` is over-used. There really is a `confdir`, `datadir` and `blocksdir` especially from the GUI perspective",
      "created_at" : "2023-03-15T17:18:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470439854",
      "id" : 1470439854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XpSGu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470439854/reactions"
      },
      "updated_at" : "2023-03-15T17:18:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470439854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky there is a discrepancy between bitcoind and the GUI though. I think it comes down to this line:\r\n\r\nYes, that's a bug. That's the same line I pointed to above in \"Unfortunately the behavior for bitcoin-qt is stupider than bitcoind\" https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470284856. It's a simple precedence bug and fix should be straightforward.\r\n\r\n> the GUI also has this `QSettings` object which is stored in the system and is parsed before anything else. so if a non-default location is specified there the behavior changes.\r\n\r\nRight, this is basically the way it was designed and it means the bitcoin GUI and CLI tools can interact poorly. I think a better design make GUI and CLI programs both use `GetDefaultDataDir()` consistently. The GUI would still need a way to let users configure an external data directory but it could do that by just making a `GetDefaultDataDir()` a symlink to that directory (or a text file on operating systems that do not support symlinks), instead of recording the external data directory in a QSettings \"strDataDir\" field inaccessible to CLI tools.\r\n\r\n> It almost seems like `datadir` is over-used. There really is a `confdir`, `datadir` and `blocksdir` especially from the GUI perspective\r\n\r\nThis is probably true, but also probably there should be a simple way to just specify one data path. All of this could be revisited but if we just fix two bugs (bitcoin GUI precedence bug, and `bitcoin.conf` being silently ignored in second datadir instead of triggering a configuration error), I think this issue could be resolved)",
      "created_at" : "2023-03-15T18:00:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470504330",
      "id" : 1470504330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585Xph2K",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470504330/reactions"
      },
      "updated_at" : "2023-03-15T18:00:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470504330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ð PR in progress on this branch: https://github.com/pinheadmz/bitcoin/commits/conf-file",
      "created_at" : "2023-03-15T18:01:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470506278",
      "id" : 1470506278,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XpiUm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470506278/reactions"
      },
      "updated_at" : "2023-03-15T18:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470506278",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> +1 PR in progress on this branch: https://github.com/pinheadmz/bitcoin/commits/conf-file\r\n\r\nThanks, just some quick feedback on 2a2488fab691a69b66395929a2c645b4a2649ace: I don't think it would be good to add a new level of settings precedence just to deal with this one GUI setting. We migrated other settings out of QSettings which are not GUI specific in https://github.com/bitcoin-core/gui/pull/602 and we can migrate `strDataDir` as well to avoid unnecessary differences between CLI and GUI behavior (one way to do it would be the way described above \"I think a better design\" https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470504330).\r\n\r\nA simpler way to fix the GUI bug here would just be to add a `ArgsManager` `std::optional<fs::path> m_default_datadir` member and have the GUI set `m_default_datadir` instead of calling `SoftSetArg`, and have `GetDefaultDataDir()` return `m_default_datadir` if it is set.",
      "created_at" : "2023-03-15T19:17:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470663620",
      "id" : 1470663620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585XqIvE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470663620/reactions"
      },
      "updated_at" : "2023-03-15T19:18:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470663620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@desirepl PR https://github.com/bitcoin/bitcoin/pull/27273 is ready for review, are you able to try it out / review? See if it fixes your use-case and leave a comment if you can.\r\n\r\nI did not address anything directly related to `bitcoin-cli`, I wasn't able to reproduce any issues and I'm not exactly sure what your cli issue was. Can you provide steps and unexpected behavior for that?",
      "created_at" : "2023-03-21T13:54:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1477880541",
      "id" : 1477880541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585YFqrd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1477880541/reactions"
      },
      "updated_at" : "2023-03-21T13:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1477880541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I did not address anything directly related to `bitcoin-cli`, I wasn't able to reproduce any issues and I'm not exactly sure what your cli issue was. Can you provide steps and unexpected behavior for that?\r\n\r\nThe issue with bitcoind described https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470006043 is that a config file specifying a datadir which contains a second config file will ignore the second config file with no warning. I outlined three solutions for this issue here: https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470284856 and implemented the third solution in a branch here:  https://github.com/bitcoin/bitcoin/compare/master...ryanofsky:bitcoin:pr/ignoredconf\r\n\r\nI haven't posted a PR yet because I'm working on a python test which is a little tricky to implement.\r\n\r\nEDIT: This is now posted as #27302\r\n",
      "created_at" : "2023-03-21T17:22:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1478301187",
      "id" : 1478301187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585YHRYD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1478301187/reactions"
      },
      "updated_at" : "2023-03-22T17:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1478301187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@pinheadmz\r\nW:\\\\BitcoinCore\\\\\\_strDataDir\\\\bitcoin.conf:\r\n```\r\nblocksdir=\"W:/BitcoinCore/BlocksDir_/_.no_params\"\r\ndatadir=\"W:/BitcoinCore/DataDir_/_.no_params\"\r\n```\r\n2023-05-08T22:11:59Z Using data directory W:\\\\BitcoinCore\\\\\\_strDataDir (this was read from hive)\r\n2023-05-08T22:11:59Z Config file: W:\\\\BitcoinCore\\\\\\_strDataDir\\\\bitcoin.conf\r\n2023-05-08T22:11:59Z Config file arg: blocksdir=\"W:/BitcoinCore/BlocksDir_/\\_.no_params\"\r\n2023-05-08T22:11:59Z Config file arg: datadir=\"W:/BitcoinCore/DataDir_/\\_.no_params\" (**ignored**)\r\n\r\nadding to bitcoin.conf:\r\n```\r\n[main]\r\ndatadir=\"W:/BitcoinCore/DataDir_/_1\"\r\n```\r\n2023-05-08T22:17:45Z Using data directory W:\\\\BitcoinCore\\\\\\_strDataDir\r\n2023-05-08T22:17:45Z Config file arg: [main] datadir=\"W:/BitcoinCore/DataDir_/\\_1\" (**ignored** too)\r\n\r\nMoreover:\r\nbitcoin.conf:\r\n```\r\n[regtest]\r\ndatadir     =W:/BitcoinCore/DataDir_/_2\r\ndebuglogfile=H:/_Logs_/BitcoinCore/_debug.default-reg.2_regtest.no_params.log\r\n```\r\n[regtest] datadir didn't exist\r\n\r\nbitcoin-qt.exe -debuglogfile=H:\\\\\\_Logs_\\\\BitcoinCore\\\\debug.no_params.log -regtest\r\nGUI error: no datadir.\r\nLogfile: (?) no log files, nor that in commandline, nor that in config!",
      "created_at" : "2023-05-08T22:16:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1539136159",
      "id" : 1539136159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585bvVqf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1539136159/reactions"
      },
      "updated_at" : "2023-05-09T15:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1539136159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/de-served/events{/privacy}",
         "followers_url" : "https://api.github.com/users/de-served/followers",
         "following_url" : "https://api.github.com/users/de-served/following{/other_user}",
         "gists_url" : "https://api.github.com/users/de-served/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/de-served",
         "id" : 18093731,
         "login" : "de-served",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/de-served/orgs",
         "received_events_url" : "https://api.github.com/users/de-served/received_events",
         "repos_url" : "https://api.github.com/users/de-served/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/de-served/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/de-served/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/de-served"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ping",
      "created_at" : "2023-05-22T09:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1556850708",
      "id" : 1556850708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585cy6gU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556850708/reactions"
      },
      "updated_at" : "2023-05-23T05:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556850708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/de-served/events{/privacy}",
         "followers_url" : "https://api.github.com/users/de-served/followers",
         "following_url" : "https://api.github.com/users/de-served/following{/other_user}",
         "gists_url" : "https://api.github.com/users/de-served/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/de-served",
         "id" : 18093731,
         "login" : "de-served",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/de-served/orgs",
         "received_events_url" : "https://api.github.com/users/de-served/received_events",
         "repos_url" : "https://api.github.com/users/de-served/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/de-served/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/de-served/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/de-served"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1539136159\r\n\r\n> 2023-05-08T22:11:59Z Config file arg: datadir=\"W:/BitcoinCore/DataDir_/_.no_params\" (**ignored**)\r\n\r\nThanks again @de-served for the new report. The problem you are seeing here is the problem I previously described:\r\n\r\n> Unfortunately the behavior for `bitcoin-qt` is stupider than `bitcoind`, because if the user chooses a GUI datadir setting that is different _in any way_ from the default datadir setting, the `Intro::showIfNeeded` function makes the GUI datadir setting sticky, overriding any value in `bitcoin.conf`\r\n\r\nin https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1470284856\r\n\r\nSo you are seeing the `datadir=` setting in your `bitcoin.conf` file being ignored because bitcoin-qt's datadir logic is convoluted and was not written to support your use-case.\r\n\r\nMy recommendation for you personally would be to configure the GUI to use the default datadir and place your `bitcoin.conf` file in `C:\\Users\\USERNAME\\AppData\\Roaming\\Bitcoin` instead of `W:\\BitcoinCore\\_strDataDir\\bitcoin.conf`. If it is important for you to specify the `blocksdir=` and `datadir=` settings in a configuration file on your `W:` drive instead of your `C:` drive, you should be able to just put `includeconf=W:\\BitcoinCore\\_strDataDir\\bitcoin.conf` in the configuration file on the `C:` drive.\r\n\r\nAlternately, you could configure the GUI to use the default datadir  `C:\\Users\\USERNAME\\AppData\\Roaming\\Bitcoin` but make that path a symbolic link pointing to the `W:\\BitcoinCore\\_strDataDir` directory, instead of a normal directory. As long as the GUI is configured to use the default datadir, and not a custom datadir, the `datadir=` setting in your `bitcoin.conf` file should not be ignored.\r\n\r\nSo overall, I think we are aware of the problems here and have some reasonable solutions that should work for you currently.\r\n\r\nTo fix the problem in the longer term pinheadmz opened a PR https://github.com/bitcoin/bitcoin/pull/27273 that addresses your issue head-on by making the `datadir` in the bitcoin.conf file always override the windows registry setting, instead of conditionally overriding it. I reviewed that PR but did not think it was safe because it could cause backwards compatibility issues and subtly break working configurations. So I am working on new approach in https://github.com/bitcoin/bitcoin/pull/27409 that gets rid of the registry setting entirely, and includes a migration path and prompt to let the user resolve explicitly any ambiguities. I hope #27409 will be ready soon, but it's just been slow because it does have a lot of cases to handle so I've been trying to find a good way to add unit test coverage for all of them.",
      "created_at" : "2023-05-22T15:26:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1557425054",
      "id" : 1557425054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585c1Gue",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1557425054/reactions"
      },
      "updated_at" : "2023-05-22T15:26:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1557425054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> My recommendation for you personally would be to configure the GUI to use the default datadir and place your `bitcoin.conf` file in `C:\\Users\\USERNAME\\AppData\\Roaming\\Bitcoin` instead of\r\n\r\nIt's already here... for a \"debug\" what's happening:\r\n```\r\ndatadir     =W:/BitcoinCore/DataDir_/_User\r\nblocksdir   =W:/BitcoinCore/BlocksDir_/_User\r\nwalletdir   =W:/BitcoinCore/WalletDir_/_User\r\ndebuglogfile=H:/_Logs_/BitcoinCore/_debug.default-appdata.no_params.log\r\n\r\n[main]\r\ndatadir     =W:/BitcoinCore/DataDir_/_User1\r\n```\r\nIf any of these params are in use then there must be records in log... but no. :|\r\n\r\nPS: Think about use case, where %AppData% can't be used and must be clean and there should be no any trace.\r\nPPS: Waiting for patch from **pinheadmz**. When I will have opportunity (very rare now) then I'll comment it out.",
      "created_at" : "2023-05-23T05:17:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27246#issuecomment-1558537251",
      "id" : 1558537251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27246",
      "node_id" : "IC_kwDOABII585c5WQj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1558537251/reactions"
      },
      "updated_at" : "2023-05-23T05:18:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1558537251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18093731?v=4",
         "events_url" : "https://api.github.com/users/de-served/events{/privacy}",
         "followers_url" : "https://api.github.com/users/de-served/followers",
         "following_url" : "https://api.github.com/users/de-served/following{/other_user}",
         "gists_url" : "https://api.github.com/users/de-served/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/de-served",
         "id" : 18093731,
         "login" : "de-served",
         "node_id" : "MDQ6VXNlcjE4MDkzNzMx",
         "organizations_url" : "https://api.github.com/users/de-served/orgs",
         "received_events_url" : "https://api.github.com/users/de-served/received_events",
         "repos_url" : "https://api.github.com/users/de-served/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/de-served/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/de-served/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/de-served"
      }
   }
]
