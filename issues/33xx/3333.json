{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "With a corrupt wallet.dat, bitcoin-qt segfaults:\n\n```\nBitcoin version v0.8.5.0-gef14a26-beta ()\nUsing OpenSSL version OpenSSL 1.0.1e 11 Feb 2013\nStartup time: 2013-11-30 04:31:40\nDefault data directory /home/rena/.bitcoin\nUsing data directory /home/rena/.bitcoin\nUsing at most 7 connections (1024 file descriptors available)\nUsing 8 threads for script verification\ninit message: Verifying wallet...\ndbenv.open LogDir=/home/rena/.bitcoin/database ErrorFile=/home/rena/.bitcoin/db.log\nBound to [::]:8333\nBound to 0.0.0.0:8333\ninit message: Loading block index...\nOpening LevelDB in /home/rena/.bitcoin/blocks/index\nOpened LevelDB successfully\nOpening LevelDB in /home/rena/.bitcoin/chainstate\nOpened LevelDB successfully\nLoadBlockIndexDB(): last block file = 96\nLoadBlockIndexDB(): last block file info: CBlockFileInfo(blocks=142, size=39190683, heights=272083...272223, time=2013-11-29...2013-11-30)\nLoadBlockIndexDB(): transaction index disabled\nLoadBlockIndexDB(): hashBestChain=0000000000000004a4f5b35063a4ff280d5caf21010edab52a5bb8d67bf873a6  height=272223 date=2013-11-30 04:17:49\ninit message: Verifying blocks...\nVerifying last 288 blocks at level 3\nNo coin database inconsistencies in last 46 blocks (34503 transactions)\n block index            9900ms\ninit message: Loading wallet...\n wallet                 2010ms\ninit message: Rescanning...\nRescanning last 272223 blocks (from block 0)...\n rescan               360427ms\ninit message: Loading addresses...\nLoaded 15456 addresses from peers.dat  79ms\nmapBlockIndex.size() = 272226\nnBestHeight = 272223\nsetKeyPool.size() = 100\nmapWallet.size() = 4\nmapAddressBook.size() = 2\ndnsseed thread start\nmsghand thread start\nopencon thread start\nnet thread start\nupnp thread start\naddcon thread start\ndumpaddr thread start\nLoading addresses from DNS seeds (could take a while)\ninit message: Done loading\nERROR: CTransaction::CheckTransaction() : vout empty\nERROR: CTxMemPool::accept() : CheckTransaction failed\nERROR: CTransaction::CheckTransaction() : vout empty\nERROR: CTxMemPool::accept() : CheckTransaction failed\nERROR: CTransaction::CheckTransaction() : vout empty\nERROR: CTxMemPool::accept() : CheckTransaction failed\nERROR: CTransaction::CheckTransaction() : vout empty\nERROR: CTxMemPool::accept() : CheckTransaction failed\nrefreshWallet\nNov 29 23:37:53 guilmon kernel: [2249560.460653] bitcoin-qt[28291]: segfault at 118 ip 00007f43141e1f74 sp 00007fff4fc99c50 error 4 in libpthread-2.17.so[7f43141d8000+17000]\n```\n\nAn (empty) wallet that triggers this issue is here: https://dl.dropboxusercontent.com/u/105169324/broken-wallet.dat\n",
   "closed_at" : "2014-01-14T17:59:13Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3333/comments",
   "created_at" : "2013-11-30T05:00:37Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3333/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/3333",
   "id" : 23515431,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3333/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyMzUxNTQzMQ==",
   "number" : 3333,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "bitcoin-qt segfault on corrupt wallet",
   "updated_at" : "2014-01-14T17:59:13Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3333",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/1185585?v=4",
      "events_url" : "https://api.github.com/users/RenaKunisaki/events{/privacy}",
      "followers_url" : "https://api.github.com/users/RenaKunisaki/followers",
      "following_url" : "https://api.github.com/users/RenaKunisaki/following{/other_user}",
      "gists_url" : "https://api.github.com/users/RenaKunisaki/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/RenaKunisaki",
      "id" : 1185585,
      "login" : "RenaKunisaki",
      "node_id" : "MDQ6VXNlcjExODU1ODU=",
      "organizations_url" : "https://api.github.com/users/RenaKunisaki/orgs",
      "received_events_url" : "https://api.github.com/users/RenaKunisaki/received_events",
      "repos_url" : "https://api.github.com/users/RenaKunisaki/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/RenaKunisaki/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/RenaKunisaki/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/RenaKunisaki"
   }
}
