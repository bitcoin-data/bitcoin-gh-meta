[
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for looking. I left this message unchanged in #25286, as it seems useful to understanding the message itself rather than just being a category prefix. Though others may see it as a duplicate category, I don't know.",
      "created_at" : "2022-06-07T14:30:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25293#issuecomment-1148755118",
      "id" : 1148755118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25293",
      "node_id" : "IC_kwDOABII585EeJyu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148755118/reactions"
      },
      "updated_at" : "2022-06-07T14:33:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148755118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891330637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891330637"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    LogPrint(BCLog::ESTIMATEFEE, \"%d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\r\n```\r\n\r\nNote, the linter will fail because your commit message begins with \"scripted-diff: \" but doesn't contain a scripted diff. The commit message would need to be something like this:\r\n```\r\nscripted-diff: remove duplicate categories from LogPrint ESTIMATEFEE output\r\n\r\n-BEGIN VERIFY SCRIPT-\r\ns() { git grep -l \"$1\" src | xargs sed -i \"s/$1/$2/g\"; }\r\ns 'BCLog::ESTIMATEFEE, \"FeeEst: '   'BCLog::ESTIMATEFEE, \"'\r\n-END VERIFY SCRIPT-\r\n```\r\nSee https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#scripted-diffs for more info.\r\n\r\nThat said, this is the only occurrence, so if reviewers agree that this change should be done, you can just change the commit message (and PR title) from \"scripted-diff:\" to \"logging:\".",
      "commit_id" : "a28a154bb4dba4b10d6d63bdaf671756c981d01e",
      "created_at" : "2022-06-07T14:47:15Z",
      "diff_hunk" : "@@ -373,7 +373,7 @@ double TxConfirmStats::EstimateMedianVal(int confTarget, double sufficientTxVal,\n         failed_within_target_perc = 100 * failBucket.withinTarget / (failBucket.totalConfirmed + failBucket.inMempool + failBucket.leftMempool);\n     }\n \n-    LogPrint(BCLog::ESTIMATEFEE, \"FeeEst: %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    LogPrint(BCLog::ESTIMATEFEE, \" %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891330637",
      "id" : 891330637,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841IKBN",
      "original_commit_id" : "97a01ce2fd96d3c3f9a0b8346a309e29dee4ed18",
      "original_line" : 376,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 998302024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891330637/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-07T14:47:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891330637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891335479"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891335479"
         }
      },
      "author_association" : "NONE",
      "body" : "Thank you @jonatack, I will change the title",
      "commit_id" : "a28a154bb4dba4b10d6d63bdaf671756c981d01e",
      "created_at" : "2022-06-07T14:51:11Z",
      "diff_hunk" : "@@ -373,7 +373,7 @@ double TxConfirmStats::EstimateMedianVal(int confTarget, double sufficientTxVal,\n         failed_within_target_perc = 100 * failBucket.withinTarget / (failBucket.totalConfirmed + failBucket.inMempool + failBucket.leftMempool);\n     }\n \n-    LogPrint(BCLog::ESTIMATEFEE, \"FeeEst: %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    LogPrint(BCLog::ESTIMATEFEE, \" %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891335479",
      "id" : 891335479,
      "in_reply_to_id" : 891330637,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841ILM3",
      "original_commit_id" : "97a01ce2fd96d3c3f9a0b8346a309e29dee4ed18",
      "original_line" : 376,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 998308873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891335479/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-07T14:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891335479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90364136?v=4",
         "events_url" : "https://api.github.com/users/butterfly1924/events{/privacy}",
         "followers_url" : "https://api.github.com/users/butterfly1924/followers",
         "following_url" : "https://api.github.com/users/butterfly1924/following{/other_user}",
         "gists_url" : "https://api.github.com/users/butterfly1924/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/butterfly1924",
         "id" : 90364136,
         "login" : "butterfly1924",
         "node_id" : "MDQ6VXNlcjkwMzY0MTM2",
         "organizations_url" : "https://api.github.com/users/butterfly1924/orgs",
         "received_events_url" : "https://api.github.com/users/butterfly1924/received_events",
         "repos_url" : "https://api.github.com/users/butterfly1924/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/butterfly1924/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/butterfly1924/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/butterfly1924"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, seems better now. Though, as I wrote above, I'm not sure this should be changed. Currently, the following would be logged, and without \"FeeEst:\" it may not be very clear.\r\n```\r\n[estimatefee] FeeEst: 5 > 60% decay 0.96200: feerate: 2326.67 from (2292.02 - 2925.26) 82.00% 16.3/(19.9 0 mem 0.0 out) Fail: (1979.93 - 2292.02) 56.56% 9.9/(17.3 0 mem 0.2 out)\r\n```\r\n\r\nHere are the ESTIMATEFEE logging messages:\r\n\r\n```\r\n$ git grep BCLog::ESTIMATEFEE\r\nsrc/policy/fees.cpp:376:    LogPrint(BCLog::ESTIMATEFEE, \"FeeEst: %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\r\nsrc/policy/fees.cpp:457:    LogPrint(BCLog::ESTIMATEFEE, \"Reading estimates: %u buckets counting confirms up to %u blocks\\n\",\r\nsrc/policy/fees.cpp:476:        LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy error, blocks ago is negative for mempool tx\\n\");\r\nsrc/policy/fees.cpp:484:            LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy error, mempool tx removed from >25 blocks,bucketIndex=%u already\\n\",\r\nsrc/policy/fees.cpp:493:            LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy error, mempool tx removed from blockIndex=%u,bucketIndex=%u already\\n\",\r\nsrc/policy/fees.cpp:566:        LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy error mempool tx %s already being tracked\\n\",\r\nsrc/policy/fees.cpp:614:        LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy error Transaction had negative blocksToConfirm\\n\");\r\nsrc/policy/fees.cpp:664:        LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy first recorded height %u\\n\", firstRecordedHeight);\r\nsrc/policy/fees.cpp:668:    LogPrint(BCLog::ESTIMATEFEE, \"Blockpolicy estimates updated by %u of %u block txs, since last block %u of %u tracked, mempool map size %u, max target %u from %s\\n\",\r\nsrc/policy/fees.cpp:1014:    LogPrint(BCLog::ESTIMATEFEE, \"Recorded %u unconfirmed txs from mempool in %gs\\n\", num_entries, (endclear - startclear)*0.000001);\r\n```\r\n",
      "created_at" : "2022-06-07T15:19:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25293#issuecomment-1148816081",
      "id" : 1148816081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25293",
      "node_id" : "IC_kwDOABII585EeYrR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148816081/reactions"
      },
      "updated_at" : "2022-06-07T15:19:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148816081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891412213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891412213"
         }
      },
      "author_association" : "NONE",
      "body" : "I had changed the commit message too, now the linter should work. Thanks @jonatack.",
      "commit_id" : "a28a154bb4dba4b10d6d63bdaf671756c981d01e",
      "created_at" : "2022-06-07T15:56:18Z",
      "diff_hunk" : "@@ -373,7 +373,7 @@ double TxConfirmStats::EstimateMedianVal(int confTarget, double sufficientTxVal,\n         failed_within_target_perc = 100 * failBucket.withinTarget / (failBucket.totalConfirmed + failBucket.inMempool + failBucket.leftMempool);\n     }\n \n-    LogPrint(BCLog::ESTIMATEFEE, \"FeeEst: %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    LogPrint(BCLog::ESTIMATEFEE, \" %d > %.0f%% decay %.5f: feerate: %g from (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25293#discussion_r891412213",
      "id" : 891412213,
      "in_reply_to_id" : 891330637,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841Id71",
      "original_commit_id" : "97a01ce2fd96d3c3f9a0b8346a309e29dee4ed18",
      "original_line" : 376,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 998417648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25293",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891412213/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-07T15:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891412213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90364136?v=4",
         "events_url" : "https://api.github.com/users/butterfly1924/events{/privacy}",
         "followers_url" : "https://api.github.com/users/butterfly1924/followers",
         "following_url" : "https://api.github.com/users/butterfly1924/following{/other_user}",
         "gists_url" : "https://api.github.com/users/butterfly1924/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/butterfly1924",
         "id" : 90364136,
         "login" : "butterfly1924",
         "node_id" : "MDQ6VXNlcjkwMzY0MTM2",
         "organizations_url" : "https://api.github.com/users/butterfly1924/orgs",
         "received_events_url" : "https://api.github.com/users/butterfly1924/received_events",
         "repos_url" : "https://api.github.com/users/butterfly1924/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/butterfly1924/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/butterfly1924/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/butterfly1924"
      }
   }
]
