[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25073](https://github.com/bitcoin/bitcoin/pull/25073) (test: Cleanup miner_tests by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-27T00:36:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139174394",
      "id" : 1139174394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D5mv6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139174394/reactions"
      },
      "updated_at" : "2022-06-08T02:14:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139174394",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you explain what this change has to do with the kernel? I don't see any modifications in the kernel folder or the kernel build target.s",
      "created_at" : "2022-05-27T08:09:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139383702",
      "id" : 1139383702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D6Z2W",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139383702/reactions"
      },
      "updated_at" : "2022-05-27T08:09:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139383702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you explain what this change has to do with the kernel? \r\n\r\nI'm also not clear on how making BlockAssembler constructor not require an empty mempool relates to making kernel library better, or lets it drop dependencies. (This still does seem like a positive change, just connection is unclear)\r\n\r\n> I don't see any modifications in the kernel folder or the kernel build target.\r\n\r\nMaybe you already know this, but one thing that I wasn't expecting looking at Carl's branch is that it mostly doesn't move source code into `src/kernel/`, instead it just changes build rules to build source files in other directories as part of the kernel library. I think the only source code that does moves into src/kernel/ initially is from files that have to be split up because they pull in wanted dependencies. If existing source files can be wholly moved into the kernel without being split up, they aren't moved. Probably  src/node/miner.cpp is one of these files.",
      "created_at" : "2022-05-27T14:16:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139662213",
      "id" : 1139662213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D7d2F",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139662213/reactions"
      },
      "updated_at" : "2022-05-27T14:16:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139662213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-27T14:34:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139678103",
      "id" : 1139678103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D7huX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139678103/reactions"
      },
      "updated_at" : "2022-05-27T14:34:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139678103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke \r\n> Can you explain what this change has to do with the kernel? I don't see any modifications in the kernel folder or the kernel build target.s\r\n\r\nAh yes, as the companion PR to #25215, this PR also \"reduces the number of call sites where we explicitly construct CTxMemPool. This is done in preparation for later PRs which decouple the mempool module from ArgsManager...\"\r\n\r\nOne of the challenges I found with making the upcoming `CTxMemPool+MemPoolAccept+mempool-relevant parts of CChainState` <-> `ArgsManager` decoupling PRs easy to review was that from the view point of a reviewer, it was hard to reason that the behavior at each `CTxMemPool` construction call site was preserved. This is because after we decouple from `ArgsMan`, instead of reaching for `gArgs` deep in the mempool code, we now have to make sure that the options are set correctly and passed to each `CTxMemPool` that we construct. During development I also ran into some inadvertent bugs stemming from this.\r\n\r\nAs an example: When we stop asking `gArgs` for `-mempoolexpiry` or `-maxmempool` in `CTxMemPool+MemPoolAccept+mempool-relevant parts of CChainState`, and instead construct `CTxMemPool` with an `CTxMemPool::Options` with these parameters as struct members, preserving existing behaviour means that **_every_** `CTxMemPool` construction call site would have to get the default `CTxMemPool::Options` and apply `gArgs` overrides.\r\n\r\nI reasoned that since these `CTxMemPool` constructor calls were entirely unnecessary in the first place, and the fix wasn't that involved, we could kill two birds with one stone: remove what's unnecessary and also make the `ArgsMan` decoupling PRs easier to reason about.",
      "created_at" : "2022-05-27T19:18:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139960210",
      "id" : 1139960210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D8mmS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139960210/reactions"
      },
      "updated_at" : "2022-05-27T19:18:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139960210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky \r\n\r\n> Maybe you already know this, but one thing that I wasn't expecting looking at Carl's branch is that it mostly doesn't move source code into `src/kernel/`, instead it just changes build rules to build source files in other directories as part of the kernel library. I think the only source code that does moves into src/kernel/ initially is from files that have to be split up because they pull in wanted dependencies. If existing source files can be wholly moved into the kernel without being split up, they aren't moved. Probably src/node/miner.cpp is one of these files.\r\n\r\nYeah I think that's right. Mostly I just don't think moving things around and changing namespaces for everything needs to be done right now. Looking at past reviews it also seems that people expect things in `src/kernel/` to have some kind of cleanliness, even though we're not going to be refining the API until Phase 2, so I'd like to avoid the sum of these little expectations to make it harder for the main thrust of Phase 1 to get through review.",
      "created_at" : "2022-05-27T19:28:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1139966468",
      "id" : 1139966468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D8oIE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139966468/reactions"
      },
      "updated_at" : "2022-05-27T19:29:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139966468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed f159dbb92c88840ad44c6e0f1d8357449fd65141 -> 10827ac257689f8945166163b1ae496d792c790c\r\n- Rebased over master",
      "created_at" : "2022-05-27T20:26:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1140008424",
      "id" : 1140008424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585D8yXo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140008424/reactions"
      },
      "updated_at" : "2022-05-27T20:26:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140008424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I also wanted to ask what libbitcoinkernel has to do with mining. And if there is mining in it, why should the mempool be optional.",
      "created_at" : "2022-05-31T15:24:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142281600",
      "id" : 1142281600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EFdWA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142281600/reactions"
      },
      "updated_at" : "2022-05-31T15:24:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142281600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "libbitcoinkernel doesn't have anything to do with mining. However, mining does require (prior to this PR) a mempool. In many cases, these mempool are sometimes constructed on-the-fly (not as part of init). For example:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/640eb772e55671c5dab29843cebe42ec35cb703f/src/rpc/mining.cpp#L357-L358\r\n\r\nTherefore, when I start making `CTxMemPool` options explicitly passed in to `CTxMemPool`'s constructor instead of just being globals inside `gArgs`, the on-the-fly calls to `CTxMemPool`'s constructor become much more involved.\r\n\r\n```bash\r\n        CTxMemPool::Options mempool_opts{};\r\n        OverlayArgsManSettings(mempool_opts);\r\n        CTxMemPool empty_mempool{mempool_opts};\r\n        std::unique_ptr<CBlockTemplate> blocktemplate(BlockAssembler{chainman.ActiveChainstate(), empty_mempool}.CreateNewBlock(coinbase_script));\r\n```\r\n\r\nNow, it would be another story if any of these `empty_mempool`s were being useful, but it seems that they're basically unused, so there's no need for this charade. We can just remove `BlockAssembler`'s dependence on `CTxMemPool` by making it nullable and call it a day.",
      "created_at" : "2022-05-31T15:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142303146",
      "id" : 1142303146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EFimq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142303146/reactions"
      },
      "updated_at" : "2022-05-31T15:45:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142303146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> libbitcoinkernel doesn't have anything to do with mining\r\n\r\nWouldn't it be better to move mining out of libbitcoinkernel and not motivate this pull request on `[kernel 2e/n]` and instead make it an orthogonal change?\r\n\r\n> constructor become much more involved\r\n\r\nSo an alternative would be to make `CTxMemPool::Options` optional to be passed to the constructor?\r\n\r\n",
      "created_at" : "2022-05-31T15:52:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142313493",
      "id" : 1142313493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EFlIV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142313493/reactions"
      },
      "updated_at" : "2022-05-31T15:52:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142313493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Wouldn't it be better to move mining out of libbitcoinkernel and not motivate this pull request on `[kernel 2e/n]` and instead make it an orthogonal change?\r\n\r\nMining is not in `libbitcoinkernel` right now, I put this PR as `[kernel 2e/n]` because there's a lot of future work in `libbitcoinkernel`'s `ArgsManager` decoupling that depends on this. Another way I could have done it would be to publish the vision quest branch for `libbitcoinkernel`'s `ArgsManager` decoupling then split out this PR, but I didn't think it'd matter that much which way I did it.\r\n\r\n> So an alternative would be to make `CTxMemPool::Options` optional to be passed to the constructor?\r\n\r\nYeah I suppose so, but it's also fraught with danger:\r\n\r\n#### Does the `CTxMemPool` constructor consult `gArgs` when the `CTxMemPool::Options` is null?\r\n\r\nThen we've made `CTxMemPool` dependent on `ArgsManager` again.\r\n\r\n#### Does the `CTxMemPool` constructor just use the `static const` sane defaults when the `CTxMemPool::Options` is null?\r\n\r\nThen you're likely introducing a behaviour change since the `gArgs` settings are no longer respected.",
      "created_at" : "2022-05-31T16:29:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142354292",
      "id" : 1142354292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EFvF0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142354292/reactions"
      },
      "updated_at" : "2022-05-31T16:29:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142354292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Then you're likely introducing a behaviour change\r\n\r\nAt least for the purposes of the miner this should not be the case. It will result in an empty block regardless of the options.\r\n\r\n\r\nPersonally I think it is fine to fall back to the defaults. After all this is also what happens with gArgs when no options are passed to the ArgsManager.\r\n\r\nThough, I am also fine with your approach.",
      "created_at" : "2022-05-31T16:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142372146",
      "id" : 1142372146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EFzcy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142372146/reactions"
      },
      "updated_at" : "2022-05-31T16:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142372146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r885880832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885880832"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In the commit message you claim that this is a behaviour change, but I don't see an obvious user facing (or even test-facing) behaviour change. Maybe explain this a bit better or mention that this does *not* change behaviour?",
      "commit_id" : "10827ac257689f8945166163b1ae496d792c790c",
      "created_at" : "2022-05-31T16:52:34Z",
      "diff_hunk" : "@@ -121,7 +121,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vTxFees.push_back(-1); // updated at end\n     pblocktemplate->vTxSigOpsCost.push_back(-1); // updated at end\n \n-    LOCK2(cs_main, m_mempool.cs);\n+    LOCK(::cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r885880832",
      "id" : 885880832,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII5840zXgA",
      "original_commit_id" : "10827ac257689f8945166163b1ae496d792c790c",
      "original_line" : 124,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 23,
      "pull_request_review_id" : 990804189,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885880832/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T16:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885880832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r886044009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886044009"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah yeah true... Guess I meant a \"code-behaviour\" change, but yes, will update!",
      "commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "created_at" : "2022-05-31T19:18:55Z",
      "diff_hunk" : "@@ -121,7 +121,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vTxFees.push_back(-1); // updated at end\n     pblocktemplate->vTxSigOpsCost.push_back(-1); // updated at end\n \n-    LOCK2(cs_main, m_mempool.cs);\n+    LOCK(::cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r886044009",
      "id" : 886044009,
      "in_reply_to_id" : 885880832,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII5840z_Vp",
      "original_commit_id" : "10827ac257689f8945166163b1ae496d792c790c",
      "original_line" : 124,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 23,
      "pull_request_review_id" : 991039796,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886044009/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T19:18:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886044009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 10827ac257689f8945166163b1ae496d792c790c -> faddefe547cad0e4ba0f1cab635e48b42e153a11\r\n- Addressed: https://github.com/bitcoin/bitcoin/pull/25223#discussion_r885880832",
      "created_at" : "2022-05-31T19:21:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1142552714",
      "id" : 1142552714,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EGfiK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142552714/reactions"
      },
      "updated_at" : "2022-05-31T19:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142552714",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r886047100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886047100"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "created_at" : "2022-05-31T19:21:25Z",
      "diff_hunk" : "@@ -121,7 +121,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vTxFees.push_back(-1); // updated at end\n     pblocktemplate->vTxSigOpsCost.push_back(-1); // updated at end\n \n-    LOCK2(cs_main, m_mempool.cs);\n+    LOCK(::cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r886047100",
      "id" : 886047100,
      "in_reply_to_id" : 885880832,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII58400AF8",
      "original_commit_id" : "10827ac257689f8945166163b1ae496d792c790c",
      "original_line" : 124,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 23,
      "pull_request_review_id" : 991042317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886047100/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T19:21:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886047100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r888443470"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888443470"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Aside from approach in this current PR, we can also take the approach of moving the CTxMemPool* argument from the BlockAssembler constructor to BlockAssembler::CreateNewBlock, since that's where it's needed anyway. I did not push this approach because it requires quite a lot of call sites to be changed.\r\n\r\nI don't think that would be better; I think the [reference to] mempool belongs as a member of the class. Since the class also keeps track of things like `nBlockWeight` and `nFees` of the block, that suggests to me the intention is 1 `BlockAssembler` instance = building 1 block template. So I can't think of why it would be safe/useful to change which mempool we're using, and thus the mempool should remain a member and in fact\r\n\r\n```suggestion\r\n    const CTxMemPool* const m_mempool;\r\n```\r\n?",
      "commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "created_at" : "2022-06-02T21:55:35Z",
      "diff_hunk" : "@@ -147,7 +147,7 @@ class BlockAssembler\n     int64_t m_lock_time_cutoff;\n \n     const CChainParams& chainparams;\n-    const CTxMemPool& m_mempool;\n+    const CTxMemPool* m_mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r888443470",
      "id" : 888443470,
      "line" : 150,
      "node_id" : "PRRC_kwDOABII58409JJO",
      "original_commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "original_line" : 150,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/miner.h",
      "position" : 5,
      "pull_request_review_id" : 994233439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888443470/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T00:29:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888443470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r889207575"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889207575"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh yeah that makes sense. Does it look like I need to modify the const-ness anywhere else?",
      "commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "created_at" : "2022-06-03T17:59:10Z",
      "diff_hunk" : "@@ -147,7 +147,7 @@ class BlockAssembler\n     int64_t m_lock_time_cutoff;\n \n     const CChainParams& chainparams;\n-    const CTxMemPool& m_mempool;\n+    const CTxMemPool* m_mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r889207575",
      "id" : 889207575,
      "in_reply_to_id" : 888443470,
      "line" : 150,
      "node_id" : "PRRC_kwDOABII5841ADsX",
      "original_commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "original_line" : 150,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/miner.h",
      "position" : 5,
      "pull_request_review_id" : 995284790,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889207575/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T17:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889207575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed faddefe547cad0e4ba0f1cab635e48b42e153a11 -> 0f1a259657280afc727db97689512aef5ca928fc\r\n- Addressed https://github.com/bitcoin/bitcoin/pull/25223#discussion_r888443470 (thanks Gloria!)",
      "created_at" : "2022-06-06T19:40:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1147834225",
      "id" : 1147834225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585Eao9x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1147834225/reactions"
      },
      "updated_at" : "2022-06-06T19:40:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1147834225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r890488432"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890488432"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed in 0f1a259657280afc727db97689512aef5ca928fc",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-06T19:40:49Z",
      "diff_hunk" : "@@ -147,7 +147,7 @@ class BlockAssembler\n     int64_t m_lock_time_cutoff;\n \n     const CChainParams& chainparams;\n-    const CTxMemPool& m_mempool;\n+    const CTxMemPool* m_mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r890488432",
      "id" : 890488432,
      "in_reply_to_id" : 888443470,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841E8Zw",
      "original_commit_id" : "faddefe547cad0e4ba0f1cab635e48b42e153a11",
      "original_line" : 150,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/miner.h",
      "position" : null,
      "pull_request_review_id" : 997120960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890488432/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T19:40:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890488432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r892118946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892118946"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Question: why'd you remove the static cast? Not suggesting you add it back, just wondering",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-08T09:13:52Z",
      "diff_hunk" : "@@ -97,7 +97,7 @@ void Finish(FuzzedDataProvider& fuzzed_data_provider, MockedTxPool& tx_pool, CCh\n         BlockAssembler::Options options;\n         options.nBlockMaxWeight = fuzzed_data_provider.ConsumeIntegralInRange(0U, MAX_BLOCK_WEIGHT);\n         options.blockMinFeeRate = CFeeRate{ConsumeMoney(fuzzed_data_provider, /*max=*/COIN)};\n-        auto assembler = BlockAssembler{chainstate, *static_cast<CTxMemPool*>(&tx_pool), options};\n+        auto assembler = BlockAssembler{chainstate, &tx_pool, options};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r892118946",
      "id" : 892118946,
      "line" : 100,
      "node_id" : "PRRC_kwDOABII5841LKei",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 100,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/tx_pool.cpp",
      "position" : 5,
      "pull_request_review_id" : 999392170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892118946/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-13T08:48:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892118946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Talked with Gloria offline, I'm fine with either approach as long as we don't **create** extraneous `CTxMemPool`s. However, there are two things to consider if we take the route of \"even in the case of supplying BlockAssembler with a custom list of transactions we insert them into the mempool then use the mempool logic to select txs to include in the block\":\r\n\r\n1. Do we want to allow for cases where we want to assemble a block with transactions which would not be selected using the mempool selection logic? For example: The mempool already has a block's worth of high feerate txs, we want to create a block with a list of low feerate txs. This wouldn't be possible if we take the aforementioned route of \"even in the case of supplying BlockAssembler with a custom list of transactions we insert them into the mempool then use the mempool logic to select txs to include in the block\"\r\n2. It seems from previous PRs (#19556) that we want to move towards a world where it's possible to not have a mempool at all. In that `-blocksonly` world, do we still want to retain the ability to use the `BlockAssembler`?\r\n\r\nPing @MarcoFalke @glozow",
      "created_at" : "2022-06-13T14:10:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1153967788",
      "id" : 1153967788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EyCas",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153967788/reactions"
      },
      "updated_at" : "2022-06-13T14:10:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153967788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ye thanks for summarizing @dongcarl, also asked @MarcoFalke offline\r\n\r\n> Do we want to allow for cases where we want to assemble a block with transactions which would not be selected using the mempool selection logic?\r\n\r\nIt seems like the answer to this is yes, and we already rely on this for things like `generateblock` rpc. A few tests broke when I played around with things, suggesting they rely on `generateblock()` *only* putting the manually specified transactions. In non-test-only scenarios, the option for manual block assembly also allows someone to plug in an external block solver.\r\n\r\n> It seems from previous PRs that we want to move towards a world where it's possible to not have a mempool at all. In that -blocksonly world, do we still want to retain the ability to use the BlockAssembler?\r\n\r\nAt the very least, we use `generateblock()` for bootstrapping chains and that uses `BlockAssembler` to make blocks. It seems like there is a world where we want to generate empty blocks on a no-mempool node. There are multiple ways to do this, including (1) optional mempool for `BlockAssembler` ctor i.e. this PR, (2) a separate helper function that creates a valid but empty block.",
      "created_at" : "2022-06-13T14:26:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1153991975",
      "id" : 1153991975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EyIUn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153991975/reactions"
      },
      "updated_at" : "2022-06-13T14:26:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153991975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think:\r\n\r\n* if you want low-fee txs to be selected from the mempool usually you'd call `prioritisetransaction` on them.\r\n* if you want txs not in the mempool to be included, you'd pass them as raw hex, to be added directly the block, as you wouldn't know whether they are standard enough to be added to the mempool. Consensus validity is obviously still checked by `TestBlockValidity` before returning the block.\r\n\r\nAbout the implementation: I think anything works. You could even go with both approaches at the same time. For example, you could make mempool a pointer to indicate whether to fill the initial block template with txs from the mempool. And you could add another option to pass a list of txs unconditionally added to the initial template.",
      "created_at" : "2022-06-13T14:27:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1153994276",
      "id" : 1153994276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EyI4k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153994276/reactions"
      },
      "updated_at" : "2022-06-13T14:27:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153994276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 0f1a259657280afc727db97689512aef5ca928fc\r\n\r\nBeyond avoiding the construction of temporary mempools, I was confused about why we'd ever use `BlockAssembler()` without a mempool, but that's clarified now. As stated above there are multiple approaches, but I think this is fine and doesn't hinder others. Reviewed the code to verify there's no change in behavior.",
      "created_at" : "2022-06-13T14:32:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1153999432",
      "id" : 1153999432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EyKJI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153999432/reactions"
      },
      "updated_at" : "2022-06-13T14:32:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153999432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Many thanks for the insightful comments Marco and Gloria! Lots to refer back to in future convos for sure.\n\nGlad that the current approach is good to move forward with!",
      "created_at" : "2022-06-13T14:54:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1154027491",
      "id" : 1154027491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585EyQ_j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1154027491/reactions"
      },
      "updated_at" : "2022-06-13T14:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1154027491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r895867288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895867288"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh, I just thought it was unnecessary. I think Marco added it in fa03d0acd6bd8bb6d3d5227512f042ff537ad993\r\n\r\nI don't care either way what we do here!",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-13T15:37:00Z",
      "diff_hunk" : "@@ -97,7 +97,7 @@ void Finish(FuzzedDataProvider& fuzzed_data_provider, MockedTxPool& tx_pool, CCh\n         BlockAssembler::Options options;\n         options.nBlockMaxWeight = fuzzed_data_provider.ConsumeIntegralInRange(0U, MAX_BLOCK_WEIGHT);\n         options.blockMinFeeRate = CFeeRate{ConsumeMoney(fuzzed_data_provider, /*max=*/COIN)};\n-        auto assembler = BlockAssembler{chainstate, *static_cast<CTxMemPool*>(&tx_pool), options};\n+        auto assembler = BlockAssembler{chainstate, &tx_pool, options};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r895867288",
      "id" : 895867288,
      "in_reply_to_id" : 892118946,
      "line" : 100,
      "node_id" : "PRRC_kwDOABII5841ZdmY",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 100,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/tx_pool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1004553705,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895867288/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-13T15:37:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895867288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r897746657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897746657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in the first commit:\r\n\r\nAny reason to not use the same approach from the second commit and make this function `static`? I understand that this would require passing the mempool solely to check the lock annotation, but I think this makes the diff smaller, keeps the structure of the file, and avoids making a large function even larger by inlining.\r\n\r\nIf there are no other reasons I'd prefer to keep this as-is for now and leave restructuring to changes that actually need it?\r\n\r\n",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T09:21:33Z",
      "diff_hunk" : "@@ -262,23 +262,6 @@ int BlockAssembler::UpdatePackagesForAdded(const CTxMemPool::setEntries& already\n     return nDescendantsUpdated;\n }\n \n-// Skip entries in mapTx that are already in a block or are present\n-// in mapModifiedTx (which implies that the mapTx ancestor state is\n-// stale due to ancestor inclusion in the block)\n-// Also skip transactions that we've already failed to add. This can happen if\n-// we consider a transaction in mapModifiedTx and it fails: we can then\n-// potentially consider it again while walking mapTx.  It's currently\n-// guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-// failedTx and avoid re-evaluation, since the re-evaluation would be using\n-// cached size/sigops/fee values that are not actually correct.\n-bool BlockAssembler::SkipMapTxEntry(CTxMemPool::txiter it, indexed_modified_transaction_set& mapModifiedTx, CTxMemPool::setEntries& failedTx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r897746657",
      "id" : 897746657,
      "line" : 274,
      "node_id" : "PRRC_kwDOABII5841gobh",
      "original_commit_id" : "f024578b3a5c40e275e23d1c8e82530e235fdbf9",
      "original_line" : 274,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 13,
      "pull_request_review_id" : 1007167627,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897746657/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T09:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897746657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T13:17:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#issuecomment-1156460910",
      "id" : 1156460910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25223",
      "node_id" : "IC_kwDOABII585E7jFu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1156460910/reactions"
      },
      "updated_at" : "2022-06-15T13:17:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1156460910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898138477"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898138477"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "When I was looking at it, this function just seemed so intertwined with the rest of `addPackageTxs`. Both `mapModifiedTx` and `failedTx` are local variables to `addPackageTxs` and without the function abstraction we can also drop the `AssertLockHeld`. I agree that `addPackageTxs` is quite large and we could break it down into pieces where appropriate but I'm not sure that this is the right place.\r\n\r\nIf we were to make it static we'd have to pass in the mempool and inBlock.",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T15:38:18Z",
      "diff_hunk" : "@@ -262,23 +262,6 @@ int BlockAssembler::UpdatePackagesForAdded(const CTxMemPool::setEntries& already\n     return nDescendantsUpdated;\n }\n \n-// Skip entries in mapTx that are already in a block or are present\n-// in mapModifiedTx (which implies that the mapTx ancestor state is\n-// stale due to ancestor inclusion in the block)\n-// Also skip transactions that we've already failed to add. This can happen if\n-// we consider a transaction in mapModifiedTx and it fails: we can then\n-// potentially consider it again while walking mapTx.  It's currently\n-// guaranteed to fail again, but as a belt-and-suspenders check we put it in\n-// failedTx and avoid re-evaluation, since the re-evaluation would be using\n-// cached size/sigops/fee values that are not actually correct.\n-bool BlockAssembler::SkipMapTxEntry(CTxMemPool::txiter it, indexed_modified_transaction_set& mapModifiedTx, CTxMemPool::setEntries& failedTx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898138477",
      "id" : 898138477,
      "in_reply_to_id" : 897746657,
      "line" : 274,
      "node_id" : "PRRC_kwDOABII5841iIFt",
      "original_commit_id" : "f024578b3a5c40e275e23d1c8e82530e235fdbf9",
      "original_line" : 274,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 13,
      "pull_request_review_id" : 1007730104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898138477/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T15:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898138477",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898164322"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898164322"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The `BlockAssembler::addPackageTxs` function now has access two different mempool variables: a `mempool` argument, and a `this->m_mempool` member variable. Right now these point to the same mempool, and the current `addPackageTxs` code only refers to `mempool` instead of `m_mempool` after this PR. But there is no enforcement for these things, so they can easily change and bugs could show up with no one noticing.\r\n\r\nIMO, either this new `mempool` argument should be dropped and function should go back to using `m_mempool`, or the `m_mempool` member should be dropped so it is guaranteed that function is only using `mempool`. But having multiple aliases for no reason is confusing and asking for bugs",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T16:02:44Z",
      "diff_hunk" : "@@ -300,17 +290,17 @@ void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::ve\n // Each time through the loop, we compare the best transaction in\n // mapModifiedTxs with the next transaction in the mempool to decide what\n // transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898164322",
      "id" : 898164322,
      "line" : 293,
      "node_id" : "PRRC_kwDOABII5841iOZi",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 293,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 92,
      "pull_request_review_id" : 1007767879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898164322/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T16:02:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898164322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898189606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898189606"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added to the project issue TODO list: #24303",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T16:29:30Z",
      "diff_hunk" : "@@ -300,17 +290,17 @@ void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::ve\n // Each time through the loop, we compare the best transaction in\n // mapModifiedTxs with the next transaction in the mempool to decide what\n // transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898189606",
      "id" : 898189606,
      "in_reply_to_id" : 898164322,
      "line" : 293,
      "node_id" : "PRRC_kwDOABII5841iUkm",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 293,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 92,
      "pull_request_review_id" : 1007803703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898189606/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T16:29:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898189606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898233059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898233059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess the function could be made `static` and all needed members be passed in?",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T17:19:53Z",
      "diff_hunk" : "@@ -300,17 +290,17 @@ void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::ve\n // Each time through the loop, we compare the best transaction in\n // mapModifiedTxs with the next transaction in the mempool to decide what\n // transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898233059",
      "id" : 898233059,
      "in_reply_to_id" : 898164322,
      "line" : 293,
      "node_id" : "PRRC_kwDOABII5841ifLj",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 293,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 92,
      "pull_request_review_id" : 1007866828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898233059/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T17:19:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898233059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898246987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898246987"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I mean honestly all the \"helper functions for addPackageTxs()\" listed in the header could be made static, also `AddToBlock`, and then `inBlock` could be a local var in `addPackageTxs`. That would minimize the `BlockAssembler` interface quite nicely. Lots of shuffling around tho.",
      "commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "created_at" : "2022-06-15T17:35:15Z",
      "diff_hunk" : "@@ -300,17 +290,17 @@ void BlockAssembler::SortForBlock(const CTxMemPool::setEntries& package, std::ve\n // Each time through the loop, we compare the best transaction in\n // mapModifiedTxs with the next transaction in the mempool to decide what\n // transaction package to work on next.\n-void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpdated)\n+void BlockAssembler::addPackageTxs(const CTxMemPool& mempool, int& nPackagesSelected, int& nDescendantsUpdated)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898246987",
      "id" : 898246987,
      "in_reply_to_id" : 898164322,
      "line" : 293,
      "node_id" : "PRRC_kwDOABII5841iilL",
      "original_commit_id" : "0f1a259657280afc727db97689512aef5ca928fc",
      "original_line" : 293,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/node/miner.cpp",
      "position" : 92,
      "pull_request_review_id" : 1007887228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25223",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898246987/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T17:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/898246987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   }
]
