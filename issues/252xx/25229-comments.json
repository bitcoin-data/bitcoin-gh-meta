[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I tried to reproduce this (Ubuntu 20.04.4 LTS) with a large wallet but could not see a memory leak (also not with valgrind).\r\nWhat I did see is that repeated calls to `listtransactions` would lead to a step up in the memory claimed by bitcoind (as seen by top or pmap) that would not be released by the OS (enhanced by the fact that the memory for the large RPC response was reserved twice, fixed in #25237)\r\nBut after ~5 calls to `listtransactions` the memory of bitcoind would not increase any further for me with more listtransactions calls.\r\n",
      "created_at" : "2022-05-29T18:35:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1140502539",
      "id" : 1140502539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585D-rAL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140502539/reactions"
      },
      "updated_at" : "2022-05-29T18:35:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140502539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "My application is querying `listtransactions \"*\" 100000000` about once every 1 minute to retrieve a list of all transactions. The request takes about 10 seconds. After each call there is an increase in the consumed memory. Sometimes memory clearing is observed but this is useless and after 2-3 hours `bitcoind` dies with a kill signal from the OS.\r\n\r\nI also additionally checked after 5 or more calls the memory also grows by 100+ MB.",
      "created_at" : "2022-05-29T21:28:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1140527729",
      "id" : 1140527729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585D-xJx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140527729/reactions"
      },
      "updated_at" : "2022-05-29T21:28:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140527729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/104611393?v=4",
         "events_url" : "https://api.github.com/users/CWDT250/events{/privacy}",
         "followers_url" : "https://api.github.com/users/CWDT250/followers",
         "following_url" : "https://api.github.com/users/CWDT250/following{/other_user}",
         "gists_url" : "https://api.github.com/users/CWDT250/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/CWDT250",
         "id" : 104611393,
         "login" : "CWDT250",
         "node_id" : "U_kgDOBjw-QQ",
         "organizations_url" : "https://api.github.com/users/CWDT250/orgs",
         "received_events_url" : "https://api.github.com/users/CWDT250/received_events",
         "repos_url" : "https://api.github.com/users/CWDT250/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/CWDT250/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/CWDT250/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/CWDT250"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Bitcoin Core 23.0\r\n\r\n@CWDT250 are you able to test the behaviour using a build of the master branch?",
      "created_at" : "2022-08-09T08:54:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1209102244",
      "id" : 1209102244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585IEW-k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209102244/reactions"
      },
      "updated_at" : "2022-08-09T08:54:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209102244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I could reproduce a memory increase in the system monitor, but not in massif.",
      "created_at" : "2022-08-10T08:56:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1210370024",
      "id" : 1210370024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585IJMfo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210370024/reactions"
      },
      "updated_at" : "2022-08-10T08:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210370024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I also tried to reproduce the memory leak (in master 57c192767b0e24e51f2f777668ba6f5173f8960d). I ran `listtransactions` a lot of times on a large wallet (54,000 txs, some coinbases, some regular transactions). The first 4-5 calls increased the memory usage of bitcoind but then it stabilizes and didn't increase RAM usage, I'm guessing that could be cache?",
      "created_at" : "2022-10-10T15:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1273487975",
      "id" : 1273487975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585L5-Jn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273487975/reactions"
      },
      "updated_at" : "2022-10-10T15:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273487975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have a large wallet with 515K transactions. When I'm calling `listunspent` the memory increases after a new call. After 10 times the bitcoin server crashes.",
      "created_at" : "2022-10-20T14:55:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1285687996",
      "id" : 1285687996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585Mogq8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285687996/reactions"
      },
      "updated_at" : "2022-10-20T14:55:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285687996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91883972?v=4",
         "events_url" : "https://api.github.com/users/liorwavebl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorwavebl/followers",
         "following_url" : "https://api.github.com/users/liorwavebl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorwavebl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorwavebl",
         "id" : 91883972,
         "login" : "liorwavebl",
         "node_id" : "U_kgDOBXoJxA",
         "organizations_url" : "https://api.github.com/users/liorwavebl/orgs",
         "received_events_url" : "https://api.github.com/users/liorwavebl/received_events",
         "repos_url" : "https://api.github.com/users/liorwavebl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorwavebl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorwavebl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorwavebl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`listunspent` does not return the number of transactions, but the number of coins available for the wallet.\r\nHow many items does this `listunspent` response return?",
      "created_at" : "2022-10-20T15:12:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1285714282",
      "id" : 1285714282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585MonFq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285714282/reactions"
      },
      "updated_at" : "2022-10-20T15:12:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285714282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@w0xlt the output has 5662758 lines, equivalent to ~515K transactions. My point is that the same behavior exists in `listunspent` and not only in `listransactions`.",
      "created_at" : "2022-10-20T15:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25229#issuecomment-1285729035",
      "id" : 1285729035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25229",
      "node_id" : "IC_kwDOABII585MoqsL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285729035/reactions"
      },
      "updated_at" : "2022-10-20T15:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285729035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91883972?v=4",
         "events_url" : "https://api.github.com/users/liorwavebl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorwavebl/followers",
         "following_url" : "https://api.github.com/users/liorwavebl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorwavebl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorwavebl",
         "id" : 91883972,
         "login" : "liorwavebl",
         "node_id" : "U_kgDOBXoJxA",
         "organizations_url" : "https://api.github.com/users/liorwavebl/orgs",
         "received_events_url" : "https://api.github.com/users/liorwavebl/received_events",
         "repos_url" : "https://api.github.com/users/liorwavebl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorwavebl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorwavebl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorwavebl"
      }
   }
]
