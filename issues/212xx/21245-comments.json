[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22689](https://github.com/bitcoin/bitcoin/pull/22689) (rpc: deprecate top-level fee fields in getmempool RPCs by josibake)\n* [#22650](https://github.com/bitcoin/bitcoin/pull/22650) (Remove -deprecatedrpc=addresses flag and corresponding code/logic by mjdietzx)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-02-20T14:23:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-782683416",
      "id" : 782683416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjY4MzQxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T17:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782683416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. Thanks for picking this up! Will have a closer look and test this soon.",
      "created_at" : "2021-02-23T21:21:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-784520925",
      "id" : 784520925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NDUyMDkyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-23T21:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784520925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581587569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581587569"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Where did \"height\" and \"generated\" go?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T03:15:59Z",
      "diff_hunk" : "@@ -223,6 +223,17 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (display_prev_out && (nullptr != txundo)) {\n+            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            UniValue p(UniValue::VOBJ);\n+            UniValue o_script_pub_key(UniValue::VOBJ);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581587569",
      "id" : 581587569,
      "line" : 235,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTU4NzU2OQ==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 235,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 26,
      "pull_request_review_id" : 597029872,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581587569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581588425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581588425"
         }
      },
      "author_association" : "MEMBER",
      "body" : "no thx",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T03:18:36Z",
      "diff_hunk" : "@@ -154,30 +154,39 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, BlockToJsonVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n+\n+    switch (verbosity) {\n+      case BlockToJsonVerbosity::DONT_SHOW_TX_DETAILS:\n+        for (const CTransactionRef& tx : block.vtx) {\n+            txs.push_back(tx->GetHash().GetHex());\n+        }\n+        break;\n+\n+      case BlockToJsonVerbosity::TX_DETAILS:\n+      case BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT:\n         CBlockUndo blockUndo;\n         const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n         for (size_t i = 0; i < block.vtx.size(); ++i) {\n             const CTransactionRef& tx = block.vtx.at(i);\n             // coinbase transaction (i == 0) doesn't have undo data\n             const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n+            const bool display_prev_out = (verbosity == BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT);\n             UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n+            std::cout << display_prev_out  << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581588425",
      "id" : 581588425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTU4ODQyNQ==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 184,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 597029872,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581588425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581589321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581589321"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can we just use `BlockToJsonVerbosity` here? (Maybe rename it)",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T03:20:55Z",
      "diff_hunk" : "@@ -46,6 +46,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, const bool display_prev_out = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r581589321",
      "id" : 581589321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTU4OTMyMQ==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 49,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 597029872,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581589321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284150"
         }
      },
      "author_association" : "NONE",
      "body" : "I renamed it to TxVerbosity, and moved it to src/core_io.h. Feels cleaner than passing bools.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T20:36:30Z",
      "diff_hunk" : "@@ -46,6 +46,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, const bool display_prev_out = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284150",
      "id" : 582284150,
      "in_reply_to_id" : 581589321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI4NDE1MA==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 49,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 597912109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284273"
         }
      },
      "author_association" : "NONE",
      "body" : "Removed, sorry :)",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T20:36:38Z",
      "diff_hunk" : "@@ -154,30 +154,39 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, BlockToJsonVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n+\n+    switch (verbosity) {\n+      case BlockToJsonVerbosity::DONT_SHOW_TX_DETAILS:\n+        for (const CTransactionRef& tx : block.vtx) {\n+            txs.push_back(tx->GetHash().GetHex());\n+        }\n+        break;\n+\n+      case BlockToJsonVerbosity::TX_DETAILS:\n+      case BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT:\n         CBlockUndo blockUndo;\n         const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n         for (size_t i = 0; i < block.vtx.size(); ++i) {\n             const CTransactionRef& tx = block.vtx.at(i);\n             // coinbase transaction (i == 0) doesn't have undo data\n             const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n+            const bool display_prev_out = (verbosity == BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT);\n             UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n+            std::cout << display_prev_out  << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284273",
      "id" : 582284273,
      "in_reply_to_id" : 581588425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI4NDI3Mw==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 184,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 597912186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284718"
         }
      },
      "author_association" : "NONE",
      "body" : "Added it back",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T20:37:04Z",
      "diff_hunk" : "@@ -223,6 +223,17 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (display_prev_out && (nullptr != txundo)) {\n+            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            UniValue p(UniValue::VOBJ);\n+            UniValue o_script_pub_key(UniValue::VOBJ);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582284718",
      "id" : 582284718,
      "in_reply_to_id" : 581587569,
      "line" : 235,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI4NDcxOA==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 235,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 26,
      "pull_request_review_id" : 597912508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582284718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582344514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582344514"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                p.pushKV(\"height\", uint64_t(prev_coin.nHeight));\r\n                p.pushKV(\"generated\", bool(prev_coin.fCoinBase));\r\n```",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T22:16:17Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582344514",
      "id" : 582344514,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjM0NDUxNA==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 597985332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582344514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582344935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582344935"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why did you invert this? That is wrong?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T22:17:00Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582344935",
      "id" : 582344935,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjM0NDkzNQ==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 597985332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582344935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582347086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582347086"
         }
      },
      "author_association" : "NONE",
      "body" : "i was confused as to what \"generated\" means. I will change this.\r\n\r\nWhy don't we just call that field \"coinbase\" though .. ?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T22:20:46Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582347086",
      "id" : 582347086,
      "in_reply_to_id" : 582344935,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjM0NzA4Ng==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 597988350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582347086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582358642"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582358642"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The coinbase is the *input* to the generation transaction (height + 95 bytes arbitrary). The *outputs* (which are being spent in the input here) are simply generated coins.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T22:42:50Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582358642",
      "id" : 582358642,
      "in_reply_to_id" : 582344935,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjM1ODY0Mg==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 598002633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582358642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582364092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582364092"
         }
      },
      "author_association" : "NONE",
      "body" : "ah i see. this is fixed now, and i modified the tests to reflect this too.\r\n",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-24T22:53:38Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r582364092",
      "id" : 582364092,
      "in_reply_to_id" : 582344935,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjM2NDA5Mg==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 598009173,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582364092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583682717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583682717"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I find something like this cleaner\r\n\r\n```suggestion\r\nenum class TxVerbosity {\r\n    SHOW_TXID\r\n    SHOW_DETAILS,\r\n    SHOW_DETAILS_AND_PREV_OUT\r\n};\r\n```",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-26T14:37:20Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    DONT_SHOW_TX_DETAILS,\n+    TX_DETAILS,\n+    TX_DETAILS_AND_PREV_OUT\n+};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583682717",
      "id" : 583682717,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzY4MjcxNw==",
      "original_commit_id" : "53ea5bd39bfb1da614c264656536edf954419373",
      "original_line" : 27,
      "original_position" : 8,
      "original_start_line" : 23,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 599633906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583682717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583763408"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583763408"
         }
      },
      "author_association" : "NONE",
      "body" : "done, adopted change.\r\n\r\nQuestion with code review like this, is it preferred to make a separate commit, or squash everything to a single commit ?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-26T16:31:38Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    DONT_SHOW_TX_DETAILS,\n+    TX_DETAILS,\n+    TX_DETAILS_AND_PREV_OUT\n+};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583763408",
      "id" : 583763408,
      "in_reply_to_id" : 583682717,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4Mzc2MzQwOA==",
      "original_commit_id" : "53ea5bd39bfb1da614c264656536edf954419373",
      "original_line" : 27,
      "original_position" : 8,
      "original_start_line" : 23,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 599741435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583763408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ideally, this should probably be 3 commits: one changing the bool to the class enum (with 2 values), one adding the new feature, and another adding tests.",
      "created_at" : "2021-02-26T17:08:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-786774158",
      "id" : 786774158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4Njc3NDE1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-26T17:08:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786774158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583913359"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583913359"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For small code review like the above 'Suggested change' through the GitHub web interface it's best to just fix it up locally, squash and then force push IMO. No reason to have it a separate commit (and I personally don't care about the co-author thing that GitHub does). ",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-26T20:56:54Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    DONT_SHOW_TX_DETAILS,\n+    TX_DETAILS,\n+    TX_DETAILS_AND_PREV_OUT\n+};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r583913359",
      "id" : 583913359,
      "in_reply_to_id" : 583682717,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzkxMzM1OQ==",
      "original_commit_id" : "53ea5bd39bfb1da614c264656536edf954419373",
      "original_line" : 27,
      "original_position" : 8,
      "original_start_line" : 23,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 599935826,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583913359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Ideally, this should probably be 3 commits\r\n\r\nDone\r\n\r\n",
      "created_at" : "2021-02-27T14:20:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-787079976",
      "id" : 787079976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NzA3OTk3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-27T14:20:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787079976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584140902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584140902"
         }
      },
      "author_association" : "MEMBER",
      "body" : "indentation is wrong",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:23:10Z",
      "diff_hunk" : "@@ -154,30 +154,36 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n+\n+    switch (verbosity) {\n+      case TxVerbosity::SHOW_TXID:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584140902",
      "id" : 584140902,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0MDkwMg==",
      "original_commit_id" : "cee04d6ef93eea9b0d53a587732ab02e0f205626",
      "original_line" : 167,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584140902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584142066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584142066"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: This should be added in the later commit",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:34:36Z",
      "diff_hunk" : "@@ -46,6 +53,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_TXID);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584142066",
      "id" : 584142066,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0MjA2Ng==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584142066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584142239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584142239"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`const` doesn't do anything here, and is missing in the definition.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:35:52Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, const TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584142239",
      "id" : 584142239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0MjIzOQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584142239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584144982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584144982"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`SHOW_DETAILS` makes more sense as a default (`SHOW_TXID` isn't even supported by this function!)",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:40:14Z",
      "diff_hunk" : "@@ -46,6 +53,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_TXID);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584144982",
      "id" : 584144982,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0NDk4Mg==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584144982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584145181"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584145181"
         }
      },
      "author_association" : "MEMBER",
      "body" : "indentation is wrong",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:42:14Z",
      "diff_hunk" : "@@ -964,7 +971,17 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+\n+    if (verbosity <= 1) {\n+      block_to_json_verbosity = TxVerbosity::SHOW_TXID;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584145181",
      "id" : 584145181,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0NTE4MQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 977,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584145181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584145203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584145203"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I'd drop the blank link",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:42:30Z",
      "diff_hunk" : "@@ -964,7 +971,17 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584145203",
      "id" : 584145203,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0NTIwMw==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 975,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584145203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584147273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584147273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We already have `prev_txout` above. Move `prev_coin` up there?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:53:37Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    const Coin&   prev_coin  = txundo->vprevout[i];\n+                    const CTxOut& prev_txout = prev_coin.out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584147273",
      "id" : 584147273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0NzI3Mw==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 233,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584147273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584148920"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584148920"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This could use a test",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T15:59:21Z",
      "diff_hunk" : "@@ -295,12 +295,12 @@ static bool rest_block(HTTPRequest* req,\n \n static bool rest_block_extended(const util::Ref& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(req, strURIPart, true);\n+    return rest_block(req, strURIPart, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584148920",
      "id" : 584148920,
      "line" : 298,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE0ODkyMA==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 298,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 23,
      "pull_request_review_id" : 600161766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584148920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584170780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584170780"
         }
      },
      "author_association" : "NONE",
      "body" : "I added a test in 37f2c4e9e09d586e1c7d38332dc7fe7864245b97",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T18:22:52Z",
      "diff_hunk" : "@@ -295,12 +295,12 @@ static bool rest_block(HTTPRequest* req,\n \n static bool rest_block_extended(const util::Ref& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(req, strURIPart, true);\n+    return rest_block(req, strURIPart, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584170780",
      "id" : 584170780,
      "in_reply_to_id" : 584148920,
      "line" : 298,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE3MDc4MA==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 298,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 23,
      "pull_request_review_id" : 600182153,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584170780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584170795"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584170795"
         }
      },
      "author_association" : "NONE",
      "body" : "Done",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-02-27T18:23:08Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    const Coin&   prev_coin  = txundo->vprevout[i];\n+                    const CTxOut& prev_txout = prev_coin.out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584170795",
      "id" : 584170795,
      "in_reply_to_id" : 584147273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDE3MDc5NQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 233,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 600182174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584170795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-01T19:12:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-788198353",
      "id" : 788198353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODE5ODM1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-01T19:12:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788198353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584980336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584980336"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is one commit too early (causing a build failure in that commit)",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-03-01T19:12:39Z",
      "diff_hunk" : "@@ -46,6 +52,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_DETAILS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r584980336",
      "id" : 584980336,
      "line" : 55,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDk4MDMzNg==",
      "original_commit_id" : "4aaebc155d0b310360c9237c1676a1099722e644",
      "original_line" : 55,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : 18,
      "pull_request_review_id" : 601076787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584980336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585014241"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585014241"
         }
      },
      "author_association" : "NONE",
      "body" : "Fixed. I moved the change in src/core_write.cpp from the previous commit to this one.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-03-01T20:07:08Z",
      "diff_hunk" : "@@ -46,6 +52,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_DETAILS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585014241",
      "id" : 585014241,
      "in_reply_to_id" : 584980336,
      "line" : 55,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTAxNDI0MQ==",
      "original_commit_id" : "4aaebc155d0b310360c9237c1676a1099722e644",
      "original_line" : 55,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : 18,
      "pull_request_review_id" : 601120360,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585014241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585016515"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585016515"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is still here...",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-03-01T20:10:45Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    const Coin&   prev_coin  = txundo->vprevout[i];\n+                    const CTxOut& prev_txout = prev_coin.out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585016515",
      "id" : 585016515,
      "in_reply_to_id" : 584147273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTAxNjUxNQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 233,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 601123180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-01T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585016515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Needs update for getblock docs\r\n> \r\n> ```\r\n> \"If verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for blocks in the current best chain).\\n\",\r\n> ```\r\n\r\nDone, I added to the commit that implements this feature",
      "created_at" : "2021-03-01T20:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-788259972",
      "id" : 788259972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODI1OTk3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-01T20:40:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788259972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(Could still be cleaner with the duplicate line removed https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585016515)",
      "created_at" : "2021-03-01T20:48:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-788266052",
      "id" : 788266052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODI2NjA1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-01T20:48:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788266052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> (Could still be cleaner with the duplicate line removed [#21245 (comment)](https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585016515))\r\n\r\nshould be fixed this time ..",
      "created_at" : "2021-03-01T20:53:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-788270963",
      "id" : 788270963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODI3MDk2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-01T20:53:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788270963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9.\r\n\r\n- tested that both the RPC and REST interface have a new `prevout` field in the `vin`'s\r\n- tested that the contents of the `getblock` RPC and `/rest/block/<hash>.json` are the same by piping them into `jq` and `diff`ing the results\r\n- tested that a random `vin` can be found on chain as a previous output and the `height`, `value`, `address`, `type` and `scriptPubkey.hex` fields are correct with, for example, this bash helper:\r\n\r\n\r\n``` bash\r\n# make sure to play around with different block hashes and transaction indices (here 50) \r\nvin0=$(curl localhost:8332/rest/block/0000000000000000000c07a5ac516dc2a766da3bd1f85ec92090ba497188fd1b.json | jq .tx[50].vin[0])\r\nvin0txid=$(echo $vin0 | jq .txid -r)\r\nvin0nout=$(echo $vin0 | jq .vout)\r\nvin0height=$(echo $vin0 | jq .prevout.height)\r\nvin0blockhash=$(bitcoin-cli getblockhash $vin0height)\r\n\r\necho $vin0 | jq\r\necho \"\"\r\nbitcoin-cli getrawtransaction $vin0txid true $vin0blockhash | jq .vout[$vin0nout]\r\n```\r\n\r\n----\r\n\r\n**BlockToJsonVerbose** and **BlockToJsonVerboseWrite** (JSON serialization from #21170) benchmarks:\r\n\r\nmaster @ cabe63759ce890a7d39d72f7b8046195b0edb421\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|       71,551,280.00 |               13.98 |    0.1% |  561,473,856.00 |  136,734,366.00 |  4.106 | 105,739,596.00 |    0.4% |      0.79 | `BlockToJsonVerbose`\r\n|       24,850,266.00 |               40.24 |    0.4% |  231,100,742.00 |   49,070,928.00 |  4.710 |  43,476,242.00 |    0.3% |      0.29 | `BlockToJsonVerboseWrite`\r\n\r\n\r\n\r\nthis PR @ 7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|       72,740,207.00 |               13.75 |    0.5% |  561,708,569.00 |  138,848,957.00 |  4.045 | 105,777,166.00 |    0.4% |      0.80 | `BlockToJsonVerbose`\r\n|       24,838,117.00 |               40.26 |    0.6% |  231,115,449.00 |   49,100,061.00 |  4.707 |  43,478,330.00 |    0.3% |      0.29 | `BlockToJsonVerboseWrite`\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2021-03-03T17:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-789900487",
      "id" : 789900487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4OTkwMDQ4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-03T17:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/789900487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-29T14:21:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-809419891",
      "id" : 809419891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTQxOTg5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T14:21:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809419891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630462826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630462826"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: It seems that people mostly write `prevout` as one word. Would it make sense to you to use `SHOW_DETAILS_AND_PREVOUT`?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:28:36Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    SHOW_TXID,\n+    SHOW_DETAILS,\n+    SHOW_DETAILS_AND_PREV_OUT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630462826",
      "id" : 630462826,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ2MjgyNg==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 26,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : 7,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630462826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630468041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630468041"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: What about this way:\r\n\r\n```suggestion\r\n                    UniValue o_script_pub_key(UniValue::VOBJ);\r\n                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, /* fIncludeHex */ true);\r\n\r\n                    UniValue p(UniValue::VOBJ);\r\n                    p.pushKV(\"generated\", bool(prev_coin.fCoinBase));\r\n                    p.pushKV(\"height\", uint64_t(prev_coin.nHeight));\r\n                    p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\r\n                    p.pushKV(\"scriptPubKey\", o_script_pub_key);\r\n                    in.pushKV(\"prevout\", p);\r\n                    break;\r\n```\r\n\r\nI find this order of JSON properties more natural as I think it's more in line with how JSON properties are ordered in other places. I may be wrong here. Functionally it's the same. Anyway, it's just a suggestion. Feel free to ignore it.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:37:29Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    UniValue p(UniValue::VOBJ);\n+                    UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                    p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                    p.pushKV(\"height\", uint64_t(prev_coin.nHeight));\n+                    p.pushKV(\"generated\", bool(prev_coin.fCoinBase));\n+                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, true);\n+                    p.pushKV(\"scriptPubKey\", o_script_pub_key);\n+                    in.pushKV(\"prevout\", p);\n+                    break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630468041",
      "id" : 630468041,
      "line" : 242,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ2ODA0MQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 242,
      "original_position" : 33,
      "original_start_line" : 233,
      "path" : "src/core_write.cpp",
      "position" : 33,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : 233,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630468041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630470072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630470072"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure if there is a reason for the trailing space:\r\n\r\n```suggestion\r\n                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\\n\"\r\n```\r\n\r\nIs there?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:41:01Z",
      "diff_hunk" : "@@ -879,7 +886,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630470072",
      "id" : 630470072,
      "line" : 889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ3MDA3Mg==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 889,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 59,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630470072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630470973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630470973"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would personally go with `==` instead of `<=` here.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:42:30Z",
      "diff_hunk" : "@@ -964,7 +972,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {\n+        block_to_json_verbosity = TxVerbosity::SHOW_TXID;\n+    } else if (verbosity <= 2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630470973",
      "id" : 630470973,
      "line" : 978,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ3MDk3Mw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 978,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 72,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630470973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630472266"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630472266"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would suggest:\r\n\r\n```suggestion\r\n    if (verbosity == 1) {\r\n```\r\n\r\nas it's easier to understand here.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:44:33Z",
      "diff_hunk" : "@@ -964,7 +972,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630472266",
      "id" : 630472266,
      "line" : 976,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ3MjI2Ng==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 976,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 70,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630472266",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630477831"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630477831"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems to me that the `TxVerbosity::SHOW_TXID` default value is not actually needed. Would it make sense to not having a default value here?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:49:48Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630477831",
      "id" : 630477831,
      "line" : 44,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ3NzgzMQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : 13,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630477831",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630488523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630488523"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should a note be added to the PR description to make sure it's clear that you modify an existing REST endpoint behavior (even though you just add more information)?\r\n\r\nI'm not sure whether this is something that is supposed to be mentioned in release notes too.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T19:56:42Z",
      "diff_hunk" : "@@ -295,12 +295,12 @@ static bool rest_block(HTTPRequest* req,\n \n static bool rest_block_extended(const util::Ref& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(req, strURIPart, true);\n+    return rest_block(req, strURIPart, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630488523",
      "id" : 630488523,
      "line" : 298,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ4ODUyMw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 298,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 23,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630488523",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630497819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630497819"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Personally, I would use simple `if` here as it is shorter. Or is there any specific reason to use `switch`?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T20:01:16Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630497819",
      "id" : 630497819,
      "line" : 227,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDQ5NzgxOQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 227,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 18,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630497819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630529304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630529304"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is suggested by clang formatter:\r\n\r\n```suggestion\r\n            const Coin& prev_coin = txundo->vprevout[i];\r\n```",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-11T20:46:26Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630529304",
      "id" : 630529304,
      "line" : 223,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDUyOTMwNA==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 223,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 14,
      "pull_request_review_id" : 657122697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T20:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630529304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633058166"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633058166"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe the function can be called `assert_fee_not_in_block`.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-16T07:55:51Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633058166",
      "id" : 633058166,
      "line" : 398,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA1ODE2Ng==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 398,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : 4,
      "pull_request_review_id" : 660415526,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-16T07:55:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633058166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633064256"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633064256"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It would be great to introduce a constant for this value (similar to this ones https://github.com/bitcoin/bitcoin/pull/21245/files#diff-0b117a50ea1a4d205e8b5268d01f06b100c6d75ccc743628774b1f656077a0c3R23). I think that they could be re-used and code would be self-describing.",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-16T08:55:40Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            total_vin = 0\n+            total_vout = 0\n+            for vin in tx[\"vin\"]:\n+                assert \"prevout\" in vin\n+                assert_equal(set(vin[\"prevout\"].keys()), set((\"value\", \"height\", \"generated\", \"scriptPubKey\")))\n+                assert_equal(vin[\"prevout\"][\"generated\"], True)\n+                total_vin += vin[\"prevout\"][\"value\"]\n+            for vout in tx[\"vout\"]:\n+                total_vout += vout[\"value\"]\n+            assert_equal(total_vin, total_vout + tx[\"fee\"])\n+\n+        def check_vin_does_not_contain_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            if isinstance(tx, str):\n+                # In verbosity level 1, only the transaction hashes are written\n+                pass\n+            else:\n+                for vin in tx[\"vin\"]:\n+                    assert \"prevout\" not in vin\n+\n         self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n-        block = node.getblock(blockhash, 1)\n-        assert 'fee' not in block['tx'][1]\n+        check_fee_not_in_block(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633064256",
      "id" : 633064256,
      "line" : 433,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA2NDI1Ng==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 433,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : 41,
      "pull_request_review_id" : 660419272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-16T08:55:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633064256",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633064565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633064565"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The parameter is always `3` so it seems unnecessary.\r\n\r\nThe function does more than checking that prevouts are present. Maybe `{verify|assert}_level3_block`?",
      "commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "created_at" : "2021-05-16T08:58:39Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633064565",
      "id" : 633064565,
      "line" : 408,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA2NDU2NQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 408,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : 14,
      "pull_request_review_id" : 660419453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-16T08:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/633064565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\nHappy to review after rebase",
      "created_at" : "2021-07-14T20:49:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-880199183",
      "id" : 880199183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MDE5OTE4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-14T20:49:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/880199183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have rebased the PR here: #22463. In my testing each individual commit can be compiled and `make check` passed for me. If you like the work, please just use it. (No guaratees!)\r\n\r\nI plan to address review comments from this PR in #22463 in coming days, unless somebody beats me to it :)\r\n\r\nHopefully this effort will help move the needle.",
      "created_at" : "2021-07-15T21:14:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881018046",
      "id" : 881018046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MTAxODA0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T21:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881018046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "sorry for the delay getting back to this. I just rebased -- it ought to be passing tests, i'll take a look at some of the reviews..",
      "created_at" : "2021-07-15T23:27:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881072351",
      "id" : 881072351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MTA3MjM1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T23:27:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881072351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670867840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670867840"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "personally think it's clearer to comprehend, compared to something like `verbosity == TxVerbosity::SHOW_TXID || verbosity == TxVerbosity::SHOW_DETAILS)`",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-15T23:30:22Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670867840",
      "id" : 670867840,
      "in_reply_to_id" : 630497819,
      "line" : 238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg2Nzg0MA==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 238,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 18,
      "pull_request_review_id" : 707895256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T23:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670867840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670871262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670871262"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-15T23:40:37Z",
      "diff_hunk" : "@@ -964,7 +972,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {\n+        block_to_json_verbosity = TxVerbosity::SHOW_TXID;\n+    } else if (verbosity <= 2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670871262",
      "id" : 670871262,
      "in_reply_to_id" : 630470973,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg3MTI2Mg==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 1031,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 707899147,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T23:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670871262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670871503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670871503"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I removed the trailing space.",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-15T23:41:24Z",
      "diff_hunk" : "@@ -879,7 +886,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670871503",
      "id" : 670871503,
      "in_reply_to_id" : 630470072,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg3MTUwMw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 940,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 707899415,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T23:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670871503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670874255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670874255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "make sense, i removed it.",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-15T23:49:51Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r670874255",
      "id" : 670874255,
      "in_reply_to_id" : 630477831,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg3NDI1NQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 42,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : null,
      "pull_request_review_id" : 707902490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T23:49:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670874255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@kiminuo  all your comments should been addressed now.",
      "created_at" : "2021-07-15T23:52:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881080152",
      "id" : 881080152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MTA4MDE1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T23:52:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881080152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671024143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671024143"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "But here it would be `if (verbosity == TxVerbosity::SHOW_DETAILS_AND_PREVOUT) { /* compute something */ }`. Seems very straightforward and Bitcoin Core does not use switches instead of simple if statements by default.\r\n\r\nObviously, this is rather a nit. So I don't want to waste your time with this. Feel free to resolve this suggestion if you are happy with the code as it is.",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:21:03Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671024143",
      "id" : 671024143,
      "in_reply_to_id" : 630497819,
      "line" : 238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAyNDE0Mw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 238,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 18,
      "pull_request_review_id" : 708078710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:21:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671024143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @kiminuo all your comments should been addressed now.\r\n\r\nThank you! There are still open review comments from my side. I'm not sure if you have seen them or not. Mostly nits though.\r\n\r\nEdit: For example these ones:\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630488523 \r\n* https://github.com/bitcoin/bitcoin/pull/21245#discussion_r633064565\r\n* https://github.com/bitcoin/bitcoin/pull/21245#discussion_r630468041",
      "created_at" : "2021-07-16T07:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881235411",
      "id" : 881235411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840hpXT",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T07:35:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881235411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671029842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671029842"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Please mark this as resolved. ð \r\n\r\n(For some reason I can't do it and it's harder for me to track what is done, what is not done and what was rejected as a suggestion.)",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:31:44Z",
      "diff_hunk" : "@@ -964,7 +972,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {\n+        block_to_json_verbosity = TxVerbosity::SHOW_TXID;\n+    } else if (verbosity <= 2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671029842",
      "id" : 671029842,
      "in_reply_to_id" : 630470973,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAyOTg0Mg==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 1031,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708086342,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:31:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671029842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671030383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671030383"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:32:46Z",
      "diff_hunk" : "@@ -964,7 +972,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671030383",
      "id" : 671030383,
      "in_reply_to_id" : 630472266,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMDM4Mw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 1029,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708087093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:32:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671030383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671030561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671030561"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:33:05Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671030561",
      "id" : 671030561,
      "in_reply_to_id" : 630477831,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMDU2MQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 42,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : null,
      "pull_request_review_id" : 708087329,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:33:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671030561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671031376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671031376"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:34:32Z",
      "diff_hunk" : "@@ -220,8 +220,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671031376",
      "id" : 671031376,
      "in_reply_to_id" : 630529304,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMTM3Ng==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 234,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 708088399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:34:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671031376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671032054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671032054"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:35:44Z",
      "diff_hunk" : "@@ -879,7 +886,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671032054",
      "id" : 671032054,
      "in_reply_to_id" : 630470072,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMjA1NA==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 940,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708089257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671032054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671032275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671032275"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Done; Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:36:07Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    SHOW_TXID,\n+    SHOW_DETAILS,\n+    SHOW_DETAILS_AND_PREV_OUT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671032275",
      "id" : 671032275,
      "in_reply_to_id" : 630462826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMjI3NQ==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 26,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 708089519,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:36:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671032275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671033336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671033336"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:38:02Z",
      "diff_hunk" : "@@ -223,6 +223,17 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (display_prev_out && (nullptr != txundo)) {\n+            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            UniValue p(UniValue::VOBJ);\n+            UniValue o_script_pub_key(UniValue::VOBJ);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671033336",
      "id" : 671033336,
      "in_reply_to_id" : 581587569,
      "line" : 246,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMzMzNg==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 246,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 26,
      "pull_request_review_id" : 708090955,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671033336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671033597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671033597"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:38:35Z",
      "diff_hunk" : "@@ -154,30 +154,39 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, BlockToJsonVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n+\n+    switch (verbosity) {\n+      case BlockToJsonVerbosity::DONT_SHOW_TX_DETAILS:\n+        for (const CTransactionRef& tx : block.vtx) {\n+            txs.push_back(tx->GetHash().GetHex());\n+        }\n+        break;\n+\n+      case BlockToJsonVerbosity::TX_DETAILS:\n+      case BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT:\n         CBlockUndo blockUndo;\n         const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n         for (size_t i = 0; i < block.vtx.size(); ++i) {\n             const CTransactionRef& tx = block.vtx.at(i);\n             // coinbase transaction (i == 0) doesn't have undo data\n             const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n+            const bool display_prev_out = (verbosity == BlockToJsonVerbosity::TX_DETAILS_AND_PREV_OUT);\n             UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n+            std::cout << display_prev_out  << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671033597",
      "id" : 671033597,
      "in_reply_to_id" : 581588425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzMzU5Nw==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 184,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708091335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671033597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671034310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671034310"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Seems done; please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:39:55Z",
      "diff_hunk" : "@@ -154,30 +154,36 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n+\n+    switch (verbosity) {\n+      case TxVerbosity::SHOW_TXID:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671034310",
      "id" : 671034310,
      "in_reply_to_id" : 584140902,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzNDMxMA==",
      "original_commit_id" : "cee04d6ef93eea9b0d53a587732ab02e0f205626",
      "original_line" : 167,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708092319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671034310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671035746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671035746"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:42:22Z",
      "diff_hunk" : "@@ -46,6 +46,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, const bool display_prev_out = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671035746",
      "id" : 671035746,
      "in_reply_to_id" : 581589321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzNTc0Ng==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 49,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 708094043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:42:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671035746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671037006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671037006"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The convention seems to be:\r\n\r\n```suggestion\r\n                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, /* fIncludeHex */ true, /* include_addresses */ true);\r\n```",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:44:41Z",
      "diff_hunk" : "@@ -231,8 +231,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_add\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin& prev_coin = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREVOUT:\n+                    UniValue p(UniValue::VOBJ);\n+                    UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                    p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                    p.pushKV(\"height\", uint64_t(prev_coin.nHeight));\n+                    p.pushKV(\"generated\", bool(prev_coin.fCoinBase));\n+                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, true, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671037006",
      "id" : 671037006,
      "line" : 250,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzNzAwNg==",
      "original_commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "original_line" : 250,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 30,
      "pull_request_review_id" : 708095769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:44:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671037006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038029"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:46:30Z",
      "diff_hunk" : "@@ -46,6 +46,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, const bool display_prev_out = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038029",
      "id" : 671038029,
      "in_reply_to_id" : 581589321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzODAyOQ==",
      "original_commit_id" : "6eede79af11d8fdfa55ad38a751c287864777b46",
      "original_line" : 49,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 708097139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038117"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:46:41Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+            case TxVerbosity::DONT_SHOW_TX_DETAILS:\n+            case TxVerbosity::TX_DETAILS:\n+                break;\n+\n+            case TxVerbosity::TX_DETAILS_AND_PREV_OUT:\n+                const Coin&   prev_coin  = txundo->vprevout[i];\n+                const CTxOut& prev_txout = prev_coin.out;\n+                UniValue p(UniValue::VOBJ);\n+                UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                p.pushKV(\"height\", static_cast<uint64_t>(prev_coin.nHeight));\n+                p.pushKV(\"generated\", !static_cast<bool>(prev_coin.fCoinBase));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038117",
      "id" : 671038117,
      "in_reply_to_id" : 582344935,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzODExNw==",
      "original_commit_id" : "dc684798a0c936c04a10fb06562493c32e03f8f0",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : 239,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 708097256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-16T07:46:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038545"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(`const` was removed; please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:47:25Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, const TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671038545",
      "id" : 671038545,
      "in_reply_to_id" : 584142239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzODU0NQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : null,
      "pull_request_review_id" : 708097790,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:47:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671038545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671039181"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671039181"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:48:29Z",
      "diff_hunk" : "@@ -46,6 +53,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_TXID);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671039181",
      "id" : 671039181,
      "in_reply_to_id" : 584144982,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzOTE4MQ==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : null,
      "pull_request_review_id" : 708098592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:48:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671039181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671039642"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671039642"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(Looks correct to me now; please mark as resolved ð )",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:49:16Z",
      "diff_hunk" : "@@ -964,7 +971,17 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+\n+    if (verbosity <= 1) {\n+      block_to_json_verbosity = TxVerbosity::SHOW_TXID;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671039642",
      "id" : 671039642,
      "in_reply_to_id" : 584145181,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTAzOTY0Mg==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 977,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 708099151,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:49:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671039642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671043926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671043926"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this still relevant?",
      "commit_id" : "dac9c0cf9650d7a3d69e448b80c97e4a82ccc695",
      "created_at" : "2021-07-16T07:56:17Z",
      "diff_hunk" : "@@ -223,6 +223,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n             const CTxOut& prev_txout = txundo->vprevout[i].out;\n             amt_total_in += prev_txout.nValue;\n         }\n+        if (nullptr != txundo) {\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    const Coin&   prev_coin  = txundo->vprevout[i];\n+                    const CTxOut& prev_txout = prev_coin.out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671043926",
      "id" : 671043926,
      "in_reply_to_id" : 584147273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTA0MzkyNg==",
      "original_commit_id" : "5710e3f9008235c5e7805ee017fabbf3b20797b7",
      "original_line" : 233,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 708104540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T07:56:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671043926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671343803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671343803"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i disagree -- i think what we are asserting here is that level 1 verbosity does not have fee in block,  level 2 & 3 does etc.. a constant for the value would probably make the test intention less clear.",
      "commit_id" : "356c74c6e0fc84bfbd4892fba1c666857bc5f45a",
      "created_at" : "2021-07-16T15:29:11Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            total_vin = 0\n+            total_vout = 0\n+            for vin in tx[\"vin\"]:\n+                assert \"prevout\" in vin\n+                assert_equal(set(vin[\"prevout\"].keys()), set((\"value\", \"height\", \"generated\", \"scriptPubKey\")))\n+                assert_equal(vin[\"prevout\"][\"generated\"], True)\n+                total_vin += vin[\"prevout\"][\"value\"]\n+            for vout in tx[\"vout\"]:\n+                total_vout += vout[\"value\"]\n+            assert_equal(total_vin, total_vout + tx[\"fee\"])\n+\n+        def check_vin_does_not_contain_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            if isinstance(tx, str):\n+                # In verbosity level 1, only the transaction hashes are written\n+                pass\n+            else:\n+                for vin in tx[\"vin\"]:\n+                    assert \"prevout\" not in vin\n+\n         self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n-        block = node.getblock(blockhash, 1)\n-        assert 'fee' not in block['tx'][1]\n+        check_fee_not_in_block(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671343803",
      "id" : 671343803,
      "in_reply_to_id" : 633064256,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTM0MzgwMw==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 435,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 708512279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T15:29:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671343803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671347160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671347160"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I renamed the prefix to assert. The pattern i was going for was: `assert_<some-expected-behaviour>(verbosity_level)`, which is consistent with the other assertion helpers in this test. I think i'd prefer leaving it as such.",
      "commit_id" : "356c74c6e0fc84bfbd4892fba1c666857bc5f45a",
      "created_at" : "2021-07-16T15:33:54Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671347160",
      "id" : 671347160,
      "in_reply_to_id" : 633064565,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTM0NzE2MA==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 410,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 708516776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T15:34:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671347160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671363784"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671363784"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "good point. I added a commit with changes to the release notes, please have a look!",
      "commit_id" : "356c74c6e0fc84bfbd4892fba1c666857bc5f45a",
      "created_at" : "2021-07-16T15:58:36Z",
      "diff_hunk" : "@@ -295,12 +295,12 @@ static bool rest_block(HTTPRequest* req,\n \n static bool rest_block_extended(const util::Ref& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(req, strURIPart, true);\n+    return rest_block(req, strURIPart, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671363784",
      "id" : 671363784,
      "in_reply_to_id" : 630488523,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTM2Mzc4NA==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 298,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 708538343,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T15:58:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671363784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@kiminuo i think they should all be addressed now ..",
      "created_at" : "2021-07-16T15:59:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881552078",
      "id" : 881552078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840i2rO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T15:59:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881552078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fyquah Thanks! \r\n\r\nIs this Luke's comment addressed: https://github.com/bitcoin/bitcoin/pull/21245#discussion_r585016515 ? I'm not sure. ð¤·ââï¸ ",
      "created_at" : "2021-07-16T19:35:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881673314",
      "id" : 881673314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840jURi",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T19:35:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881673314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671485932"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671485932"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe:\r\n\r\n```suggestion\r\n- The `getblock` RPC command now supports verbose level 3 containing transaction inputs'\r\n```\r\n(naming based on https://github.com/bitcoin/bitcoin/blob/master/doc/release-notes/release-notes-0.15.0.md) ",
      "commit_id" : "356c74c6e0fc84bfbd4892fba1c666857bc5f45a",
      "created_at" : "2021-07-16T19:40:03Z",
      "diff_hunk" : "@@ -109,6 +109,15 @@ Updated RPCs\n   of `decodescript` these fields are top-level attributes, and included again as attributes\n   of the `scriptPubKey` object. (#20286)\n \n+- The `getblock` rpc now supports a level 3 verbosity containing a transaction inputs'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671485932",
      "id" : 671485932,
      "line" : 112,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTQ4NTkzMg==",
      "original_commit_id" : "356c74c6e0fc84bfbd4892fba1c666857bc5f45a",
      "original_line" : 112,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 4,
      "pull_request_review_id" : 708698112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T19:40:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671485932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is this Luke's comment addressed: #21245 (comment) ? I'm not sure. ð¤·ââï¸\r\n\r\nI don't think so. It has already been moved into the `if(calculate_fee)` block.",
      "created_at" : "2021-07-16T20:02:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881686715",
      "id" : 881686715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840jXi7",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T20:02:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881686715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@kiminuo I think all but 2 remaining comments above are addressed.",
      "created_at" : "2021-07-16T20:05:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881688261",
      "id" : 881688261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840jX7F",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T20:05:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881688261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671514162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671514162"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ok",
      "commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "created_at" : "2021-07-16T20:40:47Z",
      "diff_hunk" : "@@ -395,17 +395,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r671514162",
      "id" : 671514162,
      "in_reply_to_id" : 633064565,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTUxNDE2Mg==",
      "original_commit_id" : "7fc316e2c9f83cdab1b3b6cbd780c8d498f0bbb9",
      "original_line" : 410,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 708734297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-16T20:40:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671514162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Maintainers: I believe all the reviews are addressed. Is there anything else blocking merge?\r\n\r\nOnce again, sorry for the delay getting back to this.",
      "created_at" : "2021-07-16T21:42:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-881734402",
      "id" : 881734402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840jjMC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-16T21:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881734402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672184180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672184180"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: should probably also check here that for coinbase txs, \"prevout\" is _not_ set. Could also add a check `assert \"prevout\" in vin` before accessing, to avoid a KeyError thrown if this ever would fail in the future",
      "commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "created_at" : "2021-07-19T10:35:44Z",
      "diff_hunk" : "@@ -313,6 +313,13 @@ def run_test(self):\n                             if 'coinbase' not in tx['vin'][0]}\n         assert_equal(non_coinbase_txs, set(txs))\n \n+        # Verify that the non-coinbase tx has \"prevout\" field set\n+        for tx_obj in json_obj[\"tx\"]:\n+            for vin in tx_obj[\"vin\"]:\n+                if \"coinbase\" not in vin:\n+                    prevout = vin[\"prevout\"]\n+                    assert_equal(prevout[\"generated\"], False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672184180",
      "id" : 672184180,
      "line" : 321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjE4NDE4MA==",
      "original_commit_id" : "144547291dc846f02f29185aed8a043414341a0d",
      "original_line" : 321,
      "original_position" : 9,
      "original_start_line" : 316,
      "path" : "test/functional/interface_rest.py",
      "position" : 9,
      "pull_request_review_id" : 709400486,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : 316,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-19T11:02:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672184180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672221707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672221707"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "L233: `calculate_fee` may be called `have_undo` now as this code block now is not only about calculating fees.",
      "commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "created_at" : "2021-07-19T11:39:24Z",
      "diff_hunk" : "@@ -231,8 +231,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_add\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin& prev_coin = txundo->vprevout[i];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672221707",
      "id" : 672221707,
      "line" : 234,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjIyMTcwNw==",
      "original_commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "original_line" : 234,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 14,
      "pull_request_review_id" : 709448244,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-19T12:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672221707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672235127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672235127"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit:\r\n```suggestion\r\n                const CTxUndo* txundo = (have_undo && i > 0) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\r\n```",
      "commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "created_at" : "2021-07-19T12:01:09Z",
      "diff_hunk" : "@@ -199,30 +199,37 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n-        CBlockUndo blockUndo;\n-        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n-        for (size_t i = 0; i < block.vtx.size(); ++i) {\n-            const CTransactionRef& tx = block.vtx.at(i);\n-            // coinbase transaction (i == 0) doesn't have undo data\n-            const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n-            UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n-            txs.push_back(objTx);\n-        }\n-    } else {\n-        for (const CTransactionRef& tx : block.vtx) {\n-            txs.push_back(tx->GetHash().GetHex());\n-        }\n+\n+    switch (verbosity) {\n+        case TxVerbosity::SHOW_TXID:\n+            for (const CTransactionRef& tx : block.vtx) {\n+                txs.push_back(tx->GetHash().GetHex());\n+            }\n+            break;\n+\n+        case TxVerbosity::SHOW_DETAILS:\n+        case TxVerbosity::SHOW_DETAILS_AND_PREVOUT:\n+            CBlockUndo blockUndo;\n+            const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n+            for (size_t i = 0; i < block.vtx.size(); ++i) {\n+                const CTransactionRef& tx = block.vtx.at(i);\n+                // coinbase transaction (i == 0) doesn't have undo data\n+                const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672235127",
      "id" : 672235127,
      "line" : 226,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjIzNTEyNw==",
      "original_commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "original_line" : 226,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 44,
      "pull_request_review_id" : 709448244,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-19T12:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672235127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672238121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672238121"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "FMI: \"only for blocks in the current best chain\" - Is this precisely worded with regard to how pruning works? ",
      "commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "created_at" : "2021-07-19T12:06:02Z",
      "diff_hunk" : "@@ -930,7 +937,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\\n\"\n+                \"If verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for blocks in the current best chain).\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r672238121",
      "id" : 672238121,
      "line" : 941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjIzODEyMQ==",
      "original_commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "original_line" : 941,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 60,
      "pull_request_review_id" : 709468996,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-19T12:06:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672238121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-21T10:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-884060932",
      "id" : 884060932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5840sbME",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-21T10:00:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/884060932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r682135386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682135386"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "iiuc, txundo will not be looked up for pruned blocks. I reworded this from \"only for blocks\" to \"only for unpruned blocks\".",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-03T22:10:13Z",
      "diff_hunk" : "@@ -930,7 +937,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\\n\"\n+                \"If verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for blocks in the current best chain).\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r682135386",
      "id" : 682135386,
      "in_reply_to_id" : 672238121,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MjEzNTM4Ng==",
      "original_commit_id" : "cecbfed94e90df32f59ee661b83cb28f30c68587",
      "original_line" : 941,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 721687534,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-03T22:10:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682135386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@kiminuo i think your comments should be addressed now. Can you mark this as reviewed once this looks good?",
      "created_at" : "2021-08-03T22:11:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-892200107",
      "id" : 892200107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5841LeSr",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T22:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892200107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently `./bitcoin-cli -testnet getblock` prints:\r\n\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n```\r\nerror code: -1\r\nerror message:\r\ngetblock \"blockhash\" ( verbosity )\r\n\r\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\r\nIf verbosity is 1, returns an Object with information about block <hash>.\r\nIf verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\r\nIf verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for blocks in the current best chain).\r\n\r\nArguments:\r\n1. blockhash    (string, required) The block hash\r\n2. verbosity    (numeric, optional, default=1) 0 for hex-encoded data, 1 for a json object, and 2 for json object with transaction data\r\n\r\nResult (for verbosity = 0):\r\n\"hex\"    (string) A string that is serialized, hex-encoded data for block 'hash'\r\n\r\nResult (for verbosity = 1):\r\n{                                 (json object)\r\n  \"hash\" : \"hex\",                 (string) the block hash (same as provided)\r\n  \"confirmations\" : n,            (numeric) The number of confirmations, or -1 if the block is not on the main chain\r\n  \"size\" : n,                     (numeric) The block size\r\n  \"strippedsize\" : n,             (numeric) The block size excluding witness data\r\n  \"weight\" : n,                   (numeric) The block weight as defined in BIP 141\r\n  \"height\" : n,                   (numeric) The block height or index\r\n  \"version\" : n,                  (numeric) The block version\r\n  \"versionHex\" : \"hex\",           (string) The block version formatted in hexadecimal\r\n  \"merkleroot\" : \"hex\",           (string) The merkle root\r\n  \"tx\" : [                        (json array) The transaction ids\r\n    \"hex\",                        (string) The transaction id\r\n    ...\r\n  ],\r\n  \"time\" : xxx,                   (numeric) The block time expressed in UNIX epoch time\r\n  \"mediantime\" : xxx,             (numeric) The median block time expressed in UNIX epoch time\r\n  \"nonce\" : n,                    (numeric) The nonce\r\n  \"bits\" : \"hex\",                 (string) The bits\r\n  \"difficulty\" : n,               (numeric) The difficulty\r\n  \"chainwork\" : \"hex\",            (string) Expected number of hashes required to produce the chain up to this block (in hex)\r\n  \"nTx\" : n,                      (numeric) The number of transactions in the block\r\n  \"previousblockhash\" : \"hex\",    (string, optional) The hash of the previous block (if available)\r\n  \"nextblockhash\" : \"hex\"         (string, optional) The hash of the next block (if available)\r\n}\r\n\r\nResult (for verbosity = 2):\r\n{                   (json object)\r\n  ...,              Same output as verbosity = 1\r\n  \"tx\" : [          (json array)\r\n    {               (json object)\r\n      ...,          The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \"tx\" result\r\n      \"fee\" : n     (numeric) The transaction fee in BTC, omitted if block undo data is not available\r\n    },\r\n    ...\r\n  ]\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getblock \"00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09\"\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getblock\", \"params\": [\"00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09\"]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n</details>\r\n\r\n\r\nIt would be great to:\r\n\r\n* Add \"Result (for verbosity = 3):\" in the output.\r\n* Modify \"2. verbosity    (numeric, optional, default=1) 0 for hex-encoded data, 1 for a json object, and 2 for json object with transaction data\" to include your new level 3.\r\n\r\n\r\nEdit: I'll try to carve out some more time tomorrow to test it more.",
      "created_at" : "2021-08-05T09:30:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-893310862",
      "id" : 893310862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5841PteO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-08T20:22:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893310862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The following examples may be worth adding to your [original post](https://github.com/bitcoin/bitcoin/pull/21245#issue-576925964):\r\n\r\nExamples of the `getblock` output with various verbose levels. Note that `000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5` contains only 2 transactions.\r\n\r\n## `bitcoin-cli`\r\n\r\n### Verbose level 0\r\n\r\n```bash\r\n./bitcoin-cli -testnet getblock 000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5 0\r\n```\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n  ```\r\n  0400c020fbf5f342465b89fc746df587a07339e662a944aff4c286ca0b000000000000008387d05d584be6d61398c894427255227592c9e7c3c093759bafa4487e271532819c0b6100ec421969ccd91002010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff5a03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000ffffffff04b92e9500000000001976a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac0000000000000000266a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df0000000000000000266a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c100000000000000002b6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f757301200000000000000000000000000000000000000000000000000000000000000000f1087e960100000000010386fe743a8db99cd6db255f8505d9e20e67e03edbd411874816382415a053b1120100000000ffffffffa0785a72492fc87903eb4e07893fc769ef561db7020ba9b43e9c484619c637e10000000000ffffffff7dcd54a6c50865c34290454183ffa1a7f31aae3557045007a9075b022a4759020100000000ffffffff02408e2c000000000017a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87eac5000000000000160014f2aeff3fd69c70bcff9c0709cc3ed1521868538002483045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e1012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e00248304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001210396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d4570247304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d634012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e000000000\r\n  ```\r\n</details>\r\n\r\n\r\n\r\n### Verbose level 1\r\n\r\n```bash\r\n./bitcoin-cli -testnet getblock 000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5 1\r\n```\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n  ```json\r\n  {\r\n    \"hash\": \"000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5\",\r\n    \"confirmations\": 10,\r\n    \"height\": 2063334,\r\n    \"version\": 549453828,\r\n    \"versionHex\": \"20c00004\",\r\n    \"merkleroot\": \"3215277e48a4af9b7593c0c3e7c992752255724294c89813d6e64b585dd08783\",\r\n    \"time\": 1628150913,\r\n    \"mediantime\": 1628149483,\r\n    \"nonce\": 282709097,\r\n    \"bits\": \"1942ec00\",\r\n    \"difficulty\": 64177845.58487042,\r\n    \"chainwork\": \"000000000000000000000000000000000000000000000558fbc2a80220ea0e44\",\r\n    \"nTx\": 2,\r\n    \"previousblockhash\": \"000000000000000bca86c2f4af44a962e63973a087f56d74fc895b4642f3f5fb\",\r\n    \"nextblockhash\": \"000000000000000119b44a12b31fb2e1d2baa9ad5bb7419428f62cc77a4685f5\",\r\n    \"strippedsize\": 598,\r\n    \"size\": 959,\r\n    \"weight\": 2753,\r\n    \"tx\": [\r\n      \"f10ed21d238ce32aaa00384af709381e2ecf1e3914604b4f0fbd817b3477017c\",\r\n      \"6fcf360bade1cae884cb0d36dfb92455b7cfdc037cfbab75f86dfbfe28f08b3e\"\r\n    ]\r\n  }\r\n  ```\r\n</details>\r\n\r\n### Verbose level 2\r\n\r\n```bash\r\n./bitcoin-cli -testnet getblock 000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5 2\r\n```\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n  ```json\r\n  {\r\n    \"hash\": \"000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5\",\r\n    \"confirmations\": 10,\r\n    \"height\": 2063334,\r\n    \"version\": 549453828,\r\n    \"versionHex\": \"20c00004\",\r\n    \"merkleroot\": \"3215277e48a4af9b7593c0c3e7c992752255724294c89813d6e64b585dd08783\",\r\n    \"time\": 1628150913,\r\n    \"mediantime\": 1628149483,\r\n    \"nonce\": 282709097,\r\n    \"bits\": \"1942ec00\",\r\n    \"difficulty\": 64177845.58487042,\r\n    \"chainwork\": \"000000000000000000000000000000000000000000000558fbc2a80220ea0e44\",\r\n    \"nTx\": 2,\r\n    \"previousblockhash\": \"000000000000000bca86c2f4af44a962e63973a087f56d74fc895b4642f3f5fb\",\r\n    \"nextblockhash\": \"000000000000000119b44a12b31fb2e1d2baa9ad5bb7419428f62cc77a4685f5\",\r\n    \"strippedsize\": 598,\r\n    \"size\": 959,\r\n    \"weight\": 2753,\r\n    \"tx\": [\r\n      {\r\n        \"txid\": \"f10ed21d238ce32aaa00384af709381e2ecf1e3914604b4f0fbd817b3477017c\",\r\n        \"hash\": \"9a614c99fc94459d6a5901b4091576365def3a23e002d77e6d79fd153d533bf4\",\r\n        \"version\": 1,\r\n        \"size\": 357,\r\n        \"vsize\": 330,\r\n        \"weight\": 1320,\r\n        \"locktime\": 2524842225,\r\n        \"vin\": [\r\n          {\r\n            \"coinbase\": \"03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000\",\r\n            \"txinwitness\": [\r\n              \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n            ],\r\n            \"sequence\": 4294967295\r\n          }\r\n        ],\r\n        \"vout\": [\r\n          {\r\n            \"value\": 0.09776825,\r\n            \"n\": 0,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_DUP OP_HASH160 190f8ddccb511a66f0cfc9a33204d9287e65fdf7 OP_EQUALVERIFY OP_CHECKSIG\",\r\n              \"hex\": \"76a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac\",\r\n              \"address\": \"mhoTpa5QLRPFKsH4DdWSp1mru5BkEEWvYR\",\r\n              \"type\": \"pubkeyhash\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 1,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n              \"hex\": \"6a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 2,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n              \"hex\": \"6a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 3,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN 52534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n              \"hex\": \"6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          }\r\n        ],\r\n        \"hex\": \"010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff5a03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000ffffffff04b92e9500000000001976a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac0000000000000000266a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df0000000000000000266a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c100000000000000002b6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f757301200000000000000000000000000000000000000000000000000000000000000000f1087e96\"\r\n      },\r\n      {\r\n        \"txid\": \"6fcf360bade1cae884cb0d36dfb92455b7cfdc037cfbab75f86dfbfe28f08b3e\",\r\n        \"hash\": \"891566037ba9d65bdc6bce5135d27d18607e7903979d8fa014d1f7118d618691\",\r\n        \"version\": 1,\r\n        \"size\": 521,\r\n        \"vsize\": 278,\r\n        \"weight\": 1109,\r\n        \"locktime\": 0,\r\n        \"vin\": [\r\n          {\r\n            \"txid\": \"12b153a015243816488711d4db3ee0670ee2d905855f25dbd69cb98d3a74fe86\",\r\n            \"vout\": 1,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"3045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e101\",\r\n              \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n            ],\r\n            \"sequence\": 4294967295\r\n          },\r\n          {\r\n            \"txid\": \"e137c61946489c3eb4a90b02b71d56ef69c73f89074eeb0379c82f49725a78a0\",\r\n            \"vout\": 0,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001\",\r\n              \"0396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d457\"\r\n            ],\r\n            \"sequence\": 4294967295\r\n          },\r\n          {\r\n            \"txid\": \"0259472a025b07a90750045735ae1af3a7a1ff8341459042c36508c5a654cd7d\",\r\n            \"vout\": 1,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d63401\",\r\n              \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n            ],\r\n            \"sequence\": 4294967295\r\n          }\r\n        ],\r\n        \"vout\": [\r\n          {\r\n            \"value\": 0.02920000,\r\n            \"n\": 0,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_HASH160 d1c71b4df72064844eec341c86dc68cf81b9c2ec OP_EQUAL\",\r\n              \"hex\": \"a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87\",\r\n              \"address\": \"2NCNRjYqKz6j377wA328zjTqRGWBR59ygz1\",\r\n              \"type\": \"scripthash\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00050666,\r\n            \"n\": 1,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n              \"type\": \"witness_v0_keyhash\"\r\n            }\r\n          }\r\n        ],\r\n        \"fee\": 0.00011200,\r\n        \"hex\": \"0100000000010386fe743a8db99cd6db255f8505d9e20e67e03edbd411874816382415a053b1120100000000ffffffffa0785a72492fc87903eb4e07893fc769ef561db7020ba9b43e9c484619c637e10000000000ffffffff7dcd54a6c50865c34290454183ffa1a7f31aae3557045007a9075b022a4759020100000000ffffffff02408e2c000000000017a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87eac5000000000000160014f2aeff3fd69c70bcff9c0709cc3ed1521868538002483045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e1012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e00248304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001210396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d4570247304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d634012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e000000000\"\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n</details>\r\n\r\n\r\n\r\n### Verbose level 3\r\n\r\n```bash\r\n./bitcoin-cli -testnet getblock 000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5 3\r\n```\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n  ```json\r\n  {\r\n    \"hash\": \"000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5\",\r\n    \"confirmations\": 10,\r\n    \"height\": 2063334,\r\n    \"version\": 549453828,\r\n    \"versionHex\": \"20c00004\",\r\n    \"merkleroot\": \"3215277e48a4af9b7593c0c3e7c992752255724294c89813d6e64b585dd08783\",\r\n    \"time\": 1628150913,\r\n    \"mediantime\": 1628149483,\r\n    \"nonce\": 282709097,\r\n    \"bits\": \"1942ec00\",\r\n    \"difficulty\": 64177845.58487042,\r\n    \"chainwork\": \"000000000000000000000000000000000000000000000558fbc2a80220ea0e44\",\r\n    \"nTx\": 2,\r\n    \"previousblockhash\": \"000000000000000bca86c2f4af44a962e63973a087f56d74fc895b4642f3f5fb\",\r\n    \"nextblockhash\": \"000000000000000119b44a12b31fb2e1d2baa9ad5bb7419428f62cc77a4685f5\",\r\n    \"strippedsize\": 598,\r\n    \"size\": 959,\r\n    \"weight\": 2753,\r\n    \"tx\": [\r\n      {\r\n        \"txid\": \"f10ed21d238ce32aaa00384af709381e2ecf1e3914604b4f0fbd817b3477017c\",\r\n        \"hash\": \"9a614c99fc94459d6a5901b4091576365def3a23e002d77e6d79fd153d533bf4\",\r\n        \"version\": 1,\r\n        \"size\": 357,\r\n        \"vsize\": 330,\r\n        \"weight\": 1320,\r\n        \"locktime\": 2524842225,\r\n        \"vin\": [\r\n          {\r\n            \"coinbase\": \"03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000\",\r\n            \"txinwitness\": [\r\n              \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n            ],\r\n            \"sequence\": 4294967295\r\n          }\r\n        ],\r\n        \"vout\": [\r\n          {\r\n            \"value\": 0.09776825,\r\n            \"n\": 0,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_DUP OP_HASH160 190f8ddccb511a66f0cfc9a33204d9287e65fdf7 OP_EQUALVERIFY OP_CHECKSIG\",\r\n              \"hex\": \"76a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac\",\r\n              \"address\": \"mhoTpa5QLRPFKsH4DdWSp1mru5BkEEWvYR\",\r\n              \"type\": \"pubkeyhash\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 1,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n              \"hex\": \"6a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 2,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n              \"hex\": \"6a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00000000,\r\n            \"n\": 3,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_RETURN 52534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n              \"hex\": \"6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n              \"type\": \"nulldata\"\r\n            }\r\n          }\r\n        ],\r\n        \"hex\": \"010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff5a03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000ffffffff04b92e9500000000001976a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac0000000000000000266a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df0000000000000000266a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c100000000000000002b6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f757301200000000000000000000000000000000000000000000000000000000000000000f1087e96\"\r\n      },\r\n      {\r\n        \"txid\": \"6fcf360bade1cae884cb0d36dfb92455b7cfdc037cfbab75f86dfbfe28f08b3e\",\r\n        \"hash\": \"891566037ba9d65bdc6bce5135d27d18607e7903979d8fa014d1f7118d618691\",\r\n        \"version\": 1,\r\n        \"size\": 521,\r\n        \"vsize\": 278,\r\n        \"weight\": 1109,\r\n        \"locktime\": 0,\r\n        \"vin\": [\r\n          {\r\n            \"txid\": \"12b153a015243816488711d4db3ee0670ee2d905855f25dbd69cb98d3a74fe86\",\r\n            \"vout\": 1,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"3045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e101\",\r\n              \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n            ],\r\n            \"prevout\": {\r\n              \"generated\": false,\r\n              \"height\": 2063323,\r\n              \"value\": 0.00544519,\r\n              \"scriptPubKey\": {\r\n                \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n                \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n                \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n                \"type\": \"witness_v0_keyhash\",\r\n                \"addresses\": [\r\n                  \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\"\r\n                ],\r\n                \"reqSigs\": 1\r\n              }\r\n            },\r\n            \"sequence\": 4294967295\r\n          },\r\n          {\r\n            \"txid\": \"e137c61946489c3eb4a90b02b71d56ef69c73f89074eeb0379c82f49725a78a0\",\r\n            \"vout\": 0,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001\",\r\n              \"0396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d457\"\r\n            ],\r\n            \"prevout\": {\r\n              \"generated\": false,\r\n              \"height\": 2034020,\r\n              \"value\": 0.01184228,\r\n              \"scriptPubKey\": {\r\n                \"asm\": \"0 4aefc0691c23cddd7ac75d9ba3714e37c802088a\",\r\n                \"hex\": \"00144aefc0691c23cddd7ac75d9ba3714e37c802088a\",\r\n                \"address\": \"tb1qfthuq6guy0xa67k8tkd6xu2wxlyqyzy2ctc4fz\",\r\n                \"type\": \"witness_v0_keyhash\",\r\n                \"addresses\": [\r\n                  \"tb1qfthuq6guy0xa67k8tkd6xu2wxlyqyzy2ctc4fz\"\r\n                ],\r\n                \"reqSigs\": 1\r\n              }\r\n            },\r\n            \"sequence\": 4294967295\r\n          },\r\n          {\r\n            \"txid\": \"0259472a025b07a90750045735ae1af3a7a1ff8341459042c36508c5a654cd7d\",\r\n            \"vout\": 1,\r\n            \"scriptSig\": {\r\n              \"asm\": \"\",\r\n              \"hex\": \"\"\r\n            },\r\n            \"txinwitness\": [\r\n              \"304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d63401\",\r\n              \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n            ],\r\n            \"prevout\": {\r\n              \"generated\": false,\r\n              \"height\": 2007043,\r\n              \"value\": 0.01253119,\r\n              \"scriptPubKey\": {\r\n                \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n                \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n                \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n                \"type\": \"witness_v0_keyhash\",\r\n                \"addresses\": [\r\n                  \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\"\r\n                ],\r\n                \"reqSigs\": 1\r\n              }\r\n            },\r\n            \"sequence\": 4294967295\r\n          }\r\n        ],\r\n        \"vout\": [\r\n          {\r\n            \"value\": 0.02920000,\r\n            \"n\": 0,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"OP_HASH160 d1c71b4df72064844eec341c86dc68cf81b9c2ec OP_EQUAL\",\r\n              \"hex\": \"a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87\",\r\n              \"address\": \"2NCNRjYqKz6j377wA328zjTqRGWBR59ygz1\",\r\n              \"type\": \"scripthash\"\r\n            }\r\n          },\r\n          {\r\n            \"value\": 0.00050666,\r\n            \"n\": 1,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n              \"type\": \"witness_v0_keyhash\"\r\n            }\r\n          }\r\n        ],\r\n        \"fee\": 0.00011200,\r\n        \"hex\": \"0100000000010386fe743a8db99cd6db255f8505d9e20e67e03edbd411874816382415a053b1120100000000ffffffffa0785a72492fc87903eb4e07893fc769ef561db7020ba9b43e9c484619c637e10000000000ffffffff7dcd54a6c50865c34290454183ffa1a7f31aae3557045007a9075b022a4759020100000000ffffffff02408e2c000000000017a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87eac5000000000000160014f2aeff3fd69c70bcff9c0709cc3ed1521868538002483045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e1012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e00248304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001210396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d4570247304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d634012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e000000000\"\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n</details>\r\n\r\n## REST\r\n\r\n```bash\r\ncurl -H \"content-type:text/plain;\" http://127.0.0.1:18332/rest/block/000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5.json\r\n```\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n```json\r\n{\r\n  \"hash\": \"000000000000001f682b188971cc1a121546be4e9d5baf22934fdc7f538288d5\",\r\n  \"confirmations\": 11,\r\n  \"height\": 2063334,\r\n  \"version\": 549453828,\r\n  \"versionHex\": \"20c00004\",\r\n  \"merkleroot\": \"3215277e48a4af9b7593c0c3e7c992752255724294c89813d6e64b585dd08783\",\r\n  \"time\": 1628150913,\r\n  \"mediantime\": 1628149483,\r\n  \"nonce\": 282709097,\r\n  \"bits\": \"1942ec00\",\r\n  \"difficulty\": 64177845.58487042,\r\n  \"chainwork\": \"000000000000000000000000000000000000000000000558fbc2a80220ea0e44\",\r\n  \"nTx\": 2,\r\n  \"previousblockhash\": \"000000000000000bca86c2f4af44a962e63973a087f56d74fc895b4642f3f5fb\",\r\n  \"nextblockhash\": \"000000000000000119b44a12b31fb2e1d2baa9ad5bb7419428f62cc77a4685f5\",\r\n  \"strippedsize\": 598,\r\n  \"size\": 959,\r\n  \"weight\": 2753,\r\n  \"tx\": [\r\n    {\r\n      \"txid\": \"f10ed21d238ce32aaa00384af709381e2ecf1e3914604b4f0fbd817b3477017c\",\r\n      \"hash\": \"9a614c99fc94459d6a5901b4091576365def3a23e002d77e6d79fd153d533bf4\",\r\n      \"version\": 1,\r\n      \"size\": 357,\r\n      \"vsize\": 330,\r\n      \"weight\": 1320,\r\n      \"locktime\": 2524842225,\r\n      \"vin\": [\r\n        {\r\n          \"coinbase\": \"03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000\",\r\n          \"txinwitness\": [\r\n            \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n          ],\r\n          \"sequence\": 4294967295\r\n        }\r\n      ],\r\n      \"vout\": [\r\n        {\r\n          \"value\": 0.09776825,\r\n          \"n\": 0,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"OP_DUP OP_HASH160 190f8ddccb511a66f0cfc9a33204d9287e65fdf7 OP_EQUALVERIFY OP_CHECKSIG\",\r\n            \"hex\": \"76a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac\",\r\n            \"address\": \"mhoTpa5QLRPFKsH4DdWSp1mru5BkEEWvYR\",\r\n            \"type\": \"pubkeyhash\"\r\n          }\r\n        },\r\n        {\r\n          \"value\": 0,\r\n          \"n\": 1,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"OP_RETURN b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n            \"hex\": \"6a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df\",\r\n            \"type\": \"nulldata\"\r\n          }\r\n        },\r\n        {\r\n          \"value\": 0,\r\n          \"n\": 2,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"OP_RETURN aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n            \"hex\": \"6a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c1\",\r\n            \"type\": \"nulldata\"\r\n          }\r\n        },\r\n        {\r\n          \"value\": 0,\r\n          \"n\": 3,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"OP_RETURN 52534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n            \"hex\": \"6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f7573\",\r\n            \"type\": \"nulldata\"\r\n          }\r\n        }\r\n      ],\r\n      \"hex\": \"010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff5a03e67b1f04819c0b612f64656275672e636f6d2ffabe6d6d5647e44d08c48adec0ee855a3e78909f300bc4a4f9b79b01167ad2d107747c3501000000000000002c6c0d02af403792e06d14248417542f120093c2020000000000ffffffff04b92e9500000000001976a914190f8ddccb511a66f0cfc9a33204d9287e65fdf788ac0000000000000000266a24b9e11b6d0e9243317b288d087de11b8e6ef80f7c2103f4de492da071b36caa92112c85df0000000000000000266a24aa21a9ed863dde47b2d6f490300e63cb1db36a41a47052956ac4eb40e17a9d8e15d694c100000000000000002b6a2952534b424c4f434b3af72ef02a50ecbfc6f9e6e464c57881bc23da25fbf5254088f7e68366001f757301200000000000000000000000000000000000000000000000000000000000000000f1087e96\"\r\n    },\r\n    {\r\n      \"txid\": \"6fcf360bade1cae884cb0d36dfb92455b7cfdc037cfbab75f86dfbfe28f08b3e\",\r\n      \"hash\": \"891566037ba9d65bdc6bce5135d27d18607e7903979d8fa014d1f7118d618691\",\r\n      \"version\": 1,\r\n      \"size\": 521,\r\n      \"vsize\": 278,\r\n      \"weight\": 1109,\r\n      \"locktime\": 0,\r\n      \"vin\": [\r\n        {\r\n          \"txid\": \"12b153a015243816488711d4db3ee0670ee2d905855f25dbd69cb98d3a74fe86\",\r\n          \"vout\": 1,\r\n          \"scriptSig\": {\r\n            \"asm\": \"\",\r\n            \"hex\": \"\"\r\n          },\r\n          \"txinwitness\": [\r\n            \"3045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e101\",\r\n            \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n          ],\r\n          \"prevout\": {\r\n            \"generated\": false,\r\n            \"height\": 2063323,\r\n            \"value\": 0.00544519,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n              \"type\": \"witness_v0_keyhash\",\r\n              \"addresses\": [\r\n                \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\"\r\n              ],\r\n              \"reqSigs\": 1\r\n            }\r\n          },\r\n          \"sequence\": 4294967295\r\n        },\r\n        {\r\n          \"txid\": \"e137c61946489c3eb4a90b02b71d56ef69c73f89074eeb0379c82f49725a78a0\",\r\n          \"vout\": 0,\r\n          \"scriptSig\": {\r\n            \"asm\": \"\",\r\n            \"hex\": \"\"\r\n          },\r\n          \"txinwitness\": [\r\n            \"304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001\",\r\n            \"0396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d457\"\r\n          ],\r\n          \"prevout\": {\r\n            \"generated\": false,\r\n            \"height\": 2034020,\r\n            \"value\": 0.01184228,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"0 4aefc0691c23cddd7ac75d9ba3714e37c802088a\",\r\n              \"hex\": \"00144aefc0691c23cddd7ac75d9ba3714e37c802088a\",\r\n              \"address\": \"tb1qfthuq6guy0xa67k8tkd6xu2wxlyqyzy2ctc4fz\",\r\n              \"type\": \"witness_v0_keyhash\",\r\n              \"addresses\": [\r\n                \"tb1qfthuq6guy0xa67k8tkd6xu2wxlyqyzy2ctc4fz\"\r\n              ],\r\n              \"reqSigs\": 1\r\n            }\r\n          },\r\n          \"sequence\": 4294967295\r\n        },\r\n        {\r\n          \"txid\": \"0259472a025b07a90750045735ae1af3a7a1ff8341459042c36508c5a654cd7d\",\r\n          \"vout\": 1,\r\n          \"scriptSig\": {\r\n            \"asm\": \"\",\r\n            \"hex\": \"\"\r\n          },\r\n          \"txinwitness\": [\r\n            \"304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d63401\",\r\n            \"02b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e0\"\r\n          ],\r\n          \"prevout\": {\r\n            \"generated\": false,\r\n            \"height\": 2007043,\r\n            \"value\": 0.01253119,\r\n            \"scriptPubKey\": {\r\n              \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n              \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n              \"type\": \"witness_v0_keyhash\",\r\n              \"addresses\": [\r\n                \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\"\r\n              ],\r\n              \"reqSigs\": 1\r\n            }\r\n          },\r\n          \"sequence\": 4294967295\r\n        }\r\n      ],\r\n      \"vout\": [\r\n        {\r\n          \"value\": 0.0292,\r\n          \"n\": 0,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"OP_HASH160 d1c71b4df72064844eec341c86dc68cf81b9c2ec OP_EQUAL\",\r\n            \"hex\": \"a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87\",\r\n            \"address\": \"2NCNRjYqKz6j377wA328zjTqRGWBR59ygz1\",\r\n            \"type\": \"scripthash\"\r\n          }\r\n        },\r\n        {\r\n          \"value\": 0.00050666,\r\n          \"n\": 1,\r\n          \"scriptPubKey\": {\r\n            \"asm\": \"0 f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n            \"hex\": \"0014f2aeff3fd69c70bcff9c0709cc3ed15218685380\",\r\n            \"address\": \"tb1q72h0707kn3cteluuquyuc0k32gvxs5uqawmvpn\",\r\n            \"type\": \"witness_v0_keyhash\"\r\n          }\r\n        }\r\n      ],\r\n      \"fee\": 0.000112,\r\n      \"hex\": \"0100000000010386fe743a8db99cd6db255f8505d9e20e67e03edbd411874816382415a053b1120100000000ffffffffa0785a72492fc87903eb4e07893fc769ef561db7020ba9b43e9c484619c637e10000000000ffffffff7dcd54a6c50865c34290454183ffa1a7f31aae3557045007a9075b022a4759020100000000ffffffff02408e2c000000000017a914d1c71b4df72064844eec341c86dc68cf81b9c2ec87eac5000000000000160014f2aeff3fd69c70bcff9c0709cc3ed1521868538002483045022100e45dd0be123e8edc98780e8fb1746cd5449d18399818052b66e8ae5fed26b0c502205e971594f3198009a436416c88f4aeea96beb07c713b71a60ffc043996da36e1012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e00248304502210083212c58e557e4b9b31bc9788bc3d08af280ea4b0376c00f54231f4fc6afd80e0220140601b13356014c924bca99ff0eba14ee200af496f9c9716bdd087023cbf1b001210396b46245502c3011f8e1b8b19aa9e8a40fff3153e225f619f57297914d93d4570247304402201d1bae75003e8986346c6df5aabe4ff820651cdc3c30038e3c2937c0393a70e30220528ac716e5e480b830e4b742c451b85cf4afbf53b20b982adf1b83423c79d634012102b90ee04fcba937c82b5a45b7f0fff4fbf6f1f4de2d152a16db94d31b40f352e000000000\"\r\n    }\r\n  ]\r\n}\r\n```\r\n</details>\r\n",
      "created_at" : "2021-08-05T09:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-893313612",
      "id" : 893313612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5841PuJM",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-05T09:51:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893313612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r683990173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683990173"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: The name `block_to_json_verbosity` seems long and it does not add any more meaning than just `tx_verbosity`, imho.",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T06:50:12Z",
      "diff_hunk" : "@@ -1017,7 +1025,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r683990173",
      "id" : 683990173,
      "line" : 1028,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mzk5MDE3Mw==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 1028,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 69,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-08T19:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683990173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r683992940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683992940"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Some `enum class`es have these nice doxygen comments: https://github.com/bitcoin/bitcoin/blob/d67330d11245b11fbdd5e2dd5343ee451186931e/src/consensus/validation.h#L63 Maybe it is worth adding here too.",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T06:55:51Z",
      "diff_hunk" : "@@ -20,6 +20,12 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r683992940",
      "id" : 683992940,
      "line" : 23,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mzk5Mjk0MA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 23,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/core_io.h",
      "position" : 4,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-06T07:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683992940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684000150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684000150"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n        # Verify that the non-coinbase tx has \"prevout\" key set\r\n```\r\nA Python dictionary is a set of key-value pairs.",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T07:10:10Z",
      "diff_hunk" : "@@ -312,6 +312,16 @@ def run_test(self):\n                             if 'coinbase' not in tx['vin'][0]}\n         assert_equal(non_coinbase_txs, set(txs))\n \n+        # Verify that the non-coinbase tx has \"prevout\" field set",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684000150",
      "id" : 684000150,
      "line" : 315,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDAwMDE1MA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 315,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/interface_rest.py",
      "position" : 4,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-06T07:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684000150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684002671"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684002671"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that `prevout` variable is used just once, it may be shorter and actually easier to read:\r\n\r\n```suggestion\r\n                    assert_equal(vin[\"prevout\"][\"generated\"], False)\r\n```",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T07:14:52Z",
      "diff_hunk" : "@@ -312,6 +312,16 @@ def run_test(self):\n                             if 'coinbase' not in tx['vin'][0]}\n         assert_equal(non_coinbase_txs, set(txs))\n \n+        # Verify that the non-coinbase tx has \"prevout\" field set\n+        for tx_obj in json_obj[\"tx\"]:\n+            for vin in tx_obj[\"vin\"]:\n+                if \"coinbase\" not in vin:\n+                    assert \"prevout\" in vin\n+                    prevout = vin[\"prevout\"]\n+                    assert_equal(prevout[\"generated\"], False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684002671",
      "id" : 684002671,
      "line" : 321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDAwMjY3MQ==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 321,
      "original_position" : 10,
      "original_start_line" : 320,
      "path" : "test/functional/interface_rest.py",
      "position" : 10,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : 320,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-06T07:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684002671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684017368"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684017368"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe this should be more like:\r\n\r\n```suggestion\r\n            total_vin = Decimal(\"0.00000000\")\r\n```",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T07:37:39Z",
      "diff_hunk" : "@@ -412,17 +412,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n-        self.log.info(\"Test getblock with verbosity 1 doesn't include fee\")\n-        block = node.getblock(blockhash, 1)\n-        assert 'fee' not in block['tx'][1]\n-\n-        self.log.info('Test getblock with verbosity 2 includes expected fee')\n-        block = node.getblock(blockhash, 2)\n-        tx = block['tx'][1]\n-        assert 'fee' in tx\n-        assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n-\n-        self.log.info(\"Test getblock with verbosity 2 still works with pruned Undo data\")\n+        def assert_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def assert_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def assert_vin_contains_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            total_vin = 0",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684017368",
      "id" : 684017368,
      "line" : 428,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDAxNzM2OA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 428,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : 28,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-06T07:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684017368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684020203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684020203"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n                // coinbase transaction (i.e. i == 0) doesn't have undo data\r\n```",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T07:42:17Z",
      "diff_hunk" : "@@ -199,30 +199,37 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n-        CBlockUndo blockUndo;\n-        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n-        for (size_t i = 0; i < block.vtx.size(); ++i) {\n-            const CTransactionRef& tx = block.vtx.at(i);\n-            // coinbase transaction (i == 0) doesn't have undo data\n-            const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n-            UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n-            txs.push_back(objTx);\n-        }\n-    } else {\n-        for (const CTransactionRef& tx : block.vtx) {\n-            txs.push_back(tx->GetHash().GetHex());\n-        }\n+\n+    switch (verbosity) {\n+        case TxVerbosity::SHOW_TXID:\n+            for (const CTransactionRef& tx : block.vtx) {\n+                txs.push_back(tx->GetHash().GetHex());\n+            }\n+            break;\n+\n+        case TxVerbosity::SHOW_DETAILS:\n+        case TxVerbosity::SHOW_DETAILS_AND_PREVOUT:\n+            CBlockUndo blockUndo;\n+            const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n+            for (size_t i = 0; i < block.vtx.size(); ++i) {\n+                const CTransactionRef& tx = block.vtx.at(i);\n+                // coinbase transaction (i == 0) doesn't have undo data",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684020203",
      "id" : 684020203,
      "line" : 225,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDAyMDIwMw==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 225,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 43,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-06T07:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684020203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684024088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684024088"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Question: There is `include_addresses` parameter which is not used here. `true` is passed instead. Is that correct or should it look like:\r\n\r\n```suggestion\r\n                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, /* includeHex */ true, include_addresses);\r\n```\r\n\r\nIt looks to me that `include_addresses = true` is deprecated actually.\r\n\r\nEdit: This PR will be most likely affected by #22650.",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-06T07:48:51Z",
      "diff_hunk" : "@@ -230,9 +230,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_add\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n-        if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+        if (have_undo) {\n+            const Coin& prev_coin = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREVOUT:\n+                    UniValue o_script_pub_key(UniValue::VOBJ);\n+                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, /* includeHex */ true, /* include_addresses */ true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684024088",
      "id" : 684024088,
      "line" : 245,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NDAyNDA4OA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 245,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 36,
      "pull_request_review_id" : 724033069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-08T12:44:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/684024088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fyquah I have attempted to address my comments above and add RPC help here: https://github.com/kiminuo/bitcoin/tree/feature/2021-08-08-verbosity-level-3-getblock-iteration-3:\r\n\r\n```bash\r\n./bitcoin-cli -testnet getblock\r\n```\r\n\r\nreports for me:\r\n\r\n<details>\r\n  <summary>Console output</summary>\r\n\r\n```\r\nerror code: -1\r\nerror message:\r\ngetblock \"blockhash\" ( verbosity )\r\n\r\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\r\nIf verbosity is 1, returns an Object with information about block <hash>.\r\nIf verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\r\nIf verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for unpruned blocks in the current best chain).\r\n\r\nArguments:\r\n1. blockhash    (string, required) The block hash\r\n2. verbosity    (numeric, optional, default=1) 0 for hex-encoded data, 1 for a json object, and 2 for json object with transaction data\r\n\r\nResult (for verbosity = 0):\r\n\"hex\"    (string) A string that is serialized, hex-encoded data for block 'hash'\r\n\r\nResult (for verbosity = 1):\r\n{                                 (json object)\r\n  \"hash\" : \"hex\",                 (string) the block hash (same as provided)\r\n  \"confirmations\" : n,            (numeric) The number of confirmations, or -1 if the block is not on the main chain\r\n  \"size\" : n,                     (numeric) The block size\r\n  \"strippedsize\" : n,             (numeric) The block size excluding witness data\r\n  \"weight\" : n,                   (numeric) The block weight as defined in BIP 141\r\n  \"height\" : n,                   (numeric) The block height or index\r\n  \"version\" : n,                  (numeric) The block version\r\n  \"versionHex\" : \"hex\",           (string) The block version formatted in hexadecimal\r\n  \"merkleroot\" : \"hex\",           (string) The merkle root\r\n  \"tx\" : [                        (json array) The transaction ids\r\n    \"hex\",                        (string) The transaction id\r\n    ...\r\n  ],\r\n  \"time\" : xxx,                   (numeric) The block time expressed in UNIX epoch time\r\n  \"mediantime\" : xxx,             (numeric) The median block time expressed in UNIX epoch time\r\n  \"nonce\" : n,                    (numeric) The nonce\r\n  \"bits\" : \"hex\",                 (string) The bits\r\n  \"difficulty\" : n,               (numeric) The difficulty\r\n  \"chainwork\" : \"hex\",            (string) Expected number of hashes required to produce the chain up to this block (in hex)\r\n  \"nTx\" : n,                      (numeric) The number of transactions in the block\r\n  \"previousblockhash\" : \"hex\",    (string, optional) The hash of the previous block (if available)\r\n  \"nextblockhash\" : \"hex\"         (string, optional) The hash of the next block (if available)\r\n}\r\n\r\nResult (for verbosity = 2):\r\n{                   (json object)\r\n  ...,              Same output as verbosity = 1\r\n  \"tx\" : [          (json array)\r\n    {               (json object)\r\n      ...,          The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \"tx\" result\r\n      \"fee\" : n     (numeric) The transaction fee in BTC, omitted if block undo data is not available\r\n    },\r\n    ...\r\n  ]\r\n}\r\n\r\nResult (for verbosity = 3):\r\n{                                        (json object)\r\n  ...,                                   Same output as verbosity = 2\r\n  \"tx\" : [                               (json array)\r\n    {                                    (json object)\r\n      \"vin\" : [                          (json array)\r\n        {                                (json object)\r\n          ...,                           The same output as verbosity = 2\r\n          \"prevout\" : {                  (json object)\r\n            \"generated\" : true|false,    (boolean) Coinbase or not\r\n            \"height\" : n,                (numeric) The height of the prevout\r\n            \"value\" : n,                 (numeric) The value in BTC\r\n            \"scriptPubKey\" : {           (json object)\r\n              \"asm\" : \"str\",             (string) The asm\r\n              \"hex\" : \"str\",             (string) The hex\r\n              \"reqSigs\" : n,             (numeric, optional) (DEPRECATED, returned only if config option -deprecatedrpc=addresses is passed) Number of required signatures\r\n              \"type\" : \"str\",            (string) The type, eg 'pubkeyhash'\r\n              \"address\" : \"str\",         (string, optional) bitcoin address (only if a well-defined address exists)\r\n              \"addresses\" : [            (json array, optional) (DEPRECATED, returned only if config option -deprecatedrpc=addresses is passed) Array of bitcoin addresses\r\n                \"str\",                   (string) bitcoin address\r\n                ...\r\n              ]\r\n            }\r\n          }\r\n        },\r\n        ...\r\n      ]\r\n    },\r\n    ...\r\n  ]\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getblock \"00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09\"\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getblock\", \"params\": [\"00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09\"]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n</details>\r\n\r\nIf you find any of the modifications useful, please include it in your PR.",
      "created_at" : "2021-08-08T20:53:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-894853784",
      "id" : 894853784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5841VmKY",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-08T20:54:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894853784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi, sorry, I haven't been able to spend much time on this :(\r\n\r\nI like the suggestion to have @kiminuo 's follow-up PR addressing the non-blocking issues. Is there anything that is blocking merge at this point?\r\n\r\n(Tagging an arbitrary maintainer: @fanquake )\r\n",
      "created_at" : "2021-08-20T00:06:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-902332088",
      "id" : 902332088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5841yH64",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-20T00:06:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902332088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6006469?v=4",
         "events_url" : "https://api.github.com/users/fyquah/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fyquah/followers",
         "following_url" : "https://api.github.com/users/fyquah/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fyquah/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fyquah",
         "id" : 6006469,
         "login" : "fyquah",
         "node_id" : "MDQ6VXNlcjYwMDY0Njk=",
         "organizations_url" : "https://api.github.com/users/fyquah/orgs",
         "received_events_url" : "https://api.github.com/users/fyquah/received_events",
         "repos_url" : "https://api.github.com/users/fyquah/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fyquah/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fyquah"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is there anything that is blocking merge at this point?\r\n\r\nThis has only been ACK'd by a single reviewer.",
      "created_at" : "2021-08-25T01:34:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-905099279",
      "id" : 905099279,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII58418rgP",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T01:34:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905099279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I would re-ACK except for https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684024088",
      "created_at" : "2021-08-25T03:20:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-905150806",
      "id" : 905150806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII584184FW",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T03:20:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905150806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fyquah I think https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684024088 is important so I would ACK once this is fixed. \r\n\r\nAlso, the work is actually done here https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-894853784 I believe (the last commit is extra and is for a follow-up PR).",
      "created_at" : "2021-08-25T07:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-905274210",
      "id" : 905274210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII58419WNi",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T07:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905274210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r695919260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695919260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since this is adding new output, I think it should probably just be a constant `false` here, actually.",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-08-25T16:29:16Z",
      "diff_hunk" : "@@ -230,9 +230,28 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_add\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n-        if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+        if (have_undo) {\n+            const Coin& prev_coin = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREVOUT:\n+                    UniValue o_script_pub_key(UniValue::VOBJ);\n+                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, /* includeHex */ true, /* include_addresses */ true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r695919260",
      "id" : 695919260,
      "in_reply_to_id" : 684024088,
      "line" : 245,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NTkxOTI2MA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 245,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 36,
      "pull_request_review_id" : 738574983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-25T16:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695919260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fyquah Could you find a moment to address https://github.com/bitcoin/bitcoin/pull/21245#discussion_r684024088?\r\n\r\n(PS: I'm willing to take over your PR to work on it if you are too busy. Anyway, it seems to me one little change is needed here, nothing time consuming.)",
      "created_at" : "2021-09-06T20:20:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-913840141",
      "id" : 913840141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5842eBgN",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-06T20:20:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/913840141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r703064174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703064174"
         }
      },
      "author_association" : "NONE",
      "body" : "Thank u",
      "commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "created_at" : "2021-09-06T20:33:55Z",
      "diff_hunk" : "@@ -1017,7 +1025,16 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#discussion_r703064174",
      "id" : 703064174,
      "in_reply_to_id" : 683990173,
      "line" : 1028,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzA2NDE3NA==",
      "original_commit_id" : "72dbe9816482d46c63168109c8745d3ec615b031",
      "original_line" : 1028,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 69,
      "pull_request_review_id" : 747416113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21245",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-06T20:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703064174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/87387449?v=4",
         "events_url" : "https://api.github.com/users/jaysonmald35/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jaysonmald35/followers",
         "following_url" : "https://api.github.com/users/jaysonmald35/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jaysonmald35/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jaysonmald35",
         "id" : 87387449,
         "login" : "jaysonmald35",
         "node_id" : "MDQ6VXNlcjg3Mzg3NDQ5",
         "organizations_url" : "https://api.github.com/users/jaysonmald35/orgs",
         "received_events_url" : "https://api.github.com/users/jaysonmald35/received_events",
         "repos_url" : "https://api.github.com/users/jaysonmald35/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jaysonmald35/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jaysonmald35/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jaysonmald35"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this for now that #22918 is open.",
      "created_at" : "2021-09-08T11:17:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21245#issuecomment-915146664",
      "id" : 915146664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21245",
      "node_id" : "IC_kwDOABII5842jAeo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-08T11:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915146664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
