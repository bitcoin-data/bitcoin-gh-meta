[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cc @achow101 @laanwj ",
      "created_at" : "2021-02-23T09:05:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-784020151",
      "id" : 784020151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NDAyMDE1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-23T09:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784020151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK! Thank you.",
      "created_at" : "2021-02-23T09:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-784020823",
      "id" : 784020823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NDAyMDgyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-23T09:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784020823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21277#discussion_r580925964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580925964"
         }
      },
      "author_association" : "NONE",
      "body" : "tprv8ZgxMBicQKsPeuVhWwi6wuMQGfPKi9Li5GtX35jVNknACgqe3CY4g5xgkfDDJcmtF7o1QnxWDRYw4H5P26PXq7sbcUkEqeR4fg3Kxp2tigg'\r\n",
      "commit_id" : "a69c3b35f8974b378a87a3e42d331bd4147e07df",
      "created_at" : "2021-02-23T10:34:02Z",
      "diff_hunk" : "@@ -50,6 +50,22 @@ def run_test(self):\n             assert item['range'] == [0, 0]\n             assert item['timestamp'] is not None\n \n+        self.log.info('Test descriptors with hardened derivations are listed in importable form.')\n+        xprv = 'tprv8ZgxMBicQKsPeuVhWwi6wuMQGfPKi9Li5GtX35jVNknACgqe3CY4g5xgkfDDJcmtF7o1QnxWDRYw4H5P26PXq7sbcUkEqeR4fg3Kxp2tigg'\n+        xpub_acc = 'tpubDCMVLhErorrAGfApiJSJzEKwqeaf2z3NrkVMxgYQjZLzMjXMBeRw2muGNYbvaekAE8rUFLftyEar4LdrG2wXyyTJQZ26zptmeTEjPTaATts'\n+        hardened_path = '/84\\'/1\\'/0\\''\n+        wallet = node.get_wallet_rpc('w2')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#discussion_r580925964",
      "id" : 580925964,
      "line" : 57,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDkyNTk2NA==",
      "original_commit_id" : "a69c3b35f8974b378a87a3e42d331bd4147e07df",
      "original_line" : 57,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listdescriptors.py",
      "position" : 8,
      "pull_request_review_id" : 596192134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T10:34:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580925964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/55734978?v=4",
         "events_url" : "https://api.github.com/users/AKZ98/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AKZ98/followers",
         "following_url" : "https://api.github.com/users/AKZ98/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AKZ98/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AKZ98",
         "id" : 55734978,
         "login" : "AKZ98",
         "node_id" : "MDQ6VXNlcjU1NzM0OTc4",
         "organizations_url" : "https://api.github.com/users/AKZ98/orgs",
         "received_events_url" : "https://api.github.com/users/AKZ98/received_events",
         "repos_url" : "https://api.github.com/users/AKZ98/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AKZ98/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AKZ98/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AKZ98"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What does it currently return here? Before/after would be nice. Maybe it's ToString that needs to get revised?\r\n\r\nWould be nice to avoid needing the wallet unlocked to simply listdescriptors...",
      "created_at" : "2021-02-24T03:33:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-784726728",
      "id" : 784726728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NDcyNjcyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-24T03:33:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784726728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> What does it currently return here? Before/after would be nice. Maybe it's ToString that needs to get revised?\r\n\r\nUpdated description to show before/after. `ToString()` is fine, it's just `ToNormalizedString()` is better in this case.\r\n\r\n> Would be nice to avoid needing the wallet unlocked to simply listdescriptors...\r\n\r\nIn general I agree, but to derive normalised descriptors for hardened derivations we need private keys.\r\n\r\n**UPD**: Apparently, I didn't save the updated description at time of posting. Fixed now",
      "created_at" : "2021-02-24T07:03:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-784843336",
      "id" : 784843336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NDg0MzMzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T08:58:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784843336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'd agree that needing to have the wallet unlocked is a drawback.\r\n\r\nBut the thing is that the current output is not really useful for anything (I think). You could say it's not even a valid descriptor as it does a hardened dirivation from a `xpub`.\r\n\r\nE.g. like\r\n```\r\n    \"desc\": \"sh(wpkh(tpubD6NzVbkrYhZ4Yj6Abshu22tUGYKVK6xcazXuGmxRkLTqrMfpc6u7Bpr31wmqe8kJc7Y5ZCvKdvVRtsZhfB5hdLpUndFFc5mXat72euorqFE/49'/1'/0'/1/*))#g7vg94cx\",\r\n```\r\n\r\n> In general I agree, but to derive normalised descriptors for hardened derivations we need private keys.\r\n\r\nHmm. It might be an idea to store these at generation time.",
      "created_at" : "2021-02-25T08:30:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-785716418",
      "id" : 785716418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NTcxNjQxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T08:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785716418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Hmm. It might be an idea to store these at generation time.\r\n\r\nIt's totally doable, but doesn't it violate users security assumptions? If I have my master private key encrypted at rest I would be unpleasantly surprised to find child private keys in memory.",
      "created_at" : "2021-02-25T09:03:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-785736394",
      "id" : 785736394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NTczNjM5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T09:03:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785736394",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If I have my master private key encrypted at rest I would be unpleasantly surprised to find child private keys in memory.\r\n\r\nI mean the public key, not the private key. This is all about public derivation right? I'm certainly not suggesting private keys should be stored unencrypted.",
      "created_at" : "2021-02-25T16:08:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-786015517",
      "id" : 786015517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NjAxNTUxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T16:09:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786015517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The xpub cache should actually allow us to generate the normalized form without needing to unlock the wallet. After all, that is how we are able to refresh the address pool when the wallet is locked. However modifying the normalization function to do that may be an invasive change. I can look into doing that. Regardless, doing that would not materially effect this PR and I think it can be done in a followup.\r\n\r\nACK a69c3b35f8974b378a87a3e42d331bd4147e07df",
      "created_at" : "2021-02-25T17:58:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21277#issuecomment-786090997",
      "id" : 786090997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NjA5MDk5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T17:58:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786090997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
