[
   {
      "author_association" : "MEMBER",
      "body" : "I don't intend to squash. They're all independent improvements.",
      "created_at" : "2021-02-19T20:12:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-782314297",
      "id" : 782314297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjMxNDI5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-19T20:12:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782314297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21329 (descriptor wallet: Cache last hardened xpub and use in normalized descriptors by achow101)\n* #16116 (Avoid unnecessary signing provider copies on descriptor expansion by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-02-20T05:05:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-782561567",
      "id" : 782561567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjU2MTU2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T14:15:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782561567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592350156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592350156"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2: I'm a bit confused what this new check is doing",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-11T13:15:33Z",
      "diff_hunk" : "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592350156",
      "id" : 592350156,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM1MDE1Ng==",
      "original_commit_id" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
      "original_line" : 594,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 609741358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592350156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592352945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592352945"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2: why is `m_subdescriptor_args` length 1 a special case?",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-11T13:19:35Z",
      "diff_hunk" : "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;\n+            subscripts = Cat(std::move(subscripts), std::move(outscripts));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));\n \n         std::vector<CPubKey> pubkeys;\n         pubkeys.reserve(entries.size());\n         for (auto& entry : entries) {\n             pubkeys.push_back(entry.first);\n             out.origins.emplace(entry.first.GetID(), std::make_pair<CPubKey, KeyOriginInfo>(CPubKey(entry.first), std::move(entry.second)));\n         }\n-        if (m_subdescriptor_arg) {\n+        if (m_subdescriptor_args.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592352945",
      "id" : 592352945,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjM1Mjk0NQ==",
      "original_commit_id" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
      "original_line" : 605,
      "original_position" : 104,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 609741358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592352945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Partial ACK. Same questions as Sjors.",
      "created_at" : "2021-03-12T01:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797165938",
      "id" : 797165938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzE2NTkzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T01:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797165938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 @Sjors Good that you raise that point.\r\n\r\nThe original reason why this behavior of MakeScripts-is-invoked-once-per-evaluation existed was to support things like `combo()`, where a single evaluation at a single index results in multiple scriptPubKeys. This was particularly complicated to combine with descriptors that support multiple subdescriptors (like `tr()`) - there isn't really a straightforward way of doing that (cartesian product? requiring the same number of evaluations from each and combining pairwise? ...?). I didn't want to deal with that, so I added the restriction that this once-per-evaluation only existed for descriptors with 1 subdescriptor.\r\n\r\nThis is all silly, because we don't ever need it. `combo()` is the only descriptor that produces multiple output scripts, and it is only permitted at the top level - so it's not even possible to have it as a subdescriptor. I've just removed support for multiple-outputscripts-from-subscriptor entirely in a separate commit now. Bye.",
      "created_at" : "2021-03-12T03:22:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797207524",
      "id" : 797207524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzIwNzUyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T03:22:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797207524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Gone.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-12T03:22:28Z",
      "diff_hunk" : "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;\n+            subscripts = Cat(std::move(subscripts), std::move(outscripts));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));\n \n         std::vector<CPubKey> pubkeys;\n         pubkeys.reserve(entries.size());\n         for (auto& entry : entries) {\n             pubkeys.push_back(entry.first);\n             out.origins.emplace(entry.first.GetID(), std::make_pair<CPubKey, KeyOriginInfo>(CPubKey(entry.first), std::move(entry.second)));\n         }\n-        if (m_subdescriptor_arg) {\n+        if (m_subdescriptor_args.size() == 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883824",
      "id" : 592883824,
      "in_reply_to_id" : 592352945,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg4MzgyNA==",
      "original_commit_id" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
      "original_line" : 605,
      "original_position" : 104,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 610421725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Gone.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-12T03:22:36Z",
      "diff_hunk" : "@@ -576,33 +581,37 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            if (outscripts.size() != 1 && m_subdescriptor_args.size() != 1) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r592883851",
      "id" : 592883851,
      "in_reply_to_id" : 592350156,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg4Mzg1MQ==",
      "original_commit_id" : "5a044ac64f3f51dc89a772f512d403c7baa12ae2",
      "original_line" : 594,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 610421768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592883851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-12T07:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797300499",
      "id" : 797300499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzMwMDQ5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T07:41:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797300499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks, I'll review again after rebase.",
      "created_at" : "2021-03-12T08:28:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797323709",
      "id" : 797323709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzMyMzcwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T08:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797323709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2021-03-12T08:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797331256",
      "id" : 797331256,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzMzMTI1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T08:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797331256",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 05c633e\r\n\r\nConceptually I find it marginally simpler if you reverse the first and second commit, so the first step is to remove the unused loop:\r\n\r\n```cpp\r\n        if (m_subdescriptor_arg) {\r\n            const auto& subscript = subscripts[0];\r\n            out.scripts.emplace(CScriptID(subscript), subscript);\r\n            output_scripts = MakeScripts(pubkeys, &subscript, out);\r\n        } else {\r\n            output_scripts = MakeScripts(pubkeys, nullptr, out);\r\n        }\r\n ```\r\n \r\n And then the second commit drops `out.scripts.emplace` and moves that into `MakeScripts` (which is also where `combo` does this).\r\n \r\nTo sanity check my understanding: `key_exp_index` is currently used for multisig descriptors to create a seperate cache for each participating key. With taproot, you might have a root key (`key_exp_index == 0`), one branch with a key `key_exp_index == 2`, and another branch with a 3 key multisig (`key_exp_index  3,4,5`). Is that how it works?",
      "created_at" : "2021-03-12T14:02:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797509162",
      "id" : 797509162,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzUwOTE2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T14:03:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797509162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 05c633e0efaf300aa3353303f77c0a622647a588",
      "created_at" : "2021-03-12T18:00:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797659235",
      "id" : 797659235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzY1OTIzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T18:00:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797659235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors \r\n\r\n> Conceptually I find it marginally simpler if you reverse the first and second commit\r\n\r\nOk, done.\r\n\r\n> With taproot, you might have a root key (`key_exp_index == 0`), one branch with a key `key_exp_index == 2`, and another branch with a 3 key multisig (`key_exp_index  3,4,5`). Is that how it works?\r\n\r\nI think you skipped the 1, but otherwise: exactly.",
      "created_at" : "2021-03-12T18:58:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-797686035",
      "id" : 797686035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzY4NjAzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T18:58:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797686035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 35cbef1c483ac9905331f8035d32600e105baab4\r\n\r\nOnly change was commit reordering.",
      "created_at" : "2021-03-15T19:41:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-799700761",
      "id" : 799700761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5OTcwMDc2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-15T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799700761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r595022079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/595022079"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`warning: unused member function 'DescriptorImpl'`",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-16T10:04:38Z",
      "diff_hunk" : "@@ -480,34 +480,36 @@ class DescriptorImpl : public Descriptor\n     const std::string m_name;\n \n protected:\n-    //! The sub-descriptor argument (nullptr for everything but SH and WSH).\n+    //! The sub-descriptor arguments (empty for everything but SH and WSH).\n     //! In doc/descriptors.m this is referred to as SCRIPT expressions sh(SCRIPT)\n     //! and wsh(SCRIPT), and distinct from KEY expressions and ADDR expressions.\n-    const std::unique_ptr<DescriptorImpl> m_subdescriptor_arg;\n+    //! Subdescriptors can only ever generate a single script.\n+    const std::vector<std::unique_ptr<DescriptorImpl>> m_subdescriptor_args;\n \n     //! Return a serialization of anything except pubkey and script arguments, to be prepended to those.\n     virtual std::string ToStringExtra() const { return \"\"; }\n \n     /** A helper function to construct the scripts for this descriptor.\n      *\n-     *  This function is invoked once for every CScript produced by evaluating\n-     *  m_subdescriptor_arg, or just once in case m_subdescriptor_arg is nullptr.\n-\n+     *  This function is invoked once by ExpandHelper.\n+     *\n      *  @param pubkeys The evaluations of the m_pubkey_args field.\n-     *  @param script The evaluation of m_subdescriptor_arg (or nullptr when m_subdescriptor_arg is nullptr).\n+     *  @param script The evaluations of m_subdescriptor_args (one for each m_subdescriptor_args element).\n      *  @param out A FlatSigningProvider to put scripts or public keys in that are necessary to the solver.\n-     *             The script arguments to this function are automatically added, as is the origin info of the provided pubkeys.\n+     *             The origin info of the provided pubkeys is automatically added.\n      *  @return A vector with scriptPubKeys for this descriptor.\n      */\n-    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, const CScript* script, FlatSigningProvider& out) const = 0;\n+    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, Span<const CScript> scripts, FlatSigningProvider& out) const = 0;\n \n public:\n-    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_arg(std::move(script)) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args() {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(Vector(std::move(script))) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::vector<std::unique_ptr<DescriptorImpl>> scripts, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(std::move(scripts)) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r595022079",
      "id" : 595022079,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NTAyMjA3OQ==",
      "original_commit_id" : "35cbef1c483ac9905331f8035d32600e105baab4",
      "original_line" : 508,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 613054424,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/595022079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-17T12:44:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-801052303",
      "id" : 801052303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMTA1MjMwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-17T12:44:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801052303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600265689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600265689"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Q: why do we need to move the first argument?",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-24T08:29:34Z",
      "diff_hunk" : "@@ -577,30 +579,29 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            assert(subscripts.size() == 1);\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            assert(outscripts.size() == 1);\n+            subscripts.emplace_back(std::move(outscripts[0]));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600265689",
      "id" : 600265689,
      "line" : 603,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI2NTY4OQ==",
      "original_commit_id" : "6c114a10103e675120d54868d2eac571662a71da",
      "original_line" : 603,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 114,
      "pull_request_review_id" : 619439488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600265689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600267004"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600267004"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think one instance of `FlatSigningProvider`  is enough, same as you do in `ExpandHelper`",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-24T08:31:39Z",
      "diff_hunk" : "@@ -621,9 +622,9 @@ class DescriptorImpl : public Descriptor\n             if (!p->GetPrivKey(pos, provider, key)) continue;\n             out.keys.emplace(key.GetPubKey().GetID(), key);\n         }\n-        if (m_subdescriptor_arg) {\n+        for (const auto& arg : m_subdescriptor_args) {\n             FlatSigningProvider subprovider;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600267004",
      "id" : 600267004,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI2NzAwNA==",
      "original_commit_id" : "6c114a10103e675120d54868d2eac571662a71da",
      "original_line" : 626,
      "original_position" : 116,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 619439488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600267004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600283226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600283226"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I find it clearer If we keep placing of the first comma inside `ToStringHelper` and do not pass `pos` into `ToStringSubScriptHelper`. Something like:\r\n\r\n```cpp\r\nstd::string subscript;\r\nif (!ToStringSubScriptHelper(arg, subscript, priv, normalized)) return false;\r\nif (pos && subscript.size()) ret += \",\";\r\nout = std::move(ret) + std::move(subscript) + \")\";\r\n```",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-24T08:55:37Z",
      "diff_hunk" : "@@ -543,12 +554,7 @@ class DescriptorImpl : public Descriptor\n             }\n             ret += std::move(tmp);\n         }\n-        for (const auto& scriptarg : m_subdescriptor_args) {\n-            if (pos++) ret += \",\";\n-            std::string tmp;\n-            if (!scriptarg->ToStringHelper(arg, tmp, priv, normalized)) return false;\n-            ret += std::move(tmp);\n-        }\n+        if (!ToStringSubScriptHelper(arg, ret, priv, normalized, pos)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r600283226",
      "id" : 600283226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI4MzIyNg==",
      "original_commit_id" : "c612a1d3fc9f886a5b8406e95dd2b350af261872",
      "original_line" : 557,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 619439488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600283226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r601152614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601152614"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It doesn't matter now apparently, as Merge takes const lvalue references only. But a more efficient variant could be added that takes advantage of inputs that aren't needed anymore.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-25T07:39:29Z",
      "diff_hunk" : "@@ -577,30 +579,29 @@ class DescriptorImpl : public Descriptor\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n+        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n             entries.emplace_back();\n             if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n         }\n         std::vector<CScript> subscripts;\n-        if (m_subdescriptor_arg) {\n-            FlatSigningProvider subprovider;\n-            if (!m_subdescriptor_arg->ExpandHelper(pos, arg, read_cache, subscripts, subprovider, write_cache)) return false;\n-            assert(subscripts.size() == 1);\n-            out = Merge(out, subprovider);\n+        FlatSigningProvider subprovider;\n+        for (const auto& subarg : m_subdescriptor_args) {\n+            std::vector<CScript> outscripts;\n+            if (!subarg->ExpandHelper(pos, arg, read_cache, outscripts, subprovider, write_cache)) return false;\n+            assert(outscripts.size() == 1);\n+            subscripts.emplace_back(std::move(outscripts[0]));\n         }\n+        out = Merge(std::move(out), std::move(subprovider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r601152614",
      "id" : 601152614,
      "in_reply_to_id" : 600265689,
      "line" : 603,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTE1MjYxNA==",
      "original_commit_id" : "6c114a10103e675120d54868d2eac571662a71da",
      "original_line" : 603,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 114,
      "pull_request_review_id" : 620799471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601152614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714367"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-30T01:17:40Z",
      "diff_hunk" : "@@ -543,12 +554,7 @@ class DescriptorImpl : public Descriptor\n             }\n             ret += std::move(tmp);\n         }\n-        for (const auto& scriptarg : m_subdescriptor_args) {\n-            if (pos++) ret += \",\";\n-            std::string tmp;\n-            if (!scriptarg->ToStringHelper(arg, tmp, priv, normalized)) return false;\n-            ret += std::move(tmp);\n-        }\n+        if (!ToStringSubScriptHelper(arg, ret, priv, normalized, pos)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714367",
      "id" : 603714367,
      "in_reply_to_id" : 600283226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDM2Nw==",
      "original_commit_id" : "c612a1d3fc9f886a5b8406e95dd2b350af261872",
      "original_line" : 557,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 623767837,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714446"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714446"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done. In fact, I don't need any at all.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-30T01:17:52Z",
      "diff_hunk" : "@@ -621,9 +622,9 @@ class DescriptorImpl : public Descriptor\n             if (!p->GetPrivKey(pos, provider, key)) continue;\n             out.keys.emplace(key.GetPubKey().GetID(), key);\n         }\n-        if (m_subdescriptor_arg) {\n+        for (const auto& arg : m_subdescriptor_args) {\n             FlatSigningProvider subprovider;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714446",
      "id" : 603714446,
      "in_reply_to_id" : 600267004,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDQ0Ng==",
      "original_commit_id" : "6c114a10103e675120d54868d2eac571662a71da",
      "original_line" : 626,
      "original_position" : 116,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 623767910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714472"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-03-30T01:18:01Z",
      "diff_hunk" : "@@ -480,34 +480,36 @@ class DescriptorImpl : public Descriptor\n     const std::string m_name;\n \n protected:\n-    //! The sub-descriptor argument (nullptr for everything but SH and WSH).\n+    //! The sub-descriptor arguments (empty for everything but SH and WSH).\n     //! In doc/descriptors.m this is referred to as SCRIPT expressions sh(SCRIPT)\n     //! and wsh(SCRIPT), and distinct from KEY expressions and ADDR expressions.\n-    const std::unique_ptr<DescriptorImpl> m_subdescriptor_arg;\n+    //! Subdescriptors can only ever generate a single script.\n+    const std::vector<std::unique_ptr<DescriptorImpl>> m_subdescriptor_args;\n \n     //! Return a serialization of anything except pubkey and script arguments, to be prepended to those.\n     virtual std::string ToStringExtra() const { return \"\"; }\n \n     /** A helper function to construct the scripts for this descriptor.\n      *\n-     *  This function is invoked once for every CScript produced by evaluating\n-     *  m_subdescriptor_arg, or just once in case m_subdescriptor_arg is nullptr.\n-\n+     *  This function is invoked once by ExpandHelper.\n+     *\n      *  @param pubkeys The evaluations of the m_pubkey_args field.\n-     *  @param script The evaluation of m_subdescriptor_arg (or nullptr when m_subdescriptor_arg is nullptr).\n+     *  @param script The evaluations of m_subdescriptor_args (one for each m_subdescriptor_args element).\n      *  @param out A FlatSigningProvider to put scripts or public keys in that are necessary to the solver.\n-     *             The script arguments to this function are automatically added, as is the origin info of the provided pubkeys.\n+     *             The origin info of the provided pubkeys is automatically added.\n      *  @return A vector with scriptPubKeys for this descriptor.\n      */\n-    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, const CScript* script, FlatSigningProvider& out) const = 0;\n+    virtual std::vector<CScript> MakeScripts(const std::vector<CPubKey>& pubkeys, Span<const CScript> scripts, FlatSigningProvider& out) const = 0;\n \n public:\n-    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_arg(std::move(script)) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args() {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::unique_ptr<DescriptorImpl> script, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(Vector(std::move(script))) {}\n+    DescriptorImpl(std::vector<std::unique_ptr<PubkeyProvider>> pubkeys, std::vector<std::unique_ptr<DescriptorImpl>> scripts, const std::string& name) : m_pubkey_args(std::move(pubkeys)), m_name(name), m_subdescriptor_args(std::move(scripts)) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r603714472",
      "id" : 603714472,
      "in_reply_to_id" : 595022079,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxNDQ3Mg==",
      "original_commit_id" : "35cbef1c483ac9905331f8035d32600e105baab4",
      "original_line" : 508,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 623767950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T01:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603714472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, and addressed all comments I think.",
      "created_at" : "2021-03-30T01:19:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-809832062",
      "id" : 809832062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTgzMjA2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T01:19:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809832062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK 0b188b7\r\nThe only changes are addressing review comments above. 1) removing unused constructor 2) removing redundant signing provided instance creation 3) simplifying `ToStringSubScriptHelper` signature",
      "created_at" : "2021-03-30T07:06:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-809970145",
      "id" : 809970145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTk3MDE0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T07:06:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809970145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 0b188b7",
      "created_at" : "2021-04-01T11:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-811856656",
      "id" : 811856656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTg1NjY1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-01T11:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811856656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-04-09T19:46:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-816928671",
      "id" : 816928671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNjkyODY3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-09T19:46:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816928671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@instagibbs what do you think?",
      "created_at" : "2021-04-16T08:50:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-821026070",
      "id" : 821026070,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTAyNjA3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T08:50:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821026070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems like 3 ACKs is enough? not familiar enough with this code anymore to give a proper ACK",
      "created_at" : "2021-04-18T00:32:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#issuecomment-821908342",
      "id" : 821908342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21238",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTkwODM0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T00:32:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821908342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r616265571"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616265571"
         }
      },
      "author_association" : "NONE",
      "body" : "why is there no new test for this and for `addr()`?",
      "commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "created_at" : "2021-04-20T00:40:29Z",
      "diff_hunk" : "@@ -1045,6 +1066,9 @@ std::unique_ptr<DescriptorImpl> ParseScript(uint32_t key_exp_index, Span<const c\n         }\n         auto bytes = ParseHex(str);\n         return std::make_unique<RawDescriptor>(CScript(bytes.begin(), bytes.end()));\n+    } else if (Func(\"raw\", expr)) {\n+        error = \"Can only have raw() at top level\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21238#discussion_r616265571",
      "id" : 616265571,
      "line" : 1070,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjI2NTU3MQ==",
      "original_commit_id" : "0b188b751f970027c52729e0c223cc9257669322",
      "original_line" : 1070,
      "original_position" : 447,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 447,
      "pull_request_review_id" : 639412981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21238",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T00:40:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616265571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/284023?v=4",
         "events_url" : "https://api.github.com/users/ysangkok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ysangkok/followers",
         "following_url" : "https://api.github.com/users/ysangkok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ysangkok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ysangkok",
         "id" : 284023,
         "login" : "ysangkok",
         "node_id" : "MDQ6VXNlcjI4NDAyMw==",
         "organizations_url" : "https://api.github.com/users/ysangkok/orgs",
         "received_events_url" : "https://api.github.com/users/ysangkok/received_events",
         "repos_url" : "https://api.github.com/users/ysangkok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ysangkok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ysangkok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ysangkok"
      }
   }
]
