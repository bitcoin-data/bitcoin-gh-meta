[
   {
      "author_association" : "MEMBER",
      "body" : "I'll update the remaining fuzz targets once this has one or two Concept ACKs",
      "created_at" : "2021-01-02T11:54:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753464719",
      "id" : 753464719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ2NDcxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T11:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753464719",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'll update the remaining fuzz targets once this has one or two Concept ACKs\r\n\r\nConcept ACK.\r\n\r\n\r\n\r\n>     * It makes it hard to update a target, because updating all case labels is trivial, but tedious to review and causes merge conflicts\r\n\r\nIt will be tedious to review only this pull :)",
      "created_at" : "2021-01-02T12:01:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753465289",
      "id" : 753465289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ2NTI4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T12:01:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753465289",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It will be tedious to review only this pull :)\r\n\r\nThis is only *removing* case labels, so at least that part should be trivial to review.",
      "created_at" : "2021-01-02T15:30:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753486959",
      "id" : 753486959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ4Njk1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T15:30:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753486959",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK!\r\n\r\n> It will be tedious to review only this pull :)\r\n\r\nWith ignored whitespace (`-w` or `--ignore-all-space`) the diff actually looks quite straight-forward to review.",
      "created_at" : "2021-01-02T15:54:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753489757",
      "id" : 753489757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ4OTc1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T15:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753489757",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20729 (p2p: standardize on outbound-{full, block}-relay connection type naming by jonatack)\n* #20715 (util: Add ArgsManager::GetCommand() and use it in bitcoin-wallet by MarcoFalke)\n* #19825 (rpc: simpler setban and new ban manipulation commands by dhruv)\n* #19713 (tests: fix -fsanitize=integer complaints by Crypt-iQ)\n* #16545 (refactor: Implement missing error checking for ArgsManager flags by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-01-02T21:22:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753531297",
      "id" : 753531297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzUzMTI5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-13T19:40:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753531297",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nWhere a case statement previously had a `return;` this will need to have an `abort_loop = true;` escape instead, which seems like no big deal.\r\n\r\nI'm not a fan of \"Fuzz input format might already change implicitly on every commit, so this isn't something worthwhile to pursue.\" -- changing the fuzz input format invalidates the code coverage of the qa assets corpus, so it seems like we should try to minimise fuzz input format changes to me. But I think this makes dealing with that easier anyway: to have it behave stably when cases are added or removed I think you could do something like:\r\n\r\n```c++\r\n    const size_t call_index{ConsumeIntegral<size_t>}();\r\n    if (call_index < size) return callables[call_index]();\r\n```\r\n\r\nand have an `auto noop = [] () deleted_case { return; }` place holder for deleting cases that aren't at the end?\r\n\r\nI was kind of expecting to see a recursive template function here -- something like:\r\n\r\n```c++\r\n    template<typename... Cases>\r\n    void CallOneOf(size_t selection, Cases... cases);\r\n    template<typename T, typename... Cases>\r\n    void CallOneOf(size_t selection, T case0, Cases... cases)\r\n    {\r\n        if (selection == 0) return case0();\r\n        else return CallOneOf(selection - 1, cases...);\r\n    }\r\n    template<>\r\n    void CallOneOf(size_t selection) { return; }\r\n\r\n    template<typename... Cases>\r\n    void CallOneOf(FDP& fdp, Cases... cases) {\r\n        size_t call_index = fdp.ConsumeIntegral<size_t>();\r\n        return CallOneOf(call_index, cases...);\r\n    }\r\n```\r\n\r\nNot sure the `selection - 1` stuff would get optimised into a `switch` equivalent though, but it might be worth checking if it's any better than the `std::function` indirection.",
      "created_at" : "2021-01-03T01:33:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753553841",
      "id" : 753553841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzU1Mzg0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T01:33:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753553841",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Coverage:\r\n\r\n* Current: https://marcofalke.github.io/btc_cov/fuzz.coverage/index.html\r\n* This: https://drahtbot.space/host_reports/DrahtBot/reports/coverage_fuzz/monotree/fa12a5d69bca21e5/fuzz.coverage/index.html",
      "created_at" : "2021-01-03T07:50:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753581492",
      "id" : 753581492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzU4MTQ5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T12:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753581492",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Where a case statement previously had a return; this will need to have an abort_loop = true; escape instead, which seems like no big deal.\r\n\r\nGood point, but a `return` at that scope generally means that fuzzing will end for the current input. This is very rare and the only `return` I could find inside a switch was a `return` inside a `CConnman::ForEach` lambda, which obviously needs to be kept as is. Conversely, and more importantly for review here, any `break` inside a switch that isn't inside another loop or switch will need to be replace by `return`.\r\n\r\n\r\n> I'm not a fan of \"Fuzz input format might already change implicitly on every commit, so this isn't something worthwhile to pursue.\" -- changing the fuzz input format invalidates the code coverage of the qa assets corpus, so it seems like we should try to minimise fuzz input format changes to me. But I think this makes dealing with that easier anyway: to have it behave stably when cases are added or removed I think you could do something like:\r\n\r\nOk, I see that my pull doesn't solve the question whether seeds should be invalidated or not. Maybe it is best to answer this in a separate discussion. Before it was possible to invalidate or not invalidate seeds on a case-by-case basis and with this pull, it is possible, too.\r\n\r\nEdit: Let's discuss this in #20837 .\r\n\r\n\r\n> I was kind of expecting to see a recursive template function here -- something like:\r\n\r\n\r\n~~The recursive template would invalidate all seeds, no? This pull is tagged with \"refactoring\", so the goal is that behavior doesn't change.~~ Edit. No it doesn't change the format if done correctly.",
      "created_at" : "2021-01-03T08:17:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753583717",
      "id" : 753583717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzU4MzcxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T11:42:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753583717",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removed `std::function` indirection as requested by @ajtowns . Thanks!",
      "created_at" : "2021-01-03T12:10:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753607583",
      "id" : 753607583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYwNzU4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T12:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753607583",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r550997564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550997564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note: I couldn't figure out how to make `i` evaluate at compile time, but I presume that `-O1` already flattens this out.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-03T12:11:25Z",
      "diff_hunk" : "@@ -35,6 +35,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r550997564",
      "id" : 550997564,
      "line" : 46,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk5NzU2NA==",
      "original_commit_id" : "fa12a5d69bca21e5d0c0c205e709136ce8fa7abc",
      "original_line" : 46,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 11,
      "pull_request_review_id" : 560691206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550997564",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Strong concept ACK. Thanks for doing this! Merge conflicts in the fuzz files seem to be very common, so eliminating the majority of them in this way would be a big win.",
      "created_at" : "2021-01-03T12:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753608158",
      "id" : 753608158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYwODE1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T12:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753608158",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551009515"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551009515"
         }
      },
      "author_association" : "MEMBER",
      "body" : "turns out `-O1` isn't enough for clang, but `-O2` seems to do it: https://godbolt.org/z/Pz1YGv",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-03T13:58:46Z",
      "diff_hunk" : "@@ -35,6 +35,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551009515",
      "id" : 551009515,
      "in_reply_to_id" : 550997564,
      "line" : 46,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTAwOTUxNQ==",
      "original_commit_id" : "fa12a5d69bca21e5d0c0c205e709136ce8fa7abc",
      "original_line" : 46,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 11,
      "pull_request_review_id" : 560698787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551009515",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551073150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551073150"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can evaluate `i` at compile time with more recursive templates:\r\n\r\n```c++\r\ntemplate <size_t i>\r\ninline void CallNthOf(size_t n) { }\r\n\r\ntemplate <size_t i, typename Callable, typename... Callables>\r\ninline void CallNthOf(size_t n, Callable callable, Callables... callables)\r\n{\r\n    switch(n) {\r\n    case i:\r\n        callable();\r\n        break;\r\n    }\r\n    CallNthOf<i+1>(n, callables...);\r\n}\r\n```\r\n\r\nand then do `return CallNthOf<0>(call_index, callables...)`. But it looks to me like `clang -O1` doesn't even do inlining, so doesn't seem like there's any reason to poke at this further?\r\n\r\nVery impressed that you got it equivalent to a switch though!!\r\n\r\n(EDIT: switch is cooler than if :)",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-04T00:11:34Z",
      "diff_hunk" : "@@ -35,6 +35,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551073150",
      "id" : 551073150,
      "in_reply_to_id" : 550997564,
      "line" : 46,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA3MzE1MA==",
      "original_commit_id" : "fa12a5d69bca21e5d0c0c205e709136ce8fa7abc",
      "original_line" : 46,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 11,
      "pull_request_review_id" : 560736693,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551073150",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For a second I thought you were adding Call of Duty into bitcoin. This is a great idea. Concept ACK.",
      "created_at" : "2021-01-04T10:50:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-753903963",
      "id" : 753903963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzkwMzk2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-04T10:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753903963",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551250685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551250685"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Closing discussion for now because there is nothing left to do right now",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-04T11:03:50Z",
      "diff_hunk" : "@@ -35,6 +35,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r551250685",
      "id" : 551250685,
      "in_reply_to_id" : 550997564,
      "line" : 46,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI1MDY4NQ==",
      "original_commit_id" : "fa12a5d69bca21e5d0c0c205e709136ce8fa7abc",
      "original_line" : 46,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 11,
      "pull_request_review_id" : 560945644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551250685",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is much more elegant! Concept/quick skim code review ACK.",
      "created_at" : "2021-01-07T15:11:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-756175339",
      "id" : 756175339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NjE3NTMzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-07T15:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/756175339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-07T17:11:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-756251945",
      "id" : 756251945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NjI1MTk0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-07T17:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/756251945",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK: much better! Thanks!\r\n\r\nWill review. ",
      "created_at" : "2021-01-10T20:52:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-757542269",
      "id" : 757542269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NzU0MjI2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-10T20:52:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757542269",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554922096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554922096"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No need for an explicit `return` statement if the return type is void:\r\n\r\n```suggestion\r\n    ((i++ == call_index ? callables() : void()), ...);\r\n```\r\n\r\nI think that's clearer since you're not actually returning anything from the fold expression.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:42:21Z",
      "diff_hunk" : "@@ -36,6 +36,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};\n+    return ((i++ == call_index ? callables() : void()), ...);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554922096",
      "id" : 554922096,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMjA5Ng==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 47,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 12,
      "pull_request_review_id" : 565190908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554922096",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554924365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554924365"
         }
      },
      "author_association" : "MEMBER",
      "body" : "TIL.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:46:09Z",
      "diff_hunk" : "@@ -36,6 +36,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};\n+    return ((i++ == call_index ? callables() : void()), ...);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554924365",
      "id" : 554924365,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyNDM2NQ==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 47,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 12,
      "pull_request_review_id" : 565193857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:48:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554924365",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554925009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554925009"
         }
      },
      "author_association" : "MEMBER",
      "body" : "?",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:47:13Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554925009",
      "id" : 554925009,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyNTAwOQ==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 54,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 62,
      "pull_request_review_id" : 565190908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554925009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554925066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554925066"
         }
      },
      "author_association" : "MEMBER",
      "body" : "?",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:47:19Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},\n+                [&] {\n+                    ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    banmap_t banmap;\n+                    ban_man.GetBanned(banmap);\n+                },\n+                [&] {\n+                    ban_man.DumpBanlist();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554925066",
      "id" : 554925066,
      "line" : 74,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyNTA2Ng==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 74,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 82,
      "pull_request_review_id" : 565190908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554925066",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554930558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554930558"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is needed to preserve the \"refactoring\" nature of this pull request. Whether to remove or keep the noop should be discussed in #20837 .",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:56:30Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554930558",
      "id" : 554930558,
      "in_reply_to_id" : 554925009,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzMDU1OA==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 54,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 62,
      "pull_request_review_id" : 565201851,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554930558",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554930606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554930606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is needed to preserve the \"refactoring\" nature of this pull request. Whether to remove or keep the noop should be discussed in #20837 .",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T09:56:34Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},\n+                [&] {\n+                    ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    banmap_t banmap;\n+                    ban_man.GetBanned(banmap);\n+                },\n+                [&] {\n+                    ban_man.DumpBanlist();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554930606",
      "id" : 554930606,
      "in_reply_to_id" : 554925066,
      "line" : 74,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzMDYwNg==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 74,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 82,
      "pull_request_review_id" : 565201924,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T09:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554930606",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554932697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554932697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wanted to keep it to enforce that only void functions can be called. Though, the ternary operator already enforces that.\r\n\r\nIn the future someone might want to extend this for non-void functions, e.g. a `ConstructOneOf(...)` could create and return a type constructed according to one of several construction rules).\r\n\r\nWill leave as-is for now. Happy to remove if I need to force-push.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T10:00:00Z",
      "diff_hunk" : "@@ -36,6 +36,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};\n+    return ((i++ == call_index ? callables() : void()), ...);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554932697",
      "id" : 554932697,
      "in_reply_to_id" : 554922096,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzMjY5Nw==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 47,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 12,
      "pull_request_review_id" : 565204678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T10:00:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554932697",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554933448"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554933448"
         }
      },
      "author_association" : "MEMBER",
      "body" : "(Note that case 3 does not exists, i.e. is a noop)",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T10:01:20Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554933448",
      "id" : 554933448,
      "in_reply_to_id" : 554925009,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzMzQ0OA==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 54,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 62,
      "pull_request_review_id" : 565205687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T10:01:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554933448",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554933587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554933587"
         }
      },
      "author_association" : "MEMBER",
      "body" : "(Note that case 10 does not exists, i.e. is a noop)",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T10:01:34Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},\n+                [&] {\n+                    ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n+                },\n+                [&] {\n+                    banmap_t banmap;\n+                    ban_man.GetBanned(banmap);\n+                },\n+                [&] {\n+                    ban_man.DumpBanlist();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554933587",
      "id" : 554933587,
      "in_reply_to_id" : 554925066,
      "line" : 74,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzMzU4Nw==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 74,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 82,
      "pull_request_review_id" : 565205874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T10:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554933587",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554937069"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554937069"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah! I missed that 3 and 10 don't exist. Thanks.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T10:07:50Z",
      "diff_hunk" : "@@ -38,51 +38,43 @@ FUZZ_TARGET_INIT(banman, initialize_banman)\n     {\n         BanMan ban_man{banlist_file, nullptr, ConsumeBanTimeOffset(fuzzed_data_provider)};\n         while (fuzzed_data_provider.ConsumeBool()) {\n-            switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, 11)) {\n-            case 0: {\n-                ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 1: {\n-                ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n-                    ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n-                break;\n-            }\n-            case 2: {\n-                ban_man.ClearBanned();\n-                break;\n-            }\n-            case 4: {\n-                ban_man.IsBanned(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 5: {\n-                ban_man.IsBanned(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 6: {\n-                ban_man.Unban(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            case 7: {\n-                ban_man.Unban(ConsumeSubNet(fuzzed_data_provider));\n-                break;\n-            }\n-            case 8: {\n-                banmap_t banmap;\n-                ban_man.GetBanned(banmap);\n-                break;\n-            }\n-            case 9: {\n-                ban_man.DumpBanlist();\n-                break;\n-            }\n-            case 11: {\n-                ban_man.Discourage(ConsumeNetAddr(fuzzed_data_provider));\n-                break;\n-            }\n-            }\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    ban_man.Ban(ConsumeNetAddr(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.Ban(ConsumeSubNet(fuzzed_data_provider),\n+                                ConsumeBanTimeOffset(fuzzed_data_provider), fuzzed_data_provider.ConsumeBool());\n+                },\n+                [&] {\n+                    ban_man.ClearBanned();\n+                },\n+                [] {},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554937069",
      "id" : 554937069,
      "in_reply_to_id" : 554925009,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzNzA2OQ==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 54,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "src/test/fuzz/banman.cpp",
      "position" : 62,
      "pull_request_review_id" : 565210580,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T10:07:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554937069",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554937595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554937595"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, not a big deal. Can be left like this or updated if you have to touch the branch again.",
      "commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "created_at" : "2021-01-11T10:08:45Z",
      "diff_hunk" : "@@ -36,6 +36,17 @@\n #include <string>\n #include <vector>\n \n+template <typename... Callables>\n+void CallOneOf(FuzzedDataProvider& fuzzed_data_provider, Callables... callables)\n+{\n+    constexpr size_t call_size{sizeof...(callables)};\n+    static_assert(call_size >= 1);\n+    const size_t call_index{fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, call_size - 1)};\n+\n+    size_t i{0};\n+    return ((i++ == call_index ? callables() : void()), ...);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#discussion_r554937595",
      "id" : 554937595,
      "in_reply_to_id" : 554922096,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkzNzU5NQ==",
      "original_commit_id" : "fa75d40ef866ef9ff8dc115e239ca6763aa23b06",
      "original_line" : 47,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 12,
      "pull_request_review_id" : 565211265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20828",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-11T10:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/554937595",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> For a second I thought you were adding Call of Duty into bitcoin. This is a great idea. Concept ACK.\r\n\r\nCall of Duty is already being fuzzed: https://twitter.com/NedWilliamson/status/1348432573836349441",
      "created_at" : "2021-01-11T10:21:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-757855782",
      "id" : 757855782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1Nzg1NTc4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-11T10:21:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757855782",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> * ~Updating the target raises the question whether the case labels should be preserved to not invalidate the existing fuzz inputs format. Fuzz input format might already change implicitly on every commit, so this isn't something worthwhile to pursue.~ Edit: This pull doesn't fix this problem.\r\n\r\nWhen using the `switch (fuzzed_data_provider.ConsumeIntegralInRange<int>(0, N))` idiom it is worth noting that every time `N` is increased by one to accommodate for a new `case` all existing seeds are invalidated.\r\n\r\nExample (all using the same fixed seed input in the form of a finite scream `AAAAAAAAAAAAAAAAAAAAAAAAA`):\r\n\r\n```\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 1) == 1\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 2) == 2\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 3) == 1\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 4) == 0\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 5) == 5\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 6) == 2\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 7) == 1\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 8) == 2\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 9) == 5\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 10) == 10\r\nFuzzedDataProvider{buffer.data(), buffer.size()}.ConsumeIntegralInRange<int>(0, 11) == 5\r\n```\r\n\r\nOne trick that can be used to tackle this is to choose from a larger range such as `[0, 32]` even if we only have say 12 `case`:s (`[0, 11]`). The non-matching numbers `[12, 32]` will simply be \"ignored\" by the coverage-guided fuzzer.\r\n\r\nThat way we'll only have to invalidate existing seeds when we've exhausted the entire range `[0, 32]` with matching `case`:s. Then we can bump to `[0, 64]`, and so on.\r\n\r\nIn other words: instead of invalidating every time we add a new `case` we'll be invalidating every some-power-of-2:th time we add a new `case` :)\r\n\r\nPerhaps that strategy could be incorporated in this PR?",
      "created_at" : "2021-01-13T18:26:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-759634453",
      "id" : 759634453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1OTYzNDQ1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-13T18:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/759634453",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Perhaps that strategy could be incorporated in this PR?\r\n\r\nThe pr is tagged with \"refactoring\", so behaviour changes are not allowed. The suggestion can be discussed in #20837 and addressed in a follow-up pull request. The changes should be trivial based on this pr.",
      "created_at" : "2021-01-13T18:31:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-759636976",
      "id" : 759636976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1OTYzNjk3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-13T18:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/759636976",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK fa75d40ef866ef9ff8dc115e239ca6763aa23b06 - code review only",
      "created_at" : "2021-01-14T09:10:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20828#issuecomment-760057646",
      "id" : 760057646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20828",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDA1NzY0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-14T09:10:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760057646",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
