{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Using config from [`bitcoin/doc/tor.md`](https://github.com/bitcoin/bitcoin/blob/master/doc/tor.md) kills Tor service, will not restart using `sudo systemctl start tor` or upon reboot after first start with new config success on Fedora 23. Bitcoin Core v0.15.1. Tor v0.2.8.11-1.fc23.\r\n\r\nI will leave the actual Tor errors/logs for elsewhere or, if necessary.\r\n\r\nQuestion - since the linked document says:\r\n>Starting with Tor version 0.2.7.1 it is possible, through Tor's control socket API, to create and destroy 'ephemeral' hidden services programmatically. Bitcoin Core has been updated to make use of this.\r\n\r\n>This means that if Tor is running (and proper authentication has been configured), Bitcoin Core automatically creates a hidden service to listen on. This will positively affect the number of available .onion nodes.\r\n\r\nDoes that make the following lines for `/etc/tor/torrc` redundant - removing these from `torrc` resolve the Tor issue:\r\n\r\n    HiddenServiceDir /var/lib/tor/bitcoin-service/\r\n    HiddenServicePort 8333 127.0.0.1:8333\r\n    HiddenServicePort 18333 127.0.0.1:18333\r\n\r\nI note the following lines in my v0.15.1 `debug.log` before the preceeding lines were added, while they were added (before Tor was stopped) and after the lines were removed and Tor was working again - and at the start of the log I get `discover=0`:\r\n\r\n    2018-02-07 10:52:58 torcontrol thread start\r\n    2018-02-07 10:52:58 Bound to 127.0.0.1:8333\r\n    2018-02-07 10:52:58 init message: Loading P2P addresses...\r\n    2018-02-07 10:52:58 tor: Got service ID {onion}, advertising service {onion}.onion:8333\r\n    2018-02-07 10:52:58 AddLocal({onion}.onion:8333,4)\r\n\r\nSeperately (Yes, no not support questions..) is it also necessary to `-setexternalip=` for Bitcoin Core to your onion service at command line / in `bitcoin.conf`as the linked document suggests, even when using 'ephemeral' hidden service working with `AddLocal` message?\r\n\r\nThe full setup I am using is [here](https://bitcoin.stackexchange.com/a/70070/75001) - *note that I have additional lines in my `bitcoin.conf`.*",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12376/comments",
   "created_at" : "2018-02-07T11:24:58Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12376/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12376",
   "id" : 295101592,
   "labels" : [
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 148216,
         "name" : "Docs",
         "node_id" : "MDU6TGFiZWwxNDgyMTY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs"
      },
      {
         "color" : "006b75",
         "default" : false,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12376/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyOTUxMDE1OTI=",
   "number" : 12376,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Query on bitcoin/doc/tor.md out of date?",
   "updated_at" : "2018-02-11T04:13:20Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12376",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/1173622?v=4",
      "events_url" : "https://api.github.com/users/Willtech/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Willtech/followers",
      "following_url" : "https://api.github.com/users/Willtech/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Willtech/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Willtech",
      "id" : 1173622,
      "login" : "Willtech",
      "node_id" : "MDQ6VXNlcjExNzM2MjI=",
      "organizations_url" : "https://api.github.com/users/Willtech/orgs",
      "received_events_url" : "https://api.github.com/users/Willtech/received_events",
      "repos_url" : "https://api.github.com/users/Willtech/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Willtech/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Willtech/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Willtech"
   }
}
