[
   {
      "author_association" : "NONE",
      "body" : "I have also observed strange behaviour from this parameter and i am losing my freaking mind by now !\r\nI made a post about it on stack here : https://bitcoin.stackexchange.com/questions/88001/subtractfeefromamount-not-consistently-working\r\n\r\nI am starting to think after reading your post that it's just fundamentally broken and that we will have no choice but to do it the long way.",
      "created_at" : "2019-05-27T10:43:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-496169233",
      "id" : 496169233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NjE2OTIzMw==",
      "updated_at" : "2019-05-27T10:43:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/496169233",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/32367656?v=4",
         "events_url" : "https://api.github.com/users/VoxR4710/events{/privacy}",
         "followers_url" : "https://api.github.com/users/VoxR4710/followers",
         "following_url" : "https://api.github.com/users/VoxR4710/following{/other_user}",
         "gists_url" : "https://api.github.com/users/VoxR4710/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/VoxR4710",
         "id" : 32367656,
         "login" : "VoxR4710",
         "node_id" : "MDQ6VXNlcjMyMzY3NjU2",
         "organizations_url" : "https://api.github.com/users/VoxR4710/orgs",
         "received_events_url" : "https://api.github.com/users/VoxR4710/received_events",
         "repos_url" : "https://api.github.com/users/VoxR4710/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/VoxR4710/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/VoxR4710/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/VoxR4710"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "At a cursory glance it looks like the argument is at least used, it's passed [into the coin control object](https://github.com/bitcoin/bitcoin/blob/master/src/wallet/rpcwallet.cpp#L430):\r\n```c++\r\n    if (!request.params[6].isNull()) {\r\n        coin_control.m_confirm_target = ParseConfirmTarget(request.params[6], pwallet->chain().estimateMaxBlocks());\r\n    }\r\n```\r\nIt doesn't look like there is any functional test that tests, or even uses this functionality, though, so it might be bugged and simply going untested.",
      "created_at" : "2019-09-26T13:48:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535509878",
      "id" : 535509878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTUwOTg3OA==",
      "updated_at" : "2019-09-26T13:48:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535509878",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'll take a look later today. Nothing stands out in code, time to dig into tests.",
      "created_at" : "2019-09-26T19:15:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535647141",
      "id" : 535647141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTY0NzE0MQ==",
      "updated_at" : "2019-09-26T20:03:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535647141",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@whitslack @VoxR4710 would either of you have detailed debug.log recordings that you could privately share with me?\r\n\r\nI can not replicate in test environment that I set up in `feature_fee_estimation.py` to have non-minimum relay feerate values.",
      "created_at" : "2019-09-26T20:15:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535668909",
      "id" : 535668909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTY2ODkwOQ==",
      "updated_at" : "2019-09-26T20:15:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535668909",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@instagibbs: No, sorry. My `debug.log` begins on 11 June, which is after I opened this issue and switched to using `bitcoin-cli settxfee \"$(bitcoin-cli estimatesmartfee â¦)\"` to manage my fee rate rather than trying to use the buggy `conf_target` parameter of `sendtoaddress`.\r\n\r\nIt should be pretty easy to reproduce on mainnet whenever there's a backlog. Just pick any UTxO from your `listunspent` and do a `sendtoaddress` with the exact amount of the UTxO, passing `true` for `subtractfeefromamount` and some very long `conf_target` like 144 blocks. Compare the fee rate you actually paid against the fee rate reported by `estimatesmartfee 144`.",
      "created_at" : "2019-09-26T20:28:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535673259",
      "id" : 535673259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTY3MzI1OQ==",
      "updated_at" : "2019-09-26T20:28:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535673259",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah I missed the \"spend whole coin\" condition from the description, let me try again.",
      "created_at" : "2019-09-26T20:36:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535676118",
      "id" : 535676118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTY3NjExOA==",
      "updated_at" : "2019-09-26T20:36:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535676118",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@whitslack notice anything off about the test I wrote? https://github.com/bitcoin/bitcoin/pull/16972 I am unable to reproduce ",
      "created_at" : "2019-09-26T20:57:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535683236",
      "id" : 535683236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTY4MzIzNg==",
      "updated_at" : "2019-09-26T20:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535683236",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@instagibbs: Your test case isn't exactly the case I described. I spent only one UTxO, not my entire balance. (I didn't check the rest of the code to see whether your test wallet would have only one UTxO at that point.) Also, I spent a confirmed UTxO, whereas you appear to be spending unconfirmed UTxOs. I don't know if either of those discrepancies are relevant.",
      "created_at" : "2019-09-27T02:14:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535755497",
      "id" : 535755497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTc1NTQ5Nw==",
      "updated_at" : "2019-09-27T02:14:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535755497",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@whitslack the 2nd and 3rd send are spending a single utxo each, which is coincidentally the whole balance. I can change it to mine a block each time as well but I don't expect this to change anything(unconfirmedness doesn't do anything but possibly disqualify it from coin selection in some cases/settings)",
      "created_at" : "2019-09-27T02:21:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535757318",
      "id" : 535757318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTc1NzMxOA==",
      "updated_at" : "2019-09-27T02:21:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535757318",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@instagibbs: Oh, right; the entire balance is merged into one UTxO by the first spend.\r\n\r\nIs there a code-path difference between spending the entire wallet balance and spending the exact amount of only one UTxO among many? I would think that the coin selection algorithm might take a different path to pick one UTxO of exactly the requested amount versus all UTxOs in the wallet.\r\n\r\nLet's lay this on the table for now. Next time I have a need to move a whole UTxO to another wallet, I'll try to use `conf_target` instead of `settxfee` and see if I end up overpaying again.",
      "created_at" : "2019-09-27T02:31:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535759740",
      "id" : 535759740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTc1OTc0MA==",
      "updated_at" : "2019-09-27T02:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535759740",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#11413 by @kallewoof adds a whole of bunch of tests for fee handling in `sendtoaddress`. Perhaps those can be adjusted to cover the behavior on master.\r\n\r\nThat said, @instagibbs's test in #16972 seems to cover the above scenario. I tried it on top of the v0.18.0 release tag, and it passes (using `size` instead of `vsize`). I also tried running it with `--usecli` (add `self.supports_cli = True`) in case something was wrong with:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2472733a24a9364e4c6233ccd04166a26a68cc65/src/rpc/client.cpp#L37-L40\r\n\r\nThe fee rates it ends up using vary per test run:\r\n* target 288: 0.00024384-0.00033942 (16-19 blocks)\r\n* target 2: 0.00116006-0.00161520 (2 blocks)\r\n\r\nI find it strange that `estimatesmartfee` doesn't find a lower fee when asked for a 288 block target. I suppose it's because the test only mines 40 blocks.\r\n\r\nI find it hard to wrap my head around how coin selection (branch & bound, or knapsack) interacts with fees. But that's probably where we'd have to look, having ruled out most other explanations.",
      "created_at" : "2019-09-27T15:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-535988173",
      "id" : 535988173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTk4ODE3Mw==",
      "updated_at" : "2019-09-27T16:47:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535988173",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I just tested this with my main wallet on v0.18.0, and the behavior was correct. Possibly this issue has already been resolved. I'll switch back to relying on `conf_target` rather than `settxfee` in my regular operations and see if I run into any more occurrences of the misbehavior.\r\n\r\nThat said, fee estimation has some seemingly bizarre cusps. I've seen cases where `estimatesmartfee 48` returned a feerate of 1 sat/vB but `estimatesmartfee 47` returned a feerate of 20 sat/vB. The function does not seem to be very smooth at all, and it's far from realistic. But that's a whole separate issue.",
      "created_at" : "2019-09-29T18:05:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-536325935",
      "id" : 536325935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjMyNTkzNQ==",
      "updated_at" : "2019-09-29T18:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536325935",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's using bucket estimation, it doesn't try to smooth it out.\n\nOn Sun, Sep 29, 2019, 2:08 PM Matt Whitlock <notifications@github.com>\nwrote:\n\n> I just tested this with my main wallet on v0.18.0, and the behavior was\n> correct. Possibly this issue has already been resolved. I'll switch back to\n> relying on conf_target rather than settxfee in my regular operations and\n> see if I run into any more occurrences of the misbehavior.\n>\n> That said, fee estimation has some seemingly bizarre cusps. I've seen\n> cases where estimatesmartfee 48 returned a feerate of 1 sat/vB but estimatesmartfee\n> 47 returned a feerate of 20 sat/vB. The function does not seem to be very\n> smooth at all, and it's far from realistic. But that's a whole separate\n> issue.\n>\n> â\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/16072?email_source=notifications&email_token=ABMAFU6XM4KO4W2PTLK7SF3QMDVJVA5CNFSM4HOPKMLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD7326LY#issuecomment-536325935>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABMAFUZKTU76NEXLANP37ODQMDVJVANCNFSM4HOPKMLA>\n> .\n>\n",
      "created_at" : "2019-09-29T18:30:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-536328422",
      "id" : 536328422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjMyODQyMg==",
      "updated_at" : "2019-09-29T18:30:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536328422",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Possibly this issue has already been resolved. \r\n\r\nOk, closing for now. Please let us know if this happens again.",
      "created_at" : "2020-05-08T23:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-626062134",
      "id" : 626062134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjA2MjEzNA==",
      "updated_at" : "2020-05-08T23:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626062134",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@MarcoFalke: Please reopen. This is still an issue, and it's still costing me money that I didn't want to spend.\r\n\r\nUsing Bitcoin Core 0.20.0â¦\r\n\r\n```\r\n$ bitcoin-cli estimatesmartfee 720 ECONOMICAL\r\n{\r\n  \"feerate\": 0.00001000,\r\n  \"blocks\": 720\r\n}\r\n\r\n$ bitcoin-cli sendmany '' '{\"##redacted_A##\":#.########,\"##redacted_B##\":#.########,\"##redacted_C##\":#.########,\"##redacted_D##\":#.########}' 0 '' '[\"##redacted_D##\"]' true 720 ECONOMICAL\r\ndâ¦##redacted_txid##â¦0\r\n```\r\n\r\nThe resulting transaction had a virtual size of 228 vbytes and paid 2244 satoshis as a fee, which is a rate of **9.9 sat/vB, about *ten times* the fee rate I expected/intended!**\r\n\r\nOf note:\r\n* I specified exactly one of the output addresses in the `subtractfeefrom` array.\r\n* The sum of my specified output amounts was exactly equal to the value of the single unlocked UTxO in my wallet.",
      "created_at" : "2020-08-11T01:15:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-671668011",
      "id" : 671668011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTY2ODAxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T01:15:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671668011",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@whitslack as a stop-gap you can try using the explicit feerate options now available in master, will be available in 0.21 release:  https://github.com/bitcoin/bitcoin/pull/11413\r\n\r\nI'll take another crack at making a test that fails.\r\n",
      "created_at" : "2020-08-11T13:18:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-671941680",
      "id" : 671941680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTk0MTY4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T13:18:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671941680",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Wrote another test case for sendmany, it's not triggering anything sorry. If you really want to get this fixed I think you're going to have to send me(or someone that does wallet stuff) detailed logs.",
      "created_at" : "2020-08-11T13:53:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-671960447",
      "id" : 671960447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTk2MDQ0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T13:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671960447",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> as a stop-gap you can try using the explicit feerate options now available in master, will be available in 0.21 release: #11413\r\n\r\n@instagibbs: The new options look promising, though I have a sneaking suspicion that they'll be ignored by the same code path that presently ignores the estimator-based fee options.\r\n\r\n> Wrote another test case for sendmany, it's not triggering anything sorry.\r\n\r\nThanks for your efforts. It's strange that this is so trivially reproducible for me using my production mainnet node. This recent occurrence with `sendmany` is not the only time it's happened for me on 0.20.0.\r\n\r\n> If you really want to get this fixed I think you're going to have to send me(or someone that does wallet stuff) detailed logs.\r\n\r\nSure. Would I collect detailed enough logs with `-debug=walletdb -debug=estimatefee -debug=selectcoins`? Would I need to add `-debug=coindb` too?",
      "created_at" : "2020-08-11T16:41:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672080068",
      "id" : 672080068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjA4MDA2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T16:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672080068",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I *think* most of the wallet/fee related stuff is printed always. Look for `Fee Calculation` string in debug.log? Might be a starting point. My e-mail is in github profile.\r\n\r\nAlternative-alternative for you is to use raw interface and then cross-check that the feerate is right(ugly yes, but wrapping it means you can avoid bugs like this)",
      "created_at" : "2020-08-11T16:44:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672082037",
      "id" : 672082037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjA4MjAzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T16:46:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672082037",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I _think_ most of the wallet/fee related stuff is printed always. Look for `Fee Calculation` string in debug.log? Might be a starting point. My e-mail is in github profile.\r\n\r\nI found the `Fee Calculation` for the transaction in question:\r\n\r\n```\r\n2020-08-11T01:02:57Z [default wallet] Fee Calculation: Fee:2244 Bytes:228 Needed:2244 Tgt:720 (requested 720) Reason:\"Mempool Min Fee\" Decay 0.99931: Estimation: (0 - 1000) 100.00% 3390.8/(3390.8 0 mem 0.0 out) Fail: (-1 - -1) -nan% 0.0/(0.0 0 mem 0.0 out)\r\n```\r\n\r\nThe `Tgt:720` would seem to have come from my `conf_target` parameter, but I don't know what the numbers in `Estimation:` mean. I did show the output from `estimatesmartfee 720 ECONOMICAL`, which showed an estimated fee rate of 1 sat/vB, so I don't know why the fee calculation would have calculated 2244 satoshis for a 228-vB transaction.\r\n\r\n> Alternative-alternative for you is to use raw interface and then cross-check that the feerate is right(ugly yes, but wrapping it means you can avoid bugs like this)\r\n\r\nI wasn't aware of the `subtractFeeFromOutputs` and `replaceable` arguments to `fundrawtransaction`. Thanks for the pointer. I will most likely use this interface in the future, as it looks easier than locking every UTxO in the wallet and then unlocking the one I want to spend with `sendtoaddress`/`sendmany`.",
      "created_at" : "2020-08-11T17:12:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672106053",
      "id" : 672106053,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjEwNjA1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T17:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672106053",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Reason:\"Mempool Min Fee\"\r\n\r\nerrr are you sure you aren't using a really small mempool or something? The wallet will definitely give you something higher if what you give doesn't hit your mempool minimum.\r\n\r\n`getmempoolinfo` <--- results of this?",
      "created_at" : "2020-08-11T19:24:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672215318",
      "id" : 672215318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjIxNTMxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:25:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672215318",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Current valuesâ¦\r\n\r\n```\r\n$ bitcoin-cli getmempoolinfo\r\n{\r\n  \"loaded\": true,\r\n  \"size\": 18232,\r\n  \"bytes\": 8777962,\r\n  \"usage\": 35987504,\r\n  \"maxmempool\": 64000000,\r\n  \"mempoolminfee\": 0.00003503,\r\n  \"minrelaytxfee\": 0.00001000\r\n}\r\n```\r\n\r\nRegardless of my own mempool's configuration, `sendtoaddress`/`sendmany` ought not to silently inflate the fees they're paying when I have explicitly specified a fee rate. Expected behavior would be to pay the actual fee rate I specified and always relay my own transactions to my peers, even if my transactions can't stick around in my mempool due to memory constraints. An alternative, acceptable (though not desirable) behavior would be to reject my transaction with an error saying it doesn't pay a great enough fee rate to be accepted into my mempool. The current behavior of silently paying many times my explicitly specified fee rate is unexpected and unacceptable and undermines my trust in the software to keep my money safe.",
      "created_at" : "2020-08-11T19:32:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672220373",
      "id" : 672220373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjIyMDM3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672220373",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe, that's an API break. I believe the explicit feerate option actually fails in this case. I'd suggest doing manual transaction creation(walletcreatefundedpsbt) or use explicit feerate.\r\n\r\n> \"maxmempool\": 64000000\r\n\r\n64 MB mempool could easily fill during these periods. Mystery solved.",
      "created_at" : "2020-08-11T19:36:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672222424",
      "id" : 672222424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjIyMjQyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:36:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672222424",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks. Looking forward to the new explicit fee-rate parameters.",
      "created_at" : "2020-08-11T19:37:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672223100",
      "id" : 672223100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjIyMzEwMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:37:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672223100",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "For what it's worth, there is no \"safe\" maximum mempool size. If you say 64 MB is too small, then I say 1 GB is also \"too small,\" and indeed *any* size is too small. Under an eclipse attack, an attacker could easily fill a victim node's mempool of *any* size with valid, high-fee-rate transactions, which pose no risk of confirming and costing the attacker money since the victim won't be able to relay them to any miners due to having been eclipsed from the network.",
      "created_at" : "2020-08-11T19:43:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672231734",
      "id" : 672231734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjIzMTczNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:43:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672231734",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The \"fix\" I'd look at is simply having the block estimator return the max of min mempool entry and it's estimation. That actually seems better than current and won't break anyone's usage?",
      "created_at" : "2020-08-11T19:51:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672242785",
      "id" : 672242785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjI0Mjc4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:51:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672242785",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "That could be good. Then front-ends that query the estimator to show a fee rate to the user would have a more accurate idea about what will happen when they actually submit a transaction using `sendtoaddress`/`sendmany`.\r\n\r\nMy concern would be for Lightning nodes, which need to agree with their peers about the current state of the fee market. If the responses from Bitcoin Core's fee estimator are being influenced by mempool memory constraints, this could trigger mass unilateral channel closures, which is **VERY** expensive.",
      "created_at" : "2020-08-11T19:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672244574",
      "id" : 672244574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjI0NDU3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T19:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672244574",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't believe the explicit fee rate option cares about current mempool limits, it only cares about the hard coded minimum 1 satoshi/byte limit. (I could be mistaken here -- we went back and forth on this during review.)",
      "created_at" : "2020-08-12T03:03:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-672539391",
      "id" : 672539391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MjUzOTM5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-12T03:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672539391",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like it will simply fail: https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2782\r\n\r\nthough I don't see a test for it necessarily",
      "created_at" : "2020-08-13T02:10:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-673206832",
      "id" : 673206832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MzIwNjgzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-13T02:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673206832",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Reason:\"Mempool Min Fee\"\r\n> \r\n> errr are you sure you aren't using a really small mempool or something? The wallet will definitely give you something higher if what you give doesn't hit your mempool minimum.\r\n> \r\n> `getmempoolinfo` <--- results of this?\r\n\r\nSurely the mempool minimum shouldn't come into the equation at all...",
      "created_at" : "2021-04-16T11:30:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-821111241",
      "id" : 821111241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTExMTI0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T11:30:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821111241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Surely the mempool minimum shouldn't come into the equation at all...\r\n\r\n@rebroad: Sadly, it does, and the reason is one of privacy. If your node isn't relaying any transactions paying fees less than *X* sat/vB because its mempool is full, but then it relays one transaction that pays a fee of *X*/2 sat/vB, then it would be obvious to your peers that your node originated that transaction.\r\n\r\nPersonally, I wish there were an option to say, \"I care more about cost than I care about privacy; transmit my cheap transaction anyway,\" but such an option does not exist.",
      "created_at" : "2021-04-16T11:39:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16072#issuecomment-821115223",
      "id" : 821115223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16072",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTExNTIyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T11:39:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821115223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   }
]
