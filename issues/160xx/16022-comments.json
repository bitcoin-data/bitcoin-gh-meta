[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16022#discussion_r283625694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16022"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/283625694"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this part necessary? If we already have enough sigs it doesn't matter I think, and if not, the call to CheckSig below will catch the uncompressed case.",
      "commit_id" : "6a935a570a8e0c2aba7d5be3fe39a86a16376531",
      "created_at" : "2019-05-14T04:55:42Z",
      "diff_hunk" : "@@ -143,6 +147,10 @@ static bool SignStep(const SigningProvider& provider, const BaseSignatureCreator\n         ret.push_back(valtype()); // workaround CHECKMULTISIG bug\n         for (size_t i = 1; i < vSolutions.size() - 1; ++i) {\n             CPubKey pubkey = CPubKey(vSolutions[i]);\n+            // Signing with uncompressed keys is disabled in witness scripts",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#discussion_r283625694",
      "id" : 283625694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MzYyNTY5NA==",
      "original_commit_id" : "6a935a570a8e0c2aba7d5be3fe39a86a16376531",
      "original_position" : 15,
      "path" : "src/script/sign.cpp",
      "position" : 15,
      "pull_request_review_id" : 237026174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16022",
      "updated_at" : "2019-05-14T04:55:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/283625694",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16022#discussion_r283627720"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16022"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/283627720"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, it is necessary. If the number of compressed keys is >= the threshold, then enough signatures can be made to have the entire multisig still be valid if signed by those uncompressed keys.\r\n\r\nIn my testing, this is the thing that actually fixes the bug, the `CreateSig` check did not do so.",
      "commit_id" : "6a935a570a8e0c2aba7d5be3fe39a86a16376531",
      "created_at" : "2019-05-14T05:10:12Z",
      "diff_hunk" : "@@ -143,6 +147,10 @@ static bool SignStep(const SigningProvider& provider, const BaseSignatureCreator\n         ret.push_back(valtype()); // workaround CHECKMULTISIG bug\n         for (size_t i = 1; i < vSolutions.size() - 1; ++i) {\n             CPubKey pubkey = CPubKey(vSolutions[i]);\n+            // Signing with uncompressed keys is disabled in witness scripts",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#discussion_r283627720",
      "id" : 283627720,
      "in_reply_to_id" : 283625694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MzYyNzcyMA==",
      "original_commit_id" : "6a935a570a8e0c2aba7d5be3fe39a86a16376531",
      "original_position" : 15,
      "path" : "src/script/sign.cpp",
      "position" : 15,
      "pull_request_review_id" : 237028752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16022",
      "updated_at" : "2019-05-14T05:10:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/283627720",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "After some hours of debugging, although I think your changes might make sense anyway, I suspect they're not fixing the actual bug.\r\n\r\nI'll send you a PR as soon as possible with an addition that I think could be a better fix, so you can merge my modifications here if you think that makes sense.",
      "created_at" : "2019-05-14T18:17:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492350640",
      "id" : 492350640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjM1MDY0MA==",
      "updated_at" : "2019-05-14T22:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492350640",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "::Sigh:: I think we still want to be able to sign in these cases (otherwise we contribute to funds being stuck), just not createmultisig/addmultisig.",
      "created_at" : "2019-05-14T18:41:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492359594",
      "id" : 492359594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjM1OTU5NA==",
      "updated_at" : "2019-05-14T18:41:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492359594",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I opened a PR on your fork/branch @achow101 \r\n\r\nhttps://github.com/achow101/bitcoin/pull/3\r\n\r\nEdit: \r\nwhich is failing a lot of tests lol\r\nMy fault, I ran only the functional ones.\r\nAnyway, I think that that part of code could be the source of this problem, but maybe I don't have a so clear idea on why was written like that. I'll check the tests trying to understand",
      "created_at" : "2019-05-14T20:23:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492395357",
      "id" : 492395357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjM5NTM1Nw==",
      "updated_at" : "2019-05-14T23:49:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492395357",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ps1dr3x NACK on your suggestion to change `EvalScript`. It is consensus critical so we cannot change it.",
      "created_at" : "2019-05-15T03:49:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492492765",
      "id" : 492492765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjQ5Mjc2NQ==",
      "updated_at" : "2019-05-15T03:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492492765",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ::Sigh:: I think we still want to be able to sign in these cases (otherwise we contribute to funds being stuck), just not createmultisig/addmultisig.\r\n\r\nThis is only a concern because this bug has existed since day one of segwit, yes? If this was correct when segwit was introduced, it would be fine, right?\r\n\r\nOther ways to solve this from within `createmultisig` and `addmultsigaddress` feel like hacks though.",
      "created_at" : "2019-05-15T03:51:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492493074",
      "id" : 492493074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjQ5MzA3NA==",
      "updated_at" : "2019-05-15T03:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492493074",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell It's not as simple. It seems that the actually implemented policy will actually reject spends where any uncompressed key is encountered, even if it's not one that contributes to the validity of OP_CHECKMULTISIG(VERIFY). If all signatures match up with the first k keys, and those are compressed, then the rest can be uncompressed.",
      "created_at" : "2019-05-15T04:43:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492501085",
      "id" : 492501085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjUwMTA4NQ==",
      "updated_at" : "2019-05-15T04:43:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492501085",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101  Even if we never had the bug, someone else might have, so it would be somewhat preferable if it could still sign.... that said, yes, if it had been originally written this way, that would probably have been fine.",
      "created_at" : "2019-05-15T04:43:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-492501095",
      "id" : 492501095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjUwMTA5NQ==",
      "updated_at" : "2019-05-15T04:43:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492501095",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa  Thanks for confirming.   I think we should be willing to sign anything that is consensus valid but not create anything that uses uncompressed at all.\r\n\r\nThis avoids creating new screwups but also gives people the most help possible at undoing a messup.",
      "created_at" : "2019-05-16T19:22:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16022#issuecomment-493199039",
      "id" : 493199039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16022",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzE5OTAzOQ==",
      "updated_at" : "2019-05-16T19:22:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493199039",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
