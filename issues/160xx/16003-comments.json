[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16362](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16362.html) (Add bilingual_str type by hebasto)\n* [#15759](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15759.html) ([p2p] Add 2 outbound blocks-only connections by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-05-10T10:00:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-491233939",
      "id" : 491233939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTIzMzkzOQ==",
      "updated_at" : "2019-07-24T14:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491233939",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284417045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284417045"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `MAX_FEELER_CONNECTIONS` for consistency, and coherence with `nMaxFeeler`",
      "commit_id" : "7cb1ad5f832fa03ef2a6e71deb1457fd2d6bc942",
      "created_at" : "2019-05-15T19:33:32Z",
      "diff_hunk" : "@@ -59,6 +59,8 @@ static const unsigned int MAX_SUBVERSION_LENGTH = 256;\n static const int MAX_OUTBOUND_CONNECTIONS = 8;\n /** Maximum number of addnode outgoing nodes */\n static const int MAX_ADDNODE_CONNECTIONS = 8;\n+/** Number of feeler connections */\n+static const int NUM_FEELER_CONNECTIONS = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284417045",
      "id" : 284417045,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NDQxNzA0NQ==",
      "original_commit_id" : "148e43a1aa5ad78ea4f17477762800d2346961a8",
      "original_position" : 5,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 238027405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003",
      "updated_at" : "2019-07-18T20:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284417045",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Two requests to simplify review:\r\n* squash travis fixups into the appropriate commit\r\n* split fixes into 2 PRs, one addressing each",
      "created_at" : "2019-05-15T19:35:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-492793956",
      "id" : 492793956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5Mjc5Mzk1Ng==",
      "updated_at" : "2019-05-15T19:35:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492793956",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@Empact Thanks. I thought it would be crazy to open two PRs, because bug 1 fixes something for sure, and bug 2 isn't really reproducible. Any bad behavior from bug 2 could be confused for bug 1, and it would be hard to tell which one it is. Eg, things could go south if not enough FDs were allocated (maybe allocated is the wrong word) _or_ not enough were asserted. And since file descriptor problems via threads are hard to reproduce, I thought it made sense to mash it all together.",
      "created_at" : "2019-05-17T05:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-493320996",
      "id" : 493320996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzMyMDk5Ng==",
      "updated_at" : "2019-05-17T05:06:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493320996",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284980505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284980505"
         }
      },
      "author_association" : "NONE",
      "body" : "Right, that makes sense. This essentially becomes 0 when -maxconnections <=MAX_OUTBOUND_CONNECTIONS, which I wasn't sure of initially.",
      "commit_id" : "7cb1ad5f832fa03ef2a6e71deb1457fd2d6bc942",
      "created_at" : "2019-05-17T05:16:32Z",
      "diff_hunk" : "@@ -59,6 +59,8 @@ static const unsigned int MAX_SUBVERSION_LENGTH = 256;\n static const int MAX_OUTBOUND_CONNECTIONS = 8;\n /** Maximum number of addnode outgoing nodes */\n static const int MAX_ADDNODE_CONNECTIONS = 8;\n+/** Number of feeler connections */\n+static const int NUM_FEELER_CONNECTIONS = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284980505",
      "id" : 284980505,
      "in_reply_to_id" : 284417045,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NDk4MDUwNQ==",
      "original_commit_id" : "148e43a1aa5ad78ea4f17477762800d2346961a8",
      "original_position" : 5,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 238741283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003",
      "updated_at" : "2019-07-18T20:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284980505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284984825"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284984825"
         }
      },
      "author_association" : "NONE",
      "body" : "I wonder if we need `<int>` here? Both arguments are `int` now. But I didn't want to cover up this old fix.",
      "commit_id" : "7cb1ad5f832fa03ef2a6e71deb1457fd2d6bc942",
      "created_at" : "2019-05-17T05:48:14Z",
      "diff_hunk" : "@@ -998,25 +998,24 @@ bool AppInitParameterInteraction()\n     }\n \n     // Make sure enough file descriptors are available\n-    int nBind = std::max(nUserBind, size_t(1));\n     nUserMaxConnections = gArgs.GetArg(\"-maxconnections\", DEFAULT_MAX_PEER_CONNECTIONS);\n     nMaxConnections = std::max(nUserMaxConnections, 0);\n+    int nBind = std::max(nUserBind, size_t(1));\n+    int nRpcThreads = std::max(gArgs.GetArg(\"-rpcthreads\", DEFAULT_HTTP_THREADS), int64_t(1));\n+    int nFDMin = MIN_CORE_FILEDESCRIPTORS + MAX_ADDNODE_CONNECTIONS + nBind + nRpcThreads;\n \n-    // Trim requested connection counts, to fit into system limitations\n-    // <int> in std::min<int>(...) to work around FreeBSD compilation issue described in #2695\n-    nFD = RaiseFileDescriptorLimit(nMaxConnections + MIN_CORE_FILEDESCRIPTORS + MAX_ADDNODE_CONNECTIONS);\n-#ifdef USE_POLL\n-    int fd_max = nFD;\n-#else\n-    int fd_max = FD_SETSIZE;\n-#endif\n-    nMaxConnections = std::max(std::min<int>(nMaxConnections, fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS), 0);\n-    if (nFD < MIN_CORE_FILEDESCRIPTORS)\n-        return InitError(_(\"Not enough file descriptors available.\"));\n-    nMaxConnections = std::min(nFD - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS, nMaxConnections);\n+    // Optimistically enforce minimum file descriptors\n+    nFD = RaiseFileDescriptorLimit(nFDMin + nUserMaxConnections);\n+    if (nFD < nFDMin)\n+        return InitError(strprintf(_(\"Not enough file descriptors available. %d available, %d required.\"), nFD, nFDMin));\n+\n+    // Calculate new -maxconnection count. Note: std::min<int>(...) to work around FreeBSD compilation issue described in #2695\n+    nMaxConnections = std::min<int>(nMaxConnections, nFD - nFDMin);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r284984825",
      "id" : 284984825,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NDk4NDgyNQ==",
      "original_commit_id" : "148e43a1aa5ad78ea4f17477762800d2346961a8",
      "original_position" : 29,
      "path" : "src/init.cpp",
      "position" : 29,
      "pull_request_review_id" : 238746735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003",
      "updated_at" : "2019-07-18T20:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/284984825",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r305103809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305103809"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: maybe I should remove this change for log compatability",
      "commit_id" : "7cb1ad5f832fa03ef2a6e71deb1457fd2d6bc942",
      "created_at" : "2019-07-18T20:35:56Z",
      "diff_hunk" : "@@ -1010,12 +1010,12 @@ bool AppInitParameterInteraction()\n         return InitError(strprintf(_(\"Not enough file descriptors available. %d available, %d required.\"), nFD, nFDMin));\n \n     // Calculate new -maxconnection count. Note: std::min<int>(...) to work around FreeBSD compilation issue described in #2695\n-    nMaxConnections = std::max(std::min<int>(nMaxConnections, nFD - nFDMin), 0);\n+    nMaxConnections = std::min<int>(nMaxConnections, nFD - nFDMin);\n     LogPrintf(\"There are %d file descriptors available, %d required, %d reserved, and %d requested.\\n\", nFD, nFDMin, nFDMin + nMaxConnections, nFDMin + nUserMaxConnections);\n \n     // Display a warning if the number of total maximum connections was lowered\n     if (nMaxConnections < nUserMaxConnections)\n-        InitWarning(strprintf(_(\"Reducing -maxconnections from %d to %d, because of file descriptor limitations.\"), nUserMaxConnections, nMaxConnections));\n+        InitWarning(strprintf(_(\"Reducing -maxconnections from %d to %d, because of system limitations.\"), nUserMaxConnections, nMaxConnections));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#discussion_r305103809",
      "id" : 305103809,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTEwMzgwOQ==",
      "original_commit_id" : "c45779cfef056ae55cd67f4cdfeb3ef086329170",
      "original_position" : 20,
      "path" : "src/init.cpp",
      "position" : 34,
      "pull_request_review_id" : 263893338,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16003",
      "updated_at" : "2019-07-18T20:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305103809",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Maybe we can just implement `-extrafds=n` (or maybe just `fds` for the total and define the minimum somewhere) instead of modifying this code every time we realize something new or existing needs a file handle. It doesn't really make sense to modify this code if we can just modify a default config value, right (except of course for dynamic values that can't be known)?",
      "created_at" : "2019-07-18T21:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-512999371",
      "id" : 512999371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMjk5OTM3MQ==",
      "updated_at" : "2019-07-19T16:08:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/512999371",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I figured I should supply some pseudocode to show what happens differently in the code and how it's related to both Bug 1 and 2. There's a bit of redundant code, and lots of constants from other places, so I tried to reduce the amount of references needed to actually understand what's going on.\r\n\r\nSuppose you are running Mac OS X and listening on the network interface. The ulimit is 256. Suppose you also have 1 bind interface `nBind(1)` and 1 RPC thread `nRpc(1)`.\r\n\r\n**Current code**\r\n~~~\r\nnFD = RaiseFileDescriptorLimit(nMaxConn(125) + nCore(150) + nAddnode(8)) = gets reduced to 256\r\nnMaxConnections = min(125, nFD(256) - nBind(1) - nCore(150) - nAddnode(8) = min(125, 97) = 97\r\nif ( nFD < nCore(150) ) error(\"not enough fds\")\r\nnMaxConnections = min(nFD(256) - nCore(150) - nAddnode(8), nMaxConnections(97)) = min(98, 97) = 97\r\n~~~\r\n\r\nUsable FDs: `nCore(150) + nMaxConnections(97) = 247 + nAddnode(8) + nRpc(1) + nBind(1) = 257`\r\nThere's too many, even if we only have 1 bind interface and 1 RPC thread.\r\n\r\n\r\n**This PR**\r\n~~~\r\nnFDMin = nCore(150) + nAddnode(8) + nBind(1) + nRpc(1) = 160\r\nnFD = RaiseFileDescriptorLimit(nMaxConn(125) + nFDMin(160)) = gets reduced to 256\r\nif ( nFD < nFDMin(160) ) error(\"not enough fds\")\r\nnMaxConnections = min(nMaxConn(125), 256-nFDMin(160)) = 96\r\n~~~\r\n\r\nUsable FDs: `nCore(150) + nMaxConnections(96) = 246 + nAddnode(8) + nRpc(1) + nBind(1) = 256`",
      "created_at" : "2019-07-19T18:55:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-513339232",
      "id" : 513339232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzMzOTIzMg==",
      "updated_at" : "2019-07-19T19:11:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513339232",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-07-24T18:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-514742342",
      "id" : 514742342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDc0MjM0Mg==",
      "updated_at" : "2019-07-24T18:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514742342",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi @tryphe - Wondering if you are going to continue with this PR or whether it should be closed. It looks like this has needed a rebase for some time. I'd also suggest you squash your commits in accordance with the [CONTRIBUTING](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits) guidelines and add tests as [suggested above](https://github.com/bitcoin/bitcoin/pull/16003#pullrequestreview-237742966) to verify the issue.",
      "created_at" : "2020-05-06T01:51:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-624402364",
      "id" : 624402364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDQwMjM2NA==",
      "updated_at" : "2020-05-06T01:51:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624402364",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will close this for now. However I think the changes are worth following up on, so will open a new good first issue. Will also extract one change that can just be merged now.",
      "created_at" : "2020-05-07T23:21:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-625545233",
      "id" : 625545233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNTU0NTIzMw==",
      "updated_at" : "2020-05-07T23:21:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625545233",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for following up @adamjonas @fanquake!\r\n\r\nI certainly don't think this is the most correct way to proceed, especially with the large scope of changes with new sockets and threads. But it's closer than what we had before, in terms of knowing the [required, requested, allocated] counts of FDs. I think it makes much more sense to modularize the summing of FDs and make it easier to obtain the counts with future changes. Maybe something like a `DescriptorMan` that does all of the dirty work. Doing this will make adding more sockets or modifying connection min/max bounds much less conflicted. It's apparent that we don't want to keep editing these general files (init.cpp and net.h) every time we need to change the descriptor count. \r\n\r\nWill ping #18911 so they can see this message.",
      "created_at" : "2020-05-18T18:15:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16003#issuecomment-630352434",
      "id" : 630352434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16003",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDM1MjQzNA==",
      "updated_at" : "2020-05-18T18:20:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630352434",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   }
]
