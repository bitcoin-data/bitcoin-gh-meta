[
   {
      "author_association" : "NONE",
      "body" : "I just noticed that the function `AddAndGetDestinationForScript`, called by `addmultisigaddress` to calculate the destination, should already do this check (calling `IsSolvable` function) and falling back to legacy, but for some reason it doesn't (`IsSolvable` returns true).  (https://github.com/bitcoin/bitcoin/blob/master/src/outputtype.cpp#L76)\r\nI'm digging into it",
      "created_at" : "2019-05-13T08:51:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491735018",
      "id" : 491735018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTczNTAxOA==",
      "updated_at" : "2019-05-13T09:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491735018",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Be reminded that bugfixes *must* be accompanied by a test that fails before the change and passes after it",
      "created_at" : "2019-05-13T13:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491820101",
      "id" : 491820101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTgyMDEwMQ==",
      "updated_at" : "2019-05-13T13:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491820101",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thank you for the reminder @MarcoFalke , I'll add a test soon. I'm just trying to figure out if my current fix is enough or there are any other broken parts in the process, because there's a comment [here](https://github.com/bitcoin/bitcoin/blob/master/src/outputtype.cpp#L88) saying that the use of uncompressed keys should be managed, but apparently it's not",
      "created_at" : "2019-05-13T14:10:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491838630",
      "id" : 491838630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTgzODYzMA==",
      "updated_at" : "2019-05-13T14:10:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491838630",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke  so, you would prefer we close this fix of a potentially money losing bug if no one felt like adding a test case for trivial functionality?  I couldn't more strongly disagree.",
      "created_at" : "2019-05-13T19:23:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491952710",
      "id" : 491952710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk1MjcxMA==",
      "updated_at" : "2019-05-13T19:23:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491952710",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So you would prefer to not have a test, so that we can regress on this in the future and cause money loss for users?",
      "created_at" : "2019-05-13T19:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491956871",
      "id" : 491956871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk1Njg3MQ==",
      "updated_at" : "2019-05-13T19:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491956871",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nothing prevents fixing the bug, and the  separately adding a test. I certainly agree we should have tests for issues discovered in the past, but that doesn't mean there is a strong requirement to have one in the same PR, by the same author.",
      "created_at" : "2019-05-13T19:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491958530",
      "id" : 491958530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk1ODUzMA==",
      "updated_at" : "2019-05-13T19:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491958530",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Perhaps I misunderstood you.  It sounded to me like you were expressing the view that a fix wouldn't be accepted if it was submitted without an automated test, if so I believe that isn't a position that we should take.\r\n\r\nIf instead you were just expressing doubt that there was actually a bug here to fix, then I agree. But coming with an automated test is not the bar for determining if a bug exists or not. I also think it's great to ask contributors if they'd be willing to automate their test, but we should probably lean towards \"I'll help you figure out how to do it\" especially for new contributors, rather than \"you must be this tall to ride, good luck\".\r\n\r\nAnd our urgency should be modulated somewhat by how easy it would be to accidentally regress: If someone finds a spelling error in a help message we're not exactly going to insist on adding a regression test which checks that help output for the misspelled word. :)  Some fixes have a low probability of an accidentally regression and a targeted test which only catches that one behaviour may well not be worth its maintenance burden.\r\n\r\nSimilarly, if a 'bug' were really inconsequential-- then I could support a position that including a test would be a minimum proof of work before we'd bother dealing with it, but this would be a serious bug if it were real.\r\n\r\nWhich I suspect it isn't:\r\n\r\n> $ ./bitcoin-cli addmultisigaddress 2 '[\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5f\",\"047211a824f55b505228e4c3d5194c1fcfaa15a456abdf37f9b9d97a4040afc073dee6c89064984f03385237d92167c13e236446b417ab79a0fcae412ae3316b77\",\"0496b538e853519c726a2c91e61ec11600ae1390813a627c66fb8be7947be63c52da7589379515d4e0a604f8141781e62294721166bf621e73a82cbf2342c858ee\"]' \"\" bech32\r\n> {\r\n>  \"address\": \"3J1pwTY92a2vcdqVZF4J4Ut1tdbsst68rE\",\r\n\r\nIt's a little surprising that its silently auto-returning legacy when you give it an explicit parameter, it might be better to return an error, but before actually arguing that I'd want to go look to see if that had already been discussed.  Auto-returning legacy when it must when there is no argument is at most a doc bug.",
      "created_at" : "2019-05-13T19:56:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491963285",
      "id" : 491963285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk2MzI4NQ==",
      "updated_at" : "2019-05-13T20:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491963285",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This is what I'm trying to understand @gmaxwell  , it doesn't happen `always`:\r\n\r\n```\r\n./bitcoin-cli addmultisigaddress 1 '[\"045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d\",\"02ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831\",\"0224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e07\"]' \"\" bech32\r\n{\r\n  \"address\": \"bc1qarhggzk55q4ws9z0jrrsl5qumgrwnwry7lk7xl3s3sel35zskl6qdtm33s\",\r\n  \"redeemScript\": \"5141045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d2102ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831210224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e0753ae\"\r\n}\r\n```",
      "created_at" : "2019-05-13T20:29:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491974354",
      "id" : 491974354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk3NDM1NA==",
      "updated_at" : "2019-05-13T20:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491974354",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Indeed, I just tested further.  It appears to me that it only auto switches to legacy when more than the threshold of keys is uncompressed. 0_o  This is absolutely a bug.\r\n\r\n> $ ./bitcoin-cli addmultisigaddress 2 '[\"047211a824f55b505228e4c3d5194c1fcfaa15a456abdf37f9b9d97a4040afc073dee6c89064984f03385237d92167c13e236446b417ab79a0fcae412ae3316b77\",\"0279BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798\",\"0279BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798\"]' \"\" bech32\r\n> {\r\n>  \"address\": \"bc1q44mnt024cw8r9r3egnq5ndscdqlcyufyppdhdtccf0l7dt8w70jsz37nnz\",\r\n>  \"redeemScript\": \"5241047211a824f55b505228e4c3d5194c1fcfaa15a456abdf37f9b9d97a4040afc073dee6c89064984f03385237d92167c13e236446b417ab79a0fcae412ae3316b77210279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798210279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f8179853ae\"\r\n> }\r\n",
      "created_at" : "2019-05-13T20:33:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491975542",
      "id" : 491975542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk3NTU0Mg==",
      "updated_at" : "2019-05-13T20:35:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491975542",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I noticed that, and also [this](https://github.com/bitcoin/bitcoin/blob/master/src/outputtype.cpp#L88) comment only after opening the PR, so this commit now seems more like a workaround for a problem which I still don't understand.\r\n\r\nI followed the code of the function `AddAndGetDestinationForScript` but I still don't get where/when this fallback happens, and why only few cases are affected.",
      "created_at" : "2019-05-13T20:37:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491976857",
      "id" : 491976857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk3Njg1Nw==",
      "updated_at" : "2019-05-13T20:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491976857",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I believe this affects `createmultisigaddress` as well. A more correct fix would be to change `AddAndGetDestinationForScript` and possibly `ProduceSignature` as well. I can work on a better fix for this when I have time next week.",
      "created_at" : "2019-05-13T20:41:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491978168",
      "id" : 491978168,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk3ODE2OA==",
      "updated_at" : "2019-05-13T20:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491978168",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Maybe is unrelated and I'm missing something stupid because I don't have any experience on the bitcoin test framework, but I'm having some problems even with the test.\r\nI wrote this simple test in `rpc_createmultisig.py` (because seems there's only one file for both the calls):\r\n\r\n```python\r\n    def do_multisig_fallback_to_legacy(self):\r\n        self.log.info('Check that addmultisigaddress and createmultisig fallback to legacy when uncompressed public keys are provided')\r\n\r\n        pubkey1 = \"045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d\"\r\n        pubkey2 = \"02ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831\"\r\n        pubkey3 = \"0224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e07\"\r\n\r\n        for self.output_type in [\"legacy\", \"p2sh-segwit\", \"bech32\"]:\r\n            msigw = self.nodes[0].addmultisigaddress(1, [pubkey1, pubkey2, pubkey3], None, self.output_type)\r\n            assert msigw[\"address\"] == \"3GiimyxF1R5VixfBFAbQZbuy9EesD2r6n1\"\r\n```\r\n\r\nBut the assert fails, both with my commit and without, and if I print the 3 addresses (`msigw[\"address\"]`) I get other different invalid addresses (but the same `redeemScript`):\r\n\r\n```\r\n2019-05-13T19:17:07.346000Z TestFramework (INFO): Check that addmultisigaddress and createmultisig fallback to legacy when uncompressed public keys are provided\r\n{'address': '2N8GvqitGcsaqvkHivJDHBYuEMas2zoTNQm', 'redeemScript': '5141045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d2102ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831210224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e0753ae'}\r\n{'address': '2Mx2YyMfY5vMa8MwXt7K8RSaV1ieGMycCpF', 'redeemScript': '5141045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d2102ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831210224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e0753ae'}\r\n{'address': 'bcrt1qarhggzk55q4ws9z0jrrsl5qumgrwnwry7lk7xl3s3sel35zskl6qh68c79', 'redeemScript': '5141045897fee25bd7c5692510b2f50fcae9aa20fbc4d49d59814f4c7fdb5c4bc6eb1c0ce382458f9588e922e0d509ed8d34856787380075b00418b02e0bf7c652ef9d2102ac46c6d74d15e60f4f1035ff07ef740aca1d68d55ba0b8d336a73d7a35858831210224a4dc5620714a9ecf67a09583d1e4c04f5bedb8ecea99028da05bb15a2a7e0753ae'}\r\n```\r\n\r\nDo you have any idea on what's wrong here? The same call with `bitcoin-cli` to the compiled and running node (same code) returns the expected addresses...",
      "created_at" : "2019-05-13T21:00:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491984949",
      "id" : 491984949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk4NDk0OQ==",
      "updated_at" : "2019-05-13T21:00:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491984949",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ps1dr3x I haven't dived into this but I noticed that your test uses a \"3...\" prefix for the address, but the address encoding for regtest/testnet (which is what we use in our test framework) is different than mainnet, so P2SH addresses will start with a \"2\".",
      "created_at" : "2019-05-13T21:30:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-491994265",
      "id" : 491994265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MTk5NDI2NQ==",
      "updated_at" : "2019-05-13T21:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491994265",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Oh yeah you're right, I didn't thought about that! Thank you @sdaftuar :+1: \r\n",
      "created_at" : "2019-05-13T22:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-492003199",
      "id" : 492003199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjAwMzE5OQ==",
      "updated_at" : "2019-05-13T22:00:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492003199",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It is fine if you don't add a test case if it is too hard to get one. I thought this would be a single line added with an assert, but I guess it turned out more involved?",
      "created_at" : "2019-05-13T22:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-492003601",
      "id" : 492003601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjAwMzYwMQ==",
      "updated_at" : "2019-05-13T22:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492003601",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yes, and at this point maybe that test will not even fit for the real causes @MarcoFalke . I asked mainly because I was experimenting but I'll not commit that, at least before the real causes are discovered :)\r\n\r\nAnyway, meanwhile that @achow101 cannot work on this, I'll continue to try getting more information (or hopefully finding possible fixes) on this",
      "created_at" : "2019-05-13T22:27:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-492009781",
      "id" : 492009781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjAwOTc4MQ==",
      "updated_at" : "2019-05-13T22:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492009781",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10249616?v=4",
         "events_url" : "https://api.github.com/users/ps1dr3x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ps1dr3x/followers",
         "following_url" : "https://api.github.com/users/ps1dr3x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ps1dr3x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ps1dr3x",
         "id" : 10249616,
         "login" : "ps1dr3x",
         "node_id" : "MDQ6VXNlcjEwMjQ5NjE2",
         "organizations_url" : "https://api.github.com/users/ps1dr3x/orgs",
         "received_events_url" : "https://api.github.com/users/ps1dr3x/received_events",
         "repos_url" : "https://api.github.com/users/ps1dr3x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ps1dr3x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ps1dr3x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ps1dr3x"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This was simpler than expected. I've opened a PR: #16022",
      "created_at" : "2019-05-13T23:30:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-492023169",
      "id" : 492023169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjAyMzE2OQ==",
      "updated_at" : "2019-05-13T23:30:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492023169",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing in favor of #16026, thank you for your help @ps1dr3x ð Hope you continue contributing in the future!",
      "created_at" : "2019-06-18T23:47:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16012#issuecomment-503352366",
      "id" : 503352366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16012",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzM1MjM2Ng==",
      "updated_at" : "2019-06-18T23:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503352366",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   }
]
