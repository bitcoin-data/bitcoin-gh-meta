[
   {
      "author_association" : "MEMBER",
      "body" : "Isn't there a risk this triggers unnecessary DNS seed lookups and/or fallback to fixed seeds?\r\n\r\nMaybe we should see if there's a way to get a signal from `network-online` to start the \"peers db isn't working out\" timers?",
      "created_at" : "2022-11-14T23:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1314551734",
      "id" : 1314551734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585OWne2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314551734/reactions"
      },
      "updated_at" : "2022-11-14T23:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314551734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Isn't there a risk this triggers unnecessary DNS seed lookups and/or fallback to fixed seeds?\r\n\r\nI'm not sure how Bitcoin Core handles that. That `systemd` page is quite verbose and it discourages the use of `network-online` target in many places, for many reasons. Here is the approach they endorse the most:\r\n\r\n```\r\nWatch rtnetlink and react to network configuration changes as they happen. This is usually the nicest solution, but not always the easiest.\r\n```\r\n\r\nThere is also quite a tirade on \"what does it mean to be online\" there, implying that `network-online` isn't really reliable. I think that depending on the discouraged parts of some external init systems is a bit problematic, because there are no hard guarantees, and because things might change without Bitcoin Core being aware of it, exposing it to potential trouble.\r\n\r\nI also checked my RaspiBlitz config and it looks like it doesn't use `network-online`, so we probably already have thousands of nodes using the proposed init template with no issues. The RaspiBlitz devs fetched the Bitcoin Core template a year ago, though: https://github.com/rootzoll/raspiblitz/issues/2826\r\n\r\nA few interesting quotes from `systemd` doc:\r\n\r\n> network-online.target is a target that actively waits until the network is âupâ, where the definition of âupâ is defined by the network management software. Usually it indicates a configured, routable IP address of some kind.\r\n\r\n> Reacting to local network configuration changes in daemon code is not particularly hard. In fact many well-known network-facing services running on Linux have been doing this for decades. A service written like this is robust, can be started at any time, and will always do the best of the circumstances it is running in.\r\n\r\n> A robust system boots up independently of external services. More specifically, if a network DHCP server does not react, this should not slow down boot on most setups, but only for those where network connectivity is strictly needed (for example, because the host actually boots from the network). ",
      "created_at" : "2022-11-15T11:52:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1315202404",
      "id" : 1315202404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585OZGVk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315202404/reactions"
      },
      "updated_at" : "2022-11-15T11:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315202404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1189245?v=4",
         "events_url" : "https://api.github.com/users/bubelov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bubelov/followers",
         "following_url" : "https://api.github.com/users/bubelov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bubelov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bubelov",
         "id" : 1189245,
         "login" : "bubelov",
         "node_id" : "MDQ6VXNlcjExODkyNDU=",
         "organizations_url" : "https://api.github.com/users/bubelov/orgs",
         "received_events_url" : "https://api.github.com/users/bubelov/received_events",
         "repos_url" : "https://api.github.com/users/bubelov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bubelov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bubelov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bubelov"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could this change re-introduce errors like [that](https://github.com/bitcoin/bitcoin/issues/26493#issuecomment-1326857796)?",
      "created_at" : "2022-11-25T11:46:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1327377656",
      "id" : 1327377656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585PHiz4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327377656/reactions"
      },
      "updated_at" : "2022-11-25T12:33:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327377656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2022-11-25T11:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1327377680",
      "id" : 1327377680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585PHi0Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327377680/reactions"
      },
      "updated_at" : "2022-11-25T11:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327377680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26495#discussion_r1032385535"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26495"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032385535"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this change finds reviewers' support, isn't cleaner to just revert d9392b724cae53b7a16fa5f84ebe152eea496502?",
      "commit_id" : "0e34096b93f287038c03a45a6e69cc22d969e4f5",
      "created_at" : "2022-11-25T11:57:14Z",
      "diff_hunk" : "@@ -14,8 +14,7 @@ Description=Bitcoin daemon\n Documentation=https://github.com/bitcoin/bitcoin/blob/master/doc/init.md\n \n # https://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/\n-After=network-online.target\n-Wants=network-online.target\n+After=network.target",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#discussion_r1032385535",
      "id" : 1032385535,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII5849iPP_",
      "original_commit_id" : "0e34096b93f287038c03a45a6e69cc22d969e4f5",
      "original_line" : 17,
      "original_position" : 6,
      "original_start_line" : 17,
      "path" : "contrib/init/bitcoind.service",
      "position" : 6,
      "pull_request_review_id" : 1194336663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26495",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032385535/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 17,
      "start_side" : "LEFT",
      "updated_at" : "2022-11-25T11:57:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032385535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's unclear what the next steps are here, given the discussion in #26493, and the fact that other projects have moved to using `network-online.target` (https://github.com/fort-nix/nix-bitcoin/pull/567), to fix issues with bitcoind. Going to close this for now, and discussion can continue in #26493.",
      "created_at" : "2023-02-08T10:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1422347744",
      "id" : 1422347744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585Ux03g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1422347744/reactions"
      },
      "updated_at" : "2023-02-08T10:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1422347744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
