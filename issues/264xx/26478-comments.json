[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "For reference, the issue that was reportedly fixed in 24.0 is:\r\n\r\nhttps://github.com/bitcoin/bitcoin/issues/24980 (via https://github.com/bitcoin-core/gui/commit/2d0b4e4ff66e60c85f86c526a53f8fb242ebb7d0)",
      "created_at" : "2022-11-10T13:20:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310273092",
      "id" : 1310273092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OGS5E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310273092/reactions"
      },
      "updated_at" : "2022-11-10T13:20:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310273092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, I must admit I overlooked the line `Get SOCKS port command yielded [::]:9050` in the log. Seems like bitcoind is getting the wrong proxy IP from the control port.\r\n\r\nInvestigating, I'll report backâ¦",
      "created_at" : "2022-11-10T13:58:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310319465",
      "id" : 1310319465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OGeNp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310319465/reactions"
      },
      "updated_at" : "2022-11-10T14:18:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310319465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I fixed this in my Tor config. I replaced my previous SocksPort configuration\r\n\r\n```\r\nSocksPort 0.0.0.0:${TOR_SOCKS_PORT} SocksPort [::]:${TOR_SOCKS_PORT}\r\n```\r\n\r\nwith\r\n\r\n```\r\nSocksPort tor:${TOR_SOCKS_PORT}\r\n```\r\n\r\n(again, `tor` being the hostname of my tor container)\r\n\r\nIt would be nice if Tor would allow to bind the proxy to any network (like in my previous config), but still yielded a non-localhost address via control port, especially if the request comes from non-localhost (maybe aided by another configuration option). I'll probably open a feature request there.\r\n\r\nAnyway, I'll close this as it's clearly not an issue with bitcoind.",
      "created_at" : "2022-11-10T15:43:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310486180",
      "id" : 1310486180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OHG6k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310486180/reactions"
      },
      "updated_at" : "2022-11-10T15:43:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310486180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> [tor] Get SOCKS port command yielded [::]:9050\r\n> [tor] Configuring onion proxy for 127.0.0.1:9050\r\n\r\nA bit unrelated, but how come `[::]:9050` got converted to `127.0.0.1:9050`? This means that here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9dce30194bc07463d634072251a8bf83e1b10ff9/src/torcontrol.cpp#L361-L383\r\n\r\n`LookupNumeric(\"[::]:9050\")` must have returned an invalid result, but it should not and there is a test for that:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9dce30194bc07463d634072251a8bf83e1b10ff9/src/test/netbase_tests.cpp#L143\r\n\r\nAnyway, if you have more than one `SocksPort` in `torrc` does the tor daemon deterministically return always the first or the last one? If yes, then maybe a workaround is to use something like:\r\n\r\n```\r\nSOCKSPort 0.0.0.0:9050\r\nSOCKSPort 10.0.0.1:9050\r\n```",
      "created_at" : "2022-11-10T18:19:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310708927",
      "id" : 1310708927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OH9S_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310708927/reactions"
      },
      "updated_at" : "2022-11-10T18:19:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310708927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild Good idea with the workaround, but get this error with tor if I try:\r\n\r\n```\r\n[warn] Failed to parse/validate config: Failed to bind one of the listener ports.\r\n```\r\n\r\nThis is probably expected, as in your example `10.0.0.1` is a subset of `0.0.0.0`.\r\n\r\nI can't tell about your other finding, it's probably a bug? I'd expect bitcoind to manage the proxy address fully automatic if I use a control port.",
      "created_at" : "2022-11-10T20:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310841316",
      "id" : 1310841316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OIdnk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310841316/reactions"
      },
      "updated_at" : "2022-11-10T20:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310841316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Shall we open a new issue about the wrong `[::]` conversion?",
      "created_at" : "2022-11-10T20:26:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1310854854",
      "id" : 1310854854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OIg7G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310854854/reactions"
      },
      "updated_at" : "2022-11-10T20:26:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310854854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, listing both `0.0.0.0` and `10.0.0.1` is too naive :( looks like the only option is to list all addresses explicitly instead of `0.0.0.0` and figure out if it deterministically returns e.g. the first one.\r\n\r\nI see now how `[::]:9050` gets flipped to `127.0.0.1` - on line 377 above, `[::]` is considered an invalid address by `IsValid()`, so `// Fallback to old behaviour` happens. This is actually ok, because we wouldn't be able to connect to `[::]:9050`. Tor shouldn't really be returning that.",
      "created_at" : "2022-11-11T10:13:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1311498389",
      "id" : 1311498389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OK-CV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311498389/reactions"
      },
      "updated_at" : "2022-11-11T10:14:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311498389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm glad you found out what caused the replacement to `127.0.0.1`.\r\n\r\nI've opened an issue with tor about an additional option to return a more sensible result in such case:\r\n\r\nhttps://gitlab.torproject.org/tpo/core/tor/-/issues/40714",
      "created_at" : "2022-11-11T12:00:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26478#issuecomment-1311610292",
      "id" : 1311610292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26478",
      "node_id" : "IC_kwDOABII585OLZW0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311610292/reactions"
      },
      "updated_at" : "2022-11-11T12:00:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311610292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   }
]
