[
   {
      "body" : "You need to include test_bitcoin.h in BITCOIN_TESTS in Makefile.test.include.",
      "created_at" : "2014-08-12T20:31:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51972671",
      "id" : 51972671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T20:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51972671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "> 2. Creating test blocks requires proof-of-work.\r\n\r\nThis is what regtest mode is for. (The pull tester currently uses it for dynamically creating blocks to test)",
      "created_at" : "2014-08-12T20:57:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51976183",
      "id" : 51976183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T20:57:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51976183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell  Yes I know, but test_bitcoin is run in MainNet, so to test MainNet specific things (such as the majority rule) I need to create blocks and skip the PoW verification.",
      "created_at" : "2014-08-12T21:07:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51977653",
      "id" : 51977653,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:07:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51977653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "How can I update this pull request to add test_bitcoin.h into BITCOIN_TESTS in Makefile.test.include ?\r\nDo I have to create a new pull request ?\r\nIn that case, all current comments will be lost...",
      "created_at" : "2014-08-12T21:08:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51977790",
      "id" : 51977790,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:08:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51977790",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "There should be no mainnet behavior which is not testable by regtest, if there isÃ¢ÂÂ it should be fixed. The sole reason for regtest existing is exactly this case: regular mainnet blocks are too hard to create on the fly in tests.",
      "created_at" : "2014-08-12T21:21:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51979391",
      "id" : 51979391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:21:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51979391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Regnet class inherits from TestNet, and not from MainNet. But that is is unimportant.\r\nOne difference is nSubsidyHalvingInterval = 150;\r\n",
      "created_at" : "2014-08-12T21:28:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51980253",
      "id" : 51980253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:28:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51980253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Yes, nSubsidyHalvingInterval = 150 is for exactly the same reason: otherwise the subsidy halving interval is not testable from the tests (well, without making 210000 blocks, of course). If some different number would be better for the tests it could be changed to that (obviously the blockchain tester would have to be updated).",
      "created_at" : "2014-08-12T21:30:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51980525",
      "id" : 51980525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51980525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Even if there is another procedure to create block test cases using another language and another framework (Java, BitcoinJ), I found really useful to be create testcases in the same unit test framework, the same language and the same source tree. It's much easier.\r\n\r\nIn fact, in another pull request we're working on, we're proposing modifications and we wrote extensive test cases using the internal and more natural framework.\r\n\r\nBTW, where is the documentation about how to append testcases run by TheBlueMatt in his BitcoinJ node?\r\n",
      "created_at" : "2014-08-12T21:34:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51980939",
      "id" : 51980939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:37:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51980939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "You can test it in the MainNet with the current test framework improvement. You create 2017 blocks on-the-fly, you check. Very straightforward.",
      "created_at" : "2014-08-12T21:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51981217",
      "id" : 51981217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51981217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Creating an almost empty block on-the-fly currently takes a less than a few milliseconds. We could benchmark it.",
      "created_at" : "2014-08-12T21:39:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51981581",
      "id" : 51981581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:39:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51981581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Even if there were another thousands ways of testing bitcoind, improving the test framework and letting people add more test cases is a good thing.\r\n",
      "created_at" : "2014-08-12T21:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51981782",
      "id" : 51981782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51981782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Internal testing of the blockchain behavior isn't all that fantastic generally, because most mistakes will agree with themselves. The idea of an external harness is that it can be a reference point for behavior.  I fully agree that more tests and more ways of testing is good.  What I am not happy with a extra POW bypass dropped into the consensus critical code, especially when the justification is redundant with existing infrastructure.\r\n\r\nThe subsidy halving interval in mainnet is 210000 blocks, you're confusing it with the retargeting interval. I suppose you could create 210000 blocks in a test but that would be needlessly slow.",
      "created_at" : "2014-08-12T21:44:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51982128",
      "id" : 51982128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:44:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51982128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Oops! yes. ",
      "created_at" : "2014-08-12T21:45:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51982257",
      "id" : 51982257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:45:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51982257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "If an attacker is able to change the value of supressCheckBlockWork at will when there is no compiled code to do it (in bitcoind), he is also probably able to read the process memory and extract the private keys.\r\nNevertheless I understand your concerns.\r\n",
      "created_at" : "2014-08-12T21:52:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51982994",
      "id" : 51982994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T21:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51982994",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Another difference is that MainNet rejects forwarding non-standard transactions, and RegNet allows it.\r\nWe can switch to RegNet for test_bitcoin. Then we can omit the POW skip, and we get a better testing framework without any possible theoretical security implication. But I suppose that there are test cases testing non-standard tx rules, so we can't easily switch.\r\nAt the end, using supressCheckBlockWork in the MainNet is the closest to the \"real\" thing one can test dynamically.\r\n\r\n",
      "created_at" : "2014-08-12T22:06:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51984611",
      "id" : 51984611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T22:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51984611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Again, regtest was created for this purpose. To the extent that regtest has shortcomings we should fix regtest.  The initial version of regtest was a set of patches that overlaid on top of bitcoin and changed mainnet rules.  When it was merged in as chain params it inhereted testnet but I think there is no reason regtest should be testnet based, IIRC the pull tester does no outside of block transactions, so IsStandard shouldn't be relevant... and I think it can just be switched.",
      "created_at" : "2014-08-12T22:11:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-51985074",
      "id" : 51985074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-12T22:11:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51985074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Great work Sergio, I didn't review it yet but this has been a big need for a while now.\r\n\r\nThe pull tester does use various non-standard scripts but mostly because it's kind of lazy. It could be fixed.\r\n\r\nRe: adding tests to it. The current code is kind of gross and Matt talks about rewriting it quite often. I'd hope it'd get better documentation as part of that, if he does it. There is at least a documented build process now which is something. But having tests both in-tree and in the pull tester is not a bad thing.",
      "created_at" : "2014-08-17T17:00:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52427893",
      "id" : 52427893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-17T17:00:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52427893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Why are the wallet-related changes in here? I mean dbenv/wallet/walletdb. As this tests block chain behavior, I'm not sure why those have to change.\r\n",
      "created_at" : "2014-08-18T11:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52479017",
      "id" : 52479017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-18T11:14:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52479017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Agree with @gmaxwell to prefer using regtest mode for these tests instead of adding a `supressCheckBlockWork` to main. I wouldn't want this flag to be ever toggled accidentally on mainnet, and regtest already offers this functionailty anyway.",
      "created_at" : "2014-08-18T11:18:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52479567",
      "id" : 52479567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-18T11:18:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52479567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4688_a7555d6f6430aa2ddc83404ae9b627d7d0dd1f6f/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-18T18:03:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52530589",
      "id" : 52530589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-18T18:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52530589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@laanwj The wallet code required change in the way a BerkeleyDB handle was accessed: from direct access to the handle to indirect access though a pointer to a handle. This is because one of the objectives of this patch was to be able to destroy and re-create a block-chain programmaticaly.  BerkeleyDB handles do not allow to be re-opened after closing them, so was the necessity to delete the handle object and create a new one. The were other solutions: e.g. changing the bitdb global variable from an object to a pointer to an object, which is the same, and requires more updates in other parts of the codebase. \r\n\r\nRegarding the regtest mode, if you all agree I will update this pull request to:\r\n- Remove supressCheckBlockWork flag\r\n- Switch the test framework to regtest.\r\n",
      "created_at" : "2014-08-18T21:39:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52559178",
      "id" : 52559178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-18T21:39:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52559178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "@SergioDemianLerner Completely agree about programmatically destroying and re-creating block chains, but I'm still not sure how that relates to the wallet DB environment. Does the BDB environment need to be reinitialized every time you create a new block chain? I think this is just extra overhead - especially as you're not doing anything with the wallet in your tests.\r\n\r\nMaybe we could separate out the wallet testing so all that happens only once.\r\n",
      "created_at" : "2014-08-19T08:38:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52605041",
      "id" : 52605041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-19T08:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52605041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj There are several reasons why the wallet need to be re-created in test_bitcoin when the block-chain is re-created. First, all wallet-transactions will be invalid, since those transactions will be based on coinbases that do not exist anymore. Second, when the block-chain is destroyed in test_bitcoin, all temporary files are removed (the block-chain is stored in a temporary directory whose name depends on the current date-time). When a new block-chain is created, a new temporary directory is also created. Then, the previous BDB wallet files are deleted. The new wallet is stored on a new directory. That's the main reason.\r\n\r\nNevertheless, we could destroy the block-chain without destroying the wallet, and re-create the block-chain in the same temporary directory. But I don't know how the Bitcoin core will handle a wallet completely unsynchronized with the block-chain. The code should probably clear the wallet anyway. Does it have a way to clear all the keys? I must check.\r\n\r\nThe reasons given are only true for testing (test_bitcoin). For production (bitcoind) is probably wise to have methods to destruct/create the block-chain without altering the wallet and vice-versa. But still, to re-create the wallet (because of a corruption error, for example), one needs to destroy and create an new BDB handle, so the same code changes will be needed to repair a wallet programmaticaly and keep the node working.\r\n\r\nI will be sending another pull-request with just the new testcases and the change to the regtest without the block-chain re-creation code, while we discuss this.\r\n\r\n",
      "created_at" : "2014-08-19T13:14:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-52631166",
      "id" : 52631166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-08-19T13:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52631166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Needs rebase.\r\n",
      "created_at" : "2014-10-22T10:58:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-60067838",
      "id" : 60067838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2014-10-22T10:58:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60067838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm going to replace this by out-of-tree RPC tests. I've written weird block generation code in Python, so we can just test these things externally without having unit tests with side effects or a dependent order (or having to change a lot of nontest code).",
      "created_at" : "2015-01-30T11:01:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4688#issuecomment-72185258",
      "id" : 72185258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4688",
      "updated_at" : "2015-01-30T11:01:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72185258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
