[
   {
      "author_association" : "MEMBER",
      "body" : "ACK 92528c260e9bd5d36da4b017098a49fda5051154 (only looked at the diff on GitHub)",
      "created_at" : "2019-08-26T18:45:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-524980739",
      "id" : 524980739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDk4MDczOQ==",
      "updated_at" : "2019-08-26T18:45:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524980739",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 92528c260e9bd5d36da4b017098a49fda5051154 -- diff looks correct\r\n\r\nRelated: https://github.com/bitcoin/bitcoin/pull/16572#issuecomment-521628502\r\n\r\n`std::vector<bool>` gotcha illustrated:\r\n\r\n```\r\n    std::vector<char> v1;\r\n    for (const auto& x : v1) {\r\n      // const char& x (as expected)\r\n    }\r\n\r\n    std::vector<int> v2;\r\n    for (const auto& x : v2) {\r\n      // const int& x (as expected)\r\n    }\r\n\r\n    std::vector<bool> v3;\r\n    for (const auto& x : v3) {\r\n      // const std::_Bit_reference& x (ð)\r\n    }\r\n```",
      "created_at" : "2019-08-26T18:56:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-524985077",
      "id" : 524985077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDk4NTA3Nw==",
      "updated_at" : "2019-08-26T18:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524985077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/16730/commits/92528c260e9bd5d36da4b017098a49fda5051154\r\n\r\nLow-risk change, reviewed on Github.",
      "created_at" : "2019-08-26T19:17:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-524992994",
      "id" : 524992994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDk5Mjk5NA==",
      "updated_at" : "2019-08-26T19:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524992994",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/16730/commits/92528c260e9bd5d36da4b017098a49fda5051154\r\n\r\n* diff looks correct\r\n* confirmed the included test doesn't build without the source change\r\n\r\n```\r\nIn file included from test/serialize_tests.cpp:5:\r\n./serialize.h:602:7: error: no member named 'Serialize' in 'std::__1::__bit_const_reference<std::__1::vector<bool, std::__1::allocator<bool> > >'\r\n    a.Serialize(os);\r\n    ~ ^\r\n./serialize.h:721:11: note: in instantiation of function template specialization 'Serialize<CHashWriter, std::__1::__bit_const_reference<std::__1::vector<bool, std::__1::allocator<bool> > > >' requested here\r\n        ::Serialize(os, (*vi));\r\n          ^\r\n./serialize.h:727:5: note: in instantiation of function template specialization 'Serialize_impl<CHashWriter, bool, std::__1::allocator<bool>, bool>' requested here\r\n    Serialize_impl(os, v, T());\r\n    ^\r\n./hash.h:154:11: note: in instantiation of function template specialization 'Serialize<CHashWriter, bool, std::__1::allocator<bool> >' requested here\r\n        ::Serialize(*this, obj);\r\n          ^\r\n./hash.h:199:8: note: in instantiation of function template specialization 'CHashWriter::operator<<<std::__1::vector<bool, std::__1::allocator<bool> > >' requested here\r\n    ss << obj;\r\n       ^\r\ntest/serialize_tests.cpp:267:40: note: in instantiation of function template specialization 'SerializeHash<std::__1::vector<bool, std::__1::allocator<bool> > >' requested here\r\n    BOOST_CHECK(SerializeHash(vec1) == SerializeHash(vec2));\r\n                                       ^\r\n1 error generated.\r\n```",
      "created_at" : "2019-08-27T00:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-525080778",
      "id" : 525080778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNTA4MDc3OA==",
      "updated_at" : "2019-08-27T00:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525080778",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "We don't want to define serialization to be a bit vector?\r\n\r\nWe're not using a `std::vector<bool>` serialized as bytes right now are we?",
      "created_at" : "2019-08-27T04:12:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-525129077",
      "id" : 525129077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNTEyOTA3Nw==",
      "updated_at" : "2019-08-27T04:12:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525129077",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@JeremyRubin It's just for hashing, it doesn't really matter.",
      "created_at" : "2019-08-27T05:53:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-525149599",
      "id" : 525149599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNTE0OTU5OQ==",
      "updated_at" : "2019-08-27T05:53:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525149599",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@JeremyRubin Longer answer: I think the expected serialization of `std::vector<bool>` is that it's serialized as any other vector would be serialized (compact length + serialization of each of the individual elements). If we want something that's serialized as a bitpacked array, we can introduce a BitPacker wrapper to serialize.h or so.",
      "created_at" : "2019-08-27T23:52:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-525526776",
      "id" : 525526776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNTUyNjc3Ng==",
      "updated_at" : "2019-08-27T23:52:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525526776",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I would think the reason to worry about the serialization for hashing with a bitpacked array is that the incoming message can be hashed and it will be equivalent to the hash of the deserializaed struct.\r\n\r\nAgree the best way to do this is by having a different type for a BitPacked serialization.",
      "created_at" : "2019-08-29T22:44:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16730#issuecomment-526389073",
      "id" : 526389073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16730",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjM4OTA3Mw==",
      "updated_at" : "2019-08-29T22:44:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526389073",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   }
]
