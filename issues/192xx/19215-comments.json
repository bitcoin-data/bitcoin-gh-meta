[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #17034 (Bip174 extensions by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-08T23:58:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-640948474",
      "id" : 640948474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDk0ODQ3NA==",
      "updated_at" : "2020-06-08T23:58:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640948474",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Could you explain further what you mean by including `non_witness_utxo` but not requiring it for signing?",
      "created_at" : "2020-06-09T05:27:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-641037445",
      "id" : 641037445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTAzNzQ0NQ==",
      "updated_at" : "2020-06-09T05:27:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641037445",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Could you explain further what you mean by including `non_witness_utxo` but not requiring it for signing?\r\n\r\n`non_witness_utxo` will be added to segwit inputs during updating. However Core's signer will not enforce that it exists for segwit inputs during signing - `witness_utxo` can be provided instead. I.e. signing will not fail if a segwit input only has a `segwit_utxo`.",
      "created_at" : "2020-06-09T06:03:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-641050304",
      "id" : 641050304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTA1MDMwNA==",
      "updated_at" : "2020-06-09T06:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641050304",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I tested 836d6fc with a Trezor, Ledger Nano X and Nano S that this doesn't break old firmware and seems to work nicely with new firmware, see https://github.com/bitcoin-core/HWI/pull/340",
      "created_at" : "2020-06-17T18:45:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-645553794",
      "id" : 645553794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NTU1Mzc5NA==",
      "updated_at" : "2020-06-17T18:45:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645553794",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-06-24T19:33:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-649023623",
      "id" : 649023623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0OTAyMzYyMw==",
      "updated_at" : "2020-06-24T19:33:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/649023623",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK. I think we'll want this for 0.20.1",
      "created_at" : "2020-06-29T15:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-651207765",
      "id" : 651207765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTIwNzc2NQ==",
      "updated_at" : "2020-06-29T15:52:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651207765",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr @Sjors mind to re-ACK?",
      "created_at" : "2020-06-29T17:25:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-651256364",
      "id" : 651256364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTI1NjM2NA==",
      "updated_at" : "2020-06-29T17:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651256364",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447876012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447876012"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: show both UTXOs in decodepsbt\" (72f6bec1da198764d4648a10a61c485e7ab65e9e)\r\n\r\nNote: Commit description mentions allowing both \"witness_utxo\" and \"non_witness_utxo\" fields, but it doesn't mention the slight change in behavior here.\r\n\r\nAfter this change `have_all_utxos` is true unless there's an input with no utxo information or an input with either \"witness_utxo\" or \"non_witness_utxo\" information containing an invalid amount.\r\n\r\nBefore this change `have_all_utxos` used to be true if there was an input with both witness and non-witness utxo information and the witness amount was valid but the non-witness amount was invalid.\r\n\r\nI guess an effect of this is that fee may not be shown in some cases it would have been shown before.",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-06-30T17:57:33Z",
      "diff_hunk" : "@@ -1132,7 +1135,9 @@ UniValue decodepsbt(const JSONRPCRequest& request)\n                 // Hack to just not show fee later\n                 have_all_utxos = false;\n             }\n-        } else {\n+            have_a_utxo = true;\n+        }\n+        if (!have_a_utxo) {\n             have_all_utxos = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447876012",
      "id" : 447876012,
      "line" : 1141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg3NjAxMg==",
      "original_commit_id" : "72f6bec1da198764d4648a10a61c485e7ab65e9e",
      "original_line" : 1141,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 27,
      "pull_request_review_id" : 440258621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:24:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447876012",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447889473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447889473"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"psbt: always put a non_witness_utxo and don't remove it\" (46004790588c24174a0bec49b540d158ce163ffd)\r\n\r\nCan this comment be elaborated a little? I haven't been following this closely and don't know what in segwit v1 makes it safe to clear the non_witness_utxo transaction when signing offline.",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-06-30T18:20:24Z",
      "diff_hunk" : "@@ -136,8 +136,8 @@ void PSBTInput::Merge(const PSBTInput& input)\n {\n     if (!non_witness_utxo && input.non_witness_utxo) non_witness_utxo = input.non_witness_utxo;\n     if (witness_utxo.IsNull() && !input.witness_utxo.IsNull()) {\n+        // TODO: For segwit v1, we will want to clear out the non-witness utxo when setting a witness one. For v0 and non-segwit, this is not safe",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447889473",
      "id" : 447889473,
      "line" : 139,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg4OTQ3Mw==",
      "original_commit_id" : "46004790588c24174a0bec49b540d158ce163ffd",
      "original_line" : 139,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : 19,
      "pull_request_review_id" : 440258621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:24:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447889473",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky Context: https://blog.trezor.io/details-of-firmware-updates-for-trezor-one-version-1-9-1-and-trezor-model-t-version-2-3-1-1eba8f60f2dd\n\nBIP341 (taproot, which will hopefully become witness v1) proposes signing all prevout amounts/scriptpubkeys in every (sighash_all) input, making this attack impossible.",
      "created_at" : "2020-06-30T18:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-651966508",
      "id" : 651966508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTk2NjUwOA==",
      "updated_at" : "2020-06-30T18:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651966508",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447902445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447902445"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Before this PR, it wouldn't have been possible to have an input with both witness and non-witness utxo information. Such a PSBT wouldn't even make it to this step.",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-06-30T18:43:14Z",
      "diff_hunk" : "@@ -1132,7 +1135,9 @@ UniValue decodepsbt(const JSONRPCRequest& request)\n                 // Hack to just not show fee later\n                 have_all_utxos = false;\n             }\n-        } else {\n+            have_a_utxo = true;\n+        }\n+        if (!have_a_utxo) {\n             have_all_utxos = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r447902445",
      "id" : 447902445,
      "in_reply_to_id" : 447876012,
      "line" : 1141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkwMjQ0NQ==",
      "original_commit_id" : "72f6bec1da198764d4648a10a61c485e7ab65e9e",
      "original_line" : 1141,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 27,
      "pull_request_review_id" : 440290706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:43:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447902445",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 84d295e51341a126a6c3cbeea7a8caa04c7b5bc3 (didn't retest compared to 836d6fc, but fortunately HWI's CI tracks our master branch, with a bunch of hardware wallet simulators) ",
      "created_at" : "2020-07-02T19:11:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-653177128",
      "id" : 653177128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MzE3NzEyOA==",
      "updated_at" : "2020-07-02T19:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/653177128",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449239668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449239668"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"psbt: Allow both non_witness_utxo and witness_utxo\" (5279d8bc07d601fe6a67ad665fbc7591fe73c7de):\r\n\r\nPreviously we didn't allow both witness and non-witness utxos. Now we do allow them but we aren't checking if they are consistent. It seems like instead of removing the IsSane checks, it'd be better to keep them and verify \r\n`non_witness_utxo->vout[prevout_index] == witness_utxo` if both witness_utxo and non_witness_utxo are present.",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-07-02T20:02:24Z",
      "diff_hunk" : "@@ -158,18 +150,6 @@ void PSBTInput::Merge(const PSBTInput& input)\n     if (final_script_witness.IsNull() && !input.final_script_witness.IsNull()) final_script_witness = input.final_script_witness;\n }\n \n-bool PSBTInput::IsSane() const\n-{\n-    // Cannot have both witness and non-witness utxos",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449239668",
      "id" : 449239668,
      "line" : 163,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIzOTY2OA==",
      "original_commit_id" : "5279d8bc07d601fe6a67ad665fbc7591fe73c7de",
      "original_line" : 163,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : 31,
      "pull_request_review_id" : 441985088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-02T20:09:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449239668",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449253576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449253576"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we can add checks in a followup.\r\n\r\nI'm also uncertain about adding application logic checks that would disallow deserialization. The PSBT could be correctly formatted but contain the wrong UTXOs or scripts. We might still want to allow `decodepsbt` to show the PSBT, but not allow updating or signing it.",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-07-02T20:35:19Z",
      "diff_hunk" : "@@ -158,18 +150,6 @@ void PSBTInput::Merge(const PSBTInput& input)\n     if (final_script_witness.IsNull() && !input.final_script_witness.IsNull()) final_script_witness = input.final_script_witness;\n }\n \n-bool PSBTInput::IsSane() const\n-{\n-    // Cannot have both witness and non-witness utxos",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449253576",
      "id" : 449253576,
      "in_reply_to_id" : 449239668,
      "line" : 163,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI1MzU3Ng==",
      "original_commit_id" : "5279d8bc07d601fe6a67ad665fbc7591fe73c7de",
      "original_line" : 163,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : 31,
      "pull_request_review_id" : 442002813,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-02T20:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449253576",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449260304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449260304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree, the check would be nice but its not necessary for merge",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-07-02T20:52:00Z",
      "diff_hunk" : "@@ -158,18 +150,6 @@ void PSBTInput::Merge(const PSBTInput& input)\n     if (final_script_witness.IsNull() && !input.final_script_witness.IsNull()) final_script_witness = input.final_script_witness;\n }\n \n-bool PSBTInput::IsSane() const\n-{\n-    // Cannot have both witness and non-witness utxos",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r449260304",
      "id" : 449260304,
      "in_reply_to_id" : 449239668,
      "line" : 163,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI2MDMwNA==",
      "original_commit_id" : "5279d8bc07d601fe6a67ad665fbc7591fe73c7de",
      "original_line" : 163,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : 31,
      "pull_request_review_id" : 442011432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-02T20:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449260304",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added to #19224 for backport.",
      "created_at" : "2020-07-03T01:38:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-653286848",
      "id" : 653286848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MzI4Njg0OA==",
      "updated_at" : "2020-07-03T01:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/653286848",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is there any way to get `walletprocesspsbt` not to add the `non_witness_utxo` now?\r\n\r\nMy use case is offline signing of PSBTs via printed QR codes, and this makes that much more difficult since the PSBTs can be so much bigger now.\r\n\r\nI understand why Trezor requires this, but I'm not concerned about that attack vector.",
      "created_at" : "2020-07-14T15:42:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-658254214",
      "id" : 658254214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1ODI1NDIxNA==",
      "updated_at" : "2020-07-14T15:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658254214",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31543633?v=4",
         "events_url" : "https://api.github.com/users/bitcoinhodler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bitcoinhodler/followers",
         "following_url" : "https://api.github.com/users/bitcoinhodler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bitcoinhodler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bitcoinhodler",
         "id" : 31543633,
         "login" : "bitcoinhodler",
         "node_id" : "MDQ6VXNlcjMxNTQzNjMz",
         "organizations_url" : "https://api.github.com/users/bitcoinhodler/orgs",
         "received_events_url" : "https://api.github.com/users/bitcoinhodler/received_events",
         "repos_url" : "https://api.github.com/users/bitcoinhodler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bitcoinhodler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bitcoinhodler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bitcoinhodler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@bitcoinhodler that could be achieved by adding an argument to that RPC call. For the GUI that would cause additional clutter, but perhaps an \"advanced\" section in the Send or PSBT dialog is useful anyway. ",
      "created_at" : "2020-07-14T15:46:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#issuecomment-658256578",
      "id" : 658256578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19215",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1ODI1NjU3OA==",
      "updated_at" : "2020-07-14T15:46:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658256578",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r454667718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/454667718"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: show both UTXOs in decodepsbt\" (72f6bec1da198764d4648a10a61c485e7ab65e9e)\r\n\r\nNote: Bug here is fixed in #19517 (changing `else if` to `if` can allow `total_in` to be incremented twice with the same amount)",
      "commit_id" : "84d295e51341a126a6c3cbeea7a8caa04c7b5bc3",
      "created_at" : "2020-07-14T21:53:41Z",
      "diff_hunk" : "@@ -1121,7 +1122,9 @@ UniValue decodepsbt(const JSONRPCRequest& request)\n             ScriptToUniv(txout.scriptPubKey, o, true);\n             out.pushKV(\"scriptPubKey\", o);\n             in.pushKV(\"witness_utxo\", out);\n-        } else if (input.non_witness_utxo) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19215#discussion_r454667718",
      "id" : 454667718,
      "line" : 1124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY2NzcxOA==",
      "original_commit_id" : "72f6bec1da198764d4648a10a61c485e7ab65e9e",
      "original_line" : 1124,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 12,
      "pull_request_review_id" : 448493404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19215",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-14T21:53:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/454667718",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
