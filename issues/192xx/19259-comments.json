[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21380 (versionbits: Refactor and add fuzzing harness by ajtowns)\n* #21377 (Speedy trial support for versionbits by ajtowns)\n* #21244 (Move GetDataDir to ArgsManager by kiminuo)\n* #21142 (fuzz: Add tx_pool fuzz target by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-13T02:51:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-643558083",
      "id" : 643558083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzU1ODA4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-15T18:00:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643558083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-11T10:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-657039294",
      "id" : 657039294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzAzOTI5NA==",
      "updated_at" : "2020-07-11T10:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657039294",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-18T07:45:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-660444972",
      "id" : 660444972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDQ0NDk3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-18T07:45:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660444972",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I know this is sort of in-progress as there are outstanding UBSan warnings, but this won't compile on my macOS v10.15.4, clang 10.0.1. Needs a rebase I think.\r\n```\r\nMaking all in src\r\n  CXX      test/fuzz/addition_overflow-addition_overflow.o\r\nIn file included from test/fuzz/addition_overflow.cpp:7:\r\n./test/fuzz/util.h:347:13: error: no matching function for call to 'AdditionOverflow'\r\n        if (AdditionOverflow((uint64_t)fuzzed_file->m_offset, random_bytes.size())) {\r\n            ^~~~~~~~~~~~~~~~\r\n./test/fuzz/util.h:201:16: note: candidate template ignored: deduced conflicting types for parameter 'T' ('unsigned long long' vs. 'unsigned long')\r\nNODISCARD bool AdditionOverflow(const T i, const T j) noexcept\r\n               ^\r\n./test/fuzz/util.h:359:13: error: no matching function for call to 'AdditionOverflow'\r\n        if (AdditionOverflow(fuzzed_file->m_offset, n)) {\r\n            ^~~~~~~~~~~~~~~~\r\n./test/fuzz/util.h:201:16: note: candidate template ignored: deduced conflicting types for parameter 'T' ('long long' vs. 'long')\r\nNODISCARD bool AdditionOverflow(const T i, const T j) noexcept\r\n               ^\r\n2 errors generated.\r\nmake[2]: *** [test/fuzz/addition_overflow-addition_overflow.o] Error 1\r\nmake[1]: *** [all-recursive] Error 1\r\nmake: *** [all-recursive] Error 1\r\n```",
      "created_at" : "2020-08-18T13:48:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-675489315",
      "id" : 675489315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTQ4OTMxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T13:48:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675489315",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ Oh, thanks for letting me know. Now rebased and hopefully no compilation errors? :)",
      "created_at" : "2020-08-18T18:58:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-675655947",
      "id" : 675655947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTY1NTk0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T18:58:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675655947",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift now builds on my macOS :)",
      "created_at" : "2020-08-19T02:34:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-675816185",
      "id" : 675816185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTgxNjE4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T02:34:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675816185",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Had to rebase also this one to make use of the new `$(FUZZ_SUITE_LDFLAGS_COMMON)`.\r\n\r\nReview welcome :)",
      "created_at" : "2020-09-17T13:30:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-694235820",
      "id" : 694235820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NDIzNTgyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-17T13:30:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/694235820",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Will review and run on DO while I figure out a better fuzzing setup!",
      "created_at" : "2020-09-26T15:25:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-699509769",
      "id" : 699509769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTUwOTc2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-26T15:25:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699509769",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This [input](https://github.com/Crypt-iQ/crypt-iq.github.io/blob/master/19259_review/0927_corpus_rootdir/077acab225c2a7622541b5f4864b2caa41568548) gives the following signed-integer-overflow on ubuntu with clang 10:\r\n<details>\r\n<summary>signed-integer-overflow</summary>\r\n\r\n```\r\ntxmempool.cpp:830:15: runtime error: signed integer overflow: -9223372036854775808 + -432345564227567616 cannot be represented in type 'long'\r\n    #0 0x562feec1bfbb in CTxMemPool::PrioritiseTransaction(uint256 const&, long const&) /root/bitcoin/src/txmempool.cpp:830:15\r\n    #1 0x562feed75db5 in LoadMempool(CTxMemPool&, std::function<_IO_FILE* (boost::filesystem::path const&, char const*)>) /root/bitcoin/src/validation.cpp:5074:22\r\n    #2 0x562feebdfaf4 in test_one_input(std::vector<unsigned char, std::allocator<unsigned char> > const&) /root/bitcoin/src/test/fuzz/validation_load_mempool.cpp:37:11\r\n    #3 0x562fefda9bd1 in LLVMFuzzerTestOneInput /root/bitcoin/src/test/fuzz/fuzz.cpp:45:5\r\n    #4 0x562feeae5331 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) (/root/bitcoin/src/test/fuzz/validation_load_mempool+0x1a50331)\r\n    #5 0x562feead0aa2 in fuzzer::RunOneTest(fuzzer::Fuzzer*, char const*, unsigned long) (/root/bitcoin/src/test/fuzz/validation_load_mempool+0x1a3baa2)\r\n    #6 0x562feead6556 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) (/root/bitcoin/src/test/fuzz/validation_load_mempool+0x1a41556)\r\n    #7 0x562feeaff212 in main (/root/bitcoin/src/test/fuzz/validation_load_mempool+0x1a6a212)\r\n    #8 0x7f6de830db96 in __libc_start_main /build/glibc-2ORdQG/glibc-2.27/csu/../csu/libc-start.c:310\r\n    #9 0x562feeaab149 in _start (/root/bitcoin/src/test/fuzz/validation_load_mempool+0x1a16149)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: signed-integer-overflow txmempool.cpp:830:15 in\r\n```\r\n</details>\r\n\r\nThe log is from an older commit before rebase, it occurs [here](https://github.com/bitcoin/bitcoin/blob/08afafdfbaefba6a660436a3f94730f5976e69ae/src/txmempool.cpp#L835) . I think it happens because multiple identical transaction hashes are submitted to `PrioritiseTransaction` with different deltas, and then overflows due to the addition. Exact coverage of only this input run against the fuzzer [here](https://crypt-iq.github.io/19259_review/c0c5177b_077acab_run_1/fuzz.coverage/index.html) for more clarity.",
      "created_at" : "2020-10-04T21:32:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-703319218",
      "id" : 703319218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzMxOTIxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-04T21:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703319218",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ Thanks a lot for reviewing and reporting your finding. These signed integer overflows are covered in issue #19278 and fixed in PR #20089. Please consider reviewing the latter if you have time! :)",
      "created_at" : "2020-10-05T19:35:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-703844035",
      "id" : 703844035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzg0NDAzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T19:35:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703844035",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently trying to manually construct inputs that populate the mempool. Since FuzzedFileProvider is used in place of an actual file, the format is a little different and it seems the fuzzer has a hard time creating a valid transaction. The data stream is read from both the front (`ConsumeBytes`) and the back (`ConsumeIntegralInRange`). Also this fuzzer won't do anything on my Mac as `_GNU_SOURCE` isn't defined.",
      "created_at" : "2020-10-11T21:59:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-706773987",
      "id" : 706773987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjc3Mzk4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-11T21:59:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706773987",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code review ACK 08afafdfbaefba6a660436a3f94730f5976e69ae\r\n\r\nStill in the process of testing",
      "created_at" : "2020-10-17T21:10:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-711080902",
      "id" : 711080902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTA4MDkwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-17T21:10:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711080902",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 08afafdfbaefba6a660436a3f94730f5976e69ae\r\n\r\nCan view coverage here: https://crypt-iq.github.io/19259_review/c0c5177b_cov_run_ubuntu_3/\r\n(The coverage above was run on a different commit, but the coverage hasn't changed since then.)\r\n\r\nWith more cores or time or a hand-crafted input, the transactions would actually be accepted into the mempool, but my fuzzed inputs always failed tx verification after about a week straight.",
      "created_at" : "2020-11-08T09:52:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-723554089",
      "id" : 723554089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMzU1NDA4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-08T09:53:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723554089",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r531779017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/531779017"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Time could be mocked since in `LoadMempool` there is a call to `GetTime`. It could either be static or based on fuzz data. What do you think?",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2020-11-27T20:31:37Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize()\n+{\n+    static TestingSetup setup{CBaseChainParams::REGTEST, {\"-nodebuglogfile\"}};\n+}\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool;\n+    (void)LoadMempool(pool, fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r531779017",
      "id" : 531779017,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTc3OTAxNw==",
      "original_commit_id" : "08afafdfbaefba6a660436a3f94730f5976e69ae",
      "original_line" : 39,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 540184216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/531779017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r533399026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533399026"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point! Now fixed. Please re-review :)",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2020-12-01T13:17:09Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize()\n+{\n+    static TestingSetup setup{CBaseChainParams::REGTEST, {\"-nodebuglogfile\"}};\n+}\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool;\n+    (void)LoadMempool(pool, fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r533399026",
      "id" : 533399026,
      "in_reply_to_id" : 531779017,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM5OTAyNg==",
      "original_commit_id" : "08afafdfbaefba6a660436a3f94730f5976e69ae",
      "original_line" : 39,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 541883134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533399026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-15T18:41:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-745486317",
      "id" : 745486317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NTQ4NjMxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-15T18:41:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745486317",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 8939196\r\n\r\nOn arch Linux, clang-11 with UBSAN+ASAN\r\nCoverage: https://crypt-iq.github.io/19259_review/vlmcoverage_01072021/index.html",
      "created_at" : "2021-01-08T01:51:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-756496157",
      "id" : 756496157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NjQ5NjE1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-08T01:51:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/756496157",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-02-20T09:57:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-782598258",
      "id" : 782598258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjU5ODI1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-20T09:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782598258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebase number 12 completed :)\r\n\r\nNow using the recently introduced `MakeNoLogFileContext` which wasn't around when this fuzz testing PR was submitted nine months ago.\r\n\r\nAt nine months PR pregnancy: is this fuzz testing PR baby getting ready to meet the world (`master`)? :)",
      "created_at" : "2021-03-01T11:44:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-787885358",
      "id" : 787885358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4Nzg4NTM1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-01T11:45:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787885358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r592617191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592617191"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style nit, while touching this line, can update to braced initialization (same for line 5140)\r\n```diff\r\n-    FILE* filestr = mockable_fopen_function(GetDataDir() / \"mempool.dat\", \"rb\");\r\n+    FILE* filestr{mockable_fopen_function(GetDataDir() / \"mempool.dat\", \"rb\")};\r\n```\r\n ",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-11T18:39:57Z",
      "diff_hunk" : "@@ -5029,11 +5029,11 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n-bool LoadMempool(CTxMemPool& pool, CChainState& active_chainstate)\n+bool LoadMempool(CTxMemPool& pool, CChainState& active_chainstate, std::function<FILE*(const fs::path&, const char*)> mockable_fopen_function)\n {\n     const CChainParams& chainparams = Params();\n     int64_t nExpiryTimeout = gArgs.GetArg(\"-mempoolexpiry\", DEFAULT_MEMPOOL_EXPIRY) * 60 * 60;\n-    FILE* filestr = fsbridge::fopen(GetDataDir() / \"mempool.dat\", \"rb\");\n+    FILE* filestr = mockable_fopen_function(GetDataDir() / \"mempool.dat\", \"rb\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r592617191",
      "id" : 592617191,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjYxNzE5MQ==",
      "original_commit_id" : "d9b0d15607167cbfef52bcc73b964f1201b71796",
      "original_line" : 5036,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 610104571,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592617191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r592618016"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592618016"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n * standard library functions that set errno, or in other contexts where the value of errno\r\n```",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-11T18:40:46Z",
      "diff_hunk" : "@@ -260,6 +260,16 @@ void SetFuzzedErrNo(FuzzedDataProvider& fuzzed_data_provider, const std::array<T\n     errno = fuzzed_data_provider.PickValueInArray(errnos);\n }\n \n+/*\n+ * Sets a fuzzed errno in the range [0, 133 (EHWPOISON)]. Can be used from functions emulating\n+ * standard library functions that sets errno, or in other contexts where the value of errno",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r592618016",
      "id" : 592618016,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjYxODAxNg==",
      "original_commit_id" : "d9b0d15607167cbfef52bcc73b964f1201b71796",
      "original_line" : 265,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : null,
      "pull_request_review_id" : 610104571,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592618016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jonatack \r\n\r\nThanks a lot for reviewing!\r\n\r\nAll feedback addressed (+ added `using FopenFn` for readability): this PR should hopefully be ready for final review :)",
      "created_at" : "2021-03-11T22:46:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-797100259",
      "id" : 797100259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzEwMDI1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T06:48:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797100259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jonatack libfuzzer is in-process fuzzing with an in-memory corpus and I have noticed on my Arch box, that more inputs and larger inputs will make rss increase significantly.  In the crash log, I notice that the max length for inputs is 1MB. Just a thought. ",
      "created_at" : "2021-03-12T13:23:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-797487400",
      "id" : 797487400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzQ4NzQwMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T13:23:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797487400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ yes, for me this is a new issue (after a couple years of testing fuzz patches on this project) and only with qa-assets.",
      "created_at" : "2021-03-12T13:35:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-797493878",
      "id" : 797493878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzQ5Mzg3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T13:35:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797493878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK f00061202867dd965fe8ca51253d1600776f8ab0 per `git range-diff e0bc27a d9b0d15 f000612`,  looked over the changes again, fuzz build + ran fuzzer, debug non-fuzz build + ran/halted bitcoind a couple times on mainnet/signet, loading/dumping mempool seemed nominal\r\n\r\nThanks for adding the `FopenFn` type alias. It's a nice improvement.",
      "created_at" : "2021-03-12T15:06:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-797548135",
      "id" : 797548135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NzU0ODEzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T15:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797548135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r593257369"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593257369"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could avoid this namespace by making `fuzzed_fopen` a lambda with smallest scope possible?",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-12T15:28:08Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r593257369",
      "id" : 593257369,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzI1NzM2OQ==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 527071688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593257369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r593260400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593260400"
         }
      },
      "author_association" : "MEMBER",
      "body" : "would be nice to not introduce a new global",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-12T15:32:09Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize_validation_load_mempool()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+}\n+\n+FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool{};\n+    (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r593260400",
      "id" : 593260400,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzI2MDQwMA==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 32,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : 32,
      "pull_request_review_id" : 527071688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593260400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594456500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594456500"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point! Now addressed.",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-15T15:49:29Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594456500",
      "id" : 594456500,
      "in_reply_to_id" : 593257369,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDQ1NjUwMA==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 612353628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594456500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594456561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594456561"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point! Now addressed.",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-15T15:49:33Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize_validation_load_mempool()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+}\n+\n+FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool{};\n+    (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594456561",
      "id" : 594456561,
      "in_reply_to_id" : 593260400,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDQ1NjU2MQ==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 32,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : 32,
      "pull_request_review_id" : 612353712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T15:49:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594456561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested re-ACK 68afd3eeec27a270765ad26cd62d87cd0935e99f \r\n\r\nNice improvement.\r\n\r\n<details><summary><code>git diff f000612 68afd3e</code></summary><p>\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/validation_load_mempool.cpp b/src/test/fuzz/validation_load_mempool.cpp\r\nindex 97e705ef30..e1a21b6c53 100644\r\n--- a/src/test/fuzz/validation_load_mempool.cpp\r\n+++ b/src/test/fuzz/validation_load_mempool.cpp\r\n@@ -14,15 +14,6 @@\r\n #include <cstdint>\r\n #include <vector>\r\n \r\n-namespace {\r\n-FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\r\n-\r\n-FILE* fuzzed_fopen(const fs::path&, const char*)\r\n-{\r\n-    return fuzzed_file_provider_ptr->open();\r\n-}\r\n-} // namespace\r\n-\r\n void initialize_validation_load_mempool()\r\n {\r\n     static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\r\n@@ -33,11 +24,11 @@ FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\r\n     FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\r\n     SetMockTime(ConsumeTime(fuzzed_data_provider));\r\n     FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\r\n-    fuzzed_file_provider_ptr = &fuzzed_file_provider;\r\n \r\n     CTxMemPool pool{};\r\n+    auto fuzzed_fopen = [&](const fs::path&, const char*) {\r\n+        return fuzzed_file_provider.open();\r\n+    };\r\n     (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);\r\n     (void)DumpMempool(pool, fuzzed_fopen, true);\r\n-\r\n-    fuzzed_file_provider_ptr = nullptr;\r\n }\r\n```\r\n</p></details>\r\n",
      "created_at" : "2021-03-15T17:22:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#issuecomment-799599833",
      "id" : 799599833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19259",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5OTU5OTgzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-15T17:22:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799599833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594561456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594561456"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not addressed?\r\n\r\nnvm. @dongcarl will fix this :grimacing: ",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-15T17:56:45Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize_validation_load_mempool()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+}\n+\n+FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool{};\n+    (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594561456",
      "id" : 594561456,
      "in_reply_to_id" : 593260400,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDU2MTQ1Ng==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 32,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : 32,
      "pull_request_review_id" : 612489818,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T17:56:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594561456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594597374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594597374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I thought you meant the introduction of `fuzzed_fopen`? What did you mean? :)",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-15T18:46:05Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize_validation_load_mempool()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+}\n+\n+FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool{};\n+    (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594597374",
      "id" : 594597374,
      "in_reply_to_id" : 593260400,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDU5NzM3NA==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 32,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : 32,
      "pull_request_review_id" : 612534929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T18:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594597374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594622449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594622449"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, the ::ChainstateActive()",
      "commit_id" : "68afd3eeec27a270765ad26cd62d87cd0935e99f",
      "created_at" : "2021-03-15T19:25:48Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparamsbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <cstdint>\n+#include <vector>\n+\n+namespace {\n+FuzzedFileProvider* fuzzed_file_provider_ptr = nullptr;\n+\n+FILE* fuzzed_fopen(const fs::path&, const char*)\n+{\n+    return fuzzed_file_provider_ptr->open();\n+}\n+} // namespace\n+\n+void initialize_validation_load_mempool()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+}\n+\n+FUZZ_TARGET_INIT(validation_load_mempool, initialize_validation_load_mempool)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+    FuzzedFileProvider fuzzed_file_provider = ConsumeFile(fuzzed_data_provider);\n+    fuzzed_file_provider_ptr = &fuzzed_file_provider;\n+\n+    CTxMemPool pool{};\n+    (void)LoadMempool(pool, ::ChainstateActive(), fuzzed_fopen);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19259#discussion_r594622449",
      "id" : 594622449,
      "in_reply_to_id" : 593260400,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDYyMjQ0OQ==",
      "original_commit_id" : "f00061202867dd965fe8ca51253d1600776f8ab0",
      "original_line" : 32,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/fuzz/validation_load_mempool.cpp",
      "position" : 32,
      "pull_request_review_id" : 612566938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19259",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-15T19:25:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594622449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
