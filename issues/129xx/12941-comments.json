[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've tried to remove the warning by replacing `daemon()` with `posix_spawn()` a couple of months ago, but got lost in some problem I can really remember.\r\n\r\nIs there a motivation to remove the warning other than \"just remove the warning\"?",
      "created_at" : "2018-04-11T08:31:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380371832",
      "id" : 380371832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T08:31:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380371832",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "#9284 #8813",
      "created_at" : "2018-04-11T08:41:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380374819",
      "id" : 380374819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T08:41:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380374819",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is there a motivation to remove the warning other than \"just remove the warning\"?\r\n\r\nI don't see a strategy how to follow Apples deprecation path, so yes, it's just a \"remove the warning\" thing.",
      "created_at" : "2018-04-11T08:44:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380375393",
      "id" : 380375393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T08:44:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380375393",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Weak concept ACK. It seems likely that Apple will never actually remove `daemon()`, but if they do, it means nobody will have worked on a solution (since we don't see the warning anymore).",
      "created_at" : "2018-04-11T08:47:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380376216",
      "id" : 380376216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T08:47:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380376216",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I guess if the `daemon()` function gets removed on OSX we won't detect that in a very verbose way anyways since it bypasses the `#ifdef HAVE_DECL_DAEMON` part (It will be detectable through the ./configure output).\r\n",
      "created_at" : "2018-04-11T08:49:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380377012",
      "id" : 380377012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T08:49:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380377012",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "utACK 12e7c558afb1ddd127229029ef0770184d786927, I don't think we have to worry about apple removing `daemon()`, POSIX compatibility is important to them.\r\n(though it's not *officially* a POSIX function, sufficient software uses it to make it effectively one)\r\n\r\n> I guess if the daemon() function gets removed on OSX we won't detect that in a very verbose way anyways since it bypasses the #ifdef HAVE_DECL_DAEMON part (It will be detectable through the ./configure output).\r\n\r\nGood point! there is detection in the build system, so we only build this code if the function exists in the first place - overriding the warning is 100% valid.",
      "created_at" : "2018-04-11T09:25:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380387593",
      "id" : 380387593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T09:45:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380387593",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 12e7c55.",
      "created_at" : "2018-04-11T09:31:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380389289",
      "id" : 380389289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T09:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380389289",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't think we have to worry about apple removing daemon(), POSIX compatibility is important to them.\r\n\r\nMakes sense. utACK 12e7c55.",
      "created_at" : "2018-04-11T09:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380389823",
      "id" : 380389823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T09:33:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380389823",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "now post-tACK https://github.com/bitcoin/bitcoin/commit/12e7c558afb1ddd127229029ef0770184d786927\r\n\r\nThe best info I can find about Apples deprecation of ```daemon``` is [here](https://developer.apple.com/library/content/technotes/tn2083/_index.html#//apple_ref/doc/uid/DTS10003794-CH1-SUBSECTION55), however there aren't any hard dates, just the following:\r\n\"The daemon routine is officially deprecated in Mac OS X 10.5 and later. If you're still using it, you should carefully consider the reason why, and think about how your code might better fit in with the launchd model.\"\r\n\r\nI've tested these changes, and they do remove this warning:\r\n```\r\n  CXX      libbitcoin_server_a-blockencodings.o\r\nbitcoind.cpp:145:17: warning: 'daemon' is deprecated: first deprecated in macOS 10.5 - Use posix_spawn\r\n      APIs instead. [-Wdeprecated-declarations]\r\n            if (daemon(1, 0)) { // don't chdir (1), do close FDs (0)\r\n                ^\r\n/usr/include/stdlib.h:298:6: note: 'daemon' has been explicitly marked deprecated here\r\nint      daemon(int, int) __DARWIN_1050(daemon) __OSX_AVAILABLE_BUT_DEPRECATED_MSG(__MAC_10_0, ...\r\n         ^\r\n  CXX      libbitcoin_server_a-chain.o\r\n  CXX      libbitcoin_server_a-checkpoints.o\r\n1 warning generated.\r\n```\r\n\r\n",
      "created_at" : "2018-04-11T09:47:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12941#issuecomment-380393690",
      "id" : 380393690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12941",
      "updated_at" : "2018-04-11T09:47:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380393690",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
