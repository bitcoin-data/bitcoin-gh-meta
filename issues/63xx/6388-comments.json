[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34038636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34038636"
         }
      },
      "body" : "Not convinced that this code actually belongs in `rpcprotocol`, it is here because that file is shared between bitcoin-cli and bitcoind server, but conceptually it exists on a higher level than the protocol. Feel free to suggest a better place.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-07T13:29:16Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34038636",
      "id" : 34038636,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 21,
      "path" : "src/rpcprotocol.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34038636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34055509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34055509"
         }
      },
      "body" : "This error should be changed. It will be shown if bitcoin-cli is used while bitcoind is not running, so it's confusing to tell the user to just set a password (which will indeed make this message go away, but just enough to get to `connection refused` :-).",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-07T15:49:01Z",
      "diff_hunk" : "@@ -97,11 +97,19 @@ static bool AppInitRPC(int argc, char* argv[])\n \n UniValue CallRPC(const string& strMethod, const UniValue& params)\n {\n-    if (mapArgs[\"-rpcuser\"] == \"\" && mapArgs[\"-rpcpassword\"] == \"\")\n-        throw runtime_error(strprintf(\n-            _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\"),\n-                GetConfigFile().string().c_str()));\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        /* Try fall back to cookie-based authentication if no password is provided */\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34055509",
      "id" : 34055509,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34055509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Nice!  Reviewing this...",
      "created_at" : "2015-07-07T17:22:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#issuecomment-119274621",
      "id" : 119274621,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6388",
      "updated_at" : "2015-07-07T17:22:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119274621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "I spent some time trying to break this, and was unable to do so.  This grinds off one of bitcoind's most annoying burrs, very nice!  One thing to note is that some of the init scripts in the contrib directory have checks for a set rpcpassword, so when this goes in those should be removed.    \r\n\r\n",
      "created_at" : "2015-07-07T18:01:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#issuecomment-119285103",
      "id" : 119285103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6388",
      "updated_at" : "2015-07-07T18:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119285103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34074675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34074675"
         }
      },
      "body" : "I think this if needs to be rewritten because at the moment the cookie system does not work in regtest.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-07T18:39:55Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34074675",
      "id" : 34074675,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 6,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34074675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34075046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34075046"
         }
      },
      "body" : "I think `rpcprotocol.h/.cpp` is a good place for this extension. A new `cookieauth.h/cpp` file would be possible but i think is more compact and neatly arranged if it stays in `rpcprotocol.h/cpp`",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-07T18:42:50Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34075046",
      "id" : 34075046,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 21,
      "path" : "src/rpcprotocol.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34075046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34075442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34075442"
         }
      },
      "body" : "I think this if block from L100-L112 should go down to L126 (after the connection has been set up).\r\nIt would make more sense to first check if we can connect to bitcoind, then check if we have some credentials available.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-07T18:46:00Z",
      "diff_hunk" : "@@ -97,11 +97,19 @@ static bool AppInitRPC(int argc, char* argv[])\n \n UniValue CallRPC(const string& strMethod, const UniValue& params)\n {\n-    if (mapArgs[\"-rpcuser\"] == \"\" && mapArgs[\"-rpcpassword\"] == \"\")\n-        throw runtime_error(strprintf(\n-            _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\"),\n-                GetConfigFile().string().c_str()));\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        /* Try fall back to cookie-based authentication if no password is provided */\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34075442",
      "id" : 34075442,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34075442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Nice work!\r\nTested ACK (nit: doesn't work in regtest atm).",
      "created_at" : "2015-07-07T18:46:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#issuecomment-119300165",
      "id" : 119300165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6388",
      "updated_at" : "2015-07-07T18:46:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119300165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139186"
         }
      },
      "body" : "Agreed. Thought this through a bit and that'd be better.\r\n*if* it can connect, and there is no cookie file, this message still makes sense.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T11:51:07Z",
      "diff_hunk" : "@@ -97,11 +97,19 @@ static bool AppInitRPC(int argc, char* argv[])\n \n UniValue CallRPC(const string& strMethod, const UniValue& params)\n {\n-    if (mapArgs[\"-rpcuser\"] == \"\" && mapArgs[\"-rpcpassword\"] == \"\")\n-        throw runtime_error(strprintf(\n-            _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\"),\n-                GetConfigFile().string().c_str()));\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        /* Try fall back to cookie-based authentication if no password is provided */\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139186",
      "id" : 34139186,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139635"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139635"
         }
      },
      "body" : "Making a new file pair e.g. `rpcauthcookie` sounds good to me too. But I don't feel strongly about it either. \r\nThe low-level code from rpcprotocol will be unnecessary with the libevent-based HTTP server (#5677), so this will at least leave something there :)",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T11:58:58Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139635",
      "id" : 34139635,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 21,
      "path" : "src/rpcprotocol.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139935"
         }
      },
      "body" : "I'd personally love to get rid of `Params().RequireRPCPassword()`, also for consistency reasons. But I think it's unrelated to this pull - on regtest, setting an empty password is currently just allowed, so takes precedence.\r\n",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T12:03:31Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34139935",
      "id" : 34139935,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 6,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34139935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34140649"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34140649"
         }
      },
      "body" : "Hmm... but the following way don't work.\r\n\r\n`jonasschnelli$ ./src/bitcoind --regtest --datadir=/tmp/dummy2 --printtoconsole` (fresh datadir)\r\n```\r\njonasschnelli$ ./src/bitcoin-cli --regtest --datadir=/tmp/dummy2/ help\r\nerror: You must set rpcpassword=<password> in the configuration file:\r\n/tmp/dummy2/bitcoin.conf\r\nIf the file does not exist, create it with owner-readable-only file permissions.\r\n```",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T12:14:08Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34140649",
      "id" : 34140649,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 6,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34140649",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34141294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34141294"
         }
      },
      "body" : "Right, so bitcoin-cli should mind that flag as well (for now). Thanks.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T12:24:12Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34141294",
      "id" : 34141294,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 6,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34141294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34141534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34141534"
         }
      },
      "body" : "Bleh, that'd mean moving the flag to BaseParams... \r\n",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-08T12:28:13Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34141534",
      "id" : 34141534,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 6,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34141534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34274418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34274418"
         }
      },
      "body" : "Mention in this help text that the ability to write to [authfilepath] would also solve the problem? Now it may be confusing as being unable to write a file results in a help text mentioning some unrelated config option.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-09T16:32:45Z",
      "diff_hunk" : "@@ -116,10 +110,24 @@ UniValue CallRPC(const string& strMethod, const UniValue& params)\n     if (!fConnected)\n         throw CConnectionFailed(\"couldn't connect to server\");\n \n+    // Find credentials to use\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        // Try fall back to cookie-based authentication if no password is provided\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(\n+                _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34274418",
      "id" : 34274418,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 23,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34274418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34274508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34274508"
         }
      },
      "body" : "No logic to prevent too wide permissions on that file?\r\n\r\nEDIT: nevermind, umask",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-09T16:33:31Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for\n+ * recognizability in debugging/logging purposes)\n+ */\n+static const std::string COOKIEAUTH_USER = \"__cookie__\";\n+/** Default name for auth cookie file */\n+static const std::string COOKIEAUTH_FILE = \".cookie\";\n+\n+boost::filesystem::path GetAuthCookieFile()\n+{\n+    boost::filesystem::path path(GetArg(\"-rpccookiefile\", COOKIEAUTH_FILE));\n+    if (!path.is_complete()) path = GetDataDir() / path;\n+    return path;\n+}\n+\n+bool GenerateAuthCookie(std::string *cookie_out)\n+{\n+    unsigned char rand_pwd[32];\n+    GetRandBytes(rand_pwd, 32);\n+    std::string cookie = COOKIEAUTH_USER + \":\" + EncodeBase64(&rand_pwd[0],32);\n+\n+    /** the umask determines what permissions are used to create this file -\n+     * these are set to 077 in init.cpp unless overridden with -sysperms.\n+     */\n+    std::ofstream file;\n+    boost::filesystem::path filepath = GetAuthCookieFile();\n+    file.open(filepath.string().c_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34274508",
      "id" : 34274508,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 46,
      "path" : "src/rpcprotocol.cpp",
      "position" : 46,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34274508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34349908"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34349908"
         }
      },
      "body" : "This message triggers if it is unable to *read* from the file, e.g. if it doesn't exist, but is somehow able to connect. This is a very strange situation, but it won't be solved by ability to write anywhere.\r\n\r\n(bitcoind won't even start if no rpcpassword is set but it is unable to write the cookie file)",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-10T12:25:12Z",
      "diff_hunk" : "@@ -116,10 +110,24 @@ UniValue CallRPC(const string& strMethod, const UniValue& params)\n     if (!fConnected)\n         throw CConnectionFailed(\"couldn't connect to server\");\n \n+    // Find credentials to use\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        // Try fall back to cookie-based authentication if no password is provided\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(\n+                _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34349908",
      "id" : 34349908,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 23,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34349908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34350102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34350102"
         }
      },
      "body" : "Right: even for the wallet permissions we rely on the umask.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-10T12:28:35Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for\n+ * recognizability in debugging/logging purposes)\n+ */\n+static const std::string COOKIEAUTH_USER = \"__cookie__\";\n+/** Default name for auth cookie file */\n+static const std::string COOKIEAUTH_FILE = \".cookie\";\n+\n+boost::filesystem::path GetAuthCookieFile()\n+{\n+    boost::filesystem::path path(GetArg(\"-rpccookiefile\", COOKIEAUTH_FILE));\n+    if (!path.is_complete()) path = GetDataDir() / path;\n+    return path;\n+}\n+\n+bool GenerateAuthCookie(std::string *cookie_out)\n+{\n+    unsigned char rand_pwd[32];\n+    GetRandBytes(rand_pwd, 32);\n+    std::string cookie = COOKIEAUTH_USER + \":\" + EncodeBase64(&rand_pwd[0],32);\n+\n+    /** the umask determines what permissions are used to create this file -\n+     * these are set to 077 in init.cpp unless overridden with -sysperms.\n+     */\n+    std::ofstream file;\n+    boost::filesystem::path filepath = GetAuthCookieFile();\n+    file.open(filepath.string().c_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34350102",
      "id" : 34350102,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 46,
      "path" : "src/rpcprotocol.cpp",
      "position" : 46,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34350102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34432914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34432914"
         }
      },
      "body" : "Would it make sense to move the rpcpassword warning into here, instead of removing it entirely? This would give the user warning if GenerateAuthCookie() fails to write to disk for example.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-13T04:35:06Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())\n     {\n-        unsigned char rand_pwd[32];\n-        GetRandBytes(rand_pwd, 32);\n-        uiInterface.ThreadSafeMessageBox(strprintf(\n-            _(\"To use bitcoind, or the -server option to bitcoin-qt, you must set an rpcpassword in the configuration file:\\n\"\n-              \"%s\\n\"\n-              \"It is recommended you use the following random password:\\n\"\n-              \"rpcuser=bitcoinrpc\\n\"\n-              \"rpcpassword=%s\\n\"\n-              \"(you do not need to remember this password)\\n\"\n-              \"The username and password MUST NOT be the same.\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\\n\"\n-              \"It is also recommended to set alertnotify so you are notified of problems;\\n\"\n-              \"for example: alertnotify=echo %%s | mail -s \\\"Bitcoin Alert\\\" admin@foo.com\\n\"),\n-                GetConfigFile().string(),\n-                EncodeBase58(&rand_pwd[0],&rand_pwd[0]+32)),\n-                \"\", CClientUIInterface::MSG_ERROR | CClientUIInterface::SECURE);\n-        StartShutdown();\n-        return;\n+        LogPrintf(\"No rpcpassword set - using random cookie authentication\\n\");\n+        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+            StartShutdown();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34432914",
      "id" : 34432914,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 28,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34432914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2230604?v=3",
         "events_url" : "https://api.github.com/users/faizkhan00/events{/privacy}",
         "followers_url" : "https://api.github.com/users/faizkhan00/followers",
         "following_url" : "https://api.github.com/users/faizkhan00/following{/other_user}",
         "gists_url" : "https://api.github.com/users/faizkhan00/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/faizkhan00",
         "id" : 2230604,
         "login" : "faizkhan00",
         "organizations_url" : "https://api.github.com/users/faizkhan00/orgs",
         "received_events_url" : "https://api.github.com/users/faizkhan00/received_events",
         "repos_url" : "https://api.github.com/users/faizkhan00/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/faizkhan00/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/faizkhan00/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/faizkhan00"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34449751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34449751"
         }
      },
      "body" : "GenerateAuthCookie already logs an error when it is unable to create the file. The data directory must be writable (otherwise creating the lock file will fail, earlier), so it is an extremely rare error. IMO it doesn't need an extensive translated message.",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-13T10:22:37Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())\n     {\n-        unsigned char rand_pwd[32];\n-        GetRandBytes(rand_pwd, 32);\n-        uiInterface.ThreadSafeMessageBox(strprintf(\n-            _(\"To use bitcoind, or the -server option to bitcoin-qt, you must set an rpcpassword in the configuration file:\\n\"\n-              \"%s\\n\"\n-              \"It is recommended you use the following random password:\\n\"\n-              \"rpcuser=bitcoinrpc\\n\"\n-              \"rpcpassword=%s\\n\"\n-              \"(you do not need to remember this password)\\n\"\n-              \"The username and password MUST NOT be the same.\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\\n\"\n-              \"It is also recommended to set alertnotify so you are notified of problems;\\n\"\n-              \"for example: alertnotify=echo %%s | mail -s \\\"Bitcoin Alert\\\" admin@foo.com\\n\"),\n-                GetConfigFile().string(),\n-                EncodeBase58(&rand_pwd[0],&rand_pwd[0]+32)),\n-                \"\", CClientUIInterface::MSG_ERROR | CClientUIInterface::SECURE);\n-        StartShutdown();\n-        return;\n+        LogPrintf(\"No rpcpassword set - using random cookie authentication\\n\");\n+        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+            StartShutdown();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34449751",
      "id" : 34449751,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 28,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34449751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34450777"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34450777"
         }
      },
      "body" : "I think it is reasonable to show an error here before shutting down, but can just as well be a standard \"Initialization failed, check the error log for details\".",
      "commit_id" : "71cbeaad9a929ba6a7b62d9b37a09b214ae00c1a",
      "created_at" : "2015-07-13T10:37:20Z",
      "diff_hunk" : "@@ -597,28 +597,16 @@ void StartRPCThreads()\n         strAllowed += subnet.ToString() + \" \";\n     LogPrint(\"rpc\", \"Allowing RPC connections from: %s\\n\", strAllowed);\n \n-    strRPCUserColonPass = mapArgs[\"-rpcuser\"] + \":\" + mapArgs[\"-rpcpassword\"];\n     if (((mapArgs[\"-rpcpassword\"] == \"\") ||\n          (mapArgs[\"-rpcuser\"] == mapArgs[\"-rpcpassword\"])) && Params().RequireRPCPassword())\n     {\n-        unsigned char rand_pwd[32];\n-        GetRandBytes(rand_pwd, 32);\n-        uiInterface.ThreadSafeMessageBox(strprintf(\n-            _(\"To use bitcoind, or the -server option to bitcoin-qt, you must set an rpcpassword in the configuration file:\\n\"\n-              \"%s\\n\"\n-              \"It is recommended you use the following random password:\\n\"\n-              \"rpcuser=bitcoinrpc\\n\"\n-              \"rpcpassword=%s\\n\"\n-              \"(you do not need to remember this password)\\n\"\n-              \"The username and password MUST NOT be the same.\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\\n\"\n-              \"It is also recommended to set alertnotify so you are notified of problems;\\n\"\n-              \"for example: alertnotify=echo %%s | mail -s \\\"Bitcoin Alert\\\" admin@foo.com\\n\"),\n-                GetConfigFile().string(),\n-                EncodeBase58(&rand_pwd[0],&rand_pwd[0]+32)),\n-                \"\", CClientUIInterface::MSG_ERROR | CClientUIInterface::SECURE);\n-        StartShutdown();\n-        return;\n+        LogPrintf(\"No rpcpassword set - using random cookie authentication\\n\");\n+        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+            StartShutdown();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34450777",
      "id" : 34450777,
      "original_commit_id" : "3f84f46a9002d3008c9ce8b51643f08515ebd698",
      "original_position" : 28,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-13T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34450777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased against #6398, added generic UI error message before shutting down when writing cookie fails.",
      "created_at" : "2015-07-13T11:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#issuecomment-120892721",
      "id" : 120892721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6388",
      "updated_at" : "2015-07-13T11:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/120892721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
