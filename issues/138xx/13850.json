{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Bitcoin's ZMQ notifications can currently be enabled (or not) through `-zmqpub...` startup arguments, but there is no way to enable more (or perhaps disable existing) notifications dynamically at runtime.  This would be useful, so that software that wants to subscribe can configure the daemon accordingly (in conjunction with `getzmqnotifications`).\r\n\r\nThe most straight-forward way to implement dynamic addition of notifications is to add a new RPC `addzmqnotification` like this:\r\n\r\n    $ bitcoin-cli addzmqnotification pubhashtx tcp://127.0.0.1:5678\r\n    (returns the address, \"tcp://127.0.0.1:5678\")\r\n\r\nThis call would add a new `pubhashtx` notifier on the given address, either reusing an existing socket or creating a new one.  This is very similar to how it could be created with `-zmqpubhashtx=tcp://127.0.0.1:5678`.\r\n\r\nA potential difference to the existing CLI argument is that the RPC could, if desired, allow multiple `pubhashtx` notifiers on different addresses.  Alternatively it could refuse to create a second one if one is already active and instead return the address of the existing one in that case.\r\n\r\nThere are two minor issues I have with this proposal:\r\n\r\n1. It allows an RPC client to induce the daemon to start listening on an arbitrary address/port, which might be a security risk.\r\n\r\n2. A ZMQ subscriber that wants to enable a certain notification probably doesn't care too much about the exact address/port, and might not want to be responsible for actually choosing one.\r\n\r\nIssue 1) is IMHO not a big concern, as access to the RPC interface already allows a lot of things to be done and should be restricted anyway.\r\n\r\nFor 2), we could make the second argument of `addzmqnotification` optional or remove it completely.  The address would then be chosen from an existing notification, or could perhaps be set using a generic `-zmqaddress` option; the RPC would return the chosen address.  This would shift more sensitive configuration back to the startup options, while still allowing subscribers to dynamically enable the notifications they need.\r\n\r\nWhat do you think about this proposal, does it make sense?  Is there a better way to implement dynamic addition of ZMQ notifiers?  (I know @promag is also interested in that - any input?)",
   "closed_at" : "2019-02-02T11:23:27Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
      "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
      "followers_url" : "https://api.github.com/users/domob1812/followers",
      "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/domob1812",
      "id" : 4943644,
      "login" : "domob1812",
      "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
      "organizations_url" : "https://api.github.com/users/domob1812/orgs",
      "received_events_url" : "https://api.github.com/users/domob1812/received_events",
      "repos_url" : "https://api.github.com/users/domob1812/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/domob1812"
   },
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13850/comments",
   "created_at" : "2018-08-02T11:47:11Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13850/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/13850",
   "id" : 346976755,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13850/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzNDY5NzY3NTU=",
   "number" : 13850,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Dynamic configuration of ZMQ notifications",
   "updated_at" : "2019-02-02T11:23:27Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13850",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
      "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
      "followers_url" : "https://api.github.com/users/domob1812/followers",
      "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/domob1812",
      "id" : 4943644,
      "login" : "domob1812",
      "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
      "organizations_url" : "https://api.github.com/users/domob1812/orgs",
      "received_events_url" : "https://api.github.com/users/domob1812/received_events",
      "repos_url" : "https://api.github.com/users/domob1812/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/domob1812"
   }
}
