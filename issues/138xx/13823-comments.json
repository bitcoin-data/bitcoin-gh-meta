[
   {
      "author_association" : "MEMBER",
      "body" : "ACK fae6ad9\r\n\r\nTested by adjusting the `wallet_multiwallet.py` test to create a wallet with the name Ã¢ÂÂ¿. See master output below. Should we add a similar testcase to the list of `wallet_names`?\r\n\r\nmaster (aa30e4b):\r\n```\r\ntest/functional/test_runner.py wallet_multiwallet.py\r\nTemporary test directory at /var/folders/tg/m2x9fgs930d8xrf6n6gldrtc0000gn/T/bitcoin_test_runner_20180802_171457\r\n............................................................................................................................................\r\nwallet_multiwallet.py failed, Duration: 70 s\r\n\r\nstdout:\r\n2018-08-02T09:14:57.920000Z TestFramework (INFO): Initializing test directory /var/folders/tg/m2x9fgs930d8xrf6n6gldrtc0000gn/T/bitcoin_test_runner_20180802_171457/wallet_multiwallet_0\r\n2018-08-02T09:15:03.198000Z TestFramework (INFO): Do not allow -zapwallettxes with multiwallet\r\n2018-08-02T09:15:03.978000Z TestFramework (INFO): Do not allow -salvagewallet with multiwallet\r\n2018-08-02T09:15:04.500000Z TestFramework (INFO): Do not allow -upgradewallet with multiwallet\r\n2018-08-02T09:15:08.082000Z TestFramework (ERROR): Unexpected exception caught during testing\r\nTraceback (most recent call last):\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/test_framework.py\", line 160, in main\r\n    self.run_test()\r\n  File \"/Users/michael/github/bitcoin/test/functional/wallet_multiwallet.py\", line 135, in run_test\r\n    wallets[0].generate(1)\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/coverage.py\", line 47, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n    response = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/authproxy.py\", line 107, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1239, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1250, in _send_request\r\n    self.putrequest(method, url, **skips)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1117, in putrequest\r\n    self._output(request.encode('ascii'))\r\nUnicodeEncodeError: 'ascii' codec can't encode character '\\u20bf' in position 13: ordinal not in range(128)\r\n2018-08-02T09:15:08.136000Z TestFramework (INFO): Stopping nodes\r\n2018-08-02T09:15:08.136000Z TestFramework.node0 (ERROR): Unable to stop node.\r\n```",
      "created_at" : "2018-08-02T09:22:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#issuecomment-409863542",
      "id" : 409863542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13823",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwOTg2MzU0Mg==",
      "updated_at" : "2018-08-02T09:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409863542",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207187822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207187822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure this is the correct place to do URL-quoting (in general, you never want to url-quote a path, just path **components**). Wouldn't the best place to this be where the path is generated?",
      "commit_id" : "fa67505e1ea007bdc081bc7425fb83d5455d8308",
      "created_at" : "2018-08-02T11:12:29Z",
      "diff_hunk" : "@@ -102,6 +102,7 @@ def _request(self, method, path, postdata):\n                    'User-Agent': USER_AGENT,\n                    'Authorization': self.__auth_header,\n                    'Content-type': 'application/json'}\n+        path = urllib.parse.quote(path)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207187822",
      "id" : 207187822,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzE4NzgyMg==",
      "original_commit_id" : "fae6ad9c73fbf49f4e9b20fadb8f86184c73195f",
      "original_position" : 4,
      "path" : "test/functional/test_framework/authproxy.py",
      "position" : null,
      "pull_request_review_id" : 142746266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823",
      "updated_at" : "2018-08-02T12:26:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207187822",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207188791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207188791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "so this would be `get_wallet_rpc(self, wallet_name)`",
      "commit_id" : "fa67505e1ea007bdc081bc7425fb83d5455d8308",
      "created_at" : "2018-08-02T11:16:24Z",
      "diff_hunk" : "@@ -102,6 +102,7 @@ def _request(self, method, path, postdata):\n                    'User-Agent': USER_AGENT,\n                    'Authorization': self.__auth_header,\n                    'Content-type': 'application/json'}\n+        path = urllib.parse.quote(path)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207188791",
      "id" : 207188791,
      "in_reply_to_id" : 207187822,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzE4ODc5MQ==",
      "original_commit_id" : "fae6ad9c73fbf49f4e9b20fadb8f86184c73195f",
      "original_position" : 4,
      "path" : "test/functional/test_framework/authproxy.py",
      "position" : null,
      "pull_request_review_id" : 142747431,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823",
      "updated_at" : "2018-08-02T12:26:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207188791",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207206256"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207206256"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed, we woulndn't want to double-quote in case the path is already quoted.",
      "commit_id" : "fa67505e1ea007bdc081bc7425fb83d5455d8308",
      "created_at" : "2018-08-02T12:25:35Z",
      "diff_hunk" : "@@ -102,6 +102,7 @@ def _request(self, method, path, postdata):\n                    'User-Agent': USER_AGENT,\n                    'Authorization': self.__auth_header,\n                    'Content-type': 'application/json'}\n+        path = urllib.parse.quote(path)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#discussion_r207206256",
      "id" : 207206256,
      "in_reply_to_id" : 207187822,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzIwNjI1Ng==",
      "original_commit_id" : "fae6ad9c73fbf49f4e9b20fadb8f86184c73195f",
      "original_position" : 4,
      "path" : "test/functional/test_framework/authproxy.py",
      "position" : null,
      "pull_request_review_id" : 142768091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13823",
      "updated_at" : "2018-08-02T12:26:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207206256",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Quoted the wallet name as per @laanwj.\r\n\r\nCan be tested with `./test/functional/wallet_multiwallet.py --tmpdir=tempÃ°ÂÂÂ001`",
      "created_at" : "2018-08-02T12:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#issuecomment-409908764",
      "id" : 409908764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13823",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwOTkwODc2NA==",
      "updated_at" : "2018-08-02T12:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409908764",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-tested fa67505 using `./test/functional/wallet_multiwallet.py --tmpdir=tempÃ°ÂÂÂ001` from above.\r\n\r\nmaster 990e182:\r\n```\r\n./test/functional/wallet_multiwallet.py --tmpdir=tempÃ°ÂÂÂ001\r\n2018-08-02T12:55:54.136000Z TestFramework (INFO): Initializing test directory /Users/michael/GitHub/bitcoin/tempÃ°ÂÂÂ001\r\n2018-08-02T12:55:59.574000Z TestFramework (INFO): Do not allow -zapwallettxes with multiwallet\r\n2018-08-02T12:56:00.355000Z TestFramework (INFO): Do not allow -salvagewallet with multiwallet\r\n2018-08-02T12:56:00.877000Z TestFramework (INFO): Do not allow -upgradewallet with multiwallet\r\n2018-08-02T12:56:04.538000Z TestFramework (ERROR): Unexpected exception caught during testing\r\nTraceback (most recent call last):\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/test_framework.py\", line 161, in main\r\n    self.run_test()\r\n  File \"./test/functional/wallet_multiwallet.py\", line 137, in run_test\r\n    info = wallet.getwalletinfo()\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/coverage.py\", line 47, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/authproxy.py\", line 136, in __call__\r\n    response = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n  File \"/Users/michael/GitHub/bitcoin/test/functional/test_framework/authproxy.py\", line 106, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1239, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1250, in _send_request\r\n    self.putrequest(method, url, **skips)\r\n  File \"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/http/client.py\", line 1117, in putrequest\r\n    self._output(request.encode('ascii'))\r\nUnicodeEncodeError: 'ascii' codec can't encode character '\\U0001f45b' in position 47: ordinal not in range(128)\r\n2018-08-02T12:56:04.592000Z TestFramework (INFO): Stopping nodes\r\n2018-08-02T12:56:04.593000Z TestFramework.node0 (ERROR): Unable to stop node.\r\n```\r\n\r\nwith fa67505:\r\n```\r\n2018-08-02T12:59:21.998000Z TestFramework (INFO): Cleaning up /Users/michael/GitHub/bitcoin/tempÃ°ÂÂÂ001 on exit\r\n2018-08-02T12:59:21.998000Z TestFramework (INFO): Tests successful\r\n```",
      "created_at" : "2018-08-02T12:59:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#issuecomment-409917464",
      "id" : 409917464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13823",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwOTkxNzQ2NA==",
      "updated_at" : "2018-08-02T12:59:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409917464",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK fa67505 on macOS 10.13.6",
      "created_at" : "2018-08-02T13:28:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#issuecomment-409925863",
      "id" : 409925863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13823",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwOTkyNTg2Mw==",
      "updated_at" : "2018-08-02T13:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409925863",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK fa67505e1ea007bdc081bc7425fb83d5455d8308",
      "created_at" : "2018-08-02T13:59:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13823#issuecomment-409936063",
      "id" : 409936063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13823",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwOTkzNjA2Mw==",
      "updated_at" : "2018-08-02T13:59:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409936063",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
