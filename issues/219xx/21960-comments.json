[
   {
      "author_association" : "MEMBER",
      "body" : "Might be another one of those issues where the tests assume too much of the system they run on? (#21682) ",
      "created_at" : "2021-05-16T07:39:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21960#issuecomment-841781567",
      "id" : 841781567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21960",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTc4MTU2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T07:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841781567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pinging @practicalswift, this test was committed on March 19, 2021 in 732c7bddeb9.",
      "created_at" : "2021-05-16T09:47:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21960#issuecomment-841793540",
      "id" : 841793540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21960",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTc5MzU0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T09:47:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841793540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "First, thanks a lot for reporting this @ssb402 :)\r\n\r\nWhat you've found is the combination of two bugs: one bug in macOS and one bug in Bitcoin Core.\r\n\r\n* macOS bug: In older versions of macOS Apple engineers simply got IPv6 zero compression wrong. More specifically they missed the sentence `The symbol \"::\" MUST NOT be used to shorten just one 16-bit 0 field` in RFC 5952. Luckily this issue has been resolved in later versions of macOS.\r\n* Bitcoin Core bug: In Bitcoin Core we did the mistake of using the operating system for something cosmetic like formatting a IPv6 address that should not need any kind of interaction with the operating system. That unnecessarily exposed us to mistakes in code bases that are typically not as thoroughly reviewed as ours. This issue is fixed in #21756 which removes this unnecessary OS dependence. Review welcome! :)\r\n\r\nThe RFC (RFC 5952: \"A Recommendation for IPv6 Address Text Representation\") is very clear:\r\n\r\n```\r\n4.2.2.  Handling One 16-Bit 0 Field\r\n\r\n   The symbol \"::\" MUST NOT be used to shorten just one 16-bit 0 field.\r\n   For example, the representation 2001:db8:0:1:1:1:1:1 is correct, but\r\n   2001:db8::1:1:1:1:1 is not correct.\r\n```\r\n\r\nNote that this is the _exact_ test vector used in our unit test :)\r\n\r\nThere are three things you can do to help resolve this:\r\n* Would you be willing to open an issue documenting this? That would be useful to point to in case other macOS users run in to the same problem. \r\n* Would you be willing to apply the patch suggested in #21756 and tell if that solves the issue you're experiencing? (It should :))\r\n* If possible, would you be willing to review #21756? :)\r\n\r\nAgain, thanks a lot for reporting issues: that's how Bitcoin Core gets harder, better, faster, stronger, etc :)",
      "created_at" : "2021-05-16T16:32:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21960#issuecomment-841841072",
      "id" : 841841072,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21960",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTg0MTA3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T20:12:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841841072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks @practicalswift for the review and explaining the details so clearly!  I appreciate it.\r\n\r\nYes, I will review and use the patch from #21756 and see if it resolves my issue.  Then I can create an issue documenting this and discard my PR. ",
      "created_at" : "2021-05-16T19:51:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21960#issuecomment-841868314",
      "id" : 841868314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21960",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTg2ODMxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T19:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841868314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1744097?v=4",
         "events_url" : "https://api.github.com/users/ssb402/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ssb402/followers",
         "following_url" : "https://api.github.com/users/ssb402/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ssb402/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ssb402",
         "id" : 1744097,
         "login" : "ssb402",
         "node_id" : "MDQ6VXNlcjE3NDQwOTc=",
         "organizations_url" : "https://api.github.com/users/ssb402/orgs",
         "received_events_url" : "https://api.github.com/users/ssb402/received_events",
         "repos_url" : "https://api.github.com/users/ssb402/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ssb402/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ssb402/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ssb402"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@practicalswift #21756 resolved my issue. Thanks! I will close this PR. Also, created an issue #21967 in case other macOS devs run into this problem.",
      "created_at" : "2021-05-17T03:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21960#issuecomment-841953449",
      "id" : 841953449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21960",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTk1MzQ0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-17T03:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841953449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1744097?v=4",
         "events_url" : "https://api.github.com/users/ssb402/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ssb402/followers",
         "following_url" : "https://api.github.com/users/ssb402/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ssb402/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ssb402",
         "id" : 1744097,
         "login" : "ssb402",
         "node_id" : "MDQ6VXNlcjE3NDQwOTc=",
         "organizations_url" : "https://api.github.com/users/ssb402/orgs",
         "received_events_url" : "https://api.github.com/users/ssb402/received_events",
         "repos_url" : "https://api.github.com/users/ssb402/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ssb402/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ssb402/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ssb402"
      }
   }
]
