[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1235912663), [stickies-v](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1236108249), [ajtowns](https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1373114894) |\n| Concept ACK | [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1123501907), [1440000bytes](https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1356859862) |\n| Stale ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1212634778) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26174](https://github.com/bitcoin/bitcoin/pull/26174) (rpc, wallet: add ability to retrieve all address book entries by w0xlt)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-09-27T12:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259461425",
      "id" : 1259461425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LEdsx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259461425/reactions"
      },
      "updated_at" : "2023-01-06T04:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259461425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981310011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that all the rpc methods are at the same indentation and thus easily readable/enumerable, I don't think we need the comments here.\r\n\r\nEven though for the current implementation it doesn't reduce LoC that much, I think this alternative would be significantly more compact if in the future we'd also need to check for multiple invalid labels (not just '*'). But even in the current format, I think it's a bit more DRY?\r\n\r\n```suggestion\r\n        address = node.getnewaddress()\r\n        pubkey = node.getaddressinfo(address)['pubkey']\r\n        rpc_calls = [\r\n            [node.getnewaddress],\r\n            [node.setlabel, address],\r\n            [node.getaddressesbylabel],\r\n            [node.importpubkey, pubkey],\r\n            [node.addmultisigaddress, 1, [pubkey]],\r\n            [node.getreceivedbylabel],\r\n        ]\r\n        for rpc_call in rpc_calls:\r\n            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:18:37Z",
      "diff_hunk" : "@@ -25,6 +25,50 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+\n+        # getnewaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getnewaddress, \"*\")\n+        # setlabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.setlabel, address, \"*\")\n+        # getaddressesbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getaddressesbylabel, \"*\")\n+        # importpubkey\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.importpubkey, pubkey, \"*\")\n+        # addmultisigaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.addmultisigaddress, 1, [pubkey], \"*\")\n+        # getreceivedbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getreceivedbylabel, \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981310011",
      "id" : 981310011,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fZo7",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 44,
      "original_position" : 20,
      "original_start_line" : 30,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981315868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd just move this out of the if/else loop and remove the duplicated lines in the `if` statement?",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:23:05Z",
      "diff_hunk" : "@@ -25,6 +25,50 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+\n+        # getnewaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getnewaddress, \"*\")\n+        # setlabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.setlabel, address, \"*\")\n+        # getaddressesbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getaddressesbylabel, \"*\")\n+        # importpubkey\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.importpubkey, pubkey, \"*\")\n+        # addmultisigaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.addmultisigaddress, 1, [pubkey], \"*\")\n+        # getreceivedbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getreceivedbylabel, \"*\")\n+\n+        if self.options.descriptors:\n+            # importdescriptors\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+            assert_equal(r[0]['success'], False)\n+            assert_equal(r[0]['error']['code'], -11)\n+            assert_equal(r[0]['error']['message'], \"Invalid label name\")\n+        else:\n+            # importprivkey\n+            privkey = node.dumpprivkey(address)\n+            assert_raises_rpc_error(-11, \"Invalid label name\", node.importprivkey, privkey, \"*\")\n+\n+            # importmulti\n+            r = node.importmulti([{\n+                'scriptPubKey': {'address': address},\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+\n+            assert_equal(r[0]['success'], False)\n+            assert_equal(r[0]['error']['code'], -11)\n+            assert_equal(r[0]['error']['message'], \"Invalid label name\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981315868",
      "id" : 981315868,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fbEc",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 70,
      "original_position" : 46,
      "original_start_line" : 68,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n            strLabel = LabelFromValue(request.params[1]);\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:34:40Z",
      "diff_hunk" : "@@ -142,7 +142,7 @@ RPCHelpMan importprivkey()\n         std::string strSecret = request.params[0].get_str();\n         std::string strLabel;\n         if (!request.params[1].isNull())\n-            strLabel = request.params[1].get_str();\n+            strLabel = LabelFromValue(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330263",
      "id" : 981330263,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846felX",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 145,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        strLabel = LabelFromValue(request.params[1]);\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:34:52Z",
      "diff_hunk" : "@@ -235,7 +235,7 @@ RPCHelpMan importaddress()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330526",
      "id" : 981330526,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fepe",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 238,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @stickies-v, I've addressed all your comments.",
      "created_at" : "2022-09-27T14:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259630564",
      "id" : 1259630564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LFG_k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259630564/reactions"
      },
      "updated_at" : "2022-09-27T14:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259630564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981364061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this line adds much, it's not the expected type of r and it's not necessary to declare it before the if/else. I'd prefer to remove, not really pythonic.",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:01:23Z",
      "diff_hunk" : "@@ -25,6 +25,42 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+        r = None",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981364061",
      "id" : 981364061,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fm1d",
      "original_commit_id" : "b2d0d4b6f9d41602d91a48427b140db8a6a1a364",
      "original_line" : 43,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122171321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T15:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981366008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: if you move the entire if/else loop to before the execution of the rpc calls, you could replace this with `rpc_calls.append(...)`",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:03:04Z",
      "diff_hunk" : "@@ -25,6 +25,42 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+        r = None\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            privkey = node.dumpprivkey(address)\n+            assert_raises_rpc_error(-11, \"Invalid label name\", node.importprivkey, privkey, \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981366008",
      "id" : 981366008,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fnT4",
      "original_commit_id" : "b2d0d4b6f9d41602d91a48427b140db8a6a1a364",
      "original_line" : 52,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122171321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T15:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed, thanks @stickies-v. \r\n![](https://cdn.discordapp.com/emojis/966020215764844605.gif?size=4096)",
      "created_at" : "2022-09-27T15:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259662225",
      "id" : 1259662225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LFOuR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259662225/reactions"
      },
      "updated_at" : "2022-09-27T15:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259662225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981389534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: PEP8 suggests a single whiteline",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:22:06Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])\n+\n+            r = node.importmulti([{\n+                'scriptPubKey': {'address': address},\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+\n+        assert_equal(r[0]['success'], False)\n+        assert_equal(r[0]['error']['code'], -11)\n+        assert_equal(r[0]['error']['message'], \"Invalid label name\")\n+\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981389534",
      "id" : 981389534,
      "line" : 62,
      "node_id" : "PRRC_kwDOABII5846ftDe",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 62,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 38,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982229517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: would avoid using one-letter variables, the brevity isn't necessary here imo and it's just slightly more confusing\r\n```suggestion\r\n            response = node.importdescriptors([{\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T10:28:15Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982229517",
      "id" : 982229517,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5846i6IN",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 41,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 17,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982237949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: f-string\r\n```suggestion\r\n                'desc': f'pkh({address})',\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T10:37:37Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982237949",
      "id" : 982237949,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII5846i8L9",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 42,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 18,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982277088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What about moving the null check into `LabelFromValue` (if needed with an optional arg to set the default value to something other than `\"\"`)?",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T11:21:37Z",
      "diff_hunk" : "@@ -431,7 +431,7 @@ RPCHelpMan importpubkey()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982277088",
      "id" : 982277088,
      "line" : 434,
      "node_id" : "PRRC_kwDOABII5846jFvg",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 434,
      "original_position" : 23,
      "original_start_line" : 432,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 23,
      "pull_request_review_id" : 1123501907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 432,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-28T11:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982484084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you think of 5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7?",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-28T14:30:36Z",
      "diff_hunk" : "@@ -431,7 +431,7 @@ RPCHelpMan importpubkey()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982484084",
      "id" : 982484084,
      "in_reply_to_id" : 982277088,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846j4R0",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 434,
      "original_position" : 23,
      "original_start_line" : 432,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1123808905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-28T21:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984447620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like listsinceblock ought to be added to this test if #25934 is merged. Edit: should the wildcard functionality be added either in that PR or this one?",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-30T10:23:59Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984447620",
      "id" : 984447620,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5846rXqE",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 38,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 14,
      "pull_request_review_id" : 1126608655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T10:25:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984485290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "answered here: https://github.com/bitcoin/bitcoin/pull/25934#discussion_r984481844",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-30T11:16:31Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984485290",
      "id" : 984485290,
      "in_reply_to_id" : 984447620,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5846rg2q",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 38,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 14,
      "pull_request_review_id" : 1126664123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T11:16:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985587377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in b0fdad3436083aa8b965db374b7e97c94e6e246c: `LabelFromValue()` returns by value (as opposed to `get_str()` indeed return a ref to the `data` object, so having `label` be  a `const std::string&` is quite risky from a dangling reference perspective. I would update `label` to be a `std::string` here (and similar cases further down) - even though it's changed to an `auto` in later commits.",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T09:49:00Z",
      "diff_hunk" : "@@ -1169,7 +1169,7 @@ static UniValue ProcessImport(CWallet& wallet, const UniValue& data, const int64\n         if (internal && data.exists(\"label\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Internal addresses should not have a label\");\n         }\n-        const std::string& label = data.exists(\"label\") ? data[\"label\"].get_str() : \"\";\n+        const std::string& label = data.exists(\"label\") ? LabelFromValue(data[\"label\"]) : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985587377",
      "id" : 985587377,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846vt6x",
      "original_commit_id" : "b0fdad3436083aa8b965db374b7e97c94e6e246c",
      "original_line" : 1172,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 32,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985674324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since `AddrBookFilter` takes a `std::optional<std::string>`, I think there's no need for the `CHECK_NONFATAL` here? Wouldn't be any behaviour change either I think, because the existing code would throw if params[0] were to be null? (not 100% sure on that)\r\n\r\n```suggestion\r\n        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{LabelFromValue(params[0])});\r\n```",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T11:24:55Z",
      "diff_hunk" : "@@ -21,7 +21,7 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     std::vector<CTxDestination> addresses;\n     if (by_label) {\n         // Get the set of addresses assigned to label\n-        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{LabelFromValue(params[0])});\n+        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{CHECK_NONFATAL(LabelFromValue(params[0]))});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985674324",
      "id" : 985674324,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5846wDJU",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 24,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/coins.cpp",
      "position" : 5,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985676517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing `#include <util/check.h>` here and in other places.",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T11:27:42Z",
      "diff_hunk" : "@@ -140,7 +138,7 @@ RPCHelpMan setlabel()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n     }\n \n-    std::string label = LabelFromValue(request.params[1]);\n+    auto label = *CHECK_NONFATAL(LabelFromValue(request.params[1]));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985676517",
      "id" : 985676517,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII5846wDrl",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 141,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/addresses.cpp",
      "position" : 16,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removed from the milestone for now, as this is not a regression. Though, it can still be re-added and put into rc3 if merged in time.",
      "created_at" : "2022-10-17T17:11:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1281188620",
      "id" : 1281188620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585MXWMM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281188620/reactions"
      },
      "updated_at" : "2022-10-17T17:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281188620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1040928046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since the asterisk is added in the for-loop below, there is no need to add it here. I'd suggest to also add test coverage for `importaddress` here:\r\n```suggestion\r\n            rpc_calls.extend([\r\n                [node.importprivkey, node.dumpprivkey(address)],\r\n                [node.importaddress, address],\r\n            ])\r\n```",
      "commit_id" : "8b716611b1bf975e54050af278da7b6c1d6a042d",
      "created_at" : "2022-12-06T12:44:01Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            response = node.importdescriptors([{\n+                'desc': f'pkh({pubkey})',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1040928046",
      "id" : 1040928046,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII584-C00u",
      "original_commit_id" : "bb6d4670a21f5502ddd0dfbd4f1699a652ba0355",
      "original_line" : 47,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 23,
      "pull_request_review_id" : 1206523980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-06T12:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1042285597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks done",
      "commit_id" : "493cadc8ee0339244b722b2c36dac078a3397800",
      "created_at" : "2022-12-07T14:38:01Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            response = node.importdescriptors([{\n+                'desc': f'pkh({pubkey})',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1042285597",
      "id" : 1042285597,
      "in_reply_to_id" : 1040928046,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-IAQd",
      "original_commit_id" : "bb6d4670a21f5502ddd0dfbd4f1699a652ba0355",
      "original_line" : 47,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1208538111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-07T14:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to add coverage to `listsinceblock` and squashed 493cadc8ee0339244b722b2c36dac078a3397800 into the first commit.",
      "created_at" : "2022-12-08T12:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1342641963",
      "id" : 1342641963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585QBxcr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342641963/reactions"
      },
      "updated_at" : "2022-12-08T12:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342641963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045163890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Conceptually there isn't a default label, the record label is just empty.\r\n\r\nWhat if you return the empty string from `LabelFromValue` instead? It will also remove the need for all the `.value_or(DEFAULT_WALLET_LABEL);`.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-11T02:57:35Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045163890",
      "id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-S-9y",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1212637529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-11T02:58:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045666419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Some RPCs require the label to be optional for filtering. ~~`getaddressesbylabel` will return all addresses if the label is nullopt for example.~~\r\nI could hard-code the `\"\"` in `.value_or` calls if you prefer though.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T10:44:37Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045666419",
      "id" : 1045666419,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-U5pz",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213287703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T16:13:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045753945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe you are referring to `listsinceblock`? (as far as I can see, it's the only place where the label is used as optional), `getaddressesbylabel` uses a string not an optional.\r\n\r\nCheck this out: https://github.com/furszy/bitcoin-core/commit/8ce2d8965537a889fe88ca1a891763b35aba32ad. (If you like it, feel free to squash it on the first commit).",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T12:15:41Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045753945",
      "id" : 1045753945,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-VPBZ",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213421977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045852407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The CI doesn't pass on your commit because of `listsinceblock`. A label can be empty in this RPC.\r\n\r\nhttps://cirrus-ci.com/task/6056876765347840?logs=ci#L3626",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T13:51:35Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045852407",
      "id" : 1045852407,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-VnD3",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213617279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T13:51:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046338746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046338746"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: list initialization (in many other places too)\r\n```suggestion\r\n    auto label{LabelFromValue(request.params[0]).value_or(DEFAULT_WALLET_LABEL)};\r\n```",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T20:04:40Z",
      "diff_hunk" : "@@ -43,9 +44,7 @@ RPCHelpMan getnewaddress()\n     }\n \n     // Parse the label first so we don't generate a key if there's an error\n-    std::string label;\n-    if (!request.params[0].isNull())\n-        label = LabelFromValue(request.params[0]);\n+    auto label = LabelFromValue(request.params[0]).value_or(DEFAULT_WALLET_LABEL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046338746",
      "id" : 1046338746,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII584-Xdy6",
      "original_commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "original_line" : 47,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/addresses.cpp",
      "position" : 15,
      "pull_request_review_id" : 1214263675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046338746/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T20:25:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046338746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046347342"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046347342"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: missing `optional` and `string` includes",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T20:15:09Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+std::optional<std::string> LabelFromValue(const UniValue& value);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046347342",
      "id" : 1046347342,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII584-Xf5O",
      "original_commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : 13,
      "pull_request_review_id" : 1214263675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046347342/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T20:26:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046347342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You seem to have squashed the refactor into the fix commit. Please don't do that and re-separate them.",
      "created_at" : "2022-12-12T20:55:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1347314578",
      "id" : 1347314578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585QTmOS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1347314578/reactions"
      },
      "updated_at" : "2022-12-12T20:55:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1347314578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046397136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046397136"
         }
      },
      "author_association" : "MEMBER",
      "body" : "will check it tonight ðð¼. I coded a quick example. Shouldn't be hard to correct that single case.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T21:14:26Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046397136",
      "id" : 1046397136,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-XsDQ",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1214351609,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046397136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T21:14:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046397136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046429266"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046429266"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ready, fix was simple: https://github.com/furszy/bitcoin-core/commit/f8da21cb6eec0d62b2d3ed766201aca182b47342.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T21:51:14Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1046429266",
      "id" : 1046429266,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-Xz5S",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1214395267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046429266/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T21:51:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046429266",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @furszy I cherry-picked, squashed your commit, and added you as co-author.\r\n\r\n> You seem to have squashed the refactor into the fix commit. Please don't do that and re-separate them.\r\n\r\nThe refactor commit is now gone thanks to furszy.",
      "created_at" : "2022-12-13T13:23:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1348534148",
      "id" : 1348534148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585QYP-E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1348534148/reactions"
      },
      "updated_at" : "2022-12-13T13:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1348534148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1047458310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047458310"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: could avoid multiline ternary this way:\r\n```suggestion\r\n    std::optional<std::string> filter_label;\r\n    if (!request.params[5].isNull()) filter_label.emplace(LabelFromValue(request.params[5]));\r\n```",
      "commit_id" : "ba1e78a2d58059f439f17e821eb2d1bab4db86cb",
      "created_at" : "2022-12-13T17:08:17Z",
      "diff_hunk" : "@@ -635,10 +635,9 @@ RPCHelpMan listsinceblock()\n     bool include_removed = (request.params[3].isNull() || request.params[3].get_bool());\n     bool include_change = (!request.params[4].isNull() && request.params[4].get_bool());\n \n-    std::optional<std::string> filter_label;\n-    if (!request.params[5].isNull()) {\n-        filter_label = request.params[5].get_str();\n-    }\n+    // Only set it if 'label' was provided.\n+    std::optional<std::string> filter_label = request.params[5].isNull() ? std::nullopt :\n+                                              std::optional(LabelFromValue(request.params[5]));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1047458310",
      "id" : 1047458310,
      "line" : 640,
      "node_id" : "PRRC_kwDOABII584-bvIG",
      "original_commit_id" : "ba1e78a2d58059f439f17e821eb2d1bab4db86cb",
      "original_line" : 640,
      "original_position" : 10,
      "original_start_line" : 639,
      "path" : "src/wallet/rpc/transactions.cpp",
      "position" : 10,
      "pull_request_review_id" : 1215977116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047458310/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 639,
      "start_side" : "RIGHT",
      "updated_at" : "2022-12-13T17:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047458310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1047460728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047460728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This refactor introduces quite a few string copy operations, where previously references were passed. I think this can be quite easily avoided with the below patch. There are other callsites of `LabelFromValue` that would benefit from just changing their type to `const std::string&`, but to keep LoC change minimal I've not changed them in this patch.\r\n\r\n<details>\r\n<summary>git diff on ba1e78a2d58059f439f17e821eb2d1bab4db86cb</summary>\r\n\r\n```diff\r\ndiff --git a/src/wallet/rpc/addresses.cpp b/src/wallet/rpc/addresses.cpp\r\nindex e819c09c5..5d04d3113 100644\r\n--- a/src/wallet/rpc/addresses.cpp\r\n+++ b/src/wallet/rpc/addresses.cpp\r\n@@ -43,7 +43,7 @@ RPCHelpMan getnewaddress()\r\n     }\r\n \r\n     // Parse the label first so we don't generate a key if there's an error\r\n-    std::string label{LabelFromValue(request.params[0])};\r\n+    const std::string& label{LabelFromValue(request.params[0])};\r\n \r\n     OutputType output_type = pwallet->m_default_address_type;\r\n     if (!request.params[1].isNull()) {\r\n@@ -256,7 +256,7 @@ RPCHelpMan addmultisigaddress()\r\n \r\n     LOCK2(pwallet->cs_wallet, spk_man.cs_KeyStore);\r\n \r\n-    std::string label{LabelFromValue(request.params[2])};\r\n+    const std::string& label{LabelFromValue(request.params[2])};\r\n \r\n     int required = request.params[0].getInt<int>();\r\n \r\ndiff --git a/src/wallet/rpc/backup.cpp b/src/wallet/rpc/backup.cpp\r\nindex 1abb2efda..7e5fbfae0 100644\r\n--- a/src/wallet/rpc/backup.cpp\r\n+++ b/src/wallet/rpc/backup.cpp\r\n@@ -140,7 +140,7 @@ RPCHelpMan importprivkey()\r\n         EnsureWalletIsUnlocked(*pwallet);\r\n \r\n         std::string strSecret = request.params[0].get_str();\r\n-        std::string strLabel{LabelFromValue(request.params[1])};\r\n+        const std::string& strLabel{LabelFromValue(request.params[1])};\r\n \r\n         // Whether to perform rescan after import\r\n         if (!request.params[2].isNull())\r\n@@ -232,7 +232,7 @@ RPCHelpMan importaddress()\r\n     EnsureLegacyScriptPubKeyMan(*pwallet, true);\r\n \r\n     // Parse label\r\n-    std::string strLabel{LabelFromValue(request.params[1])};\r\n+    const std::string& strLabel{LabelFromValue(request.params[1])};\r\n \r\n     // Whether to perform rescan after import\r\n     bool fRescan = true;\r\n@@ -423,7 +423,7 @@ RPCHelpMan importpubkey()\r\n \r\n     EnsureLegacyScriptPubKeyMan(*pwallet, true);\r\n \r\n-    std::string strLabel{LabelFromValue(request.params[1])};\r\n+    const std::string& strLabel{LabelFromValue(request.params[1])};\r\n \r\n     // Whether to perform rescan after import\r\n     bool fRescan = true;\r\n@@ -1158,7 +1158,7 @@ static UniValue ProcessImport(CWallet& wallet, const UniValue& data, const int64\r\n         if (internal && data.exists(\"label\")) {\r\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Internal addresses should not have a label\");\r\n         }\r\n-        std::string label{LabelFromValue(data[\"label\"])};\r\n+        const std::string& label{LabelFromValue(data[\"label\"])};\r\n         const bool add_keypool = data.exists(\"keypool\") ? data[\"keypool\"].get_bool() : false;\r\n \r\n         // Add to keypool only works with privkeys disabled\r\n@@ -1452,7 +1452,7 @@ static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, c\r\n         const std::string& descriptor = data[\"desc\"].get_str();\r\n         const bool active = data.exists(\"active\") ? data[\"active\"].get_bool() : false;\r\n         const bool internal = data.exists(\"internal\") ? data[\"internal\"].get_bool() : false;\r\n-        std::string label{LabelFromValue(data[\"label\"])};\r\n+        const std::string& label{LabelFromValue(data[\"label\"])};\r\n \r\n         // Parse descriptor string\r\n         FlatSigningProvider keys;\r\ndiff --git a/src/wallet/rpc/transactions.cpp b/src/wallet/rpc/transactions.cpp\r\nindex 7088ff4ab..9b03782d4 100644\r\n--- a/src/wallet/rpc/transactions.cpp\r\n+++ b/src/wallet/rpc/transactions.cpp\r\n@@ -636,8 +636,8 @@ RPCHelpMan listsinceblock()\r\n     bool include_change = (!request.params[4].isNull() && request.params[4].get_bool());\r\n \r\n     // Only set it if 'label' was provided.\r\n-    std::optional<std::string> filter_label = request.params[5].isNull() ? std::nullopt :\r\n-                                              std::optional(LabelFromValue(request.params[5]));\r\n+    const std::optional<std::string>& filter_label = request.params[5].isNull() ? std::nullopt :\r\n+                                                     std::optional{LabelFromValue(request.params[5])};\r\n \r\n     int depth = height ? wallet.GetLastBlockHeight() + 1 - *height : -1;\r\n \r\ndiff --git a/src/wallet/rpc/util.cpp b/src/wallet/rpc/util.cpp\r\nindex 1fdb80630..bc0c284dc 100644\r\n--- a/src/wallet/rpc/util.cpp\r\n+++ b/src/wallet/rpc/util.cpp\r\n@@ -130,11 +130,12 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\r\n     return *spk_man;\r\n }\r\n \r\n-std::string LabelFromValue(const UniValue& value)\r\n+const std::string& LabelFromValue(const UniValue& value)\r\n {\r\n-    if (value.isNull()) return \"\"; // empty\r\n+    static std::string empty_string;\r\n+    if (value.isNull()) return empty_string;\r\n \r\n-    std::string label = value.get_str();\r\n+    const std::string& label{value.get_str()};\r\n     if (label == \"*\")\r\n         throw JSONRPCError(RPC_WALLET_INVALID_LABEL_NAME, \"Invalid label name\");\r\n     return label;\r\ndiff --git a/src/wallet/rpc/util.h b/src/wallet/rpc/util.h\r\nindex 87d34f7c1..9dd101167 100644\r\n--- a/src/wallet/rpc/util.h\r\n+++ b/src/wallet/rpc/util.h\r\n@@ -5,6 +5,7 @@\r\n #ifndef BITCOIN_WALLET_RPC_UTIL_H\r\n #define BITCOIN_WALLET_RPC_UTIL_H\r\n \r\n+#include <attributes.h>\r\n #include <script/script.h>\r\n \r\n #include <any>\r\n@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\r\n \r\n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\r\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\r\n-std::string LabelFromValue(const UniValue& value);\r\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);\r\n //! Fetch parent descriptors of this scriptPubKey.\r\n void PushParentDescriptors(const CWallet& wallet, const CScript& script_pubkey, UniValue& entry);\r\n ```\r\n</details>",
      "commit_id" : "ba1e78a2d58059f439f17e821eb2d1bab4db86cb",
      "created_at" : "2022-12-13T17:10:06Z",
      "diff_hunk" : "@@ -1163,7 +1158,7 @@ static UniValue ProcessImport(CWallet& wallet, const UniValue& data, const int64\n         if (internal && data.exists(\"label\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Internal addresses should not have a label\");\n         }\n-        const std::string& label = data.exists(\"label\") ? data[\"label\"].get_str() : \"\";\n+        std::string label{LabelFromValue(data[\"label\"])};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1047460728",
      "id" : 1047460728,
      "line" : 1161,
      "node_id" : "PRRC_kwDOABII584-bvt4",
      "original_commit_id" : "ba1e78a2d58059f439f17e821eb2d1bab4db86cb",
      "original_line" : 1161,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 39,
      "pull_request_review_id" : 1215977116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047460728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-13T17:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1047460728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @stickies-v I addressed your comments.",
      "created_at" : "2022-12-15T09:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1352759804",
      "id" : 1352759804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585QoXn8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352759804/reactions"
      },
      "updated_at" : "2022-12-15T09:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352759804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">The refactor commit is now gone thanks to furszy.\r\n\r\nPlease restore it.",
      "created_at" : "2022-12-15T09:26:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1352777044",
      "id" : 1352777044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585Qob1U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352777044/reactions"
      },
      "updated_at" : "2022-12-15T09:26:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352777044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Please restore it.\r\n\r\nDone @luke-jr.",
      "created_at" : "2022-12-15T10:04:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1352825306",
      "id" : 1352825306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585Qonna",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352825306/reactions"
      },
      "updated_at" : "2022-12-15T10:04:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352825306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1049778434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1049778434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Guess that you wanted to set `LIFETIMEBOUND` for the return type instead of the function's argument right?.\r\n\r\nStill, would return the plain string and not a reference. There is no need to overcomplicate code for address book labels.",
      "commit_id" : "cce2e872e1a8b7c5b80036f48f1f35467b9328ff",
      "created_at" : "2022-12-15T15:25:58Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1049778434",
      "id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-klkC",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1219425144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1049778434/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-15T15:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1049778434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050561990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050561990"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, removed the reference.",
      "commit_id" : "cce2e872e1a8b7c5b80036f48f1f35467b9328ff",
      "created_at" : "2022-12-16T09:56:49Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050561990",
      "id" : 1050561990,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-nk3G",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1220566846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050561990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T09:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050561990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050659225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050659225"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Guess that you wanted to set LIFETIMEBOUND for the return type instead of the function's argument right?\r\n\r\nThe return value of `LabelFromValue` was bound to the lifetime of `const UniValue& value` so the attribute was correct I think? See https://clang.llvm.org/docs/AttributeReference.html#lifetimebound\r\n\r\n> There is no need to overcomplicate code for address book labels.\r\n\r\nI'm honestly not sure why this got reverted. It introduces almost no additional complexity in the code, and callsites can now _choose_ if they wish to have `LabelFromValue` return by value or by reference. Even though wallet labels aren't expected to be huge strings, I don't see the downside of doing it this way? There's no point bikeshedding over this, we won't be able to measure the performance impact, but it just seems like the more proper way of doing things, imo. Up to you, @aureleoules.",
      "commit_id" : "cce2e872e1a8b7c5b80036f48f1f35467b9328ff",
      "created_at" : "2022-12-16T11:42:01Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050659225",
      "id" : 1050659225,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-n8mZ",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1220725785,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050659225/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T11:42:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050659225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050749217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050749217"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I'm honestly not sure why this got reverted. It introduces almost no additional complexity in the code, and callsites can now choose if they wish to have LabelFromValue return by value or by reference. Even though wallet labels aren't expected to be huge strings, I don't see the downside of doing it this way? There's no point bikeshedding over this, we won't be able to measure the performance impact, but it just seems like the more proper way of doing things, imo. Up to you, @aureleoules.\r\n\r\nI'm actually not really happy with the revert neither but for another reason.\r\n\r\nBut first, my point above was to take advantage of the compiler's [rvo](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization), which is designed for this kind of stuff.\r\n\r\nNow, the reason why I'm not particularly happy with the latest changes is the use of the `auto` keyword alone (which involves a string copy). Instead, should receive the function's output into a const ref string. @aureleoules.\r\n\r\nThoughts @stickies-v?",
      "commit_id" : "b119bb84250f5b97053314f730aefb8c10b4867a",
      "created_at" : "2022-12-16T13:14:16Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050749217",
      "id" : 1050749217,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-oSkh",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1220833681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050749217/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T14:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050749217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050781688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050781688"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this ok with you? https://github.com/bitcoin/bitcoin/compare/cce2e872e1a8b7c5b80036f48f1f35467b9328ff..b119bb84250f5b97053314f730aefb8c10b4867a",
      "commit_id" : "b119bb84250f5b97053314f730aefb8c10b4867a",
      "created_at" : "2022-12-16T13:52:59Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1050781688",
      "id" : 1050781688,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-oaf4",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1220884108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050781688/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T13:52:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1050781688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1051391081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051391081"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Have spoken with @stickies-v further and he made me notice that the string is not initialized inside `LabelFromValue`, the univalue `get_str` method returns a const reference.. so the compiler's rvo argument does not apply.\r\n\r\nSo all good for me now, I'm aligned on returning the const ref string from `LabelFromValue` and adding the lifetime bound attribute once more.\r\njust need to re-add the following line:\r\n```c++\r\nconst std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);\r\n``` ",
      "commit_id" : "b119bb84250f5b97053314f730aefb8c10b4867a",
      "created_at" : "2022-12-17T12:11:19Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1051391081",
      "id" : 1051391081,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-qvRp",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1221788674,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051391081/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-17T12:11:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051391081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1051489462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051489462"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    static const std::string empty_string;\r\n```",
      "commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "created_at" : "2022-12-17T22:04:01Z",
      "diff_hunk" : "@@ -132,7 +132,10 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n std::string LabelFromValue(const UniValue& value)\n {\n-    std::string label = value.get_str();\n+    static std::string empty_string;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1051489462",
      "id" : 1051489462,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-rHS2",
      "original_commit_id" : "b119bb84250f5b97053314f730aefb8c10b4867a",
      "original_line" : 135,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 1221902773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051489462/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-18T04:48:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051489462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK ",
      "created_at" : "2022-12-18T19:28:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1356859862",
      "id" : 1356859862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585Q4AnW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1356859862/reactions"
      },
      "updated_at" : "2022-12-18T19:28:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1356859862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1052093291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052093291"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n        filter_label.emplace(LabelFromValue(request.params[0]));\r\n```",
      "commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "created_at" : "2022-12-19T11:22:17Z",
      "diff_hunk" : "@@ -487,7 +487,7 @@ RPCHelpMan listtransactions()\n \n     std::optional<std::string> filter_label;\n     if (!request.params[0].isNull() && request.params[0].get_str() != \"*\") {\n-        filter_label = request.params[0].get_str();\n+        filter_label = LabelFromValue(request.params[0]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1052093291",
      "id" : 1052093291,
      "line" : 490,
      "node_id" : "PRRC_kwDOABII584-tatr",
      "original_commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "original_line" : 490,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/transactions.cpp",
      "position" : 5,
      "pull_request_review_id" : 1222722598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052093291/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-19T11:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052093291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1052094630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052094630"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can be marked as resolved, as furszy mentioned we're all in agreement here and I'm okay with the current implementation ð ",
      "commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "created_at" : "2022-12-19T11:23:45Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1052094630",
      "id" : 1052094630,
      "in_reply_to_id" : 1049778434,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII584-tbCm",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : 13,
      "pull_request_review_id" : 1222722598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052094630/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-19T11:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1052094630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1060248540"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060248540"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Changing this to return a reference doesn't seem very safe -- in that case calling `string& label = LabelFromValue(data[\"label\"])` will mean `label` can become invalid if `data` gets changed (eg, if additional calls to `data.pushKV()` are made, the `data.values` vector may be reallocated, invalidating the reference), which is not something `LIFETIMEBOUND` can check.\r\n\r\nAs far as I can see we're talking one copy of each fairly short label per RPC call here, which isn't something that needs to be aggressively optimised. So seems much better to me to just keep the implicit copy of the string and have a simple API that minimises the risk of errors creeping in.",
      "commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "created_at" : "2023-01-03T02:29:14Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1060248540",
      "id" : 1060248540,
      "in_reply_to_id" : 1049778434,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII584_Mhvc",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : 13,
      "pull_request_review_id" : 1234029419,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060248540/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-03T02:43:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060248540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1060717728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060717728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That's a great point I hadn't considered. Even though the `data[\"label\"]` `UniValue::VSTR` object that we bind to doesn't use a vector to store its string value and would seem safe at first, `data[\"label\"]` returns a reference to the `data.values` vector - so any changes to that parent `UniValue::VOBJ` that we can't control for here are potentially dangerous.\r\n\r\nI agree that this could lead to nasty issues and isn't worth the overhead. Sorry for causing the back and forth on this @aureleoules. The `UniValue` type can be a bit tricky to reason about, it seems.",
      "commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "created_at" : "2023-01-03T15:53:21Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1060717728",
      "id" : 1060717728,
      "in_reply_to_id" : 1049778434,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII584_OUSg",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : 13,
      "pull_request_review_id" : 1234752922,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060717728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-03T15:53:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060717728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061389757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061389757"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-04T11:31:46Z",
      "diff_hunk" : "@@ -487,7 +487,7 @@ RPCHelpMan listtransactions()\n \n     std::optional<std::string> filter_label;\n     if (!request.params[0].isNull() && request.params[0].get_str() != \"*\") {\n-        filter_label = request.params[0].get_str();\n+        filter_label = LabelFromValue(request.params[0]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061389757",
      "id" : 1061389757,
      "in_reply_to_id" : 1052093291,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584_Q4W9",
      "original_commit_id" : "408e375d15e327b2f5886f395dbc23a4834460e5",
      "original_line" : 490,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/transactions.cpp",
      "position" : null,
      "pull_request_review_id" : 1235740241,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061389757/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-04T11:31:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061389757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061390296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061390296"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done https://github.com/bitcoin/bitcoin/compare/408e375d15e327b2f5886f395dbc23a4834460e5..632202c5b7bb5fb975f8bde74b6085772b142c5b",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-04T11:32:27Z",
      "diff_hunk" : "@@ -40,7 +41,7 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n bool GetAvoidReuseFlag(const CWallet& wallet, const UniValue& param);\n bool ParseIncludeWatchonly(const UniValue& include_watchonly, const CWallet& wallet);\n-std::string LabelFromValue(const UniValue& value);\n+const std::string& LabelFromValue(const UniValue& value LIFETIMEBOUND);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061390296",
      "id" : 1061390296,
      "in_reply_to_id" : 1049778434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584_Q4fY",
      "original_commit_id" : "8cf9f5dd81094b38886be2598c6065ced3baad5c",
      "original_line" : 44,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1235741049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061390296/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-04T11:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061390296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061429175"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061429175"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 7d2d0c4d:\r\nis this include intended?",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-04T12:24:41Z",
      "diff_hunk" : "@@ -5,6 +5,7 @@\n #ifndef BITCOIN_WALLET_RPC_UTIL_H\n #define BITCOIN_WALLET_RPC_UTIL_H\n \n+#include <attributes.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061429175",
      "id" : 1061429175,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584_RB-3",
      "original_commit_id" : "7d2d0c4d552a9fcc12fe7ef0c54c236bf2e66f09",
      "original_line" : 8,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1235799769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061429175/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-04T12:25:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061429175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061446668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061446668"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed thanks",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-04T12:45:25Z",
      "diff_hunk" : "@@ -5,6 +5,7 @@\n #ifndef BITCOIN_WALLET_RPC_UTIL_H\n #define BITCOIN_WALLET_RPC_UTIL_H\n \n+#include <attributes.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061446668",
      "id" : 1061446668,
      "in_reply_to_id" : 1061429175,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584_RGQM",
      "original_commit_id" : "7d2d0c4d552a9fcc12fe7ef0c54c236bf2e66f09",
      "original_line" : 8,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 1235827021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061446668/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-04T12:45:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061446668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061633851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061633851"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: not needed anymore now that we're returning a string copy\r\n\r\n```suggestion\r\n    if (value.isNull()) return \"\";\r\n```",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-04T15:57:08Z",
      "diff_hunk" : "@@ -132,7 +132,10 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n std::string LabelFromValue(const UniValue& value)\n {\n-    std::string label = value.get_str();\n+    static const std::string empty_string;\n+    if (value.isNull()) return empty_string;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1061633851",
      "id" : 1061633851,
      "line" : 136,
      "node_id" : "PRRC_kwDOABII584_Rz87",
      "original_commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "original_line" : 136,
      "original_position" : 6,
      "original_start_line" : 135,
      "path" : "src/wallet/rpc/util.cpp",
      "position" : 6,
      "pull_request_review_id" : 1236108249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061633851/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-04T15:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1061633851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1063074418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063074418"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Or `return {};`",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-06T03:55:15Z",
      "diff_hunk" : "@@ -132,7 +132,10 @@ const LegacyScriptPubKeyMan& EnsureConstLegacyScriptPubKeyMan(const CWallet& wal\n \n std::string LabelFromValue(const UniValue& value)\n {\n-    std::string label = value.get_str();\n+    static const std::string empty_string;\n+    if (value.isNull()) return empty_string;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1063074418",
      "id" : 1063074418,
      "in_reply_to_id" : 1061633851,
      "line" : 136,
      "node_id" : "PRRC_kwDOABII584_XTpy",
      "original_commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "original_line" : 136,
      "original_position" : 6,
      "original_start_line" : 135,
      "path" : "src/wallet/rpc/util.cpp",
      "position" : 6,
      "pull_request_review_id" : 1238307792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063074418/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-06T03:55:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063074418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-06T04:03:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1373114894",
      "id" : 1373114894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585R2BIO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373114894/reactions"
      },
      "updated_at" : "2023-01-06T04:03:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373114894",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1065101213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065101213"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d \"test: Invalid label name coverage\"\r\n\r\n`importpubkey` is a legacy wallet only RPC. The reason this test still passes with `--descriptors` is because the test framework has this (and some of the other import RPCs) aliased to `importdescriptors`.",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-09T20:57:23Z",
      "diff_hunk" : "@@ -28,6 +28,44 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1065101213",
      "id" : 1065101213,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII584_fCed",
      "original_commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "original_line" : 39,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 12,
      "pull_request_review_id" : 1241194624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065101213/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-09T20:57:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065101213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1065435952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065435952"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good to know. But considering this PR has 4 ACKs, is it worth the change? The test is executed with both `--legacy-wallet` and `--descriptors` anyway.",
      "commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "created_at" : "2023-01-10T07:54:21Z",
      "diff_hunk" : "@@ -28,6 +28,44 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1065435952",
      "id" : 1065435952,
      "in_reply_to_id" : 1065101213,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII584_gUMw",
      "original_commit_id" : "65e78bda7cd23ad7b6ede63c6bf5ffe6f552c71d",
      "original_line" : 39,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 12,
      "pull_request_review_id" : 1241672943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065435952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-10T07:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065435952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   }
]
