[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but you can't break compatibility by reordering another argument to `listreceivedbyaddress`. It's also unnecessary I think; you can specify \"null\" to get the default.",
      "created_at" : "2018-11-12T02:55:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-437736834",
      "id" : 437736834,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzczNjgzNA==",
      "updated_at" : "2018-11-12T02:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437736834",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa Not sure how to pass \"null\" as `address_filter` parameter without breaking https://github.com/bitcoin/bitcoin/pull/14417.",
      "created_at" : "2018-11-12T04:11:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-437747917",
      "id" : 437747917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzc0NzkxNw==",
      "updated_at" : "2018-11-12T04:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437747917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232539375"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232539375"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can't you just check if `address_filter` is an empty string?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2018-11-12T05:41:22Z",
      "diff_hunk" : "@@ -1028,13 +1045,18 @@ static UniValue ListReceived(interfaces::Chain::Lock& locked_chain, CWallet * co\n         if(params[2].get_bool())\n             filter = filter | ISMINE_WATCH_ONLY;\n \n+    bool include_coinbase = false;\n+    if (!params[3].isNull()) {\n+        include_coinbase = params[3].get_bool();\n+    }\n+\n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n-        if (!IsValidDestinationString(params[3].get_str())) {\n+    if (!by_label && params.size() > 4) {\n+        if (!IsValidDestinationString(params[4].get_str())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232539375",
      "id" : 232539375,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjUzOTM3NQ==",
      "original_commit_id" : "f3d8ca1f983fb44484a4b392c8ea2d6fbe928df9",
      "original_line" : 1056,
      "original_position" : 110,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173757114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232539375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232628441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232628441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Breaking change here, don't change argument order, description above is correct.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2018-11-12T11:49:04Z",
      "diff_hunk" : "@@ -1164,15 +1186,16 @@ static UniValue listreceivedbyaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 4)\n+    if (request.fHelp || request.params.size() > 5)\n         throw std::runtime_error(\n-            \"listreceivedbyaddress ( minconf include_empty include_watchonly address_filter )\\n\"\n+            \"listreceivedbyaddress ( minconf include_empty include_watchonly address_filter include_coinbase )\\n\"\n             \"\\nList balances by receiving address.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. minconf           (numeric, optional, default=1) The minimum number of confirmations before payments are included.\\n\"\n             \"2. include_empty     (bool, optional, default=false) Whether to include addresses that haven't received any payments.\\n\"\n             \"3. include_watchonly (bool, optional, default=false) Whether to include watch-only addresses (see 'importaddress').\\n\"\n-            \"4. address_filter    (string, optional) If present, only return information on this address.\\n\"\n+            \"4. include_coinbase  (bool, optional, default=false) Whether to include coinbase transactions.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232628441",
      "id" : 232628441,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjYyODQ0MQ==",
      "original_commit_id" : "f3d8ca1f983fb44484a4b392c8ea2d6fbe928df9",
      "original_line" : 1197,
      "original_position" : 142,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173864445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232628441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630167"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630167"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be 4.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2018-11-12T11:55:59Z",
      "diff_hunk" : "@@ -41,13 +41,17 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"settxfee\", 0, \"amount\" },\n     { \"sethdseed\", 0, \"newkeypool\" },\n     { \"getreceivedbyaddress\", 1, \"minconf\" },\n+    { \"getreceivedbyaddress\", 2, \"include_coinbase\" },\n     { \"getreceivedbylabel\", 1, \"minconf\" },\n+    { \"getreceivedbylabel\", 2, \"include_coinbase\" },\n     { \"listreceivedbyaddress\", 0, \"minconf\" },\n     { \"listreceivedbyaddress\", 1, \"include_empty\" },\n     { \"listreceivedbyaddress\", 2, \"include_watchonly\" },\n+    { \"listreceivedbyaddress\", 3, \"include_coinbase\" },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630167",
      "id" : 232630167,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjYzMDE2Nw==",
      "original_commit_id" : "f3d8ca1f983fb44484a4b392c8ea2d6fbe928df9",
      "original_line" : 50,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : null,
      "pull_request_review_id" : 173864445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missing new argument.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2018-11-12T11:56:25Z",
      "diff_hunk" : "@@ -1215,14 +1239,15 @@ static UniValue listreceivedbylabel(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 3)\n+    if (request.fHelp || request.params.size() > 4)\n         throw std::runtime_error(\n             \"listreceivedbylabel ( minconf include_empty include_watchonly)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630273",
      "id" : 232630273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjYzMDI3Mw==",
      "original_commit_id" : "f3d8ca1f983fb44484a4b392c8ea2d6fbe928df9",
      "original_line" : 1244,
      "original_position" : 164,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173864445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630458"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630458"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missing new argument.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2018-11-12T11:56:47Z",
      "diff_hunk" : "@@ -624,13 +632,14 @@ static UniValue getreceivedbylabel(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 3)\n         throw std::runtime_error(\n             \"getreceivedbylabel \\\"label\\\" ( minconf )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r232630458",
      "id" : 232630458,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjYzMDQ1OA==",
      "original_commit_id" : "f3d8ca1f983fb44484a4b392c8ea2d6fbe928df9",
      "original_line" : 637,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173864445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232630458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do we know a usecase where anyone would want this behaviour? It seems transparently broken to me.\r\n\r\nIf not, I think I would prefer we fix it and have a LOUD release note about the change, and if we're feeling especially conservative have a hidden config option to restore the old behaviour which we can drop after a couple releases if no one reports needing it.\r\n\r\nHaving an option presents a perpetual usage complexity increase, and defaulting the option to the old behaviour risks users being messed up  by continuing to miss these payments.\r\n\r\nOne thing to consider, however, is that coinbase payments have different deconfirmation risks then general transactions... and cannot be spent for 100 blocks. E.g. you don't want service that accept a 1 conf deposit and withdraw being exploited as a orphan risk eliminator. Nor do we want to undermine parties cashflow handling by causing them to think they can spend more now than they can. There is justification for treating coinbase payments differently (e.g. only showing them once they're spendable), just not for hiding them completely.   Having a \"include coinbase payments yes/no\" doesn't solve these concerns. Having a \"delay them by 100 blocks, yes/no\" probably would.\r\n\r\nSo maybe I would suggest having an argument to hide them until maturity, defaulting on, a hidden option to get the old behaviour, defaulting off, to be removed once it's confirmed no one needs it, and a loud release note explaining the change.",
      "created_at" : "2018-11-12T20:21:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438016042",
      "id" : 438016042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODAxNjA0Mg==",
      "updated_at" : "2018-11-12T20:24:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438016042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell it is however useful to know if a payment was made regardless if it takes 100 blocks to be spendable?",
      "created_at" : "2018-11-12T20:34:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438019511",
      "id" : 438019511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODAxOTUxMQ==",
      "updated_at" : "2018-11-12T20:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438019511",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It can be, but listreceivedbyaddress doesn't normally show unconfirmed payments and the output IIRC doesn't even tell you if its an immature coinbase payment (and if it did, many people who didn't even realize coinbase payments were possible would not know to check for it)",
      "created_at" : "2018-11-12T23:18:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438065378",
      "id" : 438065378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODA2NTM3OA==",
      "updated_at" : "2018-11-12T23:18:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438065378",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell what if we consider `minconf` the depth added to the minimum spendable depth? Then minconf=1 for coinbase transactions would be 101?",
      "created_at" : "2018-11-12T23:39:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438071397",
      "id" : 438071397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODA3MTM5Nw==",
      "updated_at" : "2018-11-12T23:39:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438071397",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@gmaxwell I agree. I think it is an error that should be corrected. I'm not sure why anyone would want coinbase txs excluded. I haven't seen a good explanation for why they are filtered out, or a usecase.",
      "created_at" : "2018-11-13T00:07:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438078179",
      "id" : 438078179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODA3ODE3OQ==",
      "updated_at" : "2018-11-13T00:07:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438078179",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23667](https://github.com/bitcoin/bitcoin/pull/23667) (Split up rpcwallet by meshcollider)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-11-13T15:20:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438304021",
      "id" : 438304021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODMwNDAyMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438304021/reactions"
      },
      "updated_at" : "2021-12-07T10:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438304021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Commits and PR description have been updated.",
      "created_at" : "2018-11-15T04:56:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-438917596",
      "id" : 438917596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODkxNzU5Ng==",
      "updated_at" : "2018-11-17T21:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438917596",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I refactored the `getreceivedby` calls to use a common function `GetReceived`. This mirrors the `listreceivedby` calls and doesn't repeat as much code.",
      "created_at" : "2018-11-16T18:52:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-439490575",
      "id" : 439490575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzOTQ5MDU3NQ==",
      "updated_at" : "2018-11-16T20:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/439490575",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@gmaxwell Updated this PR with your suggestions.",
      "created_at" : "2018-11-20T02:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-440117123",
      "id" : 440117123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDExNzEyMw==",
      "updated_at" : "2018-11-20T02:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440117123",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-11-23T09:22:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-441189612",
      "id" : 441189612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MTE4OTYxMg==",
      "updated_at" : "2018-11-23T09:22:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/441189612",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Rebased",
      "created_at" : "2018-11-23T14:53:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-441260352",
      "id" : 441260352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MTI2MDM1Mg==",
      "updated_at" : "2018-11-23T14:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/441260352",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-12-05T16:53:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-444558548",
      "id" : 444558548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDU1ODU0OA==",
      "updated_at" : "2018-12-05T16:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444558548",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-12-10T19:11:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-445935324",
      "id" : 445935324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTkzNTMyNA==",
      "updated_at" : "2018-12-10T19:11:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445935324",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r256196828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256196828"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                    {\"include_immature\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include immature coinbase transactions.\"},\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2019-02-12T23:52:36Z",
      "diff_hunk" : "@@ -577,13 +643,14 @@ static UniValue getreceivedbyaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 4)\n         throw std::runtime_error(\n             RPCHelpMan{\"getreceivedbyaddress\",\n                 \"\\nReturns the total amount received by the given address in transactions with at least minconf confirmations.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The bitcoin address for transactions.\"},\n                     {\"minconf\", RPCArg::Type::NUM, /* opt */ true, /* default_val */ \"1\", \"Only include transactions confirmed at least this many times.\"},\n+                    {\"include_immature\", RPCArg::Type::BOOL, /* opt */ true, /* default_val */ \"false\", \"Include immature coinbase transactions.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r256196828",
      "id" : 256196828,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NjE5NjgyOA==",
      "original_commit_id" : "7b5db837546f8fcf3d73e1141cd74a927a4a2d45",
      "original_line" : 653,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 202969315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256196828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r256685600"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256685600"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2019-02-14T04:12:02Z",
      "diff_hunk" : "@@ -577,13 +643,14 @@ static UniValue getreceivedbyaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 4)\n         throw std::runtime_error(\n             RPCHelpMan{\"getreceivedbyaddress\",\n                 \"\\nReturns the total amount received by the given address in transactions with at least minconf confirmations.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The bitcoin address for transactions.\"},\n                     {\"minconf\", RPCArg::Type::NUM, /* opt */ true, /* default_val */ \"1\", \"Only include transactions confirmed at least this many times.\"},\n+                    {\"include_immature\", RPCArg::Type::BOOL, /* opt */ true, /* default_val */ \"false\", \"Include immature coinbase transactions.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r256685600",
      "id" : 256685600,
      "in_reply_to_id" : 256196828,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NjY4NTYwMA==",
      "original_commit_id" : "7b5db837546f8fcf3d73e1141cd74a927a4a2d45",
      "original_line" : 653,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 203562651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256685600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This PR doesn't compile when rebased on `master`. Are you still working on this @andrewtoth? :-)",
      "created_at" : "2019-05-07T16:14:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-490147532",
      "id" : 490147532,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDE0NzUzMg==",
      "updated_at" : "2019-05-07T16:14:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490147532",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift Hmm I rebased and it compiled fine. I'll push the rebase anyways.",
      "created_at" : "2019-05-07T23:17:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-490288411",
      "id" : 490288411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDI4ODQxMQ==",
      "updated_at" : "2019-05-07T23:17:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490288411",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-08-16T05:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-521890375",
      "id" : 521890375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTg5MDM3NQ==",
      "updated_at" : "2019-08-16T05:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521890375",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-09-02T11:55:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-527120372",
      "id" : 527120372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNzEyMDM3Mg==",
      "updated_at" : "2019-09-02T11:55:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/527120372",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-29T13:21:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-547416238",
      "id" : 547416238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzQxNjIzOA==",
      "updated_at" : "2019-10-29T13:21:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547416238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/fa733bbd78add587e19f0175ab9c127a8c27e024/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-03-11T17:02:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-597751943",
      "id" : 597751943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5Nzc1MTk0Mw==",
      "updated_at" : "2020-03-11T17:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/597751943",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've update this after #17579 so it should be much easier to review. One thing I'm not sure of is how to make the final argument hidden with `RPCHelpMan`.",
      "created_at" : "2020-04-30T13:48:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-621864062",
      "id" : 621864062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg2NDA2Mg==",
      "updated_at" : "2020-04-30T13:48:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621864062",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you explain why you want to hide an argument, especially since you suggest users set the argument to `false` if they run into problems. In other words you are asking users to blindly pass an undocumented value into an RPC.",
      "created_at" : "2020-04-30T14:08:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-621876230",
      "id" : 621876230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg3NjIzMA==",
      "updated_at" : "2020-04-30T14:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621876230",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems I misread one of the comments:\r\n>if we're feeling especially conservative have a hidden config option to restore the old behaviour which we can drop after a couple releases if no one reports needing it.\r\n\r\nSo, it should be a hidden config option instead of a hidden argument. I can update to include the config option, but do you think it's necessary?",
      "created_at" : "2020-04-30T14:14:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-621879825",
      "id" : 621879825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg3OTgyNQ==",
      "updated_at" : "2020-04-30T14:14:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621879825",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, I didn't recall that comment. I see two options:\r\n\r\n* Show the argument in the RPC help, but explain that it is not supposed to be toggled unless needed and that it is going away in a few releases.\r\n* Or, add a debug config option that says the same.",
      "created_at" : "2020-04-30T14:18:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-621882268",
      "id" : 621882268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg4MjI2OA==",
      "updated_at" : "2020-04-30T14:18:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621882268",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-01T11:09:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-622347234",
      "id" : 622347234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjM0NzIzNA==",
      "updated_at" : "2020-05-01T11:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622347234",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke thanks I've updated with a hidden config option.",
      "created_at" : "2020-05-02T19:40:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-623003716",
      "id" : 623003716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzAwMzcxNg==",
      "updated_at" : "2020-05-02T19:40:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623003716",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-23T18:22:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-697835427",
      "id" : 697835427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NzgzNTQyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-23T18:22:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/697835427",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@andrewtoth ping for a rebase.",
      "created_at" : "2020-12-17T17:13:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-747576199",
      "id" : 747576199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NzU3NjE5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-17T17:13:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747576199",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550329066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550329066"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit, if you have a chance to retouch\r\n```suggestion\r\n    bool include_immature{!params[2].isNull() && params[2].get_bool()};\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2020-12-30T21:15:04Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{params[2].isNull() ? false : params[2].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550329066",
      "id" : 550329066,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDMyOTA2Ng==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 674,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 560202678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550329066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550365041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550365041"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    bool include_immature{!params[next_index].isNull() && params[next_index].get_bool()};\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2020-12-31T00:35:09Z",
      "diff_hunk" : "@@ -1059,27 +1077,38 @@ static UniValue ListReceived(const CWallet* const pwallet, const UniValue& param\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{params[next_index].isNull() ? false : params[next_index].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550365041",
      "id" : 550365041,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM2NTA0MQ==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 1091,
      "original_position" : 80,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 560202678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550365041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550415068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550415068"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Consider enclosing the `continue;` within braces? I'm aware they weren't there previously, but when the condition becomes multi-line, perhaps they help with readability.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2020-12-31T07:14:21Z",
      "diff_hunk" : "@@ -1059,27 +1077,38 @@ static UniValue ListReceived(const CWallet* const pwallet, const UniValue& param\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{params[next_index].isNull() ? false : params[next_index].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{pwallet->chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     std::map<CTxDestination, tallyitem> mapTally;\n     for (const std::pair<const uint256, CWalletTx>& pairWtx : pwallet->mapWallet) {\n         const CWalletTx& wtx = pairWtx.second;\n \n-        if (wtx.IsCoinBase() || !pwallet->chain().checkFinalTx(*wtx.tx)) {\n-            continue;\n-        }\n-\n         int nDepth = wtx.GetDepthInMainChain();\n         if (nDepth < nMinDepth)\n             continue;\n \n+        // Coinbase with less than 1 confirmation is an orphan\n+        if ((wtx.IsCoinBase() && (nDepth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())\n+            || !pwallet->chain().checkFinalTx(*wtx.tx))\n+            continue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550415068",
      "id" : 550415068,
      "line" : 1106,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQxNTA2OA==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 1106,
      "original_position" : 103,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 112,
      "pull_request_review_id" : 560202678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550415068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r566326563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566326563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "can remove the diff in `commands`, and then rebase",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-01-28T18:45:10Z",
      "diff_hunk" : "@@ -4578,8 +4610,8 @@ static const CRPCCommand commands[] =\n     { \"wallet\",             \"listaddressgroupings\",             &listaddressgroupings,          {} },\n     { \"wallet\",             \"listlabels\",                       &listlabels,                    {\"purpose\"} },\n     { \"wallet\",             \"listlockunspent\",                  &listlockunspent,               {} },\n-    { \"wallet\",             \"listreceivedbyaddress\",            &listreceivedbyaddress,         {\"minconf\",\"include_empty\",\"include_watchonly\",\"address_filter\"} },\n-    { \"wallet\",             \"listreceivedbylabel\",              &listreceivedbylabel,           {\"minconf\",\"include_empty\",\"include_watchonly\"} },\n+    { \"wallet\",             \"listreceivedbyaddress\",            &listreceivedbyaddress,         {\"minconf\",\"include_empty\",\"include_watchonly\",\"address_filter\",\"include_immature\"} },\n+    { \"wallet\",             \"listreceivedbylabel\",              &listreceivedbylabel,           {\"minconf\",\"include_empty\",\"include_watchonly\",\"include_immature\"} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r566326563",
      "id" : 566326563,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjMyNjU2Mw==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 4614,
      "original_position" : 162,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 578636778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566326563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-28T19:01:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-769303883",
      "id" : 769303883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2OTMwMzg4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-28T19:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/769303883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r575522234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575522234"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review! I've updated with your suggestions along with the latest rebase.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-02-12T21:12:51Z",
      "diff_hunk" : "@@ -1059,27 +1077,38 @@ static UniValue ListReceived(const CWallet* const pwallet, const UniValue& param\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{params[next_index].isNull() ? false : params[next_index].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{pwallet->chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     std::map<CTxDestination, tallyitem> mapTally;\n     for (const std::pair<const uint256, CWalletTx>& pairWtx : pwallet->mapWallet) {\n         const CWalletTx& wtx = pairWtx.second;\n \n-        if (wtx.IsCoinBase() || !pwallet->chain().checkFinalTx(*wtx.tx)) {\n-            continue;\n-        }\n-\n         int nDepth = wtx.GetDepthInMainChain();\n         if (nDepth < nMinDepth)\n             continue;\n \n+        // Coinbase with less than 1 confirmation is an orphan\n+        if ((wtx.IsCoinBase() && (nDepth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())\n+            || !pwallet->chain().checkFinalTx(*wtx.tx))\n+            continue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r575522234",
      "id" : 575522234,
      "in_reply_to_id" : 550415068,
      "line" : 1106,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTUyMjIzNA==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 1106,
      "original_position" : 103,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 112,
      "pull_request_review_id" : 589840068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575522234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r575522327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575522327"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, thanks!",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-02-12T21:13:05Z",
      "diff_hunk" : "@@ -4578,8 +4610,8 @@ static const CRPCCommand commands[] =\n     { \"wallet\",             \"listaddressgroupings\",             &listaddressgroupings,          {} },\n     { \"wallet\",             \"listlabels\",                       &listlabels,                    {\"purpose\"} },\n     { \"wallet\",             \"listlockunspent\",                  &listlockunspent,               {} },\n-    { \"wallet\",             \"listreceivedbyaddress\",            &listreceivedbyaddress,         {\"minconf\",\"include_empty\",\"include_watchonly\",\"address_filter\"} },\n-    { \"wallet\",             \"listreceivedbylabel\",              &listreceivedbylabel,           {\"minconf\",\"include_empty\",\"include_watchonly\"} },\n+    { \"wallet\",             \"listreceivedbyaddress\",            &listreceivedbyaddress,         {\"minconf\",\"include_empty\",\"include_watchonly\",\"address_filter\",\"include_immature\"} },\n+    { \"wallet\",             \"listreceivedbylabel\",              &listreceivedbylabel,           {\"minconf\",\"include_empty\",\"include_watchonly\",\"include_immature\"} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r575522327",
      "id" : 575522327,
      "in_reply_to_id" : 566326563,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTUyMjMyNw==",
      "original_commit_id" : "f84ff8f98494eff2bcfac970c7eef1d1de5f4c51",
      "original_line" : 4614,
      "original_position" : 162,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 589840189,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575522327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-10T07:36:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-795026060",
      "id" : 795026060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NTAyNjA2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-10T07:36:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/795026060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r608200352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608200352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "getting a compile error after the latest rebase: \r\n```\r\nwallet/rpcwallet.cpp:1089:26: error: use of undeclared identifier 'pwallet'\r\n    bool filter_coinbase{pwallet->chain().rpcEnableDeprecated(\"filter_coinbase\")};\r\n```\r\n\r\n```suggestion\r\n    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-06T21:43:08Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{!params[next_index].isNull() && params[next_index].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{pwallet->chain().rpcEnableDeprecated(\"filter_coinbase\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r608200352",
      "id" : 608200352,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODIwMDM1Mg==",
      "original_commit_id" : "c7c662bf72e554dc4c88238637c75efdc7fee871",
      "original_line" : 1089,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 629433964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608200352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r608260966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608260966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oof forgot to include that with the rebase. Thanks for checking!",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-07T00:26:05Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{!params[next_index].isNull() && params[next_index].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{pwallet->chain().rpcEnableDeprecated(\"filter_coinbase\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r608260966",
      "id" : 608260966,
      "in_reply_to_id" : 608200352,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODI2MDk2Ng==",
      "original_commit_id" : "c7c662bf72e554dc4c88238637c75efdc7fee871",
      "original_line" : 1089,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 629504635,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608260966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r611000226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611000226"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In these two comments, should \"getreceivedby\" be \"listreceivedby\"?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-10T05:35:59Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r611000226",
      "id" : 611000226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTAwMDIyNg==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 1083,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 632891855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611000226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r611001373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611001373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n                    {\"address_filter\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"If present and nonempty, only return information on this address.\"},\r\n```\r\nThis matches the code and explains how to specify `include_immature` without having to specify an address filter.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-10T05:49:01Z",
      "diff_hunk" : "@@ -1189,6 +1219,7 @@ static RPCHelpMan listreceivedbyaddress()\n                     {\"include_empty\", RPCArg::Type::BOOL, /* default */ \"false\", \"Whether to include addresses that haven't received any payments.\"},\n                     {\"include_watchonly\", RPCArg::Type::BOOL, /* default */ \"true for watch-only wallets, otherwise false\", \"Whether to include watch-only addresses (see 'importaddress')\"},\n                     {\"address_filter\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"If present, only return information on this address.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r611001373",
      "id" : 611001373,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTAwMTM3Mw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 1223,
      "original_position" : 112,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 632891855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611001373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613127345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613127345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "All these new variables (both here and in `ListReceived()`) can be `const`.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:26:27Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613127345",
      "id" : 613127345,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEyNzM0NQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 674,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613127345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613130541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613130541"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Consistency helps readability. I think you can make this more consistent and readable as:\r\n\r\n```suggestion\r\n            || (wtx.IsCoinBase() && (depth < 1 || !include_coinbase))\r\n            || (wtx.IsImmatureCoinBase() && !include_immature_coinbase)\r\n```\r\n\r\n(where `include_coinbase = !(wallet.chain().rpcEnableDeprecated(\"filter_coinbase\"))`)",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:31:30Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613130541",
      "id" : 613130541,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzMDU0MQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 688,
      "original_position" : 19,
      "original_start_line" : 687,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613130541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613130917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613130917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's odd that \"As a JSON-RPC call\" no longer refers to the example immediately above. I think only one JSON-RPC example is needed.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:32:14Z",
      "diff_hunk" : "@@ -709,8 +721,11 @@ static RPCHelpMan getreceivedbyaddress()\n             + HelpExampleCli(\"getreceivedbyaddress\", \"\\\"\" + EXAMPLE_ADDRESS[0] + \"\\\" 0\") +\n             \"\\nThe amount with at least 6 confirmations\\n\"\n             + HelpExampleCli(\"getreceivedbyaddress\", \"\\\"\" + EXAMPLE_ADDRESS[0] + \"\\\" 6\") +\n+            \"\\nThe amount with at least 6 confirmations including immature coinbase outputs\\n\"\n+            + HelpExampleCli(\"getreceivedbyaddress\", \"\\\"\" + EXAMPLE_ADDRESS[0] + \"\\\" 6 true\") +\n             \"\\nAs a JSON-RPC call\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613130917",
      "id" : 613130917,
      "line" : 730,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzMDkxNw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 730,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 42,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613130917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613133600"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613133600"
         }
      },
      "author_association" : "MEMBER",
      "body" : "C++ is a strongly typed language - we should use types in the function signatures to catch logic errors at compilation rather than pass through opaque structures.\r\n\r\nCan you update the function signature of `ListReceived()` to explicitly take the argument types?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:36:33Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{!params[next_index].isNull() && params[next_index].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613133600",
      "id" : 613133600,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzMzYwMA==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 1085,
      "original_position" : 80,
      "original_start_line" : 1084,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613133600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613134485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613134485"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Again, I think you should be consistent and either have `include_coinbase` and `include_immature_coinbase` or `exclude_coinbase` and `exclude_immature_coinbase` as variables.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:37:56Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3\n+    int next_index{by_label ? 3 : 4};\n+    bool include_immature{!params[next_index].isNull() && params[next_index].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613134485",
      "id" : 613134485,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzNDQ4NQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 1089,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613134485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613135391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613135391"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"orphan\" is a very overloaded word, and I don't think it's correct here. I think you're trying to say that the coinbase transaction has been conflicted out of the main chain?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:39:30Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613135391",
      "id" : 613135391,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzNTM5MQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 686,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613135391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613137332"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613137332"
         }
      },
      "author_association" : "MEMBER",
      "body" : "perhaps s/filter_coinbase/exclude_coinbase/ is more explicit.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:42:39Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613137332",
      "id" : 613137332,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzNzMzMg==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 677,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613137332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613138985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613138985"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see much benefit in splitting this out into a separate function, unless you also restructure the `run_test()` function to be:\r\n\r\n```python\r\n    def run_test(self):\r\n        self.run_listbyreceived_test()\r\n        self.run_include_coinbase_test()\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:45:27Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613138985",
      "id" : 613138985,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzODk4NQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 172,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613138985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613139846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613139846"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"Orphan\" is wrong here. Perhaps \"Invalidate\".\r\n\r\n(also update references to 'orphan' below)",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:46:53Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()\n+\n+    def run_include_coinbase_test(self):\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Orphan block that paid to address\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613139846",
      "id" : 613139846,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzEzOTg0Ng==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 240,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613139846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613140723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613140723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe use a new variable name `address2` here?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:48:24Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()\n+\n+    def run_include_coinbase_test(self):\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Orphan block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", minconf=0, include_immature=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=0, include_immature=True),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include orphan when minconf is 0 when including immature\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=0, include_immature=True),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+\n+        self.log.info(\"Generate 101 blocks to node with deprecated filter_coinbase\")\n+        address = self.nodes[1].getnewaddress(label)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613140723",
      "id" : 613140723,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MDcyMw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 263,
      "original_position" : 111,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613140723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613141273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613141273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nPreviously, the following wallet RPCs excluded coinbase transactions:\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:49:12Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs incorrectly filtered out coinbase transactions:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613141273",
      "id" : 613141273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MTI3Mw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613141273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613141380"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613141380"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nThis release changes this behaviour and returns results accounting for received coins from coinbase outputs.\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:49:24Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs incorrectly filtered out coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release corrects this behaviour and returns results accounting for received coins from coinbase outputs.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613141380",
      "id" : 613141380,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MTM4MA==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613141380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613142059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613142059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this should also document the `deprecatedrpc=filter_coinbase` (or `deprecatedrpc=exclude_coinbase` if you rename it) config option, including that the intention is to remove it after some time.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:50:37Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs incorrectly filtered out coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release corrects this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613142059",
      "id" : 613142059,
      "line" : 17,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MjA1OQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613142059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613142629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613142629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should this and the other updated RPCs throw if a user supplies `include_immature=true` and `deprecatedrpc=filter_coinbase` is set. That would be inconsistent.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:51:31Z",
      "diff_hunk" : "@@ -698,6 +709,7 @@ static RPCHelpMan getreceivedbyaddress()\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address for transactions.\"},\n                     {\"minconf\", RPCArg::Type::NUM, /* default */ \"1\", \"Only include transactions confirmed at least this many times.\"},\n+                    {\"include_immature\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include immature coinbase transactions.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613142629",
      "id" : 613142629,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MjYyOQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 712,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613142629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613143023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613143023"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See the above comment about `include_immature` and `\"-deprecatedrpc=filter_coinbase\"`. Perhaps add a test for that combination?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:52:15Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()\n+\n+    def run_include_coinbase_test(self):\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Orphan block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", minconf=0, include_immature=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=0, include_immature=True),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include orphan when minconf is 0 when including immature\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=0, include_immature=True),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+\n+        self.log.info(\"Generate 101 blocks to node with deprecated filter_coinbase\")\n+        address = self.nodes[1].getnewaddress(label)\n+        self.nodes[1].generatetoaddress(101, address)\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing when filtering coinbase\")\n+        balance = self.nodes[1].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing when filtering coinbase\")\n+        balance = self.nodes[1].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address when filtering coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include label when filtering coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613143023",
      "id" : 613143023,
      "line" : 282,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MzAyMw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 282,
      "original_position" : 131,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : 132,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613143023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613143275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613143275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No need to update this. They get updated automatically every year.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T10:52:39Z",
      "diff_hunk" : "@@ -1,5 +1,5 @@\n #!/usr/bin/env python3\n-# Copyright (c) 2014-2019 The Bitcoin Core developers\n+# Copyright (c) 2014-2021 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613143275",
      "id" : 613143275,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE0MzI3NQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 2,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635459387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613143275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613261451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613261451"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "May want to update this comment to reflect the test expansion",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T13:46:16Z",
      "diff_hunk" : "@@ -1,5 +1,5 @@\n #!/usr/bin/env python3\n-# Copyright (c) 2014-2019 The Bitcoin Core developers\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n # Distributed under the MIT software license, see the accompanying\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test the listreceivedbyaddress RPC.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613261451",
      "id" : 613261451,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzI2MTQ1MQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 5,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635638779,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613261451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613293127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613293127"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I expect this refers to outputs that we can't spend yet because a timelock hasn't been met. If a user wants to include immature coinbases, might they want to include nonfinal ones too? I understand that `include_immature` is supposed to be only for immature coinbases but I think a user might find it more helpful to be able to configure spendability in general rather than just for coinbases",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T14:22:29Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())\n+            || !wallet.chain().checkFinalTx(*wtx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613293127",
      "id" : 613293127,
      "line" : 693,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzI5MzEyNw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 693,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 24,
      "pull_request_review_id" : 635638779,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613293127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613298269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613298269"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Question: What happens if a user puts `-spendzeroconfchange=0` (it's True by default, right?) and then calls `getreceivedbyaddress(minconf=0)`?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T14:28:08Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()\n+\n+    def run_include_coinbase_test(self):\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Orphan block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613298269",
      "id" : 613298269,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzI5ODI2OQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 244,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 635638779,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613298269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613361681"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613361681"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree that \"filter\" isn't the best term, because it's _slightly_ ambiguous. Maybe it's just me, but while it _probably_ means \"exclude\", it could possibly mean \"include\".",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T15:40:14Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs incorrectly filtered out coinbase transactions:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613361681",
      "id" : 613361681,
      "in_reply_to_id" : 613141273,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzM2MTY4MQ==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : null,
      "pull_request_review_id" : 635774664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613361681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613366384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613366384"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Another idea, this logic is close to that added to `ListReceived()` further down in this file; have you considered refactoring this logic into a separate small function? This may make the logic unit-testable, but may not be worth it.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-14T15:45:51Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r613366384",
      "id" : 613366384,
      "in_reply_to_id" : 613130541,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzM2NjM4NA==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 688,
      "original_position" : 19,
      "original_start_line" : 687,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 635774664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613366384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-04-19T09:51:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-822336948",
      "id" : 822336948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjMzNjk0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-19T09:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822336948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616105633"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616105633"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These lines were removed in the latest push.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:04:41Z",
      "diff_hunk" : "@@ -1053,27 +1071,39 @@ static UniValue ListReceived(const CWallet& wallet, const UniValue& params, bool\n \n     bool has_filtered_address = false;\n     CTxDestination filtered_address = CNoDestination();\n-    if (!by_label && params.size() > 3) {\n+    if (!by_label && !params[3].isNull() && !params[3].get_str().empty()) {\n         if (!IsValidDestinationString(params[3].get_str())) {\n             throw JSONRPCError(RPC_WALLET_ERROR, \"address_filter parameter was invalid\");\n         }\n         filtered_address = DecodeDestination(params[3].get_str());\n         has_filtered_address = true;\n     }\n \n+    // getreceivedbyaddress has address filter at 3rd index, so next params index is 4\n+    // getreceivedbylabel has no filter parameter, so next params index is 3",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616105633",
      "id" : 616105633,
      "in_reply_to_id" : 611000226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjEwNTYzMw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 1083,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 639215666,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616105633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616108283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616108283"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I thought this was an interesting idea. However, while implementing and trying to write a test, I was unable to broadcast a non-final tx (rejected with `non-final`). Do you know any way that a wallet would be able to have a non-final tx? If not, then it's possible this check is unnecessary and can be removed.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:07:30Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())\n+            || !wallet.chain().checkFinalTx(*wtx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616108283",
      "id" : 616108283,
      "in_reply_to_id" : 613293127,
      "line" : 693,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjEwODI4Mw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 693,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 24,
      "pull_request_review_id" : 639217763,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616108283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616112613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616112613"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm I'm not sure there is any effect in this case. The `getreceivedby*` RPCs only return a balance, and setting `minconf=0` would return the unconfirmed balance using the tally code in `GetReceived`. I don't believe it would be affected by `spendzeroconfchange`, which from what I can see is only used in `CWallet::SelectCoins`.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:14:44Z",
      "diff_hunk" : "@@ -167,5 +169,117 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.run_include_coinbase_test()\n+\n+    def run_include_coinbase_test(self):\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Orphan block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include orphan when minconf is 0 when including immature\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616112613",
      "id" : 616112613,
      "in_reply_to_id" : 613298269,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjExMjYxMw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 244,
      "original_position" : 92,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : null,
      "pull_request_review_id" : 639223439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616112613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jnewbery @glozow @LarryRuane thank you all for your review! I've updated with all of your suggestions.",
      "created_at" : "2021-04-19T19:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-822719528",
      "id" : 822719528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjcxOTUyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-19T19:15:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822719528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616115708"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616115708"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@jnewbery Great suggestion, I agree this makes it much more readable.\r\n\r\n@LarryRuane Since there are only two instances of this duplication, should we defer to the [rule of three](https://en.wikipedia.org/wiki/Rule_of_three_(computer_programming))?",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:19:48Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616115708",
      "id" : 616115708,
      "in_reply_to_id" : 613130541,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjExNTcwOA==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 688,
      "original_position" : 19,
      "original_start_line" : 687,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 639227214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616115708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616127173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616127173"
         }
      },
      "author_association" : "MEMBER",
      "body" : "AssertionError: RPC client conversion table and RPC server named arguments mismatch!\r\n                                   {('getreceivedbyaddress', 2, 'include_not_yet_spendable'), ('listreceivedbylabel', 3, 'include_immature_coinbase'), ('listreceivedbylabel', 3, 'include_not_yet_spendable'), ('listreceivedbyaddress', 4, 'include_not_yet_spendable'), ('listreceivedbyaddress', 4, 'include_immature_coinbase'), ('getreceivedbylabel', 2, 'include_immature_coinbase'), ('getreceivedbyaddress', 2, 'include_immature_coinbase'), ('getreceivedbylabel', 2, 'include_not_yet_spendable')}",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:39:02Z",
      "diff_hunk" : "@@ -46,13 +46,17 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"settxfee\", 0, \"amount\" },\n     { \"sethdseed\", 0, \"newkeypool\" },\n     { \"getreceivedbyaddress\", 1, \"minconf\" },\n+    { \"getreceivedbyaddress\", 2, \"include_not_yet_spendable\" },\n     { \"getreceivedbylabel\", 1, \"minconf\" },\n+    { \"getreceivedbylabel\", 2, \"include_not_yet_spendable\" },\n     { \"listreceivedbyaddress\", 0, \"minconf\" },\n     { \"listreceivedbyaddress\", 1, \"include_empty\" },\n     { \"listreceivedbyaddress\", 2, \"include_watchonly\" },\n+    { \"listreceivedbyaddress\", 4, \"include_not_yet_spendable\" },\n     { \"listreceivedbylabel\", 0, \"minconf\" },\n     { \"listreceivedbylabel\", 1, \"include_empty\" },\n     { \"listreceivedbylabel\", 2, \"include_watchonly\" },\n+    { \"listreceivedbylabel\", 3, \"include_not_yet_spendable\" },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616127173",
      "id" : 616127173,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjEyNzE3Mw==",
      "original_commit_id" : "80ad7d7e059447fb8db6c586ecda699bf839b139",
      "original_line" : 59,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : null,
      "pull_request_review_id" : 639241771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616127173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616130521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616130521"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed. Thanks!",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:44:59Z",
      "diff_hunk" : "@@ -46,13 +46,17 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"settxfee\", 0, \"amount\" },\n     { \"sethdseed\", 0, \"newkeypool\" },\n     { \"getreceivedbyaddress\", 1, \"minconf\" },\n+    { \"getreceivedbyaddress\", 2, \"include_not_yet_spendable\" },\n     { \"getreceivedbylabel\", 1, \"minconf\" },\n+    { \"getreceivedbylabel\", 2, \"include_not_yet_spendable\" },\n     { \"listreceivedbyaddress\", 0, \"minconf\" },\n     { \"listreceivedbyaddress\", 1, \"include_empty\" },\n     { \"listreceivedbyaddress\", 2, \"include_watchonly\" },\n+    { \"listreceivedbyaddress\", 4, \"include_not_yet_spendable\" },\n     { \"listreceivedbylabel\", 0, \"minconf\" },\n     { \"listreceivedbylabel\", 1, \"include_empty\" },\n     { \"listreceivedbylabel\", 2, \"include_watchonly\" },\n+    { \"listreceivedbylabel\", 3, \"include_not_yet_spendable\" },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616130521",
      "id" : 616130521,
      "in_reply_to_id" : 616127173,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjEzMDUyMQ==",
      "original_commit_id" : "80ad7d7e059447fb8db6c586ecda699bf839b139",
      "original_line" : 59,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : null,
      "pull_request_review_id" : 639246102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:44:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616130521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616136227"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616136227"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh hm, I guess the finality wouldn't really be reflected in the received transaction's header, but in the redeem script for it. I'm not too sure how the wallet keeps track of timelocked outputs ð¤ I don't think this check should be removed though",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-04-19T19:54:51Z",
      "diff_hunk" : "@@ -671,11 +671,22 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    bool include_immature{!params[2].isNull() && params[2].get_bool()};\n+\n+    // Filtering out coinbase outputs is deprecated\n+    // It can be enabled by setting deprecatedrpc=filter_coinbase\n+    bool filter_coinbase{wallet.chain().rpcEnableDeprecated(\"filter_coinbase\")};\n+\n     // Tally\n     CAmount amount = 0;\n     for (const std::pair<const uint256, CWalletTx>& wtx_pair : wallet.mapWallet) {\n         const CWalletTx& wtx = wtx_pair.second;\n-        if (wtx.IsCoinBase() || !wallet.chain().checkFinalTx(*wtx.tx) || wtx.GetDepthInMainChain() < min_depth) {\n+        int depth{wtx.GetDepthInMainChain()};\n+        if (depth < min_depth\n+            // Coinbase with less than 1 confirmation is an orphan\n+            || (wtx.IsCoinBase() && (depth < 1 || filter_coinbase))\n+            || (!include_immature && wtx.IsImmatureCoinBase())\n+            || !wallet.chain().checkFinalTx(*wtx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r616136227",
      "id" : 616136227,
      "in_reply_to_id" : 613293127,
      "line" : 693,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjEzNjIyNw==",
      "original_commit_id" : "77da82934cf82357f4e8a39f43690b491e557325",
      "original_line" : 693,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 24,
      "pull_request_review_id" : 639253602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T19:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616136227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r650777424"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650777424"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As far as I can see, `include_immature_coinbase` has no impact on whether non-final transactions are included.\r\n\r\n```suggestion\r\nA new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\r\n```",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-06-14T09:13:07Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions or non-final transactions.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r650777424",
      "id" : 650777424,
      "line" : 16,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MDc3NzQyNA==",
      "original_commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 16,
      "pull_request_review_id" : 682684213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-06-14T09:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650777424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r650777699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650777699"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: remove extra linebreak if you retouch this branch.",
      "commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "created_at" : "2021-06-14T09:13:27Z",
      "diff_hunk" : "@@ -167,5 +169,124 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.log.info(\"Tests for including coinbase outputs\")\n+\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature_coinbase=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature_coinbase=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature_coinbase=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature_coinbase=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Invalidate block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature_coinbase=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", minconf=0, include_immature_coinbase=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=0, include_immature_coinbase=True),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=0, include_immature_coinbase=True),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+\n+        self.log.info(\"Generate 101 blocks to node with deprecated exclude_coinbase\")\n+        address2 = self.nodes[1].getnewaddress(label)\n+        self.nodes[1].generatetoaddress(101, address2)\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing when excluding coinbase\")\n+        balance = self.nodes[1].getreceivedbyaddress(address2)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing when excluding coinbase\")\n+        balance = self.nodes[1].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address when excluding coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbyaddress(),\n+                            {\"address\": address2},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include label when excluding coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"getreceivedbyaddress throws when setting include_immature_coinbase with deprecated exclude_coinbase\")\n+        assert_raises_rpc_error(-8, 'include_immature_coinbase is incompatible with deprecated exclude_coinbase', self.nodes[1].getreceivedbyaddress, address2, 1, True)\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r650777699",
      "id" : 650777699,
      "line" : 286,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MDc3NzY5OQ==",
      "original_commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "original_line" : 286,
      "original_position" : 136,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : 136,
      "pull_request_review_id" : 682684213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-06-14T09:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650777699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jnewbery not sure what commit your ACK is referencing. Looks like github does not recognize it either.",
      "created_at" : "2021-06-16T20:26:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-862698262",
      "id" : 862698262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MjY5ODI2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-16T20:26:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/862698262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @jnewbery not sure what commit your ACK is referencing. Looks like github does not recognize it either.\r\n\r\nOops, sorry @andrewtoth - I rebased your branch on master before building/reviewing (building a branch that's based on a very old master commit results in a very slow build since lots of header files have changed). I then accidentally left my ACK for my new head commit hash instead of the one in this PR.\r\n\r\nACK 164e26d42e",
      "created_at" : "2021-06-17T10:12:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-863114248",
      "id" : 863114248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MzExNDI0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-17T10:12:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863114248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-03T09:29:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-912398455",
      "id" : 912398455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII5842Yhh3",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-03T09:29:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912398455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 1f084ec0ef\r\n\r\n@andrewtoth: github doesn't generate a notification for reviewers if you just force-push a rebase. If you want people to re-review after a rebase you should leave a comment. That'll notify everyone who has previously reviewed the PR.",
      "created_at" : "2021-11-04T12:39:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-960827324",
      "id" : 960827324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII5845RQ-8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/960827324/reactions"
      },
      "updated_at" : "2021-11-04T12:39:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/960827324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r742795630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742795630"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Feel free to remove this extra newline if you need to touch this branch again.",
      "commit_id" : "1f084ec0ef67534e43f3031c8d17e2ad6b9ce285",
      "created_at" : "2021-11-04T12:39:32Z",
      "diff_hunk" : "@@ -167,5 +169,124 @@ def run_test(self):\n         balance = self.nodes[1].getreceivedbylabel(\"mynewlabel\")\n         assert_equal(balance, Decimal(\"0.0\"))\n \n+        self.log.info(\"Tests for including coinbase outputs\")\n+\n+        # Generate block reward to address with label\n+        label = \"label\"\n+        address = self.nodes[0].getnewaddress(label)\n+\n+        reward = Decimal(\"25\")\n+        self.nodes[0].generatetoaddress(1, address)\n+        hash = self.nodes[0].getbestblockhash()\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbyaddress returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, include_immature_coinbase=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns block reward when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", include_immature_coinbase=True)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbyaddress includes address when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=1, include_immature_coinbase=True),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel does not include label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel includes label when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=1, include_immature_coinbase=True),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Generate 100 more blocks\")\n+        self.nodes[0].generate(100)\n+\n+        self.log.info(\"getreceivedbyaddress returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbyaddress(address)\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"getreceivedbylabel returns reward with defaults\")\n+        balance = self.nodes[0].getreceivedbylabel(\"label\")\n+        assert_equal(balance, reward)\n+\n+        self.log.info(\"listreceivedbyaddress includes address with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(),\n+                            {\"address\": address},\n+                            {\"address\": address, \"amount\": reward})\n+\n+        self.log.info(\"listreceivedbylabel includes label with defaults\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {\"label\": label, \"amount\": reward})\n+\n+        self.log.info(\"Invalidate block that paid to address\")\n+        self.nodes[0].invalidateblock(hash)\n+\n+        self.log.info(\"getreceivedbyaddress does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbyaddress(address=address, minconf=0, include_immature_coinbase=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        balance = self.nodes[0].getreceivedbylabel(label=\"label\", minconf=0, include_immature_coinbase=True)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbyaddress(minconf=0, include_immature_coinbase=True),\n+                            {\"address\": address},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include invalidated block when minconf is 0 when including immature coinbase\")\n+        assert_array_result(self.nodes[0].listreceivedbylabel(minconf=0, include_immature_coinbase=True),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+\n+        self.log.info(\"Generate 101 blocks to node with deprecated exclude_coinbase\")\n+        address2 = self.nodes[1].getnewaddress(label)\n+        self.nodes[1].generatetoaddress(101, address2)\n+\n+        self.log.info(\"getreceivedbyaddress returns nothing when excluding coinbase\")\n+        balance = self.nodes[1].getreceivedbyaddress(address2)\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"getreceivedbylabel returns nothing when excluding coinbase\")\n+        balance = self.nodes[1].getreceivedbylabel(\"label\")\n+        assert_equal(balance, 0)\n+\n+        self.log.info(\"listreceivedbyaddress does not include address when excluding coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbyaddress(),\n+                            {\"address\": address2},\n+                            {}, True)\n+\n+        self.log.info(\"listreceivedbylabel does not include label when excluding coinbase\")\n+        assert_array_result(self.nodes[1].listreceivedbylabel(),\n+                            {\"label\": label},\n+                            {}, True)\n+\n+        self.log.info(\"getreceivedbyaddress throws when setting include_immature_coinbase with deprecated exclude_coinbase\")\n+        assert_raises_rpc_error(-8, 'include_immature_coinbase is incompatible with deprecated exclude_coinbase', self.nodes[1].getreceivedbyaddress, address2, 1, True)\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r742795630",
      "id" : 742795630,
      "in_reply_to_id" : 650777699,
      "line" : 286,
      "node_id" : "PRRC_kwDOABII584sRilu",
      "original_commit_id" : "2b310631a76308c76d80fea4b5fb6321362685df",
      "original_line" : 286,
      "original_position" : 136,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listreceivedby.py",
      "position" : 136,
      "pull_request_review_id" : 797685452,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742795630/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-04T12:39:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742795630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r762641675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762641675"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I had to think about this logic before concluding that the default is `false` (the `!` and `isNull` forming a sort of double-negative didn't help), so consider prefacing this with a comment stating that the default is `false`.",
      "commit_id" : "1f084ec0ef67534e43f3031c8d17e2ad6b9ce285",
      "created_at" : "2021-12-06T00:37:34Z",
      "diff_hunk" : "@@ -685,11 +685,26 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    const bool include_immature_coinbase{!params[2].isNull() && params[2].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r762641675",
      "id" : 762641675,
      "line" : 688,
      "node_id" : "PRRC_kwDOABII584tdP0L",
      "original_commit_id" : "513759861c999e7af3da514d5003335019d98973",
      "original_line" : 688,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 823458087,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762641675/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T04:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762641675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r762804153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762804153"
         }
      },
      "author_association" : "MEMBER",
      "body" : "an alternative would be to write `{null? default : get_bool()}`",
      "commit_id" : "1f084ec0ef67534e43f3031c8d17e2ad6b9ce285",
      "created_at" : "2021-12-06T08:51:32Z",
      "diff_hunk" : "@@ -685,11 +685,26 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    const bool include_immature_coinbase{!params[2].isNull() && params[2].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r762804153",
      "id" : 762804153,
      "in_reply_to_id" : 762641675,
      "line" : 688,
      "node_id" : "PRRC_kwDOABII584td3e5",
      "original_commit_id" : "513759861c999e7af3da514d5003335019d98973",
      "original_line" : 688,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 823675023,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762804153/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T08:51:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762804153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, needs rebase again. \r\n\r\n```\r\n                                   TypeError: generatetoaddress() missing 1 required keyword-only argument: 'invalid_call'",
      "created_at" : "2021-12-06T09:20:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-986587417",
      "id" : 986587417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII5846ziEZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/986587417/reactions"
      },
      "updated_at" : "2021-12-06T09:20:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/986587417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r763211949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763211949"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi @LarryRuane - this logic was yours https://github.com/bitcoin/bitcoin/pull/14707#discussion_r550329066 :). I will revert to what @MarcoFalke suggested.",
      "commit_id" : "7c583e79e7178ed9aa4a8a9b179c4bea9b3f6c37",
      "created_at" : "2021-12-06T17:19:21Z",
      "diff_hunk" : "@@ -685,11 +685,26 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     if (!params[1].isNull())\n         min_depth = params[1].get_int();\n \n+    const bool include_immature_coinbase{!params[2].isNull() && params[2].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r763211949",
      "id" : 763211949,
      "in_reply_to_id" : 762641675,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tfbCt",
      "original_commit_id" : "513759861c999e7af3da514d5003335019d98973",
      "original_line" : 688,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 824239095,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763211949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T17:19:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763211949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased.",
      "created_at" : "2021-12-06T17:33:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-986997303",
      "id" : 986997303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII58461GI3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/986997303/reactions"
      },
      "updated_at" : "2021-12-06T17:33:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/986997303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like there are test failures with descriptor wallets?",
      "created_at" : "2021-12-07T08:00:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-987664255",
      "id" : 987664255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII58463o9_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987664255/reactions"
      },
      "updated_at" : "2021-12-07T08:00:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987664255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke fixed.",
      "created_at" : "2021-12-07T15:49:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-988051666",
      "id" : 988051666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII58465HjS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988051666/reactions"
      },
      "updated_at" : "2021-12-07T15:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988051666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T17:04:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#issuecomment-988111765",
      "id" : 988111765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14707",
      "node_id" : "IC_kwDOABII58465WOV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988111765/reactions"
      },
      "updated_at" : "2021-12-07T17:04:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988111765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764301651"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764301651"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this still up-to-date? The default seems to be `true`. Also, instead of using the release notes to explain what immature txs are, what about moving this to the rpc help? Either this is relevant for future releases as well, or not at all.",
      "commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T19:30:54Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764301651",
      "id" : 764301651,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII584tjlFT",
      "original_commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 825696558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764301651/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T19:31:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764301651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764308785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764308785"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The option is defined [here](https://github.com/bitcoin/bitcoin/pull/14707/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02dR531) and [here](https://github.com/bitcoin/bitcoin/pull/14707/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02dR1120), made clear to be `false` when no option is specified by your suggestion [here](https://github.com/bitcoin/bitcoin/pull/14707#discussion_r762804153).\r\n\r\nI can move the immature txs explanation to the rpc help if I have to rebase again. Do you think it's a blocker? The release notes will have to be manually updated anyways, right?",
      "commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T19:41:32Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764308785",
      "id" : 764308785,
      "in_reply_to_id" : 764301651,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII584tjm0x",
      "original_commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 825705630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764308785/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T19:41:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764308785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764312101"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764312101"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No, not a blocker.\r\n\r\nSorry for the brain fart. I keep messing up `true` and `false` for boolean values lately.",
      "commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T19:46:45Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764312101",
      "id" : 764312101,
      "in_reply_to_id" : 764301651,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII584tjnol",
      "original_commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 825710063,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764312101/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T19:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764312101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764313750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764313750"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe for clarity (in the future) the second section can be switched with the third section, so that the behavior changing stuff is bundled together and the new rpc arg option is in a separate bundle?",
      "commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T19:49:10Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764313750",
      "id" : 764313750,
      "in_reply_to_id" : 764301651,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII584tjoCW",
      "original_commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 825712048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764313750/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T19:49:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764313750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764316306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764316306"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If someone decides to address the nits, the notes snippet can also be moved to the main release notes file in the same pull request, to avoid having to touch it again.",
      "commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "created_at" : "2021-12-07T19:53:06Z",
      "diff_hunk" : "@@ -0,0 +1,19 @@\n+Wallet `receivedby` RPCs now include coinbase transactions\n+-------------\n+\n+Previously, the following wallet RPCs excluded coinbase transactions:\n+\n+`getreceivedbyaddress`\n+\n+`getreceivedbylabel`\n+\n+`listreceivedbyaddress`\n+\n+`listreceivedbylabel`\n+\n+This release changes this behaviour and returns results accounting for received coins from coinbase outputs.\n+\n+A new option, `include_immature_coinbase` (default=`false`), determines whether to account for immature coinbase transactions.\n+Immature coinbase transactions are coinbase transactions that have 100 or fewer confirmations, and are not spendable.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14707#discussion_r764316306",
      "id" : 764316306,
      "in_reply_to_id" : 764301651,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII584tjoqS",
      "original_commit_id" : "1dcba996d30d83aebe8c73f42f5d4056d6472166",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "doc/release-notes-14707.md",
      "position" : 17,
      "pull_request_review_id" : 825715401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14707",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764316306/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T19:53:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/764316306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
