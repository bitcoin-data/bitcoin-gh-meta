[
   {
      "author_association" : "NONE",
      "body" : "Pushed a fix to the comment to reflect the new behavior and rebased.",
      "created_at" : "2018-11-15T16:59:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-439112549",
      "id" : 439112549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzOTExMjU0OQ==",
      "updated_at" : "2018-11-15T16:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/439112549",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r233929191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233929191"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The default must be set to a value, not the name of the arg it should default to.",
      "commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "created_at" : "2018-11-15T17:03:34Z",
      "diff_hunk" : "@@ -522,9 +522,9 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, setup the proxy for onion addresses\n+        // if -onion and -proxy isn't set to something else.\n+        if (gArgs.GetArg(\"-onion\", \"-proxy\") == \"\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r233929191",
      "id" : 233929191,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzkyOTE5MQ==",
      "original_commit_id" : "3474736b8c5a67f0ddf008fcdaf73257d3368ec4",
      "original_position" : 9,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 175457712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729",
      "updated_at" : "2018-11-15T20:25:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233929191",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thank you for reviewing.\r\n\r\nI think I may have done this the correct way now. If not, I will stop wasting your time and close this so someone more suited can take it up.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/38640a021a67e376c32414d457f5f850ebbee083/src/torcontrol.cpp#L525-L527",
      "created_at" : "2018-11-15T20:30:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-439179589",
      "id" : 439179589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzOTE3OTU4OQ==",
      "updated_at" : "2018-11-15T20:30:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/439179589",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r233998552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233998552"
         }
      },
      "author_association" : "NONE",
      "body" : "I think I might have fixed it now.",
      "commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "created_at" : "2018-11-15T20:35:22Z",
      "diff_hunk" : "@@ -522,9 +522,9 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, setup the proxy for onion addresses\n+        // if -onion and -proxy isn't set to something else.\n+        if (gArgs.GetArg(\"-onion\", \"-proxy\") == \"\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r233998552",
      "id" : 233998552,
      "in_reply_to_id" : 233929191,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzk5ODU1Mg==",
      "original_commit_id" : "3474736b8c5a67f0ddf008fcdaf73257d3368ec4",
      "original_position" : 9,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 175544118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729",
      "updated_at" : "2018-11-15T20:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233998552",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r234356409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/234356409"
         }
      },
      "author_association" : "NONE",
      "body" : "@MarcoFalke I noticed in another spots this was handled differently. Would it be more preferable like this:\r\n\r\n```\r\n        // Now that we know Tor is running setup the proxy for onion addresses\r\n        // if -onion isn't set to something else.\r\n        std::string onion = gArgs.GetArg(\"-onion\", \"\");\r\n        std::string proxy = gArgs.GetArg(\"-proxy\", \"\");\r\n        if (onion.empty() && proxy.empty()) {\r\n```",
      "commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "created_at" : "2018-11-16T21:42:13Z",
      "diff_hunk" : "@@ -522,9 +522,9 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, setup the proxy for onion addresses\n+        // if -onion and -proxy isn't set to something else.\n+        if (gArgs.GetArg(\"-onion\", \"-proxy\") == \"\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r234356409",
      "id" : 234356409,
      "in_reply_to_id" : 233929191,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNDM1NjQwOQ==",
      "original_commit_id" : "3474736b8c5a67f0ddf008fcdaf73257d3368ec4",
      "original_position" : 9,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 175991911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729",
      "updated_at" : "2018-11-16T21:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/234356409",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r235863144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235863144"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess this will work in most cases.\r\n\r\nThough *ideally* we'd query Net's state directly here for \"is there a proxy for onion already\" instead of indirectly divising it from the arguments. This would really solve the problem of the current code here.",
      "commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "created_at" : "2018-11-23T07:56:18Z",
      "diff_hunk" : "@@ -522,9 +522,9 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, setup the proxy for onion addresses\n+        // if -onion and -proxy isn't set to something else.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && gArgs.GetArg(\"-proxy\", \"\") == \"\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r235863144",
      "id" : 235863144,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTg2MzE0NA==",
      "original_commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "original_position" : 9,
      "path" : "src/torcontrol.cpp",
      "position" : 9,
      "pull_request_review_id" : 177828369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729",
      "updated_at" : "2018-11-23T07:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235863144",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19485 (torcontrol: Create also a V3 ed25519-V3 onion address. by Saibato)\n* #19358 (net: Make sure we do not override proxy settings in hidden service. by Saibato)\n* #15423 (torcontrol: Query Tor for correct -onion configuration by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-02-15T23:31:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-464246304",
      "id" : 464246304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NDI0NjMwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-21T03:10:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/464246304",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think when using the Tor controller, we probably want to use the Tor's own listening config (see #15423) over a `-proxy` setting...",
      "created_at" : "2019-02-16T17:24:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-464364786",
      "id" : 464364786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NDM2NDc4Ng==",
      "updated_at" : "2019-02-16T17:24:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/464364786",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr Could be better to listen to the control port, just don't forget about situations where [`onion-grater`](https://github.com/whonix/onion-grater) is used and the response from the Tor controller intentionally lies to the application. Onion-grater use is considered a Tor [best practice](https://trac.torproject.org/projects/tor/wiki/doc/Tor_friendly_applications_best_practices) and is being used in Whonix and TAILS.\r\n\r\nIn Whonix there is a dedicated port for Bitcoin traffic, `<gateway-ip>:9111`, but if you rely on the control port you get a response like this:\r\n\r\n```\r\nuser@host:~$ nc -nv 127.0.0.1 9051\r\n(UNKNOWN) [127.0.0.1] 9051 (?) open\r\nAUTHENTICATE\r\n250 OK\r\nGETINFO net/listeners/socks\r\n250-net/listeners/socks=\"127.0.0.1:9150\"\r\n250 OK\r\n```\r\n\r\nProbably best to rely on the controller and systems using `onion-grater` can use a profile. Maybe an example one can be included in this repo for such systems.\r\n\r\nThis PR was only meant to correct the defined behavior of defaulting to `-proxy`:\r\n\r\n```\r\n-onion=ip:port\r\nUse separate SOCKS5 proxy to reach peers via Tor hidden services, set -noonion to disable (default: -proxy)\r\n```\r\n\r\n---\r\n\r\n@laanwj \r\n\r\n>Though ideally we'd query Net's state directly here for \"is there a proxy for onion already\" instead of indirectly divising it from the arguments. This would really solve the problem of the current code here.\r\n\r\nSorry, I'm not sure how to do that. I only wanted to help, but I'm afraid the existence of this PR may be keeping others from doing it the ideal way which you suggested. Just let me know if closing this is more help.",
      "created_at" : "2019-02-18T23:41:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-464922809",
      "id" : 464922809,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NDkyMjgwOQ==",
      "updated_at" : "2019-02-18T23:41:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/464922809",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 273 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2019-08-16T13:48:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-522015170",
      "id" : 522015170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjAxNTE3MA==",
      "updated_at" : "2019-08-16T13:48:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522015170",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@qubenix bumping here to see if you are planning on continuing to push this forward.",
      "created_at" : "2020-05-18T19:48:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-630399658",
      "id" : 630399658,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDM5OTY1OA==",
      "updated_at" : "2020-05-18T19:48:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630399658",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@adamjonas I don't what I can/should be doing to push this forward. This PR fixes the bug, but if it's not done in an acceptable way then there's nothing more I can do. I'm not a coder by trade, I just found a bug and offered a solution that I was able to figure out.\r\nThat being said, I'm happy to do whatever is expected of me here as long as it's within my ability. I'm just not sure what that is.",
      "created_at" : "2020-05-18T20:22:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-630415149",
      "id" : 630415149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDQxNTE0OQ==",
      "updated_at" : "2020-05-18T20:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630415149",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15707061?v=4",
         "events_url" : "https://api.github.com/users/qubenix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubenix/followers",
         "following_url" : "https://api.github.com/users/qubenix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubenix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubenix",
         "id" : 15707061,
         "login" : "qubenix",
         "node_id" : "MDQ6VXNlcjE1NzA3MDYx",
         "organizations_url" : "https://api.github.com/users/qubenix/orgs",
         "received_events_url" : "https://api.github.com/users/qubenix/received_events",
         "repos_url" : "https://api.github.com/users/qubenix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubenix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubenix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubenix"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @adamjonas I don't what I can/should be doing to push this forward. This PR fixes the bug, but if it's not done in an acceptable way then there's nothing more I can do. I'm not a coder by trade, I just found a bug and offered a solution that I was able to figure out.\r\n> That being said, I'm happy to do whatever is expected of me here as long as it's within my ability. I'm just not sure what that is.\r\n\r\nHi @qubenix might take a look at #19358?  I run in the same problem and found that other settings are also ignored by this footgun proxy fallback, so i took the freedom and pushed this alternative fix.",
      "created_at" : "2020-06-23T15:53:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-648253367",
      "id" : 648253367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0ODI1MzM2Nw==",
      "updated_at" : "2020-06-23T15:53:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/648253367",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r446211849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/446211849"
         }
      },
      "author_association" : "NONE",
      "body" : "> I guess this will work in most cases.\r\n> \r\n> Though _ideally_ we'd query Net's state directly here for \"is there a proxy for onion already\" instead of indirectly divising it from the arguments. This would really solve the problem of the current code here.\r\n\r\nHi, @qubenix  \r\n\r\n``` Diff\r\n\r\ndiff --git a/src/torcontrol.cpp b/src/torcontrol.cpp\r\nindex bec64fbf2..b632513c3 100644\r\n--- a/src/torcontrol.cpp\r\n+++ b/src/torcontrol.cpp\r\n@@ -524,7 +524,8 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\r\n \r\n         // Now that we know Tor is running, setup the proxy for onion addresses\r\n         // if -onion and -proxy isn't set to something else.\r\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && gArgs.GetArg(\"-proxy\", \"\") == \"\") {\r\n+        proxyType addrOnion;\r\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && !GetProxy(NET_ONION, addrOnion)) {\r\n             CService resolved(LookupNumeric(\"127.0.0.1\", 9050));\r\n             proxyType addrOnion = proxyType(resolved, true);\r\n             SetProxy(NET_ONION, addrOnion);\r\n\r\n```\r\nThis litle patch should do the trick and fix the problem and that should be in line what @laanwj suggested, please feel free to copy paste. ;-) ",
      "commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "created_at" : "2020-06-26T14:16:58Z",
      "diff_hunk" : "@@ -522,9 +522,9 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n     if (reply.code == 250) {\n         LogPrint(BCLog::TOR, \"tor: Authentication successful\\n\");\n \n-        // Now that we know Tor is running setup the proxy for onion addresses\n-        // if -onion isn't set to something else.\n-        if (gArgs.GetArg(\"-onion\", \"\") == \"\") {\n+        // Now that we know Tor is running, setup the proxy for onion addresses\n+        // if -onion and -proxy isn't set to something else.\n+        if (gArgs.GetArg(\"-onion\", \"\") == \"\" && gArgs.GetArg(\"-proxy\", \"\") == \"\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#discussion_r446211849",
      "id" : 446211849,
      "in_reply_to_id" : 235863144,
      "line" : 527,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIxMTg0OQ==",
      "original_commit_id" : "38640a021a67e376c32414d457f5f850ebbee083",
      "original_line" : 527,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 9,
      "pull_request_review_id" : 438333429,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14729",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-26T14:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/446211849",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Anyone interested in this PR should instead review #19358.",
      "created_at" : "2020-09-29T06:39:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14729#issuecomment-700484314",
      "id" : 700484314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14729",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDQ4NDMxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T06:39:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700484314",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
