[
   {
      "author_association" : "MEMBER",
      "body" : "@ArmchairCryptologist Thanks for reporting. This is an issue we are aware of. To avoid any confusion, and make it clear you're seeing the issue with `v24.1`, I've edited your post slightly.",
      "created_at" : "2023-05-20T13:02:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27705#issuecomment-1555907175",
      "id" : 1555907175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27705",
      "node_id" : "IC_kwDOABII585cvUJn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555907175/reactions"
      },
      "updated_at" : "2023-05-20T13:02:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555907175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "For what it's worth, I ran the node with debug logging for a bit, and while it seems to be mostly (but not exclusively) the same peer causing the stall, it also doesn't necessarily seem malicious, just slow, since it does successfully transfer *some* blocks. The client seems to really like requesting blocks from the peer in question, so I'm guessing it get blocks earlier than most other peers, and possibly gets overloaded because of it. In some cases it even looks to be requesting another block from it while it is already downloading one - and in some cases it seems to successfully download the second block then timeout on the first? See block 00000000000000000001a50acdf7b30c8f1b127ab6c105b69a4f6c24f72ab9eb in the second segment below.\r\n\r\n```\r\n2023-05-20T13:24:00Z [net] receive version message: /Satoshi:0.19.0.1/: version 70015, blocks=0, us=0.0.0.0:0, txrelay=0, peer=2605, peeraddr=3.20.y.z:46930\r\n2023-05-20T13:24:00Z [net] send version message: version 70016, blocks=790585, them=3.20.y.z:46930, txrelay=1, peer=2605\r\n2023-05-20T13:45:59Z [net] Requesting block 000000000000000000041c3004e9f638d5355f26701c424606365e94db5c94ce from  peer=2605\r\n2023-05-20T13:45:59Z UpdateTip: new best=000000000000000000041c3004e9f638d5355f26701c424606365e94db5c94ce height=790587 version=0x24bea000 log2_work=94.190868 tx=840839324 date='2023-05-20T13:45:38Z' progress=1.000000 cache=94.6MiB(705910txo)\r\n2023-05-20T14:00:13Z [net] Requesting block 00000000000000000001b274dbd40480fd3ab8ffbc1dcd9daa4667c76077c88a from  peer=2605\r\n2023-05-20T14:01:02Z [net] Requesting block 00000000000000000001e9f4462968ba404af8e9286c197d9ae3650a5165cac6 from  peer=2605\r\n2023-05-20T14:10:13Z Timeout downloading block 00000000000000000001b274dbd40480fd3ab8ffbc1dcd9daa4667c76077c88a from peer=2605, disconnecting\r\n2023-05-20T14:10:13Z [net] Requesting block 00000000000000000001b274dbd40480fd3ab8ffbc1dcd9daa4667c76077c88a (790588) peer=0\r\n2023-05-20T14:10:13Z [net] Requesting block 00000000000000000001e9f4462968ba404af8e9286c197d9ae3650a5165cac6 (790589) peer=0\r\n2023-05-20T14:10:14Z [net] received block 00000000000000000001b274dbd40480fd3ab8ffbc1dcd9daa4667c76077c88a peer=0\r\n2023-05-20T14:10:14Z UpdateTip: new best=00000000000000000001b274dbd40480fd3ab8ffbc1dcd9daa4667c76077c88a height=790588 version=0x2dfbc000 log2_work=94.190882 tx=840843696 date='2023-05-20T13:59:44Z' progress=0.999998 cache=93.6MiB(696440txo)\r\n2023-05-20T14:10:14Z [net] received block 00000000000000000001e9f4462968ba404af8e9286c197d9ae3650a5165cac6 peer=0\r\n2023-05-20T14:10:14Z UpdateTip: new best=00000000000000000001e9f4462968ba404af8e9286c197d9ae3650a5165cac6 height=790589 version=0x20e8c000 log2_work=94.190895 tx=840848460 date='2023-05-20T14:00:34Z' progress=0.999998 cache=94.5MiB(702207txo)\r\n\r\n2023-05-20T14:11:13Z [net] send version message: version 70016, blocks=790590, them=3.20.y.z:60848, txrelay=1, peer=3072\r\n2023-05-20T14:11:13Z [net] receive version message: /Satoshi:0.19.0.1/: version 70015, blocks=0, us=0.0.0.0:0, txrelay=0, peer=3072, peeraddr=3.20.y.z:60848\r\n2023-05-20T15:08:09Z [net] Requesting block 00000000000000000001cfd7b99787a52f2933f0d73d2d0c4805c2b25b17d166 from  peer=3072\r\n2023-05-20T15:16:40Z [net] received block 00000000000000000001a50acdf7b30c8f1b127ab6c105b69a4f6c24f72ab9eb peer=3072\r\n2023-05-20T15:18:09Z Timeout downloading block 00000000000000000001cfd7b99787a52f2933f0d73d2d0c4805c2b25b17d166 from peer=3072, disconnecting\r\n2023-05-20T15:18:09Z [net] Requesting block 00000000000000000001cfd7b99787a52f2933f0d73d2d0c4805c2b25b17d166 (790595) peer=2136\r\n2023-05-20T15:18:20Z [net] received block 00000000000000000001cfd7b99787a52f2933f0d73d2d0c4805c2b25b17d166 peer=2136\r\n2023-05-20T15:18:20Z UpdateTip: new best=00000000000000000001cfd7b99787a52f2933f0d73d2d0c4805c2b25b17d166 height=790595 version=0x37ffe000 log2_work=94.190977 tx=840874538 date='2023-05-20T15:07:57Z' progress=0.999998 cache=107.4MiB(755884txo)\r\n2023-05-20T15:18:20Z UpdateTip: new best=00000000000000000001a50acdf7b30c8f1b127ab6c105b69a4f6c24f72ab9eb height=790596 version=0x24d10000 log2_work=94.190990 tx=840876894 date='2023-05-20T15:16:19Z' progress=1.000000 cache=108.8MiB(766732txo)\r\n\r\n2023-05-20T15:16:17Z [net] send version message: version 70016, blocks=790594, them=8.28.y.z:58268, txrelay=1, peer=3718\r\n2023-05-20T15:16:17Z [net] receive version message: /Satoshi:24.99.0/: version 70016, blocks=790595, us=x.x.x.x:8333, txrelay=0, peer=3718, peeraddr=8.28.y.z:58268\r\n2023-05-20T15:19:09Z [net] send version message: version 70016, blocks=790597, them=3.20.y.z:52650, txrelay=1, peer=3744\r\n2023-05-20T15:19:09Z [net] receive version message: /Satoshi:0.19.0.1/: version 70015, blocks=0, us=0.0.0.0:0, txrelay=0, peer=3744, peeraddr=3.20.y.z:52650\r\n2023-05-20T15:19:33Z [net] Requesting block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 from  peer=3744\r\n2023-05-20T15:29:33Z Timeout downloading block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 from peer=3744, disconnecting\r\n2023-05-20T15:29:33Z [net] Requesting block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 (790598) peer=3718\r\n2023-05-20T15:39:33Z Timeout downloading block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 from peer=3718, disconnecting\r\n2023-05-20T15:39:33Z [net] Requesting block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 (790598) peer=2547\r\n2023-05-20T15:39:34Z [net] received block 00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 peer=2547\r\n2023-05-20T15:39:34Z UpdateTip: new best=00000000000000000002008400350c042c72251789c6b00dc972e70904ccf994 height=790598 version=0x332ec000 log2_work=94.191018 tx=840884128 date='2023-05-20T15:18:58Z' progress=0.999996 cache=110.8MiB(781253txo)\r\n\r\n2023-05-20T15:30:33Z [net] send version message: version 70016, blocks=790597, them=3.20.y.z:56230, txrelay=1, peer=3854\r\n2023-05-20T15:30:33Z [net] receive version message: /Satoshi:0.19.0.1/: version 70015, blocks=0, us=0.0.0.0:0, txrelay=0, peer=3854, peeraddr=3.20.y.z:56230\r\n2023-05-20T15:51:11Z [net] Requesting block 0000000000000000000035ea85540fe9071a16424a087c1d4f12ee544fb21994 from  peer=3854\r\n2023-05-20T15:53:57Z [net] Requesting block 0000000000000000000266ed1b962d5866ecbd8535fd6aaa51a0dd0b80606ba7 from  peer=3854\r\n2023-05-20T16:01:11Z Timeout downloading block 0000000000000000000035ea85540fe9071a16424a087c1d4f12ee544fb21994 from peer=3854, disconnecting\r\n2023-05-20T16:01:11Z [net] Requesting block 0000000000000000000035ea85540fe9071a16424a087c1d4f12ee544fb21994 (790600) peer=2136\r\n2023-05-20T16:01:11Z [net] Requesting block 0000000000000000000266ed1b962d5866ecbd8535fd6aaa51a0dd0b80606ba7 (790601) peer=2136\r\n2023-05-20T16:01:21Z [net] received block 0000000000000000000035ea85540fe9071a16424a087c1d4f12ee544fb21994 peer=2136\r\n2023-05-20T16:01:21Z UpdateTip: new best=0000000000000000000035ea85540fe9071a16424a087c1d4f12ee544fb21994 height=790600 version=0x20000000 log2_work=94.191045 tx=840891903 date='2023-05-20T15:51:07Z' progress=0.999998 cache=113.7MiB(804127txo)\r\n2023-05-20T16:01:31Z [net] received block 0000000000000000000266ed1b962d5866ecbd8535fd6aaa51a0dd0b80606ba7 peer=2136\r\n2023-05-20T16:01:31Z UpdateTip: new best=0000000000000000000266ed1b962d5866ecbd8535fd6aaa51a0dd0b80606ba7 height=790601 version=0x2667e000 log2_work=94.191058 tx=840895519 date='2023-05-20T15:53:36Z' progress=0.999998 cache=114.5MiB(809732txo)\r\n```",
      "created_at" : "2023-05-20T20:07:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27705#issuecomment-1555986348",
      "id" : 1555986348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27705",
      "node_id" : "IC_kwDOABII585cvnes",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555986348/reactions"
      },
      "updated_at" : "2023-05-20T20:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555986348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73581993?v=4",
         "events_url" : "https://api.github.com/users/ArmchairCryptologist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ArmchairCryptologist/followers",
         "following_url" : "https://api.github.com/users/ArmchairCryptologist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ArmchairCryptologist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ArmchairCryptologist",
         "id" : 73581993,
         "login" : "ArmchairCryptologist",
         "node_id" : "MDQ6VXNlcjczNTgxOTkz",
         "organizations_url" : "https://api.github.com/users/ArmchairCryptologist/orgs",
         "received_events_url" : "https://api.github.com/users/ArmchairCryptologist/received_events",
         "repos_url" : "https://api.github.com/users/ArmchairCryptologist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ArmchairCryptologist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ArmchairCryptologist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ArmchairCryptologist"
      }
   }
]
