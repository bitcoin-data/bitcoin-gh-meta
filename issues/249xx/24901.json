{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Before this commit, the stageEntries loop could skip a cache lookup since it was done on the grand-children of updateIt initially and not the direct children. This commit changes the logic so that the cache is queried even for the children of updateIt. Additionally, if updateIt has no children in setExclude, it is possible to avoid the cache lookups. And if updateIt has no parents, it is possible to avoid cache insertions.\r\n\r\n- If `updateIt` has no children in `setExclude`, then there's no need to check the cache for any descendants as only entries in `setExclude` get into the cache.\r\n- If `updateIt` has no parents, then a subsequent iteration of the loop in `UpdateTransactionsFromBlock` won't use the cache entry for `updateIt`.\r\n\r\nPrior to this commit, if we had the following tx chain (tx0 is the ancestor of all):\r\n```\r\ntx0 <- tx1 <- tx2 <- [tx3, not in setExclude]\r\n```\r\nthen the `stageEntries.empty` loop would only query the cache when `updateIt` was tx0. When `updateIt` is tx2 or tx1, the cache would not be queried since one \"generation\" of descendants is effectively skipped for lookup.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901/comments",
   "created_at" : "2022-04-17T16:25:46Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/24901",
   "id" : 1206422688,
   "labels" : [
      {
         "color" : "fef2c0",
         "default" : false,
         "description" : null,
         "id" : 164208572,
         "name" : "Mempool",
         "node_id" : "MDU6TGFiZWwxNjQyMDg1NzI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII5842VGSw",
   "number" : 24901,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/24901.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24901",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/24901.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24901"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901/timeline",
   "title" : "mempool: reduce lookups, insertions to cache in UpdateForDescendants",
   "updated_at" : "2022-04-17T17:44:21Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24901",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
      "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
      "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Crypt-iQ",
      "id" : 15145615,
      "login" : "Crypt-iQ",
      "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
      "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
      "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
      "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Crypt-iQ"
   }
}
