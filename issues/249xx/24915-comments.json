[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you could squash the commits since they're related.",
      "created_at" : "2022-04-19T00:31:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1101880416",
      "id" : 1101880416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585BrVxg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101880416/reactions"
      },
      "updated_at" : "2022-04-19T00:31:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101880416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n* [#21726](https://github.com/bitcoin/bitcoin/pull/21726) (Improve Indices on pruned nodes via prune blockers by fjahr)\n* [#17786](https://github.com/bitcoin/bitcoin/pull/17786) (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-19T01:55:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1101916059",
      "id" : 1101916059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585Breeb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101916059/reactions"
      },
      "updated_at" : "2022-04-25T02:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101916059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I think you could squash the commits since they're related.\r\n\r\nIt's done @brunoerg  ð",
      "created_at" : "2022-04-19T06:44:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1102153972",
      "id" : 1102153972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585BsYj0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1102153972/reactions"
      },
      "updated_at" : "2022-04-19T06:44:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1102153972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16785985?v=4",
         "events_url" : "https://api.github.com/users/Smlep/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Smlep/followers",
         "following_url" : "https://api.github.com/users/Smlep/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Smlep/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Smlep",
         "id" : 16785985,
         "login" : "Smlep",
         "node_id" : "MDQ6VXNlcjE2Nzg1OTg1",
         "organizations_url" : "https://api.github.com/users/Smlep/orgs",
         "received_events_url" : "https://api.github.com/users/Smlep/received_events",
         "repos_url" : "https://api.github.com/users/Smlep/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Smlep/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Smlep/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Smlep"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested 23e047620f85636195c8d7b81891ec3a8693d671. The new version could maybe use a line break before the `Good job` message.\r\n\r\nAs a test I added:\r\n- `#include <index/coinstatsindex.h>` to `index/blockfilterindex`\r\n- `#include <index/blockfilterindex.h>` to `index/coinstatsindex`\r\n\r\nBefore (`test/lint/lint-circular-dependencies.sh`):\r\n```\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> index/blockfilterindex\" appears to have been introduced.\r\n\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> validation -> index/blockfilterindex\" appears to have been introduced.\r\n\r\nGood job! The circular dependency \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\" is no longer present.\r\nPlease remove it from EXPECTED_CIRCULAR_DEPENDENCIES in test/lint/lint-circular-dependencies.sh\r\nto make sure this circular dependency is not accidentally reintroduced.\r\n\r\n```\r\n\r\nAfter (`test/lint/lint-circular-dependencies.py`):\r\n```\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> index/blockfilterindex\" appears to have been introduced.\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> validation -> index/blockfilterindex\" appears to have been introduced.\r\nGood job! The circular dependency \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\" is no longer present.\r\nPlease remove it from EXPECTED_CIRCULAR_DEPENDENCIES in test/lint/lint-circular-dependencies.py\r\nto make sure this circular dependency is not accidentally reintroduced.\r\n```\r\n\r\nSidenote: I'm not sure why adding a circular dependency causes an existing circular dependency to disappear",
      "created_at" : "2022-04-19T21:33:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1103194775",
      "id" : 1103194775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585BwWqX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103194775/reactions"
      },
      "updated_at" : "2022-04-19T21:35:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103194775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2314891?v=4",
         "events_url" : "https://api.github.com/users/KevinMusgrave/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KevinMusgrave/followers",
         "following_url" : "https://api.github.com/users/KevinMusgrave/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KevinMusgrave/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KevinMusgrave",
         "id" : 2314891,
         "login" : "KevinMusgrave",
         "node_id" : "MDQ6VXNlcjIzMTQ4OTE=",
         "organizations_url" : "https://api.github.com/users/KevinMusgrave/orgs",
         "received_events_url" : "https://api.github.com/users/KevinMusgrave/received_events",
         "repos_url" : "https://api.github.com/users/KevinMusgrave/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KevinMusgrave/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KevinMusgrave/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KevinMusgrave"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@KevinMusgrave Indeed, the newline after each message from the original script was missing.\r\nA new version has been pushed with this fix.",
      "created_at" : "2022-04-19T21:41:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1103200424",
      "id" : 1103200424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585BwYCo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103200424/reactions"
      },
      "updated_at" : "2022-04-19T21:41:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103200424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16785985?v=4",
         "events_url" : "https://api.github.com/users/Smlep/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Smlep/followers",
         "following_url" : "https://api.github.com/users/Smlep/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Smlep/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Smlep",
         "id" : 16785985,
         "login" : "Smlep",
         "node_id" : "MDQ6VXNlcjE2Nzg1OTg1",
         "organizations_url" : "https://api.github.com/users/Smlep/orgs",
         "received_events_url" : "https://api.github.com/users/Smlep/received_events",
         "repos_url" : "https://api.github.com/users/Smlep/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Smlep/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Smlep/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Smlep"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c\r\n\r\nOutput:\r\n```\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> index/blockfilterindex\" appears to have been introduced.\r\n\r\nA new circular dependency in the form of \"index/blockfilterindex -> index/coinstatsindex -> validation -> index/blockfilterindex\" appears to have been introduced.\r\n\r\nGood job! The circular dependency \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\" is no longer present.\r\nPlease remove it from EXPECTED_CIRCULAR_DEPENDENCIES in test/lint/lint-circular-dependencies.py\r\nto make sure this circular dependency is not accidentally reintroduced.\r\n\r\n```\r\n",
      "created_at" : "2022-04-19T21:52:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1103206691",
      "id" : 1103206691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585BwZkj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103206691/reactions"
      },
      "updated_at" : "2022-04-19T21:52:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103206691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2314891?v=4",
         "events_url" : "https://api.github.com/users/KevinMusgrave/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KevinMusgrave/followers",
         "following_url" : "https://api.github.com/users/KevinMusgrave/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KevinMusgrave/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KevinMusgrave",
         "id" : 2314891,
         "login" : "KevinMusgrave",
         "node_id" : "MDQ6VXNlcjIzMTQ4OTE=",
         "organizations_url" : "https://api.github.com/users/KevinMusgrave/orgs",
         "received_events_url" : "https://api.github.com/users/KevinMusgrave/received_events",
         "repos_url" : "https://api.github.com/users/KevinMusgrave/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KevinMusgrave/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KevinMusgrave/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KevinMusgrave"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r853845672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853845672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "any reason to ignore errors?\r\n\r\n```suggestion\r\n    dependencies_output = subprocess.check_output(\r\n        command,\r\n```",
      "commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "created_at" : "2022-04-20T08:04:38Z",
      "diff_hunk" : "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:\n+        for extension in [\"h\", \"cpp\"]:\n+            files.extend(glob.glob(f\"{path}.{extension}\"))\n+\n+    command = [\"python3\", \"../contrib/devtools/circular-dependencies.py\", *files]\n+    dependencies_output = subprocess.run(\n+        command,\n+        stdout=subprocess.PIPE,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r853845672",
      "id" : 853845672,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII584y5Kao",
      "original_commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "original_line" : 50,
      "original_position" : 50,
      "original_start_line" : 48,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : 50,
      "pull_request_review_id" : 946751351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853845672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 48,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-20T08:08:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853845672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r853848532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853848532"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why are you printing to stderr?\r\n\r\nAlso the exit code is wrong.",
      "commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "created_at" : "2022-04-20T08:07:55Z",
      "diff_hunk" : "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:\n+        for extension in [\"h\", \"cpp\"]:\n+            files.extend(glob.glob(f\"{path}.{extension}\"))\n+\n+    command = [\"python3\", \"../contrib/devtools/circular-dependencies.py\", *files]\n+    dependencies_output = subprocess.run(\n+        command,\n+        stdout=subprocess.PIPE,\n+        universal_newlines=True,\n+    )\n+\n+    for dependency_str in dependencies_output.stdout.rstrip().split(\"\\n\"):\n+        circular_dependencies.append(\n+            re.sub(\"^Circular dependency: \", \"\", dependency_str)\n+        )\n+\n+    # Check for an unexpected dependencies\n+    for dependency in circular_dependencies:\n+        if dependency not in EXPECTED_CIRCULAR_DEPENDENCIES:\n+            exit_code = 1\n+            print(\n+                f'A new circular dependency in the form of \"{dependency}\" appears to have been introduced.\\n',\n+                file=sys.stderr,\n+            )\n+\n+    # Check for missing expected dependencies\n+    for expected_dependency in EXPECTED_CIRCULAR_DEPENDENCIES:\n+        if expected_dependency not in circular_dependencies:\n+            print(\n+                f'Good job! The circular dependency \"{expected_dependency}\" is no longer present.',\n+                file=sys.stderr,\n+            )\n+            print(\n+                f\"Please remove it from EXPECTED_CIRCULAR_DEPENDENCIES in {__file__}\",\n+                file=sys.stderr,\n+            )\n+            print(\n+                \"to make sure this circular dependency is not accidentally reintroduced.\\n\",\n+                file=sys.stderr,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r853848532",
      "id" : 853848532,
      "line" : 81,
      "node_id" : "PRRC_kwDOABII584y5LHU",
      "original_commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "original_line" : 81,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : 81,
      "pull_request_review_id" : 946751351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853848532/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T08:08:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853848532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r854545318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854545318"
         }
      },
      "author_association" : "NONE",
      "body" : "FIxed",
      "commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "created_at" : "2022-04-20T20:53:01Z",
      "diff_hunk" : "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:\n+        for extension in [\"h\", \"cpp\"]:\n+            files.extend(glob.glob(f\"{path}.{extension}\"))\n+\n+    command = [\"python3\", \"../contrib/devtools/circular-dependencies.py\", *files]\n+    dependencies_output = subprocess.run(\n+        command,\n+        stdout=subprocess.PIPE,\n+        universal_newlines=True,\n+    )\n+\n+    for dependency_str in dependencies_output.stdout.rstrip().split(\"\\n\"):\n+        circular_dependencies.append(\n+            re.sub(\"^Circular dependency: \", \"\", dependency_str)\n+        )\n+\n+    # Check for an unexpected dependencies\n+    for dependency in circular_dependencies:\n+        if dependency not in EXPECTED_CIRCULAR_DEPENDENCIES:\n+            exit_code = 1\n+            print(\n+                f'A new circular dependency in the form of \"{dependency}\" appears to have been introduced.\\n',\n+                file=sys.stderr,\n+            )\n+\n+    # Check for missing expected dependencies\n+    for expected_dependency in EXPECTED_CIRCULAR_DEPENDENCIES:\n+        if expected_dependency not in circular_dependencies:\n+            print(\n+                f'Good job! The circular dependency \"{expected_dependency}\" is no longer present.',\n+                file=sys.stderr,\n+            )\n+            print(\n+                f\"Please remove it from EXPECTED_CIRCULAR_DEPENDENCIES in {__file__}\",\n+                file=sys.stderr,\n+            )\n+            print(\n+                \"to make sure this circular dependency is not accidentally reintroduced.\\n\",\n+                file=sys.stderr,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r854545318",
      "id" : 854545318,
      "in_reply_to_id" : 853848532,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584y71Om",
      "original_commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "original_line" : 81,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : null,
      "pull_request_review_id" : 947750295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854545318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T20:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854545318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16785985?v=4",
         "events_url" : "https://api.github.com/users/Smlep/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Smlep/followers",
         "following_url" : "https://api.github.com/users/Smlep/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Smlep/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Smlep",
         "id" : 16785985,
         "login" : "Smlep",
         "node_id" : "MDQ6VXNlcjE2Nzg1OTg1",
         "organizations_url" : "https://api.github.com/users/Smlep/orgs",
         "received_events_url" : "https://api.github.com/users/Smlep/received_events",
         "repos_url" : "https://api.github.com/users/Smlep/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Smlep/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Smlep/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Smlep"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r854552585"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854552585"
         }
      },
      "author_association" : "NONE",
      "body" : "Because `../contrib/devtools/circular-dependencies.py` does not exit with 0 if there is at least one circular dependency, resulting in `subprocess.check` raising an error",
      "commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "created_at" : "2022-04-20T21:03:21Z",
      "diff_hunk" : "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:\n+        for extension in [\"h\", \"cpp\"]:\n+            files.extend(glob.glob(f\"{path}.{extension}\"))\n+\n+    command = [\"python3\", \"../contrib/devtools/circular-dependencies.py\", *files]\n+    dependencies_output = subprocess.run(\n+        command,\n+        stdout=subprocess.PIPE,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r854552585",
      "id" : 854552585,
      "in_reply_to_id" : 853845672,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII584y73AJ",
      "original_commit_id" : "ca52afd92be695b05fb13fe4f96a25ff2b3c7f9c",
      "original_line" : 50,
      "original_position" : 50,
      "original_start_line" : 48,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : 50,
      "pull_request_review_id" : 947760182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854552585/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 48,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-20T21:03:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854552585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16785985?v=4",
         "events_url" : "https://api.github.com/users/Smlep/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Smlep/followers",
         "following_url" : "https://api.github.com/users/Smlep/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Smlep/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Smlep",
         "id" : 16785985,
         "login" : "Smlep",
         "node_id" : "MDQ6VXNlcjE2Nzg1OTg1",
         "organizations_url" : "https://api.github.com/users/Smlep/orgs",
         "received_events_url" : "https://api.github.com/users/Smlep/received_events",
         "repos_url" : "https://api.github.com/users/Smlep/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Smlep/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Smlep/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Smlep"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 79635c79e0533aa7f2e2440515ad766f965343ba",
      "created_at" : "2022-04-25T17:36:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#issuecomment-1108853349",
      "id" : 1108853349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24915",
      "node_id" : "IC_kwDOABII585CF8Jl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108853349/reactions"
      },
      "updated_at" : "2022-04-25T17:36:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108853349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r858533556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858533556"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't it be better to call `git ls-files -- '*.h' '*.cpp'`?",
      "commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "created_at" : "2022-04-26T10:09:07Z",
      "diff_hunk" : "@@ -0,0 +1,86 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r858533556",
      "id" : 858533556,
      "line" : 43,
      "node_id" : "PRRC_kwDOABII584zLC60",
      "original_commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "original_line" : 43,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : 43,
      "pull_request_review_id" : 953116379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858533556/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T10:09:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858533556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r858537508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858537508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't it be better to use `sys.executable` instead of `\"python3\"`?",
      "commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "created_at" : "2022-04-26T10:13:56Z",
      "diff_hunk" : "@@ -0,0 +1,86 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for circular dependencies\n+\n+import glob\n+import os\n+import re\n+import subprocess\n+import sys\n+\n+EXPECTED_CIRCULAR_DEPENDENCIES = (\n+    \"chainparamsbase -> util/system -> chainparamsbase\",\n+    \"node/blockstorage -> validation -> node/blockstorage\",\n+    \"index/blockfilterindex -> node/blockstorage -> validation -> index/blockfilterindex\",\n+    \"index/base -> validation -> index/blockfilterindex -> index/base\",\n+    \"index/coinstatsindex -> node/coinstats -> index/coinstatsindex\",\n+    \"policy/fees -> txmempool -> policy/fees\",\n+    \"qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\",\n+    \"qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\",\n+    \"qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\",\n+    \"qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\",\n+    \"wallet/fees -> wallet/wallet -> wallet/fees\",\n+    \"wallet/wallet -> wallet/walletdb -> wallet/wallet\",\n+    \"node/coinstats -> validation -> node/coinstats\",\n+)\n+\n+CODE_DIR = \"src\"\n+\n+\n+def main():\n+    circular_dependencies = []\n+    exit_code = 0\n+    os.chdir(\n+        CODE_DIR\n+    )  # We change dir before globbing since glob.glob's root_dir option is only available in Python 3.10\n+\n+    # Using glob.glob since subprocess.run's globbing won't work without shell=True\n+    files = []\n+    for path in [\"*\", \"*/*\", \"*/*/*\"]:\n+        for extension in [\"h\", \"cpp\"]:\n+            files.extend(glob.glob(f\"{path}.{extension}\"))\n+\n+    command = [\"python3\", \"../contrib/devtools/circular-dependencies.py\", *files]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24915#discussion_r858537508",
      "id" : 858537508,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII584zLD4k",
      "original_commit_id" : "79635c79e0533aa7f2e2440515ad766f965343ba",
      "original_line" : 47,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/lint/lint-circular-dependencies.py",
      "position" : 47,
      "pull_request_review_id" : 953122125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24915",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858537508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T10:13:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858537508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
