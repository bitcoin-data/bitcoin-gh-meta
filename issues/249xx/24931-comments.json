[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This hopefully avoids bugs like https://github.com/bitcoin/bitcoin/pull/24157#discussion_r849698742 and gets most of the benefits of `-Wthread-safety-negative` without introducing massive amounts of unhelpful warnings about `cs_main` and the like as per #20272. See also #21598.",
      "created_at" : "2022-04-20T09:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1103698546",
      "id" : 1103698546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585ByRpy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103698546/reactions"
      },
      "updated_at" : "2022-04-20T09:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103698546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-04-20T09:37:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1103708076",
      "id" : 1103708076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585ByT-s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103708076/reactions"
      },
      "updated_at" : "2022-04-20T09:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103708076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25152](https://github.com/bitcoin/bitcoin/pull/25152) (refactor: Split util/system into exception, shell, and fs-specific files by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-20T15:03:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1104038902",
      "id" : 1104038902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Bzkv2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104038902/reactions"
      },
      "updated_at" : "2022-06-08T04:05:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104038902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-04-20T15:24:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1104062937",
      "id" : 1104062937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585BzqnZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104062937/reactions"
      },
      "updated_at" : "2022-04-20T15:24:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104062937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I had a similar perspective view since f8213c05f087e5fbb5d92a291f766b0baebc798f :)\r\n\r\nMaybe split off changes related to `GlobalMutex` as they looks non-controversial and pretty straightforward to review?",
      "created_at" : "2022-04-20T15:44:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1104084934",
      "id" : 1104084934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Bzv_G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104084934/reactions"
      },
      "updated_at" : "2022-04-20T15:45:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104084934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854455079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854455079"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should each of the annotations added in the first commit also have `AssertLockNotHeld`?\r\n",
      "commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "created_at" : "2022-04-20T18:52:25Z",
      "diff_hunk" : "@@ -188,7 +188,7 @@ class CCheckQueue\n     }\n \n     //! Stop all of the worker threads.\n-    void StopWorkerThreads()\n+    void StopWorkerThreads() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854455079",
      "id" : 854455079,
      "line" : 191,
      "node_id" : "PRRC_kwDOABII584y7fMn",
      "original_commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "original_line" : 191,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 39,
      "pull_request_review_id" : 947621170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854455079/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T19:00:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854455079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854457071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854457071"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, \"mutexes\" here is correct, but s/Mutex's/Mutexes/ on line 130 and s/mutex's/mutexes/ on line 134",
      "commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "created_at" : "2022-04-20T18:55:01Z",
      "diff_hunk" : "@@ -129,7 +127,25 @@ class LOCKABLE AnnotatedMixin : public PARENT\n using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n \n /** Wrapped mutex: supports waiting but not recursive locking */\n-typedef AnnotatedMixin<std::mutex> Mutex;\n+using Mutex = AnnotatedMixin<std::mutex>;\n+\n+/** Different type to mark Mutex's outside of a class\n+ *\n+ * Thread safety analysis can't handle negative assertions about mutex's\n+ * with global scope well, so mark them with a separate type, and\n+ * eventually move all the mutexes into classes so they are not globally",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854457071",
      "id" : 854457071,
      "line" : 136,
      "node_id" : "PRRC_kwDOABII584y7frv",
      "original_commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "original_line" : 136,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : 20,
      "pull_request_review_id" : 947621170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854457071/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T19:00:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854457071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854692193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854692193"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That feels like overkill, but I'm not sure where to draw the line.",
      "commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "created_at" : "2022-04-21T01:12:19Z",
      "diff_hunk" : "@@ -188,7 +188,7 @@ class CCheckQueue\n     }\n \n     //! Stop all of the worker threads.\n-    void StopWorkerThreads()\n+    void StopWorkerThreads() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r854692193",
      "id" : 854692193,
      "in_reply_to_id" : 854455079,
      "line" : 191,
      "node_id" : "PRRC_kwDOABII584y8ZFh",
      "original_commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "original_line" : 191,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 39,
      "pull_request_review_id" : 947939182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854692193/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854692193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is the goal of this change to allow building with `-Wthread-safety-negative`?\r\n\r\nNo; as far as I can see that option prevents you from holding a `RecursiveMutex` when reacquiring the same `RecursiveMutex`, so is pointless until we don't have any of those left.\r\n\r\n",
      "created_at" : "2022-04-21T01:25:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1104614614",
      "id" : 1104614614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585B1xTW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104614614/reactions"
      },
      "updated_at" : "2022-04-21T01:25:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104614614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. Will review soon.",
      "created_at" : "2022-04-22T08:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1106202019",
      "id" : 1106202019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585B702j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106202019/reactions"
      },
      "updated_at" : "2022-04-22T08:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106202019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased past #24157, fixed bad apostrophes",
      "created_at" : "2022-04-26T09:37:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1109577317",
      "id" : 1109577317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585CIs5l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109577317/reactions"
      },
      "updated_at" : "2022-04-26T09:37:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109577317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858717674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858717674"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`!m_addr_fetches_mutex` and `!m_nodes_mutex` seem to be unnecessary here.\r\n\r\n```suggestion\r\n    void ThreadOpenAddedConnections() EXCLUSIVE_LOCKS_REQUIRED(!m_added_nodes_mutex);\r\n```",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T13:31:24Z",
      "diff_hunk" : "@@ -954,11 +955,11 @@ class CConnman\n     bool Bind(const CService& addr, unsigned int flags, NetPermissionFlags permissions);\n     bool InitBinds(const Options& options);\n \n-    void ThreadOpenAddedConnections();\n-    void AddAddrFetch(const std::string& strDest);\n-    void ProcessAddrFetch();\n-    void ThreadOpenConnections(std::vector<std::string> connect);\n-    void ThreadMessageHandler();\n+    void ThreadOpenAddedConnections() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex, !m_nodes_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858717674",
      "id" : 858717674,
      "line" : 958,
      "node_id" : "PRRC_kwDOABII584zLv3q",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 958,
      "original_position" : 101,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 101,
      "pull_request_review_id" : 953385102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858717674/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T14:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858717674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858729399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858729399"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`ThreadOpenConnections()` acquires `m_nodes_mutex` directly.\r\n\r\n```suggestion\r\n    void ThreadOpenConnections(std::vector<std::string> connect) EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex, !m_nodes_mutex);\r\n```\r\n",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T13:41:37Z",
      "diff_hunk" : "@@ -954,11 +955,11 @@ class CConnman\n     bool Bind(const CService& addr, unsigned int flags, NetPermissionFlags permissions);\n     bool InitBinds(const Options& options);\n \n-    void ThreadOpenAddedConnections();\n-    void AddAddrFetch(const std::string& strDest);\n-    void ProcessAddrFetch();\n-    void ThreadOpenConnections(std::vector<std::string> connect);\n-    void ThreadMessageHandler();\n+    void ThreadOpenAddedConnections() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex, !m_nodes_mutex);\n+    void AddAddrFetch(const std::string& strDest) EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex);\n+    void ProcessAddrFetch() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex);\n+    void ThreadOpenConnections(std::vector<std::string> connect) EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858729399",
      "id" : 858729399,
      "line" : 961,
      "node_id" : "PRRC_kwDOABII584zLyu3",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 961,
      "original_position" : 104,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 104,
      "pull_request_review_id" : 953385102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858729399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T14:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858729399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858744340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858744340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`ThreadDNSAddressSeed()` acquires `m_nodes_mutex` directly.\r\n\r\n```suggestion\r\n    void ThreadDNSAddressSeed() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_nodes_mutex);\r\n```",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T13:54:01Z",
      "diff_hunk" : "@@ -1023,16 +1024,16 @@ class CConnman\n                                 const std::set<SOCKET>& recv_set,\n                                 const std::set<SOCKET>& send_set,\n                                 const std::set<SOCKET>& error_set)\n-        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex, !mutexMsgProc);\n \n     /**\n      * Accept incoming connections, one from each read-ready listening socket.\n      * @param[in] recv_set Sockets that are ready for read.\n      */\n     void SocketHandlerListening(const std::set<SOCKET>& recv_set);\n \n-    void ThreadSocketHandler() EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n-    void ThreadDNSAddressSeed();\n+    void ThreadSocketHandler() EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex, !mutexMsgProc);\n+    void ThreadDNSAddressSeed() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858744340",
      "id" : 858744340,
      "line" : 1036,
      "node_id" : "PRRC_kwDOABII584zL2YU",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 1036,
      "original_position" : 134,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 134,
      "pull_request_review_id" : 953385102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858744340/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T14:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858744340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858771737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858771737"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This change seems unnecessary because this method does not lock any mutex or call a method that requires `!m_mutex`:\r\n\r\n```cpp\r\nBIP9Stats VersionBitsCache::Statistics(const CBlockIndex* pindex, const Consensus::Params& params, Consensus::DeploymentPos pos, std::vector<bool>* signalling_blocks)\r\n{\r\n    return VersionBitsConditionChecker(pos).GetStateStatisticsFor(pindex, params, signalling_blocks);\r\n}   \r\n```",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T14:17:33Z",
      "diff_hunk" : "@@ -87,21 +87,21 @@ class VersionBitsCache\n     /** Get the numerical statistics for a given deployment for the signalling period that includes pindex.\n      * If provided, signalling_blocks is set to true/false based on whether each block in the period signalled\n      */\n-    static BIP9Stats Statistics(const CBlockIndex* pindex, const Consensus::Params& params, Consensus::DeploymentPos pos, std::vector<bool>* signalling_blocks = nullptr);\n+    static BIP9Stats Statistics(const CBlockIndex* pindex, const Consensus::Params& params, Consensus::DeploymentPos pos, std::vector<bool>* signalling_blocks = nullptr) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858771737",
      "id" : 858771737,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII584zL9EZ",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 90,
      "original_position" : 5,
      "original_start_line" : 90,
      "path" : "src/versionbits.h",
      "position" : 5,
      "pull_request_review_id" : 953385102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858771737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 90,
      "start_side" : "LEFT",
      "updated_at" : "2022-04-26T14:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858771737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858793527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858793527"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "style: `AssertLockNotHeldInline()` is newly added function, so should abide to the naming convention for its arguments:\r\n\r\n```suggestion\r\ninline void AssertLockNotHeldInline(const char* mutex_name, const char* file_name, int line, Mutex* mutex) EXCLUSIVE_LOCKS_REQUIRED(!cs) { AssertLockNotHeldInternal(mutex_name, file_name, line, mutex); }\r\n```\r\n",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T14:35:38Z",
      "diff_hunk" : "@@ -129,7 +127,25 @@ class LOCKABLE AnnotatedMixin : public PARENT\n using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n \n /** Wrapped mutex: supports waiting but not recursive locking */\n-typedef AnnotatedMixin<std::mutex> Mutex;\n+using Mutex = AnnotatedMixin<std::mutex>;\n+\n+/** Different type to mark Mutex at global scope\n+ *\n+ * Thread safety analysis can't handle negative assertions about mutexes\n+ * with global scope well, so mark them with a separate type, and\n+ * eventually move all the mutexes into classes so they are not globally\n+ * visible.\n+ *\n+ * See: https://github.com/bitcoin/bitcoin/pull/20272#issuecomment-720755781\n+ */\n+class GlobalMutex : public Mutex { };\n+\n+#define AssertLockHeld(cs) AssertLockHeldInternal(#cs, __FILE__, __LINE__, &cs)\n+\n+inline void AssertLockNotHeldInline(const char* pszName, const char* pszFile, int nLine, Mutex* cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) { AssertLockNotHeldInternal(pszName, pszFile, nLine, cs); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858793527",
      "id" : 858793527,
      "line" : 145,
      "node_id" : "PRRC_kwDOABII584zMCY3",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 145,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : 29,
      "pull_request_review_id" : 953385102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858793527/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T14:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858793527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858878323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858878323"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This isn't caught because `m_nodes_mutex` is a `RecursiveMutex` so it's okay if it's already held",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T15:43:43Z",
      "diff_hunk" : "@@ -954,11 +955,11 @@ class CConnman\n     bool Bind(const CService& addr, unsigned int flags, NetPermissionFlags permissions);\n     bool InitBinds(const Options& options);\n \n-    void ThreadOpenAddedConnections();\n-    void AddAddrFetch(const std::string& strDest);\n-    void ProcessAddrFetch();\n-    void ThreadOpenConnections(std::vector<std::string> connect);\n-    void ThreadMessageHandler();\n+    void ThreadOpenAddedConnections() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex, !m_nodes_mutex);\n+    void AddAddrFetch(const std::string& strDest) EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex);\n+    void ProcessAddrFetch() EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex);\n+    void ThreadOpenConnections(std::vector<std::string> connect) EXCLUSIVE_LOCKS_REQUIRED(!m_addr_fetches_mutex, !m_added_nodes_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858878323",
      "id" : 858878323,
      "in_reply_to_id" : 858729399,
      "line" : 961,
      "node_id" : "PRRC_kwDOABII584zMXFz",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 961,
      "original_position" : 104,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 104,
      "pull_request_review_id" : 953625533,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858878323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T15:43:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858878323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858880238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858880238"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's also static, so seems like it would have a hard time finding an `m_mutex` to reference...",
      "commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "created_at" : "2022-04-26T15:45:38Z",
      "diff_hunk" : "@@ -87,21 +87,21 @@ class VersionBitsCache\n     /** Get the numerical statistics for a given deployment for the signalling period that includes pindex.\n      * If provided, signalling_blocks is set to true/false based on whether each block in the period signalled\n      */\n-    static BIP9Stats Statistics(const CBlockIndex* pindex, const Consensus::Params& params, Consensus::DeploymentPos pos, std::vector<bool>* signalling_blocks = nullptr);\n+    static BIP9Stats Statistics(const CBlockIndex* pindex, const Consensus::Params& params, Consensus::DeploymentPos pos, std::vector<bool>* signalling_blocks = nullptr) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r858880238",
      "id" : 858880238,
      "in_reply_to_id" : 858771737,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII584zMXju",
      "original_commit_id" : "e735d93ce456eb37898ae11e623702e46970b80f",
      "original_line" : 90,
      "original_position" : 5,
      "original_start_line" : 90,
      "path" : "src/versionbits.h",
      "position" : 5,
      "pull_request_review_id" : 953628235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858880238/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 90,
      "start_side" : "LEFT",
      "updated_at" : "2022-04-26T15:45:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858880238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK a55ee93f5aa6c94eb333f16db112bb834807acd4 - just the first two commits, in case you decide to split them in a separate PR. Thanks!",
      "created_at" : "2022-04-27T09:28:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1110778750",
      "id" : 1110778750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585CNSN-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110778750/reactions"
      },
      "updated_at" : "2022-04-27T09:28:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110778750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-30T11:01:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1113968252",
      "id" : 1113968252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585CZc58",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113968252/reactions"
      },
      "updated_at" : "2022-04-30T11:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113968252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased past #24543 ",
      "created_at" : "2022-05-03T17:01:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1116334586",
      "id" : 1116334586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Cien6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116334586/reactions"
      },
      "updated_at" : "2022-05-03T17:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116334586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased past #25100 and split the first two commits out into #25109; please review that one first, it should be easy.",
      "created_at" : "2022-05-11T17:16:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1124035716",
      "id" : 1124035716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585C_2yE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124035716/reactions"
      },
      "updated_at" : "2022-05-11T17:16:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124035716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased over #25109 merge",
      "created_at" : "2022-05-16T13:11:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1127654878",
      "id" : 1127654878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DNqXe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127654878/reactions"
      },
      "updated_at" : "2022-05-16T13:11:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127654878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It seems the `g_shutdown_mutex` has been missed to be converted from `Mutex` into `GlobalMutex`, no?",
      "created_at" : "2022-05-16T15:38:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1127829143",
      "id" : 1127829143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DOU6X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127829143/reactions"
      },
      "updated_at" : "2022-05-16T15:38:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127829143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873883889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873883889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry for bothering, but it's hard for me to parse this comment (sure I need to improve my English).\r\n\r\nMaybe, re-word it a bit?",
      "commit_id" : "44052046a54135cb00605d525270bea744a97ebf",
      "created_at" : "2022-05-16T15:44:19Z",
      "diff_hunk" : "@@ -232,12 +244,26 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n template<typename MutexArg>\n using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove_pointer<MutexArg>::type>::type>;\n \n-#define LOCK(cs) DebugLock<decltype(cs)> UNIQUE_NAME(criticalblock)(cs, #cs, __FILE__, __LINE__)\n+// When locking a Mutex, require negative capability to ensure the lock\n+// is not already held\n+inline Mutex& MaybeCheckNotHeld(Mutex& cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+inline Mutex* MaybeCheckNotHeld(Mutex* cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+\n+// When locking a GlobalMutex, just check we don't know it's locked",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873883889",
      "id" : 873883889,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Fmjx",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 252,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : null,
      "pull_request_review_id" : 974186582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873883889/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T15:44:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873883889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873888414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873888414"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n// When locking a GlobalMutex, just check it is not locked in the surrounding scope.\r\n```",
      "commit_id" : "44052046a54135cb00605d525270bea744a97ebf",
      "created_at" : "2022-05-16T15:48:49Z",
      "diff_hunk" : "@@ -232,12 +244,26 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n template<typename MutexArg>\n using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove_pointer<MutexArg>::type>::type>;\n \n-#define LOCK(cs) DebugLock<decltype(cs)> UNIQUE_NAME(criticalblock)(cs, #cs, __FILE__, __LINE__)\n+// When locking a Mutex, require negative capability to ensure the lock\n+// is not already held\n+inline Mutex& MaybeCheckNotHeld(Mutex& cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+inline Mutex* MaybeCheckNotHeld(Mutex* cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+\n+// When locking a GlobalMutex, just check we don't know it's locked",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873888414",
      "id" : 873888414,
      "in_reply_to_id" : 873883889,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Fnqe",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 252,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : null,
      "pull_request_review_id" : 974193001,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873888414/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T15:48:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873888414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873890891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873890891"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Using of `EXCLUSIVE_LOCKS_REQUIRED(!m_some_mutex)` also could prevent deadlocks.",
      "commit_id" : "44052046a54135cb00605d525270bea744a97ebf",
      "created_at" : "2022-05-16T15:50:54Z",
      "diff_hunk" : "@@ -902,14 +902,19 @@ Threads and synchronization\n - Prefer `Mutex` type to `RecursiveMutex` one.\n \n - Consistently use [Clang Thread Safety Analysis](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html) annotations to\n-  get compile-time warnings about potential race conditions in code. Combine annotations in function declarations with\n-  run-time asserts in function definitions:\n+  get compile-time warnings about potential race conditions in code.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873890891",
      "id" : 873890891,
      "line" : 905,
      "node_id" : "PRRC_kwDOABII5840FoRL",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 905,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 6,
      "pull_request_review_id" : 974196531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873890891/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T15:51:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873890891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The `g_shutdown_mutex` is scoped within the `Shutdown()` function rather than at the module level, so while it's a global in the sense of \"there's only one of them\", it's not global in the sense of \"every function can directly reference it, without need it to be passed in\", so there's no need to annotate it differently to other normal mutexes.",
      "created_at" : "2022-05-16T15:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1127848760",
      "id" : 1127848760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DOZs4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127848760/reactions"
      },
      "updated_at" : "2022-05-16T15:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127848760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873968747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873968747"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done; thanks @MarcoFalke for the suggestion so I didn't have to ask for one :)",
      "commit_id" : "44052046a54135cb00605d525270bea744a97ebf",
      "created_at" : "2022-05-16T17:09:35Z",
      "diff_hunk" : "@@ -232,12 +244,26 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n template<typename MutexArg>\n using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove_pointer<MutexArg>::type>::type>;\n \n-#define LOCK(cs) DebugLock<decltype(cs)> UNIQUE_NAME(criticalblock)(cs, #cs, __FILE__, __LINE__)\n+// When locking a Mutex, require negative capability to ensure the lock\n+// is not already held\n+inline Mutex& MaybeCheckNotHeld(Mutex& cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+inline Mutex* MaybeCheckNotHeld(Mutex* cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) LOCK_RETURNED(cs) { return cs; }\n+\n+// When locking a GlobalMutex, just check we don't know it's locked",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r873968747",
      "id" : 873968747,
      "in_reply_to_id" : 873883889,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840F7Rr",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 252,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : null,
      "pull_request_review_id" : 974301830,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873968747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T17:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873968747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r874061852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874061852"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"get compile-time warnings about potential race conditions and deadlocks in code\" ?",
      "commit_id" : "44052046a54135cb00605d525270bea744a97ebf",
      "created_at" : "2022-05-16T18:59:51Z",
      "diff_hunk" : "@@ -902,14 +902,19 @@ Threads and synchronization\n - Prefer `Mutex` type to `RecursiveMutex` one.\n \n - Consistently use [Clang Thread Safety Analysis](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html) annotations to\n-  get compile-time warnings about potential race conditions in code. Combine annotations in function declarations with\n-  run-time asserts in function definitions:\n+  get compile-time warnings about potential race conditions in code.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r874061852",
      "id" : 874061852,
      "in_reply_to_id" : 873890891,
      "line" : 905,
      "node_id" : "PRRC_kwDOABII5840GSAc",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 905,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 6,
      "pull_request_review_id" : 974435867,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874061852/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T18:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874061852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r877596068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877596068"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "3cc953864d7bd25509fbb25641830850599aa4d0",
      "created_at" : "2022-05-19T22:46:32Z",
      "diff_hunk" : "@@ -902,14 +902,19 @@ Threads and synchronization\n - Prefer `Mutex` type to `RecursiveMutex` one.\n \n - Consistently use [Clang Thread Safety Analysis](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html) annotations to\n-  get compile-time warnings about potential race conditions in code. Combine annotations in function declarations with\n-  run-time asserts in function definitions:\n+  get compile-time warnings about potential race conditions in code.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r877596068",
      "id" : 877596068,
      "in_reply_to_id" : 873890891,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Tw2k",
      "original_commit_id" : "e6f05cc7dfa021a0aef03d1ae904aa3b9555b1aa",
      "original_line" : 905,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 979342922,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877596068/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-19T22:46:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877596068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like this PR has a silent merge conflict because of #22778 and #24062.\r\n\r\nSee #25175.",
      "created_at" : "2022-05-20T11:40:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1132800173",
      "id" : 1132800173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DhSit",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132800173/reactions"
      },
      "updated_at" : "2022-05-20T11:40:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132800173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This changes `LOCK(mutex)` for non-global, non-recursive mutexes to be annotated with the negative capability for the mutex it refers to, to prevent . clang applies negative capabilities recursively, so this helps avoid forgetting to annotate functions.\r\n\r\nHow about `WITH_LOCK` macro?",
      "created_at" : "2022-05-20T11:44:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1132803470",
      "id" : 1132803470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DhTWO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132803470/reactions"
      },
      "updated_at" : "2022-05-20T11:44:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132803470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased onto #25175. The `WITH_LOCK` macro is based on `LOCK`, so also enforces these checks. `LOCK2`, `TRY_LOCK` and `WAIT_LOCK` are also updated.",
      "created_at" : "2022-05-20T14:24:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1132958876",
      "id" : 1132958876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Dh5Sc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132958876/reactions"
      },
      "updated_at" : "2022-05-20T14:24:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132958876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Rebased onto #25175. The `WITH_LOCK` macro is based on `LOCK`, so also enforces these checks. `LOCK2`, `TRY_LOCK` and `WAIT_LOCK` are also updated.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/cd6ae6906602090a1f3537e9abf97e25e4a6421a/src/net_processing.cpp#L294-L297\r\n\r\ndoes not emit a warning about missed `EXCLUSIVE_LOCKS_REQUIRED(!m_tx_relay_mutex)` annotation.",
      "created_at" : "2022-05-20T14:30:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1132966003",
      "id" : 1132966003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Dh7Bz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132966003/reactions"
      },
      "updated_at" : "2022-05-20T14:31:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132966003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Though, on the other hand, `WITH_LOCK` is within a lambda (in order to be able to `return` the result of the expression) and the annotations aren't propogated to the lambda. I think this is probably okay: `RecursiveMutex` and `GlobalMutex` don't require propogation anyway, and `Mutex` are all within a class so the new lambda will be implicitly tagged with the negative capability anyway?\r\n\r\nHowever, tagging the `WITH_LOCK` lambda with `LOCKS_EXCLUDED(cs)` could be done, just as a double check that it's not being used when the lock is already held?",
      "created_at" : "2022-05-20T14:31:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1132966912",
      "id" : 1132966912,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585Dh7QA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132966912/reactions"
      },
      "updated_at" : "2022-05-20T14:31:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132966912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> https://github.com/bitcoin/bitcoin/blob/cd6ae6906602090a1f3537e9abf97e25e4a6421a/src/net_processing.cpp#L294-L297\r\n> \r\n> does not emit a warning about missed `EXCLUSIVE_LOCKS_REQUIRED(!m_tx_relay_mutex)` annotation.\r\n\r\nUpdated with negative assertions propogated when WITH_LOCK is used, which caught the above case and another. Couldn't see a way to avoid having WITH_LOCK expand cs twice though.\r\n",
      "created_at" : "2022-05-20T15:37:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1133046480",
      "id" : 1133046480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585DiOrQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133046480/reactions"
      },
      "updated_at" : "2022-05-20T15:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133046480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r878431136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878431136"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a559509a0b8cade27199740212d7b589f71a0e3b\r\n\r\nnit, [`clang-format-diff.py`](https://github.com/bitcoin/bitcoin/tree/master/contrib/devtools#clang-format-diffpy) complains:\r\n```suggestion\r\nclass GlobalMutex : public Mutex\r\n{\r\n};\r\n```",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-05-20T18:20:17Z",
      "diff_hunk" : "@@ -129,10 +129,22 @@ using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n /** Wrapped mutex: supports waiting but not recursive locking */\n using Mutex = AnnotatedMixin<std::mutex>;\n \n+/** Different type to mark Mutex at global scope\n+ *\n+ * Thread safety analysis can't handle negative assertions about mutexes\n+ * with global scope well, so mark them with a separate type, and\n+ * eventually move all the mutexes into classes so they are not globally\n+ * visible.\n+ *\n+ * See: https://github.com/bitcoin/bitcoin/pull/20272#issuecomment-720755781\n+ */\n+class GlobalMutex : public Mutex { };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r878431136",
      "id" : 878431136,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII5840W8ug",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 141,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : 13,
      "pull_request_review_id" : 980528410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878431136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-20T18:21:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878431136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r887670454"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887670454"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "While playing with this I observed that it is possible to circumvent the thread safety warnings mechanism by wrapping the lock call in a lambda and calling this lambda immediately. That circumvention only works for mutexes that are a member of a class:\r\n\r\n```cpp\r\nMutex mutex_global;\r\n\r\n// Commented annotations would silence the warnings, clang 15\r\nclass C\r\n{\r\npublic:\r\n    Mutex mutex_member;\r\n\r\n    void f1() // EXCLUSIVE_LOCKS_REQUIRED(!mutex_member)\r\n    {\r\n        // warning: calling function 'MaybeCheckNotHeld' requires negative capability '!mutex_member' [-Wthread-safety-analysis]\r\n        LOCK(mutex_member);\r\n    }\r\n\r\n    void f2()\r\n    {\r\n        [&]() { LOCK(mutex_member); }(); // no need for annotations\r\n    }\r\n\r\n    void f3() // EXCLUSIVE_LOCKS_REQUIRED(!mutex_global)\r\n    {\r\n        // warning: calling function 'MaybeCheckNotHeld' requires negative capability '!mutex_global' [-Wthread-safety-analysis]\r\n        LOCK(mutex_global);\r\n    }\r\n\r\n    void f4() // EXCLUSIVE_LOCKS_REQUIRED(!mutex_global)\r\n    {\r\n        // warning: calling function 'MaybeCheckNotHeld' requires negative capability '!mutex_global' [-Wthread-safety-analysis]\r\n        [&]() /* EXCLUSIVE_LOCKS_REQUIRED(!mutex_global) */ { LOCK(mutex_global); }();\r\n    }\r\n};\r\n```\r\n\r\nLooks like the construct used for `WITH_LOCK()` in this PR relies on the `f2()` behavior from the example above. Is that behavior documented somewhere in the clang docs? If not, then it may be wiser to not depend on undocumented behavior.",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-02T07:51:33Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r887670454",
      "id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII58406Ma2",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 993146029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887670454/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-02T07:58:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887670454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r888275014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888275014"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can avoid the thread safety warnings in a lot of ways if you create aliases for either the locks or the variables being guarded; eg:\r\n\r\n```c++\r\n    int i GUARDED_BY(mutex_member) = 0;\r\n    void f5()\r\n    {\r\n        int* i_alias = &i;\r\n        *i_alias = 5;\r\n    }\r\n```\r\n\r\n(Using `[&]` here is creating an implicit alias for all the member variables, though clang does a better job of analysing past the aliases there than in the above example...)\r\n\r\nI think the best long term approach is to do away with any uses of both `GlobalMutex` and `RecursiveMutex`, at which point we can annotate the lambda in `WITH_LOCK` with `EXCLUSIVE_LOCKS_REQUIRED(!cs)` and we're done. Having it work in the meantime allows us to be more confident that we don't have any potential recursive cases when switching a `RecursiveMutex` to a regular `Mutex`, so seems like it aids that goal to me.",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-02T18:39:46Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r888275014",
      "id" : 888275014,
      "in_reply_to_id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII58408gBG",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 993999974,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888275014/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-02T18:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888275014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890122245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890122245"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, this explains why `f2()` needs no annotations. I guess at some point the compiler may become smarter, detect the reference and issue a warning.\r\n\r\n> I think the best long term approach is to do away with any uses of both `GlobalMutex` and `RecursiveMutex`, at which point we can annotate the lambda in `WITH_LOCK` with `EXCLUSIVE_LOCKS_REQUIRED(!cs)` and we're done.\r\n\r\nI agree. Do you envision that we do not have mutexes in global scope, or we have ones that are of type `Mutex`?",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-06T12:58:23Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890122245",
      "id" : 890122245,
      "in_reply_to_id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII5841DjAF",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 996573356,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890122245/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-06T12:58:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890122245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890636987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890636987"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Anytime you currently have:\r\n\r\n```c++\r\nGlobalMutex g_mut;\r\nint g_importantnum GUARDED_BY(g_mut) = 0;\r\nstd::string g_importantstr GUARDED_BY(g_mut);\r\n\r\nvoid bump_importantint(int offset)\r\n{\r\n    LOCK(g_mut);\r\n    g_importantnum += offset;\r\n}\r\n```\r\n\r\nyou can rewrite it as\r\n\r\n```c++\r\nclass important_stuff\r\n{\r\nprivate:\r\n    Mutex m_mut;\r\n    int m_num GUARDED_BY(m_mut) = 0;\r\n    std::string m_str GUARDED_BY(m_mut);\r\npublic:\r\n    void bump(int offset) EXCLUSIVE_LOCKS_REQUIRED(!m_mut);\r\n};\r\nimportant_stuff g_important;\r\n```\r\n\r\nor similar (depending on whether you can move all the code that uses the mutex into the class, or if you have to expose the mutex), which doesn't require very large changes to the code, but does make for a better fit with the thread safety analysis. Might also make it easy to later change `g_important` to not need to be a global too.",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-06T23:12:14Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890636987",
      "id" : 890636987,
      "in_reply_to_id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII5841Fgq7",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 997338367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890636987/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-06T23:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890636987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890963274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890963274"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Do you envision that we do not have mutexes in global scope, or we have ones that are of type `Mutex`\r\n\r\nI guess your reply above favors the \"we do not have mutexes in global scope\" case, right?",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-07T09:00:19Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890963274",
      "id" : 890963274,
      "in_reply_to_id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII5841GwVK",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 997782426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890963274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-07T09:00:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890963274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r892160337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892160337"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`g_important.m_mut` is still technically in global scope. Just works better with clang's thread safety logic",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-08T09:54:12Z",
      "diff_hunk" : "@@ -276,7 +302,7 @@ using DebugLock = UniqueLock<typename std::remove_reference<typename std::remove\n //!\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n-#define WITH_LOCK(cs, code) [&]() -> decltype(auto) { LOCK(cs); code; }()\n+#define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r892160337",
      "id" : 892160337,
      "in_reply_to_id" : 887670454,
      "line" : 305,
      "node_id" : "PRRC_kwDOABII5841LUlR",
      "original_commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "original_line" : 305,
      "original_position" : 60,
      "original_start_line" : 279,
      "path" : "src/sync.h",
      "position" : 60,
      "pull_request_review_id" : 999449703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892160337/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 279,
      "start_side" : "LEFT",
      "updated_at" : "2022-06-08T09:54:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892160337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r894588946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894588946"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Closing as resolved?",
      "commit_id" : "ce893c0497fc9b8ab9752153dfcc77c9f427545e",
      "created_at" : "2022-06-10T14:24:02Z",
      "diff_hunk" : "@@ -188,7 +188,7 @@ class CCheckQueue\n     }\n \n     //! Stop all of the worker threads.\n-    void StopWorkerThreads()\n+    void StopWorkerThreads() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#discussion_r894588946",
      "id" : 894588946,
      "in_reply_to_id" : 854455079,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841UlgS",
      "original_commit_id" : "b6914e600709bd886e16aa61b6aef88805a40a1b",
      "original_line" : 191,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : null,
      "pull_request_review_id" : 1002876498,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24931",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894588946/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-10T14:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894588946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe drop the merged commits from the broken GitHub web view?\r\n\r\n\r\n```\r\ngit commit --allow-empty -m empty\r\ngit push ...\r\ngit reset --hard HEAD~\r\ngit push ... --force",
      "created_at" : "2022-06-10T14:29:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1152422853",
      "id" : 1152422853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585EsJPF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1152422853/reactions"
      },
      "updated_at" : "2022-06-10T14:29:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1152422853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nvm, the merge commit will have the correct commit list.\r\n\r\nreview ACK ce893c0497fc9b8ab9752153dfcc77c9f427545e ð¦\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nreview ACK ce893c0497fc9b8ab9752153dfcc77c9f427545e ð¦\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUjrDgwAuuYRw/pMLEzZ0bmQYj83qnnVrTospYbV67FoYgA4pfE9zHVJ6eN25SPP\r\nakqhk9h1mhKVESBkBYr/7mrgvJjCqA7+TUBR5RWuQKrvu54JKxMTgEMyJ9nETT4a\r\niQKqbVU8TAcAR84A9nYFgQdwGF4OP1xm4SthwIiAEFw9aNeUPWRMuPQc7OoB+3/i\r\nJ6yjD6pI+TBLIYCSqK232QLw5kSR+m17GY4lg5akpdZi61o8jJ4ieGJKDZf8G54O\r\nXHT2UR0+dJVpkWQFDuseYbXUsVVe8lhXPNwKCbhsvzhVsJueAeq0LVhHfDtydlQC\r\nOKA4qQ2hxPr5O2PMJANv52QXyDs8InWj0+0bqOr/MDvtiZd+hdLhv9lS+PLznnLx\r\nr4pLcQv8esvPya/erbcM0TCp442MjwMadD1V91eEl3L7VWDQ5gFxozimGncaIL2u\r\nh5WW7VchbrYfJVna7KtOP6Hpey3aSfKP6Extba4jnz0mEYnXHut1Kc3S8K0+TwB+\r\nPG/M6vik\r\n=Pc8D\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "created_at" : "2022-06-10T14:42:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24931#issuecomment-1152435451",
      "id" : 1152435451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24931",
      "node_id" : "IC_kwDOABII585EsMT7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1152435451/reactions"
      },
      "updated_at" : "2022-06-10T14:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1152435451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
