[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK. I also wonder if this check should be part of the node's policy as in #5071 or it should be left in main. At least \"chainActive.Height() + 1\" doesn't seem to be something you should call from policy.o, at most pass it as parameter.\n",
      "created_at" : "2014-12-21T12:58:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67769675",
      "id" : 67769675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzY5Njc1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67769675/reactions"
      },
      "updated_at" : "2014-12-21T12:58:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67769675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jtimon How is this sanely a node policy thing? We're talking about whether or not we accept transactions that can't be mined to the mempool; remember the nLockTime can be any amount in the future.\n",
      "created_at" : "2014-12-21T14:44:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67772453",
      "id" : 67772453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzcyNDUz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67772453/reactions"
      },
      "updated_at" : "2014-12-21T14:44:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67772453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That's what I'm saying, this probably shouldn't go with the policy code. Thus this change is good for a later move of `Params().RequireStandard() && !IsStandardTx(tx, reason)` to policy.\n",
      "created_at" : "2014-12-21T14:59:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67772899",
      "id" : 67772899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzcyODk5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67772899/reactions"
      },
      "updated_at" : "2014-12-21T14:59:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67772899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jtimon Oh, you mean should #5071 include this pull-req? Sure, but anyway IMO this pull-req makes sense to merge regardless of what we do with policy in a wider sense.\n\nFWIW I keep meaning to making IsStandard() something you can turn off via a command-line flag, as it makes testing software on testnet/regtest annoying due to the differences in behavior.\n",
      "created_at" : "2014-12-21T15:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67773139",
      "id" : 67773139,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzczMTM5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67773139/reactions"
      },
      "updated_at" : "2014-12-21T15:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67773139",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, this PR makes sense independently, just saying that it also makes sense from the policy-encapsulation perspective. \nAbout decoupling policy selection from network (chainparams) selection, in #5180 I proposed to turn `bool CChainParams::RequireStandard()` into `std::string CChainParams::DefaultPolicy()` so that the user selection of policy overwrites the default per-network while remaining backwards compatible with what one would expect from each mode without knowing about the new policy parameter.\nI could rebase that or make a simpler version with a subset of #5071 if there's interest.\n",
      "created_at" : "2014-12-21T15:53:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67774488",
      "id" : 67774488,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3Nzc0NDg4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67774488/reactions"
      },
      "updated_at" : "2014-12-21T15:53:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67774488",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jtimon Yup, ACK DefaultPolicy()\n",
      "created_at" : "2014-12-21T16:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-67774957",
      "id" : 67774957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3Nzc0OTU3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67774957/reactions"
      },
      "updated_at" : "2014-12-21T16:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67774957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "A few questions:\n\n1) Doesn't the access to `chainActive.Height()` require you to `AssertLockHeld(cs_main)` even though it's going to be checked again in IsFinalTx() ?\n\n2)  After removing that access to chainActive from IsStandardTx(), why does it need to `AssertLockHeld(cs_main)`? Only for fIsBareMultisigStd and minRelayTxFee? Aren't those set only on init?\n",
      "created_at" : "2014-12-27T20:15:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68188961",
      "id" : 68188961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MTg4OTYx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68188961/reactions"
      },
      "updated_at" : "2014-12-27T20:15:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68188961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To be clear, this is what I'm suggesting: https://github.com/jtimon/bitcoin/commits/5521\nMaybe it is a bad suggestion for some reason I'm missing.\n",
      "created_at" : "2014-12-29T15:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68265403",
      "id" : 68265403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MjY1NDAz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68265403/reactions"
      },
      "updated_at" : "2014-12-29T15:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68265403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5521#discussion_r22332475"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5521"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22332475"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "s/reason/\"non-final\"\n",
      "commit_id" : "0ea28baeb8e83a1cc7870090ac20eed9d7ca8539",
      "created_at" : "2014-12-29T22:45:34Z",
      "diff_hunk" : "@@ -936,6 +914,26 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n                          error(\"AcceptToMemoryPool : nonstandard transaction: %s\", reason),\n                          REJECT_NONSTANDARD, reason);\n \n+    // Only accept nLockTime-using transactions that can be mined in the next\n+    // block; we don't want our mempool filled up with transactions that can't\n+    // be mined yet.\n+    //\n+    // However, IsFinalTx() is confusing... Without arguments, it uses\n+    // chainActive.Height() to evaluate nLockTime; when a block is accepted,\n+    // chainActive.Height() is set to the value of nHeight in the block.\n+    // However, when IsFinalTx() is called within CBlock::AcceptBlock(), the\n+    // height of the block *being* evaluated is what is used. Thus if we want\n+    // to know if a transaction can be part of the *next* block, we need to\n+    // call IsFinalTx() with one more than chainActive.Height().\n+    //\n+    // Timestamps on the other hand don't get any special treatment, because we\n+    // can't know what timestamp the next block will have, and there aren't\n+    // timestamp applications where it matters.\n+    if (!IsFinalTx(tx, chainActive.Height() + 1))\n+        return state.DoS(0,\n+                         error(\"AcceptToMemoryPool : non-final\"),\n+                         REJECT_NONSTANDARD, reason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#discussion_r22332475",
      "id" : 22332475,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzMyNDc1",
      "original_commit_id" : "bd3f7f023add8cd3febfa92dacc450baa0611bc1",
      "original_line" : null,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5521",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22332475/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2015-01-04T19:23:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22332475",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jtimon AcceptToMemoryPool has an AssertLockHeld(cs_main); at the beginning of the function, so we don't need another. That said I do think you are correct that IsStandardTx() doesn't need to have cs_main locked anymore.\n\n@sipa @gmaxwell @laanwj Care to confirm this?\n",
      "created_at" : "2015-01-03T04:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68582967",
      "id" : 68582967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTgyOTY3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68582967/reactions"
      },
      "updated_at" : "2015-01-03T04:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68582967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5521#discussion_r22429542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5521"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22429542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks!\n",
      "commit_id" : "0ea28baeb8e83a1cc7870090ac20eed9d7ca8539",
      "created_at" : "2015-01-03T04:35:03Z",
      "diff_hunk" : "@@ -936,6 +914,26 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n                          error(\"AcceptToMemoryPool : nonstandard transaction: %s\", reason),\n                          REJECT_NONSTANDARD, reason);\n \n+    // Only accept nLockTime-using transactions that can be mined in the next\n+    // block; we don't want our mempool filled up with transactions that can't\n+    // be mined yet.\n+    //\n+    // However, IsFinalTx() is confusing... Without arguments, it uses\n+    // chainActive.Height() to evaluate nLockTime; when a block is accepted,\n+    // chainActive.Height() is set to the value of nHeight in the block.\n+    // However, when IsFinalTx() is called within CBlock::AcceptBlock(), the\n+    // height of the block *being* evaluated is what is used. Thus if we want\n+    // to know if a transaction can be part of the *next* block, we need to\n+    // call IsFinalTx() with one more than chainActive.Height().\n+    //\n+    // Timestamps on the other hand don't get any special treatment, because we\n+    // can't know what timestamp the next block will have, and there aren't\n+    // timestamp applications where it matters.\n+    if (!IsFinalTx(tx, chainActive.Height() + 1))\n+        return state.DoS(0,\n+                         error(\"AcceptToMemoryPool : non-final\"),\n+                         REJECT_NONSTANDARD, reason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#discussion_r22429542",
      "id" : 22429542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNDI5NTQy",
      "original_commit_id" : "bd3f7f023add8cd3febfa92dacc450baa0611bc1",
      "original_line" : null,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5521",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22429542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2015-01-04T19:23:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22429542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, the main point is that it is not required in IsStandardTx(), that if it was needed, it was only for the access to activeChain, making the function more independent from main to move it out later.\n",
      "created_at" : "2015-01-03T15:17:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68597956",
      "id" : 68597956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTk3OTU2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68597956/reactions"
      },
      "updated_at" : "2015-01-03T15:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68597956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK. Just wrote a almost bytewise identical patch (my update to the comment was slightly more minimal).\n\n(Lock can be removed in another patch)\n",
      "created_at" : "2015-01-04T17:58:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68641983",
      "id" : 68641983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjQxOTgz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68641983/reactions"
      },
      "updated_at" : "2015-01-04T17:59:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68641983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gmaxwell thoughts on removing AssertLockHeld(cs_main); from IsStandardTx() within this PR?\n",
      "created_at" : "2015-01-04T18:21:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68642784",
      "id" : 68642784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjQyNzg0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68642784/reactions"
      },
      "updated_at" : "2015-01-04T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68642784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it's fine to remove.\n",
      "created_at" : "2015-01-04T19:06:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68644448",
      "id" : 68644448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjQ0NDQ4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68644448/reactions"
      },
      "updated_at" : "2015-01-04T19:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68644448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jtimon @gmaxwell Removed.\n",
      "created_at" : "2015-01-04T19:22:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68645097",
      "id" : 68645097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjQ1MDk3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68645097/reactions"
      },
      "updated_at" : "2015-01-04T19:22:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68645097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK\n",
      "created_at" : "2015-01-04T22:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68653121",
      "id" : 68653121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjUzMTIx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68653121/reactions"
      },
      "updated_at" : "2015-01-04T22:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68653121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : " Tested ACK\n",
      "created_at" : "2015-01-05T00:44:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-68657435",
      "id" : 68657435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjU3NDM1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68657435/reactions"
      },
      "updated_at" : "2015-01-05T00:44:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68657435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3513077?v=4",
         "events_url" : "https://api.github.com/users/rnicoll/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rnicoll/followers",
         "following_url" : "https://api.github.com/users/rnicoll/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rnicoll/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rnicoll",
         "id" : 3513077,
         "login" : "rnicoll",
         "node_id" : "MDQ6VXNlcjM1MTMwNzc=",
         "organizations_url" : "https://api.github.com/users/rnicoll/orgs",
         "received_events_url" : "https://api.github.com/users/rnicoll/received_events",
         "repos_url" : "https://api.github.com/users/rnicoll/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rnicoll/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rnicoll/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rnicoll"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@petertodd I've also checked and indeed, nothing is being done that requires cs_main lock anymore.\n\nACK\n",
      "created_at" : "2015-01-07T15:27:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5521#issuecomment-69037108",
      "id" : 69037108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5521",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDM3MTA4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69037108/reactions"
      },
      "updated_at" : "2015-01-07T15:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69037108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
