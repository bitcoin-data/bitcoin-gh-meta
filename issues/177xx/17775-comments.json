[
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, I wanted to do the same, but there was no rationale on why no_witness is tried first, so I didn't touch the code. Concept ACK.",
      "created_at" : "2019-12-19T16:10:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-567554319",
      "id" : 567554319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzU1NDMxOQ==",
      "updated_at" : "2019-12-19T16:10:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567554319",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is incorrect I think. If you swap the order, the \"!try_witness\" needs to turn into a \"!try_no_witness\" on the other side.",
      "created_at" : "2019-12-19T16:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-567562309",
      "id" : 567562309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzU2MjMwOQ==",
      "updated_at" : "2019-12-19T16:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567562309",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359953272"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359953272"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@sipa you mean here? Why would that make sense? We're inside a `try_no_witness` block already",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-19T16:32:44Z",
      "diff_hunk" : "@@ -117,23 +117,23 @@ bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no\n \n     std::vector<unsigned char> txData(ParseHex(hex_tx));\n \n-    if (try_no_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n+    if (try_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n         try {\n             ssData >> tx;\n-            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {\n+            if (ssData.empty()) {\n                 return true;\n             }\n         } catch (const std::exception&) {\n             // Fall through.\n         }\n     }\n \n-    if (try_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n+    if (try_no_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n         try {\n             ssData >> tx;\n-            if (ssData.empty()) {\n+            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359953272",
      "id" : 359953272,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1OTk1MzI3Mg==",
      "original_commit_id" : "3f33f027e19346eb3263c0c57df68ba314bb76a3",
      "original_position" : 26,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 334755508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359953272",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359954178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359954178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No, in the other clause. It's supposed to bypass the sanity check when only one of try_witness and try_no_witness is set.",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-19T16:34:40Z",
      "diff_hunk" : "@@ -117,23 +117,23 @@ bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no\n \n     std::vector<unsigned char> txData(ParseHex(hex_tx));\n \n-    if (try_no_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n+    if (try_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n         try {\n             ssData >> tx;\n-            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {\n+            if (ssData.empty()) {\n                 return true;\n             }\n         } catch (const std::exception&) {\n             // Fall through.\n         }\n     }\n \n-    if (try_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n+    if (try_no_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n         try {\n             ssData >> tx;\n-            if (ssData.empty()) {\n+            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359954178",
      "id" : 359954178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1OTk1NDE3OA==",
      "original_commit_id" : "3f33f027e19346eb3263c0c57df68ba314bb76a3",
      "original_position" : 26,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 334756728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359954178",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359959485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359959485"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ah I see, fixed it up(within my understanding) and put a quick comment there for future readers' comprehension ",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-19T16:45:47Z",
      "diff_hunk" : "@@ -117,23 +117,23 @@ bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no\n \n     std::vector<unsigned char> txData(ParseHex(hex_tx));\n \n-    if (try_no_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n+    if (try_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n         try {\n             ssData >> tx;\n-            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {\n+            if (ssData.empty()) {\n                 return true;\n             }\n         } catch (const std::exception&) {\n             // Fall through.\n         }\n     }\n \n-    if (try_witness) {\n-        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION);\n+    if (try_no_witness) {\n+        CDataStream ssData(txData, SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n         try {\n             ssData >> tx;\n-            if (ssData.empty()) {\n+            if (ssData.eof() && (!try_witness || CheckTxScriptsSanity(tx))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r359959485",
      "id" : 359959485,
      "in_reply_to_id" : 359954178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1OTk1OTQ4NQ==",
      "original_commit_id" : "3f33f027e19346eb3263c0c57df68ba314bb76a3",
      "original_position" : 26,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 334763947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/359959485",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "While touching this file and `DecodeHexTx`: what about separating the tx decoding from the unrelated hex decoding?  Such as having say a `DecodeTx` do the decoding which `DecodeHexTx` would call.\r\n\r\nWhen fuzzing the tx decoding part of this code it would be nice to not having to waste CPU cycles on hex encoding followed by immediate hex decoding for no reason at all :)",
      "created_at" : "2019-12-19T17:01:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-567575185",
      "id" : 567575185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzU3NTE4NQ==",
      "updated_at" : "2019-12-19T17:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567575185",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The interaction between the parameters `bool try_no_witness` and `bool try_witness` might surprise callers (both before and after this change). Can that be improved?\r\n\r\nFor the casual observer it is easy to think that:\r\n* `DecodeHexTx(mtx, tx_hex, false, true) == true` implies `DecodeHexTx(mtx, tx_hex, true, true) == true`, and\r\n* `DecodeHexTx(mtx, tx_hex, true, false) == true` implies `DecodeHexTx(mtx, tx_hex, true, true) == true`.\r\n\r\nWhich is not the case :)",
      "created_at" : "2019-12-19T20:25:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-567649679",
      "id" : 567649679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzY0OTY3OQ==",
      "updated_at" : "2019-12-19T20:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567649679",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360345379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360345379"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, static.",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-20T12:02:59Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360345379",
      "id" : 360345379,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDM0NTM3OQ==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 335220293,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360345379",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360382304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360382304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@promag I want to be able to fuzz `DecodeTx` directly without going via `DecodeHexTx` :)",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-20T13:57:01Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360382304",
      "id" : 360382304,
      "in_reply_to_id" : 360345379,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDM4MjMwNA==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 335269656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360382304",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360384958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360384958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh in that case dismiss my suggestion!",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-20T14:03:57Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360384958",
      "id" : 360384958,
      "in_reply_to_id" : 360345379,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDM4NDk1OA==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 335273375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360384958",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360730504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360730504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@instagibbs make `tx_data` reference.",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-22T21:43:56Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360730504",
      "id" : 360730504,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDczMDUwNA==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 335671904,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360730504",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360730593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360730593"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@practicalswift on a second though it could be `static` for now and then you remove it and maybe also declare it in the header.",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-22T21:46:00Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r360730593",
      "id" : 360730593,
      "in_reply_to_id" : 360345379,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDczMDU5Mw==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 335671904,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360730593",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r362060435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362060435"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-30T18:24:48Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r362060435",
      "id" : 362060435,
      "in_reply_to_id" : 360345379,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA2MDQzNQ==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 337196252,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362060435",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r362060482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362060482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "27fc6a38f813b65e5110c77925a335214aec756a",
      "created_at" : "2019-12-30T18:24:55Z",
      "diff_hunk" : "@@ -109,28 +109,23 @@ static bool CheckTxScriptsSanity(const CMutableTransaction& tx)\n     return true;\n }\n \n-bool DecodeHexTx(CMutableTransaction& tx, const std::string& hex_tx, bool try_no_witness, bool try_witness)\n+bool DecodeTx(CMutableTransaction& tx, const std::vector<unsigned char> tx_data, bool try_no_witness, bool try_witness)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#discussion_r362060482",
      "id" : 362060482,
      "in_reply_to_id" : 360730504,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjA2MDQ4Mg==",
      "original_commit_id" : "65445e727644368dd995a765d1ce1d5a89a79f09",
      "original_position" : 5,
      "path" : "src/core_read.cpp",
      "position" : null,
      "pull_request_review_id" : 337196287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17775",
      "updated_at" : "2019-12-30T18:24:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362060482",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift trying to touch as little as possible for this change, but yes it's something that should certainly be made simpler",
      "created_at" : "2019-12-30T18:27:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-569756688",
      "id" : 569756688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2OTc1NjY4OA==",
      "updated_at" : "2019-12-30T18:27:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/569756688",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK; code looks right to me, and it fixes #18028.\r\n\r\n*But* in primitives/transaction.h SerializeTransaction we'll still do non-extended format for unfunded partial transactions with no inputs, which could still lead to us spitting out a hex representation that we misparse when reading it back in. So it might be sensible to also change:\r\n\r\n```diff\r\n--- a/src/primitives/transaction.h\r\n+++ b/src/primitives/transaction.h\r\n@@ -222,7 +222,7 @@ inline void UnserializeTransaction(TxType& tx, Stream& s) {\r\n         for (size_t i = 0; i < tx.vin.size(); i++) {\r\n             s >> tx.vin[i].scriptWitness.stack;\r\n         }\r\n-        if (!tx.HasWitness()) {\r\n+        if (!tx.HasWitness() && !tx.vin.empty()) {\r\n             /* It's illegal to encode witnesses when all witness stacks are empty. */\r\n             throw std::ios_base::failure(\"Superfluous witness record\");\r\n         }\r\n@@ -244,10 +244,14 @@ inline void SerializeTransaction(const TxType& tx, Stream& s) {\r\n     if (fAllowWitness) {\r\n         /* Check whether witnesses need to be serialized. */\r\n         if (tx.HasWitness()) {\r\n             flags |= 1;\r\n         }\r\n+        /* If non-extended format might be ambiguous, use extended format */\r\n+        if (tx.vin.empty()) {\r\n+            flags |= 1;\r\n+        }\r\n     }\r\n     if (flags) {\r\n         /* Use extended format in case witnesses are to be serialized. */\r\n         std::vector<CTxIn> vinDummy;\r\n         s << vinDummy;\r\n```",
      "created_at" : "2020-01-31T05:09:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-580584699",
      "id" : 580584699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDU4NDY5OQ==",
      "updated_at" : "2020-01-31T05:09:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580584699",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ajtowns I'd rather not touch serialization code for this if possible since it's already hard enough to get review :)",
      "created_at" : "2020-08-10T18:54:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-671528466",
      "id" : 671528466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTUyODQ2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-10T18:54:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671528466",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I tried writing a fuzzer to see if reasonable partial txs with one output and no inputs would be incorrectly decoded as a witness tx. There are a few, but they seem reasonably unlikely (requiring the only output to pay to a non-compressed, non-hashed pubkey, or an OP_RETURN). One more plausible example is: `00000000000101000000000000002a51280302000002000000000001000000000400000300022800020000050000007f00030002280002000000000000` which breaks down as:\r\n\r\n```\r\nversion 00000000\r\nvin 00\r\nvout 01\r\n  value [01]00000000000000\r\n  spk [2a] [51 28020001000000f8ff00f700000037ff00ff23ae02ae00][00000001][0100][000000000][00][6000000000000]\r\nlocktime 00000000\r\n\r\nversion 00000000\r\nflag 0001\r\nvin [01]\r\n  txid 00000000000000[2a][5128020001000000f8ff00f700000037ff00ff23ae02ae00]\r\n  n [00000001]\r\n  scriptSig [01 00]\r\n  nSequence [00000000]\r\nvout [00]\r\nwitness [06000000000000]\r\nlocktime 00000000\r\n```\r\n\r\nIn particular, the vout's nValue needs to decode to a plausible number of vins, the script pubkey has to decode as a plausible scriptSig, vout array and witness stack, and the scriptSig and any pubkeys in vout need to have valid ops to pass the sanity check. That seems reasonably unlikely, something lke 8 in 256**5 maybe, rather the 1 in 256ish chance seen in #18028.\r\n\r\nAs the PR desc notes, for any cases where a partial tx is incorrectly decoded as a witness tx, using a PSBT instead will avoid the problem.\r\n\r\n[EDIT: dropped ACK, need to check what happens if valid witness tx that would have decoded as non-witness is included in block first]",
      "created_at" : "2020-10-05T04:31:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-703390110",
      "id" : 703390110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzM5MDExMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T04:50:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703390110",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 27fc6a38f813b65e5110c77925a335214aec756a\r\n\r\nA valid witness tx (on my regtest anyway) which decodes incorrectly as a 0-in 1-out non-witness tx is `020000000001013f4977dd2c309fac4339d4396fe269d6d2d111c8ac64a876e8ac7e18a2ea6f3d0000000000ffffffff0120e2e76153010000160014352067b30b49447ad453215ffa023e8e61f511f202473044022034bb381d70480932d8e13a20512b9be7f364187e083eb2583e0b5b128cbfba3c022047d593ebd6e3ddf1d408baae60eb30fbf7383c7813f90aa3236da32fae22813e01210327152f1c320a6a3a48cd5912b85081db3b6ae0ba384e9cf389071184953734a700000000`. Currently \"sendrawtransaction\" won't accept it, however if it's mined in a block it will be correctly decoded, so (unsurprisingly) fixing this doesn't result in an obvious hardfork.\r\n\r\nThat tx was constructed by:\r\n * finding a pubkey that's a valid script (eg, \"03 __ __ __ 1c ...\")\r\n * grinding a tx with an output that pays to that pubkey via p2wpkh, and whose txid ends in \"43 ac __ __ __ __ __ __ __\"\r\n * making a 1-input 1-output tx spending that output\r\n\r\nThat's a 1-in-16M chance of occurring accidently, but requires only 66k sha256d operations to find.",
      "created_at" : "2020-10-05T09:09:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-703505474",
      "id" : 703505474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzUwNTQ3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T09:09:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703505474",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 27fc6a38f813b65e5110c77925a335214aec756a\r\n\r\nIf we dropped the `*rawtransaction` RPCs (except for `sendrawtransaction`) and had everyone use PSBTs, this problem would go away :)",
      "created_at" : "2020-10-13T21:52:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17775#issuecomment-708029609",
      "id" : 708029609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17775",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwODAyOTYwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-13T21:52:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708029609",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
