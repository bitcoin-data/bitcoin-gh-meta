[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r360728794"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360728794"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why are you adding this? `GetTxSize` returns `size_t` and asserting `!= 0` is new behavior. I think this could be dropped.",
      "commit_id" : "52a45c393c7cf4309b754d42c240e9652f825bbe",
      "created_at" : "2019-12-22T21:08:50Z",
      "diff_hunk" : "@@ -217,10 +217,11 @@ void CTxMemPool::UpdateAncestorsOf(bool add, txiter it, setEntries &setAncestors\n         UpdateChild(piter, it, add);\n     }\n     const int64_t updateCount = (add ? 1 : -1);\n-    const int64_t updateSize = updateCount * it->GetTxSize();\n+    const int64_t updateSize = it->GetTxSize();\n+    assert(updateSize > 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r360728794",
      "id" : 360728794,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDcyODc5NA==",
      "original_commit_id" : "ed1a916ed4f876742c74675e651596716ed9e304",
      "original_position" : 6,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 335670385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791",
      "updated_at" : "2019-12-22T23:24:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360728794",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-12-22T21:27:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-568304171",
      "id" : 568304171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMwNDE3MQ==",
      "updated_at" : "2019-12-22T21:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568304171",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r360732879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360732879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> `GetTxSize` returns `size_t` and asserting `!= 0` is new behavior.\r\n\r\nFixed.\r\n\r\n> I think this could be dropped.\r\n\r\nLet's keep `assert` for safety ;)",
      "commit_id" : "52a45c393c7cf4309b754d42c240e9652f825bbe",
      "created_at" : "2019-12-22T22:31:08Z",
      "diff_hunk" : "@@ -217,10 +217,11 @@ void CTxMemPool::UpdateAncestorsOf(bool add, txiter it, setEntries &setAncestors\n         UpdateChild(piter, it, add);\n     }\n     const int64_t updateCount = (add ? 1 : -1);\n-    const int64_t updateSize = updateCount * it->GetTxSize();\n+    const int64_t updateSize = it->GetTxSize();\n+    assert(updateSize > 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r360732879",
      "id" : 360732879,
      "in_reply_to_id" : 360728794,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MDczMjg3OQ==",
      "original_commit_id" : "ed1a916ed4f876742c74675e651596716ed9e304",
      "original_position" : 6,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 335673797,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791",
      "updated_at" : "2019-12-22T23:24:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/360732879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21000 (fuzz: Add UBSan suppressions needed for fuzz tests to not warn under -fsanitize=integer by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-12-22T23:13:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-568311085",
      "id" : 568311085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMxMTA4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T06:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568311085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nit regarding the commit message \"Fix UB in CTxMemPool*\":\r\n\r\nUnsigned integer wraparound and implicit integer sign change are not UB, but they are often unintentional - that is why UBSan is flagging them :)\r\n\r\nPerhaps the PR title (\"Remove UBSan suppressions for CTxMemPool*\") could be used as commit message instead?\r\n\r\n`-fsanitize=implicit-integer-sign-change`: Implicit conversion between integer types, if that changes the sign of the value. That is, if the the original value was negative and the new value is positive (or zero), or the original value was positive, and the new value is negative. Issues caught by this sanitizer are not undefined behavior, but are often unintentional.\r\n\r\n`-fsanitize=unsigned-integer-overflow`: Unsigned integer overflow, where the result of an unsigned integer computation cannot be represented in its type. Unlike signed integer overflow, this is not undefined behavior, but it is often unintentional.\r\n",
      "created_at" : "2019-12-22T23:20:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-568311606",
      "id" : 568311606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMxMTYwNg==",
      "updated_at" : "2019-12-22T23:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568311606",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift \r\n> Nit regarding the commit message \"Fix UB in CTxMemPool*\"...\r\n\r\nAgree with every word ;)\r\nFixed.\r\n",
      "created_at" : "2019-12-22T23:25:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-568311988",
      "id" : 568311988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMxMTk4OA==",
      "updated_at" : "2019-12-22T23:25:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568311988",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 52a45c393c7cf4309b754d42c240e9652f825bbe -- diff looks correct",
      "created_at" : "2019-12-23T07:19:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-568383252",
      "id" : 568383252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODM4MzI1Mg==",
      "updated_at" : "2019-12-23T07:19:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568383252",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r382244421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382244421"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: this is now the size of the tx, not the update\r\n\r\nMaybe assert against the `it->GetTxSize` directly? Would mean just adding one line here. If you're concerned about the repeated calls, something like this: https://github.com/Empact/bitcoin/commit/0018dd13b6799d7dbaafc8cdce66c8a0689083bd would make them trivial.",
      "commit_id" : "52a45c393c7cf4309b754d42c240e9652f825bbe",
      "created_at" : "2020-02-20T20:38:27Z",
      "diff_hunk" : "@@ -217,10 +217,11 @@ void CTxMemPool::UpdateAncestorsOf(bool add, txiter it, setEntries &setAncestors\n         UpdateChild(piter, it, add);\n     }\n     const int64_t updateCount = (add ? 1 : -1);\n-    const int64_t updateSize = updateCount * it->GetTxSize();\n+    const int64_t updateSize = it->GetTxSize();\n+    assert(updateSize >= 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#discussion_r382244421",
      "id" : 382244421,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI0NDQyMQ==",
      "original_commit_id" : "52a45c393c7cf4309b754d42c240e9652f825bbe",
      "original_position" : 6,
      "path" : "src/txmempool.cpp",
      "position" : 6,
      "pull_request_review_id" : 362216282,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17791",
      "updated_at" : "2020-02-20T20:47:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382244421",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-02-20T20:48:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-589300907",
      "id" : 589300907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4OTMwMDkwNw==",
      "updated_at" : "2020-02-20T20:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/589300907",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-26T09:08:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17791#issuecomment-767405786",
      "id" : 767405786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17791",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NzQwNTc4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-26T09:08:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767405786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
