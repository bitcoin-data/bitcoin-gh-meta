[
   {
      "author_association" : "MEMBER",
      "body" : "ACK 9972b28, trusting my previous self here, I remember understanding what this did :-) https://github.com/bitcoin/bitcoin/pull/16341#discussion_r326852547",
      "created_at" : "2019-11-05T17:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17374#issuecomment-549939310",
      "id" : 549939310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17374",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTkzOTMxMA==",
      "updated_at" : "2019-11-05T17:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549939310",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "When was this bug introduced? Does it need backport? Would a regression test be appropriate?",
      "created_at" : "2019-11-05T17:57:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17374#issuecomment-549940664",
      "id" : 549940664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17374",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTk0MDY2NA==",
      "updated_at" : "2019-11-05T17:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549940664",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looking at this much more closely, I'm not entirely sure that this is really a bug fix or whether it is needed.\r\n\r\nThe reason this was included in the ScriptPubKeyMan PR was that because IsMine is relied upon more heavily in the ScriptPubKeyMan model, `wallet_importmulti.py` was failing. It failed in the specific case where a legacy address was fetched, and from its information, a `wpkh()` descriptor (so an output type that does not match the address) was imported into another wallet. Then `getaddressinfo` was called using the original legacy address but on the imported wallet and it failed to find any information. This change was introduced to make the test pass, but perhaps it would have been better to change the test to be consistent with the address types.\r\n\r\nFurthermore, the wallet with the import *does not* recognize the legacy address as being watch only. `getaddressinfo` reports it as not watch only and coins sent to that address are not detected by the wallet. This PR would change that, furthering the \"any pubkey we have\" behavior of the ismine, which I don't think is actually desirable. But, at the same time, the current behavior is that we are able to get metadata about the legacy address (we return the pubkey and key origin info). After the rest of the ScriptPubKeyMan refactor, this would no longer be true; `getaddressinfo` will not return any information about the legacy address and treat it as any other third party address unrelated to the wallet even though we have the pubkey.\r\n\r\nAnd lastly, the current behavior is that we do have this weird state where the legacy address is not watch only but is solvable. So we could add key origin information to a PSBT which has inputs spending from this address but the wallet wouldn't be tracking that address. ScriptPubKeyMan does change that behavior too (due to checking IsMine).",
      "created_at" : "2019-11-05T21:48:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17374#issuecomment-550036931",
      "id" : 550036931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17374",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDAzNjkzMQ==",
      "updated_at" : "2019-11-05T21:48:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550036931",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "this might not be worth fixing. AFAIK it was only introduced with descriptor import, but the behavior was never a regression as such.",
      "created_at" : "2019-11-05T22:09:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17374#issuecomment-550044951",
      "id" : 550044951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17374",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDA0NDk1MQ==",
      "updated_at" : "2019-11-05T22:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550044951",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Paging @sipa.",
      "created_at" : "2019-11-06T07:33:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17374#issuecomment-550183953",
      "id" : 550183953,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17374",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDE4Mzk1Mw==",
      "updated_at" : "2019-11-06T07:33:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550183953",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
