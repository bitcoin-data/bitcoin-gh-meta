[
   {
      "author_association" : "MEMBER",
      "body" : "To give a clearer idea of the hardware you're using, would you mind [installing `bitcoinperf`](https://github.com/chaincodelabs/bitcoinperf/#example-local-usage-no-docker), running `bitcoinperf-hwinfo`, and pasting the output table here? Alternatively could you install `fio` and run a command like \r\n```sh\r\nfio --randrepeat=1 --ioengine=libaio --direct=1 --gtod_reduce=1 \\\r\n  --name=test --filename=$PATH_TO_DATADIR/test.io --bs=4k --iodepth=64 \\\r\n  --size=180M --time_based=1 --runtime=20 --readwrite=randrw --rwmixread=75\r\n```\r\nto give us an idea of the IO speed of your disk?",
      "created_at" : "2019-11-06T18:59:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-550452526",
      "id" : 550452526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDQ1MjUyNg==",
      "updated_at" : "2019-11-06T18:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550452526",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To say something sensible about this we need to know what hardware. What CPU, what OS?",
      "created_at" : "2019-11-07T09:16:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-550992475",
      "id" : 550992475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDk5MjQ3NQ==",
      "updated_at" : "2019-11-07T09:16:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550992475",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> To give a clearer idea of the hardware you're using, would you mind [installing `bitcoinperf`](https://github.com/chaincodelabs/bitcoinperf/#example-local-usage-no-docker), running `bitcoinperf-hwinfo`, and pasting the output table here?\r\n\r\n```\r\n$ bitcoinperf-hwinfo\r\n| key                                   | value                                     |\r\n| -----------------------------------   | ---------------------------------------   |\r\n| hostname                              | redcat                                    |\r\n| cpu_model_name                        | Intel(R) Core(TM) i3-7100 CPU @ 3.90GHz   |\r\n| ram_gb                                | 15.579715728759766                        |\r\n| os                                    | ['Linux Mint', '19.2', 'tina']            |\r\n| arch                                  | x86_64                                    |\r\n| kernel                                | 4.15.0-66-generic                         |\r\n| read_iops (/home/hebasto/.bitcoin)    | 3148                                      |\r\n| write_iops (/home/hebasto/.bitcoin)   | 1046                                      |\r\n```\r\n\r\n> Alternatively could you install `fio`...\r\n\r\n```\r\n$ fio --randrepeat=1 --ioengine=libaio --direct=1 --gtod_reduce=1 --name=test --filename=/home/hebasto/.bitcoin/test.io --bs=4k --iodepth=64   --size=180M --time_based=1 --runtime=20 --readwrite=randrw --rwmixread=75\r\ntest: (g=0): rw=randrw, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=64\r\nfio-3.1\r\nStarting 1 process\r\nJobs: 1 (f=1): [m(1)][100.0%][r=13.0MiB/s,w=4440KiB/s][r=3575,w=1110 IOPS][eta 00m:00s]\r\ntest: (groupid=0, jobs=1): err= 0: pid=18611: Thu Nov  7 22:49:39 2019\r\n   read: IOPS=3223, BW=12.6MiB/s (13.2MB/s)(252MiB/20015msec)\r\n   bw (  KiB/s): min= 9536, max=15744, per=100.00%, avg=12893.05, stdev=1626.20, samples=40\r\n   iops        : min= 2384, max= 3936, avg=3223.25, stdev=406.57, samples=40\r\n  write: IOPS=1070, BW=4283KiB/s (4386kB/s)(83.7MiB/20015msec)\r\n   bw (  KiB/s): min= 3168, max= 5416, per=100.00%, avg=4283.20, stdev=549.23, samples=40\r\n   iops        : min=  792, max= 1354, avg=1070.80, stdev=137.31, samples=40\r\n  cpu          : usr=2.58%, sys=6.70%, ctx=52091, majf=0, minf=8\r\n  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=0.1%, >=64=99.9%\r\n     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%\r\n     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.1%, >=64=0.0%\r\n     issued rwt: total=64518,21432,0, short=0,0,0, dropped=0,0,0\r\n     latency   : target=0, window=0, percentile=100.00%, depth=64\r\n\r\nRun status group 0 (all jobs):\r\n   READ: bw=12.6MiB/s (13.2MB/s), 12.6MiB/s-12.6MiB/s (13.2MB/s-13.2MB/s), io=252MiB (264MB), run=20015-20015msec\r\n  WRITE: bw=4283KiB/s (4386kB/s), 4283KiB/s-4283KiB/s (4386kB/s-4386kB/s), io=83.7MiB (87.8MB), run=20015-20015msec\r\n\r\nDisk stats (read/write):\r\n  sda: ios=63291/21314, merge=830/255, ticks=943608/316608, in_queue=1260628, util=99.52%\r\n\r\n```\r\n\r\n> To say something sensible about this we need to know what hardware. What CPU, what OS?\r\n\r\n```\r\n$ inxi -SCD\r\nSystem:    Host: redcat Kernel: 4.15.0-66-generic x86_64 bits: 64 Desktop: Cinnamon 4.2.4 Distro: Linux Mint 19.2 Tina \r\nCPU:       Topology: Dual Core model: Intel Core i3-7100 bits: 64 type: MT MCP L2 cache: 3072 KiB \r\n           Speed: 3900 MHz min/max: 800/3900 MHz Core speeds (MHz): 1: 3900 2: 3900 3: 3900 4: 3900 \r\nDrives:    Local Storage: total: 875.64 GiB used: 611.86 GiB (69.9%) \r\n           ID-1: /dev/sda model: SPCC Solid State Disk size: 111.79 GiB \r\n           ID-2: /dev/sdb vendor: Hitachi model: HCS721050CLA362 size: 298.09 GiB \r\n           ID-3: /dev/sdc vendor: Western Digital model: WD5003ABYZ-011FA0 size: 465.76 GiB\r\n```\r\n",
      "created_at" : "2019-11-07T21:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-551267050",
      "id" : 551267050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTI2NzA1MA==",
      "updated_at" : "2019-11-07T21:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551267050",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The other issue with FlushStateToDisk() is that it is run upon shutdown of the process, which if shutting down the OS, means either having to wait the 10 minutes, or forcefully killing the process. Perhaps it could be an option to not FlushStateToDisk() upon shutdown?",
      "created_at" : "2020-04-08T11:57:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-610915421",
      "id" : 610915421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMDkxNTQyMQ==",
      "updated_at" : "2020-04-08T11:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/610915421",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@rebroad \r\n\r\n>The other issue with FlushStateToDisk() is that it is run upon shutdown of the process, which if shutting down the OS, means either having to wait the 10 minutes, or forcefully killing the process.\r\n\r\nYou may think Bitcoin Core blocking system shutdown is annoying, but as a user (who just wants to sync as fast as possible, rather than worrying about system shutdown) I on the contrary think that FlushStateToDisk should be executed as less frequently as possible, best to not do it at all except shutting down, so that the entire UTXO jobs could be done totally in RAM rather than on hard drive.\r\n\r\nI think options with fancy words like \"turbo, heavy mode\" vs \"agile, light mode\" can let the user to choose how the cache should behave.\r\n\r\n>Perhaps it could be an option to not FlushStateToDisk() upon shutdown?\r\n\r\nFrankly speaking I don't understand this point - doesn't this mean the sync progress would (partially) lose?",
      "created_at" : "2020-08-16T18:38:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-674561803",
      "id" : 674561803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDU2MTgwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-17T05:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674561803",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4075106?v=4",
         "events_url" : "https://api.github.com/users/andronoob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andronoob/followers",
         "following_url" : "https://api.github.com/users/andronoob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andronoob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andronoob",
         "id" : 4075106,
         "login" : "andronoob",
         "node_id" : "MDQ6VXNlcjQwNzUxMDY=",
         "organizations_url" : "https://api.github.com/users/andronoob/orgs",
         "received_events_url" : "https://api.github.com/users/andronoob/received_events",
         "repos_url" : "https://api.github.com/users/andronoob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andronoob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andronoob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andronoob"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Okay, I'm adding a new issue #19742",
      "created_at" : "2020-08-16T18:41:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-674562041",
      "id" : 674562041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDU2MjA0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-17T05:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674562041",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4075106?v=4",
         "events_url" : "https://api.github.com/users/andronoob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andronoob/followers",
         "following_url" : "https://api.github.com/users/andronoob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andronoob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andronoob",
         "id" : 4075106,
         "login" : "andronoob",
         "node_id" : "MDQ6VXNlcjQwNzUxMDY=",
         "organizations_url" : "https://api.github.com/users/andronoob/orgs",
         "received_events_url" : "https://api.github.com/users/andronoob/received_events",
         "repos_url" : "https://api.github.com/users/andronoob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andronoob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andronoob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andronoob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing as this issue depends on hardware (i.e., SSD) quality.",
      "created_at" : "2021-03-02T07:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17397#issuecomment-788675559",
      "id" : 788675559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17397",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODY3NTU1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-02T07:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788675559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
