[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Can we turn off these lints? Who cares at all if we have some unused imports in some python tests? This seems entirely useless.",
      "created_at" : "2019-10-31T23:35:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-548609825",
      "id" : 548609825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODYwOTgyNQ==",
      "updated_at" : "2019-10-31T23:35:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548609825",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #16756 (test: Connection eviction logic tests by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-01T02:42:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-548644465",
      "id" : 548644465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODY0NDQ2NQ==",
      "updated_at" : "2020-02-11T21:39:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548644465",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341586307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341586307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "for p2p, since we already have RPC tests for it(I had to look)",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T14:06:51Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341586307",
      "id" : 341586307,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTU4NjMwNw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 7,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 7,
      "pull_request_review_id" : 310472564,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341586307",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341699998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341699998"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why `-debug`? It's on by default.\r\n\r\nPlease comment why `-whitelist` is required",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T18:32:18Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341699998",
      "id" : 341699998,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTY5OTk5OA==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310625186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341699998",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341700327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341700327"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Prefer to use file docstrings over code comments for the top-level comment",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T18:33:05Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341700327",
      "id" : 341700327,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcwMDMyNw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 6,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 6,
      "pull_request_review_id" : 310625186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341700327",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341704009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341704009"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This comment is wrong. All nodes will generate to a deterministic address (whether wallet is enabled or not).\r\n\r\nOther ways to achieve this:\r\n- call `self.nodes[0].generatetoaddress(17, self.nodes[0].getnewaddress()) to get a new address (and hence new block hash)\r\n- call `sleep(1)` to get a new timestamp (and hence new block hash)\r\n- ~use `setmocktime()` to get a new timestamp (and hence new block hash)~ probably not a good idea if you're testing p2p behaviour.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T18:42:38Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework is a little dense wrt mining on nodes without wallets -",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341704009",
      "id" : 341704009,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcwNDAwOQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 36,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310625186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341704009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341704847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341704847"
         }
      },
      "author_association" : "MEMBER",
      "body" : "also: I'd gently encourage you not to call other contributors' code 'a little dense'",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T18:44:52Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework is a little dense wrt mining on nodes without wallets -",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341704847",
      "id" : 341704847,
      "in_reply_to_id" : 341704009,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcwNDg0Nw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 36,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310625186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341704847",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726045"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Because that's what was there before, its just a test, and it doesn't seem to hurt anything.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T19:47:45Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726045",
      "id" : 341726045,
      "in_reply_to_id" : 341699998,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcyNjA0NQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310661188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726045",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726243"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't know what a docstrng is.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T19:48:22Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726243",
      "id" : 341726243,
      "in_reply_to_id" : 341700327,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcyNjI0Mw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 6,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 6,
      "pull_request_review_id" : 310661482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726243",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726800"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I tried getnewaddress first - sadly this is just an issue for non-wallet nodes. Wallet'd nodes will generate a *new* deterministic address, but the test framework just hard-codes a bunch. That's totally fine, but it is a bit dense. I'm also a bit dense, and so is lots of code I write, cause its just a hack to get it to work. Didn't mean it at all as an insult, just describing the state of it.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T19:50:07Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework is a little dense wrt mining on nodes without wallets -",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341726800",
      "id" : 341726800,
      "in_reply_to_id" : 341704009,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTcyNjgwMA==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 36,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310662265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341726800",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341733707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341733707"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here you go: https://www.python.org/dev/peps/pep-0257/",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T20:11:43Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341733707",
      "id" : 341733707,
      "in_reply_to_id" : 341700327,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTczMzcwNw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 6,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 6,
      "pull_request_review_id" : 310672106,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341733707",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341733765"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341733765"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How can it be there before if this is a new test?",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T20:11:57Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341733765",
      "id" : 341733765,
      "in_reply_to_id" : 341699998,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTczMzc2NQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310672205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341733765",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341734241"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341734241"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's not dense. It's how we get tests to work with wallet enabled and disabled.\r\n\r\nCan you remove the incorrect comment please?",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T20:13:29Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework is a little dense wrt mining on nodes without wallets -",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341734241",
      "id" : 341734241,
      "in_reply_to_id" : 341704009,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTczNDI0MQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 36,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310672865,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341734241",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341735375"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341735375"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The code was taken, almost verbatim from #5806, its not fresh.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T20:17:12Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341735375",
      "id" : 341735375,
      "in_reply_to_id" : 341699998,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTczNTM3NQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310674483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341735375",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341743161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341743161"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Adding '-whitelist=127.0.0.1' to tests seems to me to make them less realistic, more brittle and harder to maintain if different connection options are added. It also changes p2p behaviour so that it's less obvious that the test is testing what you want to test in a focused way. Does whitelisting interact with how blocks are sync'ed in the event of a block being invalidated? I don't know, and by adding this option you're requiring reviewers to figure that out (or just rubberstamp ACK this PR without understanding the code). So my request is to either remove this or comment on why you've chosen to add this option.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-01T20:40:56Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r341743161",
      "id" : 341743161,
      "in_reply_to_id" : 341699998,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTc0MzE2MQ==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 310685351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:07:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341743161",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342164614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342164614"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fair, likely should not have used the word \"dense\". I cleared up the comment, though I still think this approach is the easiest?",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T17:08:24Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [['-debug', '-whitelist=127.0.0.1'],['-debug', '-whitelist=127.0.0.1']]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework is a little dense wrt mining on nodes without wallets -",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342164614",
      "id" : 342164614,
      "in_reply_to_id" : 341704009,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjE2NDYxNA==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 36,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : null,
      "pull_request_review_id" : 311221565,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T17:08:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342164614",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Take a look at the other tests, particularly https://github.com/bitcoin/bitcoin/blob/master/test/functional/example_test.py#L5 and https://github.com/bitcoin/bitcoin/blob/master/test/functional/README.md#style-guidelines. Documenting what the test is supposed to be testing and why is a courtesy to any other developer who tries to understand this in future. \"Test invalidateblock\" doesn't explain what this test is for.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T20:55:01Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265263",
      "id" : 342265263,
      "in_reply_to_id" : 341700327,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2NTI2Mw==",
      "original_commit_id" : "50190dfaafac7f6bf7f1b8ff2dcc494ec7643912",
      "original_position" : 6,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 6,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265263",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265530"
         }
      },
      "author_association" : "MEMBER",
      "body" : "'if we have no wallet' is inaccurate. All calls to `generate` in the functional test framework will generate blocks to a hardcoded address.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T20:55:42Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework uses a static per-node address which will generate\n+        # a deterministic block if we have no wallet.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265530",
      "id" : 342265530,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2NTUzMA==",
      "original_commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "original_position" : 37,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 37,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265530",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This isn't required if you're not adding any extra args.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T20:55:57Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342265629",
      "id" : 342265629,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2NTYyOQ==",
      "original_commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "original_position" : 16,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 16,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342265629",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342266356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342266356"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Use `self.log.info()` rather than `print`",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T20:57:46Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework uses a static per-node address which will generate\n+        # a deterministic block if we have no wallet.\n+        # Instead, mine on nodes[0], which will use a different hardcoded address\n+        # than the one we previously used, making this block unique.\n+        self.nodes[0].generate(17)\n+\n+        print(\"All blocks generated, trying to sync\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342266356",
      "id" : 342266356,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2NjM1Ng==",
      "original_commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "original_position" : 42,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 42,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342266356",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342266963"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342266963"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you remove this line, you can also remove the following lines from `run_test`:\r\n\r\n```\r\n        self.nodes[0].generate(1) # Leave IBD\r\n        self.sync_all()\r\n```\r\n\r\nThe test will run more quickly and it'll be clearer to readers what the test is for.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T20:59:13Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342266963",
      "id" : 342266963,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2Njk2Mw==",
      "original_commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "original_position" : 15,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 15,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342266963",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342268521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342268521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it's _slightly_ clearer if all blocks are generated on node0 and sync'ed to node1. It makes it more obvious to someone reading the test that this is testing node1 being able to resync to an less-work chain if it previously invalidated a different chain.",
      "commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "created_at" : "2019-11-04T21:03:06Z",
      "diff_hunk" : "@@ -0,0 +1,48 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#\n+# Test invalidateblock\n+#\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class InvalidateBlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(1) # Leave IBD\n+        self.sync_all()\n+\n+        cnt = self.nodes[0].getblockcount()\n+\n+        node1blocks = self.nodes[1].generate(18)\n+\n+        self.sync_all()\n+        if (self.nodes[0].getblockcount() != cnt + 18):\n+            raise AssertionError(\"Failed to sync initial blocks\")\n+\n+        self.nodes[0].invalidateblock(node1blocks[0])\n+        self.nodes[1].invalidateblock(node1blocks[0])\n+\n+        if (self.nodes[0].getblockcount() != cnt):\n+            raise AssertionError(\"Failed to invalidate initial blocks\")\n+\n+        # The test framework uses a static per-node address which will generate\n+        # a deterministic block if we have no wallet.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#discussion_r342268521",
      "id" : 342268521,
      "in_reply_to_id" : 342265530,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI2ODUyMQ==",
      "original_commit_id" : "df117c82129f1a7ef0898d46794fc9d9bad64923",
      "original_position" : 37,
      "path" : "test/functional/p2p_post_invalidate_sync.py",
      "position" : 37,
      "pull_request_review_id" : 311352005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17335",
      "updated_at" : "2019-11-04T21:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342268521",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Suggeted fixups: https://github.com/jnewbery/bitcoin/commit/3357670144485dcde14ddf98a90fab0fca6965a3 (in branch https://github.com/jnewbery/bitcoin/tree/pr17335.1)",
      "created_at" : "2019-12-15T16:54:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-565826606",
      "id" : 565826606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NTgyNjYwNg==",
      "updated_at" : "2019-12-15T16:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565826606",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-06-12T18:56:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-643434300",
      "id" : 643434300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzQzNDMwMA==",
      "updated_at" : "2020-06-12T18:56:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643434300",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This has unaddressed review comments from > 6 months ago. Closing and marking 'up for grabs'.\r\n\r\n@TheBlueMatt - if you want to pick this up again, let me know and I'll reopen.",
      "created_at" : "2020-06-12T20:04:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-643461161",
      "id" : 643461161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzQ2MTE2MQ==",
      "updated_at" : "2020-06-12T20:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643461161",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Picked this up in #19397.",
      "created_at" : "2020-06-27T18:07:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17335#issuecomment-650593797",
      "id" : 650593797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17335",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDU5Mzc5Nw==",
      "updated_at" : "2020-06-27T18:07:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650593797",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
