[
   {
      "author_association" : "MEMBER",
      "body" : "Tend to NACK. That makes it impossible to test it on regtest, which is\nmeant for testing\n\nOn Feb 19, 2018 20:11, \"kallewoof\" <notifications@github.com> wrote:\n\n> Starting a regtest node and leaving it for a bit would start spamming\n>\n> 2018-02-19 20:05:25 Potential stale tip detected, will try using extra outbound peer (last tip update: 32809 seconds ago)\n>\n> which seems unnecessary. I check if it's regtest by seeing if\n> Consensus::Params.fPowNoRetargeting is true, which is perhaps not ideal,\n> but works.\n> ------------------------------\n> You can view, comment on, or merge this pull request online at:\n>\n>   https://github.com/bitcoin/bitcoin/pull/12484\n> Commit Summary\n>\n>    - [net] Skip stale tip checks in regtest\n>\n> File Changes\n>\n>    - *M* src/net_processing.cpp\n>    <https://github.com/bitcoin/bitcoin/pull/12484/files#diff-0> (4)\n>\n> Patch Links:\n>\n>    - https://github.com/bitcoin/bitcoin/pull/12484.patch\n>    - https://github.com/bitcoin/bitcoin/pull/12484.diff\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/12484>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmvx79K6bsaI84rMZMy-jBq-dnDvAmks5tWhutgaJpZM4SLSre>\n> .\n>\n",
      "created_at" : "2018-02-20T01:51:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-366844964",
      "id" : 366844964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-20T01:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366844964",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke All tests pass, though..\r\n\r\nEdit: I see what you're saying. The spam is pretty obnoxious though.\r\n\r\nEdit 2: Is this even testable in regtest? It seems kind of tied to a chain with PoW.",
      "created_at" : "2018-02-20T01:56:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-366845663",
      "id" : 366845663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-20T01:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366845663",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "The stale tip check seems based on time, not PoW. So it could be potentially tested using mocktime on regtest.\r\n\r\nI don't think log spam while testing is a very urgent issue, but if so, my preferred solution would be to add some kind of congestion control to the message - e.g. have it logged at most once per block, or in a certain time window, instead of disabling the functionality on a per-chain basis.",
      "created_at" : "2018-02-22T15:01:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-367707793",
      "id" : 367707793,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-22T15:01:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367707793",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj @MarcoFalke I'm tempted to add a flag for whether you should check for stale tips or not, and make it default true for all but regtest. Tests could then explicitly enable it when testing the feature -- which no tests have done so far, mind you.\r\n\r\nDownside is yet another flag to the startup options for the node / the .conf file.",
      "created_at" : "2018-02-23T04:07:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-367904099",
      "id" : 367904099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-23T04:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367904099",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> which no tests have done so far, mind you.\r\n\r\nFeel free to add one :) I'd much prefer that to any amount of hacking around this feature.",
      "created_at" : "2018-02-23T11:07:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-367980110",
      "id" : 367980110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-23T11:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367980110",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj That's the thing, though. Maybe I'm lacking in imagination but I can't think of a meaningful test for this. I'll give it some thought though.",
      "created_at" : "2018-02-23T11:58:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-367990501",
      "id" : 367990501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-02-23T11:58:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367990501",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Like @MarcoFalke , I'm NACKish on just disabling this on regtest, since we want regtest behaviour to be as close to mainnet behaviour as possible. Adding a flag seems reasonable enough, although I'd prefer the defaults to be the same for main/test/regtest.",
      "created_at" : "2018-04-03T21:40:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-378408326",
      "id" : 378408326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-04-03T21:40:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378408326",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now, until a better solution has been found.",
      "created_at" : "2018-04-03T21:42:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12484#issuecomment-378408809",
      "id" : 378408809,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12484",
      "updated_at" : "2018-04-03T21:42:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378408809",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
