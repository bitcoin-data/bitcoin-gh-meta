[
   {
      "author_association" : "MEMBER",
      "body" : "@jameshilliard What's the best way to test this? I assume it will only work with very recent Clang/GCC?\r\n\r\nDid ./configure with master + https://github.com/bitcoin/bitcoin/pull/12412/commits/20879d31ef9dc7f54cd7f4ea52a417d3b337fba5 on OS X:\r\n```\r\nchecking whether C++ compiler accepts -Wstack-protector... yes\r\nchecking whether C++ compiler accepts -fstack-protector-all... yes\r\nchecking whether C++ compiler accepts -mfunction-return=thunk... no\r\nchecking whether C++ compiler accepts -mindirect-branch=thunk... no\r\nchecking whether C++ compiler accepts -mretpoline... no\r\nchecking whether C++ preprocessor accepts -D_FORTIFY_SOURCE=2... yes\r\n```",
      "created_at" : "2018-02-19T06:12:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-366597331",
      "id" : 366597331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-02-19T06:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366597331",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fanquake This is pretty much untested other than checking that the flags don't get set when not available on OS X. Yeah I think you just need a really new Clang/GCC.",
      "created_at" : "2018-02-19T08:53:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-366623988",
      "id" : 366623988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-02-19T08:53:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366623988",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not convinced that this is the right thing to do.\r\n\r\nNot only does Bitcoin core need to be compiled this way in order to be safe, the libc and c++ stdlib need to be rebuilt as well. I'd hate to take a performance it, and only be providing a false sense of security. For example, this would not be enough to protect our current gitian builds.\r\n\r\nSeems like this should really be done at the distro level. Are any distros forcing these on by default?",
      "created_at" : "2018-02-19T17:26:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-366758159",
      "id" : 366758159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-02-19T17:26:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366758159",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Seems like this should really be done at the distro level.\r\n\r\nTricky part is mitigations are needed at both levels and we intentionally avoid letting bitcoin core get included in distro package managers.\r\n\r\n> Are any distros forcing these on by default?\r\n\r\nSounds like some plan to. Maybe we should just detect if the distro has libs with mitigations and then enable only when they do at compile time.",
      "created_at" : "2018-02-19T17:36:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-366760649",
      "id" : 366760649,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-02-19T17:36:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366760649",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "AIUI Spectre style attacks let an attacker read memory already mapped in their own address space (contrast to meltdown, which is much more severe). That's why the focus w/ spectre has been on JS engines: it allows \"sandboxed\" javascript code to read in-process browser data outside of the sandbox.\r\n\r\nThat's a serious, but very particular (and unusual) use case. What kind of attack specifically do you think this would insulate Bitcoin from?",
      "created_at" : "2018-03-22T06:56:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-375198147",
      "id" : 375198147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-03-22T06:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375198147",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@eklitzke Indeed, I think that style of attacks only applies to programs that run JIT compiled untrusted code. I can't see anything in Bitcoin Core that would risk acting like that.",
      "created_at" : "2018-03-22T23:24:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-375489937",
      "id" : 375489937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-03-22T23:24:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375489937",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Going to close this for now. After discussing with @theuni, this doesn't seem to be how we'd want to tackle this, if we even do overall. Discussing can continue in #12091.",
      "created_at" : "2018-03-24T04:22:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12412#issuecomment-375845710",
      "id" : 375845710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12412",
      "updated_at" : "2018-03-24T04:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375845710",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
