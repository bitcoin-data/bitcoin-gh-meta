[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nThanks for addressing these issues quickly! :) Will test.",
      "created_at" : "2019-10-15T22:50:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-542437438",
      "id" : 542437438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjQzNzQzOA==",
      "updated_at" : "2019-10-15T22:51:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542437438",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "With this patch applied the PSBT fuzzer appears to be unable to trigger the problematic conditions listed in the issue #17149.\r\n\r\nHowever, I noticed that using the following 202 byte input:\r\n\r\n```\r\n70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\r\n```\r\n\r\nThe following UBSan condition is triggered:\r\n\r\n```\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7fff2c5dc562 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7fff2c5dc562: note: pointer points here\r\n ff ff  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^\r\n    #0 0x56183e4f724f in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) src/./prevector.h:452:9\r\n    #1 0x56183e4ec6fa in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) src/./prevector.h:272:9\r\n    #2 0x56183e4ec6fa in CScript::operator=(CScript&&) src/./script/script.h:390\r\n    #3 0x56183f407fa9 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) src/script/sign.cpp:240:23\r\n    #4 0x56183f30c8a3 in SignPSBTInput(SigningProvider const&, PartiallySignedTransaction&, int, int, SignatureData*, bool) src/psbt.cpp:285:24\r\n    #5 0x56183e7eb0e8 in AnalyzePSBT(PartiallySignedTransaction) src/node/psbt.cpp:54:29\r\n    #6 0x56183e393014 in test_one_input(std::vector<unsigned char, std::allocator<unsigned char> > const&) src/test/fuzz/psbt.cpp:28:35\r\nâ¦\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior prevector.h:452:19 in\r\n```\r\n\r\nMight be worth tackling that one as well?",
      "created_at" : "2019-10-17T11:06:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543123631",
      "id" : 543123631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzEyMzYzMQ==",
      "updated_at" : "2019-10-17T11:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543123631",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What do I need to run in order to get the same error?",
      "created_at" : "2019-10-17T17:55:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543290034",
      "id" : 543290034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5MDAzNA==",
      "updated_at" : "2019-10-17T17:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543290034",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Something like this:\r\n\r\n```\r\n#check out this branch\r\n./configure --disable-ccache --enable-fuzz --with-sanitizers=fuzzer,address,undefined CC=clang CXX=clang++\r\nmake -j 9\r\nexport LSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/lsan\"\r\nexport TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan\"\r\nexport UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1\"\r\n#run this fuzzer with the seed\r\n./src/test/fuzz/this_fuzzer -runs=1 ./the_input\r\n",
      "created_at" : "2019-10-17T18:06:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543294418",
      "id" : 543294418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5NDQxOA==",
      "updated_at" : "2019-10-17T18:06:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543294418",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure how to translate the base16 seed into a binary seed with the command line, though",
      "created_at" : "2019-10-17T18:07:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543294629",
      "id" : 543294629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5NDYyOQ==",
      "updated_at" : "2019-10-17T18:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543294629",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\n```\r\n$ xxd -r -p > seed <<< \"70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\"\r\n$ head -c4 seed\r\npsbt\r\n```\r\n\r\n:)",
      "created_at" : "2019-10-17T18:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543302776",
      "id" : 543302776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzMwMjc3Ng==",
      "updated_at" : "2019-10-17T18:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543302776",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n```\r\n$ CC=clang CXX=clang++ ./configure --enable-fuzz \\\r\n      --with-sanitizers=address,fuzzer,undefined\r\n$ make\r\n$ mkdir psbt-seeds/\r\n$ xxd -r -p > psbt-seeds/seed <<< \"70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\"\r\n$ UBSAN_OPTIONS=\"print_stacktrace=1:halt_on_error=1\" src/test/fuzz/psbt psbt-seeds/\r\nâ¦\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7fff2c5dc562 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7fff2c5dc562: note: pointer points here\r\n ff ff  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^\r\n    #0 0x56183e4f724f in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) src/./prevector.h:452:9\r\n    #1 0x56183e4ec6fa in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) src/./prevector.h:272:9\r\n    #2 0x56183e4ec6fa in CScript::operator=(CScript&&) src/./script/script.h:390\r\n    #3 0x56183f407fa9 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) src/script/sign.cpp:240:23\r\n    #4 0x56183f30c8a3 in SignPSBTInput(SigningProvider const&, PartiallySignedTransaction&, int, int, SignatureData*, bool) src/psbt.cpp:285:24\r\n    #5 0x56183e7eb0e8 in AnalyzePSBT(PartiallySignedTransaction) src/node/psbt.cpp:54:29\r\n    #6 0x56183e393014 in test_one_input(std::vector<unsigned char, std::allocator<unsigned char> > const&) src/test/fuzz/psbt.cpp:28:35\r\nâ¦\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior prevector.h:452:19 in\r\n```\r\n\r\n:)",
      "created_at" : "2019-10-17T18:39:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543308076",
      "id" : 543308076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzMwODA3Ng==",
      "updated_at" : "2019-10-17T18:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543308076",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not really sure why that happens.\r\n\r\n```\r\ndiff --git a/src/script/sign.cpp b/src/script/sign.cpp\r\nindex 0ed92e8d5b..be24d002ad 100644\r\n--- a/src/script/sign.cpp\r\n+++ b/src/script/sign.cpp\r\n@@ -237,7 +237,11 @@ bool ProduceSignature(const SigningProvider& provider, const BaseSignatureCreato\r\n     if (P2SH) {\r\n         result.push_back(std::vector<unsigned char>(subscript.begin(), subscript.end()));\r\n     }\r\n-    sigdata.scriptSig = PushAll(result);\r\n+    if (result.size() == 0) {\r\n+        sigdata.scriptSig.clear();\r\n+    } else {\r\n+        sigdata.scriptSig = PushAll(result);\r\n+    }\r\n \r\n     // Test solution\r\n     sigdata.complete = solved && VerifyScript(sigdata.scriptSig, fromPubKey, &sigdata.scriptWitness, STANDARD_SCRIPT_VERIFY_FLAGS, creator.Checker());\r\n```\r\n\r\nfixes the problem, but it's more signing code than not. ISTM we should see this elsewhere too but it doesn't seem like it.",
      "created_at" : "2019-10-18T00:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543416770",
      "id" : 543416770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzQxNjc3MA==",
      "updated_at" : "2019-10-18T00:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543416770",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n> ISTM we should see this elsewhere too but it doesn't seem like it.\r\n\r\nIsn't the difference that the *move* assignment operator is used in this case whereas the other non-warning cases you're referring to use the *copy* assignment operator?\r\n\r\nIf I'm correct then these two should trigger the UBSan warning:\r\n\r\n```\r\nsigdata.scriptSig = PushAll(result);\r\n```\r\n\r\n```\r\nCString script_sig = PushAll(result);\r\nsigdata.scriptSig = std::move(script_sig);\r\n```\r\n\r\nWhereas this won't trigger the UBSan warning:\r\n\r\n```\r\nCString script_sig = PushAll(result);\r\nsigdata.scriptSig = script_sig;\r\n```\r\n\r\nCould that be the case?",
      "created_at" : "2019-10-19T15:29:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544160293",
      "id" : 544160293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE2MDI5Mw==",
      "updated_at" : "2019-10-19T15:29:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544160293",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Isn't the difference that the _move_ assignment operator is used in this case whereas the other non-warning cases you're referring to use the _copy_ assignment operator?\r\n\r\nWhat I meant was that we should see this same error for any fuzzers that hit ProduceSignature. But I think we just don't have any fuzzers that reach ProduceSignature.",
      "created_at" : "2019-10-19T16:31:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544168946",
      "id" : 544168946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE2ODk0Ng==",
      "updated_at" : "2019-10-19T16:31:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544168946",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've added a commit which adds a copy constructor and copy `operator=` to `CScript` which fixes the UBSan warning.",
      "created_at" : "2019-10-19T16:51:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544171404",
      "id" : 544171404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE3MTQwNA==",
      "updated_at" : "2019-10-19T16:51:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544171404",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 Good! Then we should be able to get rid of this UBSan suppression? :)\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L2",
      "created_at" : "2019-10-20T19:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544281583",
      "id" : 544281583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDI4MTU4Mw==",
      "updated_at" : "2019-10-20T19:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544281583",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Judging from my testing we can get rid of both these UBSan suppressions as part of this PR:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L1-L2\r\n\r\nGreat!",
      "created_at" : "2019-10-22T15:10:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-545010103",
      "id" : 545010103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTAxMDEwMw==",
      "updated_at" : "2019-10-22T15:10:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545010103",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339335339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339335339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might want to add a comment in the code describing why this explicit copy constructor (which seems to be redundant) was added, otherwise it might be removed again with the next 'clean up warnings' PR.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-10-27T10:24:41Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339335339",
      "id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzOTMzNTMzOQ==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 307565031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339335339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339340644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339340644"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed! That is also why it is important also to remove the UBSan suppressions as part of this PR: to catch non-refactoring nature of such a mistaken \"clean up\" in a future PR  :)\r\n\r\nThese needs to go:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L1-L2",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-10-27T12:40:32Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339340644",
      "id" : 339340644,
      "in_reply_to_id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzOTM0MDY0NA==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 307570445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339340644",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 Can you remove the UBSan suppressions? That will allow Travis to confirm that you've solved the alignment issue. Then this PR should be ready to go AFAICT.\r\n\r\n~~@fanquake Would you mind adding waiting for author-tag? :)~~",
      "created_at" : "2019-11-04T09:20:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549272331",
      "id" : 549272331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTI3MjMzMQ==",
      "updated_at" : "2019-11-04T20:14:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549272331",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r341984253"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341984253"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm afraid this will trigger a sign-compare warning when compiling with Clang due to LHS being `int` and the RHS being `unsigned long` (`size_t`).",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T10:33:46Z",
      "diff_hunk" : "@@ -69,6 +69,9 @@ bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) con\n     PSBTInput input = inputs[input_index];\n     int prevout_index = tx->vin[input_index].prevout.n;\n     if (input.non_witness_utxo) {\n+        if (prevout_index >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r341984253",
      "id" : 341984253,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTk4NDI1Mw==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/psbt.cpp",
      "position" : 7,
      "pull_request_review_id" : 310982956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341984253",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a comment and removed the suppressions.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T20:03:21Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244304",
      "id" : 342244304,
      "in_reply_to_id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI0NDMwNA==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 311324695,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244304",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244341"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T20:03:26Z",
      "diff_hunk" : "@@ -69,6 +69,9 @@ bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) con\n     PSBTInput input = inputs[input_index];\n     int prevout_index = tx->vin[input_index].prevout.n;\n     if (input.non_witness_utxo) {\n+        if (prevout_index >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244341",
      "id" : 342244341,
      "in_reply_to_id" : 341984253,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI0NDM0MQ==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/psbt.cpp",
      "position" : 7,
      "pull_request_review_id" : 311324738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244341",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK db30e5bd6fb51913a4ce2177097be3ebcabab146 assuming Travis is happy too -- diff looks correct",
      "created_at" : "2019-11-04T20:19:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549529326",
      "id" : 549529326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTUyOTMyNg==",
      "updated_at" : "2019-11-04T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549529326",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342304795"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342304795"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you sure this is correct? This will reset the intermediate result to -1, and then accumulate all remaining values.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T22:33:55Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342304795",
      "id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwNDc5NQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 32,
      "pull_request_review_id" : 311403300,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342304795",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342307700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342307700"
         }
      },
      "author_association" : "MEMBER",
      "body" : "-1 will fail MoneyRange so later values that go through this will also always return -1.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T22:42:29Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342307700",
      "id" : 342307700,
      "in_reply_to_id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwNzcwMA==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 32,
      "pull_request_review_id" : 311407123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342307700",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342308366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342308366"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Correct. Thx.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-04T22:44:35Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342308366",
      "id" : 342308366,
      "in_reply_to_id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwODM2Ng==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 32,
      "pull_request_review_id" : 311407978,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342308366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17211](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17211.html) (Allow fundrawtransaction and walletcreatefundedpsbt to take external inputs by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-05T00:16:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549606221",
      "id" : 549606221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTYwNjIyMQ==",
      "updated_at" : "2019-12-11T12:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549606221",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r346997910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346997910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "could explain how this would otherwise be undefined behavior and why this can't be fixed in `prevector.h`?",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-15T20:26:22Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r346997910",
      "id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Njk5NzkxMA==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 317851807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346997910",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347011705"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347011705"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure why it would be undefined behavior,  but UBSan was triggering on it. I think prevector already has a copy constructor?",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-15T21:08:19Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347011705",
      "id" : 347011705,
      "in_reply_to_id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzAxMTcwNQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 317870083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347011705",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347520135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347520135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In that case I'd prefer to leave the third commit for a separate pull request. Changing those parts of the code without understanding why for the sole reason to please a sanitizer seems worrisome ",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-18T17:47:36Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347520135",
      "id" : 347520135,
      "in_reply_to_id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzUyMDEzNQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 318514434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347520135",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347538497"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347538497"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've dropped the commit.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-11-18T18:27:15Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347538497",
      "id" : 347538497,
      "in_reply_to_id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzUzODQ5Nw==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_review_id" : 318537381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347538497",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-12-10T18:53:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564178768",
      "id" : 564178768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDE3ODc2OA==",
      "updated_at" : "2019-12-10T18:53:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564178768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK a2800d704870cf120127a98769ed97b06c35042e -- diff looks correct",
      "created_at" : "2019-12-10T22:14:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564283882",
      "id" : 564283882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDI4Mzg4Mg==",
      "updated_at" : "2019-12-10T22:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564283882",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356328921"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356328921"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e769f25031a63c378f2efeb957b90a72a8524a5e\r\n\r\nAlso use `!MoneyRange(out_amt)`?",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-10T23:13:05Z",
      "diff_hunk" : "@@ -85,9 +90,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }\n                 return a += b.nValue;\n             }\n         );\n+        if (out_amt == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356328921",
      "id" : 356328921,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjMyODkyMQ==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 29,
      "path" : "src/node/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 330209138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356328921",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356329124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356329124"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e769f25031a63c378f2efeb957b90a72a8524a5e\r\n\r\nnit, `{` in new line? (if you decide to keep this, see next comment)",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-10T23:13:44Z",
      "diff_hunk" : "@@ -41,6 +41,14 @@ struct PSBTAnalysis {\n         next = PSBTRole::CREATOR;\n         error = err_msg;\n     }\n+\n+    void Reset() {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356329124",
      "id" : 356329124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjMyOTEyNA==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 5,
      "path" : "src/node/psbt.h",
      "position" : null,
      "pull_request_review_id" : 330209138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356329124",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356330520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356330520"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e769f25031a63c378f2efeb957b90a72a8524a5e\r\n\r\nWhy not `return {};` instead of `Reset`? Same below, and then drop `PSBTAnalysis::Reset()`.  ",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-10T23:18:12Z",
      "diff_hunk" : "@@ -31,6 +32,10 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(in_amt) || !MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {\n+                result.Reset();\n+                return result;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356330520",
      "id" : 356330520,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjMzMDUyMA==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 14,
      "path" : "src/node/psbt.cpp",
      "position" : 14,
      "pull_request_review_id" : 330209138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356330520",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356332550"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356332550"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e769f25031a63c378f2efeb957b90a72a8524a5e\r\n\r\nUnnecessary check `MoneyRange(output_value)` - starts with zero and next value is already checked. Same with `total_in`.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-10T23:24:40Z",
      "diff_hunk" : "@@ -1203,7 +1214,12 @@ UniValue decodepsbt(const JSONRPCRequest& request)\n         outputs.push_back(out);\n \n         // Fee calculation\n-        output_value += psbtx.tx->vout[i].nValue;\n+        if (MoneyRange(output_value) && MoneyRange(psbtx.tx->vout[i].nValue) && MoneyRange(output_value + psbtx.tx->vout[i].nValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356332550",
      "id" : 356332550,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjMzMjU1MA==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 34,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 330209138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356332550",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356349820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356349820"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Drop first check, same below.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T00:28:18Z",
      "diff_hunk" : "@@ -31,6 +32,9 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(in_amt) || !MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356349820",
      "id" : 356349820,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM0OTgyMA==",
      "original_commit_id" : "fc02ce290dba4a2da8d890901ce5ad5a9ba54051",
      "original_position" : 12,
      "path" : "src/node/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 330234208,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356349820",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T03:25:22Z",
      "diff_hunk" : "@@ -85,9 +90,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }\n                 return a += b.nValue;\n             }\n         );\n+        if (out_amt == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387723",
      "id" : 356387723,
      "in_reply_to_id" : 356328921,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM4NzcyMw==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 29,
      "path" : "src/node/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 330279702,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:25:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed Reset",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T03:25:28Z",
      "diff_hunk" : "@@ -41,6 +41,14 @@ struct PSBTAnalysis {\n         next = PSBTRole::CREATOR;\n         error = err_msg;\n     }\n+\n+    void Reset() {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387739",
      "id" : 356387739,
      "in_reply_to_id" : 356329124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM4NzczOQ==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 5,
      "path" : "src/node/psbt.h",
      "position" : null,
      "pull_request_review_id" : 330279727,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:25:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387739",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387757"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed Reset",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T03:25:33Z",
      "diff_hunk" : "@@ -31,6 +32,10 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(in_amt) || !MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {\n+                result.Reset();\n+                return result;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387757",
      "id" : 356387757,
      "in_reply_to_id" : 356330520,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM4Nzc1Nw==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 14,
      "path" : "src/node/psbt.cpp",
      "position" : 14,
      "pull_request_review_id" : 330279747,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:25:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387757",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387778"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387778"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T03:25:39Z",
      "diff_hunk" : "@@ -1203,7 +1214,12 @@ UniValue decodepsbt(const JSONRPCRequest& request)\n         outputs.push_back(out);\n \n         // Fee calculation\n-        output_value += psbtx.tx->vout[i].nValue;\n+        if (MoneyRange(output_value) && MoneyRange(psbtx.tx->vout[i].nValue) && MoneyRange(output_value + psbtx.tx->vout[i].nValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387778",
      "id" : 356387778,
      "in_reply_to_id" : 356332550,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM4Nzc3OA==",
      "original_commit_id" : "e769f25031a63c378f2efeb957b90a72a8524a5e",
      "original_position" : 34,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 330279776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:25:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387778",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387895"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done, but the check below is necessary. It's how the accumulator is guaranteed to return -1.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T03:26:07Z",
      "diff_hunk" : "@@ -31,6 +32,9 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(in_amt) || !MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356387895",
      "id" : 356387895,
      "in_reply_to_id" : 356349820,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjM4Nzg5NQ==",
      "original_commit_id" : "fc02ce290dba4a2da8d890901ce5ad5a9ba54051",
      "original_position" : 12,
      "path" : "src/node/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 330279909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T03:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356387895",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've added some more to this.\r\n\r\nI've added a couple of tests. In doing so, I also found a few additional places that we needed checks.\r\n\r\nAdditionally, I've replaced the `Reset` calls with the new `SetInvalid` so that we can return proper errors.",
      "created_at" : "2019-12-11T03:27:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564363345",
      "id" : 564363345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDM2MzM0NQ==",
      "updated_at" : "2019-12-11T03:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564363345",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531 -- diff looks correct",
      "created_at" : "2019-12-11T07:20:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564413228",
      "id" : 564413228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDQxMzIyOA==",
      "updated_at" : "2019-12-11T07:20:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564413228",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356456587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356456587"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> but the check below is necessary.\r\n\r\nOh yeah sorry.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T08:28:17Z",
      "diff_hunk" : "@@ -31,6 +32,9 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(in_amt) || !MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356456587",
      "id" : 356456587,
      "in_reply_to_id" : 356349820,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjQ1NjU4Nw==",
      "original_commit_id" : "fc02ce290dba4a2da8d890901ce5ad5a9ba54051",
      "original_position" : 12,
      "path" : "src/node/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 330364343,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T08:28:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356456587",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356551562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356551562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `inputs.at(input_index)`",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T11:44:07Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356551562",
      "id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjU1MTU2Mg==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 330480711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T11:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356551562",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356553132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356553132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `vin.at(i)` (also in the `FinalizeAndExtractPSBT` loops)",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T11:48:01Z",
      "diff_hunk" : "@@ -31,9 +32,17 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {\n+                result.SetInvalid(strprintf(\"PSBT is not valid. Input %u has invalid value\", i));\n+                return result;\n+            }\n             in_amt += utxo.nValue;\n             input_analysis.has_utxo = true;\n         } else {\n+            if (input.non_witness_utxo && psbtx.tx->vin[i].prevout.n >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356553132",
      "id" : 356553132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NjU1MzEzMg==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 19,
      "path" : "src/node/psbt.cpp",
      "position" : 19,
      "pull_request_review_id" : 330480711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T11:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356553132",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356740090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356740090"
         }
      },
      "author_association" : "MEMBER",
      "body" : "meh. don't feel like changing",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T17:41:57Z",
      "diff_hunk" : "@@ -31,9 +32,17 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Check for a UTXO\n         CTxOut utxo;\n         if (psbtx.GetInputUTXO(utxo, i)) {\n+            if (!MoneyRange(utxo.nValue) || !MoneyRange(in_amt + utxo.nValue)) {\n+                result.SetInvalid(strprintf(\"PSBT is not valid. Input %u has invalid value\", i));\n+                return result;\n+            }\n             in_amt += utxo.nValue;\n             input_analysis.has_utxo = true;\n         } else {\n+            if (input.non_witness_utxo && psbtx.tx->vin[i].prevout.n >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356740090",
      "id" : 356740090,
      "in_reply_to_id" : 356553132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Njc0MDA5MA==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 19,
      "path" : "src/node/psbt.cpp",
      "position" : 19,
      "pull_request_review_id" : 330722490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T17:41:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356740090",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356740160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356740160"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unrelated style changes are unrelated",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-11T17:42:06Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r356740160",
      "id" : 356740160,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Njc0MDE2MA==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 330722591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-11T17:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/356740160",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors Do you ACK the changes also with the nits unaddressed? If so please consider ACK:ing - it would be good to get this reviewed (and merged).\r\n\r\nIt bothers me that an RPC call with a malformed PSBT can bring down Bitcoin Core :)",
      "created_at" : "2019-12-11T18:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564670060",
      "id" : 564670060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDY3MDA2MA==",
      "updated_at" : "2019-12-11T18:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564670060",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r357023841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357023841"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's not a style change, `at` checks these array indexes \"are within bounds\" and throws an exception otherwise. There's a bunch of places in this code where we don't use iterators and assume that two arrays are the same size.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-12T08:57:40Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r357023841",
      "id" : 357023841,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1NzAyMzg0MQ==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 331073638,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-12T08:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357023841",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift I haven't reviewed the rest of the code yet. My suggestions for improvements should not hold back merging. ",
      "created_at" : "2019-12-12T08:58:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-564912684",
      "id" : 564912684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NDkxMjY4NA==",
      "updated_at" : "2019-12-12T08:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/564912684",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r357879394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357879394"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Throwing an exception here would actually be rude, yes? So it would be better to establish invariants that ensure we are in-bounds, or else add a bounds check ourselves otherwise?",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-14T00:24:10Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r357879394",
      "id" : 357879394,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Nzg3OTM5NA==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 332177363,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-14T00:24:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357879394",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@achow101 what would you say to the alternate approach of having something like an all-in-one-place PSBT sanity checker? Could be added to IsSane() (which I would prefer), or if you think it might be too heavyweight (but I don't think so), a new method.\r\n\r\nThen we can immediately check every PSBT at the point of parsing, and not have to worry thereafter.\r\n\r\nIf you're amenable, I would be happy to make a candidate CL.\r\n\r\n(If you're not amenable, then utACK to this one. But I'm concerned that the piecemeal approach will both clutter the code with checks that are redundant across different methods, AND still miss stuff that we'll have to add more checks for later.)",
      "created_at" : "2019-12-14T00:34:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-565660251",
      "id" : 565660251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NTY2MDI1MQ==",
      "updated_at" : "2019-12-14T00:34:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565660251",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gwillen I don't think that we should have these checks at parse time. It's useful to have `decodepsbt` be able to decode psbts that are correctly formatted but logically incorrect (as we are doing here). Doing these checks at parse time would mean that `decodepsbt` would fail.",
      "created_at" : "2019-12-16T15:37:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-566113328",
      "id" : 566113328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NjExMzMyOA==",
      "updated_at" : "2019-12-16T15:37:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566113328",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That makes sense. What do you think about having two separate checks -- a basic validity check at parse time, and a more thorough check that can be run before doing anything with the PSBT (other than displaying it as JSON)?\r\n\r\nI think it's probably a hazard to allow PSBTs to hang around which have inconsistencies that can lead to e.g. reading off the end of vectors, and count on individual use code paths to check this every time. Even if we fix this specific case, I feel like it's going to hit us again in the future.",
      "created_at" : "2019-12-16T18:24:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-566181903",
      "id" : 566181903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NjE4MTkwMw==",
      "updated_at" : "2019-12-16T18:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566181903",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it makes to have a general consistency check for other commands. But I think we should still do error checking like this as a belt-and-suspenders. We could add the general consistency check in another pr.",
      "created_at" : "2019-12-16T23:15:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-566291980",
      "id" : 566291980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NjI5MTk4MA==",
      "updated_at" : "2019-12-16T23:15:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566291980",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358528829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358528829"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> establish invariants that ensure we are in-bounds\r\n\r\nAgree, I think it makes no sense to add bound checks here.\r\n\r\nIn any case, here or followup this could use\r\n```\r\nconst_reference operator[]( size_type pos ) const;\r\n```\r\nsince `PSBTInput` is not that trivial.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-16T23:58:09Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358528829",
      "id" : 358528829,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODUyODgyOQ==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 332945972,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-16T23:58:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358528829",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358551968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358551968"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That would just mean changing \"PSBTInput input\" to \"const PSBTInput& input\"?",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-17T01:09:29Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358551968",
      "id" : 358551968,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODU1MTk2OA==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 332973307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-17T01:09:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358551968",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358556333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358556333"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes.",
      "commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "created_at" : "2019-12-17T01:27:29Z",
      "diff_hunk" : "@@ -66,8 +66,11 @@ bool PartiallySignedTransaction::AddOutput(const CTxOut& txout, const PSBTOutput\n bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) const\n {\n     PSBTInput input = inputs[input_index];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r358556333",
      "id" : 358556333,
      "in_reply_to_id" : 356551562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODU1NjMzMw==",
      "original_commit_id" : "2dd91b86cd7ef09fa3ae280bfe99db8cfb6fe531",
      "original_position" : 3,
      "path" : "src/psbt.cpp",
      "position" : 3,
      "pull_request_review_id" : 332978165,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-12-17T01:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358556333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> However tests still pass if the new checks `... >= input.non_witness_utxo->vout.size()` are removed.\r\n\r\nReally? It fails for me. I removed the second commit and kept just the test from it. That test fails.",
      "created_at" : "2019-12-17T15:50:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-566601136",
      "id" : 566601136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NjYwMTEzNg==",
      "updated_at" : "2019-12-17T15:50:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566601136",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Try running the test with\r\n```diff\r\n--- a/src/wallet/psbtwallet.cpp\r\n+++ b/src/wallet/psbtwallet.cpp\r\n@@ -44,9 +44,6 @@ TransactionError FillPSBT(const CWallet* pwallet, PartiallySignedTransaction& ps\r\n         if (!input.witness_utxo.IsNull()) {\r\n             script = input.witness_utxo.scriptPubKey;\r\n         } else if (input.non_witness_utxo) {\r\n-            if (txin.prevout.n >= input.non_witness_utxo->vout.size()) {\r\n-                return TransactionError::MISSING_INPUTS;\r\n-            }\r\n             script = input.non_witness_utxo->vout[txin.prevout.n].scriptPubKey;\r\n         } else {\r\n             // There's no UTXO so we can just skip this now\r\n```\r\nAnd I think I've tried with another.",
      "created_at" : "2019-12-18T00:33:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-566812394",
      "id" : 566812394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NjgxMjM5NA==",
      "updated_at" : "2019-12-18T00:33:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566812394",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've added test cases for the `SignPSBTInput` and `FillPSBT` checks. Since the `SignPSBTInput` check can't be reached via RPC (it gets caught by `FillPSBT` or `AnalyzePSBT`), I added the test case to the `psbt_updater_test` unit test.",
      "created_at" : "2020-01-06T17:58:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-571242018",
      "id" : 571242018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MTI0MjAxOA==",
      "updated_at" : "2020-01-06T17:58:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571242018",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK deaa6dd144f5650b385658a0c4f9a014aff8dde2 -- only change since last ACK was the addition of tests\r\n\r\nWould be great to have this merged - this PR greatly improves the robustness of the PSBT code :)",
      "created_at" : "2020-01-06T21:33:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-571324181",
      "id" : 571324181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MTMyNDE4MQ==",
      "updated_at" : "2020-01-06T21:33:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571324181",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tested ACK deaa6dd, would also like to see this merged!",
      "created_at" : "2020-01-27T21:36:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-578964902",
      "id" : 578964902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODk2NDkwMg==",
      "updated_at" : "2020-01-27T21:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578964902",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I really hoped this fix would make it to 0.19.1 :\\\r\n\r\nIt doesn't feel good to ship with a known heap use-after-free bug (see #17149) which is reachable via RPC. \r\n\r\nNow that we that RPC whitelisting is merged (#12763) we no longer have the luxury of assuming that all RPC access is from fully trusted RPC consumers.\r\n\r\nThus the previous \"the RPC consumer is also the node operator\" assumption that may have allowed us to take RPC flaws somewhat lightly in the past no longer holds in all cases (it may still hold in the case of obviously dangerous RPC functions such as `stop` which are unlikely to be whitelisted) :)",
      "created_at" : "2020-01-27T23:29:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579005896",
      "id" : 579005896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTAwNTg5Ng==",
      "updated_at" : "2020-01-27T23:29:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579005896",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO we should keep recommending trusted clients regardless of their whitelist. I hope RPC whitelisting doesn't give the impression that now the RPC interface can be made public..",
      "created_at" : "2020-01-28T08:15:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579129752",
      "id" : 579129752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTEyOTc1Mg==",
      "updated_at" : "2020-01-28T08:15:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579129752",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag I agree and in an ideal world all users would read and follow our recommendations :)\r\n\r\nUnfortunately a non-negligible subset of our users still expose their RPC ports publicly as can be verified empirically by running an Internet-wide TCP port scan using say [`masscan`](https://github.com/robertdavidgraham/masscan) (impressive software: an Internet-wide single-port scan can be as quick as six minutes given a good connection/NIC!) or similar.\r\n\r\nOne approach to this could be: _\"OK, those users screwed up badly. They didn't read our recommendations. Their loss. Not our problem as developers.\"_\r\n\r\nAnother could be: _\"Oh gosh, that's unfortunate! Let's try to mitigate the effect of that by trying to make the RPC interface reasonably robust and secure also in the presence user screwups.\"_\r\n\r\nThe former approach is certainly more convenient from a _developer_ perspective, but I don't think that approach is in the best interest of our _users_ :)",
      "created_at" : "2020-01-28T17:28:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579364107",
      "id" : 579364107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTM2NDEwNw==",
      "updated_at" : "2020-01-28T17:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579364107",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "These are not in conflict. We should obviously fix bugs in RPC, even if they only affect careless users (by whatever definition). At the same time, we still shouldn't recommend exposing RPC to the public, because it was not designed for that.",
      "created_at" : "2020-01-28T17:35:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579367337",
      "id" : 579367337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTM2NzMzNw==",
      "updated_at" : "2020-01-28T17:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579367337",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> We should obviously fix bugs in RPC, even if they only affect careless users (by whatever definition).\r\n\r\nAgreed.\r\n\r\nLet's get rid of the heap use-after-free bug this PR fixes :)\r\n\r\nPlease review :)\r\n\r\n> At the same time, we still shouldn't recommend exposing RPC to the public, [â¦]\r\n\r\nAgreed.\r\n",
      "created_at" : "2020-01-28T18:26:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579388242",
      "id" : 579388242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTM4ODI0Mg==",
      "updated_at" : "2020-01-28T18:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579388242",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very glad to see this one merged!\r\n\r\nWe have another PSBT related issued to resolve too: the misaligned pointer use in `ProduceSignature(â¦)` (via `prevector`). While not PSBT specific the function `ProduceSignature(â¦)` is reachable from `AnalyzePSBT` (via `SignPSBTInput`):\r\n\r\n```\r\nprevector.h:453:19: runtime error: reference binding to misaligned address 0x7f63f89a4022 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^ \r\n    #0 0x5652760202ce in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) src/./prevector.h:453:9\r\n    #1 0x56527601ff0e in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) src/./prevector.h:273:9\r\n    #2 0x56527601ff0e in CScript::operator=(CScript&&) src/./script/script.h:390:7\r\n    #3 0x565276094236 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) src/script/sign.cpp:240:23\r\n    #4 0x565276042ef8 in SignPSBTInput(SigningProvider const&, PartiallySignedTransaction&, int, int, SignatureData*, bool) src/psbt.cpp:285:24\r\n    #5 0x565275fdad45 in AnalyzePSBT(PartiallySignedTransaction) src/node/psbt.cpp:64:29\r\n```\r\n\r\nThus anyone interested in PSBT robustness might want to review #17708 too :)",
      "created_at" : "2020-01-29T21:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579963266",
      "id" : 579963266,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTk2MzI2Ng==",
      "updated_at" : "2020-01-29T21:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579963266",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
