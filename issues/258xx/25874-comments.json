[
   {
      "author_association" : "MEMBER",
      "body" : "cc @vasild @jonatack ",
      "created_at" : "2022-08-19T15:21:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220801189",
      "id" : 1220801189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Iw_Kl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220801189/reactions"
      },
      "updated_at" : "2022-08-19T15:21:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220801189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "created_at" : "2022-08-19T15:36:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220814849",
      "id" : 1220814849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585IxCgB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220814849/reactions"
      },
      "updated_at" : "2022-08-19T15:36:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220814849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Support for CJDNS was merged in November 2021 and released in Bitcoin Core v23 (the most recent release), and I don't recall any (expected) changes to our CJDNS support since the v23 release. \r\n\r\n`BIP155 CJDNS address with length <x> (should be <y>)` is an error you would see if your node deserializes an invalid CJDNS address from a peer.\r\n\r\nHowever, `Invalid or corrupt peers.dat (<reason>)` would be invoked at bitcoind startup when loading the addresses from peers.dat, not at shutdown.\r\n\r\nI run a node for testing purposes that usually serves all our networks (clearnet, tor, i2p, and cjdns) and always has a few CJDNS peer connections but haven't yet encountered this error in the wild.\r\n\r\n- I presume you saw this on mainnet? Apart from this, were you seeing valid connections with CJDNS peers? (you can check while your node is running using `bitcoin-cli -netinfo 4` or  `bitcoin-cli getpeerinfo`).\r\n\r\n- Was it with the v23 release (binary or built from source?), or current master, or? Which platform/OS?\r\n\r\n- Which version of CJDNS are you running (`cjdns --version`)?\r\n",
      "created_at" : "2022-08-19T17:41:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220935183",
      "id" : 1220935183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Ixf4P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220935183/reactions"
      },
      "updated_at" : "2022-08-19T17:43:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220935183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> However, Invalid or corrupt peers.dat (<reason>) would be invoked at bitcoind startup when loading the addresses from peers.dat, not at shutdown.\r\n\r\nThat's probably what happened here, the shutdown was caused by an invalid peers.dat at startup, resulting in an early shutdown - it's just that if multiple log messages have the exact same timestamp (\"2022-08-18T17:27:38Z\"), the order can be mixed up.",
      "created_at" : "2022-08-19T18:04:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220961313",
      "id" : 1220961313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585IxmQh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220961313/reactions"
      },
      "updated_at" : "2022-08-19T18:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220961313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> the order can be mixed up\r\n\r\nCan you add a reference to your claim? Locally I get the right order:\r\n\r\n```\r\n2022-08-19T18:25:43Z init message: Loading P2P addressesâ¦\r\n2022-08-19T18:25:43Z Error: Invalid or corrupt peers.dat ([...]\r\n2022-08-19T18:25:43Z Shutdown: In progress...\r\n2022-08-19T18:25:43Z scheduler thread exit\r\n2022-08-19T18:25:43Z Shutdown: done\r\n",
      "created_at" : "2022-08-19T18:13:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220967993",
      "id" : 1220967993,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Ixn45",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220967993/reactions"
      },
      "updated_at" : "2022-08-19T18:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220967993",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you add a reference to your claim? \r\n\r\nI'm pretty sure I encountered this phenomenon on rare occasions in the past when looking at logs, but I don't have any reference unfortunately, so this may also be bad memory/an oversight. In your example, there are two different timestamps (2022-08-19T18:11:32Z and 2022-08-19T18:11:43Z).",
      "created_at" : "2022-08-19T18:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220975587",
      "id" : 1220975587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Ixpvj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220975587/reactions"
      },
      "updated_at" : "2022-08-19T18:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220975587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hm, it shouldn't be possible for a peer to corrupt the peers.dat by sending us an invalid address (which would be a bug). Maybe a disk corruption error or the node didn't shutdown properly?",
      "created_at" : "2022-08-19T18:30:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220980434",
      "id" : 1220980434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Ixq7S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220980434/reactions"
      },
      "updated_at" : "2022-08-19T18:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220980434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> there are two different timestamps \r\n\r\nThanks, edited.\r\n\r\nFor reference, logging has a lock, which is held until the timestamped log message is fully written and flushed. See https://github.com/bitcoin/bitcoin/blob/6b56873b41974ced7aad87a4b38abe360c34eed3/src/logging.cpp#L371\r\n\r\nObviously if this may no longer hold if the logs are post-processed outside of vanilla Bitcoin Core.",
      "created_at" : "2022-08-19T18:31:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1220981727",
      "id" : 1220981727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585IxrPf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220981727/reactions"
      },
      "updated_at" : "2022-08-19T18:31:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220981727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now due to lack of details. Can be reopened once they are there.",
      "created_at" : "2022-08-20T06:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25874#issuecomment-1221245020",
      "id" : 1221245020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25874",
      "node_id" : "IC_kwDOABII585Iyrhc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1221245020/reactions"
      },
      "updated_at" : "2022-08-20T06:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1221245020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
