[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1437992443) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24123](https://github.com/bitcoin/bitcoin/pull/24123) (build: Pointer Authentication and Branch Target Identification for aarch64 Linux (Guix) by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-02-17T12:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434558374",
      "id" : 1434558374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585VgZ-m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434558374/reactions"
      },
      "updated_at" : "2023-02-21T07:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434558374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Changed the approach here, from using libevents own hardening option (might send some fixes upstream), and a patch, to just using `FORTIFY_SOURCE` directly. That gets as what we want at the moment, without other potential side effects.",
      "created_at" : "2023-02-17T14:33:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434731916",
      "id" : 1434731916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585VhEWM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434731916/reactions"
      },
      "updated_at" : "2023-02-17T14:33:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434731916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do you have a before/after count for hardened functions?",
      "created_at" : "2023-02-17T15:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434795409",
      "id" : 1434795409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585VhT2R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434795409/reactions"
      },
      "updated_at" : "2023-02-17T15:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434795409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Do you have a before/after count for hardened functions?\r\n\r\nUsing GCC 13 and glibc 2.37 (with only this branch):\r\n```bash\r\n# master\r\nnm -C src/bitcoind | grep _chk\r\n                 U __fprintf_chk@GLIBC_2.17\r\n                 U __memcpy_chk@GLIBC_2.17\r\n                 U __snprintf_chk@GLIBC_2.17\r\n                 U __stack_chk_fail@GLIBC_2.17\r\n                 U __stack_chk_guard@GLIBC_2.17\r\n                 U __vsnprintf_chk@GLIBC_2.17\r\nobjdump -d src/bitcoind | grep \"_chk@plt\" | wc -l\r\n32\r\n\r\n# this branch\r\nnm -C src/bitcoind | grep _chk\r\n                 U __fdelt_chk@GLIBC_2.17\r\n                 U __fprintf_chk@GLIBC_2.17\r\n                 U __memcpy_chk@GLIBC_2.17\r\n                 U __memmove_chk@GLIBC_2.17\r\n                 U __memset_chk@GLIBC_2.17\r\n                 U __snprintf_chk@GLIBC_2.17\r\n                 U __stack_chk_fail@GLIBC_2.17\r\n                 U __stack_chk_guard@GLIBC_2.17\r\n                 U __vsnprintf_chk@GLIBC_2.17\r\nobjdump -d src/bitcoind | grep \"_chk@plt\" | wc -l\r\n54\r\n```\r\nIf I combine with our own use of FORTIFY_SOURCE=3:\r\n```bash\r\nnm -C src/bitcoind | grep _chk\r\n                 U __fdelt_chk@GLIBC_2.17\r\n                 U __fprintf_chk@GLIBC_2.17\r\n                 U __memcpy_chk@GLIBC_2.17\r\n                 U __memmove_chk@GLIBC_2.17\r\n                 U __memset_chk@GLIBC_2.17\r\n                 U __snprintf_chk@GLIBC_2.17\r\n                 U __stack_chk_fail@GLIBC_2.17\r\n                 U __stack_chk_guard@GLIBC_2.17\r\n                 U __vsnprintf_chk@GLIBC_2.17\r\nobjdump -d src/bitcoind | grep \"_chk@plt\" | wc -l\r\n81\r\n```",
      "created_at" : "2023-02-17T15:39:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434820512",
      "id" : 1434820512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585VhZ-g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434820512/reactions"
      },
      "updated_at" : "2023-02-17T15:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434820512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Changed the approach here, from using libevents own hardening option\r\n\r\nThe previous 974e44c0a0e692e1e11e7c067699db94f55ce464 commit, being combined with the current 778e34e8625cc83d0e5a93493c71f01712bef81d one, should work for older compilers as well, no?",
      "created_at" : "2023-02-17T17:04:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434933175",
      "id" : 1434933175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585Vh1e3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434933175/reactions"
      },
      "updated_at" : "2023-02-17T17:04:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434933175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> should work for older compilers as well, no?\n\nI changed the approach because I don't want us to use the gcc-hardening option.",
      "created_at" : "2023-02-17T17:22:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1434971844",
      "id" : 1434971844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585Vh-7E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434971844/reactions"
      },
      "updated_at" : "2023-02-17T17:22:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1434971844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on top of #27027.",
      "created_at" : "2023-02-20T16:37:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1437292856",
      "id" : 1437292856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585Vq1k4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437292856/reactions"
      },
      "updated_at" : "2023-02-20T16:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437292856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK ff4a73aea2b8346f48f75e1130a36749f70e9049",
      "created_at" : "2023-02-21T07:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1437992443",
      "id" : 1437992443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585VtgX7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437992443/reactions"
      },
      "updated_at" : "2023-02-21T07:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437992443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This PR introduced a regression when building with depends and disabled hardening:\r\n```\r\n$ make -C depends HOST=x86_64-w64-mingw32 NO_QT=1 NO_WALLET=1 NO_ZMQ=1 NO_UPNP=1 NO_NATPMP=1 NO_USDT=1\r\n$ ./configure --disable-hardening CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site\r\n$ make\r\n...\r\n/usr/bin/x86_64-w64-mingw32-ld: /home/hebasto/git/gui/depends/x86_64-w64-mingw32/lib/libevent.a(evutil.o):evutil.c:(.text+0x2975): undefined reference to `__memcpy_chk'\r\n/usr/bin/x86_64-w64-mingw32-ld: /home/hebasto/git/gui/depends/x86_64-w64-mingw32/lib/libevent.a(evutil.o):evutil.c:(.text+0x29d6): undefined reference to `__memcpy_chk'\r\n/usr/bin/x86_64-w64-mingw32-ld: /home/hebasto/git/gui/depends/x86_64-w64-mingw32/lib/libevent.a(evutil.o):evutil.c:(.text+0x3041): undefined reference to `__strcat_chk'\r\n/usr/bin/x86_64-w64-mingw32-ld: /home/hebasto/git/gui/depends/x86_64-w64-mingw32/lib/libevent.a(evutil.o):evutil.c:(.text+0x3052): undefined reference to `__strcat_chk'\r\n/usr/bin/x86_64-w64-mingw32-ld: /home/hebasto/git/gui/depends/x86_64-w64-mingw32/lib/libevent.a(http.o):http.c:(.text+0x6e6): undefined reference to `__memcpy_chk'\r\n...\r\n```",
      "created_at" : "2023-03-31T21:03:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27118#issuecomment-1492606272",
      "id" : 1492606272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27118",
      "node_id" : "IC_kwDOABII585Y911A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1492606272/reactions"
      },
      "updated_at" : "2023-03-31T21:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1492606272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
