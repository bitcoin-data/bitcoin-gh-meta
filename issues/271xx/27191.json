{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "The debug-only `-fastprune` option used in several tests is not always safe to use:\r\nIf a `-fastprune` node receives a block larger than the maximum blockfile size of `64kb` bad things happen: The while loop in `BlockManager::FindBlockPos` never terminates, and the node runs oom because memory for `m_blockfile_info` is allocated in each iteration of the loop.\r\nThe same would happen if a naive user used `-fastprune` on anything other than regtest (so this can be tested by syncing on signet for example, the first block that crashes the node is at height 2232).\r\n\r\nSo it's up to the user to use `-fastprune` responsibly, which I guess is fine for a debug-only option.\r\nHowever, I think it's better to fail immediately with an assert than potentially crashing the entire system by running out of memory.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191/comments",
   "created_at" : "2023-03-02T17:13:03Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/27191",
   "id" : 1607189938,
   "labels" : [
      {
         "color" : "000000",
         "default" : false,
         "description" : null,
         "id" : 219890555,
         "name" : "Block storage",
         "node_id" : "MDU6TGFiZWwyMTk4OTA1NTU=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585LJj3v",
   "number" : 27191,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/27191.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27191",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/27191.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27191"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191/timeline",
   "title" : "blockstorage: add an assert to avoid running oom with `-fastprune`",
   "updated_at" : "2023-03-02T18:51:15Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27191",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
      "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
      "followers_url" : "https://api.github.com/users/mzumsande/followers",
      "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/mzumsande",
      "id" : 48763452,
      "login" : "mzumsande",
      "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
      "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
      "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
      "repos_url" : "https://api.github.com/users/mzumsande/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/mzumsande"
   }
}
