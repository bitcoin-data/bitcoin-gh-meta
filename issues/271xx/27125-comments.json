[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1314520789), [mzumsande](https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1317942691) |\n| Approach ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1413008558) |\n| Stale ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1531714320), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1416823725), [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1541494448) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27596](https://github.com/bitcoin/bitcoin/pull/27596) (assumeutxo (2) by jamesob)\n* [#27573](https://github.com/bitcoin/bitcoin/pull/27573) (ci: Remove CI_EXEC bloat in test/06_script_b.sh by MarcoFalke)\n* [#27571](https://github.com/bitcoin/bitcoin/pull/27571) (ci: Run iwyu on all src files by MarcoFalke)\n* [#27530](https://github.com/bitcoin/bitcoin/pull/27530) (Remove now-unnecessary poll, fcntl includes from net(base).cpp by Empact)\n* [#27491](https://github.com/bitcoin/bitcoin/pull/27491) (refactor: Move chain constants to the util library by TheCharlatan)\n* [#27039](https://github.com/bitcoin/bitcoin/pull/27039) (blockstorage: do not flush block to disk if it is already there by pinheadmz)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n* [#26326](https://github.com/bitcoin/bitcoin/pull/26326) (net: don't lock cs_main while reading blocks in net processing by andrewtoth)\n* [#26288](https://github.com/bitcoin/bitcoin/pull/26288) (Enable -Wstring-concatenation and -Wstring-conversion on clang builds by Empact)\n* [#25193](https://github.com/bitcoin/bitcoin/pull/25193) (indexes: Read the locator's top block during init, allow interaction with reindex-chainstate by mzumsande)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-02-19T11:10:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1435959203",
      "id" : 1435959203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585Vlv-j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435959203/reactions"
      },
      "updated_at" : "2023-05-10T11:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435959203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```bash\r\nvalidation.cpp:80:13: error: using decl 'ReadBlockFromDisk' is unused [misc-unused-using-decls,-warnings-as-errors]\r\nusing node::ReadBlockFromDisk;\r\n            ^\r\n/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/validation.cpp:80:13: note: remove the using\r\nusing node::ReadBlockFromDisk;\r\n```",
      "created_at" : "2023-02-19T14:10:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1435999830",
      "id" : 1435999830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585Vl55W",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435999830/reactions"
      },
      "updated_at" : "2023-02-19T14:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435999830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> ```shell\r\n> validation.cpp:80:13: error: using decl 'ReadBlockFromDisk' is unused [misc-unused-using-decls,-warnings-as-errors]\r\n> using node::ReadBlockFromDisk;\r\n>             ^\r\n> /tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/validation.cpp:80:13: note: remove the using\r\n> using node::ReadBlockFromDisk;\r\n> ```\r\n\r\nThank you, I'm improving my clang tidy workflow.\r\n",
      "created_at" : "2023-02-19T19:56:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1436078314",
      "id" : 1436078314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585VmNDq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1436078314/reactions"
      },
      "updated_at" : "2023-02-19T19:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1436078314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1117926027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1117926027"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Since `blockman_opts` is empty here, I think you can pass it directly instead of creating `blockman_opts` for it.\r\n```cpp\r\nChainstateManager chainman{chainman_opts, {}};\r\n``` ",
      "commit_id" : "e8b095f8ad65544f18ad69201d95e11ddf689f1f",
      "created_at" : "2023-02-25T13:34:36Z",
      "diff_hunk" : "@@ -85,7 +85,8 @@ int main(int argc, char* argv[])\n         .datadir = gArgs.GetDataDirNet(),\n         .adjusted_time_callback = NodeClock::now,\n     };\n-    ChainstateManager chainman{chainman_opts};\n+    const node::BlockManager::Options blockman_opts{};\n+    ChainstateManager chainman{chainman_opts, blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1117926027",
      "id" : 1117926027,
      "line" : 91,
      "node_id" : "PRRC_kwDOABII585CojKL",
      "original_commit_id" : "4155ddcc0059321d8bf5e81c5378e9def9e0fe9c",
      "original_line" : 89,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 6,
      "pull_request_review_id" : 1314522880,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1117926027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-25T13:34:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1117926027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1118825254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1118825254"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```cpp\r\nconst bool ret{m_chainman.m_blockman.ReadBlockFromDisk(block, pindex, m_chainparams.GetConsensus())};\r\n```",
      "commit_id" : "e8b095f8ad65544f18ad69201d95e11ddf689f1f",
      "created_at" : "2023-02-27T14:31:25Z",
      "diff_hunk" : "@@ -3869,7 +3866,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n \n             if (pindex->nHeight >= m_chainman.ActiveChain().Height() - MAX_BLOCKTXN_DEPTH) {\n                 CBlock block;\n-                bool ret = ReadBlockFromDisk(block, pindex, m_chainparams.GetConsensus());\n+                bool ret = m_chainman.m_blockman.ReadBlockFromDisk(block, pindex, m_chainparams.GetConsensus());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1118825254",
      "id" : 1118825254,
      "line" : 3869,
      "node_id" : "PRRC_kwDOABII585Cr-sm",
      "original_commit_id" : "810f815cb6437a9eaeff9d52829f81ccd2c6994d",
      "original_line" : 3869,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 33,
      "pull_request_review_id" : 1315708617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1118825254/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-27T14:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1118825254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated e8b095f8ad65544f18ad69201d95e11ddf689f1f -> 899ba71e9d7caa370d8a0c4bed2e514f51024dc6 ([removeBlockstorageArgs_0](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_0) -> [removeBlockstorageArgs_1](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_0..removeBlockstorageArgs_1)) with suggested changes. \r\nRebased 899ba71e9d7caa370d8a0c4bed2e514f51024dc6 -> b640db3c5fbe49af58dbc9087a96cbb493fa9574 to get recent PR's with kernel build improvements.",
      "created_at" : "2023-02-27T20:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1447068021",
      "id" : 1447068021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WQIF1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447068021/reactions"
      },
      "updated_at" : "2023-02-27T20:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447068021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated b640db3c5fbe49af58dbc9087a96cbb493fa9574 -> 3ded321b878e7ad2bdbd9d542ffb2e36428396ec ([removeBlockstorageArgs_2](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_2) -> [removeBlockstorageArgs_3](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_2..removeBlockstorageArgs_3)) with suggested typo fix. ",
      "created_at" : "2023-02-28T06:22:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1447650893",
      "id" : 1447650893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WSWZN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447650893/reactions"
      },
      "updated_at" : "2023-02-28T06:22:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447650893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-02-28T15:40:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1448403083",
      "id" : 1448403083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WVOCL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448403083/reactions"
      },
      "updated_at" : "2023-02-28T15:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448403083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1120306670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1120306670"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`bilingual_str` seems unused",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-02-28T15:58:22Z",
      "diff_hunk" : "@@ -0,0 +1,20 @@\n+\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_BLOCKMANAGER_ARGS_H\n+#define BITCOIN_NODE_BLOCKMANAGER_ARGS_H\n+\n+#include <node/blockstorage.h>\n+\n+#include <optional>\n+\n+class ArgsManager;\n+struct bilingual_str;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1120306670",
      "id" : 1120306670,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585CxoXu",
      "original_commit_id" : "dce7d5480dfbc325e23cb3500d5a65a26d3c0bae",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.h",
      "position" : null,
      "pull_request_review_id" : 1317942691,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1120306670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-02-28T17:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1120306670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-02-28T17:13:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1448555096",
      "id" : 1448555096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WVzJY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448555096/reactions"
      },
      "updated_at" : "2023-02-28T17:13:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448555096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the reviews!\r\n\r\n> Seeing all that effort to pass around the hacky fastprune arg (which doesn't make any sense outside of functional tests) seems a bit sad, so I wonder if it's really inevitable.\r\n> Did you consider whether it's possible to also move BlockFileSeq into blockmanager? I guess it doesn't work just because of one remaining call site for node::ReadBlockFromDisk from zmqpublishnotifier?\r\n\r\nYes, totally echo this sentiment. Indeed BlockFileSeq and its dependants are not class members because of the call site in `zmqpublishnotifier`. I refrained from further refactoring because of this. If somebody has an idea on how to handle the zmq case I'll gladly rework this pull request.\r\n\r\nUpdated 3ded321b878e7ad2bdbd9d542ffb2e36428396ec ->  596404317bef425179d68009a76ac185db4da9a4 ([removeBlockstorageArgs_3](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_3) -> [removeBlockstorageArgs_4](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_3..removeBlockstorageArgs_4)) removing unused declaration.\r\nRebased 596404317bef425179d68009a76ac185db4da9a4 -> 88e88a5 ([removeBlockstorageArgs_4](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_4) -> [removeBlockstorageArgs_5](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_4..removeBlockstorageArgs_5)) to resolve conflicts.\r\n",
      "created_at" : "2023-02-28T21:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1448970703",
      "id" : 1448970703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WXYnP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448970703/reactions"
      },
      "updated_at" : "2023-03-01T06:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448970703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated  88e88a5 -> f87c39399823e22c553b797cc66fa4063462a32b ([removeBlockstorageArgs_5](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_5) -> [removeBlockstorageArgs_6](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_5..removeBlockstorageArgs_6)) with linter fix. ",
      "created_at" : "2023-03-01T06:51:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1449443895",
      "id" : 1449443895,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585WZMI3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1449443895/reactions"
      },
      "updated_at" : "2023-03-01T06:51:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1449443895",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated  f87c39399823e22c553b797cc66fa4063462a32b -> 6d9826f182d9122d4464d35d6682dc6fb4b1116e ([removeBlockstorageArgs_6](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_6) -> [removeBlockstorageArgs_7](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_6..removeBlockstorageArgs_7)) addressing https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1317942691 by instantiating a `BlockManager` in the `zmqpublishnotifier`. As commented previously https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1317942691 by @mzumsande other functions like `BlockFileSeq`are now moved into the `BlockManager`. This resolves the double declaration of functions that was previously required in the previous patchset.",
      "created_at" : "2023-03-09T17:15:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1462445136",
      "id" : 1462445136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585XKyRQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1462445136/reactions"
      },
      "updated_at" : "2023-03-09T17:15:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1462445136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-03-15T23:47:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1470990655",
      "id" : 1470990655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585XrYk_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470990655/reactions"
      },
      "updated_at" : "2023-03-15T23:47:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470990655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 6d9826f182d9122d4464d35d6682dc6fb4b1116e -> 593a9f36609a74f47175e681a3921f3975272766 ([removeBlockstorageArgs_7](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_7) -> [removeBlockstorageArgs_8](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_7..removeBlockstorageArgs_8)) on newest master to resolve conflicts.",
      "created_at" : "2023-03-16T09:28:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1471593836",
      "id" : 1471593836,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585Xtr1s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1471593836/reactions"
      },
      "updated_at" : "2023-03-16T09:28:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1471593836",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138371447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138371447"
         }
      },
      "author_association" : "MEMBER",
      "body" : "39fa0de08adc2cd19081bb5679d26a6b8b6cb331: Commit message is wrong?",
      "commit_id" : "593a9f36609a74f47175e681a3921f3975272766",
      "created_at" : "2023-03-16T09:37:26Z",
      "diff_hunk" : "",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138371447",
      "id" : 1138371447,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII585D2it3",
      "original_commit_id" : "39fa0de08adc2cd19081bb5679d26a6b8b6cb331",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/kernel/blockmanager_opts.h",
      "position" : 1,
      "pull_request_review_id" : 1343269933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138371447/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "file",
      "updated_at" : "2023-03-16T09:41:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138371447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138372306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138372306"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: If you want, you can add this file to ci iwyu in ./ci/test/06_...",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-03-16T09:38:04Z",
      "diff_hunk" : "@@ -7,6 +7,8 @@\n #include <util/system.h>\n #include <validation.h>\n \n+#include <optional>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138372306",
      "id" : 1138372306,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585D2i7S",
      "original_commit_id" : "39fa0de08adc2cd19081bb5679d26a6b8b6cb331",
      "original_line" : 15,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : 12,
      "pull_request_review_id" : 1343269933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138372306/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-16T09:41:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138372306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138374800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138374800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit message is wrong too in e78003b42d6bbd166fd87aea357788c712506a6f",
      "commit_id" : "593a9f36609a74f47175e681a3921f3975272766",
      "created_at" : "2023-03-16T09:40:02Z",
      "diff_hunk" : "",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1138374800",
      "id" : 1138374800,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII585D2jiQ",
      "original_commit_id" : "e78003b42d6bbd166fd87aea357788c712506a6f",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 1,
      "pull_request_review_id" : 1343269933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138374800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "file",
      "updated_at" : "2023-03-16T09:41:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138374800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 593a9f36609a74f47175e681a3921f3975272766 -> 54d8644dce180197fa657e9b68d6de63cf4c8072 ([removeBlockstorageArgs_8](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_8) -> [removeBlockstorageArgs_9](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_8..removeBlockstorageArgs_9)) to improve commit messages and add a commit adding the `blockmanager_args.cpp` file to iwyu as suggested by @MarcoFalke . ",
      "created_at" : "2023-03-17T15:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1474048274",
      "id" : 1474048274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585X3DES",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1474048274/reactions"
      },
      "updated_at" : "2023-03-17T15:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1474048274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140421493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140421493"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in 9ba7ab344fb39c1145283b02e6b4ff4753c6511b: Can you explain why it is safe to construct two blockman in the same process? This seems fragile, considering that the objects may hold state?",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-03-17T16:01:44Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140421493",
      "id" : 1140421493,
      "line" : 258,
      "node_id" : "PRRC_kwDOABII585D-XN1",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 34,
      "pull_request_review_id" : 1346236633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140421493/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-17T16:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140421493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140427662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140427662"
         }
      },
      "author_association" : "MEMBER",
      "body" : "When touching this, it might be better to not pass the params, but access them from a member?\r\n\r\nAlso, I don't like that several unrelated \"refactoring\" is bundled with potentially behavior changing stuff. For example, it would be good to do the function moving in a separate commit from the change that constructs two blockman in the same process.",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-03-17T16:07:22Z",
      "diff_hunk" : "@@ -236,11 +240,11 @@ class BlockManager\n     bool ReadBlockFromDisk(CBlock& block, const FlatFilePos& pos, const Consensus::Params& consensusParams) const;\n     bool ReadBlockFromDisk(CBlock& block, const CBlockIndex* pindex, const Consensus::Params& consensusParams) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140427662",
      "id" : 1140427662,
      "line" : 242,
      "node_id" : "PRRC_kwDOABII585D-YuO",
      "original_commit_id" : "fd015c73b0ef6cfaf2960c24359d58d658fbbeeb",
      "original_line" : 241,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.h",
      "position" : 64,
      "pull_request_review_id" : 1346246307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140427662/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-17T16:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140427662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140489925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140489925"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I may have missed some nuance here. To me it seemed acceptable, because functions are protected by `cs_main`. For const functions like`ReadBlockFromDisk` this seems safe to me (though I'm still new to the locking model and might be missing something here). However doing block write and pruning operations with two blockmanagers is fragile, since their internal state might no longer reflect the state on disk. \r\n\r\nI'm not sure how to proceed here. I could mark the `BlockManager` here as const, that would at least ensure that it's state cannot change.",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-03-17T17:03:19Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140489925",
      "id" : 1140489925,
      "in_reply_to_id" : 1140421493,
      "line" : 258,
      "node_id" : "PRRC_kwDOABII585D-n7F",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 34,
      "pull_request_review_id" : 1346346072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140489925/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-17T17:03:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140489925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140490220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140490220"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the suggestion, will split this up.",
      "commit_id" : "54d8644dce180197fa657e9b68d6de63cf4c8072",
      "created_at" : "2023-03-17T17:03:34Z",
      "diff_hunk" : "@@ -236,11 +240,11 @@ class BlockManager\n     bool ReadBlockFromDisk(CBlock& block, const FlatFilePos& pos, const Consensus::Params& consensusParams) const;\n     bool ReadBlockFromDisk(CBlock& block, const CBlockIndex* pindex, const Consensus::Params& consensusParams) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140490220",
      "id" : 1140490220,
      "in_reply_to_id" : 1140427662,
      "line" : 242,
      "node_id" : "PRRC_kwDOABII585D-n_s",
      "original_commit_id" : "fd015c73b0ef6cfaf2960c24359d58d658fbbeeb",
      "original_line" : 241,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.h",
      "position" : 64,
      "pull_request_review_id" : 1346346426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140490220/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-17T17:03:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140490220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 54d8644dce180197fa657e9b68d6de63cf4c8072 -> 9f5600742c65a2421c9fe5a2a2670e86a25ef696 ([removeBlockstorageArgs_9](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_9) -> [removeBlockstorageArgs_10](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_10), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_9..removeBlockstorageArgs_10)) to split a commit moving methods and instantiating a block manager in zmq, and replacing the fastprune arg. I also added a short inline comment explaining the zmq's blockmanager const declaration and threading requirements.",
      "created_at" : "2023-03-19T13:03:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1475248494",
      "id" : 1475248494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585X7oFu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1475248494/reactions"
      },
      "updated_at" : "2023-03-19T13:03:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1475248494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141893047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141893047"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> cs_main\r\n\r\nHmm, that sounds like you are making it harder to remove cs_main.\r\n\r\nI am not sure it the alternative are better, but my brain enjoys the thought of having only to think about a single blockman object at a time. Ideas:\r\n\r\n* Use `findBlock` from the node interface. The overhead should only be another map lookup by the block hash? You can ask Ryan to confirm.\r\n* Pass down a blockman ref into the zmq stuff (massive change)\r\n* Add a new global alias for zmq to point to the single existing blockman instance, ugly but less code and less ugly than constructing a new object?\r\n* Something else?",
      "commit_id" : "9f5600742c65a2421c9fe5a2a2670e86a25ef696",
      "created_at" : "2023-03-20T10:13:53Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141893047",
      "id" : 1141893047,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ED-e3",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1348195881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141893047/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-20T10:13:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141893047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141897562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141897562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I may have missed some nuance here. To me it seemed acceptable, because functions are protected by cs_main. For const functions likeReadBlockFromDisk this seems safe to me\r\n\r\nNote that according to the PR description in #27006 there is currently at least one `cs_main` related bug in `ReadBlockFromDisk`.",
      "commit_id" : "9f5600742c65a2421c9fe5a2a2670e86a25ef696",
      "created_at" : "2023-03-20T10:17:47Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141897562",
      "id" : 1141897562,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ED_la",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1348202958,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141897562/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-20T10:17:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141897562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141966979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141966979"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Hmm, that sounds like you are making it harder to remove cs_main.\r\n\r\nI don't think this change complicates a refactor of the global locks. `zmqpublishnotifier` relies on `cs_main` being in global scope before and after this change. If the lock is moved into some narrower scope, this would have to be handled for the `zmqpublishnotifier` too - with our without this patch. If I read #27006 correctly, no change is required to make it work with the patch here.\r\n\r\n> my brain enjoys the thought of having only to think about a single blockman object at a time.\r\n\r\nI feel this though, I'll try out the first and second option you laid out.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-03-20T11:16:56Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141966979",
      "id" : 1141966979,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EEQiD",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1348307149,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141966979/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-20T11:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1141966979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1142232528"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142232528"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I feel this though, I'll try out the first and second option you laid out.\r\n\r\nBoth are branching out a bit too much in my taste for the refactor we seek to achieve here. If the `const BlockManager` is a non-starter, I can always revert back to https://github.com/bitcoin/bitcoin/commit/f87c39399823e22c553b797cc66fa4063462a32b",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-03-20T14:45:24Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1142232528",
      "id" : 1142232528,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EFRXQ",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1348714448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142232528/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-20T14:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142232528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1142342689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142342689"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I can always revert back to https://github.com/bitcoin/bitcoin/commit/f87c39399823e22c553b797cc66fa4063462a32b\r\n\r\nNot sure. I will need to move those functions to blockman anyway for some other work, so dropping the changes will only kick the can down the road.\r\n\r\n> Both are branching out a bit too much in my taste for the refactor we seek to achieve here.\r\n\r\nI can take a look when time allows. In the meantime other reviewers can chime in.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-03-20T15:52:41Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1142342689",
      "id" : 1142342689,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EFsQh",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1348887165,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142342689/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-20T15:52:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142342689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1146221073"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146221073"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fwiw, I would prefer either one of these two options over what is currently in this PR:\r\n> * Use findBlock from the node interface. The overhead should only be another map lookup by the block hash? You can ask Ryan to confirm.\r\n> * Pass down a blockman ref into the zmq stuff (massive change)\r\n\r\nI implemented the second option here: https://github.com/dergoegge/bitcoin/commit/a17844fe3e3c97c0eb5906536b96d1ce634b790c feel free to pick that, it's not to crazy of a change imo (haven't tested that but it does compile).",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-03-23T13:43:58Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1146221073",
      "id" : 1146221073,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EUfIR",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1354663519,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146221073/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-23T13:43:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146221073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the discussion and suggestions.\r\n\r\nUpdated 9f5600742c65a2421c9fe5a2a2670e86a25ef696 -> 97bf70119e5b8567bcdc553d59b18a09023fd05a ([removeBlockstorageArgs_10](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_10) -> [removeBlockstorageArgs_11](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_11), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_10..removeBlockstorageArgs_11)) to add @dergoegge's patch as suggested in his [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1146221073). With this latest push, there is no additional `BlockManager` being instantiated anymore.",
      "created_at" : "2023-03-23T16:38:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1481521004",
      "id" : 1481521004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585YTjds",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481521004/reactions"
      },
      "updated_at" : "2023-03-23T16:38:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481521004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1146473683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146473683"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This patch is much simpler than what I came up with, thanks a lot!",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-03-23T16:39:30Z",
      "diff_hunk" : "@@ -248,9 +253,12 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     LogPrint(BCLog::ZMQ, \"Publish rawblock %s to %s\\n\", pindex->GetBlockHash().GetHex(), this->address);\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n+    BlockManagerOpts blockman_opts{};\n+    Assert(!ApplyArgsManOptions(gArgs, blockman_opts)); // already checked on init\n+    BlockManager blockman{blockman_opts};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1146473683",
      "id" : 1146473683,
      "in_reply_to_id" : 1140421493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EVczT",
      "original_commit_id" : "9ba7ab344fb39c1145283b02e6b4ff4753c6511b",
      "original_line" : 258,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1355043790,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146473683/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-23T16:39:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146473683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure why the functional tests are failing. The test failing on the Win64 job is passing on the 32-bit job and vice-versa. Both are passing locally.",
      "created_at" : "2023-03-23T20:51:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1481881156",
      "id" : 1481881156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585YU7ZE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481881156/reactions"
      },
      "updated_at" : "2023-03-23T20:51:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481881156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Win64 wallet_create_tx.py failure is probably fixed by #27318",
      "created_at" : "2023-03-23T21:08:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1481912454",
      "id" : 1481912454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585YVDCG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481912454/reactions"
      },
      "updated_at" : "2023-03-23T21:08:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481912454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1160180267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160180267"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This moves the creation of the ZMQ interface into a `for` loop, which I think can be executed twice under some special conditions (`-reindex` is activated by a GUI user).\r\nHowever, `g_zmq_notification_interface` is just a simple pointer, not a `std::unique_ptr`, so I think that there could be a memory leak with the first object never being deleted if we call `CZMQNotificationInterface::Create` a second time.\r\n",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-06T19:36:17Z",
      "diff_hunk" : "@@ -1478,6 +1470,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         node.chainman = std::make_unique<ChainstateManager>(chainman_opts, blockman_opts);\n         ChainstateManager& chainman = *node.chainman;\n \n+#if ENABLE_ZMQ\n+        g_zmq_notification_interface = CZMQNotificationInterface::Create(chainman.m_blockman);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1160180267",
      "id" : 1160180267,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FJvIr",
      "original_commit_id" : "9a5c111d8cb5a066e4d4fccdf44f74e247f52203",
      "original_line" : 1474,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1375457386,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160180267/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-06T21:51:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160180267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1165741318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165741318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: Could make sense to remove unused includes, according to iwyu",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-13T15:58:36Z",
      "diff_hunk" : "@@ -19,6 +20,8 @@\n #include <streams.h>\n #include <sync.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1165741318",
      "id" : 1165741318,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Fe80G",
      "original_commit_id" : "97bf70119e5b8567bcdc553d59b18a09023fd05a",
      "original_line" : 21,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 1383752807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165741318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:58:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165741318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @mzumsande\r\n\r\nUpdated 97bf70119e5b8567bcdc553d59b18a09023fd05a -> 09f950e1f3608e3019e97236969b152e9252a220 ([removeBlockstorageArgs_11](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_11) -> [removeBlockstorageArgs_12](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_12), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_11..removeBlockstorageArgs_12)) \r\n* Addressed @mzumsande's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1160180267) by making the `g_zmq_notification_interface` a `std::unique_ptr` and checking that it is not already the owner of a `CZMQNotificationInterface` object before assigning to it. \r\n* Pass a reference of the node context to the `CZMQNotificationInterface` to ensure that we access the currently initialized `BlockManager` within the zmq code. In the previous revision, the reference to the `BlockManager` might have been pointing to a destructed object.",
      "created_at" : "2023-04-18T14:24:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1513251515",
      "id" : 1513251515,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585aMmK7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513251515/reactions"
      },
      "updated_at" : "2023-04-18T14:24:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513251515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase on current `main` branch",
      "created_at" : "2023-04-18T14:42:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1513279467",
      "id" : 1513279467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585aMs_r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513279467/reactions"
      },
      "updated_at" : "2023-04-18T14:42:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513279467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the notice,\r\n\r\nRebased 09f950e1f3608e3019e97236969b152e9252a220 -> 908d95e46f15f6b4def9534bc09fcdb3c0a5ef54 ([removeBlockstorageArgs_12](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_12) -> [removeBlockstorageArgs_13](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_13), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_12..removeBlockstorageArgs_13)) ",
      "created_at" : "2023-04-18T15:12:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1513335630",
      "id" : 1513335630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585aM6tO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513335630/reactions"
      },
      "updated_at" : "2023-04-18T15:12:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1513335630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-04-21T10:26:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1517619164",
      "id" : 1517619164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585adQfc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1517619164/reactions"
      },
      "updated_at" : "2023-04-21T10:26:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1517619164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 908d95e46f15f6b4def9534bc09fcdb3c0a5ef54 -> 1a7d73d30e312e862be4560601302e79725b1bc7 ([removeBlockstorageArgs_13](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_13) -> [removeBlockstorageArgs_14](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_14), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_13..removeBlockstorageArgs_14)) ",
      "created_at" : "2023-04-21T13:51:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1517866792",
      "id" : 1517866792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585aeM8o",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1517866792/reactions"
      },
      "updated_at" : "2023-04-21T13:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1517866792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173878733"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173878733"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    return FlatFileSeq(m_opts.blocks_dir, \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\r\n```\r\n\r\nThe \"util/system.h\" include can almost be removed after this. `ScheduleBatchPriority()` is the only function that is still used.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T14:59:41Z",
      "diff_hunk" : "@@ -583,28 +578,28 @@ void UnlinkPrunedFiles(const std::set<int>& setFilesToPrune)\n     }\n }\n \n-static FlatFileSeq BlockFileSeq()\n+FlatFileSeq BlockManager::BlockFileSeq() const\n {\n-    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", gArgs.GetBoolArg(\"-fastprune\", false) ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\n+    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173878733",
      "id" : 1173878733,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585F9_fN",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 583,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1395938681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173878733/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T15:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173878733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173885220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173885220"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Seems unnecessary to pass the entire `NodeContext` when you only need the blockman.\r\n\r\nFeel free to ignore, but would be interested in why you chose to do it this way.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T15:05:35Z",
      "diff_hunk" : "@@ -250,7 +249,7 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n     CDataStream ss(SER_NETWORK, PROTOCOL_VERSION | RPCSerializationFlags());\n     CBlock block;\n-    if (!ReadBlockFromDisk(block, pindex, consensusParams)) {\n+    if (!m_node.GetBlockManager().ReadBlockFromDisk(block, pindex, consensusParams)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173885220",
      "id" : 1173885220,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII585F-BEk",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 252,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 22,
      "pull_request_review_id" : 1395938681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173885220/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T15:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173885220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173921394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173921394"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The blockman and chainstate instances may be deleted during the lifetime of the zmq instance similarly as described in mzsumsande's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1160180267) when iterating the for loop. If we pass a reference to the `NodeContext` instead, we have better guarantees that its blockman reference points to an actual object.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T15:40:09Z",
      "diff_hunk" : "@@ -250,7 +249,7 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n     CDataStream ss(SER_NETWORK, PROTOCOL_VERSION | RPCSerializationFlags());\n     CBlock block;\n-    if (!ReadBlockFromDisk(block, pindex, consensusParams)) {\n+    if (!m_node.GetBlockManager().ReadBlockFromDisk(block, pindex, consensusParams)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173921394",
      "id" : 1173921394,
      "in_reply_to_id" : 1173885220,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII585F-J5y",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 252,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 22,
      "pull_request_review_id" : 1396002013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173921394/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T15:40:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173921394",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173922264"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173922264"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch, thank you! Will also remove the `<args.h>` include.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T15:41:06Z",
      "diff_hunk" : "@@ -583,28 +578,28 @@ void UnlinkPrunedFiles(const std::set<int>& setFilesToPrune)\n     }\n }\n \n-static FlatFileSeq BlockFileSeq()\n+FlatFileSeq BlockManager::BlockFileSeq() const\n {\n-    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", gArgs.GetBoolArg(\"-fastprune\", false) ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\n+    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173922264",
      "id" : 1173922264,
      "in_reply_to_id" : 1173878733,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585F-KHY",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 583,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1396003318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173922264/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T15:41:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173922264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @dergoegge,\r\n\r\nUpdated 1a7d73d30e312e862be4560601302e79725b1bc7 -> ed3159e0eb105d9f46659bd8f8b2db27d94841de ([removeBlockstorageArgs_14](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_14) -> [removeBlockstorageArgs_15](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_15), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_14..removeBlockstorageArgs_15)) \r\n* Addressed @dergoegge's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173878733), removing a left over `gArgs` reference in `blockstorage.cpp`.",
      "created_at" : "2023-04-21T15:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1518024541",
      "id" : 1518024541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585aezdd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518024541/reactions"
      },
      "updated_at" : "2023-04-21T15:49:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518024541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173938033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173938033"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is that actually possible? Seems like all the validation interfaces including the zmq one are unregistered before chainman is destroyed?\r\n\r\nSo it can't be holding a reference to blockman that is actually destroyed, see:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/f3f5c9712670fc2c9fb3b57580146aa248a5d36f/src/init.cpp#L327-L343\r\n\r\nOr are you just saying that having a reference to the node context has better lifetime guarantees because basically nothing outlives the node context?",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T15:58:27Z",
      "diff_hunk" : "@@ -250,7 +249,7 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n     CDataStream ss(SER_NETWORK, PROTOCOL_VERSION | RPCSerializationFlags());\n     CBlock block;\n-    if (!ReadBlockFromDisk(block, pindex, consensusParams)) {\n+    if (!m_node.GetBlockManager().ReadBlockFromDisk(block, pindex, consensusParams)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173938033",
      "id" : 1173938033,
      "in_reply_to_id" : 1173885220,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII585F-N9x",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 252,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 22,
      "pull_request_review_id" : 1396026856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173938033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T15:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173938033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T16:07:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1518046601",
      "id" : 1518046601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585ae42J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518046601/reactions"
      },
      "updated_at" : "2023-04-21T16:07:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518046601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173954405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173954405"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is that actually possible? \r\n\r\nLikely that I am missing something in the logic. The way I see it each iteration of the for loop creates and destroys the `chainman` by calling `std::make_unique` again, while the `Shutdown` code is not called during each iteration.",
      "commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "created_at" : "2023-04-21T16:16:35Z",
      "diff_hunk" : "@@ -250,7 +249,7 @@ bool CZMQPublishRawBlockNotifier::NotifyBlock(const CBlockIndex *pindex)\n     const Consensus::Params& consensusParams = Params().GetConsensus();\n     CDataStream ss(SER_NETWORK, PROTOCOL_VERSION | RPCSerializationFlags());\n     CBlock block;\n-    if (!ReadBlockFromDisk(block, pindex, consensusParams)) {\n+    if (!m_node.GetBlockManager().ReadBlockFromDisk(block, pindex, consensusParams)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1173954405",
      "id" : 1173954405,
      "in_reply_to_id" : 1173885220,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII585F-R9l",
      "original_commit_id" : "1a7d73d30e312e862be4560601302e79725b1bc7",
      "original_line" : 252,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 22,
      "pull_request_review_id" : 1396055787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173954405/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T16:16:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1173954405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1179303184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1179303184"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just talked about this offline, but if possible to make ZMQ just take a pointer to BlockManager instead of NodeContext, that would be good. This way ZMQ would only have access to the state it actually needs",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-04-27T15:03:58Z",
      "diff_hunk" : "@@ -39,12 +43,14 @@ std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotif\n     return result;\n }\n \n-CZMQNotificationInterface* CZMQNotificationInterface::Create()\n+std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create(const node::NodeContext& node)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1179303184",
      "id" : 1179303184,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GSr0Q",
      "original_commit_id" : "ed3159e0eb105d9f46659bd8f8b2db27d94841de",
      "original_line" : 46,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 1404295710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1179303184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-27T15:03:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1179303184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-02T09:31:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1531166456",
      "id" : 1531166456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bQ774",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531166456/reactions"
      },
      "updated_at" : "2023-05-02T09:31:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531166456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the discussions,\r\n\r\nUpdated ed3159e0eb105d9f46659bd8f8b2db27d94841de -> 9c197181803e08e1cce4460190cc06fc2e093a80 ([removeBlockstorageArgs_15](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_15) -> [removeBlockstorageArgs_16](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_16), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_15..removeBlockstorageArgs_16)) \r\n* Reverted change made for passing a `NodeContext` to `ZmqNotificationInterface` back to passing a reference of a `BlockManager`\r\n* Introduced a change declaring the `BlockManager` outside of the `ChainstateManager` and making the `NodeContext` its new owner. References to this `BlockManager` are now passed to declare `ChainstateManager` and `ZmqNotificationInterface`. This could also allow the kernel more control over how blocks are stored.\r\n\r\nRebased 9c197181803e08e1cce4460190cc06fc2e093a80 -> f59f0c91acb7a35b767bb0dc75ed8b10add81d9f ([removeBlockstorageArgs_16](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_16) -> [removeBlockstorageArgs_17](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_17), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_16..removeBlockstorageArgs_17)) \r\n",
      "created_at" : "2023-05-02T13:02:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1531437760",
      "id" : 1531437760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bR-LA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531437760/reactions"
      },
      "updated_at" : "2023-05-02T13:02:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531437760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK f59f0c91acb7a35b767bb0dc75ed8b10add81d9f ",
      "created_at" : "2023-05-02T15:52:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1531714320",
      "id" : 1531714320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bTBsQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531714320/reactions"
      },
      "updated_at" : "2023-05-02T15:52:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531714320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183519088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183519088"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated nit in a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9: I wonder what `memory` is being used for, but iwyu seems happy, so this is fine.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T10:38:54Z",
      "diff_hunk" : "@@ -5,8 +5,15 @@\n #include <node/blockmanager_args.h>\n \n #include <common/args.h>\n+#include <node/blockstorage.h>\n+#include <tinyformat.h>\n+#include <util/translation.h>\n #include <validation.h>\n \n+#include <cstdint>\n+#include <memory>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183519088",
      "id" : 1183519088,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII585GixFw",
      "original_commit_id" : "a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : 10,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183519088/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183519088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183527429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183527429"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unrelated in 7e0e84c1a3587f8b2ffac00f647d1e2d17febb91: Is there a reason you are sometimes using `gArgs` and then `m_args`? It looks like `m_args` ignores `extra_args` and `gArgs`/`m_node.args` doesn't?\r\n\r\nSo my preference would be to figure out whether to use `m_node.args` or `m_args`, and then use it consistently?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T10:48:40Z",
      "diff_hunk" : "@@ -21,7 +23,9 @@ BOOST_FIXTURE_TEST_SUITE(blockmanager_tests, BasicTestingSetup)\n BOOST_AUTO_TEST_CASE(blockmanager_find_block_pos)\n {\n     const auto params {CreateChainParams(ArgsManager{}, CBaseChainParams::MAIN)};\n-    BlockManager blockman{{}};\n+    BlockManager::Options blockman_opts{};\n+    ApplyArgsManOptions(gArgs, blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183527429",
      "id" : 1183527429,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585GizIF",
      "original_commit_id" : "7e0e84c1a3587f8b2ffac00f647d1e2d17febb91",
      "original_line" : 27,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/test/blockmanager_tests.cpp",
      "position" : 29,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183527429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183527429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183537074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183537074"
         }
      },
      "author_association" : "MEMBER",
      "body" : "87999089e1b7794cd595ca19893a383149546087: Can you explain why it is necessary and safe to move this out of the for loop?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T10:58:39Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183537074",
      "id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585Gi1ey",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183537074/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183537074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183542168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183542168"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in 7e0e84c1a3587f8b2ffac00f647d1e2d17febb91: What is the point of adding 5 LOC that will be removed in the next commit anyway? If you want to keep that, it would be good to also remove the now unused include as well, which you forgot?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:03:56Z",
      "diff_hunk" : "@@ -381,10 +384,12 @@ struct SnapshotTestSetup : TestChain100Setup {\n                 .datadir = m_args.GetDataDirNet(),\n                 .adjusted_time_callback = GetAdjustedTime,\n             };\n+            BlockManager::Options blockman_opts{};\n+            ApplyArgsManOptions(gArgs, blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183542168",
      "id" : 1183542168,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gi2uY",
      "original_commit_id" : "7e0e84c1a3587f8b2ffac00f647d1e2d17febb91",
      "original_line" : 388,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/validation_chainstatemanager_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183542168/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183542168",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183550132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183550132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "3b9d6b06407f79d87b3318ecaaaca696b0dd1e68: Why?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:13:30Z",
      "diff_hunk" : "@@ -21,6 +21,10 @@\n #include <utility>\n #include <vector>\n \n+namespace node {\n+class NodeContext;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183550132",
      "id" : 1183550132,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585Gi4q0",
      "original_commit_id" : "3b9d6b06407f79d87b3318ecaaaca696b0dd1e68",
      "original_line" : 26,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : 6,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183550132/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183550132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183556059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183556059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated in 512592cf41ae8fb307bd6eb651e3319e5053851e: Might be good to store a reference to the chain params in m_opts in a previous commit and use it inside the function. Then, while touching all lines here, the now unused params argument could be dropped.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:19:59Z",
      "diff_hunk" : "@@ -207,7 +205,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!ReadBlockFromDisk(block, pindex, consensus_params)) {\n+            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183556059",
      "id" : 1183556059,
      "line" : 208,
      "node_id" : "PRRC_kwDOABII585Gi6Hb",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 208,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183556059/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183556059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183561359"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183561359"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit (same commit): You can bind blockman to a lambda named `CheckFilterLookups` that binds the arg to avoid touching those lines",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:26:00Z",
      "diff_hunk" : "@@ -155,7 +156,7 @@ BOOST_FIXTURE_TEST_CASE(blockfilter_index_initial_sync, BuildChainTestingSetup)\n         for (block_index = m_node.chainman->ActiveChain().Genesis();\n              block_index != nullptr;\n              block_index = m_node.chainman->ActiveChain().Next(block_index)) {\n-            CheckFilterLookups(filter_index, block_index, last_header);\n+            CheckFilterLookups(filter_index, block_index, last_header, m_node.chainman->m_blockman);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183561359",
      "id" : 1183561359,
      "line" : 159,
      "node_id" : "PRRC_kwDOABII585Gi7aP",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 159,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/blockfilter_index_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183561359/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183561359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183565479"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183565479"
         }
      },
      "author_association" : "MEMBER",
      "body" : "f665024be7e5cc0a91ac7ff5779209313453a043: Wrong commit? How is this not missing from 7e0e84c1a3587f8b2ffac00f647d1e2d17febb91?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:30:40Z",
      "diff_hunk" : "@@ -584,7 +584,7 @@ void BlockManager::UnlinkPrunedFiles(const std::set<int>& setFilesToPrune) const\n \n FlatFileSeq BlockManager::BlockFileSeq() const\n {\n-    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", gArgs.GetBoolArg(\"-fastprune\", false) ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\n+    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183565479",
      "id" : 1183565479,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gi8an",
      "original_commit_id" : "f665024be7e5cc0a91ac7ff5779209313453a043",
      "original_line" : 587,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183565479/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183565479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183569789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183569789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6b5eb9376c97ac7edd096754708aba6d454cef76:Shouldn't this happen inside `ApplyArgsManOptions`? If not, shouldn't blocks_dir be `const` to avoid an empty path?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:35:47Z",
      "diff_hunk" : "@@ -1431,7 +1431,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{\n+        .blocks_dir = args.GetBlocksDirPath(),\n+    };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183569789",
      "id" : 1183569789,
      "line" : 1436,
      "node_id" : "PRRC_kwDOABII585Gi9d9",
      "original_commit_id" : "6b5eb9376c97ac7edd096754708aba6d454cef76",
      "original_line" : 1436,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 68,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183569789/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183569789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183570901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183570901"
         }
      },
      "author_association" : "MEMBER",
      "body" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f: `nodiscard`?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:37:05Z",
      "diff_hunk" : "@@ -207,6 +205,8 @@ class BlockManager\n \n     [[nodiscard]] bool LoadingBlocks() const { return m_importing || fReindex; }\n \n+    bool StopAfterBlockImport() const { return m_opts.stop_after_block_import; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183570901",
      "id" : 1183570901,
      "line" : 208,
      "node_id" : "PRRC_kwDOABII585Gi9vV",
      "original_commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "original_line" : 208,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.h",
      "position" : 35,
      "pull_request_review_id" : 1390404266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183570901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:38:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183570901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183583641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183583641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It wasn't possible to do that in https://github.com/bitcoin/bitcoin/commit/7e0e84c1a3587f8b2ffac00f647d1e2d17febb91 because `BlockFileSeq` wasn't part of `BlockManager` then. One could rearrange the commits though and have 7e0e84c1a3587f8b2ffac00f647d1e2d17febb91 after the commit that moves stuff into BlockManager.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T11:51:42Z",
      "diff_hunk" : "@@ -584,7 +584,7 @@ void BlockManager::UnlinkPrunedFiles(const std::set<int>& setFilesToPrune) const\n \n FlatFileSeq BlockManager::BlockFileSeq() const\n {\n-    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", gArgs.GetBoolArg(\"-fastprune\", false) ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\n+    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183583641",
      "id" : 1183583641,
      "in_reply_to_id" : 1183565479,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GjA2Z",
      "original_commit_id" : "f665024be7e5cc0a91ac7ff5779209313453a043",
      "original_line" : 587,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1410729048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183583641/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T11:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183583641",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183628544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183628544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In the context of this commit it is necessary to move the assignment out of the for loop, so we don't destruct the `node.blockman` on each iteration and end up with a dangling reference to the original object in zmq. What I did not think about though is that we are also no longer resetting the internal state of the `BlockManager`when the `ChainstateManager` is destructed. So no, I'm no longer sure that this is safe. ",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T12:37:17Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183628544",
      "id" : 1183628544,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GjL0A",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1410802127,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183628544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T12:37:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183628544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183633068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633068"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wonder if the for loop can be removed, and replaced by the shutdown workflow from https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345237799? See also 5921b863e39e5c3997895ffee1c87159e37a5d6f  ",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T12:41:32Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183633068",
      "id" : 1183633068,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GjM6s",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1410809032,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633068/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T12:43:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183633786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633786"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See also https://github.com/bitcoin/bitcoin/issues/25055",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T12:42:11Z",
      "diff_hunk" : "@@ -21,7 +23,9 @@ BOOST_FIXTURE_TEST_SUITE(blockmanager_tests, BasicTestingSetup)\n BOOST_AUTO_TEST_CASE(blockmanager_find_block_pos)\n {\n     const auto params {CreateChainParams(ArgsManager{}, CBaseChainParams::MAIN)};\n-    BlockManager blockman{{}};\n+    BlockManager::Options blockman_opts{};\n+    ApplyArgsManOptions(gArgs, blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183633786",
      "id" : 1183633786,
      "in_reply_to_id" : 1183527429,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585GjNF6",
      "original_commit_id" : "7e0e84c1a3587f8b2ffac00f647d1e2d17febb91",
      "original_line" : 27,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/test/blockmanager_tests.cpp",
      "position" : 29,
      "pull_request_review_id" : 1410810383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633786/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T12:42:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183633786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183652859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183652859"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the context, I see that I am conceptually going backwards here.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T12:58:46Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183652859",
      "id" : 1183652859,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GjRv7",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1410841656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183652859/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T12:58:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183652859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183738245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183738245"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I wonder if the for loop can be removed, and replaced by the shutdown workflow from https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345237799\r\n\r\nThat does sound more sane than continuously re-indexing forever, or waiting for the user to interrupt. \r\n\r\nThe change I pushed will be reverted. How about instead of moving the previously `static` functions of `blockstorage.cpp` into its `BlockManager` class, moving them to a stateless sub-class of the `BlockManager`? Then we can have the node context be the owner of this class, and pass it through as a const reference to the `ChainstateManager` and its `BlockManager`, as well as the `zmq` code, which can now use this class without taking ownership of the entire `BlockManager`?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T14:06:04Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183738245",
      "id" : 1183738245,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GjmmF",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1410979685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183738245/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T14:06:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183738245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183761759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183761759"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I very much like them to be stateful, see also https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183556059 . This is also needed for some other, unrelated, stuff that someone should be working on (cc @josibake )\r\n\r\n",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T14:23:38Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183761759",
      "id" : 1183761759,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GjsVf",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1411017191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183761759/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T14:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183761759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183762778"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183762778"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This cleanup applies to other functions as well, so I am happy to have this split up (for those other functions), to avoid this pull from growing too large?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T14:24:26Z",
      "diff_hunk" : "@@ -207,7 +205,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!ReadBlockFromDisk(block, pindex, consensus_params)) {\n+            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183762778",
      "id" : 1183762778,
      "in_reply_to_id" : 1183556059,
      "line" : 208,
      "node_id" : "PRRC_kwDOABII585Gjsla",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 208,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1411018834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183762778/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T14:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183762778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183797966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183797966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was unclear with the word \"stateless\". What I meant was, \"does not retain memory of previous interactions\", e.g. we set all the options (including the consensus params) on initialization. ",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T14:49:03Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183797966",
      "id" : 1183797966,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585Gj1LO",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1411075359,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183797966/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T14:49:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183797966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183816539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183816539"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I copied this behavior from `ChainstateManagerOpts`. We expect the default constructed `Options` to contain defaults. If we don't have defaults, we assign on object construction. So, yes, in both instances a `const` qualifier (and maybe in others using the same pattern) should be added.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T15:02:17Z",
      "diff_hunk" : "@@ -1431,7 +1431,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{\n+        .blocks_dir = args.GetBlocksDirPath(),\n+    };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183816539",
      "id" : 1183816539,
      "in_reply_to_id" : 1183569789,
      "line" : 1436,
      "node_id" : "PRRC_kwDOABII585Gj5tb",
      "original_commit_id" : "6b5eb9376c97ac7edd096754708aba6d454cef76",
      "original_line" : 1436,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 68,
      "pull_request_review_id" : 1411105678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183816539/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T15:02:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183816539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183898508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183898508"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For now, I will go back to this https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1141893047 , where you also suggested to use `findBlock`.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-03T16:04:11Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183898508",
      "id" : 1183898508,
      "in_reply_to_id" : 1183537074,
      "line" : 1440,
      "node_id" : "PRRC_kwDOABII585GkNuM",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 72,
      "pull_request_review_id" : 1411245454,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183898508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T16:04:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183898508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184686191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184686191"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems like it's a bug: https://github.com/include-what-you-use/include-what-you-use/issues/648\r\n\r\nSince it sounds like it's going to be fixed in an upcoming version, I'll remove the `memory` include.",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-04T08:13:58Z",
      "diff_hunk" : "@@ -5,8 +5,15 @@\n #include <node/blockmanager_args.h>\n \n #include <common/args.h>\n+#include <node/blockstorage.h>\n+#include <tinyformat.h>\n+#include <util/translation.h>\n #include <validation.h>\n \n+#include <cstdint>\n+#include <memory>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184686191",
      "id" : 1184686191,
      "in_reply_to_id" : 1183519088,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII585GnOBv",
      "original_commit_id" : "a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : 10,
      "pull_request_review_id" : 1412544822,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184686191/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T08:13:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184686191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184783154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184783154"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like this fix is part of the branch we are using, so this seems a separate bug?",
      "commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "created_at" : "2023-05-04T09:38:33Z",
      "diff_hunk" : "@@ -5,8 +5,15 @@\n #include <node/blockmanager_args.h>\n \n #include <common/args.h>\n+#include <node/blockstorage.h>\n+#include <tinyformat.h>\n+#include <util/translation.h>\n #include <validation.h>\n \n+#include <cstdint>\n+#include <memory>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184783154",
      "id" : 1184783154,
      "in_reply_to_id" : 1183519088,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII585Gnlsy",
      "original_commit_id" : "a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : 10,
      "pull_request_review_id" : 1412723611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184783154/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T09:38:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184783154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184822728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184822728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Huh, yeah, seems like it. But I guess the issue is similar to what is happening here?",
      "commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "created_at" : "2023-05-04T10:15:05Z",
      "diff_hunk" : "@@ -5,8 +5,15 @@\n #include <node/blockmanager_args.h>\n \n #include <common/args.h>\n+#include <node/blockstorage.h>\n+#include <tinyformat.h>\n+#include <util/translation.h>\n #include <validation.h>\n \n+#include <cstdint>\n+#include <memory>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184822728",
      "id" : 1184822728,
      "in_reply_to_id" : 1183519088,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GnvXI",
      "original_commit_id" : "a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : null,
      "pull_request_review_id" : 1412788151,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184822728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T10:15:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184822728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184831690"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184831690"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure if it is possible for lambda's to shadow a function that they call. Can you show me what you mean?",
      "commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "created_at" : "2023-05-04T10:25:21Z",
      "diff_hunk" : "@@ -155,7 +156,7 @@ BOOST_FIXTURE_TEST_CASE(blockfilter_index_initial_sync, BuildChainTestingSetup)\n         for (block_index = m_node.chainman->ActiveChain().Genesis();\n              block_index != nullptr;\n              block_index = m_node.chainman->ActiveChain().Next(block_index)) {\n-            CheckFilterLookups(filter_index, block_index, last_header);\n+            CheckFilterLookups(filter_index, block_index, last_header, m_node.chainman->m_blockman);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184831690",
      "id" : 1184831690,
      "in_reply_to_id" : 1183561359,
      "line" : 159,
      "node_id" : "PRRC_kwDOABII585GnxjK",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 159,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/blockfilter_index_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 1412802067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184831690/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T10:25:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184831690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184832621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184832621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess it would help upstream if someone created an issue with a minimal reproducer and minimal steps to reproduce, starting from scratch.",
      "commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "created_at" : "2023-05-04T10:26:26Z",
      "diff_hunk" : "@@ -5,8 +5,15 @@\n #include <node/blockmanager_args.h>\n \n #include <common/args.h>\n+#include <node/blockstorage.h>\n+#include <tinyformat.h>\n+#include <util/translation.h>\n #include <validation.h>\n \n+#include <cstdint>\n+#include <memory>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184832621",
      "id" : 1184832621,
      "in_reply_to_id" : 1183519088,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gnxxt",
      "original_commit_id" : "a48fd5f3c17a0a6030d0ba47fa42be41f7e4aad9",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/node/blockmanager_args.cpp",
      "position" : null,
      "pull_request_review_id" : 1412803548,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184832621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T10:26:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184832621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184846753"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184846753"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Apologies for sniping this in #27570. Feel free to NACK",
      "commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "created_at" : "2023-05-04T10:41:40Z",
      "diff_hunk" : "@@ -207,7 +205,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!ReadBlockFromDisk(block, pindex, consensus_params)) {\n+            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184846753",
      "id" : 1184846753,
      "in_reply_to_id" : 1183556059,
      "line" : 208,
      "node_id" : "PRRC_kwDOABII585Gn1Oh",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 208,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1412826213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184846753/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T10:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184846753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-05-04T10:45:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1534536200",
      "id" : 1534536200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bdyoI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534536200/reactions"
      },
      "updated_at" : "2023-05-04T10:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534536200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review and discussion @MarcoFalke!\r\n\r\nUpdated f59f0c91acb7a35b767bb0dc75ed8b10add81d9f -> db668b3644883c07064b46b4e2cfd269ac9dffbd ([removeBlockstorageArgs_17](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_17) -> [removeBlockstorageArgs_18](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_18), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_17..removeBlockstorageArgs_18)) \r\n* Reverted a previous change moving `BlockManager` initialization out of the `ChainstateManager` as discssed in https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183537074\r\n* Added a commit a614ac59cd753c7ef83899602e0176654c5fff87 introducing an interface function for accessing the `BlockManager::ReadBlockFromDisk`. This was introduced since existing functions were more complex and less efficient than just a direct call. If this interface should not grow, I can drop this commit again and use a different method, like the previously discussed `FindBlock` in the following commit.\r\n* Added a commit 6b9ba7b54097bb32d3c1596b7fdcec4428c27a3a capturing this introduced interface function in a lambda and using it in the zmq code. Capturing the `node.chain` should be safe for the purpose of zmq notifying about block tip changes, even with the for loop re-declaring the `ChainstateManager`.\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183565479), reordering the commits. Functions are now moved to `BlockManager` methods before removing `ArgsManager` usage.\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183570901), adding `nodiscard` qualifier.\r\n* Addressed @MarcoFalke [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183569789), adding `const` qualifier to Options.\r\n* Addressed @MarcoFalke [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183527429), using `m_args` for the test arguments.\r\n* Addressed @MarcoFalke [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183519088), removing `memory` include.\r\n* No longer use `nullptr`for the `g_zmq_notification_interface` in 8bcd56f2aee46ccc28354882009fc38925e629df",
      "created_at" : "2023-05-04T11:15:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1534586459",
      "id" : 1534586459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bd-5b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534586459/reactions"
      },
      "updated_at" : "2023-05-04T11:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534586459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184962143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184962143"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a614ac59cd753c7ef83899602e0176654c5fff87, nit, naming:\r\n```suggestion\r\n    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* index) = 0;\r\n```",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-04T12:43:42Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* pindex) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184962143",
      "id" : 1184962143,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GoRZf",
      "original_commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : null,
      "pull_request_review_id" : 1413008558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184962143/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T12:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184962143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184963724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184963724"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6b9ba7b54097bb32d3c1596b7fdcec4428c27a3a\r\n\r\nIsn't capturing `[&get_block_by_index]` enough?",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-04T12:45:12Z",
      "diff_hunk" : "@@ -39,12 +39,14 @@ std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotif\n     return result;\n }\n \n-CZMQNotificationInterface* CZMQNotificationInterface::Create()\n+std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create(std::function<bool(CBlock&, const CBlockIndex*)> get_block_by_index)\n {\n     std::map<std::string, CZMQNotifierFactory> factories;\n     factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n     factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n-    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawblock\"] = [&get_block_by_index = get_block_by_index]() -> std::unique_ptr<CZMQAbstractNotifier> {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184963724",
      "id" : 1184963724,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GoRyM",
      "original_commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "original_line" : 47,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 1413008558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184963724/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T12:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184963724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184989106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184989106"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is called `pindex` in the original: https://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.h#L235 . Is that wrong?",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-04T13:06:51Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* pindex) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184989106",
      "id" : 1184989106,
      "in_reply_to_id" : 1184962143,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GoX-y",
      "original_commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : null,
      "pull_request_review_id" : 1413052582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184989106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T13:06:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1184989106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1185002800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185002800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No, it is not wrong. Just mentioned it as in new code we do not make a reference to a type of the variable in its name:\r\n```\r\ngit grep -e \"CBlockIndex\\* index\"\r\n```\r\n\r\nFeel free to ignore :)",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-04T13:17:47Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* pindex) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1185002800",
      "id" : 1185002800,
      "in_reply_to_id" : 1184962143,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GobUw",
      "original_commit_id" : "db668b3644883c07064b46b4e2cfd269ac9dffbd",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : null,
      "pull_request_review_id" : 1413074142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185002800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-04T13:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185002800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @hebasto \r\n\r\nUpdated db668b3644883c07064b46b4e2cfd269ac9dffbd -> 9033dc6827cc623f1f7176fde120229f36ff5e74 ([removeBlockstorageArgs_18](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_18) -> [removeBlockstorageArgs_19](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_19), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_18..removeBlockstorageArgs_19)) \r\n\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27125#pullrequestreview-1413008558), removing unneeded change in a commit, and implementing in the commit it was actually required.\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184962143), dropping the `p` naming prefix.\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1184963724), removing capture assignment that was accidentally carried over from a previous code iteration.",
      "created_at" : "2023-05-04T13:43:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1534807710",
      "id" : 1534807710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585be06e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534807710/reactions"
      },
      "updated_at" : "2023-05-04T13:43:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1534807710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1185099728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185099728"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Passing a pointer from one process to another one is UB. I wonder if there should be a compile failure if someone adds a pointer type to the multiprocess interface? cc ryan ",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-04T14:25:57Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* index) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1185099728",
      "id" : 1185099728,
      "line" : 176,
      "node_id" : "PRRC_kwDOABII585Goy_Q",
      "original_commit_id" : "4ee6cb2d3fae18d3adb9922eccc370db34fc80bc",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : 13,
      "pull_request_review_id" : 1413243012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185099728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T11:42:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1185099728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186086311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186086311"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1185099728\r\n\r\nIn general it's ok to pass pointers and references. These are both really useful for output parameters, so the IPC framework does support them. But the type needs to be serializable, and it isn't really possible to write serialization code for the `CBlockIndex` type because of the pprev pointers it contains. It compile error in #10102 to try to pass types that aren't serializable.\r\n\r\nFor this PR would suggest not adding a new chain method, and instead doing:\r\n\r\n```diff\r\n@@ -1425,7 +1425,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n #if ENABLE_ZMQ\r\n     g_zmq_notification_interface = CZMQNotificationInterface::Create(\r\n         [&chain = node.chain](CBlock& block, const CBlockIndex* index) {\r\n-            return chain->getBlockByIndex(block, index);\r\n+            return chain->findBlock(index->GetBlockHash(), interfaces::FoundBlock().data(block));\r\n         });\r\n \r\n     if (g_zmq_notification_interface) {\r\n``` \r\n\r\nIt'd also be fine not to use the chain interface and just call ReadBlockFromDisk directly there",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-05T13:19:11Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* index) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186086311",
      "id" : 1186086311,
      "in_reply_to_id" : 1185099728,
      "line" : 176,
      "node_id" : "PRRC_kwDOABII585Gsj2n",
      "original_commit_id" : "4ee6cb2d3fae18d3adb9922eccc370db34fc80bc",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : 13,
      "pull_request_review_id" : 1411202761,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186086311/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T13:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186086311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186093566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186093566"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for taking a look. It's also not used by an actual client of the interface, so I think I'll just drop the commit then. No need to needlessly pollute the interface. ",
      "commit_id" : "9033dc6827cc623f1f7176fde120229f36ff5e74",
      "created_at" : "2023-05-05T13:25:49Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* index) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186093566",
      "id" : 1186093566,
      "in_reply_to_id" : 1185099728,
      "line" : 176,
      "node_id" : "PRRC_kwDOABII585Gsln-",
      "original_commit_id" : "4ee6cb2d3fae18d3adb9922eccc370db34fc80bc",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : 13,
      "pull_request_review_id" : 1414790326,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186093566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T13:25:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186093566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @MarcoFalke and @ryanofsky  \r\n\r\nUpdated 9033dc6827cc623f1f7176fde120229f36ff5e74 -> e056d6f758382d3418682095ab02f8d487aa641f ([removeBlockstorageArgs_19](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_19) -> [removeBlockstorageArgs_20](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_20), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_19..removeBlockstorageArgs_20))\r\n* Dropped the commit changing the interface\r\n* Changed the lambda to capture a reference to the node's chainman and call `ReadBlockFromDisk` from its `m_blockman`. I think this is equivalent to going through the `chain` interface's `findBlock`, which also accesses `m_node.chainman`.",
      "created_at" : "2023-05-05T14:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1536319288",
      "id" : 1536319288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bkl84",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536319288/reactions"
      },
      "updated_at" : "2023-05-05T14:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536319288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186200624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186200624"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: The following diff compiles for me:\r\n\r\n```diff\r\ndiff --git a/src/kernel/chainstatemanager_opts.h b/src/kernel/chainstatemanager_opts.h\r\nindex 2395f60164..dd75985332 100644\r\n--- a/src/kernel/chainstatemanager_opts.h\r\n+++ b/src/kernel/chainstatemanager_opts.h\r\n@@ -29,7 +29,7 @@ namespace kernel {\r\n  */\r\n struct ChainstateManagerOpts {\r\n     const CChainParams& chainparams;\r\n-    fs::path datadir;\r\n+    const fs::path datadir;\r\n     const std::function<NodeClock::time_point()> adjusted_time_callback{nullptr};\r\n     std::optional<bool> check_block_index{};\r\n     bool checkpoints_enabled{DEFAULT_CHECKPOINTS_ENABLED};\r\n",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-05T14:59:12Z",
      "diff_hunk" : "@@ -1431,7 +1431,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{\n+        .blocks_dir = args.GetBlocksDirPath(),\n+    };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1186200624",
      "id" : 1186200624,
      "in_reply_to_id" : 1183569789,
      "line" : 1454,
      "node_id" : "PRRC_kwDOABII585Gs_ww",
      "original_commit_id" : "6b5eb9376c97ac7edd096754708aba6d454cef76",
      "original_line" : 1454,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 75,
      "pull_request_review_id" : 1414964130,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186200624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-05T14:59:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1186200624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-05T16:57:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1536530706",
      "id" : 1536530706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585blZkS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536530706/reactions"
      },
      "updated_at" : "2023-05-05T16:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536530706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased e056d6f758382d3418682095ab02f8d487aa641f -> 3b34ac7465919b968795063995f6610a73aa2d29 ([removeBlockstorageArgs_20](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_20) -> [removeBlockstorageArgs_21](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_21), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_20..removeBlockstorageArgs_21))\r\n* Fixed conflicts with #27570\r\n* Added a commit to remove the params argument from the functions moved into the `BlockManager`",
      "created_at" : "2023-05-05T20:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1536739318",
      "id" : 1536739318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585bmMf2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536739318/reactions"
      },
      "updated_at" : "2023-05-05T20:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536739318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187174928"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187174928"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in ea2a049b42f73499eaa1b69212af3514026440fd: Any reason to accept a nullptr here, which would be UB?\r\n\r\nI think it would be better to accept a `const CBlockIndex& block`.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T08:28:04Z",
      "diff_hunk" : "@@ -1422,7 +1422,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }\n \n #if ENABLE_ZMQ\n-    g_zmq_notification_interface = CZMQNotificationInterface::Create();\n+    g_zmq_notification_interface = CZMQNotificationInterface::Create(\n+        [&chainman = node.chainman](CBlock& block, const CBlockIndex* index) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187174928",
      "id" : 1187174928,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GwtoQ",
      "original_commit_id" : "ea2a049b42f73499eaa1b69212af3514026440fd",
      "original_line" : 1426,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1416363907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187174928/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T09:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187174928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187180745"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187180745"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also, it would be good to include the diff in `src/zmq/zmqpublishnotifier.cpp` from the next commit. This makes review easier, because reviewers can see that the function-to-lambda is a simple 1-1 replacement that compiles and passes all tests on its own.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T08:33:37Z",
      "diff_hunk" : "@@ -1422,7 +1422,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }\n \n #if ENABLE_ZMQ\n-    g_zmq_notification_interface = CZMQNotificationInterface::Create();\n+    g_zmq_notification_interface = CZMQNotificationInterface::Create(\n+        [&chainman = node.chainman](CBlock& block, const CBlockIndex* index) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187180745",
      "id" : 1187180745,
      "in_reply_to_id" : 1187174928,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GwvDJ",
      "original_commit_id" : "ea2a049b42f73499eaa1b69212af3514026440fd",
      "original_line" : 1426,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1416363907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187180745/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T09:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187180745",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187190754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187190754"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in 1def580e80a1892e473324016db9a0f2ffec0c27: (For this method and others like `UndoReadFromDisk` ...) It is UB to pass a nullptr pindex, so it would be good, while touching the function signature in this pull request to switch the pointer to a reference.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T08:44:15Z",
      "diff_hunk" : "@@ -207,7 +205,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!ReadBlockFromDisk(block, pindex, consensus_params)) {\n+            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187190754",
      "id" : 1187190754,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gwxfi",
      "original_commit_id" : "1def580e80a1892e473324016db9a0f2ffec0c27",
      "original_line" : 208,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1416363907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187190754/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T09:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187190754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187211843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187211843"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in 0400fb7b55415867d9ff0aa88898920c60b4b2df: The function parameter consensusParams is now unused and should be removed?",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T09:05:20Z",
      "diff_hunk" : "@@ -143,7 +143,7 @@ CTransactionRef GetTransaction(const CBlockIndex* const block_index, const CTxMe\n     }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187211843",
      "id" : 1187211843,
      "line" : 143,
      "node_id" : "PRRC_kwDOABII585Gw2pD",
      "original_commit_id" : "0400fb7b55415867d9ff0aa88898920c60b4b2df",
      "original_line" : 143,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/node/transaction.cpp",
      "position" : 10,
      "pull_request_review_id" : 1416363907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187211843/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T09:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187211843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263200"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263200"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:00:39Z",
      "diff_hunk" : "@@ -171,6 +172,9 @@ class Chain\n         const uint256& ancestor_hash,\n         const FoundBlock& ancestor_out={}) = 0;\n \n+    //! Get a CBlock by its index and return whether successful.\n+    virtual bool getBlockByIndex(CBlock& block, const CBlockIndex* index) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263200",
      "id" : 1187263200,
      "in_reply_to_id" : 1185099728,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDLg",
      "original_commit_id" : "4ee6cb2d3fae18d3adb9922eccc370db34fc80bc",
      "original_line" : 176,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/interfaces/chain.h",
      "position" : null,
      "pull_request_review_id" : 1416505149,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263200/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:00:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:00:53Z",
      "diff_hunk" : "@@ -207,6 +205,8 @@ class BlockManager\n \n     [[nodiscard]] bool LoadingBlocks() const { return m_importing || fReindex; }\n \n+    bool StopAfterBlockImport() const { return m_opts.stop_after_block_import; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263434",
      "id" : 1187263434,
      "in_reply_to_id" : 1183570901,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDPK",
      "original_commit_id" : "f59f0c91acb7a35b767bb0dc75ed8b10add81d9f",
      "original_line" : 208,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.h",
      "position" : null,
      "pull_request_review_id" : 1416505500,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263434/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263618"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:01:05Z",
      "diff_hunk" : "@@ -584,7 +584,7 @@ void BlockManager::UnlinkPrunedFiles(const std::set<int>& setFilesToPrune) const\n \n FlatFileSeq BlockManager::BlockFileSeq() const\n {\n-    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", gArgs.GetBoolArg(\"-fastprune\", false) ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);\n+    return FlatFileSeq(gArgs.GetBlocksDirPath(), \"blk\", m_opts.fast_prune ? 0x4000 /* 16kb */ : BLOCKFILE_CHUNK_SIZE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263618",
      "id" : 1187263618,
      "in_reply_to_id" : 1183565479,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDSC",
      "original_commit_id" : "f665024be7e5cc0a91ac7ff5779209313453a043",
      "original_line" : 587,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1416505775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263618/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:01:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263868"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not worth it on a second thought, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:01:22Z",
      "diff_hunk" : "@@ -155,7 +156,7 @@ BOOST_FIXTURE_TEST_CASE(blockfilter_index_initial_sync, BuildChainTestingSetup)\n         for (block_index = m_node.chainman->ActiveChain().Genesis();\n              block_index != nullptr;\n              block_index = m_node.chainman->ActiveChain().Next(block_index)) {\n-            CheckFilterLookups(filter_index, block_index, last_header);\n+            CheckFilterLookups(filter_index, block_index, last_header, m_node.chainman->m_blockman);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263868",
      "id" : 1187263868,
      "in_reply_to_id" : 1183561359,
      "line" : 159,
      "node_id" : "PRRC_kwDOABII585GxDV8",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 159,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/blockfilter_index_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 1416506250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263868/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:01:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263993"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:01:31Z",
      "diff_hunk" : "@@ -207,7 +205,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!ReadBlockFromDisk(block, pindex, consensus_params)) {\n+            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187263993",
      "id" : 1187263993,
      "in_reply_to_id" : 1183556059,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDX5",
      "original_commit_id" : "512592cf41ae8fb307bd6eb651e3319e5053851e",
      "original_line" : 208,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1416506469,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263993/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187263993",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187264411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, thread can be resolved",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:01:57Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187264411",
      "id" : 1187264411,
      "in_reply_to_id" : 1183537074,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDeb",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1416507153,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264411/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:01:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187264889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "or maybe the unrelated comment https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183633068 can be transformed into an issue?",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T10:02:35Z",
      "diff_hunk" : "@@ -1439,9 +1440,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     };\n     Assert(!ApplyArgsManOptions(args, chainman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n-    node::BlockManager::Options blockman_opts{};\n+    BlockManager::Options blockman_opts{};\n     Assert(!ApplyArgsManOptions(args, blockman_opts)); // no error can happen, already checked in AppInitParameterInteraction\n \n+    assert(!node.blockman);\n+    node.blockman = std::make_unique<BlockManager>(blockman_opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187264889",
      "id" : 1187264889,
      "in_reply_to_id" : 1183537074,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxDl5",
      "original_commit_id" : "87999089e1b7794cd595ca19893a383149546087",
      "original_line" : 1447,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1416508004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264889/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T10:02:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187264889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187459164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187459164"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Move functions to BlockManager methods\" (1def580e80a1892e473324016db9a0f2ffec0c27)\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1140490220\r\n\r\n> Thank you for the suggestion, will split this up.\r\n\r\nSeems like this could be marked resolved\r\n",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T13:38:18Z",
      "diff_hunk" : "@@ -236,11 +240,11 @@ class BlockManager\n     bool ReadBlockFromDisk(CBlock& block, const FlatFilePos& pos, const Consensus::Params& consensusParams) const;\n     bool ReadBlockFromDisk(CBlock& block, const CBlockIndex* pindex, const Consensus::Params& consensusParams) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187459164",
      "id" : 1187459164,
      "in_reply_to_id" : 1140427662,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GxzBc",
      "original_commit_id" : "fd015c73b0ef6cfaf2960c24359d58d658fbbeeb",
      "original_line" : 241,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.h",
      "position" : null,
      "pull_request_review_id" : 1416823725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187459164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T13:58:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187459164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187472027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187472027"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Use BlockManager options for params\" (0400fb7b55415867d9ff0aa88898920c60b4b2df)\r\n\r\nSeem like you could squash this commit into the last commit and decrease review burden because the changes are mechanical and basically every line that changed here changed last commit. Not important though.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T13:50:05Z",
      "diff_hunk" : "@@ -205,7 +203,7 @@ void BaseIndex::ThreadSync()\n \n             CBlock block;\n             interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, pindex, consensus_params)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187472027",
      "id" : 1187472027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gx2Kb",
      "original_commit_id" : "0400fb7b55415867d9ff0aa88898920c60b4b2df",
      "original_line" : 208,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1416823725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187472027/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T13:58:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187472027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187910876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187910876"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is a slightly different approach to `-fastprune` and others, which are set in `ApplyArgsManOptions()`.\r\nSo I wonder what is the criterion for an arg to be set in `ApplyArgsManOptions()`, as opposed to being initialized directly? And, closely connected, isn't the current approach of not calling `ApplyArgsManOptions()` in some spots (`setup_common`, some unit tests) a bit brittle? (considering that users could specify extra bitcoind args while running unit tests, which then would be ignored)",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-08T21:24:01Z",
      "diff_hunk" : "@@ -1035,8 +1036,9 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         if (const auto error{ApplyArgsManOptions(args, chainman_opts_dummy)}) {\n             return InitError(*error);\n         }\n-        node::BlockManager::Options blockman_opts_dummy{\n+        BlockManager::Options blockman_opts_dummy{\n             .chainparams = chainman_opts_dummy.chainparams,\n+            .blocks_dir = args.GetBlocksDirPath(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187910876",
      "id" : 1187910876,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII585GzhTc",
      "original_commit_id" : "cb27dfb5afeb7978dc8c01f1160f4512d0e062db",
      "original_line" : 1043,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 1417536295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187910876/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-09T17:35:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187910876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1189064293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189064293"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> This is a slightly different approach to -fastprune and others, which are set in ApplyArgsManOptions().\r\nSo I wonder what is the criterion for an arg to be set in ApplyArgsManOptions(), as opposed to being initialized directly? \r\n\r\nInitializing in the list is done for option members that don't have sane default or empty values. This also has precedent in the `ChainstateManager::Options`. \r\n\r\n> And, closely connected, isn't the current approach of not calling ApplyArgsManOptions() in some spots (setup_common, some unit tests) a bit brittle?\r\n\r\nYes, the current situation does not seem to be ideal. Sometimes these `extra_args` that the user can supply are currently parsed into the Options in the particular tests, and sometimes, like for the `ChainstateManager`, they are ignored. This is down to the mixed usage of both the `m_args`, which creates a fresh, default `ArgsManager` for each test, and the `m_node.args`, which parses all the passed in arguments. \r\n\r\nThis was brought up previously in this PR in https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1183527429, where based on the related discussion in https://github.com/bitcoin/bitcoin/issues/25055 and https://github.com/bitcoin/bitcoin/pull/21244#discussion_r615307465 I decided to keep the current behavior. If I understand the current problem correctly, it is not ideal that the `m_node.args` points to the global mutable `gArgs` instead of re-creating the arguments cleanly on each test run, while `m_args` is recreated on each run, but does not read the extra arguments. \r\n\r\nBased on this, I am not sure how to proceed with this on this PR, since I do think that the current approach is broken. I could add a commit making the argument handling consistent for all the `Options`, at least that would make it probably less broken than it is now. What do you think?\r\n",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-09T19:46:00Z",
      "diff_hunk" : "@@ -1035,8 +1036,9 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         if (const auto error{ApplyArgsManOptions(args, chainman_opts_dummy)}) {\n             return InitError(*error);\n         }\n-        node::BlockManager::Options blockman_opts_dummy{\n+        BlockManager::Options blockman_opts_dummy{\n             .chainparams = chainman_opts_dummy.chainparams,\n+            .blocks_dir = args.GetBlocksDirPath(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1189064293",
      "id" : 1189064293,
      "in_reply_to_id" : 1187910876,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII585G365l",
      "original_commit_id" : "cb27dfb5afeb7978dc8c01f1160f4512d0e062db",
      "original_line" : 1043,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 1419352716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189064293/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-09T19:46:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189064293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 3b34ac7465919b968795063995f6610a73aa2d29 -> 24f1ace25081040af80ba4cf1636592266d8dbb5 ([removeBlockstorageArgs_21](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_21) -> [removeBlockstorageArgs_22](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_22), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_21..removeBlockstorageArgs_22))\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187190754) and [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187180745) making `CBlockIndex` a reference in `ReadBlockFromDisk` and `UndoReadFromDisk` as well as in the new zmq lambda function.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187472027) by squashing commits changing the function signature of the moved functions. Also did this for the `CBlockIndex` argument change.\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187211843) removing unused consensus params in `src/node/transaction.cpp`\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1187180745) making sure the lambda is defined in one, atomic commit. \r\n\r\nRebased 24f1ace25081040af80ba4cf1636592266d8dbb5 -> 8f94f059b3af5ecaf175a95389ba5e73b724203b ([removeBlockstorageArgs_22](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_22) -> [removeBlockstorageArgs_23](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_23), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_22..removeBlockstorageArgs_23))\r\n* Fixed conflicts with https://github.com/bitcoin/bitcoin/pull/27491",
      "created_at" : "2023-05-10T07:00:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1541454221",
      "id" : 1541454221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585b4LmN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541454221/reactions"
      },
      "updated_at" : "2023-05-10T07:00:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541454221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nice.\r\n\r\nre-ACK 24f1ace25081040af80ba4cf1636592266d8dbb5   ð¦\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 24f1ace25081040af80ba4cf1636592266d8dbb5   ð¦\r\nIX4DDtG96O/vTN0xyOyRw6n6dFGy59g9TyHzovXrie+lvGr2wMJeeOvSbQPLCSl08HXWYCbLSC/LP3sqJzD+AA==\r\n```\r\n\r\n</details>\r\n",
      "created_at" : "2023-05-10T07:30:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1541493057",
      "id" : 1541493057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585b4VFB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541493057/reactions"
      },
      "updated_at" : "2023-05-10T07:30:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541493057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "trivial rebase re-ACK 8f94f059b3af5ecaf175a95389ba5e73b724203b ð\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: trivial rebase re-ACK 8f94f059b3af5ecaf175a95389ba5e73b724203b ð\r\nIJvbWV8BH4qE1BxY+hGbsdP4EvakcWtP3Ryi2ezkt+UfLS/RJhQc4QJ6u9zxvmShvLdpsFomlooRZAMl7D3aCQ==\r\n```\r\n\r\n</details>\r\n",
      "created_at" : "2023-05-10T07:31:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1541494448",
      "id" : 1541494448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585b4Vaw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541494448/reactions"
      },
      "updated_at" : "2023-05-10T07:31:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541494448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1189743041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189743041"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems unrelated, so maybe do in a follow-up or not at all?",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T11:03:41Z",
      "diff_hunk" : "@@ -1035,8 +1036,9 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         if (const auto error{ApplyArgsManOptions(args, chainman_opts_dummy)}) {\n             return InitError(*error);\n         }\n-        node::BlockManager::Options blockman_opts_dummy{\n+        BlockManager::Options blockman_opts_dummy{\n             .chainparams = chainman_opts_dummy.chainparams,\n+            .blocks_dir = args.GetBlocksDirPath(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1189743041",
      "id" : 1189743041,
      "in_reply_to_id" : 1187910876,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII585G6gnB",
      "original_commit_id" : "cb27dfb5afeb7978dc8c01f1160f4512d0e062db",
      "original_line" : 1043,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 1420376717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189743041/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T11:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1189743041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 8f94f059b3af5ecaf175a95389ba5e73b724203b -> 886a473fc48f2c7d67436b5d9ac5643cd007e27f ([removeBlockstorageArgs_23](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_23) -> [removeBlockstorageArgs_24](https://github.com/TheCharlatan/bitcoin/tree/removeBlockstorageArgs_24), [compare](https://github.com/TheCharlatan/bitcoin/compare/removeBlockstorageArgs_23..removeBlockstorageArgs_24))\r\n* Fixed conflicts with https://github.com/bitcoin/bitcoin/pull/27573",
      "created_at" : "2023-05-10T11:16:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#issuecomment-1541983546",
      "id" : 1541983546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
      "node_id" : "IC_kwDOABII585b6M06",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541983546/reactions"
      },
      "updated_at" : "2023-05-10T11:16:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1541983546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190097934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190097934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"zmq: Pass lambda to zmq's ZMQPublishRawBlockNotifier\" (6247b3c5e3c9e70097243a85b3d883b279a473cc)\r\n\r\nIt looks like the lambda is taking a reference to the local `get_block_by_index` variable here, which doesn't seem right, since the variable will go out of scope before the lambda is called. So I think `&` should be dropped here.\r\n\r\nNot totally sure though, since I would expect there to be problems in CI if there was a bug.\r\n\r\nEDIT: I think moving instead of copying would also work:\r\n\r\n```c++\r\n    factories[\"pubrawblock\"] = [gb = std::move(get_block_by_index)]() -> std::unique_ptr<CZMQAbstractNotifier> {\r\n       return std::make_unique<CZMQPublishRawBlockNotifier>(std::move(gb));\r\n    };",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T15:41:35Z",
      "diff_hunk" : "@@ -39,12 +39,14 @@ std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotif\n     return result;\n }\n \n-std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create()\n+std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create(std::function<bool(CBlock&, const CBlockIndex&)> get_block_by_index)\n {\n     std::map<std::string, CZMQNotifierFactory> factories;\n     factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n     factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n-    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawblock\"] = [&get_block_by_index]() -> std::unique_ptr<CZMQAbstractNotifier> {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190097934",
      "id" : 1190097934,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585G73QO",
      "original_commit_id" : "6247b3c5e3c9e70097243a85b3d883b279a473cc",
      "original_line" : 47,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : 11,
      "pull_request_review_id" : 1420931981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190097934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T15:48:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190097934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190102588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190102588"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"zmq: Pass lambda to zmq's ZMQPublishRawBlockNotifier\" (6247b3c5e3c9e70097243a85b3d883b279a473cc)\r\n\r\nWould probably be a little more efficient to make the get_block_by_index non-const and use `m_get_block_by_index{std::move(get_block_by_index)}` to move the function instead of copying it.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T15:45:21Z",
      "diff_hunk" : "@@ -46,7 +48,12 @@ class CZMQPublishHashTransactionNotifier : public CZMQAbstractPublishNotifier\n \n class CZMQPublishRawBlockNotifier : public CZMQAbstractPublishNotifier\n {\n+private:\n+    const std::function<bool(CBlock&, const CBlockIndex&)> m_get_block_by_index;\n+\n public:\n+    CZMQPublishRawBlockNotifier(const std::function<bool(CBlock&, const CBlockIndex&)> get_block_by_index)\n+        : m_get_block_by_index{get_block_by_index} {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190102588",
      "id" : 1190102588,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585G74Y8",
      "original_commit_id" : "6247b3c5e3c9e70097243a85b3d883b279a473cc",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/zmq/zmqpublishnotifier.h",
      "position" : null,
      "pull_request_review_id" : 1420938880,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190102588/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T16:59:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190102588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190113427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113427"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, no need to do change it in this PR.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T15:54:29Z",
      "diff_hunk" : "@@ -1035,8 +1036,9 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         if (const auto error{ApplyArgsManOptions(args, chainman_opts_dummy)}) {\n             return InitError(*error);\n         }\n-        node::BlockManager::Options blockman_opts_dummy{\n+        BlockManager::Options blockman_opts_dummy{\n             .chainparams = chainman_opts_dummy.chainparams,\n+            .blocks_dir = args.GetBlocksDirPath(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190113427",
      "id" : 1190113427,
      "in_reply_to_id" : 1187910876,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII585G77CT",
      "original_commit_id" : "cb27dfb5afeb7978dc8c01f1160f4512d0e062db",
      "original_line" : 1043,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 1420955025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113427/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T15:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190113760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113760"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor/iwyu: Complete includes for blockmanger_args\" (c065e093b1c786476d9bc9769e42c2a54ff68816)\r\n\r\n\"blockmanger_args\" spelling in commit title",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T15:54:44Z",
      "diff_hunk" : "@@ -52,6 +52,7 @@ if [ \"${RUN_TIDY}\" = \"true\" ]; then\n            src/dbwrapper.cpp \\\n            src/init \\\n            src/kernel \\\n+           src/node/blockmanager_args.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190113760",
      "id" : 1190113760,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585G77Hg",
      "original_commit_id" : "c065e093b1c786476d9bc9769e42c2a54ff68816",
      "original_line" : 55,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "ci/test/06_script_b.sh",
      "position" : 4,
      "pull_request_review_id" : 1420938880,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113760/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T16:59:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190113760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190136977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190136977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CZMQPublishRawBlockNotifier` takes `get_block_by_index` by value (meaning instead of borrowing, copies its value), so I think that is why this works out. ",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T16:15:35Z",
      "diff_hunk" : "@@ -39,12 +39,14 @@ std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotif\n     return result;\n }\n \n-std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create()\n+std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create(std::function<bool(CBlock&, const CBlockIndex&)> get_block_by_index)\n {\n     std::map<std::string, CZMQNotifierFactory> factories;\n     factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n     factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n-    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawblock\"] = [&get_block_by_index]() -> std::unique_ptr<CZMQAbstractNotifier> {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190136977",
      "id" : 1190136977,
      "in_reply_to_id" : 1190097934,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585G8AyR",
      "original_commit_id" : "6247b3c5e3c9e70097243a85b3d883b279a473cc",
      "original_line" : 47,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : 11,
      "pull_request_review_id" : 1420990515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190136977/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T16:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190136977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190174923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190174923"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190097934\r\n\r\nYeah sorry, I saw the \"factories\" map and assumed the factories would be long-lived, not destroyed before the function returns. This code is pretty strange, because it creates a map and then never looks anything up in the map. Could be cleaned up later, though. Probably a more sane way to write it would be to drop the map, change the outer for loop into an `add_notifiers` lambda, and do\r\n\r\n```c++\r\nadd_notifiers(\"pubhashblock\", CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>);\r\nadd_notifiers(\"pubhashtx\", CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>);\r\n...\r\n```\r\n\r\nIn any case, agree the current code is safe",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T16:51:23Z",
      "diff_hunk" : "@@ -39,12 +39,14 @@ std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotif\n     return result;\n }\n \n-std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create()\n+std::unique_ptr<CZMQNotificationInterface> CZMQNotificationInterface::Create(std::function<bool(CBlock&, const CBlockIndex&)> get_block_by_index)\n {\n     std::map<std::string, CZMQNotifierFactory> factories;\n     factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n     factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n-    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawblock\"] = [&get_block_by_index]() -> std::unique_ptr<CZMQAbstractNotifier> {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190174923",
      "id" : 1190174923,
      "in_reply_to_id" : 1190097934,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585G8KDL",
      "original_commit_id" : "6247b3c5e3c9e70097243a85b3d883b279a473cc",
      "original_line" : 47,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : 11,
      "pull_request_review_id" : 1420938880,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190174923/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T16:59:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190174923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190350876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190350876"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit (if you repush): blockman should be added to the doc, also it would be nice to keep the out param at the end according to dev notes.",
      "commit_id" : "5ff63a09a9edd1204b2cc56cf6f48a44adab7bb3",
      "created_at" : "2023-05-10T20:12:07Z",
      "diff_hunk" : "@@ -53,11 +54,10 @@ static const CFeeRate DEFAULT_MAX_RAW_TX_FEE_RATE{COIN / 10};\n  * @param[in]  block_index     The block to read from disk, or nullptr\n  * @param[in]  mempool         If provided, check mempool for tx\n  * @param[in]  hash            The txid\n- * @param[in]  consensusParams The params\n  * @param[out] hashBlock       The block hash, if the tx was found via -txindex or block_index",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190350876",
      "id" : 1190350876,
      "line" : 57,
      "node_id" : "PRRC_kwDOABII585G81Ac",
      "original_commit_id" : "f0bb1021f0d60f5f19176e67a66fcf7c325f88d1",
      "original_line" : 57,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/transaction.h",
      "position" : 13,
      "pull_request_review_id" : 1421312759,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190350876/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-10T20:17:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1190350876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
