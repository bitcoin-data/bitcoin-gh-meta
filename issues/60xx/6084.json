{
   "active_lock_reason" : "resolved",
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "If I have walletnotify set in my conf and try to import a private key, it always fails with:\n\n```\n$ bitcoin-cli importprivkey $key\nerror: {\"code\":-1,\"message\":\"boost::thread_resource_error: Resource temporarily unavailable\"}\n```\n\nI was watching the debug log when this happens, and see the rescan is calling AddToWallet for ALL past transactions, not just for the new imported private key. And it's trying to run the walletnotify program for every transaction.\n\nThe only way I can get this to work is to first stop bitcoin, disable walletnotify, then restart bitcoin to perform the importprivkey, then stop and re-enable walletnotify and restart.\n",
   "closed_at" : "2018-03-08T03:46:36Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
      "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
      "followers_url" : "https://api.github.com/users/meshcollider/followers",
      "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/meshcollider",
      "id" : 3211283,
      "login" : "meshcollider",
      "node_id" : "MDQ6VXNlcjMyMTEyODM=",
      "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
      "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
      "repos_url" : "https://api.github.com/users/meshcollider/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/meshcollider"
   },
   "comments" : 6,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/comments",
   "created_at" : "2015-04-29T14:54:31Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/6084",
   "id" : 71897505,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/labels{/name}",
   "locked" : true,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU3MTg5NzUwNQ==",
   "number" : 6084,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/timeline",
   "title" : "importprivkey fails when walletnotify is set",
   "updated_at" : "2021-09-08T12:44:10Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6084",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/172322?v=4",
      "events_url" : "https://api.github.com/users/y/events{/privacy}",
      "followers_url" : "https://api.github.com/users/y/followers",
      "following_url" : "https://api.github.com/users/y/following{/other_user}",
      "gists_url" : "https://api.github.com/users/y/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/y",
      "id" : 172322,
      "login" : "y",
      "node_id" : "MDQ6VXNlcjE3MjMyMg==",
      "organizations_url" : "https://api.github.com/users/y/orgs",
      "received_events_url" : "https://api.github.com/users/y/received_events",
      "repos_url" : "https://api.github.com/users/y/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/y/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/y/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/y"
   }
}
