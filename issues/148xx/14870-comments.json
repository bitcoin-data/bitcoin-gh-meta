[
   {
      "author_association" : "MEMBER",
      "body" : "Possibly related to https://github.com/bitcoin/bitcoin/pull/12495?\r\n\r\n@RQ732P thanks for the report. Can you rerun this and watch the open file descriptor count and tell us how high it gets? E.g.\r\n```\r\n$ watch \"lsof -w -p $(pidof bitcoind) | awk 'BEGIN { fd=0; mem=0; } /ldb$/ { if (\\$4 == \\\"mem\\\") mem++; else fd++ } END { printf \\\"mem = %s, fd = %s\\n\\\", mem, fd}'\"\r\n```",
      "created_at" : "2018-12-04T17:25:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-444184224",
      "id" : 444184224,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDE4NDIyNA==",
      "updated_at" : "2018-12-04T17:25:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444184224",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@RQ732P can you also post what file descriptors bitcoind has open after you see the error? E.g.\r\n```sh\r\nlsof -w -a -d ^mem -p $(pidof bitcoind)\r\n```",
      "created_at" : "2018-12-04T17:29:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-444185688",
      "id" : 444185688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDE4NTY4OA==",
      "updated_at" : "2018-12-04T17:29:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444185688",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "are we sure is it a bug? try to remove the option `-debug=leveldb`. I am asking, because I run bitcoind (mainnet, testnet and regtest) on macOS from years, and I never had a similar problem. But ok I have to try in `testnet` with `-debug=leveldb`. And while is synching is normal it's not accepting RPC calls.\r\n\r\nSo, is it crashing, like it is written in the title of this issue \"Bitcoind crashes with Too Many Files error\", or is it \"Stops accepting RCP calls\"?\r\n\r\n\"Crashing\" is not the same of \"Stops accepting RCP calls\"\r\n",
      "created_at" : "2018-12-04T23:28:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-444299340",
      "id" : 444299340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDI5OTM0MA==",
      "updated_at" : "2018-12-04T23:47:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444299340",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "```\r\n2018-12-04T17:07:26Z init message: Loading block index...\r\n2018-12-04T17:07:26Z LevelDB using max_open_files=1000 (default=1000)\r\n2018-12-04T17:07:26Z Opening LevelDB in /Users/matt/Library/Application Support/Bitcoin/testnet3/blocks/index\r\n2018-12-04T17:07:26Z leveldb: Recovering log #791\r\n2018-12-04T17:07:26Z leveldb: Level-0 table #801: started\r\n2018-12-04T17:07:26Z leveldb: Level-0 table #801: 1101 bytes OK\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #788\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #785\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #784\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #790\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #786\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #787\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #783\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #782\r\n2018-12-04T17:07:26Z leveldb: Delete type=2 #781\r\n2018-12-04T17:07:26Z leveldb: Delete type=0 #791\r\n2018-12-04T17:07:26Z leveldb: Delete type=3 #789\r\n2018-12-04T17:07:26Z Opened LevelDB successfully\r\n2018-12-04T17:07:26Z Using obfuscation key for /Users/matt/Library/Application Support/Bitcoin/testnet3/blocks/index: 0000000000000000\r\n2018-12-04T17:07:27Z leveldb: Compacting 1@0 + 8@1 files\r\n2018-12-04T17:07:27Z leveldb: Generated table #803@0: 14888 keys, 2140910 bytes\r\n2018-12-04T17:07:27Z leveldb: Generated table #804@0: 5178 keys, 744418 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #805@0: 7347 keys, 1056062 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #806@0: 14938 keys, 2136593 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #807@0: 1256 keys, 179294 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #808@0: 14970 keys, 2138641 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #809@0: 3608 keys, 517536 bytes\r\n2018-12-04T17:07:28Z leveldb: Generated table #810@0: 2 keys, 221 bytes\r\n2018-12-04T17:07:28Z leveldb: Compacted 1@0 + 8@1 files => 8913675 bytes\r\n2018-12-04T17:07:28Z leveldb: compacted to: files[ 0 8 55 91 0 0 0 ]\r\n2018-12-04T17:07:33Z LoadBlockIndexDB: last block file = 154\r\n2018-12-04T17:07:33Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=5075, size=108826844, heights=1441407...1446454, time=2018-10-31...2018-12-04)\r\n2018-12-04T17:07:33Z Checking all blk files are present...\r\n2018-12-04T17:07:33Z LevelDB using max_open_files=1000 (default=1000)\r\n2018-12-04T17:07:33Z Opening LevelDB in /Users/matt/Library/Application Support/Bitcoin/testnet3/chainstate\r\n2018-12-04T17:07:33Z leveldb: Recovering log #9327\r\n2018-12-04T17:07:33Z leveldb: Level-0 table #9332: started\r\n2018-12-04T17:07:33Z leveldb: Level-0 table #9332: 308 bytes OK\r\n2018-12-04T17:07:33Z leveldb: Delete type=2 #9326\r\n2018-12-04T17:07:33Z leveldb: Delete type=0 #9327\r\n2018-12-04T17:07:33Z leveldb: Delete type=2 #9311\r\n2018-12-04T17:07:33Z leveldb: Delete type=2 #9310\r\n2018-12-04T17:07:33Z leveldb: Delete type=2 #9312\r\n2018-12-04T17:07:33Z leveldb: Delete type=3 #9325\r\n```\r\n\r\n```\r\n2018-12-04T17:07:34Z Loaded best chain: hashBestChain=00000000000000063df115997921bf6856c08a08318b592df576c2f863b7d7c5 height=1446453 date=2018-12-04T04:45:18Z progress=0.999422\r\n2018-12-04T17:07:34Z init message: Rewinding blocks...\r\n2018-12-04T17:07:41Z WriteBatch memory usage: db=index, before=0.0MiB, after=0.0MiB\r\n2018-12-04T17:07:41Z WriteBatch memory usage: db=chainstate, before=0.0MiB, after=0.0MiB\r\n2018-12-04T17:07:41Z init message: Verifying blocks...\r\n2018-12-04T17:07:41Z Verifying last 6 blocks at level 3\r\n2018-12-04T17:07:41Z [0%]...leveldb: Compacting 1@0 + 3@1 files\r\n2018-12-04T17:07:41Z leveldb: Generated table #9334@0: 1 keys, 207 bytes\r\n2018-12-04T17:07:41Z [16%]...leveldb: Generated table #9335@0: 3162 keys, 181793 bytes\r\n2018-12-04T17:07:41Z [33%]...leveldb: Generated table #9336@0: 2846 keys, 181033 bytes\r\n2018-12-04T17:07:41Z leveldb: Compacted 1@0 + 3@1 files => 363033 bytes\r\n2018-12-04T17:07:41Z leveldb: compacted to: files[ 0 3 78 484 0 0 0 ]\r\n2018-12-04T17:07:41Z [50%]...[66%]...[83%]...[99%]...[DONE].\r\n2018-12-04T17:07:41Z No coin database inconsistencies in last 6 blocks (444 transactions)\r\n2018-12-04T17:07:41Z block index 15119ms\r\n2018-12-04T17:07:41Z LevelDB using max_open_files=1000 (default=1000)\r\n2018-12-04T17:07:41Z Opening LevelDB in /Users/matt/Library/Application Support/Bitcoin/testnet3/indexes/txindex\r\n2018-12-04T17:07:41Z leveldb: Recovering log #12582\r\n2018-12-04T17:07:41Z leveldb: Delete type=3 #12580\r\n2018-12-04T17:07:41Z leveldb: Delete type=0 #12582\r\n```\r\n\r\nThis part is most suspicious",
      "created_at" : "2018-12-05T05:05:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-444360156",
      "id" : 444360156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDM2MDE1Ng==",
      "updated_at" : "2018-12-05T05:07:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444360156",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/2287825?v=4",
         "events_url" : "https://api.github.com/users/ch4ot1c/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ch4ot1c/followers",
         "following_url" : "https://api.github.com/users/ch4ot1c/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ch4ot1c/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ch4ot1c",
         "id" : 2287825,
         "login" : "ch4ot1c",
         "node_id" : "MDQ6VXNlcjIyODc4MjU=",
         "organizations_url" : "https://api.github.com/users/ch4ot1c/orgs",
         "received_events_url" : "https://api.github.com/users/ch4ot1c/received_events",
         "repos_url" : "https://api.github.com/users/ch4ot1c/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ch4ot1c/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ch4ot1c/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ch4ot1c"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "~Looks like this is caused by #12495, which raises the levelDB maximum file handles from 64 to ~1024~ 1000, except on Windows. Default is here: https://github.com/bitcoin/bitcoin/blob/master/src/leveldb/include/leveldb/options.h#L89~ \r\n\r\nWhen i run `ulimit -n` on Mac Sierra 10.13, I get `256`. I think this is typical (for Macs).  ~This could cause problems.~\r\n\r\n",
      "created_at" : "2019-05-06T17:50:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-489711719",
      "id" : 489711719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTcxMTcxOQ==",
      "updated_at" : "2019-05-06T23:10:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489711719",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@tryphe  I'm pretty sure your comment is confused.  ",
      "created_at" : "2019-05-06T19:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-489748777",
      "id" : 489748777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTc0ODc3Nw==",
      "updated_at" : "2019-05-06T19:40:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489748777",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok, so after some IRC discussion: leveldb utilizes mmap which only uses one file descriptor for a short amount of time while the mapping is obtained synchronously. Therefore, the leveldb options aren't the issue, but rather the problem most likely stems from the number of RPC threads not counting towards the per-process file descriptor limit being checked during daemon initialization via [`RaiseFileDescriptorLimit()`](https://github.com/bitcoin/bitcoin/blob/master/src/util/system.cpp#L1042) called [here](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L1007). In other words, because each RPC thread ~could use >=0 file descriptors during a call~ uses 1 file descriptor for accept(), this per-process descriptor limit might be reached, causing mmap to be unable to obtain any descriptors, which would cause the compaction error above and other \"Too many open files\" errors. Edit: it seems bind() uses one as well, which doesn't count towards the fd limit requested below. (thanks to gwillen for clarification)\r\n\r\nFurthermore, on MacOS, if the descriptor limit has not been modified on the system, `RaiseFileDescriptorLimit()` should (at least that's what it looks like to me) raise the current process' file descriptor limit from 256 to 283 on MacOS 10 with the default arguments (8 + 150 + 125). On most Linux systems, the default is 1024, which is greater than 283, so 1024 is used instead. Seeing that the difference in descriptors between Unix and Unix-like platforms can be quite large, ~I think some further testing is necessary with particularly file-intensive RPC calls in order to see how a more dynamic descriptor limit could possibly be defined. For example: if I reduce the descriptor limit on a Linux install from 1024 to 283, how many RPC threads would I need to have and how many calls to call X would I need to make for this limit to be approached?~ \r\nEdit: I've created a branch to \"test\" an improved fd limit, but I cannot reproduce this bug.",
      "created_at" : "2019-05-06T23:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-489824799",
      "id" : 489824799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTgyNDc5OQ==",
      "updated_at" : "2019-05-09T07:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489824799",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@RQ732P can you try my branch to see if it fixes your problem?\r\n\r\n~`git clone https://github.com/tryphe/bitcoin --branch fd-limits`~\r\n\r\nEdit: New branch to try:\r\n\r\n`git clone https://github.com/tryphe/bitcoin --branch fd-limits-3`",
      "created_at" : "2019-05-08T08:56:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-490406806",
      "id" : 490406806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDQwNjgwNg==",
      "updated_at" : "2019-05-10T14:52:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490406806",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "created_at" : "2020-05-08T23:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-626060099",
      "id" : 626060099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjA2MDA5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-05-08T23:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626060099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This is still an issue.\r\n\r\n```\r\n2021-06-04T20:01:11Z libevent: Error from accept() call: Too many open files\r\n2021-06-04T20:01:11Z LevelDB read failure: IO error: /Users/user/Library/Application Support/Bitcoin/chainstate/619393.ldb: Too many open files\r\n2021-06-04T20:01:11Z Fatal LevelDB error: IO error: /Users/user/Library/Application Support/Bitcoin/chainstate/619393.ldb: Too many open files\r\n2021-06-04T20:01:11Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2021-06-04T20:01:11Z Error: Error reading from database, shutting down.\r\n2021-06-04T20:01:11Z Error reading from database: Fatal LevelDB error: IO error: /Users/user/Library/Application Support/Bitcoin/chainstate/619393.ldb: Too many open files\r\n```\r\n\r\nLooks like the issue is recursive RPC calls. However, i'm doing them in sequence, not all at once, so it shouldn't be overwhelming.",
      "created_at" : "2021-06-04T20:51:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-854991331",
      "id" : 854991331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDk5MTMzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-04T20:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854991331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/979576?v=4",
         "events_url" : "https://api.github.com/users/j4ys0n/events{/privacy}",
         "followers_url" : "https://api.github.com/users/j4ys0n/followers",
         "following_url" : "https://api.github.com/users/j4ys0n/following{/other_user}",
         "gists_url" : "https://api.github.com/users/j4ys0n/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/j4ys0n",
         "id" : 979576,
         "login" : "j4ys0n",
         "node_id" : "MDQ6VXNlcjk3OTU3Ng==",
         "organizations_url" : "https://api.github.com/users/j4ys0n/orgs",
         "received_events_url" : "https://api.github.com/users/j4ys0n/received_events",
         "repos_url" : "https://api.github.com/users/j4ys0n/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/j4ys0n/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/j4ys0n"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@j4ys0n thanks for reporting.\r\n\r\nIs there a script you have which can consistently reproduce the crash on MacOS? If so, feel free to ping one of the maintainers with an @ in order to re-open the issue.",
      "created_at" : "2021-07-27T05:10:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14870#issuecomment-887213793",
      "id" : 887213793,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14870",
      "node_id" : "IC_kwDOABII58404c7h",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T05:10:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887213793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   }
]
