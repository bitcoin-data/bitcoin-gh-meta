[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25499](https://github.com/bitcoin/bitcoin/pull/25499) (Use steady clock for all millis bench logging by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-06-08T15:00:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1150036779",
      "id" : 1150036779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585EjCsr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150036779/reactions"
      },
      "updated_at" : "2022-07-20T00:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150036779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in the last commit. Maybe have this file checked by iwyu?\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/25065#discussion_r890170373",
      "commit_id" : "3981f5e7c090959b98a7fa0b9e92b52c36e60e96",
      "created_at" : "2022-06-08T15:06:42Z",
      "diff_hunk" : "@@ -7,21 +7,22 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713",
      "id" : 892505713,
      "line" : 10,
      "node_id" : "PRRC_kwDOABII5841Mo5x",
      "original_commit_id" : "5ceae5c40400037669e06fb759b7698e92d2b254",
      "original_line" : 10,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 4,
      "pull_request_review_id" : 999942048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-08T15:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892611428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713\r\n\r\n> nit in the last commit. Maybe have this file checked by iwyu?\r\n\r\nSure, done in new commit",
      "commit_id" : "3981f5e7c090959b98a7fa0b9e92b52c36e60e96",
      "created_at" : "2022-06-08T16:41:12Z",
      "diff_hunk" : "@@ -7,21 +7,22 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892611428",
      "id" : 892611428,
      "in_reply_to_id" : 892505713,
      "line" : 10,
      "node_id" : "PRRC_kwDOABII5841NCtk",
      "original_commit_id" : "5ceae5c40400037669e06fb759b7698e92d2b254",
      "original_line" : 10,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 4,
      "pull_request_review_id" : 1000103150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-08T16:42:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK! Code looks shorter and more readable.",
      "created_at" : "2022-06-08T18:12:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1150236792",
      "id" : 1150236792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585Ejzh4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150236792/reactions"
      },
      "updated_at" : "2022-06-08T18:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150236792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-14T11:01:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1155033936",
      "id" : 1155033936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585E2GtQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033936/reactions"
      },
      "updated_at" : "2022-06-14T11:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I really want to avoid reintroducing stringy error returns and coupling with `util/translation` if at all possible, why do you prefer error strings?",
      "created_at" : "2022-06-16T17:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1157967764",
      "id" : 1157967764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585FBS-U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157967764/reactions"
      },
      "updated_at" : "2022-06-16T17:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157967764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I really want to avoid reintroducing stringy error returns and coupling with `util/translation` if at all possible, why do you prefer error strings?\r\n\r\nFrom most important to least important reasons:\r\n\r\n- Better user experience. Users can see complete information about an error instead of an error code with no context (flashback to https://en.wikipedia.org/wiki/Blue_screen_of_death#/media/File:Windows_9X_BSOD.png)\r\n- Better developer experience. Developers can call an API and have maybe 3-4 cases they need to handle, not 11 cases they need to decide what to do about.\r\n- Better separation of concerns and encapsulation. The too-narrow error codes that were here exposed implementation details of low level code to high level code\r\n- Maintainability. Getting rid of these error codes saves many lines of code. It makes code clearer, because putting error messages at error sites puts the error descriptions at the error site, not in some separate place. Putting error strings at error sites avoids possibilities of error codes getting mismapped or falling through unhandled (things we have no test coverage for, would be unlikely to be detected in manual testing, and could become broken at any time)\r\n- API compatibility. Related to the previous point about encapsulation, it's nice to use an API that doesn't break compatibility every time an internal implementation detail is changed, and some new error case is added, or an old one is removed\r\n\r\nError codes can be great. Error strings can be great. Right tool for the job.\r\n\r\n---\r\n\r\nRebased 3981f5e7c090959b98a7fa0b9e92b52c36e60e96 -> f3ec82fc466b247e9ed6b329554e6938799fadb5 ([`pr/retcode.4`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.4) -> [`pr/retcode.5`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.4-rebase..pr/retcode.5)) due to conflict with #25306",
      "created_at" : "2022-06-16T18:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1158012441",
      "id" : 1158012441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585FBd4Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1158012441/reactions"
      },
      "updated_at" : "2022-06-16T18:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1158012441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could we just use `std::string` here? I don't want to introduce further coupling with translation.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:34:04Z",
      "diff_hunk" : "@@ -7,21 +7,24 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>\n+\n+#include <memory>\n \n namespace kernel {\n \n-std::optional<SanityCheckError> SanityChecks(const Context&)\n+std::optional<bilingual_str> SanityChecks(const Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817356",
      "id" : 907817356,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII5842HDGM",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 16,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 11,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could we just use `std::string` here? I don't want to introduce further coupling with translation.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:34:18Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817504",
      "id" : 907817504,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5842HDIg",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 44,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907818166"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    options.coins_error_cb = [] { return false; };\r\n```",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:35:21Z",
      "diff_hunk" : "@@ -83,27 +84,19 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n-    if (rv.has_value()) {\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins =  (450 << 20) - (2 << 20) - (2 << 22);\n+    node::InitOptions options;\n+    options.coins_error_cb=[] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907818166",
      "id" : 907818166,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII5842HDS2",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 92,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 29,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907819347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps we can add some Doxygen comments hinting callers on how they should behave when encountering each case.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:37:27Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907819347",
      "id" : 907819347,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5842HDlT",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 38,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 41,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907822463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Perhaps rename to `LoadChainstateResult` so that it's clearer it's specifically about `LoadChainstate` and not all of init? Not a big deal either way.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:42:16Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907822463",
      "id" : 907822463,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5842HEV_",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 44,
      "pull_request_review_id" : 1020816819,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r908250663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We want to use/are migrating to the C++ headers. I know IWYU suggests `<assert.h>` (have been meaning to make it suggest the newer headers), but it will be equally as happy with [`<cassert>`](https://en.cppreference.com/w/cpp/error/assert). Thanks for fixing these up in any case.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-28T09:21:08Z",
      "diff_hunk" : "@@ -4,16 +4,32 @@\n \n #include <kernel/coinstats.h>\n \n+#include <chain.h>\n #include <coins.h>\n #include <crypto/muhash.h>\n #include <hash.h>\n+#include <node/blockstorage.h>\n+#include <primitives/transaction.h>\n+#include <script/script.h>\n #include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <sync.h>\n+#include <tinyformat.h>\n #include <uint256.h>\n+#include <util/check.h>\n #include <util/overflow.h>\n #include <util/system.h>\n #include <validation.h>\n+#include <version.h>\n \n+#include <assert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r908250663",
      "id" : 908250663,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII5842Is4n",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 26,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/coinstats.cpp",
      "position" : 23,
      "pull_request_review_id" : 1021409265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-28T09:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914073449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073449"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907818166\r\n\r\nIn commit \"refactor: Reduce number of LoadChainstate return values\" (ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7)\r\n\r\nThanks, updated whitespace",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:18:05Z",
      "diff_hunk" : "@@ -83,27 +84,19 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n-    if (rv.has_value()) {\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins =  (450 << 20) - (2 << 20) - (2 << 22);\n+    node::InitOptions options;\n+    options.coins_error_cb=[] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914073449",
      "id" : 914073449,
      "in_reply_to_id" : 907818166,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842e6dp",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 92,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073449/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914073619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073619"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907819347\r\n\r\nIn commit \"refactor: Reduce number of LoadChainstate return values\" (ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7)\r\n\r\n> Perhaps we can add some Doxygen comments hinting callers on how they should behave when encountering each case.\r\n\r\nThanks, added comment with suggestions",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:18:14Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914073619",
      "id" : 914073619,
      "in_reply_to_id" : 907819347,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842e6gT",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 38,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073619/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914073619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914112171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914112171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 1b32c5b7:\r\n\r\ntiny nit, extra space\r\n```suggestion\r\n    cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\r\n```",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:50:23Z",
      "diff_hunk" : "@@ -83,26 +84,18 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins =  (450 << 20) - (2 << 20) - (2 << 22);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914112171",
      "id" : 914112171,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fD6r",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 90,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1029078924,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914112171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T19:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914112171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116576"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 1b32c5b7:\r\nThe `InitOptions` default value can be removed.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:57:02Z",
      "diff_hunk" : "@@ -55,18 +74,9 @@ enum class ChainstateLoadingError {\n  *  - else\n  *      - Success!\n  */\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested = nullptr,\n-                                                     std::function<void()> coins_error_cb = nullptr);\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const InitOptions& options = {});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116576",
      "id" : 914116576,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fE_g",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 79,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029078924,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116576/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T19:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116770"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116770"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same as above, in 1b32c5b7:\r\nThe `InitOptions` default value can be removed.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:57:17Z",
      "diff_hunk" : "@@ -75,10 +85,7 @@ enum class ChainstateLoadVerifyError {\n };\n \n std::optional<ChainstateLoadVerifyError> VerifyLoadedChainstate(ChainstateManager& chainman,\n-                                                                bool fReset,\n-                                                                bool fReindexChainState,\n-                                                                int check_blocks,\n-                                                                int check_level);\n+                                                                const InitOptions& options = {});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116770",
      "id" : 914116770,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fFCi",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 88,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029078924,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116770/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T19:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914116770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914117460"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117460"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817504\r\n\r\nIn commit \"refactor: Reduce number of LoadChainstate return values\" (ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7)\r\n\r\n> Could we just use `std::string` here? \r\n\r\nIt's not possible to do this without changing behavior. Error messages like \"Error opening block database\" and \"Incorrect or no genesis block found. Wrong datadir for network?\" are translated and can't be returned through `std::string`.\r\n\r\n> I don't want to introduce further coupling with translation.\r\n\r\nI think there are only upsides not downsides to using `bilingual_str` for messages that may be shown to the users.\r\nUsing `bilingual_str` instead of `std::string` only adds a dependency on the [`bilingual_str` struct](https://github.com/bitcoin/bitcoin/blob/195e07feaf7bbeedaa675d7cf21c7160afe2c9fa/src/util/translation.h#L16) struct which is a simple pair of `std::string`'s. This is a very minimal dependency, and it doesn't require the caller to use translations or the kernel library to provide them. It just allows translations to be passed along if they are present.\r\n\r\nIn general, I think it is a good practice to use `bilingual_str` for user messages, whether or not they will be translated. Using the `bilingual_str` type distinguishes user messages from other types of strings, and helps future-proof code so API's don't have to change if translations are added or removed. The choice of whether or not to translate an string can be context dependent, and may depending on how frequently a specific message will be shown or how complicated it is to translate. Just using `bilingual_str` everywhere means APIs can pass translations along and not be tied to these implementation details.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:58:14Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914117460",
      "id" : 914117460,
      "in_reply_to_id" : 907817504,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fFNU",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117460/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914117627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117627"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907822463\r\n\r\nIn commit \"refactor: Reduce number of LoadChainstate return values\" (ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7)\r\n\r\n> nit: Perhaps rename to `LoadChainstateResult` so that it's clearer it's specifically about `LoadChainstate` and not all of init? Not a big deal either way.\r\n\r\nGood suggestion, renamed both types",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:58:29Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914117627",
      "id" : 914117627,
      "in_reply_to_id" : 907822463,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fFP7",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117627/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914117627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914118168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914118168"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817356\r\n\r\nIn commit \"refactor: Reduce number of SanityChecks return values\" (0b9bb465e9a0e2d4c9b7dc398e59dc380e8c4e60)\r\n\r\n> Could we just use `std::string` here? I don't want to introduce further coupling with translation.\r\n\r\nWe could actually use `std::string` instead of `bilingual_str` in this commit (not in the earlier commit), but I think it is better to use bilingual_str for reasons described in the other reply that commit.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T18:59:14Z",
      "diff_hunk" : "@@ -7,21 +7,24 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>\n+\n+#include <memory>\n \n namespace kernel {\n \n-std::optional<SanityCheckError> SanityChecks(const Context&)\n+std::optional<bilingual_str> SanityChecks(const Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914118168",
      "id" : 914118168,
      "in_reply_to_id" : 907817356,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII5842fFYY",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 16,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 11,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914118168/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914118168",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914119057"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119057"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In ed3c27ae:\r\n\r\ntiny nit: remove extra space.\r\n```suggestion\r\n        return {InitStatus::FAILURE, _(\"You need to rebuild the database using -reindex to go back to unpruned mode. This will redownload the entire blockchain\")};\r\n```",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:00:26Z",
      "diff_hunk" : "@@ -36,34 +36,36 @@ std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman\n             CleanupBlockRevFiles();\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n+    if (options.check_interrupt && options.check_interrupt()) return {InitStatus::INTERRUPTED, {}};\n \n     // LoadBlockIndex will load m_have_pruned if we've ever removed a\n     // block file from disk.\n     // Note that it also sets fReindex global based on the disk flag!\n     // From here on out fReindex and options.reindex values may be different!\n     if (!chainman.LoadBlockIndex()) {\n-        if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n-        return ChainstateLoadingError::ERROR_LOADING_BLOCK_DB;\n+        if (options.check_interrupt && options.check_interrupt()) return {InitStatus::INTERRUPTED, {}};\n+        return {InitStatus::FAILURE, _(\"Error loading block database\")};\n     }\n \n     if (!chainman.BlockIndex().empty() &&\n             !chainman.m_blockman.LookupBlockIndex(chainman.GetConsensus().hashGenesisBlock)) {\n-        return ChainstateLoadingError::ERROR_BAD_GENESIS_BLOCK;\n+        // If the loaded chain has a wrong genesis, bail out immediately\n+        // (we're likely using a testnet datadir, or the other way around).\n+        return {InitStatus::FAILURE_INCOMPATIBLE_DB, _(\"Incorrect or no genesis block found. Wrong datadir for network?\")};\n     }\n \n     // Check for changed -prune state.  What we are concerned about is a user who has pruned blocks\n     // in the past, but is now trying to run unpruned.\n     if (chainman.m_blockman.m_have_pruned && !options.prune) {\n-        return ChainstateLoadingError::ERROR_PRUNED_NEEDS_REINDEX;\n+        return {InitStatus::FAILURE, _(\"You need to rebuild the database using -reindex to go back to unpruned mode.  This will redownload the entire blockchain\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914119057",
      "id" : 914119057,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fFmR",
      "original_commit_id" : "ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7",
      "original_line" : 60,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1029078924,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119057/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T19:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914119853"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119853"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r908250663\r\n\r\nIn commit \"ci: Enable IWYU in src/kernel directory\" (f3ec82fc466b247e9ed6b329554e6938799fadb5)\r\n\r\n> We want to use/are migrating to the C++ headers. I know IWYU suggests `<assert.h>` (have been meaning to make it suggest the newer headers), but it will be equally as happy with [`<cassert>`](https://en.cppreference.com/w/cpp/error/assert). Thanks for fixing these up in any case.\r\n\r\nThanks, switched to `cassert`",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:01:36Z",
      "diff_hunk" : "@@ -4,16 +4,32 @@\n \n #include <kernel/coinstats.h>\n \n+#include <chain.h>\n #include <coins.h>\n #include <crypto/muhash.h>\n #include <hash.h>\n+#include <node/blockstorage.h>\n+#include <primitives/transaction.h>\n+#include <script/script.h>\n #include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <sync.h>\n+#include <tinyformat.h>\n #include <uint256.h>\n+#include <util/check.h>\n #include <util/overflow.h>\n #include <util/system.h>\n #include <validation.h>\n+#include <version.h>\n \n+#include <assert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914119853",
      "id" : 914119853,
      "in_reply_to_id" : 908250663,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fFyt",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 26,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119853/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914119853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914150542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914150542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914112171\r\n\r\n> In [1b32c5b](https://github.com/bitcoin/bitcoin/commit/1b32c5b72600c36b3044d5352228e4dae637a39b):\r\n> \r\n> tiny nit, extra space\r\n\r\nThanks, fixed",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:47:50Z",
      "diff_hunk" : "@@ -83,26 +84,18 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins =  (450 << 20) - (2 << 20) - (2 << 22);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914150542",
      "id" : 914150542,
      "in_reply_to_id" : 914112171,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fNSO",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 90,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914150542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914150542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914151198"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151198"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116576\r\n\r\n> In [1b32c5b](https://github.com/bitcoin/bitcoin/commit/1b32c5b72600c36b3044d5352228e4dae637a39b): The `InitOptions` default value can be removed.\r\n\r\nThanks, removed",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:48:50Z",
      "diff_hunk" : "@@ -55,18 +74,9 @@ enum class ChainstateLoadingError {\n  *  - else\n  *      - Success!\n  */\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested = nullptr,\n-                                                     std::function<void()> coins_error_cb = nullptr);\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const InitOptions& options = {});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914151198",
      "id" : 914151198,
      "in_reply_to_id" : 914116576,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fNce",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 79,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151198/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914151543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151543"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914116770\r\n\r\n> Same as above, in [1b32c5b](https://github.com/bitcoin/bitcoin/commit/1b32c5b72600c36b3044d5352228e4dae637a39b): The `InitOptions` default value can be removed.\r\n\r\nThanks, removed",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:49:18Z",
      "diff_hunk" : "@@ -75,10 +85,7 @@ enum class ChainstateLoadVerifyError {\n };\n \n std::optional<ChainstateLoadVerifyError> VerifyLoadedChainstate(ChainstateManager& chainman,\n-                                                                bool fReset,\n-                                                                bool fReindexChainState,\n-                                                                int check_blocks,\n-                                                                int check_level);\n+                                                                const InitOptions& options = {});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914151543",
      "id" : 914151543,
      "in_reply_to_id" : 914116770,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fNh3",
      "original_commit_id" : "1b32c5b72600c36b3044d5352228e4dae637a39b",
      "original_line" : 88,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914151543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914157800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914157800"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914119057\r\n\r\n> In [ed3c27a](https://github.com/bitcoin/bitcoin/commit/ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7):\r\n> \r\n> tiny nit: remove extra space.\r\n\r\nThis is a refactoring PR, so would prefer not to change behavior here. (This is a translated string so changing it may require updating translations, as well as the original string)",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-05T19:58:55Z",
      "diff_hunk" : "@@ -36,34 +36,36 @@ std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman\n             CleanupBlockRevFiles();\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n+    if (options.check_interrupt && options.check_interrupt()) return {InitStatus::INTERRUPTED, {}};\n \n     // LoadBlockIndex will load m_have_pruned if we've ever removed a\n     // block file from disk.\n     // Note that it also sets fReindex global based on the disk flag!\n     // From here on out fReindex and options.reindex values may be different!\n     if (!chainman.LoadBlockIndex()) {\n-        if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n-        return ChainstateLoadingError::ERROR_LOADING_BLOCK_DB;\n+        if (options.check_interrupt && options.check_interrupt()) return {InitStatus::INTERRUPTED, {}};\n+        return {InitStatus::FAILURE, _(\"Error loading block database\")};\n     }\n \n     if (!chainman.BlockIndex().empty() &&\n             !chainman.m_blockman.LookupBlockIndex(chainman.GetConsensus().hashGenesisBlock)) {\n-        return ChainstateLoadingError::ERROR_BAD_GENESIS_BLOCK;\n+        // If the loaded chain has a wrong genesis, bail out immediately\n+        // (we're likely using a testnet datadir, or the other way around).\n+        return {InitStatus::FAILURE_INCOMPATIBLE_DB, _(\"Incorrect or no genesis block found. Wrong datadir for network?\")};\n     }\n \n     // Check for changed -prune state.  What we are concerned about is a user who has pruned blocks\n     // in the past, but is now trying to run unpruned.\n     if (chainman.m_blockman.m_have_pruned && !options.prune) {\n-        return ChainstateLoadingError::ERROR_PRUNED_NEEDS_REINDEX;\n+        return {InitStatus::FAILURE, _(\"You need to rebuild the database using -reindex to go back to unpruned mode.  This will redownload the entire blockchain\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r914157800",
      "id" : 914157800,
      "in_reply_to_id" : 914119057,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842fPDo",
      "original_commit_id" : "ed3c27ae5034f27f6240d2dcafbdbfd9bc55b9d7",
      "original_line" : 60,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1029044443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914157800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T20:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914157800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 7d97076cb7d4020110a830ae9fe4107f82511c41 -> 9ac9a11d4aa1c051c9d486657ff3021019e802e5 ([`pr/retcode.6`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.6) -> [`pr/retcode.7`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.6-rebase..pr/retcode.7)) due to conflict with #25290",
      "created_at" : "2022-07-05T21:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1175498816",
      "id" : 1175498816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585GELBA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1175498816/reactions"
      },
      "updated_at" : "2022-07-05T21:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1175498816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918052911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918052911"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: indentation here seems to be screwed.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-11T15:11:16Z",
      "diff_hunk" : "@@ -1446,112 +1431,54 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         node.chainman = std::make_unique<ChainstateManager>(chainman_opts);\n         ChainstateManager& chainman = *node.chainman;\n \n-        const bool fReset = fReindex;\n-        bilingual_str strLoadError;\n-\n-        uiInterface.InitMessage(_(\"Loading block indexâ¦\").translated);\n-        const int64_t load_block_index_start_time = GetTimeMillis();\n-        std::optional<ChainstateLoadingError> maybe_load_error;\n-        try {\n-            maybe_load_error = LoadChainstate(fReset,\n-                                              chainman,\n-                                              Assert(node.mempool.get()),\n-                                              fPruneMode,\n-                                              fReindexChainState,\n-                                              cache_sizes.block_tree_db,\n-                                              cache_sizes.coins_db,\n-                                              cache_sizes.coins,\n-                                              /*block_tree_db_in_memory=*/false,\n-                                              /*coins_db_in_memory=*/false,\n-                                              /*shutdown_requested=*/ShutdownRequested,\n-                                              /*coins_error_cb=*/[]() {\n+        node::ChainstateLoadOptions options;\n+        options.mempool = Assert(node.mempool.get());\n+        options.reindex = node::fReindex;\n+        options.reindex_chainstate = fReindexChainState;\n+        options.prune = node::fPruneMode;\n+        options.check_blocks = args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+        options.check_level = args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+        options.check_interrupt = ShutdownRequested;\n+        options.coins_error_cb = [] {\n                                                   uiInterface.ThreadSafeMessageBox(\n                                                                                    _(\"Error reading from database, shutting down.\"),\n                                                                                    \"\", CClientUIInterface::MSG_ERROR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918052911",
      "id" : 918052911,
      "line" : 1445,
      "node_id" : "PRRC_kwDOABII5842uGAv",
      "original_commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "original_line" : 1445,
      "original_position" : 67,
      "original_start_line" : 1443,
      "path" : "src/init.cpp",
      "position" : 67,
      "pull_request_review_id" : 1034511389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918052911/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1443,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-11T15:32:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918052911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918068388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918068388"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not for this PR but thinking about possible translations errors: shouldn't we remove `-reindex-chainstate` from the translatable string?\r\n\r\n```suggestion\r\n            return {ChainstateLoadStatus::FAILURE, strprintf(_(\"Unable to replay blocks. You will need to rebuild the database using %s.\"), \"-reindex-chainstate\")};\r\n```\r\n\r\n(Same for the rest startup flags on this function)",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-11T15:25:19Z",
      "diff_hunk" : "@@ -82,12 +84,14 @@ std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman\n         // Refuse to load unsupported database format.\n         // This is a no-op if we cleared the coinsviewdb with -reindex or -reindex-chainstate\n         if (chainstate->CoinsDB().NeedsUpgrade()) {\n-            return ChainstateLoadingError::ERROR_CHAINSTATE_UPGRADE_FAILED;\n+            return {ChainstateLoadStatus::FAILURE_INCOMPATIBLE_DB, _(\"Unsupported chainstate database format found. \"\n+                                                                     \"Please restart with -reindex-chainstate. This will \"\n+                                                                     \"rebuild the chainstate database.\")};\n         }\n \n         // ReplayBlocks is a no-op if we cleared the coinsviewdb with -reindex or -reindex-chainstate\n         if (!chainstate->ReplayBlocks()) {\n-            return ChainstateLoadingError::ERROR_REPLAYBLOCKS_FAILED;\n+            return {ChainstateLoadStatus::FAILURE, _(\"Unable to replay blocks. You will need to rebuild the database using -reindex-chainstate.\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918068388",
      "id" : 918068388,
      "line" : 94,
      "node_id" : "PRRC_kwDOABII5842uJyk",
      "original_commit_id" : "ca5862538b30c085f4fbdb31182a7c09520b64a3",
      "original_line" : 94,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 69,
      "pull_request_review_id" : 1034511389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918068388/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-11T15:32:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918068388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918132258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918132258"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> nit: indentation here seems to be screwed.\r\n\r\nI can change it if desired, but it was actually intentional to just move these lines without changing the indentation",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-11T16:27:34Z",
      "diff_hunk" : "@@ -1446,112 +1431,54 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         node.chainman = std::make_unique<ChainstateManager>(chainman_opts);\n         ChainstateManager& chainman = *node.chainman;\n \n-        const bool fReset = fReindex;\n-        bilingual_str strLoadError;\n-\n-        uiInterface.InitMessage(_(\"Loading block indexâ¦\").translated);\n-        const int64_t load_block_index_start_time = GetTimeMillis();\n-        std::optional<ChainstateLoadingError> maybe_load_error;\n-        try {\n-            maybe_load_error = LoadChainstate(fReset,\n-                                              chainman,\n-                                              Assert(node.mempool.get()),\n-                                              fPruneMode,\n-                                              fReindexChainState,\n-                                              cache_sizes.block_tree_db,\n-                                              cache_sizes.coins_db,\n-                                              cache_sizes.coins,\n-                                              /*block_tree_db_in_memory=*/false,\n-                                              /*coins_db_in_memory=*/false,\n-                                              /*shutdown_requested=*/ShutdownRequested,\n-                                              /*coins_error_cb=*/[]() {\n+        node::ChainstateLoadOptions options;\n+        options.mempool = Assert(node.mempool.get());\n+        options.reindex = node::fReindex;\n+        options.reindex_chainstate = fReindexChainState;\n+        options.prune = node::fPruneMode;\n+        options.check_blocks = args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+        options.check_level = args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+        options.check_interrupt = ShutdownRequested;\n+        options.coins_error_cb = [] {\n                                                   uiInterface.ThreadSafeMessageBox(\n                                                                                    _(\"Error reading from database, shutting down.\"),\n                                                                                    \"\", CClientUIInterface::MSG_ERROR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918132258",
      "id" : 918132258,
      "in_reply_to_id" : 918052911,
      "line" : 1445,
      "node_id" : "PRRC_kwDOABII5842uZYi",
      "original_commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "original_line" : 1445,
      "original_position" : 67,
      "original_start_line" : 1443,
      "path" : "src/init.cpp",
      "position" : 67,
      "pull_request_review_id" : 1034622318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918132258/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1443,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-11T16:27:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918132258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918721559"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918721559"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in the first commit: clang-format this new line?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T08:55:38Z",
      "diff_hunk" : "@@ -16,6 +18,23 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n+\n+struct CacheSizes;\n+\n+struct ChainstateLoadOptions\n+{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918721559",
      "id" : 918721559,
      "line" : 25,
      "node_id" : "PRRC_kwDOABII5842wpQX",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 25,
      "original_position" : 17,
      "original_start_line" : 24,
      "path" : "src/node/chainstate.h",
      "position" : 17,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918721559/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 24,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918721559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918722251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918722251"
         }
      },
      "author_association" : "MEMBER",
      "body" : "first commit: Use `{}` over `=` to enable narrowing warnings for integers?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T08:56:13Z",
      "diff_hunk" : "@@ -16,6 +18,23 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n+\n+struct CacheSizes;\n+\n+struct ChainstateLoadOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918722251",
      "id" : 918722251,
      "line" : 33,
      "node_id" : "PRRC_kwDOABII5842wpbL",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 33,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 25,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918722251/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918722251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918723791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918723791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in the first commit: It is possible to ignore moved space changes: `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`, so adjusting it should be fine.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T08:57:41Z",
      "diff_hunk" : "@@ -1446,29 +1446,27 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         node.chainman = std::make_unique<ChainstateManager>(chainman_opts);\n         ChainstateManager& chainman = *node.chainman;\n \n-        const bool fReset = fReindex;\n         bilingual_str strLoadError;\n \n+        node::ChainstateLoadOptions options;\n+        options.mempool = Assert(node.mempool.get());\n+        options.reindex = node::fReindex;\n+        options.reindex_chainstate = fReindexChainState;\n+        options.prune = node::fPruneMode;\n+        options.check_blocks = args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+        options.check_level = args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+        options.check_interrupt = ShutdownRequested;\n+        options.coins_error_cb = [] {\n+                                                  uiInterface.ThreadSafeMessageBox(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918723791",
      "id" : 918723791,
      "line" : 1443,
      "node_id" : "PRRC_kwDOABII5842wpzP",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 1460,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 16,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918723791/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918723791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918729842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918729842"
         }
      },
      "author_association" : "MEMBER",
      "body" : "First commit: This is wrong, see `options.check_interrupt`.",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:03:39Z",
      "diff_hunk" : "@@ -83,26 +84,18 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\n+    node::ChainstateLoadOptions options;\n+    options.coins_error_cb = [] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918729842",
      "id" : 918729842,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII5842wrRy",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 92,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 28,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918729842/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918729842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753013"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753013"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated nit in the first commit: Could use `std::make_unique`, which is used in most other places over `new`?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:27:21Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753013",
      "id" : 918753013,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII5842ww71",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 30,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 42,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753013/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753466"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Add missing `{` while touching this line?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:27:49Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));\n \n-    if (fReset) {\n+    if (options.reindex) {\n         pblocktree->WriteReindexing(true);\n         //If we're reindexing in prune mode, wipe away unusable block files and all undo data files\n-        if (fPruneMode)\n+        if (options.prune)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753466",
      "id" : 918753466,
      "line" : 35,
      "node_id" : "PRRC_kwDOABII5842wxC6",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 35,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 49,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753466/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918753466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918755888"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918755888"
         }
      },
      "author_association" : "MEMBER",
      "body" : "first commit: What does \"out\" mean? Maybe remove it?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:30:20Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));\n \n-    if (fReset) {\n+    if (options.reindex) {\n         pblocktree->WriteReindexing(true);\n         //If we're reindexing in prune mode, wipe away unusable block files and all undo data files\n-        if (fPruneMode)\n+        if (options.prune)\n             CleanupBlockRevFiles();\n     }\n \n-    if (shutdown_requested && shutdown_requested()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n+    if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n \n     // LoadBlockIndex will load m_have_pruned if we've ever removed a\n     // block file from disk.\n-    // Note that it also sets fReindex based on the disk flag!\n-    // From here on out fReindex and fReset mean something different!\n+    // Note that it also sets fReindex global based on the disk flag!\n+    // From here on out fReindex and options.reindex values may be different!",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918755888",
      "id" : 918755888,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII5842wxow",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 44,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 61,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918755888/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918755888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918757971"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918757971"
         }
      },
      "author_association" : "MEMBER",
      "body" : "first commit: I think `load` is not needed in this context, as the compiler can infer the type?",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:32:27Z",
      "diff_hunk" : "@@ -219,24 +217,19 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     // instead of unit tests, but for now we need these here.\n     RegisterAllCoreRPCCommands(tableRPC);\n \n-    auto maybe_load_error = LoadChainstate(fReindex.load(),\n-                                           *Assert(m_node.chainman.get()),\n-                                           Assert(m_node.mempool.get()),\n-                                           fPruneMode,\n-                                           m_args.GetBoolArg(\"-reindex-chainstate\", false),\n-                                           m_cache_sizes.block_tree_db,\n-                                           m_cache_sizes.coins_db,\n-                                           m_cache_sizes.coins,\n-                                           /*block_tree_db_in_memory=*/true,\n-                                           /*coins_db_in_memory=*/true);\n+    node::ChainstateLoadOptions options;\n+    options.mempool = Assert(m_node.mempool.get());\n+    options.block_tree_db_in_memory = true;\n+    options.coins_db_in_memory = true;\n+    options.reindex = node::fReindex.load();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918757971",
      "id" : 918757971,
      "line" : 224,
      "node_id" : "PRRC_kwDOABII5842wyJT",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 224,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 27,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918757971/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918757971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918762673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918762673"
         }
      },
      "author_association" : "MEMBER",
      "body" : "first commit: I think `get` is not needed? (Calling `*` on a reference to a unique ptr's underlying raw pointer is equal to calling `*` on a reference to the unique ptr ?)",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T09:37:31Z",
      "diff_hunk" : "@@ -219,24 +217,19 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     // instead of unit tests, but for now we need these here.\n     RegisterAllCoreRPCCommands(tableRPC);\n \n-    auto maybe_load_error = LoadChainstate(fReindex.load(),\n-                                           *Assert(m_node.chainman.get()),\n-                                           Assert(m_node.mempool.get()),\n-                                           fPruneMode,\n-                                           m_args.GetBoolArg(\"-reindex-chainstate\", false),\n-                                           m_cache_sizes.block_tree_db,\n-                                           m_cache_sizes.coins_db,\n-                                           m_cache_sizes.coins,\n-                                           /*block_tree_db_in_memory=*/true,\n-                                           /*coins_db_in_memory=*/true);\n+    node::ChainstateLoadOptions options;\n+    options.mempool = Assert(m_node.mempool.get());\n+    options.block_tree_db_in_memory = true;\n+    options.coins_db_in_memory = true;\n+    options.reindex = node::fReindex.load();\n+    options.reindex_chainstate = m_args.GetBoolArg(\"-reindex-chainstate\", false);\n+    options.prune = node::fPruneMode;\n+    options.check_blocks = m_args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+    options.check_level = m_args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+    auto maybe_load_error = LoadChainstate(*Assert(m_node.chainman.get()), m_cache_sizes, options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918762673",
      "id" : 918762673,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842wzSx",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 229,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 32,
      "pull_request_review_id" : 1035453103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918762673/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T09:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918762673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918885699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918885699"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why does this even compile? `coins_error_cb` is of type `std::function<void()>`, but this lambda returns a `bool`",
      "commit_id" : "9ac9a11d4aa1c051c9d486657ff3021019e802e5",
      "created_at" : "2022-07-12T12:01:56Z",
      "diff_hunk" : "@@ -83,26 +84,18 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\n+    node::ChainstateLoadOptions options;\n+    options.coins_error_cb = [] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918885699",
      "id" : 918885699,
      "in_reply_to_id" : 918729842,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII5842xRVD",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 92,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 28,
      "pull_request_review_id" : 1035686102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918885699/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T12:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/918885699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could use https://github.com/bitcoin/bitcoin/commit/316afb1eca47fe179584bd2d8ae400f9aff474d4 ?",
      "created_at" : "2022-07-12T12:02:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1181674645",
      "id" : 1181674645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585GbuyV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1181674645/reactions"
      },
      "updated_at" : "2022-07-12T12:02:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1181674645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919215128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215128"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918729842\r\n\r\n> Why does this even compile? `coins_error_cb` is of type `std::function<void()>`, but this lambda returns a `bool`\r\n\r\nGood catch! Changed `coins_error_cb` to `check_interrupt`. I think this change would not actually have caused a problem in the `bitcoin-chainstate` example program, but now the new code should be more obviously equivalent to the previous code.\r\n\r\nReason it compiled is that the lambda is [Callable](https://en.cppreference.com/w/cpp/named_req/Callable) with arguments and return type of the `std::function`. Rules about what can be assigned to a `std::function` are https://en.cppreference.com/w/cpp/utility/functional/function/operator%3D",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:10:12Z",
      "diff_hunk" : "@@ -83,26 +84,18 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\n+    node::ChainstateLoadOptions options;\n+    options.coins_error_cb = [] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919215128",
      "id" : 919215128,
      "in_reply_to_id" : 918729842,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yhwY",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 92,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215128/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919215450"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215450"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918723791\r\n\r\n> nit in the first commit: It is possible to ignore moved space changes: `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`, so adjusting it should be fine.\r\n\r\nThanks, fixed indentation",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:10:27Z",
      "diff_hunk" : "@@ -1446,29 +1446,27 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         node.chainman = std::make_unique<ChainstateManager>(chainman_opts);\n         ChainstateManager& chainman = *node.chainman;\n \n-        const bool fReset = fReindex;\n         bilingual_str strLoadError;\n \n+        node::ChainstateLoadOptions options;\n+        options.mempool = Assert(node.mempool.get());\n+        options.reindex = node::fReindex;\n+        options.reindex_chainstate = fReindexChainState;\n+        options.prune = node::fPruneMode;\n+        options.check_blocks = args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+        options.check_level = args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+        options.check_interrupt = ShutdownRequested;\n+        options.coins_error_cb = [] {\n+                                                  uiInterface.ThreadSafeMessageBox(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919215450",
      "id" : 919215450,
      "in_reply_to_id" : 918723791,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yh1a",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 1460,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215450/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919215450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216160"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753013\r\n\r\n> unrelated nit in the first commit: Could use `std::make_unique`, which is used in most other places over `new`?\r\n\r\nYes there is basically no reason to use `new` anywhere. Just to keep this commit straightforward I would not want to change this here, especially since `pblocktree` is an `auto` reference and it's not totally obvious that it is a `unique_ptr`. But I'd happily review followups replacing `new` with `make_unique` here and elsewhere.",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:03Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216160",
      "id" : 919216160,
      "in_reply_to_id" : 918753013,
      "line" : 29,
      "node_id" : "PRRC_kwDOABII5842yiAg",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 29,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 41,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216160/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216350"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918753466\r\n\r\n> nit: Add missing `{` while touching this line?\r\n\r\nAdded",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:13Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));\n \n-    if (fReset) {\n+    if (options.reindex) {\n         pblocktree->WriteReindexing(true);\n         //If we're reindexing in prune mode, wipe away unusable block files and all undo data files\n-        if (fPruneMode)\n+        if (options.prune)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216350",
      "id" : 919216350,
      "in_reply_to_id" : 918753466,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yiDe",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 35,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216350/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216487"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918755888\r\n\r\n> first commit: What does \"out\" mean? Maybe remove it?\r\n\r\nDropped \"out\". [here on out](https://englishlogica.com/spoken-vocab/from-here-on-phrasal-verb-meaning-examples-k3r8mlzak8d) is just more verbose",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:24Z",
      "diff_hunk" : "@@ -6,52 +6,44 @@\n \n #include <consensus/params.h>\n #include <node/blockstorage.h>\n+#include <node/caches.h>\n #include <validation.h>\n \n namespace node {\n-std::optional<ChainstateLoadingError> LoadChainstate(bool fReset,\n-                                                     ChainstateManager& chainman,\n-                                                     CTxMemPool* mempool,\n-                                                     bool fPruneMode,\n-                                                     bool fReindexChainState,\n-                                                     int64_t nBlockTreeDBCache,\n-                                                     int64_t nCoinDBCache,\n-                                                     int64_t nCoinCacheUsage,\n-                                                     bool block_tree_db_in_memory,\n-                                                     bool coins_db_in_memory,\n-                                                     std::function<bool()> shutdown_requested,\n-                                                     std::function<void()> coins_error_cb)\n+std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman,\n+                                                     const CacheSizes& cache_sizes,\n+                                                     const ChainstateLoadOptions& options)\n {\n     auto is_coinsview_empty = [&](CChainState* chainstate) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\n-        return fReset || fReindexChainState || chainstate->CoinsTip().GetBestBlock().IsNull();\n+        return options.reindex || options.reindex_chainstate || chainstate->CoinsTip().GetBestBlock().IsNull();\n     };\n \n     LOCK(cs_main);\n-    chainman.InitializeChainstate(mempool);\n-    chainman.m_total_coinstip_cache = nCoinCacheUsage;\n-    chainman.m_total_coinsdb_cache = nCoinDBCache;\n+    chainman.InitializeChainstate(options.mempool);\n+    chainman.m_total_coinstip_cache = cache_sizes.coins;\n+    chainman.m_total_coinsdb_cache = cache_sizes.coins_db;\n \n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\n     // new CBlockTreeDB tries to delete the existing file, which\n     // fails if it's still open from the previous loop. Close it first:\n     pblocktree.reset();\n-    pblocktree.reset(new CBlockTreeDB(nBlockTreeDBCache, block_tree_db_in_memory, fReset));\n+    pblocktree.reset(new CBlockTreeDB(cache_sizes.block_tree_db, options.block_tree_db_in_memory, options.reindex));\n \n-    if (fReset) {\n+    if (options.reindex) {\n         pblocktree->WriteReindexing(true);\n         //If we're reindexing in prune mode, wipe away unusable block files and all undo data files\n-        if (fPruneMode)\n+        if (options.prune)\n             CleanupBlockRevFiles();\n     }\n \n-    if (shutdown_requested && shutdown_requested()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n+    if (options.check_interrupt && options.check_interrupt()) return ChainstateLoadingError::SHUTDOWN_PROBED;\n \n     // LoadBlockIndex will load m_have_pruned if we've ever removed a\n     // block file from disk.\n-    // Note that it also sets fReindex based on the disk flag!\n-    // From here on out fReindex and fReset mean something different!\n+    // Note that it also sets fReindex global based on the disk flag!\n+    // From here on out fReindex and options.reindex values may be different!",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216487",
      "id" : 919216487,
      "in_reply_to_id" : 918755888,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yiFn",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 44,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216487/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216645"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216645"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918721559\r\n\r\n> nit in the first commit: clang-format this new line?\r\n\r\nThanks, ran clang-format here and elsewhere",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:34Z",
      "diff_hunk" : "@@ -16,6 +18,23 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n+\n+struct CacheSizes;\n+\n+struct ChainstateLoadOptions\n+{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216645",
      "id" : 919216645,
      "in_reply_to_id" : 918721559,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yiIF",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 25,
      "original_position" : 17,
      "original_start_line" : 24,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216645/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216796"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918722251\r\n\r\n> first commit: Use `{}` over `=` to enable narrowing warnings for integers?\r\n\r\nThanks, changed",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:45Z",
      "diff_hunk" : "@@ -16,6 +18,23 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n+\n+struct CacheSizes;\n+\n+struct ChainstateLoadOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216796",
      "id" : 919216796,
      "in_reply_to_id" : 918722251,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yiKc",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 33,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216796/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918757971\r\n\r\n> first commit: I think `load` is not needed in this context, as the compiler can infer the type?\r\n\r\nThanks, dropped",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:11:56Z",
      "diff_hunk" : "@@ -219,24 +217,19 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     // instead of unit tests, but for now we need these here.\n     RegisterAllCoreRPCCommands(tableRPC);\n \n-    auto maybe_load_error = LoadChainstate(fReindex.load(),\n-                                           *Assert(m_node.chainman.get()),\n-                                           Assert(m_node.mempool.get()),\n-                                           fPruneMode,\n-                                           m_args.GetBoolArg(\"-reindex-chainstate\", false),\n-                                           m_cache_sizes.block_tree_db,\n-                                           m_cache_sizes.coins_db,\n-                                           m_cache_sizes.coins,\n-                                           /*block_tree_db_in_memory=*/true,\n-                                           /*coins_db_in_memory=*/true);\n+    node::ChainstateLoadOptions options;\n+    options.mempool = Assert(m_node.mempool.get());\n+    options.block_tree_db_in_memory = true;\n+    options.coins_db_in_memory = true;\n+    options.reindex = node::fReindex.load();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919216934",
      "id" : 919216934,
      "in_reply_to_id" : 918757971,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yiMm",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 224,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919216934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919221791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919221791"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r918762673\r\n\r\n> first commit: I think `get` is not needed? (Calling `*` on a reference to a unique ptr's underlying raw pointer is equal to calling `*` on a reference to the unique ptr ?)\r\n\r\nThanks, dropped",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-12T17:16:23Z",
      "diff_hunk" : "@@ -219,24 +217,19 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     // instead of unit tests, but for now we need these here.\n     RegisterAllCoreRPCCommands(tableRPC);\n \n-    auto maybe_load_error = LoadChainstate(fReindex.load(),\n-                                           *Assert(m_node.chainman.get()),\n-                                           Assert(m_node.mempool.get()),\n-                                           fPruneMode,\n-                                           m_args.GetBoolArg(\"-reindex-chainstate\", false),\n-                                           m_cache_sizes.block_tree_db,\n-                                           m_cache_sizes.coins_db,\n-                                           m_cache_sizes.coins,\n-                                           /*block_tree_db_in_memory=*/true,\n-                                           /*coins_db_in_memory=*/true);\n+    node::ChainstateLoadOptions options;\n+    options.mempool = Assert(m_node.mempool.get());\n+    options.block_tree_db_in_memory = true;\n+    options.coins_db_in_memory = true;\n+    options.reindex = node::fReindex.load();\n+    options.reindex_chainstate = m_args.GetBoolArg(\"-reindex-chainstate\", false);\n+    options.prune = node::fPruneMode;\n+    options.check_blocks = m_args.GetIntArg(\"-checkblocks\", DEFAULT_CHECKBLOCKS);\n+    options.check_level = m_args.GetIntArg(\"-checklevel\", DEFAULT_CHECKLEVEL);\n+    auto maybe_load_error = LoadChainstate(*Assert(m_node.chainman.get()), m_cache_sizes, options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919221791",
      "id" : 919221791,
      "in_reply_to_id" : 918762673,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842yjYf",
      "original_commit_id" : "9237c2295d9aa3d5e184db3da37760d7c78cdc27",
      "original_line" : 229,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1036199354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919221791/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-12T18:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919221791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919892494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919892494"
         }
      },
      "author_association" : "MEMBER",
      "body" : "second commit: Any reason to overwrite/shadow this? Should be fine to have `[load_status, load_error]` and `[verify_status, verify_error]`?",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-13T10:04:44Z",
      "diff_hunk" : "@@ -90,13 +90,13 @@ int main(int argc, char* argv[])\n     cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\n     node::ChainstateLoadOptions options;\n     options.check_interrupt = [] { return false; };\n-    auto rv = node::LoadChainstate(chainman, cache_sizes, options);\n-    if (rv.has_value()) {\n+    auto [status, error] = node::LoadChainstate(chainman, cache_sizes, options);\n+    if (status != node::ChainstateLoadStatus::SUCCESS) {\n         std::cerr << \"Failed to load Chain state from your datadir.\" << std::endl;\n         goto epilogue;\n     } else {\n-        auto maybe_verify_error = node::VerifyLoadedChainstate(chainman, options);\n-        if (maybe_verify_error.has_value()) {\n+        std::tie(status, error) = node::VerifyLoadedChainstate(chainman, options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919892494",
      "id" : 919892494,
      "line" : 98,
      "node_id" : "PRRC_kwDOABII58421HIO",
      "original_commit_id" : "fac56cb261f1eefaee2d6a14a8a14105133a0e8b",
      "original_line" : 98,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 13,
      "pull_request_review_id" : 1037101288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919892494/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-13T10:10:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919892494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919898257"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919898257"
         }
      },
      "author_association" : "MEMBER",
      "body" : "second commit: I wonder if it was easier to review if the two functions were converted in separate commits?",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-13T10:10:41Z",
      "diff_hunk" : "@@ -58,32 +54,11 @@ enum class ChainstateLoadingError {\n  *  4. Hard failure\n  *    - a failure that definitively cannot be recovered from with a reindex\n  *\n- *  Currently, LoadChainstate returns a std::optional<ChainstateLoadingError>\n- *  which:\n- *\n- *  - if has_value()\n- *      - Either \"Soft failure\", \"Hard failure\", or \"Shutdown requested\",\n- *        differentiable by the specific enumerator.\n- *\n- *        Note that a return value of SHUTDOWN_PROBED means ONLY that \"during\n- *        this sequence, when we explicitly checked shutdown_requested() at\n- *        arbitrary points, one of those calls returned true\". Therefore, a\n- *        return value other than SHUTDOWN_PROBED does not guarantee that\n- *        shutdown hasn't been called indirectly.\n- *  - else\n- *      - Success!\n+ *  LoadChainstate returns a (status code, error string) tuple.\n  */\n-std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman, const CacheSizes& cache_sizes,\n-                                                     const ChainstateLoadOptions& options);\n-\n-enum class ChainstateLoadVerifyError {\n-    ERROR_BLOCK_FROM_FUTURE,\n-    ERROR_CORRUPTED_BLOCK_DB,\n-    ERROR_GENERIC_FAILURE,\n-};\n-\n-std::optional<ChainstateLoadVerifyError> VerifyLoadedChainstate(ChainstateManager& chainman,\n-                                                                const ChainstateLoadOptions& options);\n+ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSizes& cache_sizes,\n+                                    const ChainstateLoadOptions& options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919898257",
      "id" : 919898257,
      "line" : 60,
      "node_id" : "PRRC_kwDOABII58421IiR",
      "original_commit_id" : "fac56cb261f1eefaee2d6a14a8a14105133a0e8b",
      "original_line" : 60,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 59,
      "pull_request_review_id" : 1037101288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919898257/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-13T10:10:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919898257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919992567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919992567"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919892494\r\n\r\n> second commit: Any reason to overwrite/shadow this? Should be fine to have `[load_status, load_error]` and `[verify_status, verify_error]`?\r\n\r\nIf you look at init.cpp you can see how error handling would get more complicated with multiple status and error values. This example program doesn't have any error handling (right now), but the logic of using one status and error variable to represent the latest status instead of multiple variables to previous statuses still applies. It keeps function state simpler and is less prone to errors from referencing the wrong variable.\r\n\r\nMore broadly though the whole LoadChainState / VerifyLoadedChainstate separation seems janky to me. And the logging and timing init.cpp code is doing around these calls also seems awkward. I think a good followup to this PR would get rid for `VerifyLoadedChainstate` function and just add an `bool verify` option to `ChainstateLoadOptions` and move more logging and timing code out of init.cpp.",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-13T11:59:28Z",
      "diff_hunk" : "@@ -90,13 +90,13 @@ int main(int argc, char* argv[])\n     cache_sizes.coins = (450 << 20) - (2 << 20) - (2 << 22);\n     node::ChainstateLoadOptions options;\n     options.check_interrupt = [] { return false; };\n-    auto rv = node::LoadChainstate(chainman, cache_sizes, options);\n-    if (rv.has_value()) {\n+    auto [status, error] = node::LoadChainstate(chainman, cache_sizes, options);\n+    if (status != node::ChainstateLoadStatus::SUCCESS) {\n         std::cerr << \"Failed to load Chain state from your datadir.\" << std::endl;\n         goto epilogue;\n     } else {\n-        auto maybe_verify_error = node::VerifyLoadedChainstate(chainman, options);\n-        if (maybe_verify_error.has_value()) {\n+        std::tie(status, error) = node::VerifyLoadedChainstate(chainman, options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919992567",
      "id" : 919992567,
      "in_reply_to_id" : 919892494,
      "line" : 98,
      "node_id" : "PRRC_kwDOABII58421fj3",
      "original_commit_id" : "fac56cb261f1eefaee2d6a14a8a14105133a0e8b",
      "original_line" : 98,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 13,
      "pull_request_review_id" : 1037238933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919992567/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-13T12:30:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919992567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919998919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919998919"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919898257\r\n\r\n> second commit: I wonder if it was easier to review if the two functions were converted in separate commits?\r\n\r\nI think it would be harder to review and introduce the potential for bugs in the intermediate commit. If you look code calling these functions in init.cpp you can see it has a lot of cases that need to be handled, and a twisty control flow involving exceptions and changing intermediate variables and timing and log statements. It seems like less of a burden on reviewers and less error prone to update the init.cpp code in one shot, than to change the same code twice and leave it in an intermediate state where the load and verify calls don't have consistent return styles.",
      "commit_id" : "e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a",
      "created_at" : "2022-07-13T12:07:01Z",
      "diff_hunk" : "@@ -58,32 +54,11 @@ enum class ChainstateLoadingError {\n  *  4. Hard failure\n  *    - a failure that definitively cannot be recovered from with a reindex\n  *\n- *  Currently, LoadChainstate returns a std::optional<ChainstateLoadingError>\n- *  which:\n- *\n- *  - if has_value()\n- *      - Either \"Soft failure\", \"Hard failure\", or \"Shutdown requested\",\n- *        differentiable by the specific enumerator.\n- *\n- *        Note that a return value of SHUTDOWN_PROBED means ONLY that \"during\n- *        this sequence, when we explicitly checked shutdown_requested() at\n- *        arbitrary points, one of those calls returned true\". Therefore, a\n- *        return value other than SHUTDOWN_PROBED does not guarantee that\n- *        shutdown hasn't been called indirectly.\n- *  - else\n- *      - Success!\n+ *  LoadChainstate returns a (status code, error string) tuple.\n  */\n-std::optional<ChainstateLoadingError> LoadChainstate(ChainstateManager& chainman, const CacheSizes& cache_sizes,\n-                                                     const ChainstateLoadOptions& options);\n-\n-enum class ChainstateLoadVerifyError {\n-    ERROR_BLOCK_FROM_FUTURE,\n-    ERROR_CORRUPTED_BLOCK_DB,\n-    ERROR_GENERIC_FAILURE,\n-};\n-\n-std::optional<ChainstateLoadVerifyError> VerifyLoadedChainstate(ChainstateManager& chainman,\n-                                                                const ChainstateLoadOptions& options);\n+ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSizes& cache_sizes,\n+                                    const ChainstateLoadOptions& options);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r919998919",
      "id" : 919998919,
      "in_reply_to_id" : 919898257,
      "line" : 60,
      "node_id" : "PRRC_kwDOABII58421hHH",
      "original_commit_id" : "fac56cb261f1eefaee2d6a14a8a14105133a0e8b",
      "original_line" : 60,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 59,
      "pull_request_review_id" : 1037238933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919998919/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-13T12:30:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/919998919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ready for merge maybe, or needs more review?",
      "created_at" : "2022-07-18T14:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1187570794",
      "id" : 1187570794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585GyORq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187570794/reactions"
      },
      "updated_at" : "2022-07-18T14:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187570794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-18T15:52:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1187670328",
      "id" : 1187670328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585Gymk4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187670328/reactions"
      },
      "updated_at" : "2022-07-18T15:52:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187670328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased e022eaf87c65e8d7d27d8f5fa4cadc359c843e8a -> 303b1d17ac983c2e36ef2b6908acbb0a9c6fd606 ([`pr/retcode.8`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.8) -> [`pr/retcode.9`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.9), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.8-rebase..pr/retcode.9)) due to conflict with #25487\r\n",
      "created_at" : "2022-07-18T19:21:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1188168680",
      "id" : 1188168680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G0gPo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188168680/reactions"
      },
      "updated_at" : "2022-07-18T19:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188168680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-19T08:37:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1188765802",
      "id" : 1188765802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G2yBq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188765802/reactions"
      },
      "updated_at" : "2022-07-19T08:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188765802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 303b1d17ac983c2e36ef2b6908acbb0a9c6fd606 -> fb31664f94451c51c77393b53274f3a8867ed1d6 ([`pr/retcode.9`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.9) -> [`pr/retcode.10`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.10), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.9-rebase..pr/retcode.10)) due to conflict with #25466",
      "created_at" : "2022-07-19T15:12:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1189178569",
      "id" : 1189178569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G4WzJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189178569/reactions"
      },
      "updated_at" : "2022-07-19T15:12:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189178569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK fb31664f94451c51c77393b53274f3a8867ed1d6 ð¤\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK fb31664f94451c51c77393b53274f3a8867ed1d6 ð¤\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUjCIwv/YUURfo7o0AVAGSJZRLACHRy+lzHJIkI3aMdh895dYKmo1d1aVDNZd2XL\r\nK6vTGMf2S6RgE4xvtRCz57c5KrfTcjlEgyT1xzZ9ybNOKjnf2a06emZLvgM1T5bg\r\ni4cp4PJYqJkYlttNqXWawUuUlevYi/eD7uZMQyx2s61AAfWjJM0I8+idJYPmhzWg\r\nKPMaF6U3amHCX4CRMjQRWUQNlzu1ZZz3d5pBIj+VtVDJ+GnW6NOvgUgsarQD5GQ7\r\nKmQisteypNvSqd2lRZhIvqr0MLUKoowJlXpDzNZAjtDckC68kBtFPzRRW3ybKlEu\r\nj7lH3wRpj46rgC1GP8JOWNQ+mJHkKLy9o3lIsT1JCM6vHiOXcH98WmnkEJFIXcix\r\ndzmmURN+fh+JjL0Ft127iJa40R1mxqxQ/sI/xXgIAkzuZon7Xqt5otU7NhAJgLIf\r\nfDt6usRDhVD0XD848xpUJ7XkFxlK9BuTAO6BmyWYW7x0naR8O1vGKw6ujiya28u4\r\njVaEjRYP\r\n=vMWy\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "created_at" : "2022-07-19T16:51:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1189327650",
      "id" : 1189327650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G47Mi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189327650/reactions"
      },
      "updated_at" : "2022-07-19T16:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189327650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-19T21:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1189556873",
      "id" : 1189556873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G5zKJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189556873/reactions"
      },
      "updated_at" : "2022-07-19T21:15:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189556873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased fb31664f94451c51c77393b53274f3a8867ed1d6 -> 1e761a0169ebdbd3b5784af39fc2248b4546eeea ([`pr/retcode.10`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.10) -> [`pr/retcode.11`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.11), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.10-rebase..pr/retcode.11)) due to conflicts with #25494 and #25645",
      "created_at" : "2022-07-19T22:01:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1189593903",
      "id" : 1189593903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G58Mv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189593903/reactions"
      },
      "updated_at" : "2022-07-19T22:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189593903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 1e761a0169ebdbd3b5784af39fc2248b4546eeea ð\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK 1e761a0169ebdbd3b5784af39fc2248b4546eeea ð\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUj60wv+IY0G/RNQGAu7vVe19qrbdpSiDWKDuTcsbjIn4nLmwav/SkKO9CbdbUe3\r\nn4oVsfVGmhksUF/DrTbEd0qrQMw4SH6rUemfrRiQAW5RyZuj9H6uzw7/Kg5xdI5l\r\n4qzP4xf3WLgCJ4Aqk41O3Y1lOyqE0zTt9YVznWutNGGJZh3dYD34kyGGCSd78BbD\r\nRCaa7ap+sJCF5HQF+aJXqslvBAKvJ0+sXzpbMmOnX2AAUNkYsuGeWOn+5OnKlGgA\r\nawx5snXIwNDKGrkfUoUeqeP7nVMLjSAqt+HNZYlS6hV7NPL8raxvJhQAVteACOje\r\nLTFft7Zrni4IzM5ozXVQwpgVAVrCJ/L3pRm90XXvSTWELo07OWj7Dxni/F1twD93\r\nwY9767zZEfON2Wb/SP33a9DlRbA/o8iVFswfv/Cqzjtl3T+RV9RWgi0ZF3UMpx+q\r\nxwmLnunLT7hI5MvPKGtyVPZTybK8rn72G1uamb0wLXDh8hCZI2qbZssgfTiJtgm6\r\nPMzwpr5X\r\n=jnK3\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "created_at" : "2022-07-20T05:48:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1189855269",
      "id" : 1189855269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585G68Al",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189855269/reactions"
      },
      "updated_at" : "2022-07-20T05:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189855269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
