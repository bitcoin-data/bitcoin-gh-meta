[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8587#discussion_r76197094"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8587"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/76197094"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The idea here is that it will be banned if it continues to connect and request bloom services 20 times... I suspect the misbehave count gets reset upon disconnection though..!\n",
      "commit_id" : "86574e55a1e6c9b1ba916fbca44f25ecb428915f",
      "created_at" : "2016-08-25T08:01:45Z",
      "diff_hunk" : "@@ -4885,19 +4885,14 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     }\n \n \n-    if (!(nLocalServices & NODE_BLOOM) &&\n+    if (!pfrom->fWhiteListed && !(nLocalServices & NODE_BLOOM) &&\n               (strCommand == NetMsgType::FILTERLOAD ||\n                strCommand == NetMsgType::FILTERADD ||\n-               strCommand == NetMsgType::FILTERCLEAR))\n-    {\n-        if (pfrom->nVersion >= NO_BLOOM_VERSION) {\n-            LOCK(cs_main);\n-            Misbehaving(pfrom->GetId(), 100);\n-            return false;\n-        } else {\n-            pfrom->fDisconnect = true;\n-            return false;\n-        }\n+               strCommand == NetMsgType::FILTERCLEAR)) {\n+        LOCK(cs_main);\n+        Misbehaving(pfrom->GetId(), 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#discussion_r76197094",
      "id" : 76197094,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc2MTk3MDk0",
      "original_commit_id" : "6ab8fd4facf3be92be960b6de6984daf3e0662c9",
      "original_line" : null,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8587",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/76197094/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2016-12-11T04:54:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/76197094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NACK on overloading whitelisting even further. It's already not well-defined nor documented.\n",
      "created_at" : "2016-08-25T08:13:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-242312308",
      "id" : 242312308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI0MjMxMjMwOA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242312308/reactions"
      },
      "updated_at" : "2016-08-25T08:20:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242312308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "NACK\n\nI doesn't even compile! It is `fWhitelisted` and not `fWhiteListed`.\n",
      "created_at" : "2016-08-25T12:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-242363006",
      "id" : 242363006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI0MjM2MzAwNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242363006/reactions"
      },
      "updated_at" : "2016-08-25T12:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242363006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=4",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "node_id" : "MDQ6VXNlcjY4NDg3NjQ=",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj Where would be the best place to document this please? I would certainly be willing to give this a go. My thinking is that whitelisted peers are nodes that we trust to not do anything detrimental or misbehave. They are usually nodes we have control of. Therefore, in this example, we could set up a node that doesn't advertise BLOOM and doesn't provide bloom services to nodes other than our own. This would allow us to configure a SPV node to use our node but not let it be used by other SPV nodes.  Many SPV nodes, allow it to be configured which full-node to use and trust, but currently there isn't a way to set up a full-node that only provides SPV services to specific nodes (as far as I know anyway), hence this pull request.\n\nI agree that \"Whitelisted\" is somewhat vague and generic though but it seemed the closest to what was already apt for the job - and it might still be so, but yes, the documentation would be useful. \n\nChecking through previous commits, e.g. beceac9bbf14bf4a81f6f63b9cca2a64157054ae (#8078), it does look like Whitelisting feature is already being used to provide BLOOM services to whitelisted nodes and no other nodes, so I don't think this pull req deviates from the current use so far.\n\nRegarding who is most qualified to document what Whitelisting is, I would propose that it is the authors who have used it so far, so this would be @petertodd (#8078) @morcos (#7542) @sipa (#7125 #5157 #4378) @gmaxwell (#7166) @pstratem (#7406 #6374) @jonasschnelli (#6984) @laanwj (#6974) @sdaftuar (#5875) @rubensayshi (#5942)  - this is an exhaustive list.\n",
      "created_at" : "2016-08-26T03:35:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-242620495",
      "id" : 242620495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI0MjYyMDQ5NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242620495/reactions"
      },
      "updated_at" : "2016-09-11T08:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242620495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@venzen your message above seemed to get mangled somehow - not sure if I read your message about VERACK - will check the pull request now.\n",
      "created_at" : "2016-09-13T02:40:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-246556856",
      "id" : 246556856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI0NjU1Njg1Ng==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246556856/reactions"
      },
      "updated_at" : "2016-09-13T02:40:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246556856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@paveljanik Apologies for it not compiling. Just to let you know I test everything with \"make check\" as a minimum now before PR anything, and more often than not have tested things for months beforehand.",
      "created_at" : "2016-12-11T04:56:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-266263452",
      "id" : 266263452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI2NjI2MzQ1Mg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266263452/reactions"
      },
      "updated_at" : "2016-12-11T04:56:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266263452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this. Two NACKS and no other comments. A new PR could be opened to some whitelist documentation.",
      "created_at" : "2017-01-21T00:23:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8587#issuecomment-274214688",
      "id" : 274214688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI3NDIxNDY4OA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274214688/reactions"
      },
      "updated_at" : "2017-01-21T00:23:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274214688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
