[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Any style changes should probably be kept consistent across the following files :-)\r\n\r\n```\r\nsrc/crypto/hmac_sha256.h\r\nsrc/crypto/hmac_sha512.h\r\nsrc/crypto/ripemd160.h\r\nsrc/crypto/sha1.h\r\nsrc/crypto/sha256.h\r\nsrc/crypto/sha512.h\r\nsrc/hash.h\r\n```",
      "created_at" : "2017-11-20T18:09:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-345780039",
      "id" : 345780039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-20T18:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345780039",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please read: https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#refactoring\r\n\r\nI don't like the magic numbers this PR tries to change, though I less like changing *some* of the magic values. Also the code is less readable afterwards (IMO).\r\n\r\nIt's like with code formatting. Lets just accept how it is and concentrate on new code.",
      "created_at" : "2017-11-20T19:17:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-345799001",
      "id" : 345799001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-20T19:17:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345799001",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I intend to move this to a more compile-time and compiler-optimizer friendly generic implementation of all of the crypto algos. This is just step 1. I think most of this code can be eliminated through usage of templates.\r\n\r\nSince I am new, I am trying to adhere to the CONTRIBUTING.md guidelines. @jonasschnelli, can you point to which ones you want me to focus on more directly?",
      "created_at" : "2017-11-21T01:54:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-345891040",
      "id" : 345891040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-21T01:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345891040",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/639247?v=4",
         "events_url" : "https://api.github.com/users/ldm5180/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ldm5180/followers",
         "following_url" : "https://api.github.com/users/ldm5180/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ldm5180/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ldm5180",
         "id" : 639247,
         "login" : "ldm5180",
         "organizations_url" : "https://api.github.com/users/ldm5180/orgs",
         "received_events_url" : "https://api.github.com/users/ldm5180/received_events",
         "repos_url" : "https://api.github.com/users/ldm5180/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ldm5180/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ldm5180/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ldm5180"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I'm not convinced about the long term goal of eliminating code through templates. Cryptographic code like this is incredibly stable, so the usual reasons for doing refactoring like this (easier maintenance) don't really apply - it's likely possible to not ever touch it.\r\n\r\nHowever, as such all the changes here look fine to me. Not sure the `auto` variables are necessary, but moving to a more C++ish style doesn't sound bad.\r\n\r\nConcept ACK",
      "created_at" : "2017-11-21T04:16:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-345912084",
      "id" : 345912084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-21T23:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345912084",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11735#discussion_r152199125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152199125"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'd prefer not to use 'auto' here, keeping integer signedness explicit makes it easier to reason about.",
      "commit_id" : "4c5a6ddc66617d3b6cbb03300144cb6162743108",
      "created_at" : "2017-11-21T07:57:15Z",
      "diff_hunk" : "@@ -4,31 +4,32 @@\n \n #include <crypto/hmac_sha256.h>\n \n-#include <string.h>\n+#include <algorithm>\n+#include <array>\n+#include <cstring>\n \n CHMAC_SHA256::CHMAC_SHA256(const unsigned char* key, size_t keylen)\n {\n-    unsigned char rkey[64];\n-    if (keylen <= 64) {\n-        memcpy(rkey, key, keylen);\n-        memset(rkey + keylen, 0, 64 - keylen);\n+    std::array<unsigned char, OUTPUT_SIZE * 2> rkey{};\n+    if (keylen <= rkey.size()) {\n+        std::memcpy(rkey.data(), key, keylen);\n     } else {\n-        CSHA256().Write(key, keylen).Finalize(rkey);\n-        memset(rkey + 32, 0, 32);\n+        CSHA256().Write(key, keylen).Finalize(rkey.data());\n+        std::fill(rkey.begin() + OUTPUT_SIZE, rkey.end(), 0);\n     }\n \n-    for (int n = 0; n < 64; n++)\n+    for (auto n = 0u; n < rkey.size(); n++)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#discussion_r152199125",
      "id" : 152199125,
      "original_commit_id" : "4c5a6ddc66617d3b6cbb03300144cb6162743108",
      "original_position" : 26,
      "path" : "src/crypto/hmac_sha256.cpp",
      "position" : 26,
      "pull_request_review_id" : 78022722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11735",
      "updated_at" : "2017-11-21T07:57:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152199125",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK modulo @sipa's feedback and assuming that any changes performed are applied consistently across:\r\n\r\n```\r\nsrc/crypto/hmac_sha256.h\r\nsrc/crypto/hmac_sha512.h\r\nsrc/crypto/ripemd160.h\r\nsrc/crypto/sha1.h\r\nsrc/crypto/sha256.h\r\nsrc/crypto/sha512.h\r\nsrc/hash.h\r\n```",
      "created_at" : "2017-11-21T08:42:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-345955467",
      "id" : 345955467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-21T08:42:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345955467",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree with @sipa. This code (and the other algorithm implementations) are critically important, already very stable, and could probably exist \"as is\" for a very long time. \r\n\r\nRefactoring for the sake of refactoring or \"clean up\" is basically all risk, with seemingly very little potential reward. \r\n\r\nWhat there is the potential for is introducing subtle/obscure bugs. Amplified by the fact that the group of reviewers for this kind of the work is quite small.\r\n\r\n@ldm5180 If you're planning on large scale refactoring of \"all of the crypto algos\", it'd be great if you could open an issue and outline what some of your ideas and goals are. i.e Performance, making the code more readable, reusable etc? Otherwise, continual changes to this code are likely to sit in limbo.",
      "created_at" : "2017-11-21T23:37:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-346196507",
      "id" : 346196507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-22T14:20:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346196507",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I will re-write this an reopen when ready.",
      "created_at" : "2017-11-22T14:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11735#issuecomment-346363048",
      "id" : 346363048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11735",
      "updated_at" : "2017-11-22T14:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346363048",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/639247?v=4",
         "events_url" : "https://api.github.com/users/ldm5180/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ldm5180/followers",
         "following_url" : "https://api.github.com/users/ldm5180/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ldm5180/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ldm5180",
         "id" : 639247,
         "login" : "ldm5180",
         "organizations_url" : "https://api.github.com/users/ldm5180/orgs",
         "received_events_url" : "https://api.github.com/users/ldm5180/received_events",
         "repos_url" : "https://api.github.com/users/ldm5180/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ldm5180/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ldm5180/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ldm5180"
      }
   }
]
