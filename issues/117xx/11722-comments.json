[
   {
      "author_association" : "OWNER",
      "body" : "This uses `thread_local`, a feature that we chose to not use before, though I don't remember why. Perhaps because we needed compatibility with GCC 4.7? Is that still the case, @laanwj @theuni ",
      "created_at" : "2017-11-18T20:06:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-345467642",
      "id" : 345467642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-18T20:06:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345467642",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> This uses thread_local, a feature that we chose to not use before, though I don't remember why. \r\n\r\nGiven that it's only used when lock debugging is used I'd say it's acceptable.\r\n\r\nAlso FWIW I tried to build bitcoin on g++ 4.7 a while ago and it was a pain; for example the `AX_CXX_COMPILE_STDCXX` fails because the ` __cplusplus` macro is not set correctly, and that's only the beginning. As it's already effectively broken and no one else seems to even notice it, I wouldn't mind bumping the requirement to g++ 4.8 wholesale. But I'm not sure that discussion belongs here.\r\n",
      "created_at" : "2017-11-19T10:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-345505874",
      "id" : 345505874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-19T10:17:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345505874",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11722#discussion_r151863339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11722"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151863339"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why?",
      "commit_id" : "bba9bd0d9dd06f13a6b0c89181864453cab5c858",
      "created_at" : "2017-11-19T12:42:40Z",
      "diff_hunk" : "@@ -4,13 +4,12 @@\n \n #include <sync.h>\n \n+#include <set>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#discussion_r151863339",
      "id" : 151863339,
      "original_commit_id" : "bba9bd0d9dd06f13a6b0c89181864453cab5c858",
      "original_position" : 4,
      "path" : "src/sync.cpp",
      "position" : 4,
      "pull_request_review_id" : 77641853,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11722",
      "updated_at" : "2017-11-19T12:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151863339",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11722#discussion_r151871324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11722"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151871324"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Amazingly enough the #include tree in sync.cpp did not pull in std::set already.",
      "commit_id" : "bba9bd0d9dd06f13a6b0c89181864453cab5c858",
      "created_at" : "2017-11-19T17:28:49Z",
      "diff_hunk" : "@@ -4,13 +4,12 @@\n \n #include <sync.h>\n \n+#include <set>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#discussion_r151871324",
      "id" : 151871324,
      "in_reply_to_id" : 151863339,
      "original_commit_id" : "bba9bd0d9dd06f13a6b0c89181864453cab5c858",
      "original_position" : 4,
      "path" : "src/sync.cpp",
      "position" : 4,
      "pull_request_review_id" : 77649148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11722",
      "updated_at" : "2017-11-19T17:28:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151871324",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7519582?v=4",
         "events_url" : "https://api.github.com/users/tjps/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tjps/followers",
         "following_url" : "https://api.github.com/users/tjps/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tjps/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tjps",
         "id" : 7519582,
         "login" : "tjps",
         "organizations_url" : "https://api.github.com/users/tjps/orgs",
         "received_events_url" : "https://api.github.com/users/tjps/received_events",
         "repos_url" : "https://api.github.com/users/tjps/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tjps/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tjps/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tjps"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2017-11-20T13:02:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-345689290",
      "id" : 345689290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-20T13:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345689290",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Since #11732 was resolved in favor of bumping GCC requirement to 4.8, looks like this PR is good to go?",
      "created_at" : "2017-11-27T10:26:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-347139957",
      "id" : 347139957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-27T10:26:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347139957",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7519582?v=4",
         "events_url" : "https://api.github.com/users/tjps/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tjps/followers",
         "following_url" : "https://api.github.com/users/tjps/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tjps/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tjps",
         "id" : 7519582,
         "login" : "tjps",
         "organizations_url" : "https://api.github.com/users/tjps/orgs",
         "received_events_url" : "https://api.github.com/users/tjps/received_events",
         "repos_url" : "https://api.github.com/users/tjps/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tjps/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tjps/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tjps"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "utACK bba9bd0d9dd06f13a6b0c89181864453cab5c858",
      "created_at" : "2017-11-27T10:35:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-347142289",
      "id" : 347142289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-27T10:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347142289",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK bba9bd0d9dd06f13a6b0c89181864453cab5c858 modulo thread_local concerns. I also think its probably OK in DEBUG_LOCKCONTENTION only even if its not on all supported platforms.",
      "created_at" : "2017-11-27T21:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-347341250",
      "id" : 347341250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-27T21:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347341250",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed up a commit on top of this PR that adds the configure check for thread_local: https://github.com/theuni/bitcoin/commit/d6df1162d3cba1aabae4f5ae61da6a81881ea118 . I've verified that it works as intended for me in Linux, and breaks as intended on osx.\r\n\r\n@tjps assuming that works for you, mind cherry-picking it here?",
      "created_at" : "2017-11-27T22:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-347346703",
      "id" : 347346703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-27T22:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347346703",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That looks great to me, will cherry-pick it onto this PR.",
      "created_at" : "2017-11-27T22:30:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11722#issuecomment-347350565",
      "id" : 347350565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11722",
      "updated_at" : "2017-11-27T22:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347350565",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7519582?v=4",
         "events_url" : "https://api.github.com/users/tjps/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tjps/followers",
         "following_url" : "https://api.github.com/users/tjps/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tjps/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tjps",
         "id" : 7519582,
         "login" : "tjps",
         "organizations_url" : "https://api.github.com/users/tjps/orgs",
         "received_events_url" : "https://api.github.com/users/tjps/received_events",
         "repos_url" : "https://api.github.com/users/tjps/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tjps/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tjps/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tjps"
      }
   }
]
