[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\nIf only one file moves, I'd prefer just -log rather than logdir though",
      "created_at" : "2017-11-20T22:44:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345856775",
      "id" : 345856775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-20T22:44:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345856775",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152134344"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152134344"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure if it should create directories,.. though if it does, in case the creation failed, it should not return an empty path, should rather return `GetDataDir()` in any failed case.",
      "commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "created_at" : "2017-11-20T22:51:53Z",
      "diff_hunk" : "@@ -189,14 +189,27 @@ static void DebugPrintInit()\n     vMsgsBeforeOpenLog = new std::list<std::string>;\n }\n \n+/** Get the directory for log files (currently just debug.log) */\n+static fs::path GetLogDir()\n+{\n+  if (gArgs.IsArgSet(\"-logdir\")) {\n+    fs::path logdirPath = fs::system_complete(gArgs.GetArg(\"-logdir\", \"\"));\n+    if (!logdirPath.empty()) {\n+      fs::create_directories(logdirPath);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152134344",
      "id" : 152134344,
      "original_commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : 10,
      "pull_request_review_id" : 77949999,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741",
      "updated_at" : "2017-11-20T22:51:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152134344",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152144442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152144442"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think the code (as written) can return an empty path. If `-logdir` is unset the outer if statement is skipped completely, the inner if statement is to handle the case where `-logdir` is set to the empty string. As I understand the boost::filesystem docs, if the `mkdir` fails then `fs::create_directories` will actually throw an exception.\r\n\r\nI'm OK with removing the `fs::create_directories` call, the precedent I was following is that `GetDataDir()` creates its directory, although that's a bit different.",
      "commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "created_at" : "2017-11-20T23:51:13Z",
      "diff_hunk" : "@@ -189,14 +189,27 @@ static void DebugPrintInit()\n     vMsgsBeforeOpenLog = new std::list<std::string>;\n }\n \n+/** Get the directory for log files (currently just debug.log) */\n+static fs::path GetLogDir()\n+{\n+  if (gArgs.IsArgSet(\"-logdir\")) {\n+    fs::path logdirPath = fs::system_complete(gArgs.GetArg(\"-logdir\", \"\"));\n+    if (!logdirPath.empty()) {\n+      fs::create_directories(logdirPath);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152144442",
      "id" : 152144442,
      "in_reply_to_id" : 152134344,
      "original_commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : 10,
      "pull_request_review_id" : 77961518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741",
      "updated_at" : "2017-11-20T23:51:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152144442",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MeshCollider Do you think it's possible there would be other log files in the future? I'm interested in the future on working on a multi-process architecture for bitcoind, so that parts of the process could be sandboxed on Linux using seccomp(). In that world I'd want a log directory so there could be a log file per process, but maybe I'm overthinking things since there's just one log file today.",
      "created_at" : "2017-11-20T23:55:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345870760",
      "id" : 345870760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-20T23:55:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345870760",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Running regtest and testnet will use the same log file?",
      "created_at" : "2017-11-21T00:00:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345871743",
      "id" : 345871743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T00:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345871743",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152146384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152146384"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm.. not sure. I just found this in the docs: `Returns: true if a new directory was created, otherwise false.`",
      "commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "created_at" : "2017-11-21T00:04:05Z",
      "diff_hunk" : "@@ -189,14 +189,27 @@ static void DebugPrintInit()\n     vMsgsBeforeOpenLog = new std::list<std::string>;\n }\n \n+/** Get the directory for log files (currently just debug.log) */\n+static fs::path GetLogDir()\n+{\n+  if (gArgs.IsArgSet(\"-logdir\")) {\n+    fs::path logdirPath = fs::system_complete(gArgs.GetArg(\"-logdir\", \"\"));\n+    if (!logdirPath.empty()) {\n+      fs::create_directories(logdirPath);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152146384",
      "id" : 152146384,
      "in_reply_to_id" : 152134344,
      "original_commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : 10,
      "pull_request_review_id" : 77963672,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741",
      "updated_at" : "2017-11-21T00:04:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152146384",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152176089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152176089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As I understand the documentation: `fs::create_directories` returns true if it actually had to issue a `mkdir(2)` call, and returns false if it did not (because the directory already existed). If the directory needs to be created and the underlying `mkdir(2)` call failed, then an exception is raised.",
      "commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "created_at" : "2017-11-21T04:18:11Z",
      "diff_hunk" : "@@ -189,14 +189,27 @@ static void DebugPrintInit()\n     vMsgsBeforeOpenLog = new std::list<std::string>;\n }\n \n+/** Get the directory for log files (currently just debug.log) */\n+static fs::path GetLogDir()\n+{\n+  if (gArgs.IsArgSet(\"-logdir\")) {\n+    fs::path logdirPath = fs::system_complete(gArgs.GetArg(\"-logdir\", \"\"));\n+    if (!logdirPath.empty()) {\n+      fs::create_directories(logdirPath);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152176089",
      "id" : 152176089,
      "in_reply_to_id" : 152134344,
      "original_commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : 10,
      "pull_request_review_id" : 77996780,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741",
      "updated_at" : "2017-11-21T04:18:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152176089",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag Can you explain further? That may be the case, but I am somewhat new and don't understand the issue you're describing.",
      "created_at" : "2017-11-21T04:19:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345912466",
      "id" : 345912466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T04:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345912466",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152186186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152186186"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh.. yes.. your completely right. Nevermind then.",
      "commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "created_at" : "2017-11-21T06:10:28Z",
      "diff_hunk" : "@@ -189,14 +189,27 @@ static void DebugPrintInit()\n     vMsgsBeforeOpenLog = new std::list<std::string>;\n }\n \n+/** Get the directory for log files (currently just debug.log) */\n+static fs::path GetLogDir()\n+{\n+  if (gArgs.IsArgSet(\"-logdir\")) {\n+    fs::path logdirPath = fs::system_complete(gArgs.GetArg(\"-logdir\", \"\"));\n+    if (!logdirPath.empty()) {\n+      fs::create_directories(logdirPath);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152186186",
      "id" : 152186186,
      "in_reply_to_id" : 152134344,
      "original_commit_id" : "7832efab367bd3fe8755ff07f2045aa55d4cbe7d",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : 10,
      "pull_request_review_id" : 78008049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11741",
      "updated_at" : "2017-11-21T06:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152186186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@eklitzke. I think what @promag means is, that in the default configuration (without the PR), the `debug.log` file is placed in `<datadir>/testnet/` or `<datadir>/regtest/` in case of testnet / regtest. Your logdir command would required one to switch the logdir when switching to -regtest, etc. Not sure if it's a real problem...",
      "created_at" : "2017-11-21T06:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345927506",
      "id" : 345927506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T06:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345927506",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> If only one file moves, I'd prefer just -log rather than logdir though\r\n\r\nWould prefer just `-logfile` or such too. The log is just a text file, it needs to claim no environment, and a directory is not a good abstraction for it. If someone wants bitcoin to log to an existing directory with other log files e.g. `/var/log/bitcoinlog` that should be possible. The only requirement is write access.\r\n\r\n> so that parts of the process could be sandboxed on Linux using seccomp().\r\n\r\nFWIW in my experiments with running bitcoin with CloudABI I've used `-printtoconsole` to log to a stream instead. This is much easier in restricted environments, and the stream can be processed and stored anywhere desired by an external process. I usually recommend that for more advanced logging setups.\r\n\r\n> Do you think it's possible there would be other log files in the future? \r\n\r\nPossible - maybe an auditing / RPC log instead of a debug log. However there is no reason it'd need to be in the same directory, this could have a new option to place it.\r\n\r\n> There appears to be a db.log file that is used for wallets, but I didn't update that code path. It would be a minor change to update that as well.\r\n\r\ndb.log belongs with the wallet directory, no need to touch it here.\r\n",
      "created_at" : "2017-11-21T07:34:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345941364",
      "id" : 345941364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T07:43:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345941364",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> it needs to claim no environment\r\n\r\n@laanwj what do you mean? Currently there is `debug.log`, `testnet3/debug.log` and `regtest/debug.log`.",
      "created_at" : "2017-11-21T15:37:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346064864",
      "id" : 346064864,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T15:37:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346064864",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> @laanwj what do you mean? Currently there is debug.log, testnet3/debug.log and regtest/debug.log.\r\n\r\nYes, the regtest/testnet edge case again. It really sucks that we have these configuration options shared between networks.\r\nIt's not clear that users even want that layout when they manually specify the logfile! A similar issue to #11726.\r\nIf we can get per-network configuration in (e.g. #10996) then most of this nonsense will go away.",
      "created_at" : "2017-11-21T15:47:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346068403",
      "id" : 346068403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-21T15:47:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346068403",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure per-network configuration gets the nonsense to go away :( There's three ways that it could work, I think:\r\n\r\n * logs always go in -logdir, if you start a regtest/testnet instance having specified it in bitcoin.conf, your logs get messy, you get told to RTFM, and cry bitter tears\r\n * if specified in bitcoin.conf, logdir only affects mainnet; but you can specify logdir via network.conf to choose different locations. (or logdir in bitcoin.conf is an error/ignored)\r\n * -logdir only has an effect on mainnet, you have to use -regtest-logdir or -testnet-logdir or similar to have debug.log go elsewhere\r\n\r\nI think the last one seems like it might be the least surprising behaviour? I've got some draft patches for both the latter options though.",
      "created_at" : "2017-11-23T03:43:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346526427",
      "id" : 346526427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-23T03:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346526427",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ajtowns I definitely prefer the first or second of those 3 options, I don't want to see a -regtest-logdir and -testnet-logdir argument as well, I think that's much too messy. Alternatively if we stick with -logdir instead of -logfile, we just call the log chain.log e.g. regtest.log, testnet3.log",
      "created_at" : "2017-11-23T10:47:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346585161",
      "id" : 346585161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-23T10:49:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346585161",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> logs always go in -logdir, if you start a regtest/testnet instance having specified it in bitcoin.conf, your logs get messy, you get told to RTFM, and cry bitter tears\r\n\r\nFor the log it'd be remotely acceptable, but you'd never want a similar thing to happen for wallets.\r\n\r\nThis is nothing new, by the way!\r\n\r\n`-port` `-bind` `-rpcport` `-rpcbind` already suffer from this. They are really options that one would want to specify per network.\r\n\r\n> -logdir only has an effect on mainnet, you have to use -regtest-logdir or -testnet-logdir or similar to have debug.log go elsewhere\r\n\r\nI'm starting to like this as this is explicit, they don't depend on context, e.g., what file something was specified it. It works as well with `-conf=<file>` as with the automatic way of finding configuration files. But it's a major change to argument handling nevertheless...\r\n",
      "created_at" : "2017-11-28T09:09:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-347458820",
      "id" : 347458820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-11-28T09:23:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347458820",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Closing because #11781 was merged which covers this.",
      "created_at" : "2017-12-06T14:16:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-349651870",
      "id" : 349651870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11741",
      "updated_at" : "2017-12-06T14:16:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349651870",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
