{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "blockchain.cpp has low unit test coverage. This commit is intended\r\nto start improving its code coverage to reasonable levels. One or more\r\nfollow up commits will complete the task that this commit is starting\r\n(though the usefulness of this commit is not dependent upon later\r\ncommits).\r\n\r\nNote that these tests were not written based upon a specification of how\r\nGetDifficulty *should* work, but rather how it actually *does* work. As\r\na result, if there are any bugs in the current GetDifficulty\r\nimplementation, these unit tests serve to lock them in rather than\r\nexpose them.\r\n\r\n-- Why has blockchain.cpp been modified if this is a unit testing change?\r\n\r\nSince the existing GetDifficulty function relies on a global variable,\r\nchainActive, it was not suitable for unit testing purposes. Both the\r\nexisting GetDifficulty function and the unit tests now call through to\r\na new, more modular version of GetDifficulty that can work on any chain,\r\nnot just chainActive.\r\n\r\n-- Why does blockchain_tests.cpp directly include blockchain.cpp instead\r\nof blockchain.h?\r\n\r\nWhile the new GetDifficulty function's signature is arguably better than\r\nthe old one's, it still isn't great, and doesn't seem to warrant inclusion\r\nas part of the blockchain.h API, especially since only test code is\r\ndirectly using it. If a better way of exposing the new GetDifficulty\r\nfunction to unit tests exists, please mention it and the commit will be\r\nupdated accordingly.\r\n\r\n-- Why is the test fixture named blockchain_difficulty_tests rather than\r\nblockchain_tests?\r\n\r\nThe Bitcoin Core policy for naming unit test files is to match the the\r\nfile under test (\"blockchain\" becomes \"blockchain_tests\"). While this\r\ncommit complies with that, blockchain.cpp is a massive file, such that\r\nhaving all of the unit tests in one file will tend towards disorder.\r\nSince there will be a lot more tests added to this file, the intention\r\nis to divide up different types of tests into different test fixtures\r\nwithin the same file.",
   "closed_at" : "2017-12-23T10:22:58Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 9,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11748/comments",
   "created_at" : "2017-11-22T01:32:15Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11748/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/11748",
   "id" : 275915909,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11748/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MTU0MDQzMDA5",
   "number" : 11748,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/11748.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11748",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/11748.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11748"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[Tests] Adding unit tests for GetDifficulty in blockchain.cpp.",
   "updated_at" : "2017-12-23T10:22:59Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11748",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/180403?v=4",
      "events_url" : "https://api.github.com/users/merehap/events{/privacy}",
      "followers_url" : "https://api.github.com/users/merehap/followers",
      "following_url" : "https://api.github.com/users/merehap/following{/other_user}",
      "gists_url" : "https://api.github.com/users/merehap/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/merehap",
      "id" : 180403,
      "login" : "merehap",
      "node_id" : "MDQ6VXNlcjE4MDQwMw==",
      "organizations_url" : "https://api.github.com/users/merehap/orgs",
      "received_events_url" : "https://api.github.com/users/merehap/received_events",
      "repos_url" : "https://api.github.com/users/merehap/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/merehap/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/merehap/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/merehap"
   }
}
