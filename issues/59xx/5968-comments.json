[
   {
      "body" : "I like the concept, although this has a lot of 'collateral' code impact. Of course this is a necessary step in the process toward explicitly passing in a Consensus or ChainParams structure.\r\n\r\nThe part that generates most of the diff here is that which removes the getters and replaces them with `GetConsensus().x`. For the sake of reviewability, let's do this in a separate pull, with a large diff but apart from that 'almost-trivial'?\r\n\r\nAnd then do e.g. the GetBlockValue/GetBlockSubsidy change and other more significant changes on top of that, so that it's easier to see what happens.\r\n",
      "created_at" : "2015-04-08T08:08:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-90837749",
      "id" : 90837749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-08T08:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90837749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I left the last 3 commits for #5970, so the redundant getters aren't removed yet and the GetBlockValue/GetBlockSubsidy and IsSupermajority changes are also delayed. Is this what you had in mind?",
      "created_at" : "2015-04-08T12:16:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-90895545",
      "id" : 90895545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-08T12:16:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90895545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Last commit updated to avoid conflicts with #5975 after its latest chainparams fix.",
      "created_at" : "2015-04-08T15:28:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-90950875",
      "id" : 90950875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-08T15:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90950875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased",
      "created_at" : "2015-04-10T09:09:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-91488356",
      "id" : 91488356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-10T09:09:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91488356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated only with the changes to IsSuperMajority. Other changes are left for other PRs like #5996",
      "created_at" : "2015-04-10T16:59:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-91621671",
      "id" : 91621671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-10T16:59:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91621671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r28172133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28172133"
         }
      },
      "body" : "Just pass Consensus::Params and use the parts here?",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-10T19:11:33Z",
      "diff_hunk" : "@@ -71,10 +71,9 @@ void EraseOrphansFor(NodeId peer);\n \n /**\n  * Returns true if there are nRequired or more blocks of minVersion or above\n- * in the last Params().ToCheckBlockUpgradeMajority() blocks, starting at pstart \n- * and going backwards.\n+ * in the last nToCheck blocks, starting at pstart and going backwards.\n  */\n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired);\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, unsigned nToCheck);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r28172133",
      "id" : 28172133,
      "original_commit_id" : "d64931f8847e7a4fe07b8dba7d2b672cb05fe126",
      "original_position" : 9,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28172133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r28192860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28192860"
         }
      },
      "body" : "It would only serve for nToCheck. nRequired is sometimes enforceUpgrade and some times rejectOoutdated. I thought that instead of passing the params to take the majority window, I could just pass a number directly.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-11T06:32:33Z",
      "diff_hunk" : "@@ -71,10 +71,9 @@ void EraseOrphansFor(NodeId peer);\n \n /**\n  * Returns true if there are nRequired or more blocks of minVersion or above\n- * in the last Params().ToCheckBlockUpgradeMajority() blocks, starting at pstart \n- * and going backwards.\n+ * in the last nToCheck blocks, starting at pstart and going backwards.\n  */\n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired);\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, unsigned nToCheck);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r28192860",
      "id" : 28192860,
      "original_commit_id" : "d64931f8847e7a4fe07b8dba7d2b672cb05fe126",
      "original_position" : 9,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28192860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Added a squashme commit with @theuni 's suggestion of passing Consensus::Params instead of nToCheck. At the very least it produces shorter lines. I'm happy to squash it.\r\nI also added another squashme commit that makes the PR a little bit harder to read, but since I plan to do that later anyway and I'm now touching those same lines...\r\nI would prefer to squash it as well but I'm also happy leaving that for later if it's going to be a blocker or people aren't happy with it.\r\n",
      "created_at" : "2015-04-15T17:40:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-93495967",
      "id" : 93495967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-15T17:40:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93495967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-04-16T17:30:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-93791604",
      "id" : 93791604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-16T17:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93791604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Squashed the last 2 commits.",
      "created_at" : "2015-04-16T18:14:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-93805905",
      "id" : 93805905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-16T18:14:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93805905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29002896"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29002896"
         }
      },
      "body" : "Why change this? Seems less clear and less conducive to documentation. If anything, I'd prefer to see comments added for when block versions stopped being accepted.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-23T21:00:10Z",
      "diff_hunk" : "@@ -2571,19 +2570,11 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n     if (pcheckpoint && nHeight < pcheckpoint->nHeight)\n         return state.DoS(100, error(\"%s: forked chain older than last checkpoint (height %d)\", __func__, nHeight));\n \n-    // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29002896",
      "id" : 29002896,
      "original_commit_id" : "edba47fae4e21f3ecdbb752103016d53b430caad",
      "original_position" : 35,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29002896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "ut ACK other than the nit above",
      "created_at" : "2015-04-23T21:05:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-95718751",
      "id" : 95718751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-23T21:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95718751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29007135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29007135"
         }
      },
      "body" : "Well, if we have 10 voted softfork at the same time I prefer to have a loop over 10 practically identical unrolled ifs...\r\nI would also like to have a \"time proof\" solution for forks that are enforced by height instead of voting as suggested in #5966 . This is the only place where you can have a generic solution for block versions.\r\nAnyway, I don't think \r\n```\r\n// Reject block.nVersion=n blocks when 95% (75% on testnet) of the network has upgraded (last version=3)\r\n```\r\nis less clear than \r\n```\r\n// Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:\r\n// Reject block.nVersion=2 blocks when 95% (75% on testnet) of the network has upgraded:\r\n```\r\njust less repetitive. But if you have a better idea I'm happy to change the comments.\r\nOr are you directly against the loop?",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-23T21:49:00Z",
      "diff_hunk" : "@@ -2571,19 +2570,11 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n     if (pcheckpoint && nHeight < pcheckpoint->nHeight)\n         return state.DoS(100, error(\"%s: forked chain older than last checkpoint (height %d)\", __func__, nHeight));\n \n-    // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29007135",
      "id" : 29007135,
      "original_commit_id" : "edba47fae4e21f3ecdbb752103016d53b430caad",
      "original_position" : 35,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29007135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29007738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29007738"
         }
      },
      "body" : "Not completely against, but if we had 10 voted softforks, it'd probably be a good place to have 10 short explanations.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-23T21:56:40Z",
      "diff_hunk" : "@@ -2571,19 +2570,11 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n     if (pcheckpoint && nHeight < pcheckpoint->nHeight)\n         return state.DoS(100, error(\"%s: forked chain older than last checkpoint (height %d)\", __func__, nHeight));\n \n-    // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29007738",
      "id" : 29007738,
      "original_commit_id" : "edba47fae4e21f3ecdbb752103016d53b430caad",
      "original_position" : 35,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29007738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29031300"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29031300"
         }
      },
      "body" : "Mhmm, I think putting those in ContextualCheckBlock and Consensus::GetFlags (not existing yet, see https://github.com/jtimon/bitcoin/commit/9ba7d0641019d7f6c08f7b15ce3a2bd2e5e8a4ac) would be more informative. But anyway, it seems I squashed the loop change too fast, I can separate that again if it's going to delay this.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-24T08:10:23Z",
      "diff_hunk" : "@@ -2571,19 +2570,11 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n     if (pcheckpoint && nHeight < pcheckpoint->nHeight)\n         return state.DoS(100, error(\"%s: forked chain older than last checkpoint (height %d)\", __func__, nHeight));\n \n-    // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29031300",
      "id" : 29031300,
      "original_commit_id" : "edba47fae4e21f3ecdbb752103016d53b430caad",
      "original_position" : 35,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29031300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated without introducing the loop",
      "created_at" : "2015-04-29T11:26:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-97392625",
      "id" : 97392625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-04-29T11:26:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97392625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29407453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29407453"
         }
      },
      "body" : "I would just pass both nMajorityWindow and nRequired as argument, and leave this as a utility function.\r\n",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-30T07:05:17Z",
      "diff_hunk" : "@@ -2701,11 +2697,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29407453",
      "id" : 29407453,
      "original_commit_id" : "55d732fb668fa3e93bc4883d43826e2b2ac9fe8b",
      "original_position" : 74,
      "path" : "src/main.cpp",
      "position" : 65,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29407453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29408934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29408934"
         }
      },
      "body" : "the initial version took both ints instead of taking Consensus::Params as the second. But I changed it solving a nit because this produces shorter lines. If you mean maintaining a utility function still coupled to Params(), no, only consensus functions call this function (well, plus the consensus part of connectBlock) and they need it decoupled.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-30T07:43:08Z",
      "diff_hunk" : "@@ -2701,11 +2697,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29408934",
      "id" : 29408934,
      "original_commit_id" : "55d732fb668fa3e93bc4883d43826e2b2ac9fe8b",
      "original_position" : 74,
      "path" : "src/main.cpp",
      "position" : 65,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29408934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29414557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29414557"
         }
      },
      "body" : "This is a very minor nit, feel free to ignore.\n\nI mean not taking Params, but do taking both the number to check and the\nnumber required. It's a bit ugly to pass both params and something\nextracted from params, imho.\n",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-30T09:20:58Z",
      "diff_hunk" : "@@ -2701,11 +2697,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29414557",
      "id" : 29414557,
      "original_commit_id" : "55d732fb668fa3e93bc4883d43826e2b2ac9fe8b",
      "original_position" : 74,
      "path" : "src/main.cpp",
      "position" : 65,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29414557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29419079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29419079"
         }
      },
      "body" : "As said, at the beginning it was getting nRequired and nToCheck, but @theuni suggested the change. I'm happy to change it back but I don't have strong feelings either way.\r\nYou could also have a version with nRequired and nToCheck and two other inlined functions:\r\n\r\n```\r\nbool IsSuperMajorityUpgrade(int minVersion, const CBlockIndex* pstart, const Consensus::Params& consensusParams);\r\nbool IsSuperMajorityRejectOld(int minVersion, const CBlockIndex* pstart, const Consensus::Params& consensusParams); \r\n```\r\nthat call the Consensus::Params-independent IsSuperMajority.\r\n\r\nThat should also make things easier for replacing the softfork feature voting since one would only need to touch inside those methods and Consensus::Params.\r\n\r\nI think those are all options but I'm happy just decoupling IsSuperMajority from the Params() factory, so if anyone has stronger opinions between the 3 options I don't really care which one to use. ",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-04-30T10:39:34Z",
      "diff_hunk" : "@@ -2701,11 +2697,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r29419079",
      "id" : 29419079,
      "original_commit_id" : "55d732fb668fa3e93bc4883d43826e2b2ac9fe8b",
      "original_position" : 74,
      "path" : "src/main.cpp",
      "position" : 65,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-06T14:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29419079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needed rebase",
      "created_at" : "2015-05-06T10:56:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#issuecomment-99417495",
      "id" : 99417495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5968",
      "updated_at" : "2015-05-06T10:56:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99417495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30247046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30247046"
         }
      },
      "body" : "You're changing the  counter data type here, is that intentional?",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-05-13T16:07:26Z",
      "diff_hunk" : "@@ -2779,11 +2775,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n {\n-    unsigned int nToCheck = Params().ToCheckBlockUpgradeMajority();\n     unsigned int nFound = 0;\n-    for (unsigned int i = 0; i < nToCheck && nFound < nRequired && pstart != NULL; i++)\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30247046",
      "id" : 30247046,
      "original_commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "original_position" : 70,
      "path" : "src/main.cpp",
      "position" : 70,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-13T16:07:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30247046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30261898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30261898"
         }
      },
      "body" : "Yes, to avoid introducing a new warning.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-05-13T18:39:28Z",
      "diff_hunk" : "@@ -2779,11 +2775,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n {\n-    unsigned int nToCheck = Params().ToCheckBlockUpgradeMajority();\n     unsigned int nFound = 0;\n-    for (unsigned int i = 0; i < nToCheck && nFound < nRequired && pstart != NULL; i++)\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30261898",
      "id" : 30261898,
      "original_commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "original_position" : 70,
      "path" : "src/main.cpp",
      "position" : 70,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-13T18:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30261898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30262010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30262010"
         }
      },
      "body" : "Another option would be to change consensusParams.nMajorityWindow to unsigned.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-05-13T18:40:23Z",
      "diff_hunk" : "@@ -2779,11 +2775,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n {\n-    unsigned int nToCheck = Params().ToCheckBlockUpgradeMajority();\n     unsigned int nFound = 0;\n-    for (unsigned int i = 0; i < nToCheck && nFound < nRequired && pstart != NULL; i++)\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30262010",
      "id" : 30262010,
      "original_commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "original_position" : 70,
      "path" : "src/main.cpp",
      "position" : 70,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-13T18:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30262010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30402510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30402510"
         }
      },
      "body" : "I'm happy with an int counter, just asked to be sure.",
      "commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "created_at" : "2015-05-15T11:46:11Z",
      "diff_hunk" : "@@ -2779,11 +2775,10 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned int nRequired)\n+static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n {\n-    unsigned int nToCheck = Params().ToCheckBlockUpgradeMajority();\n     unsigned int nFound = 0;\n-    for (unsigned int i = 0; i < nToCheck && nFound < nRequired && pstart != NULL; i++)\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5968#discussion_r30402510",
      "id" : 30402510,
      "original_commit_id" : "51aa24927e6be7d5dd9855bf485989483fef13bb",
      "original_position" : 70,
      "path" : "src/main.cpp",
      "position" : 70,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5968",
      "updated_at" : "2015-05-15T11:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30402510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
