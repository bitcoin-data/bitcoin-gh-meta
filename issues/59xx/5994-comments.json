[
   {
      "body" : "lightly tested ACK\r\n\r\nThanks for doing this.  I coded this a while ago, then set it aside.  Your version, with registration, is cleaner.\r\n",
      "created_at" : "2015-04-12T15:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92081400",
      "id" : 92081400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-12T15:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92081400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r28207102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28207102"
         }
      },
      "body" : "Nit: This seems to have sneaked in?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-12T20:36:14Z",
      "diff_hunk" : "@@ -1208,7 +1208,7 @@ CAmount CWalletTx::GetCredit(const isminefilter& filter) const\n }\n \n CAmount CWalletTx::GetImmatureCredit(bool fUseCache) const\n-{\n+{    ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r28207102",
      "id" : 28207102,
      "original_commit_id" : "b0c18bf9b0e4a7ea6c83a4202b22f01d743ce69d",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28207102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "fixed @Diapolo's nits.",
      "created_at" : "2015-04-13T13:06:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92344590",
      "id" : 92344590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-13T13:06:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92344590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Concept ack. \r\nGiven that you're touching their interfaces already, could CreateNewBlockWithScript() ProcessBlockFound(), BitcoinMiner() and GenerateBitcoins() take ```const CChainParams& chainparams``` as parameter?",
      "created_at" : "2015-04-14T11:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92775415",
      "id" : 92775415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T11:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92775415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Added a commit on top to help improve global state independence by passing `CChainParams` for the touched functions.",
      "created_at" : "2015-04-14T12:16:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92788143",
      "id" : 92788143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T12:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92788143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ut ACK, it is very nice to decouple miner.o from the wallet.",
      "created_at" : "2015-04-14T13:19:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92824909",
      "id" : 92824909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T13:19:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92824909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needs rebase",
      "created_at" : "2015-04-16T01:09:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93610000",
      "id" : 93610000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T01:09:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93610000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased and squashed [squashme] commit.",
      "created_at" : "2015-04-16T07:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93666918",
      "id" : 93666918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T07:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93666918",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I would also squash the second commit, leaving the note in the commit descrption. Specially, you never want to create CreateNewBlockWithScript.\r\nIn any case, minor nit, re-utAck.",
      "created_at" : "2015-04-16T08:50:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93681185",
      "id" : 93681185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T08:50:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93681185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Agreed. Squashed.",
      "created_at" : "2015-04-16T08:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93681737",
      "id" : 93681737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T08:52:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93681737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29036731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29036731"
         }
      },
      "body" : "I would say this needs to be able to fail (if no wallet is connected), and have the miner code deal with that case. Otherwise you can't really make it independent of the wallet (if it needs to assume a wallet that can provide a script output for mining is present).",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T09:46:44Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29036731",
      "id" : 29036731,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29036731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037153"
         }
      },
      "body" : "I'd rather pass a pointer to chainParams in, and pass that by value to BitcoinMiners. That makes it more obvious to the caller that the argument may be used for a longer time.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T09:53:27Z",
      "diff_hunk" : "@@ -558,7 +541,7 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n \n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037153",
      "id" : 29037153,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 99,
      "path" : "src/miner.cpp",
      "position" : 116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037319"
         }
      },
      "body" : "Ugh, this means you'll never get a key back, even if no block is found. Would it be possible for the wallet to keep track of which keys are currently being used in a map, and when a block is found, look up the key in the map and mark it as kept?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T09:56:16Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037319",
      "id" : 29037319,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037367"
         }
      },
      "body" : "I think it can fail. If no listening module provides a CScript through signal `ScriptForMining` the miner will continue with a empty script which should result in a unspendable coinbase? But i didn't tested that. Will do.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T09:57:24Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037367",
      "id" : 29037367,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037556"
         }
      },
      "body" : "I would *not* want to create a block with an unspendable coinbase.\r\n\r\nI mean the call should return a boolean, or the resulting script should at least be tested for non-emptiness, and the miner should exit if that is the case.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T10:01:06Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037556",
      "id" : 29037556,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29041591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29041591"
         }
      },
      "body" : "Wouldn't it be nice if you could use generate() in a non-wallet environment? Regarding RPC test in a post-wallet-split-off world: this could make sense.\r\n\r\nIf somone uses the internal miner (which has no productive usage IMO) in a wallet-disable mode he probably uses it for testing only.\r\n\r\nI agree with adding a warning to the log. But throwing an error would block testing.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T11:33:17Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29041591",
      "id" : 29041591,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29041591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29044518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29044518"
         }
      },
      "body" : "I think the right solution for that is having a trivial not-really-a-wallet\nprovider that explicitly allows you to set the script output to mine to. It\njust looks incorrect to have a provider interface for something, and a\ndefault implementation that results in the least expected result.\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T12:35:04Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29044518",
      "id" : 29044518,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29044518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045002"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045002"
         }
      },
      "body" : "Agreed. Maybe it would be most efficient by adding a argument to `generate()` and `setgenerate()` RPC calls where one could provide a output script to mine to?\r\n\r\nAdding a validation interface implementation for non-wallet-mining could be over the top.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T12:44:16Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045002",
      "id" : 29045002,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045501"
         }
      },
      "body" : "Yes, generate can just be changed to not need the GetScriptForMining\ninterface. And setgenerate could just be deleted IMHO and replaced with a\nsimple proof of concept Python or C miner in the tree.\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T12:54:00Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045501",
      "id" : 29045501,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045546"
         }
      },
      "body" : "I just don't like an interface that can clearly fail, but doesn't have a\nclear way to indicate failure.\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T12:54:41Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045546",
      "id" : 29045546,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045603"
         }
      },
      "body" : "IIRC there was a discussion about this on IRC.\r\nBut right, i also have a bad feeling with this. Every mining thread reserves and keeps a key straight off.\r\n\r\nI think i'm going invest there some time and build a proper way of only keeping keys which where used when a block was created.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-04-24T12:55:33Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045603",
      "id" : 29045603,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Updated.\r\nDecoupled wallet (over signaling) from miner and rpcmining commands.\r\nIt still uses signaling to allow different wallet/pubscript-generation implementations, though, mining without pubScript providing listener will generate a error and stops mining.\r\n\r\nNow it reserves and keeps a key when calling `setgenerate` or generating over cmd arg `gen` (same key for all generated blocks).",
      "created_at" : "2015-04-29T12:24:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97408182",
      "id" : 97408182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-29T12:24:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97408182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Travis is failing for the build without wallet: https://travis-ci.org/bitcoin/bitcoin/jobs/60528797#L1557",
      "created_at" : "2015-04-30T11:17:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97743001",
      "id" : 97743001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T11:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97743001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon: Thanks for the report. Fixed.",
      "created_at" : "2015-04-30T11:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97747636",
      "id" : 97747636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T11:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97747636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Now the miner is completely decoupled from the wallet.\r\nThere are no more `#ifdef ENABLE_WALLET` checks (for mining).\r\nThe only check is during runtime if there was a listening device who could provide a `CScript` over the signal `ScriptForMining()`.\r\n\r\nIf one tries to use `-gen` without a wallet compiled in or enabled, it then will throw an exception during init phase. Current master would just ignore the cmd arg `-gen` if no wallet is present.\r\n\r\nThe RPC commands `setgenerate`, `generate`, `getgenerate` works in wallet-disabled mode but also throw a exception `error: {\"code\":-32601,\"message\":\"Use the generate method instead of setgenerate on this network\"}`",
      "created_at" : "2015-04-30T12:23:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97753055",
      "id" : 97753055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T12:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97753055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29929177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29929177"
         }
      },
      "body" : "I think we can leave this as it is now. The only two points where this directly reserves and keeps a key is when starting the internal miner (over `-gen` or `setgenerate`, same script/key for all threads) or when calling generate.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-05-08T10:05:01Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29929177",
      "id" : 29929177,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29929177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Rebased.\r\nSeeks testers to escape the rebase hamster wheel.",
      "created_at" : "2015-05-19T11:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103450963",
      "id" : 103450963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T11:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103450963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r30593445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593445"
         }
      },
      "body" : "Nit: Missing a space after ``//``\r\nEdit: Same nit in rpcmining.cpp.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-05-19T12:26:29Z",
      "diff_hunk" : "@@ -571,9 +549,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r30593445",
      "id" : 30593445,
      "original_commit_id" : "6a30073b4c0f342c320be7544f63109317094e20",
      "original_position" : 106,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Can you extend or explain in some more details, how this pull achieves, what it sais in the commit-msg title? Perhaps in the commit-msg itself.",
      "created_at" : "2015-05-19T12:30:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103469233",
      "id" : 103469233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T12:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103469233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo: this PR is a step forward in separating the wallet from the core which can lead to multiple benefits. This would be required to allow a flexible interface (basic modularity) for adding/switching bitcoin-core wallets.",
      "created_at" : "2015-05-19T13:16:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103483044",
      "id" : 103483044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T13:16:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103483044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31489235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31489235"
         }
      },
      "body" : "Are signals guaranteed to be synchronous?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-02T02:33:48Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31489235",
      "id" : 31489235,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31489235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31491833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31491833"
         }
      },
      "body" : "Yes. Boost signals2 are always synchronous and in strict order (first register first call).",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-02T04:09:11Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31491833",
      "id" : 31491833,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31491833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31493447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31493447"
         }
      },
      "body" : "Is this guaranteed/by design, or merely an implementation coincidence?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-02T05:19:42Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31493447",
      "id" : 31493447,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31493447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31556202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31556202"
         }
      },
      "body" : "IIRC boost signals2 are by design synchronous. Check http://www.boost.org/doc/libs/1_58_0/doc/html/signals2/thread-safety.html",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-02T18:41:38Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31556202",
      "id" : 31556202,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31556202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31567780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31567780"
         }
      },
      "body" : "Nothing on that page suggests they are synchronous...?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-02T20:33:56Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31567780",
      "id" : 31567780,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31567780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31607349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31607349"
         }
      },
      "body" : "Maybe my backtrace prove (see below) can convince you.\r\nI can also post a linux gdb backtrace or you could add a `sleep(10) in `void CWallet::GetScriptForMining(CScript &script)`.\r\n\r\n![bildschirmfoto 2015-06-03 um 11 34 37](https://cloud.githubusercontent.com/assets/178464/7957020/a55ba08e-09e4-11e5-9170-b41acdc98e71.png)",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T09:37:21Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31607349",
      "id" : 31607349,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31607349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31654186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31654186"
         }
      },
      "body" : "That's with a current version of Boost. Nothing I can see prevents Boost 1.90 from making it all asynchronous.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T18:28:54Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31654186",
      "id" : 31654186,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31654186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31664926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31664926"
         }
      },
      "body" : "What would asynchronous even mean in this context? You can specify how signal's return values are combined. There is no way to make the execution asynchronous without breaking the API (which returns the combined return value directly).",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T20:15:46Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31664926",
      "id" : 31664926,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31664926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31667154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31667154"
         }
      },
      "body" : "@sipa That's n/a for void return values. Maybe the solution here is to return the CScript then?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T20:38:32Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31667154",
      "id" : 31667154,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31667154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31668320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31668320"
         }
      },
      "body" : "I think we can very reasonably assume that boost::signals2 will not fundamentally change their design and API in a way that will only remain compatible for void outputs.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T20:50:39Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31668320",
      "id" : 31668320,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31668320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31676663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31676663"
         }
      },
      "body" : "@luke-jr: if the signal listener don't provide a script, a exception get thrown at L559. If there are multiple listeners, one listener can detect this by reading out the passed-by-reference `coinbaseScript` (check if it's empty, etc.) and skip the creation/generation of another `CScript` or do some other clever things. IMO this design is acceptable for the internal miner/wallet decoupling. ",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-03T22:20:42Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31676663",
      "id" : 31676663,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31676663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2015-06-14T14:07:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-111828921",
      "id" : 111828921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-06-14T14:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111828921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2015-06-15T11:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-112030492",
      "id" : 112030492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-06-15T11:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112030492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32411664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32411664"
         }
      },
      "body" : "Directly keeping the reserve key for a generate command is okay. It can result in unused but kept reserve keys if no block has been found during `GenerateBitcoins()` (`generate`, `setgenerate`). But this should be okay, at least after we merge HD features (https://github.com/bitcoin/bitcoin/pull/6265).\r\nAnd this would fix https://github.com/bitcoin/bitcoin/issues/6268",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-15T11:47:01Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32411664",
      "id" : 32411664,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32411664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32412006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32412006"
         }
      },
      "body" : "Maybe I'm alone with this, but I dislike boost::cref... it seems like a hack to make pass-by-reference work when passing a pointer would work just as well.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-15T11:52:44Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided\n+    if (!coinbaseScript.size())\n+        throw std::runtime_error(\"No coinbase script available (mining requires a wallet)\");\n+\n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams), coinbaseScript));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32412006",
      "id" : 32412006,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 113,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32412006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Untested ACK.",
      "created_at" : "2015-06-15T11:55:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-112032340",
      "id" : 112032340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-06-15T11:55:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112032340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "re-untestedACK",
      "created_at" : "2015-06-15T12:35:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-112049215",
      "id" : 112049215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-06-15T12:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112049215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32416236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32416236"
         }
      },
      "body" : "So a hack for something that's causes by a limitation in Boost itself? Weird...",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-15T12:57:52Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided\n+    if (!coinbaseScript.size())\n+        throw std::runtime_error(\"No coinbase script available (mining requires a wallet)\");\n+\n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams), coinbaseScript));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32416236",
      "id" : 32416236,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 113,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32416236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597616"
         }
      },
      "body" : "Why not make the return argument explicit:\r\n\r\n    CScript GetScriptForMining();\r\n\r\nYes - you'll need to specify a combiner for the return argument, but right now this issue (\"what if there are multiple subscribers that return a value\") is hidden.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:11:59Z",
      "diff_hunk" : "@@ -34,6 +35,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597616",
      "id" : 32597616,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597759"
         }
      },
      "body" : "As the internal miner is meant for testing only, this simple solution is elegant. I'd prefer not to introduce complex micro-management of keys, unless it's necessary for anything besides the miner. Responsibility for not requesting absurd numbers of scripts can be put with the callers (e.g. the mining threads).",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:16:11Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597759",
      "id" : 32597759,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597940"
         }
      },
      "body" : "Passing a pointer would be fine with me, I don't feel strongly about it. I suppose this will be replaced with C++11 constructs (lambda's?) when the time is there.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:20:58Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided\n+    if (!coinbaseScript.size())\n+        throw std::runtime_error(\"No coinbase script available (mining requires a wallet)\");\n+\n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams), coinbaseScript));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32597940",
      "id" : 32597940,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 113,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32597940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598048"
         }
      },
      "body" : "I think the current solution is elegant. If multiple subscribers are present, listeners can check the current script value and overwrite or change it. Combining return values (adding a combiner template) would mean to add a logic into the miner to decide, which scripts should be taken if multiple where supplied.\r\n\r\nBut sure, this have a downside of the fact, that all non-last signal listeners can't make sure that its script get taken.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:22:17Z",
      "diff_hunk" : "@@ -34,6 +35,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598048",
      "id" : 32598048,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598116"
         }
      },
      "body" : "I saw that the new scheduler also introduced `boost::cref` and i don't have a strong feeling about it (in both directions). Maybe it's worth fixing both as soon as we switch to c++11?",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:24:13Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided\n+    if (!coinbaseScript.size())\n+        throw std::runtime_error(\"No coinbase script available (mining requires a wallet)\");\n+\n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams), coinbaseScript));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598116",
      "id" : 32598116,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 113,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598802"
         }
      },
      "body" : "I don't have a strong opinion either, but I plan to copy whatever is done here for other functions in main.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:40:06Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided\n+    if (!coinbaseScript.size())\n+        throw std::runtime_error(\"No coinbase script available (mining requires a wallet)\");\n+\n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams), coinbaseScript));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32598802",
      "id" : 32598802,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 113,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32598802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32599109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32599109"
         }
      },
      "body" : "I tend to disagree that it's the responsibility of the listeners to handle what to do when there are multiple listeners - you may not always have control over in which order they are invoked, and that can result in hard to debug problems.\r\n\r\nI'm not sure we even want to have multiple subscribers here, ever? If not, a combiner could simply throw an error if multiple return values are returned.\r\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:47:04Z",
      "diff_hunk" : "@@ -34,6 +35,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32599109",
      "id" : 32599109,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32599109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32599373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32599373"
         }
      },
      "body" : "Lets say if we support two wallets, we could define which wallet takes the signaling-lead by setting the signal registration order (last signal connect = last signal call).\r\n\r\nThrowing an error because both wallets could provide a script for mining seems to be relatively strict. The current solution would allow the 2nd (or upcoming) wallet(s) to decide if he likes to take the lead and overwrite or allow the first wallets script.\r\n\r\nAdding a combiner would mean that we somehow had to check, which wallet provided which script. Also in that case the miner is in charge to decide which script should be taken.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-17T06:54:23Z",
      "diff_hunk" : "@@ -34,6 +35,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r32599373",
      "id" : 32599373,
      "original_commit_id" : "7fb5dcb76b20f1a212c6357f48248ac3f34edb7d",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32599373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33187547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33187547"
         }
      },
      "body" : "NACK-- reservekey.KeepKey must happen AFTER .GetReservedKey or it is a no-op.\r\n\r\nThis works:\r\n```\r\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\r\nindex 440459f..933b0ec 100644\r\n--- a/src/wallet/wallet.cpp\r\n+++ b/src/wallet/wallet.cpp\r\n@@ -2586,12 +2586,12 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\r\n void CWallet::GetScriptForMining(CScript &script)\r\n {\r\n     CReserveKey reservekey(this);\r\n-    reservekey.KeepKey();\r\n\r\n     CPubKey pubkey;\r\n     if (!reservekey.GetReservedKey(pubkey))\r\n         return;\r\n     script = CScript() << ToByteVector(pubkey) << OP_CHECKSIG;\r\n+    reservekey.KeepKey();\r\n }\r\n\r\n void CWallet::LockCoin(COutPoint& output)\r\n```\r\n\r\nTo test: generate a block in -regtest mode, get the address of the coinbase transaction (getblock and then gettransaction). Then call getnewaddress; with the code as-is, you'll get the same pubkey as used by the coinbase transaction.\r\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-24T19:46:47Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33187547",
      "id" : 33187547,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33187547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33188627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33188627"
         }
      },
      "body" : "Hmmm... Indeed. This was a serious mistake.\r\nThanks for tracking this down.\r\nFixed.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-24T19:57:40Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33188627",
      "id" : 33188627,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33188627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33565065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33565065"
         }
      },
      "body" : "Why not make CReserveKey (or e.g. CReserveScript) an abstract base class defined outside the wallet, and return that from `CWallet::GetScriptForMining`, so that like now the caller can decide to keep or return it\r\n\r\nThis also interacts better with the case where multiple wallets return a script for mining and some have to be discarded. At least with a CReserveKey-like class, these keys will be recycled.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-30T12:04:30Z",
      "diff_hunk" : "@@ -2583,6 +2583,16 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33565065",
      "id" : 33565065,
      "original_commit_id" : "d65e9a84e7713a601009bd00fb8357f4310c09ae",
      "original_position" : 6,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33565065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33610573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33610573"
         }
      },
      "body" : "Yes. This current design does not respect the keypool/CReserveKey. Will try a better approach.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-06-30T19:02:02Z",
      "diff_hunk" : "@@ -2583,6 +2583,16 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33610573",
      "id" : 33610573,
      "original_commit_id" : "d65e9a84e7713a601009bd00fb8357f4310c09ae",
      "original_position" : 6,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33610573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33673391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33673391"
         }
      },
      "body" : "Note that `Inventory(const uint256 &hash)`, connected to `g_signals.Inventory` does exactly the same thing. As far as I see we can get rid of `UpdateRequestCount` and replace it with that.\r\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-07-01T12:32:40Z",
      "diff_hunk" : "@@ -34,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(boost::shared_ptr<CReserveScript>&) {};\n+    virtual void UpdateRequestCount(const CBlock&) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33673391",
      "id" : 33673391,
      "original_commit_id" : "cc304ec8fe69bd8520213db5d6673884670822f1",
      "original_position" : 17,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33673391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33673415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33673415"
         }
      },
      "body" : "Redundant `;`\r\n",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-07-01T12:33:03Z",
      "diff_hunk" : "@@ -609,4 +609,13 @@ class CScript : public std::vector<unsigned char>\n     }\n };\n \n+class CReserveScript\n+{\n+public:\n+    CScript reserveScript;\n+    virtual void KeepScript() {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33673415",
      "id" : 33673415,
      "original_commit_id" : "cc304ec8fe69bd8520213db5d6673884670822f1",
      "original_position" : 8,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33673415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33681246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33681246"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-07-01T14:07:06Z",
      "diff_hunk" : "@@ -609,4 +609,13 @@ class CScript : public std::vector<unsigned char>\n     }\n };\n \n+class CReserveScript\n+{\n+public:\n+    CScript reserveScript;\n+    virtual void KeepScript() {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33681246",
      "id" : 33681246,
      "original_commit_id" : "cc304ec8fe69bd8520213db5d6673884670822f1",
      "original_position" : 8,
      "path" : "src/script/script.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33681246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33681613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33681613"
         }
      },
      "body" : "Renamed `UpdateRequestCount` (name does not reflect the purpose of the method) to `ResetRequestCount`.",
      "commit_id" : "a7b9623d189eb4a7d37ff7ad706d6385c3a38e80",
      "created_at" : "2015-07-01T14:11:08Z",
      "diff_hunk" : "@@ -34,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n+    virtual void GetScriptForMining(boost::shared_ptr<CReserveScript>&) {};\n+    virtual void UpdateRequestCount(const CBlock&) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r33681613",
      "id" : 33681613,
      "original_commit_id" : "cc304ec8fe69bd8520213db5d6673884670822f1",
      "original_position" : 17,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-07-01T14:11:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33681613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2015-07-01T16:39:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-117743157",
      "id" : 117743157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-07-01T16:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/117743157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
