[
   {
      "body" : "Nice, I like the simplicity of the semantics. Will test.",
      "created_at" : "2015-04-07T20:53:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-90729728",
      "id" : 90729728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-07T20:53:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90729728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ideally you'd only take blocks requested before this one into account for computing the allowed remaining time, but that's much harder to implement.\r\n\r\nI did very light testing (parting mainnet sync), and it seems to work well so far.",
      "created_at" : "2015-04-07T21:52:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-90743227",
      "id" : 90743227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-07T21:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90743227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa  I thought you raised a good point about ignoring blocks requested after a given one, so I've pushed up a commit that does so (for block requests going to the same peer).\r\n\r\nI am not entirely sure the additional 5 lines of code (and one extra piece of state for each peer) is worth the code complexity, so if you prefer the first version I can drop this commit, but it seemed unfortunate that in the first approach,  if a single peer had 16 blocks outstanding at the end of your download, that even the reduced timeout window would still be 95 minutes away -- a long time compared with how fast IBD should be with headers-first.  With this change, in that same situation, the peer would have to deliver the first block in 20 minutes or be disconnected, which seems like a meaningful improvement.",
      "created_at" : "2015-04-09T20:05:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-91342855",
      "id" : 91342855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-09T20:05:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91342855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Travis failed, and this doesn't look like a random failure.",
      "created_at" : "2015-04-11T09:32:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-91800342",
      "id" : 91800342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-11T09:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91800342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Fixed",
      "created_at" : "2015-04-11T10:07:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-91817230",
      "id" : 91817230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-11T10:07:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91817230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "ACK, feel free to squash.",
      "created_at" : "2015-04-11T10:28:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-91823703",
      "id" : 91823703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-11T10:28:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91823703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Hmm, it seems you're not using nValidatedQueuedBefore at all anymore. Is that intentional?",
      "created_at" : "2015-04-12T15:01:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-92076893",
      "id" : 92076893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-12T15:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92076893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Thanks for catching that; it was intentional to not use it anymore but it was an oversight not to remove the unnecessary variable from QueuedBlock.  Since the original timeout calculation was based only on information known at the time of a block request, I opted to store the disconnect time directly.\r\n\r\nI've updated the pull to remove that variable.",
      "created_at" : "2015-04-13T17:39:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-92441803",
      "id" : 92441803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-04-13T17:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92441803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Now that #5662 has been merged, which can increase the number of blocks in flight, I think this would be a useful behavior change.  Anything else I can do here?",
      "created_at" : "2015-05-06T16:32:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-99530714",
      "id" : 99530714,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-05-06T16:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99530714",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Code review and lightly tested (synced a partly-synced main chain using it) ACK.",
      "created_at" : "2015-05-13T16:23:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-101735897",
      "id" : 101735897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-05-13T16:23:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101735897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-05-26T11:02:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-105489528",
      "id" : 105489528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-05-26T11:02:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105489528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Hi,\r\nJust to let you know that there is a warning during build since this merge: \r\n> main.cpp: In function Ã¢ÂÂbool SendMessages(CNode*, bool)Ã¢ÂÂ:\r\nmain.cpp:4841:31: warning: unused variable Ã¢ÂÂconsensusParamsÃ¢ÂÂ [-Wunused-variable]\r\n      const Consensus::Params& consensusParams = Params().GetConsensus(); \r\n\r\nRemoving line 4148 in mail.cpp removes the warning, but maybe there is more to do/check.",
      "created_at" : "2015-05-27T09:06:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5976#issuecomment-105831187",
      "id" : 105831187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5976",
      "updated_at" : "2015-05-27T09:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105831187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2268554?v=3",
         "events_url" : "https://api.github.com/users/arthurbouquet/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arthurbouquet/followers",
         "following_url" : "https://api.github.com/users/arthurbouquet/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arthurbouquet/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arthurbouquet",
         "id" : 2268554,
         "login" : "arthurbouquet",
         "organizations_url" : "https://api.github.com/users/arthurbouquet/orgs",
         "received_events_url" : "https://api.github.com/users/arthurbouquet/received_events",
         "repos_url" : "https://api.github.com/users/arthurbouquet/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arthurbouquet/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arthurbouquet/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arthurbouquet"
      }
   }
]
