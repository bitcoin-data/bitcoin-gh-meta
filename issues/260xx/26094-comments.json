[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/26094#pullrequestreview-1188868572), [achow101](https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1416502857) |\n| Concept ACK | [jarolrod](https://github.com/bitcoin/bitcoin/pull/26094#pullrequestreview-1117982696) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25634](https://github.com/bitcoin/bitcoin/pull/25634) (wallet, tests: Expand and test when the blank wallet flag should be un/set by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-09-14T22:31:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1247367369",
      "id" : 1247367369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26094",
      "node_id" : "IC_kwDOABII585KWVDJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1247367369/reactions"
      },
      "updated_at" : "2023-04-13T15:51:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1247367369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As I said previously,\r\n\r\n> I'm not sure this is the right approach, interface-wise, especially for calls like gettransaction, where the info gets embedded in the JSON transaction itself.\r\n>\r\n>Maybe it'd be better to just guarantee atomicity for batch requests?",
      "created_at" : "2022-09-20T01:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1251733666",
      "id" : 1251733666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26094",
      "node_id" : "IC_kwDOABII585Km_Ci",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1251733666/reactions"
      },
      "updated_at" : "2022-09-20T01:33:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1251733666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r978312443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978312443"
         }
      },
      "author_association" : "MEMBER",
      "body" : "there's also `assert_not_equal` that could be used",
      "commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "created_at" : "2022-09-23T06:49:23Z",
      "diff_hunk" : "@@ -296,5 +303,27 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('0.1'))\n \n \n+        # Tests the lastprocessedblock JSON object in getbalances, getwalletinfo\n+        # and gettransaction by checking for valid hex strings and by comparing\n+        # the hashes & heights between generated blocks.\n+        self.log.info(\"Test getbalances returns expected lastprocessedblock json object\")\n+        prev_hash = self.nodes[0].getbestblockhash()\n+        prev_height = self.nodes[0].getblock(prev_hash)['height']\n+        self.generatetoaddress(self.nodes[0], 5, self.nodes[0].get_deterministic_priv_key().address)\n+        lastblock = self.nodes[0].getbalances()['lastprocessedblock']\n+        assert_is_hash_string(lastblock['hash'])\n+        assert_equal((prev_hash == lastblock['hash']), False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r978312443",
      "id" : 978312443,
      "line" : 315,
      "node_id" : "PRRC_kwDOABII5846T9z7",
      "original_commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "original_line" : 315,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/wallet_balance.py",
      "position" : 38,
      "pull_request_review_id" : 1117982696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978312443/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-23T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978312443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r978313938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978313938"
         }
      },
      "author_association" : "MEMBER",
      "body" : "should also have a test on the height to ensure that this is in fact the \"expected\" `lastprocessedblock` json object?",
      "commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "created_at" : "2022-09-23T06:52:06Z",
      "diff_hunk" : "@@ -296,5 +303,27 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('0.1'))\n \n \n+        # Tests the lastprocessedblock JSON object in getbalances, getwalletinfo\n+        # and gettransaction by checking for valid hex strings and by comparing\n+        # the hashes & heights between generated blocks.\n+        self.log.info(\"Test getbalances returns expected lastprocessedblock json object\")\n+        prev_hash = self.nodes[0].getbestblockhash()\n+        prev_height = self.nodes[0].getblock(prev_hash)['height']\n+        self.generatetoaddress(self.nodes[0], 5, self.nodes[0].get_deterministic_priv_key().address)\n+        lastblock = self.nodes[0].getbalances()['lastprocessedblock']\n+        assert_is_hash_string(lastblock['hash'])\n+        assert_equal((prev_hash == lastblock['hash']), False)\n+        assert_greater_than(lastblock['height'], prev_height)\n+\n+        self.log.info(\"Test getwalletinfo returns expected lastprocessedblock json object\")\n+        walletinfo = self.nodes[0].getwalletinfo()\n+        assert_greater_than(walletinfo['lastprocessedblock']['height'], 0)\n+        assert_is_hash_string(walletinfo['lastprocessedblock']['hash'])\n+\n+        self.log.info(\"Test gettransaction returns expected lastprocessedblock json object\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r978313938",
      "id" : 978313938,
      "line" : 323,
      "node_id" : "PRRC_kwDOABII5846T-LS",
      "original_commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "original_line" : 323,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "test/functional/wallet_balance.py",
      "position" : 46,
      "pull_request_review_id" : 1117982696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978313938/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-23T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/978313938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-10-03T14:46:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1265571515",
      "id" : 1265571515,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26094",
      "node_id" : "IC_kwDOABII585Lbxa7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1265571515/reactions"
      },
      "updated_at" : "2022-10-03T14:46:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1265571515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986012396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986012396"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`assert_not_equal` does not exist :neutral_face: ",
      "commit_id" : "37a05b4f6bd768873cdfaaf0b417ef7d29c60f97",
      "created_at" : "2022-10-03T16:45:05Z",
      "diff_hunk" : "@@ -296,5 +303,27 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('0.1'))\n \n \n+        # Tests the lastprocessedblock JSON object in getbalances, getwalletinfo\n+        # and gettransaction by checking for valid hex strings and by comparing\n+        # the hashes & heights between generated blocks.\n+        self.log.info(\"Test getbalances returns expected lastprocessedblock json object\")\n+        prev_hash = self.nodes[0].getbestblockhash()\n+        prev_height = self.nodes[0].getblock(prev_hash)['height']\n+        self.generatetoaddress(self.nodes[0], 5, self.nodes[0].get_deterministic_priv_key().address)\n+        lastblock = self.nodes[0].getbalances()['lastprocessedblock']\n+        assert_is_hash_string(lastblock['hash'])\n+        assert_equal((prev_hash == lastblock['hash']), False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986012396",
      "id" : 986012396,
      "in_reply_to_id" : 978312443,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII5846xVrs",
      "original_commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "original_line" : 314,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/wallet_balance.py",
      "position" : 37,
      "pull_request_review_id" : 1128712047,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986012396/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T16:45:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986012396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986018358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986018358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "right, sorry, mind was mixed up while reviewing: https://github.com/bitcoin/bitcoin/pull/23127",
      "commit_id" : "37a05b4f6bd768873cdfaaf0b417ef7d29c60f97",
      "created_at" : "2022-10-03T16:51:37Z",
      "diff_hunk" : "@@ -296,5 +303,27 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('0.1'))\n \n \n+        # Tests the lastprocessedblock JSON object in getbalances, getwalletinfo\n+        # and gettransaction by checking for valid hex strings and by comparing\n+        # the hashes & heights between generated blocks.\n+        self.log.info(\"Test getbalances returns expected lastprocessedblock json object\")\n+        prev_hash = self.nodes[0].getbestblockhash()\n+        prev_height = self.nodes[0].getblock(prev_hash)['height']\n+        self.generatetoaddress(self.nodes[0], 5, self.nodes[0].get_deterministic_priv_key().address)\n+        lastblock = self.nodes[0].getbalances()['lastprocessedblock']\n+        assert_is_hash_string(lastblock['hash'])\n+        assert_equal((prev_hash == lastblock['hash']), False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986018358",
      "id" : 986018358,
      "in_reply_to_id" : 978312443,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII5846xXI2",
      "original_commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "original_line" : 314,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/wallet_balance.py",
      "position" : 37,
      "pull_request_review_id" : 1128720146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986018358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T16:51:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986018358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986025054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986025054"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "37a05b4f6bd768873cdfaaf0b417ef7d29c60f97",
      "created_at" : "2022-10-03T16:59:05Z",
      "diff_hunk" : "@@ -296,5 +303,27 @@ def test_balances(*, fee_node_1=0):\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('0.1'))\n \n \n+        # Tests the lastprocessedblock JSON object in getbalances, getwalletinfo\n+        # and gettransaction by checking for valid hex strings and by comparing\n+        # the hashes & heights between generated blocks.\n+        self.log.info(\"Test getbalances returns expected lastprocessedblock json object\")\n+        prev_hash = self.nodes[0].getbestblockhash()\n+        prev_height = self.nodes[0].getblock(prev_hash)['height']\n+        self.generatetoaddress(self.nodes[0], 5, self.nodes[0].get_deterministic_priv_key().address)\n+        lastblock = self.nodes[0].getbalances()['lastprocessedblock']\n+        assert_is_hash_string(lastblock['hash'])\n+        assert_equal((prev_hash == lastblock['hash']), False)\n+        assert_greater_than(lastblock['height'], prev_height)\n+\n+        self.log.info(\"Test getwalletinfo returns expected lastprocessedblock json object\")\n+        walletinfo = self.nodes[0].getwalletinfo()\n+        assert_greater_than(walletinfo['lastprocessedblock']['height'], 0)\n+        assert_is_hash_string(walletinfo['lastprocessedblock']['hash'])\n+\n+        self.log.info(\"Test gettransaction returns expected lastprocessedblock json object\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#discussion_r986025054",
      "id" : 986025054,
      "in_reply_to_id" : 978313938,
      "line" : 324,
      "node_id" : "PRRC_kwDOABII5846xYxe",
      "original_commit_id" : "7bf1c59b9c5d4e702d1a730ef639f597973f650e",
      "original_line" : 324,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "test/functional/wallet_balance.py",
      "position" : 47,
      "pull_request_review_id" : 1128729595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26094",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986025054/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T16:59:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986025054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 37a05b4f6bd768873cdfaaf0b417ef7d29c60f97\r\n\r\n> Maybe it'd be better to just guarantee atomicity for batch requests?\r\n\r\nI don't really see how that would be possible to implement in a way that wouldn't be detrimental or fragile. It seems like it would have to be implemented with an explicit list of RPCs that must be done atomically in order to avoid any RPC just locking things up. Such a list could fall out of date as new RPCs are added and people forget, so it would be kind of fragile.",
      "created_at" : "2023-02-03T22:56:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1416502857",
      "id" : 1416502857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26094",
      "node_id" : "IC_kwDOABII585Ubh5J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1416502857/reactions"
      },
      "updated_at" : "2023-02-03T22:56:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1416502857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There's a test failure in `wallet_orphanedreward.py`.\r\n\r\n```\r\n256/263 - wallet_orphanedreward.py failed, Duration: 17 s\r\n\r\nstdout:\r\n2023-04-26T12:57:28.311000Z TestFramework (INFO): PRNG seed is: 5570008732445289618\r\n2023-04-26T12:57:28.313000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â¿_ð_20230426_085557/wallet_orphanedreward_19\r\n2023-04-26T12:57:40.283000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/andy/bitcoin/bitcoin/master/test/functional/test_framework/test_framework.py\", line 132, in main\r\n    self.run_test()\r\n  File \"/home/andy/bitcoin/bitcoin/master/gcc_build/enable-debug/../../test/functional/wallet_orphanedreward.py\", line 68, in run_test\r\n    assert_equal(self.nodes[1].getbalances(), pre_reorg_conf_bals)\r\n  File \"/home/andy/bitcoin/bitcoin/master/test/functional/test_framework/util.py\", line 56, in assert_equal\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\nAssertionError: not({'mine': {'trusted': Decimal('35.00000000'), 'untrusted_pending': Decimal('0E-8'), 'immature': Decimal('0E-8')}, 'lastprocessedblock': {'hash': '20e9d23d7183d38eb6789704c3e658d6915178fd95d4479edfd5c3f2df023793', 'height': 305}} == {'mine': {'trusted': Decimal('35.00000000'), 'untrusted_pending': Decimal('0E-8'), 'immature': Decimal('0E-8')}, 'lastprocessedblock': {'hash': '5503776f6d7a7dc6f769176922582a6333a0d6821ec0c2dc30f9114f45fa2351', 'height': 302}})\r\n2023-04-26T12:57:40.334000Z TestFramework (INFO): Stopping nodes\r\n2023-04-26T12:57:40.436000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_â¿_ð_20230426_085557/wallet_orphanedreward_19\r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_â¿_ð_20230426_085557/wallet_orphanedreward_19/test_framework.log\r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): \r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): Hint: Call /home/andy/bitcoin/bitcoin/master/test/functional/combine_logs.py '/tmp/test_runner_â¿_ð_20230426_085557/wallet_orphanedreward_19' to consolidate all logs\r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): \r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2023-04-26T12:57:40.436000Z TestFramework (ERROR): \r\n\r\n\r\nstderr:\r\n```",
      "created_at" : "2023-04-26T13:00:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26094#issuecomment-1523381226",
      "id" : 1523381226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26094",
      "node_id" : "IC_kwDOABII585azPPq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1523381226/reactions"
      },
      "updated_at" : "2023-04-26T13:00:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1523381226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
