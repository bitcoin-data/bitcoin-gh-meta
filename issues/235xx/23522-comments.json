[
   {
      "author_association" : "MEMBER",
      "body" : "Is there any way to enforce this without looking at the code with human eyes? Are the tests going to fail if we switch to std filesystem and have an incorrect string conversion?",
      "created_at" : "2021-11-16T07:35:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-969961851",
      "id" : 969961851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23522",
      "node_id" : "IC_kwDOABII58450HF7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969961851/reactions"
      },
      "updated_at" : "2021-11-16T07:35:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969961851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Documentation review ACK 9b575f1c734c052b695ce921fb6412b22c18fdb4\r\n\r\n> Are the tests going to fail if we switch to std filesystem and have an incorrect string conversion?\r\n\r\nYes, especially the Windows tests will fail, as the situation is most dire there. Both the functional and unit tests, as they both have some tests that use unicode characters in paths (that are not in any of the \"narrow\" codepages).",
      "created_at" : "2021-11-16T09:52:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-970102597",
      "id" : 970102597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23522",
      "node_id" : "IC_kwDOABII58450pdF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970102597/reactions"
      },
      "updated_at" : "2021-11-16T09:54:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970102597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750263938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750263938"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * Convert path object to a byte string. On POSIX, paths natively are byte\r\n```",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2021-11-16T13:19:10Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750263938",
      "id" : 750263938,
      "line" : 96,
      "node_id" : "PRRC_kwDOABII584suB6C",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 96,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 3,
      "pull_request_review_id" : 807287410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750263938/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T13:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750263938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750264221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264221"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * used to call POSIX APIs and for roundtrip conversion, logging, and\r\n```",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2021-11-16T13:19:30Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte\n- * strings so this is trivial. On Windows, paths natively are Unicode, so an\n- * encoding step is necessary.\n+ * strings, so this is trivial. On Windows, paths natively are Unicode, so an\n+ * encoding step is necessary. The inverse of \\ref PathToString is \\ref\n+ * PathFromString. The strings returned and parsed by these functions can be\n+ * used to call POSIX APIs, and for roundtrip conversion, logging, and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750264221",
      "id" : 750264221,
      "line" : 100,
      "node_id" : "PRRC_kwDOABII584suB-d",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 100,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 9,
      "pull_request_review_id" : 807287410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T13:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750264602"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264602"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * or URI applications might prefer to use higher-level escapes (\\uXXXX or\r\n```",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2021-11-16T13:19:57Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte\n- * strings so this is trivial. On Windows, paths natively are Unicode, so an\n- * encoding step is necessary.\n+ * strings, so this is trivial. On Windows, paths natively are Unicode, so an\n+ * encoding step is necessary. The inverse of \\ref PathToString is \\ref\n+ * PathFromString. The strings returned and parsed by these functions can be\n+ * used to call POSIX APIs, and for roundtrip conversion, logging, and\n+ * debugging.\n  *\n- * The inverse of \\ref PathToString is \\ref PathFromString. The strings\n- * returned and parsed by these functions can be used to call POSIX APIs, and\n- * for roundtrip conversion, logging, and debugging. But they are not\n- * guaranteed to be valid UTF-8, and are generally meant to be used internally,\n- * not externally. When communicating with external programs and libraries that\n- * require UTF-8, fs::path::u8string() and fs::u8path() methods can be used.\n- * For other applications, if support for non UTF-8 paths is required, or if\n- * higher-level JSON or XML or URI or C-style escapes are preferred, it may be\n- * also be appropriate to use different path encoding functions.\n- *\n- * Implementation note: On Windows, the std::filesystem::path(string)\n- * constructor and std::filesystem::path::string() method are not safe to use\n- * here, because these methods encode the path using C++'s narrow multibyte\n- * encoding, which on Windows corresponds to the current \"code page\", which is\n- * unpredictable and typically not able to represent all valid paths. So\n- * std::filesystem::path::u8string() and std::filesystem::u8path() functions\n- * are used instead on Windows. On POSIX, u8string/u8path functions are not\n- * safe to use because paths are not always valid UTF-8, so plain string\n- * methods which do not transform the path there are used.\n+ * Because \\ref PathToString and \\ref PathFromString functions don't specify an\n+ * encoding, they are meant to be used internally, not externally. They are not\n+ * appropriate to use in applications requiring UTF-8, where\n+ * fs::path::u8string() and fs::u8path() methods should be used instead. Other\n+ * applications could require still different encodings. For example, JSON, XML,\n+ * or URI applications might prefer to use higher level escapes (\\uXXXX or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r750264602",
      "id" : 750264602,
      "line" : 108,
      "node_id" : "PRRC_kwDOABII584suCEa",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 108,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 36,
      "pull_request_review_id" : 807287410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264602/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T13:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750264602",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/23522/commits/9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2021-11-16T19:33:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-970611969",
      "id" : 970611969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23522",
      "node_id" : "IC_kwDOABII58452l0B",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970611969/reactions"
      },
      "updated_at" : "2021-11-16T19:33:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970611969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-969961851\r\n\r\n> Is there any way to enforce this without looking at the code with human eyes? Are the tests going to fail if we switch to std filesystem and have an incorrect string conversion?\r\n\r\nI think ideally `PathToString` and `PathFromString` functions would be eliminated. I wrote these functions to allow switching from `boost::filesystem` to `std::filesystem` while preserving current behavior, but current behavior is actually a little broken.\r\n\r\n`PathToString` is mostly used for logging, but this is not ideal because the result is usually not quoted, and paths can contain spaces, quotes, punctuation and text that make resulting log messages ambiguous. They could also contain arbitrary characters including newlines, invalid UTF-8 sequences, invalid multibyte sequences that break log parsing. I think ideally these `PathToString` calls would be replaced with calls to a new `PathToLogString` function, and that function would add surrounding quotes around paths, replace internal quotes with `\\\"`, replace special ASCII characters like tabs and newlines with C `\\t` `\\n` escapes, replace non-latin unicode characters with `\\uXXXX` escapes on windows, and replace non-latin bytes with `\\xXX` escapes on POSIX. \r\n\r\n`PathFromString` is mostly used to parse command line and configuration arguments. I think ideally these calls would be removed and replaced with calls to a new `ArgsManager::GetPathArg` method. The method would treat command line arguments and configuration file paths as bytes on POSIX with no encoding or decoding. On windows, it would decode configuration file paths as UTF-8, and it would either decode command line arguments according to the current code page, or it would bypass the code page encoding and decoding done by the windows C library by overriding [`wmain`](https://docs.microsoft.com/en-us/cpp/c-language/using-wmain?view=msvc-170) and getting the original unicode arguments passed by the parent process in `wchar_t *argv[]`\r\n\r\nSo ideally we could get rid of `PathToString` to `PathFromString` entirely. But more narrowly if we just wanted to try minimize new encoding bugs and avoid `PathToString` results being passed to the `UniValue` constructor, we would need to use distinct string types like `std::string` for byte strings and `std::u8string` for unicode strings and make it an error to construct a `UniValue` from a byte string. We could also try to renaming the `PathToString` function to discourage use. Maybe to something like `PathToByteString`, `PathToInternalString`, `PathToSystemString`, `LegacyPathToString`",
      "created_at" : "2021-11-17T03:28:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-971141710",
      "id" : 971141710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23522",
      "node_id" : "IC_kwDOABII58454nJO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971141710/reactions"
      },
      "updated_at" : "2021-11-17T03:28:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971141710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for all reviews and thanks @shaavan for suggested edits. I didn't get to apply them here, but they could be used in another followup or maybe #20744",
      "created_at" : "2021-11-17T03:38:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#issuecomment-971145313",
      "id" : 971145313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23522",
      "node_id" : "IC_kwDOABII58454oBh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971145313/reactions"
      },
      "updated_at" : "2021-11-17T03:38:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971145313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993047"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done in #20744.",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2022-01-11T10:05:17Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993047",
      "id" : 781993047,
      "in_reply_to_id" : 750263938,
      "line" : 96,
      "node_id" : "PRRC_kwDOABII584unERX",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 96,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 3,
      "pull_request_review_id" : 848938386,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993047/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T10:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think this is more correct, have left out of #20744.",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2022-01-11T10:05:34Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte\n- * strings so this is trivial. On Windows, paths natively are Unicode, so an\n- * encoding step is necessary.\n+ * strings, so this is trivial. On Windows, paths natively are Unicode, so an\n+ * encoding step is necessary. The inverse of \\ref PathToString is \\ref\n+ * PathFromString. The strings returned and parsed by these functions can be\n+ * used to call POSIX APIs, and for roundtrip conversion, logging, and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993290",
      "id" : 781993290,
      "in_reply_to_id" : 750264221,
      "line" : 100,
      "node_id" : "PRRC_kwDOABII584unEVK",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 100,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 9,
      "pull_request_review_id" : 848938699,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993290/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T10:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993453"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done in #20744.",
      "commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "created_at" : "2022-01-11T10:05:44Z",
      "diff_hunk" : "@@ -94,31 +94,34 @@ static inline path operator+(path p1, path p2)\n \n /**\n  * Convert path object to byte string. On POSIX, paths natively are byte\n- * strings so this is trivial. On Windows, paths natively are Unicode, so an\n- * encoding step is necessary.\n+ * strings, so this is trivial. On Windows, paths natively are Unicode, so an\n+ * encoding step is necessary. The inverse of \\ref PathToString is \\ref\n+ * PathFromString. The strings returned and parsed by these functions can be\n+ * used to call POSIX APIs, and for roundtrip conversion, logging, and\n+ * debugging.\n  *\n- * The inverse of \\ref PathToString is \\ref PathFromString. The strings\n- * returned and parsed by these functions can be used to call POSIX APIs, and\n- * for roundtrip conversion, logging, and debugging. But they are not\n- * guaranteed to be valid UTF-8, and are generally meant to be used internally,\n- * not externally. When communicating with external programs and libraries that\n- * require UTF-8, fs::path::u8string() and fs::u8path() methods can be used.\n- * For other applications, if support for non UTF-8 paths is required, or if\n- * higher-level JSON or XML or URI or C-style escapes are preferred, it may be\n- * also be appropriate to use different path encoding functions.\n- *\n- * Implementation note: On Windows, the std::filesystem::path(string)\n- * constructor and std::filesystem::path::string() method are not safe to use\n- * here, because these methods encode the path using C++'s narrow multibyte\n- * encoding, which on Windows corresponds to the current \"code page\", which is\n- * unpredictable and typically not able to represent all valid paths. So\n- * std::filesystem::path::u8string() and std::filesystem::u8path() functions\n- * are used instead on Windows. On POSIX, u8string/u8path functions are not\n- * safe to use because paths are not always valid UTF-8, so plain string\n- * methods which do not transform the path there are used.\n+ * Because \\ref PathToString and \\ref PathFromString functions don't specify an\n+ * encoding, they are meant to be used internally, not externally. They are not\n+ * appropriate to use in applications requiring UTF-8, where\n+ * fs::path::u8string() and fs::u8path() methods should be used instead. Other\n+ * applications could require still different encodings. For example, JSON, XML,\n+ * or URI applications might prefer to use higher level escapes (\\uXXXX or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23522#discussion_r781993453",
      "id" : 781993453,
      "in_reply_to_id" : 750264602,
      "line" : 108,
      "node_id" : "PRRC_kwDOABII584unEXt",
      "original_commit_id" : "9b575f1c734c052b695ce921fb6412b22c18fdb4",
      "original_line" : 108,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/fs.h",
      "position" : 36,
      "pull_request_review_id" : 848938903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23522",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993453/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T10:05:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781993453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
