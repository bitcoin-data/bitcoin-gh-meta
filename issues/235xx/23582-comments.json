[
   {
      "author_association" : "MEMBER",
      "body" : "CentOS 6 reached EOL already a year ago. I'd recommend that you upgrade to an operating system that ships security and maintenance updates.",
      "created_at" : "2021-11-24T16:19:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23582#issuecomment-978028222",
      "id" : 978028222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23582",
      "node_id" : "IC_kwDOABII5846S4a-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978028222/reactions"
      },
      "updated_at" : "2021-11-24T16:19:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978028222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have additional info. I think this will help, since the execution of the configuration script is not exactly what was intended:\r\n\r\nconfig.log:\r\n```\r\nconfigure:27082: checking for strong getauxval support in the system headers\r\nconfigure:27101: g++ -std=c++17 -c -g -O2 -fno-extended-identifiers -I/home/bitcoin/include -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS conftest.cpp >&5\r\nconftest.cpp:74:14: fatal error: arm_acle.h: No such file or directory\r\n   74 |     #include <arm_acle.h>\r\n      |              ^~~~~~~~~~~~\r\ncompilation terminated.\r\nconfigure:27101: $? = 1\r\nconfigure: failed program was:\r\n| /* confdefs.h */\r\n| #define PACKAGE_NAME \"Bitcoin Core\"\r\n| #define PACKAGE_TARNAME \"bitcoin\"\r\n| #define PACKAGE_VERSION \"22.0.0\"\r\n| #define PACKAGE_STRING \"Bitcoin Core 22.0.0\"\r\n| #define PACKAGE_BUGREPORT \"https://github.com/bitcoin/bitcoin/issues\"\r\n| #define PACKAGE_URL \"https://bitcoincore.org/\"\r\n| #define HAVE_CXX17 1\r\n| #define STDC_HEADERS 1\r\n| #define HAVE_SYS_TYPES_H 1\r\n| #define HAVE_SYS_STAT_H 1\r\n| #define HAVE_STDLIB_H 1\r\n| #define HAVE_STRING_H 1\r\n| #define HAVE_MEMORY_H 1\r\n| #define HAVE_STRINGS_H 1\r\n| #define HAVE_INTTYPES_H 1\r\n| #define HAVE_STDINT_H 1\r\n| #define HAVE_UNISTD_H 1\r\n| #define HAVE_DLFCN_H 1\r\n| #define LT_OBJDIR \".libs/\"\r\n| #define USE_ASM 1\r\n| #define ENABLE_SSE41 1\r\n| #define ENABLE_AVX2 1\r\n| #define ENABLE_SHANI 1\r\n| #define HAVE___INT128 1\r\n| #define HAVE_PTHREAD 1\r\n| #define HAVE_DECL_STRERROR_R 1\r\n| #define HAVE_STRERROR_R 1\r\n| #define STRERROR_R_CHAR_P 1\r\n| #define HAVE_ENDIAN_H 1\r\n| #define HAVE_BYTESWAP_H 1\r\n| #define HAVE_STDIO_H 1\r\n| #define HAVE_STDLIB_H 1\r\n| #define HAVE_UNISTD_H 1\r\n| #define HAVE_STRINGS_H 1\r\n| #define HAVE_SYS_TYPES_H 1\r\n| #define HAVE_SYS_STAT_H 1\r\n| #define HAVE_SYS_SELECT_H 1\r\n| #define HAVE_SYS_PRCTL_H 1\r\n| #define HAVE_SYS_SYSCTL_H 1\r\n| #define HAVE_DECL_GETIFADDRS 1\r\n| #define HAVE_DECL_FREEIFADDRS 1\r\n| #define HAVE_DECL_STRNLEN 1\r\n| #define HAVE_DECL_FORK 1\r\n| #define HAVE_DECL_SETSID 1\r\n| #define HAVE_DECL_PIPE2 1\r\n| #define HAVE_DECL_LE16TOH 1\r\n| #define HAVE_DECL_LE32TOH 1\r\n| #define HAVE_DECL_LE64TOH 1\r\n| #define HAVE_DECL_HTOLE16 1\r\n| #define HAVE_DECL_HTOLE32 1\r\n| #define HAVE_DECL_HTOLE64 1\r\n| #define HAVE_DECL_BE16TOH 1\r\n| #define HAVE_DECL_BE32TOH 1\r\n| #define HAVE_DECL_BE64TOH 1\r\n| #define HAVE_DECL_HTOBE16 1\r\n| #define HAVE_DECL_HTOBE32 1\r\n| #define HAVE_DECL_HTOBE64 1\r\n| #define HAVE_DECL_BSWAP_16 1\r\n| #define HAVE_DECL_BSWAP_32 1\r\n| #define HAVE_DECL_BSWAP_64 1\r\n| #define HAVE_BUILTIN_CLZL 1\r\n| #define HAVE_BUILTIN_CLZLL 1\r\n| #define HAVE_MALLOC_INFO 1\r\n| #define HAVE_MALLOPT_ARENA_MAX 1\r\n| #define HAVE_POSIX_FALLOCATE 1\r\n| #define HAVE_DEFAULT_VISIBILITY_ATTRIBUTE 1\r\n| #define HAVE_THREAD_LOCAL 1\r\n| #define HAVE_GMTIME_R 1\r\n| #define HAVE_FDATASYNC 1\r\n| #define HAVE_O_CLOEXEC 1\r\n| /* end confdefs.h.  */\r\n| \r\n|     #include <arm_acle.h>\r\n|     #include <arm_neon.h>\r\n|     #include <sys/auxv.h>\r\n| \r\n| int\r\n| main ()\r\n| {\r\n| \r\n|     getauxval(AT_HWCAP);\r\n| \r\n|   ;\r\n|   return 0;\r\n| }\r\nconfigure:27107: result: no\r\nconfigure:27113: checking for weak getauxval support in the compiler\r\nconfigure:27133: g++ -std=c++17 -c -g -O2 -fno-extended-identifiers -I/home/bitcoin/include -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS conftest.cpp >&5\r\nconfigure:27133: $? = 0\r\nconfigure:27134: result: yes\r\n```\r\n\r\nHere your configure thinks that **weak getauxval** is OK but I made the temporarely script for testing (1.txt):\r\n\r\n```\r\n/* confdefs.h */\r\n#define PACKAGE_NAME \"Bitcoin Core\"\r\n#define PACKAGE_TARNAME \"bitcoin\"\r\n#define PACKAGE_VERSION \"22.0.0\"\r\n#define PACKAGE_STRING \"Bitcoin Core 22.0.0\"\r\n#define PACKAGE_BUGREPORT \"https://github.com/bitcoin/bitcoin/issues\"\r\n#define PACKAGE_URL \"https://bitcoincore.org/\"\r\n#define HAVE_CXX17 1\r\n#define STDC_HEADERS 1\r\n#define HAVE_SYS_TYPES_H 1\r\n#define HAVE_SYS_STAT_H 1\r\n#define HAVE_STDLIB_H 1\r\n#define HAVE_STRING_H 1\r\n#define HAVE_MEMORY_H 1\r\n#define HAVE_STRINGS_H 1\r\n#define HAVE_INTTYPES_H 1\r\n#define HAVE_STDINT_H 1\r\n#define HAVE_UNISTD_H 1\r\n#define HAVE_DLFCN_H 1\r\n#define LT_OBJDIR \".libs/\"\r\n#define USE_ASM 1\r\n#define ENABLE_SSE41 1\r\n#define ENABLE_AVX2 1\r\n#define ENABLE_SHANI 1\r\n#define HAVE___INT128 1\r\n#define HAVE_PTHREAD 1\r\n#define HAVE_DECL_STRERROR_R 1\r\n#define HAVE_STRERROR_R 1\r\n#define STRERROR_R_CHAR_P 1\r\n#define HAVE_ENDIAN_H 1\r\n#define HAVE_BYTESWAP_H 1\r\n#define HAVE_STDIO_H 1\r\n#define HAVE_STDLIB_H 1\r\n#define HAVE_UNISTD_H 1\r\n#define HAVE_STRINGS_H 1\r\n#define HAVE_SYS_TYPES_H 1\r\n#define HAVE_SYS_STAT_H 1\r\n#define HAVE_SYS_SELECT_H 1\r\n#define HAVE_SYS_PRCTL_H 1\r\n#define HAVE_SYS_SYSCTL_H 1\r\n#define HAVE_DECL_GETIFADDRS 1\r\n#define HAVE_DECL_FREEIFADDRS 1\r\n#define HAVE_DECL_STRNLEN 1\r\n#define HAVE_DECL_FORK 1\r\n#define HAVE_DECL_SETSID 1\r\n#define HAVE_DECL_PIPE2 1\r\n#define HAVE_DECL_LE16TOH 1\r\n#define HAVE_DECL_LE32TOH 1\r\n#define HAVE_DECL_LE64TOH 1\r\n#define HAVE_DECL_HTOLE16 1\r\n#define HAVE_DECL_HTOLE32 1\r\n#define HAVE_DECL_HTOLE64 1\r\n#define HAVE_DECL_BE16TOH 1\r\n#define HAVE_DECL_BE32TOH 1\r\n#define HAVE_DECL_BE64TOH 1\r\n#define HAVE_DECL_HTOBE16 1\r\n#define HAVE_DECL_HTOBE32 1\r\n#define HAVE_DECL_HTOBE64 1\r\n#define HAVE_DECL_BSWAP_16 1\r\n#define HAVE_DECL_BSWAP_32 1\r\n#define HAVE_DECL_BSWAP_64 1\r\n#define HAVE_BUILTIN_CLZL 1\r\n#define HAVE_BUILTIN_CLZLL 1\r\n#define HAVE_MALLOC_INFO 1\r\n#define HAVE_MALLOPT_ARENA_MAX 1\r\n#define HAVE_POSIX_FALLOCATE 1\r\n#define HAVE_DEFAULT_VISIBILITY_ATTRIBUTE 1\r\n#define HAVE_THREAD_LOCAL 1\r\n#define HAVE_GMTIME_R 1\r\n#define HAVE_FDATASYNC 1\r\n#define HAVE_O_CLOEXEC 1\r\n/* end confdefs.h.  */\r\n\r\n\r\n    #ifdef __linux__\r\n    unsigned long getauxval(unsigned long type) __attribute__((weak));\r\n    #define AT_HWCAP 16\r\n    #endif\r\n\r\nint\r\nmain ()\r\n{\r\n\r\n    getauxval(AT_HWCAP);\r\n\r\n  ;\r\n  return 0;\r\n}\r\n```\r\n\r\nAnd I have rerun it:\r\n\r\n```\r\n$ g++ -std=c++17 -c -g -O2 -fno-extended-identifiers -I/home/bitcoin/include -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS 1.txt\r\n\r\ng++: warning: 1.txt: linker input file unused because linking not done\r\n$ echo $?\r\n0\r\n```\r\n\r\nSo there not worked C++ test file but the shell returns code is zero (OK). I think this test should not be passed as OK.\r\n\r\nMy gcc compiled in home directory is:\r\n\r\n```\r\n$ gcc -v\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/home/bitcoin/libexec/gcc/x86_64-pc-linux-gnu/11.2.0/lto-wrapper\r\nTarget: x86_64-pc-linux-gnu\r\nConfigured with: ./configure --prefix=/home/bitcoin LDFLAGS='-L/home/bitcoin/lib -L/home/bitcoin/lib64 -L/usr/local/lib64 -L/lib64 -L/usr/lib64' CPPFLAGS=-I/home/bitcoin/include --disable-multilib\r\nThread model: posix\r\nSupported LTO compression algorithms: zlib\r\ngcc version 11.2.0 (GCC) \r\n```",
      "created_at" : "2021-11-24T17:01:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23582#issuecomment-978062283",
      "id" : 978062283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23582",
      "node_id" : "IC_kwDOABII5846TAvL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978062283/reactions"
      },
      "updated_at" : "2021-11-24T17:04:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978062283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/574333?v=4",
         "events_url" : "https://api.github.com/users/Perlover/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Perlover/followers",
         "following_url" : "https://api.github.com/users/Perlover/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Perlover/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Perlover",
         "id" : 574333,
         "login" : "Perlover",
         "node_id" : "MDQ6VXNlcjU3NDMzMw==",
         "organizations_url" : "https://api.github.com/users/Perlover/orgs",
         "received_events_url" : "https://api.github.com/users/Perlover/received_events",
         "repos_url" : "https://api.github.com/users/Perlover/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Perlover/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Perlover/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Perlover"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "So your test file assumes testing that the system has a `getauxval` function if there is no `sys/auxv.h` file, but in fact it does not fulfill its role, since there is no linking during the test, as reported by gcc (as warning) and gcc returns the code 0 (OK). I believe that the testing is not being performed correctly and it is supposed to be fixed somehow.",
      "created_at" : "2021-11-24T17:16:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23582#issuecomment-978074617",
      "id" : 978074617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23582",
      "node_id" : "IC_kwDOABII5846TDv5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978074617/reactions"
      },
      "updated_at" : "2021-11-24T17:16:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978074617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/574333?v=4",
         "events_url" : "https://api.github.com/users/Perlover/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Perlover/followers",
         "following_url" : "https://api.github.com/users/Perlover/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Perlover/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Perlover",
         "id" : 574333,
         "login" : "Perlover",
         "node_id" : "MDQ6VXNlcjU3NDMzMw==",
         "organizations_url" : "https://api.github.com/users/Perlover/orgs",
         "received_events_url" : "https://api.github.com/users/Perlover/received_events",
         "repos_url" : "https://api.github.com/users/Perlover/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Perlover/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Perlover/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Perlover"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Continued: I renamed 1.txt in 1.cpp\r\nThen I ran the command:\r\n\r\n```\r\n$ g++ -std=c++17 -c -g -O2 -fno-extended-identifiers -I/home/bitcoin/include -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS 1.cpp\r\n$ echo $?\r\n0\r\n```\r\n\r\nI tried without -c:\r\n\r\n```\r\n$ g++ -std=c++17 -g -O2 -fno-extended-identifiers -I/home/bitcoin/include -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS 1.cpp\r\n$ echo $?\r\n0\r\n```\r\n\r\nBut when I run:\r\n\r\n```\r\n$ ./a.out \r\nSegmentation fault (core dumped)\r\n$ echo $?\r\n139\r\n```\r\n\r\nI still think that this testing (**weak getauxval**) is not being performed correctly. Your script assumes **weak getauxval** as `true`, but **in fact it is `false`**.  @MarcoFalke , your suggestion to change the operating system is just to get away from trying to fix the test problem.",
      "created_at" : "2021-11-24T17:28:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23582#issuecomment-978084231",
      "id" : 978084231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23582",
      "node_id" : "IC_kwDOABII5846TGGH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978084231/reactions"
      },
      "updated_at" : "2021-11-24T17:28:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978084231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/574333?v=4",
         "events_url" : "https://api.github.com/users/Perlover/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Perlover/followers",
         "following_url" : "https://api.github.com/users/Perlover/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Perlover/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Perlover",
         "id" : 574333,
         "login" : "Perlover",
         "node_id" : "MDQ6VXNlcjU3NDMzMw==",
         "organizations_url" : "https://api.github.com/users/Perlover/orgs",
         "received_events_url" : "https://api.github.com/users/Perlover/received_events",
         "repos_url" : "https://api.github.com/users/Perlover/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Perlover/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Perlover/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Perlover"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Weak getauxval was removed in commit 7f81f5459ffa93e9269715cf604cfaf1f8ff59f8",
      "created_at" : "2021-11-24T18:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23582#issuecomment-978126395",
      "id" : 978126395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23582",
      "node_id" : "IC_kwDOABII5846TQY7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978126395/reactions"
      },
      "updated_at" : "2021-11-24T18:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978126395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
