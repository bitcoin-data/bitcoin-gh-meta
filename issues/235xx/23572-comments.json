[
   {
      "author_association" : "MEMBER",
      "body" : "Duplicate of #18476?",
      "created_at" : "2021-11-22T12:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23572#issuecomment-975478141",
      "id" : 975478141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23572",
      "node_id" : "IC_kwDOABII5846JJ19",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975478141/reactions"
      },
      "updated_at" : "2021-11-22T12:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975478141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "#18476 seems similar, but this one differs in its goals. Current output for `validateaddress` is correct and there is no need to change it, just the returned value when the process ends would simplify the scripts which now has to process the output and decide success/failure status of the bitcoin-cli command in another step (while some other bitcoin-cli commands properly return what they should, see below).\r\n\r\nSuccessful exit status example (`return` = 0)\r\n\r\n```\r\n$ bitcoin-cli getblockhash 1\r\n00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048\r\n$ echo $?\r\n0\r\n```\r\n\r\nError exit status example (`return` > 0)\r\n\r\n```\r\n$ bitcoin-cli getblockhash 800000\r\nerror code: -8\r\nerror message:\r\nBlock height out of range\r\n$ echo $?\r\n8\r\n```",
      "created_at" : "2021-11-24T21:31:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23572#issuecomment-978253615",
      "id" : 978253615,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23572",
      "node_id" : "IC_kwDOABII5846Tvcv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978253615/reactions"
      },
      "updated_at" : "2021-11-24T21:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978253615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/244565?v=4",
         "events_url" : "https://api.github.com/users/jsarenik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jsarenik/followers",
         "following_url" : "https://api.github.com/users/jsarenik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jsarenik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jsarenik",
         "id" : 244565,
         "login" : "jsarenik",
         "node_id" : "MDQ6VXNlcjI0NDU2NQ==",
         "organizations_url" : "https://api.github.com/users/jsarenik/orgs",
         "received_events_url" : "https://api.github.com/users/jsarenik/received_events",
         "repos_url" : "https://api.github.com/users/jsarenik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jsarenik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jsarenik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jsarenik"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The `getblockhash` returns an exit status other than 0 because a block height out of range [throws an exception](https://github.com/bitcoin/bitcoin/blob/4cc998ce9d1445cae3c8a60443980221196ab508/src/rpc/blockchain.cpp#L827).\r\nThe bitcoin-cli client detects this exception and [returns the error code](https://github.com/bitcoin/bitcoin/blob/4cc998ce9d1445cae3c8a60443980221196ab508/src/bitcoin-cli.cpp#L1156).\r\nBut `validateaddress` [simply returns a JSON with the error message](https://github.com/bitcoin/bitcoin/blob/4cc998ce9d1445cae3c8a60443980221196ab508/src/rpc/misc.cpp#L84-L89). It doesn't throw an exception.\r\n\r\nThe reason is that out of range block height is not expected in normal flow. However, if you validate an address, it can be invalid, so the server simply returns that information.\r\n\r\nBut if there is an understanding that `validateaddress` should throw an exception, I can open a PR to change this behavior.\r\n",
      "created_at" : "2021-11-25T07:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23572#issuecomment-978916779",
      "id" : 978916779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23572",
      "node_id" : "IC_kwDOABII5846WRWr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978916779/reactions"
      },
      "updated_at" : "2021-11-25T07:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978916779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@w0xlt Thank you for explanation. I am actually OK with it as it is. Closing the issue which was just a high-level UNIX idea from my scripting point of view.\r\n\r\nExample work-around:\r\n\r\n```shell\r\n#!/bin/sh\r\n\r\nbitcoin-cli validateaddress $address | grep -q Invalid && {\r\n  echo this is done when address is invalid\r\n}\r\n```\r\n\r\nSee where it is used in practice: https://github.com/jsarenik/bitcoin-faucet-shell/blob/13ac1dedc08747f79edd5f07d5037171394544b7/cgi-bin/GET.sh#L15",
      "created_at" : "2021-11-29T08:40:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23572#issuecomment-981403059",
      "id" : 981403059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23572",
      "node_id" : "IC_kwDOABII5846fwWz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981403059/reactions"
      },
      "updated_at" : "2021-11-29T08:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981403059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/244565?v=4",
         "events_url" : "https://api.github.com/users/jsarenik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jsarenik/followers",
         "following_url" : "https://api.github.com/users/jsarenik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jsarenik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jsarenik",
         "id" : 244565,
         "login" : "jsarenik",
         "node_id" : "MDQ6VXNlcjI0NDU2NQ==",
         "organizations_url" : "https://api.github.com/users/jsarenik/orgs",
         "received_events_url" : "https://api.github.com/users/jsarenik/received_events",
         "repos_url" : "https://api.github.com/users/jsarenik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jsarenik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jsarenik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jsarenik"
      }
   }
]
