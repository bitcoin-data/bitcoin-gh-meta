[
   {
      "author_association" : "MEMBER",
      "body" : "How did you get the private keys from the Core wallet onto the Coldcard or vice versa? Is the wallet encrypted? Do you see any keys marked as `inactivehdseed=1` or have `hdkeypath=s` that aren't the seed you found?",
      "created_at" : "2019-04-24T14:45:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486272743",
      "id" : 486272743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjI3Mjc0Mw==",
      "updated_at" : "2019-04-24T14:45:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486272743",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "- since `dumpmasterprivkey` was removed, I've been parsing the wallet backup to get the key from the comment at the top of the backup file.\r\n- `inactivehdseed` does not appear in the backup file\r\n- there is exactly one line with `hdkeypath=s` (also has `hdseed=1`) .. I haven't decoded it, but I'm assuming it maps to the tprv at the top of the file.\r\n- not encrypted",
      "created_at" : "2019-04-24T14:50:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486274873",
      "id" : 486274873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjI3NDg3Mw==",
      "updated_at" : "2019-04-24T15:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486274873",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Did you import any private keys or public keys using `importmulti`? Were these imported with key origin information (i.e. imported a descriptor)?\r\n\r\nCan you check the PSBT that was created and look at the scriptPubKey being spent? Is it the scriptPubKey that you expect?",
      "created_at" : "2019-04-24T17:10:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486336998",
      "id" : 486336998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjMzNjk5OA==",
      "updated_at" : "2019-04-24T17:16:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486336998",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "- Pretty sure I've never used that command (importmulti). My test code has always worked by syncing the Coldcard simulator to the (testnet) key of Core.\r\n- When I use `walletcreatefundedpsbt` the inputs are sometimes a mix of values from the unknown seed and the seed I expected. The BIP32 derivation and redeem script are consistent with the values given by `getaddressinfo` in both cases.",
      "created_at" : "2019-04-24T17:53:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486358872",
      "id" : 486358872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjM1ODg3Mg==",
      "updated_at" : "2019-04-24T17:53:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486358872",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do any of the keys not have an `hdkeypath` specified? Can you try computing the key ids for all of the keys and see if any match the seed id that's unknown? You can do this by calculating the public key for each private key, hashing it with hash160, and then byteswap the hash and compare it to the seed id given by getaddressinfo.",
      "created_at" : "2019-04-25T14:57:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486708840",
      "id" : 486708840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjcwODg0MA==",
      "updated_at" : "2019-04-25T14:57:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486708840",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for those ideas, @achow101 ... I didn't manage to do what you asked, but I did see this:\r\n- there is one line with \"hdseed=1\" and \"hdkeypath=s\" and it's the BIP32 seed I expect\r\n- but there is another line with \"change=1\" and \"hdkeypath=m\"\r\n- that line is for address 2NBPEVQDLcwo9EDEPDAy65tZfSLLQhco4Uv\r\n\r\n```\r\ngetaddressinfo 2NBPEVQDLcwo9EDEPDAy65tZfSLLQhco4Uv\r\n{\r\n  \"address\": \"2NBPEVQDLcwo9EDEPDAy65tZfSLLQhco4Uv\",\r\n  \"scriptPubKey\": \"a914c6f602c8240e536b5b0e86e01cc8f414b2d676b687\",\r\n  \"ismine\": true,\r\n  \"solvable\": true,\r\n  \"desc\": \"sh(wpkh([d79ed905]025d387fa771a6127fcb0fdbc82de3d705ee6dd01e7b02eef8c397bfb02e031d46))#2pecer0k\",\r\n  \"iswatchonly\": false,\r\n  \"isscript\": true,\r\n  \"iswitness\": false,\r\n  \"script\": \"witness_v0_keyhash\",\r\n  \"hex\": \"00144792df9c4aad2bc387918c3973ba99cb441030e0\",\r\n  \"pubkey\": \"025d387fa771a6127fcb0fdbc82de3d705ee6dd01e7b02eef8c397bfb02e031d46\",\r\n  \"embedded\": {\r\n    \"isscript\": false,\r\n    \"iswitness\": true,\r\n    \"witness_version\": 0,\r\n    \"witness_program\": \"4792df9c4aad2bc387918c3973ba99cb441030e0\",\r\n    \"pubkey\": \"025d387fa771a6127fcb0fdbc82de3d705ee6dd01e7b02eef8c397bfb02e031d46\",\r\n    \"address\": \"tb1qg7fdl8z2454u8pu33suh8w5eedzpqv8qk6z2lm\",\r\n    \"scriptPubKey\": \"00144792df9c4aad2bc387918c3973ba99cb441030e0\"\r\n  },\r\n  \"ischange\": true,\r\n  \"timestamp\": 1526567141,\r\n  \"hdkeypath\": \"m\",\r\n  \"hdseedid\": \"e0301044cb99ba73398c9187c32bad4a9cdf9247\",\r\n  \"hdmasterfingerprint\": \"d79ed905\",\r\n  \"labels\": [\r\n  ]\r\n}\r\n```\r\n- so this is \"m\" (master seed) for the unexpected BIP32 seed \"d79ed905\"\r\n- but it's a change address?\r\n- I'm going to decode that line now to see if it contains the BIP32 seed I need",
      "created_at" : "2019-04-25T16:02:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486734954",
      "id" : 486734954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjczNDk1NA==",
      "updated_at" : "2019-04-25T16:02:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486734954",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "- yes, that line in the backup file does contain the seed for the unexpected BIP32 key in the wallet\r\n",
      "created_at" : "2019-04-25T16:15:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486739803",
      "id" : 486739803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjczOTgwMw==",
      "updated_at" : "2019-04-25T16:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486739803",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Did you use `sethdseed` at any point? Are you sure you are creating the wallet dump in 0.18? It looks like it should be one produced by 0.17. 0.18 shouldn't be providing the hdkeypath for the seed.\r\n\r\nIt looks like what happened here is that this wallet is originally from 0.16 or earlier but, when used in 0.17, a new hd seed was generated and that hd seed became the one being used. You can tell because 0.16 and earlier called the seed `hdmaster` and assigned it the keypath of `m`. This was changed in 0.17 to call it `hdseed` and give it a keypath of `s`. Since you found the key with a keypath of `m`, that means that that was the seed that was generated by 0.16 or earlier. It is a bug that the keypath (and metadata) for the seed is not updated to 0.17's definitions.\r\n\r\n> but it's a change address?\r\n\r\nIt isn't. Change is the default value if it can't be determined as to what kind of key it is. In this case, hdkeypath of `m` is not recognized as an inactive seed as it should be.",
      "created_at" : "2019-04-25T17:22:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-486763280",
      "id" : 486763280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4Njc2MzI4MA==",
      "updated_at" : "2019-04-25T17:22:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486763280",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "- I do not remember using \"sethdseed\" at any point, but I agree that's what it looks like happened.\r\n- I did dump the wallet initially on 0.17 when I started investigating. With 0.18, it dumps the \"hdseed=1\" line without a hdkeypath.",
      "created_at" : "2019-04-26T14:53:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-487086340",
      "id" : 487086340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzA4NjM0MA==",
      "updated_at" : "2019-04-26T14:53:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487086340",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Now that I understand the problem better, I don't think it's worth investigating. It's just multi-version bitrot and not something regular users will see.",
      "created_at" : "2019-05-31T13:20:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15884#issuecomment-497706068",
      "id" : 497706068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NzcwNjA2OA==",
      "updated_at" : "2019-05-31T13:20:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497706068",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1482781?v=4",
         "events_url" : "https://api.github.com/users/peter-conalgo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/peter-conalgo/followers",
         "following_url" : "https://api.github.com/users/peter-conalgo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/peter-conalgo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/peter-conalgo",
         "id" : 1482781,
         "login" : "peter-conalgo",
         "node_id" : "MDQ6VXNlcjE0ODI3ODE=",
         "organizations_url" : "https://api.github.com/users/peter-conalgo/orgs",
         "received_events_url" : "https://api.github.com/users/peter-conalgo/received_events",
         "repos_url" : "https://api.github.com/users/peter-conalgo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/peter-conalgo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/peter-conalgo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/peter-conalgo"
      }
   }
]
