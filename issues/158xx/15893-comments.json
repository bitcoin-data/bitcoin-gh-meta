[
   {
      "author_association" : "MEMBER",
      "body" : "Tests are failing with \r\n\r\n```\r\nAssertionError: [node 0] Expected message \"bad-txns-vin-empty\" does not partially match log:\r\n - 2019-04-25T19:05:50.370758Z received: tx (119 bytes) peer=0\r\n - 2019-04-25T19:05:50.370863Z \r\n - \r\n - ************************\r\n - EXCEPTION: NSt8ios_base7failureB5cxx11E       \r\n - Superfluous witness record: iostream error       \r\n - bitcoin in ProcessMessages()       ",
      "created_at" : "2019-04-25T19:13:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#issuecomment-486802218",
      "id" : 486802218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15893",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjgwMjIxOA==",
      "updated_at" : "2019-04-25T19:13:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486802218",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "wait, what? I didn't touch this test:\r\n`64/119 - p2p_invalid_tx.py failed, Duration: 1 s`",
      "created_at" : "2019-04-25T19:38:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#issuecomment-486810519",
      "id" : 486810519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15893",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjgxMDUxOQ==",
      "updated_at" : "2019-04-25T19:38:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486810519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could you include the following diff:\r\n\r\n```diff\r\ndiff --git a/test/functional/data/invalid_txs.py b/test/functional/data/invalid_txs.py\r\nindex 02deae92f3..80d8d66f24 100644\r\n--- a/test/functional/data/invalid_txs.py\r\n+++ b/test/functional/data/invalid_txs.py\r\n@@ -68,7 +68,7 @@ class OutputMissing(BadTxTemplate):\r\n \r\n \r\n class InputMissing(BadTxTemplate):\r\n-    reject_reason = \"bad-txns-vin-empty\"\r\n+    reject_reason = \"Superfluous witness record\"\r\n     expect_disconnect = False\r\n \r\n     def get_tx(self):\r\n",
      "created_at" : "2019-04-25T20:54:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#issuecomment-486834449",
      "id" : 486834449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15893",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjgzNDQ0OQ==",
      "updated_at" : "2019-04-25T20:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486834449",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I tried a slightly different track by using the fact that 0-vin, 0-vout have input sizes checked first, and kept that test case, then also kept my new test for the actual test we're checking for. It seemed weird to me to simply hope that that type of transaction would trigger this case.",
      "created_at" : "2019-04-25T21:03:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#issuecomment-486837151",
      "id" : 486837151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15893",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NjgzNzE1MQ==",
      "updated_at" : "2019-04-25T21:03:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/486837151",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15893#discussion_r278735367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15893"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/278735367"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please move this comment to `data/invalid_txs.py`, as it is not clear why the tx there is completely \"empty\"",
      "commit_id" : "cc556e4a30b4a32eab6722f590489d89b2875de3",
      "created_at" : "2019-04-25T21:16:55Z",
      "diff_hunk" : "@@ -146,20 +146,6 @@ def run_test(self):\n             badtx = template.get_tx()\n             if TxTemplate != invalid_txs.InputMissing:\n                 self.sign_tx(badtx, attempt_spend_tx)\n-            else:\n-                # Segwit is active in regtest at this point, so to deserialize a\n-                # transaction without any inputs correctly, we set the outputs\n-                # to an empty list. This is a hack, as the serialization of an\n-                # empty list of outputs is deserialized as flags==0 and thus\n-                # deserialization of the outputs is skipped.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#discussion_r278735367",
      "id" : 278735367,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3ODczNTM2Nw==",
      "original_commit_id" : "59e81b1422b035624d73779ee212eb2c45b55885",
      "original_position" : 9,
      "path" : "test/functional/feature_block.py",
      "position" : 9,
      "pull_request_review_id" : 230889339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15893",
      "updated_at" : "2019-04-26T01:03:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/278735367",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15893#discussion_r278780856"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15893"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/278780856"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wrote something else in its place. I found the previous text a little baffling to be honest. Willing to take heavy edits on it :)",
      "commit_id" : "cc556e4a30b4a32eab6722f590489d89b2875de3",
      "created_at" : "2019-04-26T01:04:11Z",
      "diff_hunk" : "@@ -146,20 +146,6 @@ def run_test(self):\n             badtx = template.get_tx()\n             if TxTemplate != invalid_txs.InputMissing:\n                 self.sign_tx(badtx, attempt_spend_tx)\n-            else:\n-                # Segwit is active in regtest at this point, so to deserialize a\n-                # transaction without any inputs correctly, we set the outputs\n-                # to an empty list. This is a hack, as the serialization of an\n-                # empty list of outputs is deserialized as flags==0 and thus\n-                # deserialization of the outputs is skipped.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#discussion_r278780856",
      "id" : 278780856,
      "in_reply_to_id" : 278735367,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3ODc4MDg1Ng==",
      "original_commit_id" : "59e81b1422b035624d73779ee212eb2c45b55885",
      "original_position" : 9,
      "path" : "test/functional/feature_block.py",
      "position" : 9,
      "pull_request_review_id" : 230945640,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15893",
      "updated_at" : "2019-04-26T01:04:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/278780856",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK cc556e4a30b4a32eab6722f590489d89b2875de3",
      "created_at" : "2019-04-26T11:26:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15893#issuecomment-487023993",
      "id" : 487023993,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15893",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzAyMzk5Mw==",
      "updated_at" : "2019-04-26T11:26:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487023993",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
