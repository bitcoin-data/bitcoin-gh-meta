[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15266](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15266.html) (memory: Construct globals on first use by MarcoFalke)\n* [#13088](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13088.html) (Log early messages with -printtoconsole by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-08T13:08:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#issuecomment-419640958",
      "id" : 419640958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14169",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTY0MDk1OA==",
      "updated_at" : "2019-01-30T02:04:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419640958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "this is pretty un-unixy, we already support external HUP signalled log rotation which is the standard thing.",
      "created_at" : "2018-09-08T13:38:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#issuecomment-419642721",
      "id" : 419642721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14169",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTY0MjcyMQ==",
      "updated_at" : "2018-09-08T13:38:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419642721",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173129"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Revert this change.",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T22:54:55Z",
      "diff_hunk" : "@@ -369,7 +369,8 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-dbbatchsize\", strprintf(\"Maximum database write batch size in bytes (default: %u)\", nDefaultDbBatchSize), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-dbcache=<n>\", strprintf(\"Set database cache size in megabytes (%d to %d, default: %d)\", nMinDbCache, nMaxDbCache, nDefaultDbCache), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-debuglogfile=<file>\", strprintf(\"Specify location of debug log file. Relative paths will be prefixed by a net-specific datadir location. (-nodebuglogfile to disable; default: %s)\", DEFAULT_DEBUGLOGFILE), false, OptionsCategory::OPTIONS);\n-    gArgs.AddArg(\"-feefilter\", strprintf(\"Tell other nodes to filter invs to us by our mempool min fee (default: %u)\", DEFAULT_FEEFILTER), true, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-debuglogsize=<n>\", strprintf(\"Maximum size of log files in MBytes, which renames itself to originname-datetimestamp.ext and creates a new log file if size reaches <n>. Default is %u, which means that the log file's size is unlimited.\", DEFAULT_MAX_LOG_SIZE), false, OptionsCategory::OPTIONS);\n+\tgArgs.AddArg(\"-feefilter\", strprintf(\"Tell other nodes to filter invs to us by our mempool min fee (default: %u)\", DEFAULT_FEEFILTER), true, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173129",
      "id" : 216173129,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzEyOQ==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 153595938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173129",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173267"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\nwarning: result of comparison of constant 18446744073709551615 with expression of type 'uint32_t' (aka 'unsigned int') is always true [-Wtautological-constant-out-of-range-compare]\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T22:59:58Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");\n+                    if (i != std::string::npos && i + 1 < originname.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173267",
      "id" : 216173267,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzI2Nw==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 12,
      "path" : "src/logging.cpp",
      "position" : 12,
      "pull_request_review_id" : 153596107,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T22:59:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173267",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173274"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\nwarning: 'rfind' called with a string literal consisting of a single character; consider using the more effective overload accepting a character [performance-faster-string-find]\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T23:00:07Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173274",
      "id" : 216173274,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzI3NA==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 11,
      "path" : "src/logging.cpp",
      "position" : 11,
      "pull_request_review_id" : 153596113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173274",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173303"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why this change?",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T23:01:24Z",
      "diff_hunk" : "@@ -388,7 +389,7 @@ void SetupServerArgs()\n             \"Warning: Reverting this setting requires re-downloading the entire blockchain. \"\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk\", false, OptionsCategory::OPTIONS);\n-    gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks\", false, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173303",
      "id" : 216173303,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzMwMw==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 15,
      "path" : "src/init.cpp",
      "position" : 15,
      "pull_request_review_id" : 153595938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173303",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is the error ignored? Moreover the message is not logged.",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T23:08:15Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");\n+                    if (i != std::string::npos && i + 1 < originname.size()) {\n+                        ext = originname.substr(i + 1);\n+                        originname = originname.substr(0, i);\n+                    }\n+                    fclose(m_fileout);\n+\n+                    int id = 0;\n+                    std::string newfilename;\n+                    int64_t nTimeMicros = GetTimeMicros();\n+                    std::string strStamped = FormatISO8601DateTime(nTimeMicros / 1000000);\n+                    std::replace(strStamped.begin(), strStamped.end(), ':', '_');\n+                    while (true) {\n+                        std::ostringstream s;\n+                        s << originname << \"-\" << strStamped;\n+                        if (id > 0) {\n+                            s << \"-\" << id;\n+                        }\n+                        if (!ext.empty()) {\n+                            s << \".\" << ext;\n+                        }\n+                        if (fs::exists(s.str())) {\n+                            id++;\n+                            continue;\n+                        }\n+                        newfilename = s.str();\n+                        break;\n+                    }\n+\n+                    m_file_path = newfilename.c_str();\n+                    try {\n+                        m_fileout = fsbridge::fopen(m_file_path, \"a\");\n+                        if (m_fileout != nullptr) {\n+                            setbuf(m_fileout, nullptr); // unbuffered\n+                        } \n+                    } catch (const fs::filesystem_error&) {\n+                        return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173482",
      "id" : 216173482,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzQ4Mg==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 47,
      "path" : "src/logging.cpp",
      "position" : 47,
      "pull_request_review_id" : 153595938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173482",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173505"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be `-debuglogmaxsize`?",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T23:08:43Z",
      "diff_hunk" : "@@ -369,7 +369,8 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-dbbatchsize\", strprintf(\"Maximum database write batch size in bytes (default: %u)\", nDefaultDbBatchSize), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-dbcache=<n>\", strprintf(\"Set database cache size in megabytes (%d to %d, default: %d)\", nMinDbCache, nMaxDbCache, nDefaultDbCache), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-debuglogfile=<file>\", strprintf(\"Specify location of debug log file. Relative paths will be prefixed by a net-specific datadir location. (-nodebuglogfile to disable; default: %s)\", DEFAULT_DEBUGLOGFILE), false, OptionsCategory::OPTIONS);\n-    gArgs.AddArg(\"-feefilter\", strprintf(\"Tell other nodes to filter invs to us by our mempool min fee (default: %u)\", DEFAULT_FEEFILTER), true, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-debuglogsize=<n>\", strprintf(\"Maximum size of log files in MBytes, which renames itself to originname-datetimestamp.ext and creates a new log file if size reaches <n>. Default is %u, which means that the log file's size is unlimited.\", DEFAULT_MAX_LOG_SIZE), false, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173505",
      "id" : 216173505,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzUwNQ==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 5,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 153595938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173608"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If `DEFAULT_MAX_LOG_SIZE` is changed then this message is wrong.",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-09T23:12:46Z",
      "diff_hunk" : "@@ -369,7 +369,8 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-dbbatchsize\", strprintf(\"Maximum database write batch size in bytes (default: %u)\", nDefaultDbBatchSize), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-dbcache=<n>\", strprintf(\"Set database cache size in megabytes (%d to %d, default: %d)\", nMinDbCache, nMaxDbCache, nDefaultDbCache), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-debuglogfile=<file>\", strprintf(\"Specify location of debug log file. Relative paths will be prefixed by a net-specific datadir location. (-nodebuglogfile to disable; default: %s)\", DEFAULT_DEBUGLOGFILE), false, OptionsCategory::OPTIONS);\n-    gArgs.AddArg(\"-feefilter\", strprintf(\"Tell other nodes to filter invs to us by our mempool min fee (default: %u)\", DEFAULT_FEEFILTER), true, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-debuglogsize=<n>\", strprintf(\"Maximum size of log files in MBytes, which renames itself to originname-datetimestamp.ext and creates a new log file if size reaches <n>. Default is %u, which means that the log file's size is unlimited.\", DEFAULT_MAX_LOG_SIZE), false, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r216173608",
      "id" : 216173608,
      "in_reply_to_id" : 216173505,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzYwOA==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 5,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 153595938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-09T23:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173608",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r219679864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219679864"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n2018-09-22 21:06:39 cpplint(pr=14169): src/logging.cpp:229:  Should have a space between // and comment  [whitespace/comments] [4]\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-22T19:08:54Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r219679864",
      "id" : 219679864,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY3OTg2NA==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 4,
      "path" : "src/logging.cpp",
      "position" : 4,
      "pull_request_review_id" : 157919458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-22T19:08:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219679864",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r219691024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219691024"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n2018-09-22 21:06:39 cpplint(pr=14169): src/logging.cpp:270:  Line ends in whitespace.  Consider deleting these extra spaces.  [whitespace/end_of_line] [4]\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-23T07:47:39Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");\n+                    if (i != std::string::npos && i + 1 < originname.size()) {\n+                        ext = originname.substr(i + 1);\n+                        originname = originname.substr(0, i);\n+                    }\n+                    fclose(m_fileout);\n+\n+                    int id = 0;\n+                    std::string newfilename;\n+                    int64_t nTimeMicros = GetTimeMicros();\n+                    std::string strStamped = FormatISO8601DateTime(nTimeMicros / 1000000);\n+                    std::replace(strStamped.begin(), strStamped.end(), ':', '_');\n+                    while (true) {\n+                        std::ostringstream s;\n+                        s << originname << \"-\" << strStamped;\n+                        if (id > 0) {\n+                            s << \"-\" << id;\n+                        }\n+                        if (!ext.empty()) {\n+                            s << \".\" << ext;\n+                        }\n+                        if (fs::exists(s.str())) {\n+                            id++;\n+                            continue;\n+                        }\n+                        newfilename = s.str();\n+                        break;\n+                    }\n+\n+                    m_file_path = newfilename.c_str();\n+                    try {\n+                        m_fileout = fsbridge::fopen(m_file_path, \"a\");\n+                        if (m_fileout != nullptr) {\n+                            setbuf(m_fileout, nullptr); // unbuffered\n+                        } ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r219691024",
      "id" : 219691024,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY5MTAyNA==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 45,
      "path" : "src/logging.cpp",
      "position" : 45,
      "pull_request_review_id" : 157931594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-23T07:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219691024",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r220325160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220325160"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n2018-09-25 19:59:57 clang(pr=14169): logging.cpp:231:31: warning: implicit conversion loses integer precision: 'boost::uintmax_t' (aka 'unsigned long') to 'uint32_t' (aka 'unsigned int') [-Wshorten-64-to-32]\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-25T19:29:48Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r220325160",
      "id" : 220325160,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDMyNTE2MA==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 6,
      "path" : "src/logging.cpp",
      "position" : 6,
      "pull_request_review_id" : 158707595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-25T19:29:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220325160",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r220325482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220325482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n2018-09-25 19:59:57 clang(pr=14169): logging.cpp:236:45: warning: implicit conversion loses integer precision: 'std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::size_type' (aka 'unsigned long') to 'uint32_t' (aka 'unsigned int') [\r\n```",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-25T19:30:55Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r220325482",
      "id" : 220325482,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDMyNTQ4Mg==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 11,
      "path" : "src/logging.cpp",
      "position" : 11,
      "pull_request_review_id" : 158708034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-25T19:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220325482",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221462923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221462923"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why `uint32_t` and not `size_t` here?",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-30T15:20:15Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221462923",
      "id" : 221462923,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTQ2MjkyMw==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 11,
      "path" : "src/logging.cpp",
      "position" : 11,
      "pull_request_review_id" : 160118236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-30T15:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221462923",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221462951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221462951"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why `uint32_t` here?",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-30T15:20:54Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221462951",
      "id" : 221462951,
      "in_reply_to_id" : 220325160,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTQ2Mjk1MQ==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 6,
      "path" : "src/logging.cpp",
      "position" : 6,
      "pull_request_review_id" : 160118261,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-30T15:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221462951",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221463012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221463012"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`break` at the end of `while (true)` looks a bit non-idiomatic. `for` or `do` instead?",
      "commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "created_at" : "2018-09-30T15:22:55Z",
      "diff_hunk" : "@@ -226,6 +226,53 @@ void BCLog::Logger::LogPrintStr(const std::string &str)\n                     m_fileout = new_fileout;\n                 }\n             }\n+            //limit the max size of log\n+            if (m_log_maxsize > 0) {\n+                uint32_t sz = fs::file_size(m_file_path);\n+                if (sz > 0 && sz + strTimestamped.size() > m_log_maxsize) {\n+                    std::string originname = m_file_path.string();\n+                    std::string ext;\n+\n+                    uint32_t i = originname.rfind(\".\");\n+                    if (i != std::string::npos && i + 1 < originname.size()) {\n+                        ext = originname.substr(i + 1);\n+                        originname = originname.substr(0, i);\n+                    }\n+                    fclose(m_fileout);\n+\n+                    int id = 0;\n+                    std::string newfilename;\n+                    int64_t nTimeMicros = GetTimeMicros();\n+                    std::string strStamped = FormatISO8601DateTime(nTimeMicros / 1000000);\n+                    std::replace(strStamped.begin(), strStamped.end(), ':', '_');\n+                    while (true) {\n+                        std::ostringstream s;\n+                        s << originname << \"-\" << strStamped;\n+                        if (id > 0) {\n+                            s << \"-\" << id;\n+                        }\n+                        if (!ext.empty()) {\n+                            s << \".\" << ext;\n+                        }\n+                        if (fs::exists(s.str())) {\n+                            id++;\n+                            continue;\n+                        }\n+                        newfilename = s.str();\n+                        break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#discussion_r221463012",
      "id" : 221463012,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTQ2MzAxMg==",
      "original_commit_id" : "5bd58d914a67d92a387d4d523b79c7b2aeae9a9b",
      "original_position" : 37,
      "path" : "src/logging.cpp",
      "position" : 37,
      "pull_request_review_id" : 160118332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14169",
      "updated_at" : "2018-09-30T15:22:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221463012",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-02-04T19:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#issuecomment-460384402",
      "id" : 460384402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14169",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDM4NDQwMg==",
      "updated_at" : "2019-02-04T19:42:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460384402",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this PR abandoned? Should it be closed? :-)",
      "created_at" : "2019-02-04T20:23:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#issuecomment-460398695",
      "id" : 460398695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14169",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDM5ODY5NQ==",
      "updated_at" : "2019-02-04T20:23:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460398695",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now. Let me know when you want to work on this again, so I can reopen.",
      "created_at" : "2019-02-04T21:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14169#issuecomment-460428366",
      "id" : 460428366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14169",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDQyODM2Ng==",
      "updated_at" : "2019-02-04T21:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460428366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
