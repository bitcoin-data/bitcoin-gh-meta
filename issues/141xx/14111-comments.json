[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14111#discussion_r214146774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14111"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214146774"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "s/activing/activating",
      "commit_id" : "fa402afc6de5be2c561ce098902b04b4092d9269",
      "created_at" : "2018-08-30T19:04:43Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_RUNNER_H\n+#define BITCOIN_INDEX_RUNNER_H\n+\n+#include <thread>\n+\n+#include <threadinterrupt.h>\n+\n+class BaseIndex;\n+\n+/**\n+ * RAII interface for activing indexes to stay in sync with blockchain updates.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#discussion_r214146774",
      "id" : 214146774,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDE0Njc3NA==",
      "original_commit_id" : "4fb997095ac574e451c1e152b24286fe38ba5a81",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/index/runner.h",
      "position" : null,
      "pull_request_review_id" : 151139243,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14111",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214146774/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2019-02-22T19:45:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214146774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12243734?v=4",
         "events_url" : "https://api.github.com/users/marcinja/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcinja/followers",
         "following_url" : "https://api.github.com/users/marcinja/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcinja/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcinja",
         "id" : 12243734,
         "login" : "marcinja",
         "node_id" : "MDQ6VXNlcjEyMjQzNzM0",
         "organizations_url" : "https://api.github.com/users/marcinja/orgs",
         "received_events_url" : "https://api.github.com/users/marcinja/received_events",
         "repos_url" : "https://api.github.com/users/marcinja/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcinja/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcinja/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcinja"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Doesn't compile on xenial gcc and clang-3.2?",
      "created_at" : "2018-11-06T20:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-436394688",
      "id" : 436394688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjM5NDY4OA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436394688/reactions"
      },
      "updated_at" : "2018-11-06T20:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436394688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke That was weird. Fixed it.",
      "created_at" : "2018-11-08T08:49:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-436917930",
      "id" : 436917930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjkxNzkzMA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436917930/reactions"
      },
      "updated_at" : "2018-11-08T08:49:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436917930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "node_id" : "MDQ6VXNlcjg4MTI1Mw==",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#10443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10443.html) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-11-09T09:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-437301765",
      "id" : 437301765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzMwMTc2NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437301765/reactions"
      },
      "updated_at" : "2019-02-22T23:33:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437301765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky Thanks for taking a look.\r\n\r\nThe bug definitely still exists, so one way or another the call to `Stop` must be removed in the destructor of `BaseIndex`. This manifests for me in #14121.\r\n\r\nThe idea here is to have an RAII wrapper in the places where the control flow is not managed through globals. Concretely, the only place we see some benefit is in the unit tests, [where the explicit `Stop` call can be removed](https://github.com/bitcoin/bitcoin/pull/14111/files#diff-48c52d305c8b9bbeb803643f0ebed2b5L73). The global map is just there because in bitcoind, the index lifecycle is manages through global functions.\r\n\r\nThe much simpler alternative here is to just require that `Stop` be called before the index goes out of scope as part of its contract, which is pretty much as it is now (except that the `Stop` in the destructor can be removed). Conceptually, the RAII wrapper seems cleaner and makes it easier to handle exceptions in general, though it doesn't seem to provide much value given how indexes are actually managed by bitcoind now.",
      "created_at" : "2019-03-01T22:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-468839311",
      "id" : 468839311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2ODgzOTMxMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468839311/reactions"
      },
      "updated_at" : "2019-03-01T22:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468839311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "node_id" : "MDQ6VXNlcjg4MTI1Mw==",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this bug where UnregisterValidationInterface can't be called from the destructor because it accesses the virtual function table, which is not valid during destruction? If so, I believe this should have been fixed by 2196c51821e340c9a9d2c76c30f9402370f84994 in #13743. Right now if I comment out `txindex.Stop()` in `txindex_tests.cpp`, tests still seem to pass.",
      "created_at" : "2019-03-02T00:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-468855948",
      "id" : 468855948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2ODg1NTk0OA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468855948/reactions"
      },
      "updated_at" : "2019-03-02T00:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468855948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky Oh, amazing. While I still like this refactor aesthetically, it's not worth it. Thanks!",
      "created_at" : "2019-03-02T21:53:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14111#issuecomment-468963954",
      "id" : 468963954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14111",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2ODk2Mzk1NA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468963954/reactions"
      },
      "updated_at" : "2019-03-02T21:53:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468963954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "node_id" : "MDQ6VXNlcjg4MTI1Mw==",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   }
]
