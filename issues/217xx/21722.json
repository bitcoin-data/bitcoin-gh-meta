{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "During initial sync, syncing becomes slow, cpu utilization is low and disk reads go high. Enabling debug=bench reveals the 'connecting transactions' step increases the time per tx an order of magnitude. Restarting bitcoind will fix the issure for awhile.\r\n\r\n\r\n`sudo tail -f --lines 1000 /mnt/hdd/bitcoin/debug.log | grep transactions`\r\n\r\nProper behavior: \r\n![Screenshot from 2021-04-17 14-56-24](https://user-images.githubusercontent.com/1399163/115149144-b6c26680-a030-11eb-80dd-2995794a3a27.png)\r\n\r\n\r\n2021-04-18T13:41:15Z       - Connect 3421 transactions: 384.88ms (0.113ms/tx, 0.074ms/txin) [742.16s (632.16ms/blk)]\r\n2021-04-18T13:41:15Z       - Connect 3022 transactions: 425.70ms (0.141ms/tx, 0.078ms/txin) [742.58s (631.99ms/blk)]\r\n2021-04-18T13:41:16Z       - Connect 2190 transactions: 505.57ms (0.231ms/tx, 0.096ms/txin) [743.09s (631.88ms/blk)]\r\n2021-04-18T13:41:16Z       - Connect 3271 transactions: 349.76ms (0.107ms/tx, 0.064ms/txin) [743.44s (631.64ms/blk)]\r\n2021-04-18T13:41:18Z       - Connect 2992 transactions: 409.37ms (0.137ms/tx, 0.069ms/txin) [743.85s (631.45ms/blk)]\r\n2021-04-18T13:41:18Z       - Connect 3210 transactions: 342.55ms (0.107ms/tx, 0.062ms/txin) [744.19s (631.20ms/blk)]\r\n2021-04-18T13:41:19Z       - Connect 2274 transactions: 690.01ms (0.303ms/tx, 0.119ms/txin) [744.88s (631.25ms/blk)]\r\n2021-04-18T13:41:20Z       - Connect 2469 transactions: 797.49ms (0.323ms/tx, 0.132ms/txin) [745.68s (631.39ms/blk)]\r\n2021-04-18T13:41:20Z       - Connect 3060 transactions: 337.70ms (0.110ms/tx, 0.060ms/txin) [746.01s (631.15ms/blk)]\r\n2021-04-18T13:41:21Z       - Connect 2276 transactions: 518.23ms (0.228ms/tx, 0.089ms/txin) [746.53s (631.05ms/blk)]\r\n2021-04-18T13:41:21Z       - Connect 2703 transactions: 355.08ms (0.131ms/tx, 0.056ms/txin) [746.89s (630.82ms/blk)]\r\n2021-04-18T13:41:22Z       - Connect 2885 transactions: 507.99ms (0.176ms/tx, 0.088ms/txin) [747.40s (630.71ms/blk)]\r\n2021-04-18T13:41:23Z       - Connect 3069 transactions: 528.49ms (0.172ms/tx, 0.096ms/txin) [747.92s (630.63ms/blk)]\r\n2021-04-18T13:41:24Z       - Connect 2423 transactions: 446.64ms (0.184ms/tx, 0.074ms/txin) [748.37s (630.47ms/blk)]\r\n2021-04-18T13:41:25Z       - Connect 2337 transactions: 535.49ms (0.229ms/tx, 0.093ms/txin) [748.91s (630.39ms/blk)]\r\n2021-04-18T13:41:25Z       - Connect 3121 transactions: 469.58ms (0.150ms/tx, 0.088ms/txin) [749.38s (630.26ms/blk)]\r\n\r\nImproper behavior after some period of time:\r\n![Screenshot from 2021-04-17 12-27-19](https://user-images.githubusercontent.com/1399163/115149149-c0e46500-a030-11eb-826a-a8d9567f5bcd.png)\r\n2021-04-18T14:14:05Z       - Connect 2420 transactions: 8300.56ms (3.430ms/tx, 1.496ms/txin) [2193.99s (738.22ms/blk)]\r\n2021-04-18T14:14:11Z       - Connect 2706 transactions: 6270.61ms (2.317ms/tx, 1.150ms/txin) [2200.26s (740.08ms/blk)]\r\n2021-04-18T14:14:18Z       - Connect 2839 transactions: 6572.64ms (2.315ms/tx, 1.221ms/txin) [2206.84s (742.04ms/blk)]\r\n2021-04-18T14:14:24Z       - Connect 2910 transactions: 5678.99ms (1.952ms/tx, 1.125ms/txin) [2212.51s (743.70ms/blk)]\r\n2021-04-18T14:14:33Z       - Connect 2583 transactions: 9436.20ms (3.653ms/tx, 1.444ms/txin) [2221.95s (746.62ms/blk)]\r\n2021-04-18T14:14:56Z       - Connect 521 transactions: 22822.31ms (43.805ms/tx, 2.779ms/txin) [2244.77s (754.04ms/blk)]\r\n2021-04-18T14:15:06Z       - Connect 1388 transactions: 9113.20ms (6.566ms/tx, 1.869ms/txin) [2253.89s (756.85ms/blk)]\r\n2021-04-18T14:15:11Z       - Connect 1984 transactions: 5505.65ms (2.775ms/tx, 1.154ms/txin) [2259.39s (758.44ms/blk)]\r\n2021-04-18T14:15:16Z       - Connect 1512 transactions: 4943.82ms (3.270ms/tx, 1.282ms/txin) [2264.34s (759.84ms/blk)]\r\n2021-04-18T14:15:25Z       - Connect 1936 transactions: 7980.00ms (4.122ms/tx, 1.363ms/txin) [2272.32s (762.27ms/blk)]\r\n2021-04-18T14:15:32Z       - Connect 2079 transactions: 7309.14ms (3.516ms/tx, 1.306ms/txin) [2279.62s (764.46ms/blk)]\r\n2021-04-18T14:15:39Z       - Connect 2272 transactions: 7069.39ms (3.112ms/tx, 1.204ms/txin) [2286.69s (766.58ms/blk)]\r\n\r\nRestarting bitcoind will fix the issue and speed up sync times for awhile (anywhere from 1min to a few hours) before slowing down.\r\n\r\n**To reproduce**\r\nI'm running raspiblitz 1.7RC2, fresh install. Sandisk 1TB ssd, Rasperry pi 4 model B, 4GB.\r\n\r\n\r\n\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722/comments",
   "created_at" : "2021-04-18T14:30:22Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722",
   "id" : 860678633,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU4NjA2Nzg2MzM=",
   "number" : 21722,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Blockchain sync - highly variable time to connect trasactions",
   "updated_at" : "2021-04-18T15:09:15Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1399163?v=4",
      "events_url" : "https://api.github.com/users/benjamin-wilson/events{/privacy}",
      "followers_url" : "https://api.github.com/users/benjamin-wilson/followers",
      "following_url" : "https://api.github.com/users/benjamin-wilson/following{/other_user}",
      "gists_url" : "https://api.github.com/users/benjamin-wilson/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/benjamin-wilson",
      "id" : 1399163,
      "login" : "benjamin-wilson",
      "node_id" : "MDQ6VXNlcjEzOTkxNjM=",
      "organizations_url" : "https://api.github.com/users/benjamin-wilson/orgs",
      "received_events_url" : "https://api.github.com/users/benjamin-wilson/received_events",
      "repos_url" : "https://api.github.com/users/benjamin-wilson/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/benjamin-wilson/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/benjamin-wilson/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/benjamin-wilson"
   }
}
