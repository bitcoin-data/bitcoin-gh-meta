[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617291541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617291541"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: Consider doing the filtering (`grep`, `cut`) in Python instead to make the script easier to read and maintain. In the Python code a comment could be added that `:1:` is used to make sure only shebangs on the first line are considered.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-21T08:01:38Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617291541",
      "id" : 617291541,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNzI5MTU0MQ==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 640741290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617291541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617292317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617292317"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: `file` is a Python builtin. Consider using `filename/filenames` instead of `file/files` :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-21T08:02:51Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617292317",
      "id" : 617292317,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNzI5MjMxNw==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 640741290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617292317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617297965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617297965"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This requirement holds for shebang files that expected to be executed directly.\r\n\r\nTo avoid this requirement for files that are not expected to be executed directly but still have shebangs consider adding exclusions for:\r\n* `*.py` files that do not contain `if __name__ == '__main__':` or `if __name__ == \"__main__\":`: these are typically modules that are not expected to be executed directly.\r\n* `*.bash` files: these are typically expected to be sourced and not executed directly.\r\n\r\nIt could be argued that shebangs should be removed from these types of files, but I think shebangs could still be useful to allow for language/dialect auto-detection in editors, `shellcheck`, etc.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-21T08:10:48Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    files = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file) and not filename_exception_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_extension = os.path.splitext(file)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(file, \"rb\").readline().strip()\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{file}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{file}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File '{file}' has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions():\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    files = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            print(\n+                f\"\"\"File \"{file}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (or remove the shebang line).\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r617297965",
      "id" : 617297965,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNzI5Nzk2NQ==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 122,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 640741290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617297965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2021-04-21T17:33:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-824235661",
      "id" : 824235661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNDIzNTY2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-03T16:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/824235661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618047414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618047414"
         }
      },
      "author_association" : "NONE",
      "body" : "updated to move the filtering into python :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T03:03:05Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618047414",
      "id" : 618047414,
      "in_reply_to_id" : 617291541,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODA0NzQxNA==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 641739593,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618047414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618047440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618047440"
         }
      },
      "author_association" : "NONE",
      "body" : "good call, updated",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T03:03:12Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618047440",
      "id" : 618047440,
      "in_reply_to_id" : 617292317,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODA0NzQ0MA==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 641739621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618047440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618048302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618048302"
         }
      },
      "author_association" : "NONE",
      "body" : "Updated. I wonder if some other file types should also be skipped along with `*bash`? I notice the test is failing for some files like `contrib/init/bitcoind.init`, `contrib/init/bitcoind.openrc`, `contrib/devtools/split-debug.sh.in` and I'm thinking they might fit into the same category of files which are sourced but not executed?\r\n\r\nThere is also quite a few `.sh` files in `ci/test/` like `ci/test/00_setup_env_android.sh` which fail the test, but I'm not sure if those really should be forced to be executable or not?\r\n\r\nThanks very much for the initial review and feedback :) ",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T03:06:12Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    files = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file) and not filename_exception_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_extension = os.path.splitext(file)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(file, \"rb\").readline().strip()\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{file}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{file}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File '{file}' has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions():\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    files = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            print(\n+                f\"\"\"File \"{file}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (or remove the shebang line).\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618048302",
      "id" : 618048302,
      "in_reply_to_id" : 617297965,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODA0ODMwMg==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 122,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 641740601,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618048302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618483138"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618483138"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I wonder is `\"\"\"` required here or would `\"` suffice?",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T15:00:47Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618483138",
      "id" : 618483138,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODQ4MzEzOA==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642314272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618483138",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618511312"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618511312"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Out of curiosity: Would it make sense to replace `strip()` with `rstrip()` (https://docs.python.org/3/library/stdtypes.html?highlight=rstrip#str.rstrip)?\r\n\r\nJust for fun: There is still one very specific case where this does not work (I hope I'm not missing something): You can add a file like this `git add test/util/zzz.py  ` (note the trailing whitespace) and `strip()` will make sure that `test/util/zzz.py` will be processed and not `test/util/zzz.py  `. I think your code is fine but if it can be improved wrt robustness I'm all in (possibly split first and remove trailing empty entries?)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T15:34:14Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618511312",
      "id" : 618511312,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODUxMTMxMg==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 55,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642353320,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618511312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618527730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618527730"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe the `strip()` here is not correct. I don't think that you can put whitespace before shebang. \r\n\r\nIt's a question whether one should allow whitespace after shebank AFAIK it's allowed but ... It may be for the best simply remove `.strip()`.\r\n\r\nJust for fun: https://unix.stackexchange.com/questions/276751/is-space-allowed-between-and-bin-bash-in-shebang",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T15:54:09Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = os.path.splitext(filename)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().strip()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618527730",
      "id" : 618527730,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODUyNzczMA==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 81,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642375513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618527730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618676151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618676151"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Updated. I wonder if some other file types should also be skipped along with `*bash`? I notice the test is failing for some files like `contrib/init/bitcoind.init`, `contrib/init/bitcoind.openrc`, `contrib/devtools/split-debug.sh.in` and I'm thinking they might fit into the same category of files which are sourced but not executed?\r\n\r\nSounds reasonable. Skipping the requirement for `*.{init,openrc,sh.in}` should be fine.\r\n\r\n> There is also quite a few `.sh` files in `ci/test/` like `ci/test/00_setup_env_android.sh` which fail the test, but I'm not sure if those really should be forced to be executable or not?\r\n\r\nPerhaps we should simply make these executable to avoid the complexity of making the `+x` requirement depend also on directory (in addition to `#!` presence and suffix).",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T19:19:22Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    files = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file) and not filename_exception_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_extension = os.path.splitext(file)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(file, \"rb\").readline().strip()\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{file}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{file}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File '{file}' has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions():\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    files = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            print(\n+                f\"\"\"File \"{file}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (or remove the shebang line).\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618676151",
      "id" : 618676151,
      "in_reply_to_id" : 617297965,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODY3NjE1MQ==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 122,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642585082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618676151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618815019"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618815019"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks, updated :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T23:25:56Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618815019",
      "id" : 618815019,
      "in_reply_to_id" : 618483138,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODgxNTAxOQ==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642770020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618815019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618817217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618817217"
         }
      },
      "author_association" : "NONE",
      "body" : "Great catch!\r\n\r\nI've updated the logic to not use a `strip()` at all, and instead split on the newlines and then remove the trailing empty element, as you suggested. I chose to do this using a list comprehension filtering for empty list elements, rather than a `.pop()` of the last element, as it seemed slightly more robust, but can change it to a `pop()` if I'm overthinking it.\r\n\r\nI tested that this does now catch files with trailing whitespace:\r\n```bash\r\nFile \"test/util/rpcauth-test.py \" does not not match the allowed filename regexp ('^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$').\r\n```",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T23:32:23Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618817217",
      "id" : 618817217,
      "in_reply_to_id" : 618511312,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODgxNzIxNw==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 55,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642772517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618817217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618817864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618817864"
         }
      },
      "author_association" : "NONE",
      "body" : "Great catch, thanks.\r\n\r\nI updated this to use `rstrip(b\"\\n\")` to remove only the trailing newline",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T23:34:23Z",
      "diff_hunk" : "@@ -0,0 +1,160 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!'\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = os.path.splitext(filename)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().strip()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618817864",
      "id" : 618817864,
      "in_reply_to_id" : 618527730,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODgxNzg2NA==",
      "original_commit_id" : "886315ff36730db6da1cf97b0af0fc66b11e0585",
      "original_line" : 81,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642773308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618817864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618819108"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618819108"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks! updated the condition to skip the requirement for `*.{init,openrc,sh.in}` files.\r\n\r\nFor the remaining [files failing the test](https://github.com/bitcoin/bitcoin/pull/21740/checks), what would be the correct way to go about updating those to comply with the test? Should it be a second commit on this PR?\r\n\r\nThanks again for the review and guidance.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-22T23:37:57Z",
      "diff_hunk" : "@@ -0,0 +1,141 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"\"\"git grep --full-name --line-number -I '^#!' | grep :1: | cut -d \":\" -f 1\"\"\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def check_all_filenames():\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames():\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    files = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for file in files:\n+        if not filename_regex.match(file) and not filename_exception_regex.match(file):\n+            print(\n+                f\"\"\"File \"{file}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions():\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    files = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_extension = os.path.splitext(file)[1].strip(\".\")\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(file, \"rb\").readline().strip()\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{file}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{file}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File '{file}' has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {file}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions():\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    files = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for file in files:\n+        file_perms = int(oct(os.stat(file).st_mode)[-3:])\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            print(\n+                f\"\"\"File \"{file}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {file}\" (or remove the shebang line).\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r618819108",
      "id" : 618819108,
      "in_reply_to_id" : 617297965,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODgxOTEwOA==",
      "original_commit_id" : "d0016b1be5b173e3fc70df37d027e5b40f718270",
      "original_line" : 122,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 642774657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618819108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you update the commit message to use the following format:\r\n```bash\r\nprefix: title\r\n\r\ncommit body\r\n```\r\n\r\ni.e:\r\n```bash\r\ntest: add new python linter to check file names and permissions\r\n\r\nexplain what is being done in this commit\r\nexplain some more etc\r\n```\r\n\r\nAlso, for this to me merged. Obviously all [linters](https://github.com/bitcoin/bitcoin/pull/21740/checks?check_run_id=2415315623) / CI need to be passing. So if changes to other files need to be made, they will have to be done either in preceding commits, or as part of the same change.",
      "created_at" : "2021-04-23T04:22:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-825375050",
      "id" : 825375050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNTM3NTA1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-23T04:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/825375050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Can you update the commit message to use the following format:\r\n> \r\nThanks @fanquake  - I've updated the commit messages to the standard format\r\n\r\n> Also, for this to me merged. Obviously all [linters](https://github.com/bitcoin/bitcoin/pull/21740/checks?check_run_id=2415315623) / CI need to be passing. So if changes to other files need to be made, they will have to be done either in preceding commits, or as part of the same change.\r\n\r\nDone - added a new commit before the main commit which updates the permissions on files which are failing the new test.\r\n\r\nWould appreciate any additional review and feedback :) \r\n",
      "created_at" : "2021-04-24T00:19:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-826002217",
      "id" : 826002217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNjAwMjIxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-24T00:19:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826002217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cr ACK 52c3fb3c9d4145819bd0fe839ba89482e73fce99: patch looks correct!\r\n\r\nNice first-time contribution @windsok. I hope to see more contributions from you in the future. Warm welcome as a contributor!",
      "created_at" : "2021-04-24T07:14:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-826048425",
      "id" : 826048425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNjA0ODQyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-24T07:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826048425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@windsok This PR removes `test/lint/lint-shebang.sh` and `test/lint/lint-filenames.sh` and adds `test/lint/lint-filenames-permissions.sh` and adds `test/lint/lint-filenames-permissions.py`. \r\n\r\nThe new file names are confusing to me as they do something different than they hint. Would it make sense to you to rename them from \"lint-filenames-permissions.{py|sh}\" to \"lint-files.{py|sh}\" or something better?\r\n\r\n**Edit:**\r\n\r\n* This PR modifies `https://github.com/bitcoin/bitcoin/blob/master/contrib/gitian-descriptors/assign_DISTNAME` permissions but it may be actually correct to add `.sh` extension - I'm not sure. Just mentioning it here so that others double check correctness of the change.",
      "created_at" : "2021-04-24T07:56:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-826053441",
      "id" : 826053441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNjA1MzQ0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-24T08:02:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826053441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r619607936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619607936"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: Given that `failed_tests` number is computed, one can probably print the number of failed tests too.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-24T08:05:11Z",
      "diff_hunk" : "@@ -0,0 +1,182 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def get_filename_extension(filename: str) -> Optional[str]:\n+    \"\"\"\n+    Returns the full file extension for a given filename string.\n+    eg:\n+    'ci/lint_run_all.sh' -> 'sh'\n+    'ci/retry/retry' -> None\n+    'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+    \"\"\"\n+    filename_parts = filename.split(os.extsep, 1)\n+    try:\n+        return filename_parts[1]\n+    except IndexError:\n+        return None\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames() -> int:\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions() -> int:\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = get_filename_extension(filename)\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().rstrip(b\"\\n\")\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{filename}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {filename}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{filename}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+                    exit_code = 1\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File \"{filename}\" has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {filename}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {filename}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions() -> int:\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    filenames = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+\n+    # The git grep command we use returns files which contain a shebang on any line within the file\n+    # so we need to filter the list to only files with the shebang on the first line\n+    filenames = [filename.split(\":1:\")[0] for filename in filenames if \":1:\" in filename]\n+\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = get_filename_extension(filename)\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            # These file types are typically expected to be sourced and not executed directly\n+            if file_extension in [\"bash\", \"init\", \"openrc\", \"sh.in\"]:\n+                continue\n+\n+            # *.py files which don't contain an `if __name__ == '__main__'` are not expected to be executed directly\n+            if file_extension == \"py\":\n+                file_data = open(filename, \"r\", encoding=\"utf8\").read()\n+                if not re.search(\"\"\"if __name__ == ['\"]__main__['\"]:\"\"\", file_data):\n+                    continue\n+\n+            print(\n+                f\"\"\"File \"{filename}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {filename}\" (or remove the shebang line).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def main() -> NoReturn:\n+    failed_tests = 0\n+    failed_tests += check_all_filenames()\n+    failed_tests += check_source_filenames()\n+    failed_tests += check_all_file_permissions()\n+    failed_tests += check_shebang_file_permissions()\n+\n+    if failed_tests:\n+        sys.exit(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r619607936",
      "id" : 619607936,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxOTYwNzkzNg==",
      "original_commit_id" : "52c3fb3c9d4145819bd0fe839ba89482e73fce99",
      "original_line" : 176,
      "original_position" : 176,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 644006100,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619607936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r619611147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619611147"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think people mostly do something like this https://source.dot.net/#System.Private.CoreLib/Path.cs,467ebc0e33e0820c to find a file extension. That is to look for the first `os.extsep` but not from the beginning of the string (filename) but from the end of the filename.\r\n\r\nA counter-example can be `'contrib/devtools/split-debug.my.nice.helper.sh.in'` where you would return `my.nice.helper.sh.in`.\r\n\r\nYour code may be perfectly fine for what you want to achieve in this PR, yet I would be hesitant to use `get_filename_extension` name. \r\n\r\nI have no clear suggestion here, letting it up to you to decide. :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-24T08:17:04Z",
      "diff_hunk" : "@@ -0,0 +1,182 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def get_filename_extension(filename: str) -> Optional[str]:\n+    \"\"\"\n+    Returns the full file extension for a given filename string.\n+    eg:\n+    'ci/lint_run_all.sh' -> 'sh'\n+    'ci/retry/retry' -> None\n+    'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+    \"\"\"\n+    filename_parts = filename.split(os.extsep, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r619611147",
      "id" : 619611147,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxOTYxMTE0Nw==",
      "original_commit_id" : "52c3fb3c9d4145819bd0fe839ba89482e73fce99",
      "original_line" : 40,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 644010999,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619611147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit 66fd3b28e85c167f3955b5603496daf8d91abcad<br>(master) | commit b1736ee787f25161167bbf5c6157b12722db47e2<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`80a2e22b5f69afc4...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-aarch64-linux-gnu-debug.tar.gz) | [`b512eab6a6d3af92...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`117a227cc612557d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-aarch64-linux-gnu.tar.gz) | [`6410cd868334b811...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`6b15d0a30ff2e0b2...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-arm-linux-gnueabihf-debug.tar.gz) | [`e9e75200f314ed56...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`b759783b6d2c6aa9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-arm-linux-gnueabihf.tar.gz) | [`8a6bfed174221a9c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-arm-linux-gnueabihf.tar.gz) |\n| *-osx-unsigned.dmg | [`6d1874234bf7bef6...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-osx-unsigned.dmg) | [`755d508fd8f16868...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-osx-unsigned.dmg) |\n| *-osx64.tar.gz | [`ac898902931a4d6f...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-osx64.tar.gz) | [`f950ed9d00e6e3be...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-osx64.tar.gz) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`d9e7d4b910d3f391...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-powerpc64-linux-gnu-debug.tar.gz) | [`73a675e01f87a506...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`eba7f796f6912526...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-powerpc64-linux-gnu.tar.gz) | [`95cb810149a4fd6e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`2d34a44f6299c53b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-powerpc64le-linux-gnu-debug.tar.gz) | [`b8bf0fce74d5e1fc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`2a9a14d2d59786d7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-powerpc64le-linux-gnu.tar.gz) | [`1d9715062899f7f9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`b4f667f5cf77ce35...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-riscv64-linux-gnu-debug.tar.gz) | [`e8afaa8e8cba6b69...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`83e0b92dd3ec0b78...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-riscv64-linux-gnu.tar.gz) | [`522132814b7b6924...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-riscv64-linux-gnu.tar.gz) |\n| *-win64-debug.zip | [`13dfbfd03ba6d45f...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-win64-debug.zip) | [`eb5ee4fd91379cf9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-win64-debug.zip) |\n| *-win64-setup-unsigned.exe | [`a3ae0c4a5c947fde...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-win64-setup-unsigned.exe) | [`043dc206fdfe06c8...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-win64-setup-unsigned.exe) |\n| *-win64.zip | [`3e9384702a7c8c8f...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-win64.zip) | [`5c823d3854a1fac5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-win64.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`bd15a51aa9182939...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-x86_64-linux-gnu-debug.tar.gz) | [`9749b2608e5ff431...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`c5231c04a5f93086...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c-x86_64-linux-gnu.tar.gz) | [`215f312ca442dcf6...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`cf4bdeb958523ffa...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-66fd3b28e85c.tar.gz) | [`6f1f3858b4f5cf33...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-b1736ee787f2.tar.gz) |\n| bitcoin-core-linux-22-res.yml | [`01197f31e3ed8757...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-core-linux-22-res.yml) | [`ce6c84f232e27191...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-linux-22-res.yml) |\n| bitcoin-core-osx-22-res.yml | [`131de68a5994943a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-core-osx-22-res.yml) | [`e097ffa803d49042...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-osx-22-res.yml) |\n| bitcoin-core-win-22-res.yml | [`4781c48870a6432e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/bitcoin-core-win-22-res.yml) | [`5a2119cc06fe3ab3...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-win-22-res.yml) |\n| linux-build.log | [`ebbf6d8196cdf868...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/linux-build.log) | [`0d32ccfd1bc342a2...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/linux-build.log) |\n| osx-build.log | [`11949960c32a23f8...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/osx-build.log) | [`921621799f11d113...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/osx-build.log) |\n| win-build.log | [`c1a3698eb8e1adaf...`](https://drahtbot.space/gitian/bitcoin/bitcoin/66fd3b28e85c167f3955b5603496daf8d91abcad/win-build.log) | [`a1e7e47f9f63d20e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/win-build.log) |\n| bitcoin-core-linux-22-res.yml.diff |  | [`a0cb494d0e6cdd1d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-linux-22-res.yml.diff) |\n| bitcoin-core-osx-22-res.yml.diff |  | [`18d6e46c06c8901e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-osx-22-res.yml.diff) |\n| bitcoin-core-win-22-res.yml.diff |  | [`b73f13179a53c47a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/bitcoin-core-win-22-res.yml.diff) |\n| linux-build.log.diff |  | [`1310d16ef82d4d09...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/linux-build.log.diff) |\n| osx-build.log.diff |  | [`0c91c358865322a9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/osx-build.log.diff) |\n| win-build.log.diff |  | [`19a2839a59776650...`](https://drahtbot.space/gitian/bitcoin/bitcoin/b1736ee787f25161167bbf5c6157b12722db47e2/win-build.log.diff) |\n\n",
      "created_at" : "2021-04-25T13:51:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-826328181",
      "id" : 826328181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNjMyODE4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-25T13:51:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826328181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r623494542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623494542"
         }
      },
      "author_association" : "NONE",
      "body" : "Great idea, I've updated to keep track of the number of failures, and print a message with the total number of failures, if any :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-29T23:41:52Z",
      "diff_hunk" : "@@ -0,0 +1,182 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def get_filename_extension(filename: str) -> Optional[str]:\n+    \"\"\"\n+    Returns the full file extension for a given filename string.\n+    eg:\n+    'ci/lint_run_all.sh' -> 'sh'\n+    'ci/retry/retry' -> None\n+    'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+    \"\"\"\n+    filename_parts = filename.split(os.extsep, 1)\n+    try:\n+        return filename_parts[1]\n+    except IndexError:\n+        return None\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_source_filenames() -> int:\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    exit_code = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def check_all_file_permissions() -> int:\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = get_filename_extension(filename)\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().rstrip(b\"\\n\")\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":\n+                print(\n+                    f\"\"\"File \"{filename}\" has permission {ALLOWED_PERMISSION_EXECUTABLES} (executable) and is thus expected to contain a shebang '#!'. Add shebang or do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {filename}\" to make it non-executable.\"\"\"\n+                )\n+                exit_code = 1\n+\n+            # For certain file extensions that have been defined, we also check that the shebang conforms to a specific\n+            # allowable set of shebangs\n+            if file_extension in ALLOWED_EXECUTABLE_SHEBANG.keys():\n+                if shebang not in ALLOWED_EXECUTABLE_SHEBANG[file_extension]:\n+                    print(\n+                        f\"\"\"File \"{filename}\" is missing expected shebang \"\"\"\n+                        + \" or \".join(\n+                            [x.decode(\"utf-8\") for x in ALLOWED_EXECUTABLE_SHEBANG[file_extension]]\n+                        )\n+                    )\n+                    exit_code = 1\n+\n+        elif file_perms == ALLOWED_PERMISSION_NON_EXECUTABLES:\n+            continue\n+        else:\n+            print(\n+                f\"\"\"File \"{filename}\" has unexpected permission {file_perms}. Do \"chmod {ALLOWED_PERMISSION_NON_EXECUTABLES} {filename}\" (if non-executable) or \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {filename}\" (if executable).\"\"\"\n+            )\n+            exit_code = 1\n+\n+    return exit_code\n+\n+\n+def check_shebang_file_permissions() -> int:\n+    \"\"\"\n+    Checks every file that contains a shebang line to ensure it has an executable permission\n+    \"\"\"\n+    filenames = check_output(CMD_SHEBANG_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+\n+    # The git grep command we use returns files which contain a shebang on any line within the file\n+    # so we need to filter the list to only files with the shebang on the first line\n+    filenames = [filename.split(\":1:\")[0] for filename in filenames if \":1:\" in filename]\n+\n+    exit_code = 0\n+    for filename in filenames:\n+        file_extension = get_filename_extension(filename)\n+        file_perms = int(oct(os.stat(filename).st_mode)[-3:])\n+\n+        if file_perms != ALLOWED_PERMISSION_EXECUTABLES:\n+            # These file types are typically expected to be sourced and not executed directly\n+            if file_extension in [\"bash\", \"init\", \"openrc\", \"sh.in\"]:\n+                continue\n+\n+            # *.py files which don't contain an `if __name__ == '__main__'` are not expected to be executed directly\n+            if file_extension == \"py\":\n+                file_data = open(filename, \"r\", encoding=\"utf8\").read()\n+                if not re.search(\"\"\"if __name__ == ['\"]__main__['\"]:\"\"\", file_data):\n+                    continue\n+\n+            print(\n+                f\"\"\"File \"{filename}\" contains a shebang line, but has the file permission {file_perms} instead of the expected executable permission {ALLOWED_PERMISSION_EXECUTABLES}. Do \"chmod {ALLOWED_PERMISSION_EXECUTABLES} {filename}\" (or remove the shebang line).\"\"\"\n+            )\n+            exit_code = 1\n+    return exit_code\n+\n+\n+def main() -> NoReturn:\n+    failed_tests = 0\n+    failed_tests += check_all_filenames()\n+    failed_tests += check_source_filenames()\n+    failed_tests += check_all_file_permissions()\n+    failed_tests += check_shebang_file_permissions()\n+\n+    if failed_tests:\n+        sys.exit(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r623494542",
      "id" : 623494542,
      "in_reply_to_id" : 619607936,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzQ5NDU0Mg==",
      "original_commit_id" : "52c3fb3c9d4145819bd0fe839ba89482e73fce99",
      "original_line" : 176,
      "original_position" : 176,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 648762175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623494542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r623496403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623496403"
         }
      },
      "author_association" : "NONE",
      "body" : "Ah yes I originally was using `os.path.splitext(self.file_path)[1].strip(\".\")` which works similar to the linked implementation (only return the final extension, not everything from the first `.`)\r\n\r\nI had changed this as I needed a way to detect `.sh.in` files to exclude them from one of the tests, but you bring up a very good point - with the change I had made it's possible certain files with weird extensions like `split-debug.my.nice.helper.sh` would not actually be detected as a `sh` file, and would not have certain tests enforced.\r\n\r\nIve updated the code to add a new `FileMeta` class, and have changed the logic to use the appropriate version of the extension in each test. Let me know if this makes sense or not :) ",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-04-29T23:47:19Z",
      "diff_hunk" : "@@ -0,0 +1,182 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def get_filename_extension(filename: str) -> Optional[str]:\n+    \"\"\"\n+    Returns the full file extension for a given filename string.\n+    eg:\n+    'ci/lint_run_all.sh' -> 'sh'\n+    'ci/retry/retry' -> None\n+    'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+    \"\"\"\n+    filename_parts = filename.split(os.extsep, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r623496403",
      "id" : 623496403,
      "in_reply_to_id" : 619611147,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzQ5NjQwMw==",
      "original_commit_id" : "52c3fb3c9d4145819bd0fe839ba89482e73fce99",
      "original_line" : 40,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 648764103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T23:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623496403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @windsok This PR removes `test/lint/lint-shebang.sh` and `test/lint/lint-filenames.sh` and adds `test/lint/lint-filenames-permissions.sh` and adds `test/lint/lint-filenames-permissions.py`.\r\n> \r\n> The new file names are confusing to me as they do something different than they hint. Would it make sense to you to rename them from \"lint-filenames-permissions.{py|sh}\" to \"lint-files.{py|sh}\" or something better?\r\n\r\nI'm happy to name this test as `lint-files.{py|sh}` - it does seem clearer and less confusing. Thanks for the suggestion :) I've updated this in the latest version commit.\r\n\r\n> * This PR modifies `https://github.com/bitcoin/bitcoin/blob/master/contrib/gitian-descriptors/assign_DISTNAME` permissions but it may be actually correct to add `.sh` extension - I'm not sure. Just mentioning it here so that others double check correctness of the change.\r\n\r\nI am also unsure on this one, but happy to take advice on which direction it should go\r\n",
      "created_at" : "2021-04-29T23:48:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-829701806",
      "id" : 829701806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyOTcwMTgwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-29T23:49:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829701806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Nice first-time contribution @windsok. I hope to see more contributions from you in the future. Warm welcome as a contributor!\r\n\r\nThanks @practicalswift :) looking forward to getting more involved. Sorry for the delayed response on the last round of feedback.",
      "created_at" : "2021-04-29T23:51:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-829702525",
      "id" : 829702525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyOTcwMjUyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-29T23:51:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829702525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cr re-ACK 46b025e00df40724175735eb5606ac73067cb3b8: patch still looks correct",
      "created_at" : "2021-04-30T09:13:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-829959649",
      "id" : 829959649,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyOTk1OTY0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T09:13:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829959649",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624476704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624476704"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: The comment does not correspond with the code actually. \r\n\r\nOne could probably do: `filenames = filenames[:-1]`",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-01T09:50:50Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624476704",
      "id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDQ3NjcwNA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 649768757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-01T09:50:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624476704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624488354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624488354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "super nit: I'm not sure whether `os.stat` should behave have [follow_symlinks](https://docs.python.org/3/library/os.html?highlight=os%20stat#os.stat) equal to `True` (default) or `False`. Possibly relevant is https://stackoverflow.com/questions/954560/how-does-git-handle-symbolic-links/18791647#18791647.\r\n\r\nI don't want to hold up this PR. Leaving this for comment here for the sake of completeness. Maybe it's stupid. IDK.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-01T10:16:17Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624488354",
      "id" : 624488354,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDQ4ODM1NA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 67,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 67,
      "pull_request_review_id" : 649776162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-01T10:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624488354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624488966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624488966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It looks fine to me. Thanks for updating it. :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-01T10:21:57Z",
      "diff_hunk" : "@@ -0,0 +1,182 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+def get_filename_extension(filename: str) -> Optional[str]:\n+    \"\"\"\n+    Returns the full file extension for a given filename string.\n+    eg:\n+    'ci/lint_run_all.sh' -> 'sh'\n+    'ci/retry/retry' -> None\n+    'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+    \"\"\"\n+    filename_parts = filename.split(os.extsep, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r624488966",
      "id" : 624488966,
      "in_reply_to_id" : 619611147,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDQ4ODk2Ng==",
      "original_commit_id" : "52c3fb3c9d4145819bd0fe839ba89482e73fce99",
      "original_line" : 40,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/lint/lint-filenames-permissions.py",
      "position" : null,
      "pull_request_review_id" : 649776444,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-01T10:21:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624488966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "code review ACK 46b025e00df40724175735eb5606ac73067cb3b8 if `contrib/gitian-descriptors/assign_DISTNAME` permission change is deemed OK.\r\n\r\nGreat contribution!\r\n\r\n",
      "created_at" : "2021-05-01T10:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-830607777",
      "id" : 830607777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDYwNzc3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-01T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830607777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\nðµï¸ @achow101 @sipa have been requested to review this pull request as specified in the REVIEWERS file.",
      "created_at" : "2021-05-03T09:31:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-831141589",
      "id" : 831141589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMTE0MTU4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-03T09:31:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831141589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626197144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626197144"
         }
      },
      "author_association" : "NONE",
      "body" : "Hmm interesting. It seems that there are currently no symbolic links in the repository itself, at least none that I could find with:\r\n```bash\r\nls -lR ~/code/bitcoin | grep ^l\r\n```\r\n\r\nI wonder if that is intentional, or it's just never come up before?\r\n\r\nIn any case, if there were symbolic links my thinking is that we probably would want to follow them, as it seems that symlinks themselves [can't actually have their permissions changed](https://superuser.com/a/303063) (At least on linux), so either we would want to exclude symlinks entirely from the permissions test, or just do the default here and follow the link to check the linked file.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T00:51:21Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626197144",
      "id" : 626197144,
      "in_reply_to_id" : 624488354,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjE5NzE0NA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 67,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 67,
      "pull_request_review_id" : 651775875,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T01:13:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626197144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626198427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626198427"
         }
      },
      "author_association" : "NONE",
      "body" : "right, I chose to remove the trailing element by checking for an empty string as I was worried about some case in the future where the output of the `git ls-files` command changes somehow and the last element is not actually empty. I'm probably overthinking it though.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T00:56:23Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626198427",
      "id" : 626198427,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjE5ODQyNw==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 651777180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T00:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626198427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626200634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626200634"
         }
      },
      "author_association" : "NONE",
      "body" : "On a review of this, I'm fairly certain I can just safely rewrite this code as this one liner, which still catches the original edge case of a file with whitespace at the end of the files list.\r\n\r\n```python\r\nfilenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").rstrip('\\n').split(\"\\n\")\r\n```\r\n\r\nHappy to update this if people don't mind re-reviewing. Let me know.\r\n\r\nEdit: though that said, apparently it _is_ actually [possible for a filename to have a newline in it](https://unix.stackexchange.com/a/23168) so I guess that one-liner would not catch this case, though it does seem fairly unlikely to happen.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T01:05:37Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626200634",
      "id" : 626200634,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjIwMDYzNA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 651779600,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T01:20:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626200634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626433775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626433775"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My take on this is: I think that adding a symbolic link should produce a warning so that others can notice the fact. The fact that there are no symbolic links at the moment hints that they are probably not necessary.\r\n\r\nHowever, this is really out of scope of this PR, I guess. If somebody finds it important it's always possible to address this in a follow up PR. :)",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T10:01:53Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626433775",
      "id" : 626433775,
      "in_reply_to_id" : 624488354,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjQzMzc3NQ==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 67,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 67,
      "pull_request_review_id" : 652128416,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T10:01:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626433775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626435329"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626435329"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> right, I chose to remove the trailing element by checking for an empty string as I was worried about some case in the future where the output of the `git ls-files` command changes somehow and the last element is not actually empty. I'm probably overthinking it though.\r\n\r\nOne would need to ask on a Git mailing list whether the text output of the command is stable or not. But your solution works well, so it's good as it is I think. ð ",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T10:04:31Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626435329",
      "id" : 626435329,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjQzNTMyOQ==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 652130524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T10:04:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626435329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 46b025e00df40724175735eb5606ac73067cb3b8\r\nAlso ACK on the permission changes in 46b025e00df40724175735eb5606ac73067cb3b8.\r\nThanks for working on this.\r\n\r\n> Nice to see the linting being done in Python instead of bash: much better in terms of maintainability, portability and readability.\r\n\r\nAgree. Shell script tends to become virtually unreviewable quickly when the logic gets more complex than simply executing some commands in a batch.",
      "created_at" : "2021-05-05T15:10:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-832767699",
      "id" : 832767699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjc2NzY5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T15:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832767699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626657660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626657660"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Just a question (not a blocker): why does this need a bash wrapper?",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T15:12:20Z",
      "diff_hunk" : "@@ -0,0 +1,7 @@\n+#!/usr/bin/env bash\n+\n+export LC_ALL=C\n+\n+set -e\n+cd \"$(dirname $0)/../..\"\n+test/lint/lint-files.py",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626657660",
      "id" : 626657660,
      "line" : 7,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjY1NzY2MA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.sh",
      "position" : 7,
      "pull_request_review_id" : 652430614,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T15:12:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626657660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626677524"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626677524"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If a filename had a newline in its name it would also be split by the `split(\"\\n\")`",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T15:35:27Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626677524",
      "id" : 626677524,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjY3NzUyNA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 652457821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T15:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626677524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626681068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626681068"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: shouldn't `open` be used in a context manager, so that it is closed again?",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T15:39:47Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_source_filenames() -> int:\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_all_file_permissions() -> int:\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    failed_tests = 0\n+    for filename in filenames:\n+        file_meta = FileMeta(filename)\n+        if file_meta.permissions == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().rstrip(b\"\\n\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626681068",
      "id" : 626681068,
      "line" : 124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjY4MTA2OA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 124,
      "original_position" : 124,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 124,
      "pull_request_review_id" : 652457821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T15:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626681068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626684555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626684555"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Doesn't matter here, but it could use `startswith` for type safety.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T15:43:51Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_source_filenames() -> int:\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_all_file_permissions() -> int:\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    failed_tests = 0\n+    for filename in filenames:\n+        file_meta = FileMeta(filename)\n+        if file_meta.permissions == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().rstrip(b\"\\n\")\n+\n+            # For any file with executable permissions the first line must contain a shebang\n+            if shebang[:2] != b\"#!\":",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626684555",
      "id" : 626684555,
      "line" : 127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjY4NDU1NQ==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 127,
      "original_position" : 127,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 127,
      "pull_request_review_id" : 652457821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T15:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626684555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626751889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626751889"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good call, I will address in a follow-up",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T17:13:03Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_FILENAME_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed filename regexp ('{ALLOWED_FILENAME_REGEXP}').\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_source_filenames() -> int:\n+    \"\"\"\n+    Checks only source files (*.cpp, *.h, *.py, *.sh) against a stricter allowed regexp to make sure only lowercase\n+    alphanumerics (a-z0-9), underscores (_), hyphens (-) and dots (.) are used in source code filenames.\n+\n+    Additionally there is an exception regexp for directories or files which are excepted from matching this regexp.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_SOURCE_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element\n+\n+    filename_regex = re.compile(ALLOWED_SOURCE_FILENAME_REGEXP)\n+    filename_exception_regex = re.compile(ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP)\n+    failed_tests = 0\n+    for filename in filenames:\n+        if not filename_regex.match(filename) and not filename_exception_regex.match(filename):\n+            print(\n+                f\"\"\"File \"{filename}\" does not not match the allowed source filename regexp ('{ALLOWED_SOURCE_FILENAME_REGEXP}'), or the exception regexp ({ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP}).\"\"\"\n+            )\n+            failed_tests += 1\n+    return failed_tests\n+\n+\n+def check_all_file_permissions() -> int:\n+    \"\"\"\n+    Checks all files in the repository match an allowed executable or non-executable file permission octal.\n+\n+    Additionally checks that for executable files, the file contains a shebang line\n+    \"\"\"\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").strip().split(\"\\n\")\n+    failed_tests = 0\n+    for filename in filenames:\n+        file_meta = FileMeta(filename)\n+        if file_meta.permissions == ALLOWED_PERMISSION_EXECUTABLES:\n+            shebang = open(filename, \"rb\").readline().rstrip(b\"\\n\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626751889",
      "id" : 626751889,
      "in_reply_to_id" : 626681068,
      "line" : 124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjc1MTg4OQ==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 124,
      "original_position" : 124,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 124,
      "pull_request_review_id" : 652556609,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T17:13:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626751889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626759388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626759388"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe the main reason is the the `lint-all.sh` script that CI runs is currently setup to automatically run all `.sh` tests in the `test/lint` directory, but won't automatically run `.py` files.\r\n\r\nIn addition it allows lint tests [to opt in or out of locale dependence](https://github.com/bitcoin/bitcoin/blob/7fcf53f7b4524572d1d0c9a5fdc388e87eb02416/test/lint/lint-all.sh#L10-L12)\r\n\r\nIf we start to move more towards using python based linters, it probably makes sense to make some updates here, so we can get rid of the  requirement for the `.sh` wrapper.\r\n\r\n@practicalswift may have more context here.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T17:23:55Z",
      "diff_hunk" : "@@ -0,0 +1,7 @@\n+#!/usr/bin/env bash\n+\n+export LC_ALL=C\n+\n+set -e\n+cd \"$(dirname $0)/../..\"\n+test/lint/lint-files.py",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626759388",
      "id" : 626759388,
      "in_reply_to_id" : 626657660,
      "line" : 7,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjc1OTM4OA==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.sh",
      "position" : 7,
      "pull_request_review_id" : 652566168,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T17:23:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626759388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626761506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626761506"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'll think about a way to handle this case. I think currently if this happens the test overall will still fail, as the permissions test would not be able to locate the file and should error out - we can definitely handle this better, though.",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T17:27:06Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626761506",
      "id" : 626761506,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjc2MTUwNg==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 652569034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T17:27:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626761506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626763857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626763857"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think `.rstrip('\\n').split(\"\\n\")` as you suggested is fine",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-05T17:30:25Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r626763857",
      "id" : 626763857,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjc2Mzg1Nw==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 652572068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-05T17:30:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626763857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit 3f8f238deb5a72db04d29c899cea11df14cd984c<br>(master) | commit 4f1c6e5ae1e8f26799891178b0a353502e22b87d<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`1d782713b323d8b8...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-aarch64-linux-gnu-debug.tar.gz) | [`00706d683dc7fdb3...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`d6ea38d31834b245...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-aarch64-linux-gnu.tar.gz) | [`7fc438afb1329705...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`4dc746c0a4e127f5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-arm-linux-gnueabihf-debug.tar.gz) | [`1723f3a260829ade...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`ee7559f5ce241e5d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-arm-linux-gnueabihf.tar.gz) | [`4294b3e4f15990e7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-arm-linux-gnueabihf.tar.gz) |\n| *-osx-unsigned.dmg | [`eef8d656b3f0229d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-osx-unsigned.dmg) | [`87a5702ab3f06d26...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-osx-unsigned.dmg) |\n| *-osx64.tar.gz | [`83f3690cd9006ef3...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-osx64.tar.gz) | [`b3c92c583789b2c7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-osx64.tar.gz) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`4e6bb99605730f87...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-powerpc64-linux-gnu-debug.tar.gz) | [`4345d0a6eee207f6...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`f7f89deb2cb0819a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-powerpc64-linux-gnu.tar.gz) | [`0b73302264fe0eae...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`e1e9e084d4088dec...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-powerpc64le-linux-gnu-debug.tar.gz) | [`fa3fbbf1bf64614e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`bc95d5e7ba71cd31...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-powerpc64le-linux-gnu.tar.gz) | [`e7633a594fe25426...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`95f182eb1d00e5f5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-riscv64-linux-gnu-debug.tar.gz) | [`0701b7b84a8683ee...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`6e1ee8834e0f17ec...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-riscv64-linux-gnu.tar.gz) | [`94c9e06c8cbc1956...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-riscv64-linux-gnu.tar.gz) |\n| *-win64-debug.zip | [`1a5115bafee424f2...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-win64-debug.zip) | [`9363c1aa27d3ce46...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-win64-debug.zip) |\n| *-win64-setup-unsigned.exe | [`03d79fc50eceea8f...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-win64-setup-unsigned.exe) | [`f20c0017ecd90652...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-win64-setup-unsigned.exe) |\n| *-win64.zip | [`4333c2e76bf73c2c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-win64.zip) | [`1ba0d6d65b89a14a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-win64.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`18ce6c08c5bc691e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-x86_64-linux-gnu-debug.tar.gz) | [`8645294ec08c6a64...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`a58dbdea99493df5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a-x86_64-linux-gnu.tar.gz) | [`cc88f00d07b4784c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`7cdbf224e1151aa1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-3f8f238deb5a.tar.gz) | [`4419dfaa17218c19...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-4f1c6e5ae1e8.tar.gz) |\n| bitcoin-core-linux-22-res.yml | [`97ceb4f415d8c4a2...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-core-linux-22-res.yml) | [`85ce1f40436f8cb5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-linux-22-res.yml) |\n| bitcoin-core-osx-22-res.yml | [`80d164889106ca0a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-core-osx-22-res.yml) | [`96f161a171eddcab...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-osx-22-res.yml) |\n| bitcoin-core-win-22-res.yml | [`dd694a3ccfd5e934...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/bitcoin-core-win-22-res.yml) | [`12fbc619bafb0987...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-win-22-res.yml) |\n| linux-build.log | [`c2df17b298bea4de...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/linux-build.log) | [`521a16a9ead3839a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/linux-build.log) |\n| osx-build.log | [`d185ccafdeb25ee6...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/osx-build.log) | [`0d80d2d9f91e6111...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/osx-build.log) |\n| win-build.log | [`0d0ac751380fb5e4...`](https://drahtbot.space/gitian/bitcoin/bitcoin/3f8f238deb5a72db04d29c899cea11df14cd984c/win-build.log) | [`6a72628fc4afefaf...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/win-build.log) |\n| bitcoin-core-linux-22-res.yml.diff |  | [`dcb55fb490600b5b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-linux-22-res.yml.diff) |\n| bitcoin-core-osx-22-res.yml.diff |  | [`e7803ad2ab6f4aa8...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-osx-22-res.yml.diff) |\n| bitcoin-core-win-22-res.yml.diff |  | [`04c8390c0da31c97...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/bitcoin-core-win-22-res.yml.diff) |\n| linux-build.log.diff |  | [`4ed426a1862a5aa1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/linux-build.log.diff) |\n| osx-build.log.diff |  | [`1c2436e98e4c7fbe...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/osx-build.log.diff) |\n| win-build.log.diff |  | [`f6d48e161363f2cf...`](https://drahtbot.space/gitian/bitcoin/bitcoin/4f1c6e5ae1e8f26799891178b0a353502e22b87d/win-build.log.diff) |\n\n",
      "created_at" : "2021-05-06T00:42:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#issuecomment-833143855",
      "id" : 833143855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMzE0Mzg1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-06T00:42:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/833143855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r627867353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/627867353"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in https://github.com/bitcoin/bitcoin/pull/21873",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-07T01:38:13Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755\n+ALLOWED_EXECUTABLE_SHEBANG = {\n+    \"py\": [b\"#!/usr/bin/env python3\"],\n+    \"sh\": [b\"#!/usr/bin/env bash\", b\"#!/bin/sh\"],\n+}\n+\n+\n+class FileMeta(object):\n+    def __init__(self, file_path: str):\n+        self.file_path = file_path\n+\n+    @property\n+    def extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'in'\n+        \"\"\"\n+        return str(os.path.splitext(self.file_path)[1].strip(\".\") or None)\n+\n+    @property\n+    def full_extension(self) -> Optional[str]:\n+        \"\"\"\n+        Returns the full file extension for a given filename string.\n+        eg:\n+        'ci/lint_run_all.sh' -> 'sh'\n+        'ci/retry/retry' -> None\n+        'contrib/devtools/split-debug.sh.in' -> 'sh.in'\n+        \"\"\"\n+        filename_parts = self.file_path.split(os.extsep, 1)\n+        try:\n+            return filename_parts[1]\n+        except IndexError:\n+            return None\n+\n+    @property\n+    def permissions(self) -> int:\n+        \"\"\"\n+        Returns the octal file permission of the file\n+        \"\"\"\n+        return int(oct(os.stat(self.file_path).st_mode)[-3:])\n+\n+\n+def check_all_filenames() -> int:\n+    \"\"\"\n+    Checks every file in the repository against an allowed regexp to make sure only lowercase or uppercase\n+    alphanumerics (a-zA-Z0-9), underscores (_), hyphens (-), at (@) and dots (.) are used in repository filenames.\n+    \"\"\"\n+    # We avoid using rstrip() to ensure we catch filenames which accidentally include trailing whitespace\n+    filenames = check_output(CMD_ALL_FILES, shell=True).decode(\"utf8\").split(\"\\n\")\n+    filenames = [filename for filename in filenames if filename != \"\"]  # removes the trailing empty list element",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r627867353",
      "id" : 627867353,
      "in_reply_to_id" : 624476704,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzg2NzM1Mw==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "test/lint/lint-files.py",
      "position" : 77,
      "pull_request_review_id" : 654015392,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-07T01:38:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/627867353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8359865?v=4",
         "events_url" : "https://api.github.com/users/windsok/events{/privacy}",
         "followers_url" : "https://api.github.com/users/windsok/followers",
         "following_url" : "https://api.github.com/users/windsok/following{/other_user}",
         "gists_url" : "https://api.github.com/users/windsok/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/windsok",
         "id" : 8359865,
         "login" : "windsok",
         "node_id" : "MDQ6VXNlcjgzNTk4NjU=",
         "organizations_url" : "https://api.github.com/users/windsok/orgs",
         "received_events_url" : "https://api.github.com/users/windsok/received_events",
         "repos_url" : "https://api.github.com/users/windsok/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/windsok/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/windsok/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/windsok"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r638279072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/638279072"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since this PR, when I run the linter I see a flood of errors and have to disable it. It seems inappropriate to check user, group, read, and write permissions when the only permission git tracks is whether the file is marked executable. Other permissions are local to the checkout and don't affect the project or other developers. Errors I see are:\r\n\r\n```\r\n[...]\r\nFile \"test/lint/lint-whitespace.sh\" contains a shebang line, but has the file permission 700 instead of the expected executable permission 755. Do \"chmod 755 test/lint/lint-whitespace.sh\" (or remove the shebang line).\r\nFile \"test/util/bitcoin-util-test.py\" contains a shebang line, but has the file permission 700 instead of the expected executable permission 755. Do \"chmod 755 test/util/bitcoin-util-test.py\" (or remove the shebang line).\r\nFile \"test/util/rpcauth-test.py\" contains a shebang line, but has the file permission 700 instead of the expected executable permission 755. Do \"chmod 755 test/util/rpcauth-test.py\" (or remove the shebang line).\r\nERROR: There were 2464 failed tests in the lint-files.py lint test. Please resolve the above errors.\r\n^---- failure generated from test/lint/lint-files.sh\r\n```",
      "commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "created_at" : "2021-05-24T21:24:42Z",
      "diff_hunk" : "@@ -0,0 +1,207 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+\"\"\"\n+This checks that all files in the repository have correct filenames and permissions\n+\"\"\"\n+\n+import os\n+import re\n+import sys\n+from subprocess import check_output\n+from typing import Optional, NoReturn\n+\n+CMD_ALL_FILES = \"git ls-files --full-name\"\n+CMD_SOURCE_FILES = 'git ls-files --full-name -- \"*.[cC][pP][pP]\" \"*.[hH]\" \"*.[pP][yY]\" \"*.[sS][hH]\"'\n+CMD_SHEBANG_FILES = \"git grep --full-name --line-number -I '^#!'\"\n+ALLOWED_FILENAME_REGEXP = \"^[a-zA-Z0-9/_.@][a-zA-Z0-9/_.@-]*$\"\n+ALLOWED_SOURCE_FILENAME_REGEXP = \"^[a-z0-9_./-]+$\"\n+ALLOWED_SOURCE_FILENAME_EXCEPTION_REGEXP = (\n+    \"^src/(secp256k1/|univalue/|test/fuzz/FuzzedDataProvider.h)\"\n+)\n+ALLOWED_PERMISSION_NON_EXECUTABLES = 644\n+ALLOWED_PERMISSION_EXECUTABLES = 755",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21740#discussion_r638279072",
      "id" : 638279072,
      "line" : 25,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODI3OTA3Mg==",
      "original_commit_id" : "46b025e00df40724175735eb5606ac73067cb3b8",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : 24,
      "path" : "test/lint/lint-files.py",
      "position" : 25,
      "pull_request_review_id" : 667192877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21740",
      "side" : "RIGHT",
      "start_line" : 24,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-24T21:24:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/638279072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
