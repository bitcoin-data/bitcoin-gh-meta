[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23224#discussion_r724468616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23224"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724468616"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I took this from GetIntArg, but I feel like the value.isNum() is not necessary and could cause confusion ",
      "commit_id" : "c9ada5f5a4aa5526ea4148ffa1dcfbc6688594b7",
      "created_at" : "2021-10-07T19:24:49Z",
      "diff_hunk" : "@@ -601,6 +639,12 @@ bool ArgsManager::GetBoolArg(const std::string& strArg, bool fDefault) const\n     return value.isNull() ? fDefault : value.isBool() ? value.get_bool() : InterpretBool(value.get_str());\n }\n \n+int64_t ArgsManager::GetByteArg(const std::string& strArg, int64_t nDefault) const\n+{\n+    const util::SettingsValue value = GetSetting(strArg);\n+    return value.isNull() ? nDefault : value.isNum() ? value.get_int64() : ParseByteUnits(value.get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#discussion_r724468616",
      "id" : 724468616,
      "line" : 645,
      "node_id" : "PRRC_kwDOABII584rLoOI",
      "original_commit_id" : "c9ada5f5a4aa5526ea4148ffa1dcfbc6688594b7",
      "original_line" : 645,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 52,
      "pull_request_review_id" : 774305893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23224",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724468616/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-07T19:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724468616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ~0. Based solely on the fact that I think this has to be very well justified to make our argument parsing / command line options code even more complicated. ",
      "created_at" : "2021-10-08T01:45:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#issuecomment-938273151",
      "id" : 938273151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23224",
      "node_id" : "IC_kwDOABII58437Ol_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938273151/reactions"
      },
      "updated_at" : "2021-10-08T01:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938273151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fanquake\r\nI agree. As i was looking at ArgsManager it was much more sophisticated than i imagine. \r\n\r\nI suppose I just want  maxuploadtarget to be in GiB.\r\ni will close this",
      "created_at" : "2021-10-08T11:36:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#issuecomment-938571274",
      "id" : 938571274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23224",
      "node_id" : "IC_kwDOABII58438XYK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938571274/reactions"
      },
      "updated_at" : "2021-10-08T11:36:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938571274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the functionality and the `ParseByteUnits` function and tests all seem useful. Only the integration with `ArgsManager` is messy and probably premature (it would be better with #22766 / #16545 and stricter validation).\r\n\r\nBut it would be straightforward to add the functionality here without changing ArgsManager, by moving the parse function to [strencodings](https://github.com/bitcoin/bitcoin/blob/master/src/util/strencodings.h), and accessing it as `ParseByteSize(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET))`. Would also suggest changing the parse function to return `optional<size_t>` instead `int64_t` and `-1`.",
      "created_at" : "2021-10-08T21:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#issuecomment-939134009",
      "id" : 939134009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23224",
      "node_id" : "IC_kwDOABII5843-gw5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939134009/reactions"
      },
      "updated_at" : "2021-10-08T21:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939134009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> But it would be straightforward to add the functionality here without changing ArgsManager, by moving the parse function to [strencodings](https://github.com/bitcoin/bitcoin/blob/master/src/util/strencodings.h), and accessing it as `ParseByteSize(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET))`.\r\n\r\nExcellent idea, I'll open a different PR for discussion/review.\r\n\r\n",
      "created_at" : "2021-10-09T09:33:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#issuecomment-939265589",
      "id" : 939265589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23224",
      "node_id" : "IC_kwDOABII5843_A41",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939265589/reactions"
      },
      "updated_at" : "2021-10-09T09:33:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939265589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky created a util method in `strencodings`:  https://github.com/bitcoin/bitcoin/pull/23249",
      "created_at" : "2021-10-11T10:27:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23224#issuecomment-939898062",
      "id" : 939898062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23224",
      "node_id" : "IC_kwDOABII5844BbTO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939898062/reactions"
      },
      "updated_at" : "2021-10-11T10:27:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939898062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   }
]
