[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Additional information that may be relevant for reviewers:\r\n\r\n- I've documented my progress on including `sys/sdt.h` in https://github.com/bitcoin/bitcoin/issues/23297\r\n- Build support for the USDT was initially added in https://github.com/bitcoin/bitcoin/pull/19866. Some initial discussion on tracepoints in release builds took place in this thread https://github.com/bitcoin/bitcoin/pull/19866#discussion_r483774808. Some more discussion in a [bitcoin-core-dev meeting January 2021](https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-01-21-19.00.moin.txt).\r\n- There was a [PR review club](https://bitcoincore.reviews/22006) on #22006 \r\n- We have documentation listing tracepoints in a binary in [`doc/tracing.md`](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#listing-available-tracepoints).\r\n- The tracepoints are currently not automatically/CI tested (#23296). Merging this _now_ could leave us with broken tracepoints in a release build.\r\n\r\nI've tested the GUIX binaries on `aarch64-linux-gnu`, `arm-linux-gnueabihf`, `x86_64-linux-gnu` and on `x86_64-w64-mingw32`. I don't have hardware to test on `x86_64-apple-darwin19`, `powerpc64le-linux-gnu`, `powerpc64-linux-gnu`, or `powerpc64-linux-gnu` (though I might try running the binaries in qemu). Any help testing on these platforms would be appreciated. Of course, testing and review on the already tested platforms is welcome too!\r\n\r\n|        platform       \t| binary contains tracepoints \t|                synced signet                \t|        tracepoints tested and working       \t|\r\n|:---------------------:\t|:---------------------------:\t|:-------------------------------------------:\t|:-------------------------------------------:\t|\r\n|   aarch64-linux-gnu   \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|              :heavy_check_mark:             \t|\r\n|  arm-linux-gnueabihf  \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|             :grey_exclamation:Â¹             \t|\r\n|  powerpc64-linux-gnu  \t|      :heavy_check_mark:     \t|                                             \t|                                             \t|\r\n| powerpc64le-linux-gnu \t|      :heavy_check_mark:     \t|                                             \t|                                             \t|\r\n|   riscv64-linux-gnu   \t|      :heavy_check_mark:     \t| [:heavy_check_mark: (laanwj)][laanwj-riscv] \t| [:grey_exclamation: (laanwj)][laanwj-riscv] \t|\r\n|    x86_64-linux-gnu   \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|              :heavy_check_mark:             \t|\r\n| x86_64-apple-darwin19 \t|              - Â²             \t|                                             \t|                      -                      \t|\r\n|   x86_64-w64-mingw32  \t|              -              \t|              :heavy_check_mark:             \t|                      -                      \t|\r\n\r\n[laanwj-riscv]: https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993847365\r\n\r\n\r\nÂ¹ bpftrace isn't available on Ubuntu 21.10 for `armhf`. BCC is available, but compiling the C code didn't work. Presumably it only worrks on 64-bit? Needs further testing.\r\nÂ² ~Maybe the `x86_64-apple-darwin19` binaries contain tracepoints that can be listed with e.g. dtrace on macOS?~ No, tracepoints aren't compiled in as [this check](https://github.com/bitcoin/bitcoin/blob/9015d118425df4a5b34455da15334901ece85ed3/configure.ac#L1347-L1357) fails. This is OK, we currently only support tracepoints on Linux.\r\n\r\n---\r\n\r\n@DrahtBot !request_GUIX_build ",
      "created_at" : "2021-12-09T15:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889",
      "id" : 989947889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847AWfx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989947889/reactions"
      },
      "updated_at" : "2021-12-15T13:48:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989947889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There has been light conceptual agreement on including the Userspace, Statically Defined Tracing tracepoints in Bitcoin Core release builds. This, for example, enables user to hook into production deployments, if they need to\r\n\r\nBig concept ACK",
      "created_at" : "2021-12-09T15:20:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989950707",
      "id" : 989950707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847AXLz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989950707/reactions"
      },
      "updated_at" : "2021-12-09T15:20:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989950707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22708](https://github.com/bitcoin/bitcoin/pull/22708) (build, qt: Add Wayland support for Linux builds with depends by hebasto)\n* [#22555](https://github.com/bitcoin/bitcoin/pull/22555) (build: Fix `make apk` for Android w/ non-default SOURCES_PATH in depends by hebasto)\n* [#22552](https://github.com/bitcoin/bitcoin/pull/22552) (build: Improve depends build system robustness by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-12-10T17:57:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-991177844",
      "id" : 991177844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847FCx0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991177844/reactions"
      },
      "updated_at" : "2021-12-30T13:34:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991177844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Any help testing on these platforms would be appreciated. \r\n\r\nAs I have a running RV64 system (SiFive Unmatched) I can give it a try on `riscv64-linux-gnu`. Which steps did you follow for \"synced signet\" and \"tracepoints tested\"? Literally just sync signet, and try the tracepoint examples?",
      "created_at" : "2021-12-13T16:24:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992645502",
      "id" : 992645502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847KpF-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992645502/reactions"
      },
      "updated_at" : "2021-12-13T16:24:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992645502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, will test soon",
      "created_at" : "2021-12-13T16:45:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992666598",
      "id" : 992666598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847KuPm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992666598/reactions"
      },
      "updated_at" : "2021-12-13T16:45:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992666598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I can give it a try on `riscv64-linux-gnu`.\r\n\r\nThanks @laanwj! That would be awesome!\r\n\r\n> Which steps did you follow for \"synced signet\" and \"tracepoints tested\"? Literally just sync signet, and try the tracepoint examples?\r\n\r\nYes. By syncing signet I just wanted to make sure nothing is horribly broken on that arch (I see no reason why it should be). Running the tests suits should work as well. I ran the `p2p_monitor.py` and a `bpftrace` example to test the tracepoints. Happy to do further testing if needed!",
      "created_at" : "2021-12-13T17:25:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992703038",
      "id" : 992703038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847K3I-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992703038/reactions"
      },
      "updated_at" : "2021-12-14T15:43:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992703038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "We'll be discussing this PR in the BItcoin Core PR review club this Wednesday at 17:00 UTC: https://bitcoincore.reviews/23724",
      "created_at" : "2021-12-13T17:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992705074",
      "id" : 992705074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847K3oy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992705074/reactions"
      },
      "updated_at" : "2021-12-13T17:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992705074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested on riscv64-linux-gnu:\r\n\r\n- :heavy_check_mark: Tracepoints are present in the binary (checked only `bitcoind` and `bitcoin-qt`)\r\n```\r\n$ gdb bitcoind\r\nGNU gdb (Debian 10.1-2) 10.1.90.20210103-git\r\n(gdb) info probes\r\nType Provider   Name             Where              Semaphore Object\r\nstap net        inbound_message  0x00000000000ea198           /â¦/bitcoin-070570806404/bin/bitcoind\r\nâ¦\r\n```\r\n- :heavy_check_mark: Signet sync from scratch to successful to height=68616\r\n- :woman_shrugging: Tracepoints tested\r\n\r\nNo bcc or bpftrace packages exist for RISC-V debian, so I had to build them from source (against clang13).\r\n\r\nBcc builds successfully (including python module), unfortunately, bpftrace doesn't support riscv64 at the moment:\r\n```\r\nCMake Error at src/arch/CMakeLists.txt:14 (message):\r\n  Unsupported architecture: riscv64\r\n```\r\n\r\nTrying to run the python scripts runs into parse errors:\r\n```\r\n# ./log_raw_p2p_msgs.py â¦/bitcoin-070570806404/bin/bitcoind\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n---------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n--------------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n-------------------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n```\r\n\r\nSo I think this is a no-go for now.",
      "created_at" : "2021-12-14T18:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993847365",
      "id" : 993847365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847POhF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993847365/reactions"
      },
      "updated_at" : "2021-12-14T18:32:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993847365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @laanwj!! I've updated the table in https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889. \r\n\r\nFrom the parse error it seems like bcc isn't able to parse the register names in the systemtap ELF notes in `bitcoind`. There was some RISC-V work in https://github.com/iovisor/bcc/pull/3678 which might have touched this. Not sure though. I'm getting a similar error on `arm-linux-gnueabihf`:\r\n\r\n```\r\n$ python3 log_raw_p2p_msgs.py ../../../bitcoin-0729f577f0e2/bin/bitcoind\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n---------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n--------------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n-------------------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n--------------------------^\r\n[..]\r\n```\r\n\r\n\r\nI haven't tested the tracepoints with the Systemtap tools at all. Maybe this can be used on `arm-linux-gnueabihf`, and `riscv64-linux-gnu`? If not, we might not want to build binaries with tracepoints for these platforms. Only supporting `x86_64-linux-gnu` and `aarch64-linux-gnu` in release builds for now.",
      "created_at" : "2021-12-14T19:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993909338",
      "id" : 993909338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Pdpa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993909338/reactions"
      },
      "updated_at" : "2021-12-14T19:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993909338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've also checked that [this check](https://github.com/bitcoin/bitcoin/blob/9015d118425df4a5b34455da15334901ece85ed3/configure.ac#L1347-L1357) fails for `x86_64-apple-darwin19` and `x86_64-w64-mingw32`. Also `USDT tracing    = no` is being printed during configure. This means we don't need to copy the new systemtap depends package for these two platforms. No tracepoints on macOS and Windows.\r\n\r\nI've update the table in https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889.",
      "created_at" : "2021-12-14T19:40:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993918704",
      "id" : 993918704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Pf7w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993918704/reactions"
      },
      "updated_at" : "2021-12-14T19:40:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993918704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> From the parse error it seems like bcc isn't able to parse the register names in the systemtap ELF notes in bitcoind. There was some RISC-V work in iovisor/bcc#3678\r\n\r\nThanks, I'll look into that patch. Edit: I am running the version from git, so should have that merged PR already, so unfortunately it doesn't fix it.\r\n\r\n> If not, we might not want to build binaries with tracepoints for these platforms. Only supporting x86_64-linux-gnu and aarch64-linux-gnu in release builds for now.\r\n\r\nIt depends, if compiler support is working, and it's purely an issue with the tooling (`bcc`, `bpftrace`) I'd argue there is no reason for disabling it on those platforms. It will work as soon as the tools are updated to support the architectures (especially for RISC-V I expect this to be happening soon). I guess the problem is that we can't really test that the tracepoints are inserted correctly in the binary?\r\n\r\nOr maybe we can through gdb? E.g. put a breakpoint at a tracepoint and then inspect the arguments manually.\r\n\r\nEdit: I checked `bcc` (as of commit 52900a435de85e706f5280f4a184374dd729c58e, current HEAD) and FWIW, specialized argumentparsers only exist for the following platforms:\r\n```\r\nclass ArgumentParser_aarch64 : public ArgumentParser {\r\nclass ArgumentParser_powerpc64 : public ArgumentParser {\r\nclass ArgumentParser_s390x : public ArgumentParser {\r\nclass ArgumentParser_x64 : public ArgumentParser {\r\n```\r\nThere is no general behavior: the base class is a pure virtual base class. So while I haven't checked which one it's instantiating for `riscv64-linux-gnu` and `arm-linux-gnueabihf`, it can't actually be correct :smile: \r\n\r\nEdit.2: On unsupported architectures, you get the `_x64` one for free !!!\r\n```c++\r\n#ifdef __aarch64__\r\n  ArgumentParser_aarch64 parser(arg_fmt);\r\n#elif __powerpc64__\r\n  ArgumentParser_powerpc64 parser(arg_fmt);\r\n#elif __s390x__\r\n  ArgumentParser_s390x parser(arg_fmt);\r\n#else\r\n  ArgumentParser_x64 parser(arg_fmt);\r\n#endif\r\n```",
      "created_at" : "2021-12-15T10:07:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-994617403",
      "id" : 994617403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847SKg7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994617403/reactions"
      },
      "updated_at" : "2021-12-15T10:23:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994617403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r769586820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we need these comments. If anything, a comment in regards to why you're using 4.5 rather than 4.6 (GCC issues) could be useful, and/or noting that 4.7 should be safe to use.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-15T12:38:05Z",
      "diff_hunk" : "@@ -0,0 +1,15 @@\n+package=systemtap\n+$(package)_version=4.5\n+$(package)_download_path=https://sourceware.org/systemtap/ftp/releases/\n+$(package)_file_name=$(package)-$($(package)_version).tar.gz\n+$(package)_sha256_hash=75078ed37e0dd2a769c9d1f9394170b2d9f4d7daa425f43ca80c13bad6cfc925\n+$(package)_patches=remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch\n+\n+# Only the includes/sys/sdt.h header is needed from Systemtap.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r769586820",
      "id" : 769586820,
      "line" : 8,
      "node_id" : "PRRC_kwDOABII584t3vaE",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "depends/packages/systemtap.mk",
      "position" : 8,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, running the guix build",
      "created_at" : "2021-12-15T13:26:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-994789908",
      "id" : 994789908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847S0oU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994789908/reactions"
      },
      "updated_at" : "2021-12-15T13:26:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994789908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Testing on Ubuntu 18, was getting segfaults for `log_utxos.bt` and `connectblock_benchmark.bt`. Had to build bpftrace from source with the following versions:\r\n\r\n- `bpftrace v0.12.1`\r\n- `bcc v0.8.0 (required to build bpftrace from source)`\r\n",
      "created_at" : "2021-12-15T22:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-995252058",
      "id" : 995252058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Ulda",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/995252058/reactions"
      },
      "updated_at" : "2021-12-15T22:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/995252058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770191851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this should be Linux only for now (will solve not copying the headers for darwin and win).\r\n```suggestion\r\nlinux_usdt_packages=systemtap\r\n```",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T03:06:55Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@ natpmp_packages=libnatpmp\n multiprocess_packages = libmultiprocess capnp\n multiprocess_native_packages = native_libmultiprocess native_capnp\n \n+usdt_packages=systemtap",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770191851",
      "id" : 770191851,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584t6DHr",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 22,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/packages.mk",
      "position" : 4,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770218690"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Given we aren't using sdt-config.h, there's no reason to copy sdt-config.h.in into our includes dir. This could be simplified to:\r\n\r\n```suggestion\r\n  cp includes/sys/sdt.h $($(package)_staging_prefix_dir)/include/sys/sdt.h\r\n```\r\n\r\nThis would also make it clear that the only thing we care about is the sdt header.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T04:36:52Z",
      "diff_hunk" : "@@ -0,0 +1,15 @@\n+package=systemtap\n+$(package)_version=4.5\n+$(package)_download_path=https://sourceware.org/systemtap/ftp/releases/\n+$(package)_file_name=$(package)-$($(package)_version).tar.gz\n+$(package)_sha256_hash=75078ed37e0dd2a769c9d1f9394170b2d9f4d7daa425f43ca80c13bad6cfc925\n+$(package)_patches=remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch\n+\n+# Only the includes/sys/sdt.h header is needed from Systemtap.\n+# The configure and make steps and not required.\n+\n+define $(package)_preprocess_cmds\n+  patch -p1 < $($(package)_patch_dir)/remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch && \\\n+  mkdir -p $($(package)_staging_prefix_dir)/include/sys && \\\n+  cp -r includes/sys $($(package)_staging_prefix_dir)/include",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770218690",
      "id" : 770218690,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII584t6JrC",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "depends/packages/systemtap.mk",
      "position" : 14,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770220102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102"
         }
      },
      "author_association" : "MEMBER",
      "body" : "After looking at this again, I think assuming the assembler supports `?` is ok, assuming we make this Linux only (see other review comments).\r\n\r\n`pushsection` is an [ELF specific directive](https://sourceware.org/binutils/docs/as/PushSection.html). If you try to compile the assembly used in the configure check which would define `_SDT_ASM_SECTION_AUTOGROUP_SUPPORT`, with `mingw32-gcc`, it won't compile:\r\n```c\r\nint main() {\r\n\r\nasm(\".section .note.foo,\\\"?\\\",\\\"note\\\"\\n\"\r\n     \".byte 1, 2, 3\\n\"\r\n     \".previous\\n\"\r\n     \".section .text,\\\"axG\\\",\\\"progbits\\\",foogroup,comdat\\n\"\r\n     \".byte 1\\n\"\r\n     \".pushsection .note.foo,\\\"?\\\",\\\"note\\\"\\n\"\r\n     \".byte 4, 5, 6\\n\"\r\n     \".popsection\\n\"\r\n     \".byte 2\\n\");\r\nreturn 0;\r\n}\r\n```\r\n\r\n```bash\r\nx86_64-w64-mingw32-gcc push.c \r\n/tmp/ccDQdocw.s: Assembler messages:\r\n/tmp/ccDQdocw.s:18: Warning: unknown section attribute '?'\r\n/tmp/ccDQdocw.s:18: Error: junk at end of line, first unrecognized character is `,'\r\n/tmp/ccDQdocw.s:20: Error: unknown pseudo-op: `.previous'\r\n/tmp/ccDQdocw.s:21: Warning: unknown section attribute 'G'\r\n/tmp/ccDQdocw.s:21: Warning: Ignoring changed section attributes for .text\r\n/tmp/ccDQdocw.s:21: Error: junk at end of line, first unrecognized character is `,'\r\n/tmp/ccDQdocw.s:23: Error: unknown pseudo-op: `.pushsection'\r\n/tmp/ccDQdocw.s:25: Error: unknown pseudo-op: `.popsection'\r\n```\r\nI think making the systemtap package Linux only for now is the way to go.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T04:41:33Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+commit b92d4c121486f3c6e8a2cea537c53eb09894479a\n+Author: 0xb10c <0xb10c@gmail.com>\n+Date:   Tue Dec 7 11:02:07 2021 +0100\n+\n+    Remove _SDT_ASM_SECTION_AUTOGROUP_SUPPORT check\n+    \n+    We assume that the assembler supports \"?\" in .pushsection directives.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770220102",
      "id" : 770220102,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII584t6KBG",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "depends/patches/systemtap/remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch",
      "position" : 7,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770785144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree this should only be Linux only for now. However, the suggested change doesn't seem to do the trick.\r\n\r\nThe systemtap package isn't copied:\r\n```\r\ncopying packages: native_b2 boost libevent qt expat libxcb xcb_proto libXau xproto freetype fontconfig libxkbcommon libxcb_util libxcb_util_render libxcb_util_keysyms libx\r\nto: /bitcoin/depends/x86_64-linux-gnu\r\n```\r\n\r\nProbably needs changes in `depends/Makefile` too (grep for `usdt_packages`). I'll have a look and see if I can figure it out.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T17:58:06Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@ natpmp_packages=libnatpmp\n multiprocess_packages = libmultiprocess capnp\n multiprocess_native_packages = native_libmultiprocess native_capnp\n \n+usdt_packages=systemtap",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770785144",
      "id" : 770785144,
      "in_reply_to_id" : 770191851,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584t8T94",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 22,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/packages.mk",
      "position" : 4,
      "pull_request_review_id" : 834430194,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T17:58:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r771077564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771077564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry, here's a working diff. See https://github.com/fanquake/bitcoin/commit/4c29ad41210ba542716da476f2c596929664270c in the [`23724_linux_only`](https://github.com/fanquake/bitcoin/commits/23724_linux_only) branch.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-17T03:18:07Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@ natpmp_packages=libnatpmp\n multiprocess_packages = libmultiprocess capnp\n multiprocess_native_packages = native_libmultiprocess native_capnp\n \n+usdt_packages=systemtap",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r771077564",
      "id" : 771077564,
      "in_reply_to_id" : 770191851,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584t9bW8",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 22,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/packages.mk",
      "position" : 4,
      "pull_request_review_id" : 834803916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771077564/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T03:18:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771077564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for your comments @fanquake. I've addressed them in my last push.\r\n\r\n> Concept ACK on adding tracepoints to the release builds, assuming there is 0 overhead for users who don't care about them.\r\n\r\nThis isn't the case. There is bit of overhead, even if it's only slightly more than zero overhead. When we compile a binary **without** tracepoints, the arguments (e.g. function calls) passed to the `TRACEx` macros are optimized out. When tracepoints are enabled, these arguments and executed functions cause additional instructions to be executed.The tracepoint it self is a single NOP instruction. No additional instructions are executed for the actual tracepoint when not used (the arguments are still processed).\r\n\r\nIn terms of overhead:\r\n```\r\nbinary without tracepoints < binary with tracepoints < binary with tracepoints and tracepoints being used\r\n```\r\n\r\nAs an example, I'm looking at the `net:inbound_message` tracepoint in `net_processing.cpp` at commit 767c012665953557ad02f731a84c6d10907a46af. This is the relevant code section:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/767c012665953557ad02f731a84c6d10907a46af/src/net_processing.cpp#L4141-L4152\r\n\r\nTo count the number of executed instructions I'm using `gdb` and set two breakpoints. The first breakpoint in line 4141 and the second breakpoint in line 4152. When hitting the first breakpoint, I run `record btrace` (see [GDB Process Record and Replay](https://sourceware.org/gdb/onlinedocs/gdb/Process-Record-and-Replay.html)) and `continue` to the second breakpoint. There I print information about the recording with `info record` and `record end`. This prints the number of executed instructions between the two breakpoints. I do this for a binary with and a binary without breakpoints.\r\n\r\nTo automate this process you can use the following gdb script:\r\n\r\n```gdb\r\nb net_processing.cpp:4141\r\ncommands 1\r\n  record btrace\r\n  continue\r\nend\r\n\r\nb net_processing.cpp:4152\r\ncommands 2\r\n  info record\r\n  record stop\r\n  continue\r\nend\r\n\r\nrun\r\n```\r\n\r\n```bash\r\n$ gdb --batch --command=net_inboundmsg_ins.gdb --args bitcoind -debug=net | grep -e 'received\\:\\|instructions in'\r\n```\r\n\r\nThis interlaces bitcoind's net logging for received messages with the number of instructions being executed. Here is the output it produced for me on `x86_64-linux-gnu` (Intel CPU):\r\n\r\n<details>\r\n<summary>\r\nBinary with tracepoints\r\n</summary>\r\n\r\n(I'm not sure why the first record includes 469 instructions.)\r\n\r\n``` \r\nRecorded 469 instructions in 28 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: version (102 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: verack (0 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: sendheaders (0 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: sendcmpct (9 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: sendcmpct (9 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: ping (8 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: getheaders (1029 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: feefilter (8 bytes) peer=0\r\n2021-12-17T17:24:53Z received: feefilter of 0.00001000 BTC/kvB from peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:53Z received: pong (8 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:54Z received: headers (22683 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:54Z received: block (1512354 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:55Z received: block (1439515 bytes) peer=0\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:55Z received: block (1511944 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:56Z received: block (1015177 bytes) peer=0\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:56Z received: block (743309 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:58Z received: block (1448974 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:24:59Z received: block (324652 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:00Z received: block (1478186 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:04Z received: block (1547585 bytes) peer=0\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:13Z received: version (104 bytes) peer=3\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:13Z received: block (57225 bytes) peer=0\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:13Z received: version (102 bytes) peer=4\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:13Z received: verack (0 bytes) peer=3\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:13Z received: block (1692970 bytes) peer=0\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:18Z received: sendheaders (0 bytes) peer=3\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:18Z received: verack (0 bytes) peer=4\r\nRecorded 275 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:18Z received: sendcmpct (9 bytes) peer=3\r\nRecorded 278 instructions in 26 functions (0 gaps) for thread 21 (Thread 0x7fff38868640 (LWP 60195)).\r\n2021-12-17T17:25:18Z received: block (909231 bytes) peer=0\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>\r\nBinary without tracepoints\r\n</summary>\r\n\r\n```\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:49:51Z received: version (102 bytes) peer=0\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: version (102 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: verack (0 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: sendheaders (0 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: sendcmpct (9 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: sendcmpct (9 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: ping (8 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: getheaders (1029 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: feefilter (8 bytes) peer=2\r\n2021-12-17T17:50:18Z received: feefilter of 0.00001000 BTC/kvB from peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: pong (8 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:18Z received: headers (23007 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:19Z received: block (1512354 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:19Z received: block (1439515 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:20Z received: block (1511944 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:20Z received: block (1015177 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:21Z received: block (743309 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:21Z received: block (1448974 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:21Z received: block (324652 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:22Z received: block (1478186 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:22Z received: block (1547585 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:25Z received: block (57225 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:25Z received: block (1692970 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:28Z received: block (909231 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:29Z received: version (120 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:29Z received: block (1487873 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:31Z received: block (1597437 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:32Z received: wtxidrelay (0 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:32Z received: block (1482700 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:33Z received: sendaddrv2 (0 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:33Z received: verack (0 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:33Z received: block (1537427 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:33Z received: block (1560096 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:34Z received: sendheaders (0 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:34Z received: block (755937 bytes) peer=2\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:34Z received: sendcmpct (9 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:34Z received: sendcmpct (9 bytes) peer=3\r\nRecorded 4 instructions in 1 functions (0 gaps) for thread 21 (Thread 0x7fff2a7fc640 (LWP 85161)).\r\n2021-12-17T17:50:34Z received: block (822822 bytes) peer=2\r\n```\r\n\r\n</details>\r\n\r\nWhen using the binary with tracepoints, ~274 more instructions are executed between the two breakpoints compared to the binary without breakpoints. That's why, when adding tracepoints, we don't do [expensive computations](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#no-expensive-computations-for-tracepoints) only needed for the tracepoints and only use data that's already present. I do think 274 additional instructions (for this tracepoint) isn't a substantial price to pay and is close to zero overhead. I haven't done these measurements for the other tracepoints though (probably makes sense to to them).",
      "created_at" : "2021-12-17T18:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-996919963",
      "id" : 996919963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847a8qb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996919963/reactions"
      },
      "updated_at" : "2021-12-17T20:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996919963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@0xB10C why does the one with tracepoints say `instructions in 26 functions` and the one without tracepoints says: `instructions in 1 functions`? is this counting the same things?",
      "created_at" : "2021-12-17T19:02:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-996963904",
      "id" : 996963904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847bHZA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996963904/reactions"
      },
      "updated_at" : "2021-12-17T19:02:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996963904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jb55 If [`ENABLE_TRACING` is defined](https://github.com/bitcoin/bitcoin/blob/4ad59042b359f473d5888ecee0c9288dcf98f1c9/src/util/trace.h#L8), the `TRACE6(context, event, a, b, c, d, e, f)` macro [is replaced by the `DTRACE_PROBE6(context, event, a, b, c, d, e, f)` macro](https://github.com/bitcoin/bitcoin/blob/4ad59042b359f473d5888ecee0c9288dcf98f1c9/src/util/trace.h#L18). If the arguments `a, b, c, d, e, f` are the return values of functions (that's the case for all `net:inbound_message` arguments), these get compiled in, executed, and counted by `gdb`. You can probably step into the functions and count them manually too with `gdb`.\r\n\r\n If `ENABLE_TRACING` is not defined, `TRACE6(context, event, a, b, c, d, e, f)` macro is an [empty macro](https://github.com/bitcoin/bitcoin/blob/4ad59042b359f473d5888ecee0c9288dcf98f1c9/src/util/trace.h#L34). There is no code being generated. None of the argument functions are compiled in and executed.\r\n\r\n---\r\n\r\nOn that note and if we think e.g. ~274 instructions are still too much: We might be able branch before we execute the tracepoint arguments based on e.g. a `-tracing` command line argument. You'd need to specifically enable tracing for the tracepoints to be reached. However, at the moment I prefer it as is.\r\n\r\n```c++\r\nif (gArgs.GetBoolArg(\"-tracing\", false)) {\r\n    TRACE6(..)\r\n}\r\n```\r\n(or put this check in the macros too)",
      "created_at" : "2021-12-17T21:00:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997028651",
      "id" : 997028651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847bXMr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997028651/reactions"
      },
      "updated_at" : "2021-12-17T21:00:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997028651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess I'm surprised that those calls that simply return pointers aren't inlined, but I'm guessing that's because of some vtable indirection or something. It looks like `ConnectionTypeAsString` does some work, doesn't this violate our recommendation of doing no work in tracepoints? It's out of scope for this PR of course, but it would be interesting to see the instruction diff by just returning the enum instead of the enum string (I'll go ahead and try this to test out your gdb script).",
      "created_at" : "2021-12-17T21:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997042758",
      "id" : 997042758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847bapG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997042758/reactions"
      },
      "updated_at" : "2021-12-17T21:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997042758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@0xB10C \r\n\r\nbefore:\r\n```\r\nRecorded 293 instructions in 27 functions\r\n```\r\n\r\nafter with this patch:\r\n\r\n```diff\r\ndiff --git a/src/net.h b/src/net.h\r\nindex 9623a630e7..6f99d56661 100644\r\n--- a/src/net.h\r\n+++ b/src/net.h\r\n@@ -660,6 +660,8 @@ public:\r\n \r\n     std::string ConnectionTypeAsString() const { return ::ConnectionTypeAsString(m_conn_type); }\r\n \r\n+    ConnectionType GetConnectionType() const { return m_conn_type; }\r\n+\r\n     /** A ping-pong round trip has completed successfully. Update latest and minimum ping times. */\r\n     void PongReceived(std::chrono::microseconds ping_time) {\r\n         m_last_ping_time = ping_time;\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex d67ced99ea..6f8209d21c 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -4146,7 +4146,7 @@ bool PeerManagerImpl::ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt\r\n     TRACE6(net, inbound_message,\r\n         pfrom->GetId(),\r\n         pfrom->m_addr_name.c_str(),\r\n-        pfrom->ConnectionTypeAsString().c_str(),\r\n+        pfrom->GetConnectionType(),\r\n         msg.m_command.c_str(),\r\n         msg.m_recv.size(),\r\n         msg.m_recv.data()\r\n```\r\n\r\nthe number of instructions becomes trivial:\r\n\r\n```\r\nRecorded 9 instructions in 1 functions\r\n```\r\n\r\nI wasn't able to do this same test on my AMD because gdb doesn't support branch tracing on AMDs apparently :(",
      "created_at" : "2021-12-17T23:15:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997084833",
      "id" : 997084833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847bk6h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997084833/reactions"
      },
      "updated_at" : "2021-12-17T23:15:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997084833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jb55 Oh wouldn't have thought that [`ConnectionTypeAsString()`](https://github.com/bitcoin/bitcoin/blob/14ba286556faad794f288ef38493c540382897cb/src/net.cpp#L534-L552) was responsible for the majority of these instructions. Thanks for looking into this! I get the same results on Intel:\r\n\r\n```\r\nRecorded 9 instructions in 1 functions\r\n```\r\n\r\nHowever, I think as soon as the ConnectionType enum is changed, the tracing scripts might break/will confuse the connection types and the tracepoint documentation will be outdated. Additionally, we might want to cast here as we implicitly convert a [scoped enum](https://en.cppreference.com/w/cpp/language/enum) to an int (?). Diving deeper into this here is probably a bit off-topic, but I think it shows that we might want to iterate before having the tracepoints enabled in a release.\r\n\r\n----\r\n\r\nGUIX build hashes for c1df11eafc8c:\r\n\r\n```\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\nb613183271f4b940348c02d98da60123a0d7ae42a79ab06f83c5d23617f8951b  guix-build-c1df11eafc8c/output/aarch64-linux-gnu/SHA256SUMS.part\r\n275d2c82c7680220331f08451143deb4856c17fd03c549b15eb3446cfd4e6342  guix-build-c1df11eafc8c/output/aarch64-linux-gnu/bitcoin-c1df11eafc8c-aarch64-linux-gnu-debug.tar.gz\r\n479767ad6e6dca437a58f93a0148d9c3d97374a5d70978801bd898b8c03f7cf4  guix-build-c1df11eafc8c/output/aarch64-linux-gnu/bitcoin-c1df11eafc8c-aarch64-linux-gnu.tar.gz\r\n82c5dfdfe2551590b57b004f4944dba39d359baa13ced6344ef1e2ce940d36ed  guix-build-c1df11eafc8c/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n89471c634ba5ef3c5e0465c2f2f3386cf66c3ff1b2eafaf6dff0faf9e4781af7  guix-build-c1df11eafc8c/output/arm-linux-gnueabihf/bitcoin-c1df11eafc8c-arm-linux-gnueabihf-debug.tar.gz\r\n9c94535ff1cb7dc3c8359dd13312f2b9353ed94a4b2569bea9f4e0f0869e0418  guix-build-c1df11eafc8c/output/arm-linux-gnueabihf/bitcoin-c1df11eafc8c-arm-linux-gnueabihf.tar.gz\r\n6182d4b3a6cf03029b1d85df6a5f16db5929dd8b165066be807d328da995719c  guix-build-c1df11eafc8c/output/dist-archive/bitcoin-c1df11eafc8c.tar.gz\r\nf6893a6aa46afe1846c97862367e8c3426a13f5a09f342cfc6f0a74d95eb25e7  guix-build-c1df11eafc8c/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nca591256fe08a17991230ba82ba9ef9ddccb4d73ad7f781d3c2e1665818d7387  guix-build-c1df11eafc8c/output/powerpc64-linux-gnu/bitcoin-c1df11eafc8c-powerpc64-linux-gnu-debug.tar.gz\r\n7930a0806c053741b2bc14f2f738f7d2a5c04a46f4a1dd8b0b01614cd28c26f5  guix-build-c1df11eafc8c/output/powerpc64-linux-gnu/bitcoin-c1df11eafc8c-powerpc64-linux-gnu.tar.gz\r\n2e6865291ca5b4f6e1b4dddb2c5f6f266a77a22990abf0dc01c128625924443e  guix-build-c1df11eafc8c/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n909310911698d40e85078f5d54030e1f7273f2d88b8a472f9bbbfe0d74ee5487  guix-build-c1df11eafc8c/output/powerpc64le-linux-gnu/bitcoin-c1df11eafc8c-powerpc64le-linux-gnu-debug.tar.gz\r\nbd78a8468c899078b55fa9626791f7ea60e319f0fa7c31ddd8b3118e60d76945  guix-build-c1df11eafc8c/output/powerpc64le-linux-gnu/bitcoin-c1df11eafc8c-powerpc64le-linux-gnu.tar.gz\r\n44bad54bf4aab886c919c96bfef6e82f0d5e0ad094ab571c81c617e6d434fad7  guix-build-c1df11eafc8c/output/riscv64-linux-gnu/SHA256SUMS.part\r\nd69d02cf9fbb1124ec858dcc0e8f3f345031fde6a677eb720a6d6d92580cc11e  guix-build-c1df11eafc8c/output/riscv64-linux-gnu/bitcoin-c1df11eafc8c-riscv64-linux-gnu-debug.tar.gz\r\n86a8ad2bc5bda6ff9e6a502e2e05f32e410778dbcb61c3e96ff0cf2e784c1720  guix-build-c1df11eafc8c/output/riscv64-linux-gnu/bitcoin-c1df11eafc8c-riscv64-linux-gnu.tar.gz\r\nb0c70a0fb9f165a74d47672775007a74298c27f3ee1834b9cb2f3767fc75e8ed  guix-build-c1df11eafc8c/output/x86_64-apple-darwin/SHA256SUMS.part\r\n66cca84f5cb254654f4cd482c9c3364c97f754475cf4850a1d6226d0c419d65f  guix-build-c1df11eafc8c/output/x86_64-apple-darwin/bitcoin-c1df11eafc8c-osx-unsigned.dmg\r\nd7dee56cea21d26ef8da8ae74d5741448713131827fa4e988c58a4694a1ca14d  guix-build-c1df11eafc8c/output/x86_64-apple-darwin/bitcoin-c1df11eafc8c-osx-unsigned.tar.gz\r\n37ff6d2dca19df4697f4dd352953ee1392b4b857cd92b54ba81b93019deedb7c  guix-build-c1df11eafc8c/output/x86_64-apple-darwin/bitcoin-c1df11eafc8c-osx64.tar.gz\r\n7adcff8cd68fcca18f91c5ddc2a274558cbf844b9538ade395167a70625ce04a  guix-build-c1df11eafc8c/output/x86_64-linux-gnu/SHA256SUMS.part\r\nfd28efd1e6bd7e71ff0dd13480ce6e992be062f95a975157204ab206886ebf9e  guix-build-c1df11eafc8c/output/x86_64-linux-gnu/bitcoin-c1df11eafc8c-x86_64-linux-gnu-debug.tar.gz\r\n349a67997624bec4b5909378a32a32f522d2343af3131d2214150f0436203501  guix-build-c1df11eafc8c/output/x86_64-linux-gnu/bitcoin-c1df11eafc8c-x86_64-linux-gnu.tar.gz\r\ne5b3f76e29b3d3f378ec152fe7c4253e38b79eee3347c16f6dcab250e43355fe  guix-build-c1df11eafc8c/output/x86_64-w64-mingw32/SHA256SUMS.part\r\nb24d134d0c59010df891032713479fb3d66efb2753537a60e8d44e5aae816de6  guix-build-c1df11eafc8c/output/x86_64-w64-mingw32/bitcoin-c1df11eafc8c-win-unsigned.tar.gz\r\n6d003e820bc05f7e366fcc839670d9872e4087ce1d8acda23990c1b9f025274d  guix-build-c1df11eafc8c/output/x86_64-w64-mingw32/bitcoin-c1df11eafc8c-win64-debug.zip\r\n37a35e793c7fb8800f2f48afac3d9a314c63938e071a704fcde5f4d7f54f8512  guix-build-c1df11eafc8c/output/x86_64-w64-mingw32/bitcoin-c1df11eafc8c-win64-setup-unsigned.exe\r\n7273cde4f8155f247715da7d6e06b90eda69605b4436e5d35a09ded6b3c18fde  guix-build-c1df11eafc8c/output/x86_64-w64-mingw32/bitcoin-c1df11eafc8c-win64.zip\r\n```\r\nAt first I wondered why these changed from https://github.com/bitcoin/bitcoin/pull/23724#pullrequestreview-832761102, but I remembered that I did rebase before pushing. My hashes for 070570806404 matched with fanquake's.\r\n",
      "created_at" : "2021-12-18T00:04:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997099991",
      "id" : 997099991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847bonX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997099991/reactions"
      },
      "updated_at" : "2021-12-18T00:04:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997099991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@0xB10C \r\n> However, I think as soon as the ConnectionType enum is changed, the tracing scripts might break/will confuse the connection types and the tracepoint documentation will be outdated. Additionally, we might want to cast here as we implicitly convert a scoped enum to an int (?).\r\n\r\nAll these issues should be solved by https://github.com/bitcoin/bitcoin/pull/23809",
      "created_at" : "2021-12-18T02:10:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997125319",
      "id" : 997125319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847buzH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997125319/reactions"
      },
      "updated_at" : "2021-12-18T02:10:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997125319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```diff\r\n-        pfrom->ConnectionTypeAsString().c_str(),\r\n+        pfrom->GetConnectionType(),\r\n```\r\n\r\nThis keeps coming back: please don't pass strings that are generated on the fly to tracepoints. We should add a rule about this.",
      "created_at" : "2021-12-18T11:18:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997187824",
      "id" : 997187824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847b-Dw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997187824/reactions"
      },
      "updated_at" : "2021-12-18T11:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997187824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've checked the `utxocache:add` and the `utxocache:spent` tracepoints. Both only add an extra 4 executed instructions. I'm assuming `utxocache:uncache` behaves similarly as the same arguments are passed. \r\n\r\nThe `validation:block_connected` tracepoint also seems to be more on the expensive side with \"Recorded 8229 instructions in 80 functions\". This includes, e.g. calculating the hash of the block and `GetTimeMicros()`. I'd argue that this is however still inexpensive compared to the total cost of validating a block. \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/validation.cpp#L2160-L2167\r\n\r\n\r\nFor the  `utxocache:flush` tracepoint, gdb reports \"Recorded 171 instructions in 19 functions\". These are mainly from `GetTimeMicros()`. If needed, dropping `GetTimeMicros()` could be a possibility here. Could be done in the follow-up to #22902.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/validation.cpp#L2328-L2334\r\n",
      "created_at" : "2021-12-18T15:10:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997215650",
      "id" : 997215650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847cE2i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997215650/reactions"
      },
      "updated_at" : "2021-12-18T15:10:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997215650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "On Sat, Dec 18, 2021 at 03:19:07AM -0800, W. J. van der Laan wrote:\n>```diff\n>-        pfrom->ConnectionTypeAsString().c_str(),\n>+        pfrom->GetConnectionType(),\n>```\n>\n>This keeps coming back: please don't pass strings that are generated on\n>the fly to tracepoints. We should add a rule about this.\n\nTo be fair in this case it's not really generated, the switch returns\nstatic strings, but it does take a surprising amount of instructions for\nwhat should be a simple lookup in a switch jump table. Perhaps the\nswitch was not big enough for g++ to optimize it into a jump table,\ninstead opting for a chain of conditional checks. 100+ still is a lot,\nI'll look into prematurely optimizing the other tracepoints as well,\nespecially the one that is taking 8000 instructions (wtf?)\n",
      "created_at" : "2021-12-18T19:04:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997270336",
      "id" : 997270336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847cSNA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997270336/reactions"
      },
      "updated_at" : "2021-12-18T19:04:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997270336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> To be fair in this case it's not really generated, the switch returns\r\nstatic strings\r\n\r\nI'm fairly sure the way c++ strings work, even though it returns static strings, it still does an allocation and copy (from the C string in .rodata) every time (then deallocating it again afterwards).\r\n\r\nIt's possible I'm wrong and modern compilers are smart enough to avoid it (can it see through `std::string(\"static c-string\").c_str()` ?, but wouldn't bet on it.\r\n\r\n> I'll look into prematurely optimizing the other tracepoints as well,\r\nespecially the one that is taking 8000 instructions (wtf?)\r\n\r\nIn any case I'm happy that we have a way to measure and quantify the number of instructions generated by a tracepoint now!",
      "created_at" : "2021-12-19T10:53:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997370460",
      "id" : 997370460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847cqpc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997370460/reactions"
      },
      "updated_at" : "2021-12-19T11:06:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997370460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'm fairly sure the way c++ strings work, even though it returns static strings, it still does an allocation and copy every time.\n\nyes you may be right due to the number of instructions here. I was hoping the compiler would be smarter about this...",
      "created_at" : "2021-12-19T17:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997430678",
      "id" : 997430678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847c5WW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997430678/reactions"
      },
      "updated_at" : "2021-12-19T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997430678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "On Sat, Dec 18, 2021 at 07:10:24AM -0800, 0xB10C wrote:\r\n>The `validation:block_connected` tracepoint also seems to be more on the expensive side with \"Recorded 8229 instructions in 80 functions\". This includes, e.g. calculating the hash of the block and `GetTimeMicros()`. I'd argue that this is however still inexpensive compared to the total cost of validating a block.\r\n\r\nSome data:\r\n\r\n```\r\ninstrs    delta    description\r\n\r\n8276      0        baseline\r\n8167      -109     no micros\r\n53        -8114    no GetHash()\r\n```\r\n\r\nIt looks like GetHash is the culprit here.\r\n\r\nI'll spend some time today looking at alternate solutions.\r\n",
      "created_at" : "2021-12-19T20:24:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-997455210",
      "id" : 997455210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847c_Vq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997455210/reactions"
      },
      "updated_at" : "2021-12-19T20:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997455210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This change is looking good now. I don't think it necessarily has to wait for #23809 or #23819 to be merged first, but we'd want those (and any other changes that reduce tracepoint overheads) merged for 23.0. If you'd like to have reviewers perform a Guix build of this PR, I'd suggest rebasing on master, so we don't have to worry about mismatches from a recent determinism issue in Qt.",
      "created_at" : "2021-12-30T07:06:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-1002899920",
      "id" : 1002899920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847xwnQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002899920/reactions"
      },
      "updated_at" : "2021-12-30T07:06:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002899920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, rebased.\r\n\r\nAgree that we want to have these before 23.0:\r\n- https://github.com/bitcoin/bitcoin/pull/23809\r\n- https://github.com/bitcoin/bitcoin/pull/23819\r\n- https://github.com/bitcoin/bitcoin/pull/23907\r\n- and some automatic tracepoint testing (https://github.com/bitcoin/bitcoin/issues/23296) and/or RC build testing ",
      "created_at" : "2022-01-04T09:22:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-1004645696",
      "id" : 1004645696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII58474a1A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004645696/reactions"
      },
      "updated_at" : "2022-01-04T09:22:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004645696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Thanks, rebased.\r\n\r\nCould you also integrate this change, https://github.com/fanquake/bitcoin/commit/02dbe046c6c864b998b686eb19b3966dfe410aa5, into your second commit. ",
      "created_at" : "2022-01-06T06:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-1006327570",
      "id" : 1006327570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847-1cS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1006327570/reactions"
      },
      "updated_at" : "2022-01-06T06:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1006327570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Could you also integrate this change, [fanquake@02dbe04](https://github.com/fanquake/bitcoin/commit/02dbe046c6c864b998b686eb19b3966dfe410aa5), into your second commit.\r\n\r\nDone, thanks!\r\n\r\nRunning a GUIX build now.",
      "created_at" : "2022-01-06T10:05:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-1006434815",
      "id" : 1006434815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847_Pn_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1006434815/reactions"
      },
      "updated_at" : "2022-01-06T10:06:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1006434815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "GUIX builds for 6200fbf54fa9:\r\n\r\n```\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n92da8c535d4b1f07c04fb235a6c5806ae46f5abeed9c123785a6be96911dc831  guix-build-6200fbf54fa9/output/aarch64-linux-gnu/SHA256SUMS.part\r\n0dd21a5a9c8d0d8cb3f537359a722d0431d235e37cc4a2d38c1e87f025406f29  guix-build-6200fbf54fa9/output/aarch64-linux-gnu/bitcoin-6200fbf54fa9-aarch64-linux-gnu-debug.tar.gz\r\n8085b6034858d6d59f8223dc06b659549cf05021f057580b24958acba5d3fae7  guix-build-6200fbf54fa9/output/aarch64-linux-gnu/bitcoin-6200fbf54fa9-aarch64-linux-gnu.tar.gz\r\ne8537078c389e1374d49f43e8e52512030089e397d1a667e78df3530de1bf2d9  guix-build-6200fbf54fa9/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n148c1574b8edbd6baeaa77c807f6d3a17159b49193c777978fe99279b42732bd  guix-build-6200fbf54fa9/output/arm-linux-gnueabihf/bitcoin-6200fbf54fa9-arm-linux-gnueabihf-debug.tar.gz\r\n4a6b2162c08d986ae4df147f9e50f90c039e7ca62b283da9d7fc4308e0757f00  guix-build-6200fbf54fa9/output/arm-linux-gnueabihf/bitcoin-6200fbf54fa9-arm-linux-gnueabihf.tar.gz\r\n1b150b40541260de2f4f905a68db7b86339d792f404ee4c275a57d5b45f3ce1a  guix-build-6200fbf54fa9/output/dist-archive/bitcoin-6200fbf54fa9.tar.gz\r\n1f6f3ec14f6ad98391746cd73c7aabc722ddf66d720c46fbdc9c2aebbb1d0232  guix-build-6200fbf54fa9/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n869cd22a0f1eb6721f8549ca690cec1a1d54bb8305e1f363ce0b6d2a6d654277  guix-build-6200fbf54fa9/output/powerpc64-linux-gnu/bitcoin-6200fbf54fa9-powerpc64-linux-gnu-debug.tar.gz\r\n08288ab32d123dc7872dd9fcc2af24695004da171109eec9ccc9600d8efba8b3  guix-build-6200fbf54fa9/output/powerpc64-linux-gnu/bitcoin-6200fbf54fa9-powerpc64-linux-gnu.tar.gz\r\n5e783d7c7b0ca80e682be432c81ae1758561ec9273f20b521653417ae73e2e9a  guix-build-6200fbf54fa9/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n72daa19fe9a2724f8cb30faedb99feac633c1456d551d81c820a6226b54fb4a8  guix-build-6200fbf54fa9/output/powerpc64le-linux-gnu/bitcoin-6200fbf54fa9-powerpc64le-linux-gnu-debug.tar.gz\r\n721344bd6a6e0a0cbb90c769e949f59449e6a90bc75bc4ade487664d29459685  guix-build-6200fbf54fa9/output/powerpc64le-linux-gnu/bitcoin-6200fbf54fa9-powerpc64le-linux-gnu.tar.gz\r\n2996e463e4296c783a0cf733a84a1e426d2ca393da99f2d42168969402ecca7e  guix-build-6200fbf54fa9/output/riscv64-linux-gnu/SHA256SUMS.part\r\n168ddd7ff09980c70002279e391450d80d0e49a4828a6a2647693d386068b6d0  guix-build-6200fbf54fa9/output/riscv64-linux-gnu/bitcoin-6200fbf54fa9-riscv64-linux-gnu-debug.tar.gz\r\na1adf8450dc4a5ca72b588081c355f9400286bd059664b1d6facb0ef33523b43  guix-build-6200fbf54fa9/output/riscv64-linux-gnu/bitcoin-6200fbf54fa9-riscv64-linux-gnu.tar.gz\r\n78a663bbd7618b47dd84d0a729de55fab758246de4d400827450a3897df78a85  guix-build-6200fbf54fa9/output/x86_64-apple-darwin/SHA256SUMS.part\r\nb7edf07f67492dde52b2b0da1e5e200d6f56ba91168b4e377f0c8f6589eb4358  guix-build-6200fbf54fa9/output/x86_64-apple-darwin/bitcoin-6200fbf54fa9-osx-unsigned.dmg\r\n0f5dfab2ed141bc35f8d19e1c8832399695a122e9339637e40924c5847e05bab  guix-build-6200fbf54fa9/output/x86_64-apple-darwin/bitcoin-6200fbf54fa9-osx-unsigned.tar.gz\r\nfe5aa2d9ce7b5f80b5a624b6613c577c8fd4d116bfccde8e0a00bd52e19db57e  guix-build-6200fbf54fa9/output/x86_64-apple-darwin/bitcoin-6200fbf54fa9-osx64.tar.gz\r\nabedd8376c4fd0086f1cc699610d2adf926f991ad6fba437bb24949df3ae1320  guix-build-6200fbf54fa9/output/x86_64-linux-gnu/SHA256SUMS.part\r\n52ccacc7e5a035355d253940aa3ea9e478b59178a2fcac2e0217028c0b817e3d  guix-build-6200fbf54fa9/output/x86_64-linux-gnu/bitcoin-6200fbf54fa9-x86_64-linux-gnu-debug.tar.gz\r\n446ac535e043fb56164711f42ab78117713a901ce7a46a866b0f4f9da43f9b88  guix-build-6200fbf54fa9/output/x86_64-linux-gnu/bitcoin-6200fbf54fa9-x86_64-linux-gnu.tar.gz\r\ne6a3980492b714430479d7803765294544999b50ef65df37d8648b240dc4bc26  guix-build-6200fbf54fa9/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n9c1c3652170a6217d8bea4b9241e8921f980c86ce85e3389371d5278612fb7c8  guix-build-6200fbf54fa9/output/x86_64-w64-mingw32/bitcoin-6200fbf54fa9-win-unsigned.tar.gz\r\n42bfe4ba6570f8f524f0d6ae45f91cf18ef04e77fa19e0c07abd5ea7ce43b5e6  guix-build-6200fbf54fa9/output/x86_64-w64-mingw32/bitcoin-6200fbf54fa9-win64-debug.zip\r\n225e5de0e161424da9506ba89b63aaaab2b5b7fe535aca3def68bebd1962e297  guix-build-6200fbf54fa9/output/x86_64-w64-mingw32/bitcoin-6200fbf54fa9-win64-setup-unsigned.exe\r\n922cd070d5db7b83d81d9e2fb14248f555bc8dde917dde9b555f0cae9faa6c1c  guix-build-6200fbf54fa9/output/x86_64-w64-mingw32/bitcoin-6200fbf54fa9-win64.zip\r\n```",
      "created_at" : "2022-01-09T14:39:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-1008310156",
      "id" : 1008310156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5848GZeM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1008310156/reactions"
      },
      "updated_at" : "2022-01-09T14:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1008310156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   }
]
