[
   {
      "author_association" : "MEMBER",
      "body" : "Labels are disabled for ranged descriptors.\r\nhttps://github.com/bitcoin/bitcoin/blob/ac92ab6da58e34993d0641b98eef5b5f55b6cbf9/src/wallet/wallet.cpp#L3355-L3362\r\n\r\nSo this is not a Bug, rather a question on the rationale behind this decision and regarding what should be done to support them. But i can't change the label.\r\n\r\nEDIT: So addresses of ranged descriptors aren't set at import time. It would be clunky to iterate through all the scriptpubkeys up to the gap limit and add them all to the address book. How about adding an optional label to `WalletDescriptor`?\r\nhttps://github.com/bitcoin/bitcoin/blob/ac92ab6da58e34993d0641b98eef5b5f55b6cbf9/src/wallet/walletutil.h#L74-L84",
      "created_at" : "2021-12-12T10:59:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23749#issuecomment-991876380",
      "id" : 991876380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23749",
      "node_id" : "IC_kwDOABII5847HtUc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991876380/reactions"
      },
      "updated_at" : "2021-12-12T11:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991876380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @achow101 @hugohn ",
      "created_at" : "2021-12-13T03:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23749#issuecomment-992082928",
      "id" : 992082928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23749",
      "node_id" : "IC_kwDOABII5847Ifvw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992082928/reactions"
      },
      "updated_at" : "2021-12-13T03:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992082928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This was discussed during Yesterday's meeting.\r\n```\r\n11:02 < achow101> #topic labels for ranged descriptors (darosior)\r\n11:02 < core-meetingbot`> topic: labels for ranged descriptors (darosior)\r\n11:02 -!- brunoerg [~brunoerg@2804:14d:5281:8ae2:1c0a:deda:9648:d9a6] has joined #bitcoin-core-dev\r\n11:02 < laanwj> hi\r\n11:03 < darosior> So as part of the Miniscript work, i tested the branch against my application (which uses Miniscript internally and the descriptor wallet as watchonly to track 2 main descriptors) and discovered that labels are deactivated for range descriptors.\r\n11:03 < darosior> However labels are pretty useful to differentiate the coins when you have multiple descriptors on the same watchonly wallet (which i think is the intent?). Typically for triage in the `listsinceblock` or `listunspent` results: i think i'm just an instance and they are useful as well.\r\n11:03 < darosior> So i wondered what people here thought about enabling the same features to the descriptor level, to not have to add all addresses to the address book in advance (which i guessed is the reason to disable them for range descriptors in the first place?). Or if something else than labels was envisioned to enable the same features.\r\n11:03 < darosior> s/and they are useful as well/ and they are useful as well to others/\r\n11:04 -!- sipsorcery [~sipsorcer@2a02:8084:6180:500::12b] has joined #bitcoin-core-dev\r\n11:04 < achow101> the reason that labels were not implemented originally was because it seemed odd to me that someone would want to assign the same label to all addresses generated by a descriptor\r\n11:04 < sipa> What are you thinking of, something like a label template on the descriptor, with say a %i in it that gets replaced by the index?\r\n11:04 < sipa> Or just the same label for everything?\r\n11:04 < achow101> and also I think there was some complexity with applying labels to addresses that did not exist yet\r\n11:05 < darosior> The same label for any address derived for this descriptor. Something to say \"this received coin is for this descriptor\"\r\n11:05 -!- bomb-on [~bomb-on@194.144.47.113] has joined #bitcoin-core-dev\r\n11:06 < achow101> if you think it's something people will use, go for it\r\n11:06 < michaelfolkson> Sorry for the ELI5 but by label do you mean the subscripts of Miniscript?\r\n11:07 < darosior> No i mean a metadata to identify a descriptor\r\n11:07 < darosior> Could just add the descriptor itself to the result, i guess, although i'd to think how a client of the API would manage that\r\n11:07 -!- brunoerg [~brunoerg@2804:14d:5281:8ae2:1c0a:deda:9648:d9a6] has quit [Ping timeout: 252 seconds]\r\n11:07 < sipa> No, label, as in the setlabel RPC.\r\n11:07 < sipa> and getaddressesbylabel\r\n11:07 < michaelfolkson> Oh ok\r\n11:08 < darosior> Ok, thanks. It was mainly to know if there were prior discussions on this topic. Guess i'm done :)\r\n11:08 < achow101> I'm not sure I understand the use case, but I am ambivalent on this\r\n```\r\n\r\nI then suggested that i would lay out the motivation better in a new \"feature request\" issue. In the end i think the use case i presented here is covered by the `desc` field in the `listunspent` result. The descriptor being solvable is a pre-condition to having this usecase in the first place.\r\nIt is only missing from the `listsinceblock` result but i think i'll open PR adding it.\r\n\r\ncc @achow101 re Yesterday's topic ^. TL;DR: should have done my homework better before proposing a topic. :)",
      "created_at" : "2022-01-29T08:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23749#issuecomment-1024869097",
      "id" : 1024869097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23749",
      "node_id" : "IC_kwDOABII5849FkLp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024869097/reactions"
      },
      "updated_at" : "2022-01-29T08:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024869097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "FWIW https://github.com/bitcoin/bitcoin/pull/25504 addresses this. Note also the `desc` field in `listunspent`Â isn't enough, since it is not an identifier for the imported descriptor.",
      "created_at" : "2022-06-30T09:07:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23749#issuecomment-1170963601",
      "id" : 1170963601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23749",
      "node_id" : "IC_kwDOABII585Fy3yR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1170963601/reactions"
      },
      "updated_at" : "2022-06-30T09:07:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1170963601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
