[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 361136d.",
      "created_at" : "2017-11-07T01:07:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#issuecomment-342341627",
      "id" : 342341627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11623",
      "updated_at" : "2017-11-07T01:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342341627",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149592907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149592907"
         }
      },
      "author_association" : "OWNER",
      "body" : "In tests where no multi-threading happens (most of them) it would work just as well to just take the necessary locks once in the beginning of each test case. That would make the diff smaller likely.\r\n(but maybe explicit is better, I don't know)",
      "commit_id" : "109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-08T07:39:24Z",
      "diff_hunk" : "@@ -66,11 +66,14 @@ BOOST_AUTO_TEST_CASE(outbound_slow_chain_eviction)\n     dummyNode1.fSuccessfullyConnected = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149592907",
      "id" : 149592907,
      "original_commit_id" : "361136d45e354e303fb96ce25c4b3945505633ab",
      "original_position" : 1,
      "path" : "src/test/DoS_tests.cpp",
      "position" : 1,
      "pull_request_review_id" : 75009742,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623",
      "updated_at" : "2017-11-10T16:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149592907",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149603594"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149603594"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj Do you know which tests in this PR that do not have any multi-threading? What is the best way to identify the tests for which multi-threading happens?\r\n\r\n(Personally I like explicit locking better since that communicates where/why the lock is needed which is helpful for locking newcomers. I'll happily adjust to consensus however :-))",
      "commit_id" : "109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-08T08:41:53Z",
      "diff_hunk" : "@@ -66,11 +66,14 @@ BOOST_AUTO_TEST_CASE(outbound_slow_chain_eviction)\n     dummyNode1.fSuccessfullyConnected = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149603594",
      "id" : 149603594,
      "in_reply_to_id" : 149592907,
      "original_commit_id" : "361136d45e354e303fb96ce25c4b3945505633ab",
      "original_position" : 1,
      "path" : "src/test/DoS_tests.cpp",
      "position" : 1,
      "pull_request_review_id" : 75021701,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623",
      "updated_at" : "2017-11-10T16:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149603594",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149605707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149605707"
         }
      },
      "author_association" : "OWNER",
      "body" : "Yeah I'd say just keep it like this...",
      "commit_id" : "109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-08T08:51:51Z",
      "diff_hunk" : "@@ -66,11 +66,14 @@ BOOST_AUTO_TEST_CASE(outbound_slow_chain_eviction)\n     dummyNode1.fSuccessfullyConnected = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r149605707",
      "id" : 149605707,
      "in_reply_to_id" : 149592907,
      "original_commit_id" : "361136d45e354e303fb96ce25c4b3945505633ab",
      "original_position" : 1,
      "path" : "src/test/DoS_tests.cpp",
      "position" : 1,
      "pull_request_review_id" : 75024075,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623",
      "updated_at" : "2017-11-10T16:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149605707",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r150263559"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150263559"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The lock is already acquired in src/test/miner_tests.cpp:208, no?",
      "commit_id" : "109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-10T15:30:35Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ CBlockIndex CreateBlockIndex(int nHeight)\n \n bool TestSequenceLocks(const CTransaction &tx, int flags)\n {\n-    LOCK(mempool.cs);\n+    LOCK2(cs_main, mempool.cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r150263559",
      "id" : 150263559,
      "original_commit_id" : "361136d45e354e303fb96ce25c4b3945505633ab",
      "original_position" : 5,
      "path" : "src/test/miner_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 75791029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623",
      "updated_at" : "2017-11-10T16:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150263559",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 361136d45e354e303fb96ce25c4b3945505633ab",
      "created_at" : "2017-11-10T15:32:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#issuecomment-343504421",
      "id" : 343504421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11623",
      "updated_at" : "2017-11-10T15:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343504421",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r150275779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150275779"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point! Fixed!",
      "commit_id" : "109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-10T16:16:37Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ CBlockIndex CreateBlockIndex(int nHeight)\n \n bool TestSequenceLocks(const CTransaction &tx, int flags)\n {\n-    LOCK(mempool.cs);\n+    LOCK2(cs_main, mempool.cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#discussion_r150275779",
      "id" : 150275779,
      "in_reply_to_id" : 150263559,
      "original_commit_id" : "361136d45e354e303fb96ce25c4b3945505633ab",
      "original_position" : 5,
      "path" : "src/test/miner_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 75806136,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11623",
      "updated_at" : "2017-11-10T16:16:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150275779",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 109a85899571aa499572e211bb08f05715e8743b",
      "created_at" : "2017-11-10T16:56:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#issuecomment-343527718",
      "id" : 343527718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11623",
      "updated_at" : "2017-11-10T16:56:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343527718",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-utACK 109a858.",
      "created_at" : "2017-11-10T16:59:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11623#issuecomment-343528346",
      "id" : 343528346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11623",
      "updated_at" : "2017-11-10T16:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343528346",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
