[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150195288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150195288"
         }
      },
      "author_association" : "OWNER",
      "body" : "This table is duplicated with signrawtransaction, which makes it harder to change later. Please factor it out.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T10:03:03Z",
      "diff_hunk" : "@@ -320,6 +320,86 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"\n+            \"3. \\\"amount\\\"     (numeric, required) The amount spent\\n\"\n+            \"4. \\\"sigversion\\\"     (string, required) The signature version\\n\"\n+            \"       \\\"BASE\\\"\\n\"\n+            \"       \\\"WITNESS_V0\\\"\\n\"\n+            \"5. inputindex                  (numeric, required) The index of the input to sign\\n\"\n+            \"6. \\\"sighashtype\\\"     (string, optional, default=ALL) The signature hash type. Must be one of\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"signature\\\"              (string) hex string of the signature\\n\"\n+\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+            + HelpExampleRpc(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+        );\n+\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // tx\n+        UniValue::VSTR, // scriptCode\n+        UniValue::VSTR, // amount\n+        UniValue::VSTR, // sigVersion\n+        UniValue::VNUM // inputIndex\n+    },\n+        false);\n+\n+    CMutableTransaction mtx;\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n+\n+    std::vector<unsigned char> scriptCodeData(ParseHexV(request.params[1], \"scriptCode\"));\n+    CScript scriptCode(scriptCodeData.begin(), scriptCodeData.end());\n+\n+    auto amount = AmountFromValue(request.params[2].get_str());\n+    SigVersion sigVersion;\n+    static std::map<std::string, SigVersion> mapSigVersionValues = {\n+        { std::string(\"BASE\"), SigVersion::SIGVERSION_BASE },\n+        { std::string(\"WITNESS_V0\"), SigVersion::SIGVERSION_WITNESS_V0 },\n+    };\n+    std::string strHashType = request.params[3].get_str();\n+    if (mapSigVersionValues.count(strHashType))\n+        sigVersion = mapSigVersionValues[strHashType];\n+    else\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid sigversion param\");\n+\n+    int inputIndex = request.params[4].get_int();\n+    int nHashType = SIGHASH_ALL;\n+    if (!request.params[5].isNull()) {\n+        RPCTypeCheckArgument(request.params[5], UniValue::VSTR);\n+        static std::map<std::string, int> mapSigHashValues = {\n+            { std::string(\"ALL\"), int(SIGHASH_ALL) },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150195288",
      "id" : 150195288,
      "original_commit_id" : "8875b95bc4ecf661daf23d0e9fdd341560f5b037",
      "original_position" : 67,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75710346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150195288",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just refactored.",
      "created_at" : "2017-11-10T10:14:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343433280",
      "id" : 343433280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-10T10:14:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343433280",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150268128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150268128"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No trailing white space, please.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T15:48:13Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the RPC call related to the uptime command.\n+\n+Test corresponds to code in rpc/server.cpp.\n+\"\"\"\n+\n+import time\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+\n+class GetSignatureHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        assert_equal(\"64e049981a10cf597406a175d7443c8499d308168915377637e3f706ce186137\", self.nodes[0].getsignaturehash( ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150268128",
      "id" : 150268128,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 22,
      "path" : "test/functional/getsignaturehash.py",
      "position" : null,
      "pull_request_review_id" : 75796933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150268128",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150278574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150278574"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`const std::string& hash_type`",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:26:34Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150278574",
      "id" : 150278574,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 5,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150278574",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150278783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150278783"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Avoid 2nd lookup by using `map::find`.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:27:23Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)\n+{\n+    int nHashType = 0;\n+    static std::map<std::string, int> mapSigHashValues = {\n+        { std::string(\"ALL\"), int(SIGHASH_ALL) },\n+        { std::string(\"ALL|ANYONECANPAY\"), int(SIGHASH_ALL | SIGHASH_ANYONECANPAY) },\n+        { std::string(\"NONE\"), int(SIGHASH_NONE) },\n+        { std::string(\"NONE|ANYONECANPAY\"), int(SIGHASH_NONE | SIGHASH_ANYONECANPAY) },\n+        { std::string(\"SINGLE\"), int(SIGHASH_SINGLE) },\n+        { std::string(\"SINGLE|ANYONECANPAY\"), int(SIGHASH_SINGLE | SIGHASH_ANYONECANPAY) },\n+    };\n+    if (mapSigHashValues.count(strHashType))\n+        nHashType = mapSigHashValues[strHashType];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150278783",
      "id" : 150278783,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 17,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150278783",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150279016"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150279016"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For `getsignaturehash` the parameter name is `sighashtype`.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:28:18Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)\n+{\n+    int nHashType = 0;\n+    static std::map<std::string, int> mapSigHashValues = {\n+        { std::string(\"ALL\"), int(SIGHASH_ALL) },\n+        { std::string(\"ALL|ANYONECANPAY\"), int(SIGHASH_ALL | SIGHASH_ANYONECANPAY) },\n+        { std::string(\"NONE\"), int(SIGHASH_NONE) },\n+        { std::string(\"NONE|ANYONECANPAY\"), int(SIGHASH_NONE | SIGHASH_ANYONECANPAY) },\n+        { std::string(\"SINGLE\"), int(SIGHASH_SINGLE) },\n+        { std::string(\"SINGLE|ANYONECANPAY\"), int(SIGHASH_SINGLE | SIGHASH_ANYONECANPAY) },\n+    };\n+    if (mapSigHashValues.count(strHashType))\n+        nHashType = mapSigHashValues[strHashType];\n+    else\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid sighash param\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150279016",
      "id" : 150279016,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 19,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150279016",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150279772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150279772"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, remove 2nd empty line.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:30:40Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the RPC call related to the uptime command.\n+\n+Test corresponds to code in rpc/server.cpp.\n+\"\"\"\n+\n+import time\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150279772",
      "id" : 150279772,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 15,
      "path" : "test/functional/getsignaturehash.py",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150279772",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150280219"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150280219"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Declare `tx` only once, and at the same time these 2 asserts will be more readable.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:31:53Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the RPC call related to the uptime command.\n+\n+Test corresponds to code in rpc/server.cpp.\n+\"\"\"\n+\n+import time\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+\n+class GetSignatureHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        assert_equal(\"64e049981a10cf597406a175d7443c8499d308168915377637e3f706ce186137\", self.nodes[0].getsignaturehash( \n+            # tx\n+            \"010000000243ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d200000000844730440220449a203d0062ea01022f565c94c4b62bf2cc9a05de20519bc18cded9e99aa5f702201a2b8361e2af179eb93e697d9fedd0bf1e036f0a5be39af4b1f791df803bdb6501210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff43ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d20100000085483045022100ff6e7edffa5e0758244af6af77edd14f1d80226d66f81ed58dba2def34778236022057d95177497758e467c194f0d897f175645d30e7ac2f9490247e13227ac4d2fc01210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff0100752b7d000000001976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac00000000\",\n+            # scriptcode\n+            \"76a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac\",\n+            # amount\n+            \"1\",\n+            # sigversion\n+            \"BASE\",\n+            # input\n+            0,\n+            # sighash\n+            \"ALL\"\n+        ))\n+\n+        # optional\n+        assert_equal(\"64e049981a10cf597406a175d7443c8499d308168915377637e3f706ce186137\", self.nodes[0].getsignaturehash( \n+            # tx\n+            \"010000000243ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d200000000844730440220449a203d0062ea01022f565c94c4b62bf2cc9a05de20519bc18cded9e99aa5f702201a2b8361e2af179eb93e697d9fedd0bf1e036f0a5be39af4b1f791df803bdb6501210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff43ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d20100000085483045022100ff6e7edffa5e0758244af6af77edd14f1d80226d66f81ed58dba2def34778236022057d95177497758e467c194f0d897f175645d30e7ac2f9490247e13227ac4d2fc01210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff0100752b7d000000001976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac00000000\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150280219",
      "id" : 150280219,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 40,
      "path" : "test/functional/getsignaturehash.py",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150280219",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150280298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150280298"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove 2nd empty line.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:32:07Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the RPC call related to the uptime command.\n+\n+Test corresponds to code in rpc/server.cpp.\n+\"\"\"\n+\n+import time\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+\n+class GetSignatureHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        assert_equal(\"64e049981a10cf597406a175d7443c8499d308168915377637e3f706ce186137\", self.nodes[0].getsignaturehash( \n+            # tx\n+            \"010000000243ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d200000000844730440220449a203d0062ea01022f565c94c4b62bf2cc9a05de20519bc18cded9e99aa5f702201a2b8361e2af179eb93e697d9fedd0bf1e036f0a5be39af4b1f791df803bdb6501210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff43ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d20100000085483045022100ff6e7edffa5e0758244af6af77edd14f1d80226d66f81ed58dba2def34778236022057d95177497758e467c194f0d897f175645d30e7ac2f9490247e13227ac4d2fc01210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff0100752b7d000000001976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac00000000\",\n+            # scriptcode\n+            \"76a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac\",\n+            # amount\n+            \"1\",\n+            # sigversion\n+            \"BASE\",\n+            # input\n+            0,\n+            # sighash\n+            \"ALL\"\n+        ))\n+\n+        # optional\n+        assert_equal(\"64e049981a10cf597406a175d7443c8499d308168915377637e3f706ce186137\", self.nodes[0].getsignaturehash( \n+            # tx\n+            \"010000000243ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d200000000844730440220449a203d0062ea01022f565c94c4b62bf2cc9a05de20519bc18cded9e99aa5f702201a2b8361e2af179eb93e697d9fedd0bf1e036f0a5be39af4b1f791df803bdb6501210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff43ec7a579f5561a42a7e9637ad4156672735a658be2752181801f723ba3316d20100000085483045022100ff6e7edffa5e0758244af6af77edd14f1d80226d66f81ed58dba2def34778236022057d95177497758e467c194f0d897f175645d30e7ac2f9490247e13227ac4d2fc01210363e38e2e0e55cdebfb7e27d0cb53ded150c320564a4614c18738feb124c8efd21976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088acffffffff0100752b7d000000001976a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac00000000\",\n+            # scriptcode\n+            \"76a9141a5fdcb6201f7e4fd160f9dca81075bd8537526088ac\",\n+            # amount\n+            \"1\",\n+            # sigversion\n+            \"BASE\",\n+            # input\n+            0\n+        ))\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150280298",
      "id" : 150280298,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 51,
      "path" : "test/functional/getsignaturehash.py",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150280298",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150281481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150281481"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should `ANYONECANPAY|SINGLE` be possible?",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:35:26Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)\n+{\n+    int nHashType = 0;\n+    static std::map<std::string, int> mapSigHashValues = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150281481",
      "id" : 150281481,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 8,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150281481",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150281799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150281799"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wrong indentation?",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:36:31Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"\n+            \"3. \\\"amount\\\"     (numeric, required) The amount spent\\n\"\n+            \"4. \\\"sigversion\\\"     (string, required) The signature version\\n\"\n+            \"       \\\"BASE\\\"\\n\"\n+            \"       \\\"WITNESS_V0\\\"\\n\"\n+            \"5. inputindex                  (numeric, required) The index of the input to sign\\n\"\n+            \"6. \\\"sighashtype\\\"     (string, optional, default=ALL) The signature hash type. Must be one of\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"signature\\\"              (string) hex string of the signature\\n\"\n+\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+            + HelpExampleRpc(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+        );\n+\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // tx\n+        UniValue::VSTR, // scriptCode\n+        UniValue::VSTR, // amount\n+        UniValue::VSTR, // sigVersion\n+        UniValue::VNUM // inputIndex\n+    },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150281799",
      "id" : 150281799,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 40,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150281799",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150282336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150282336"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, there are a couple of `{}` missing, as per developer notes.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:38:44Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"\n+            \"3. \\\"amount\\\"     (numeric, required) The amount spent\\n\"\n+            \"4. \\\"sigversion\\\"     (string, required) The signature version\\n\"\n+            \"       \\\"BASE\\\"\\n\"\n+            \"       \\\"WITNESS_V0\\\"\\n\"\n+            \"5. inputindex                  (numeric, required) The index of the input to sign\\n\"\n+            \"6. \\\"sighashtype\\\"     (string, optional, default=ALL) The signature hash type. Must be one of\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"signature\\\"              (string) hex string of the signature\\n\"\n+\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+            + HelpExampleRpc(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+        );\n+\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // tx\n+        UniValue::VSTR, // scriptCode\n+        UniValue::VSTR, // amount\n+        UniValue::VSTR, // sigVersion\n+        UniValue::VNUM // inputIndex\n+    },\n+        false);\n+\n+    CMutableTransaction mtx;\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150282336",
      "id" : 150282336,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 44,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150282336",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150282967"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150282967"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Please align the descriptions.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:41:32Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150282967",
      "id" : 150282967,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 12,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75809497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150282967",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150283491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150283491"
         }
      },
      "author_association" : "MEMBER",
      "body" : "New RPCs should use satoshis, especially for low-level stuff.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:43:12Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"\n+            \"3. \\\"amount\\\"     (numeric, required) The amount spent\\n\"\n+            \"4. \\\"sigversion\\\"     (string, required) The signature version\\n\"\n+            \"       \\\"BASE\\\"\\n\"\n+            \"       \\\"WITNESS_V0\\\"\\n\"\n+            \"5. inputindex                  (numeric, required) The index of the input to sign\\n\"\n+            \"6. \\\"sighashtype\\\"     (string, optional, default=ALL) The signature hash type. Must be one of\\n\"\n+            \"       \\\"ALL\\\"\\n\"\n+            \"       \\\"NONE\\\"\\n\"\n+            \"       \\\"SINGLE\\\"\\n\"\n+            \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n+            \"       \\\"SINGLE|ANYONECANPAY\\\"\\n\"\n+            \"\\nResult:\\n\"\n+            \"\\\"signature\\\"              (string) hex string of the signature\\n\"\n+\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+            + HelpExampleRpc(\"getsignaturehash\", \"\\\"txhex\\\" \\\"scriptcode\\\" \\\"0.01\\\" \\\"WITNESS_V0\\\" 1 \\\"SINGLE\\\"\")\n+        );\n+\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // tx\n+        UniValue::VSTR, // scriptCode\n+        UniValue::VSTR, // amount\n+        UniValue::VSTR, // sigVersion\n+        UniValue::VNUM // inputIndex\n+    },\n+        false);\n+\n+    CMutableTransaction mtx;\n+    if (!DecodeHexTx(mtx, request.params[0].get_str(), true))\n+        throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"TX decode failed\");\n+\n+    std::vector<unsigned char> scriptCodeData(ParseHexV(request.params[1], \"scriptCode\"));\n+    CScript scriptCode(scriptCodeData.begin(), scriptCodeData.end());\n+\n+    auto amount = AmountFromValue(request.params[2].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150283491",
      "id" : 150283491,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 50,
      "path" : "src/rpc/misc.cpp",
      "position" : 52,
      "pull_request_review_id" : 75815369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150283491",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150283768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150283768"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't explain what it is.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-10T16:43:57Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150283768",
      "id" : 150283768,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 13,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75815369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150283768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(Light concept NACK because utilities should be in libraries, not RPC.)",
      "created_at" : "2017-11-10T16:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343525049",
      "id" : 343525049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-10T16:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343525049",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr I understand that but there is no harm in having these utilities:\r\n - they don't block, just spend a thread handling the request;\r\n - make the source stronger by using core code and having test coverage;\r\n - always updated response, libraries can have bugs or be outdated.\r\n\r\nThat said, most `*rawtransactions` are also utilities, and they are supported.",
      "created_at" : "2017-11-10T21:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343589702",
      "id" : 343589702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-10T21:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343589702",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr When you start doing services which span multiple blockchain (cross chain swap), then library can't possibly know how to sign each and every of them. While if each expose `getsignaturehash` it becomes possible. I bumped into the need of that as I was trying to do a cross chain swap between bitcoin and elements.",
      "created_at" : "2017-11-11T01:43:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343630428",
      "id" : 343630428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T01:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343630428",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@NicolasDorier I don't see how that is related. You need *some* code specific for each chain anyway, no? ",
      "created_at" : "2017-11-11T01:45:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343630625",
      "id" : 343630625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T01:45:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343630625",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa, not really. By using using `decoderawtransaction`, `decodescript`, `createrawtransaction` and all of those utilities, I can create transaction on two chains even if their binary representation of a transaction is completely different.\r\nBasically, this is one of the piece missing to have a generic code for all crypto forked from Bitcoin, which does not rely on a library knowing the details.",
      "created_at" : "2017-11-11T01:48:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343630803",
      "id" : 343630803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T01:50:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343630803",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150370695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150370695"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why not?",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-11T01:59:42Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)\n+{\n+    int nHashType = 0;\n+    static std::map<std::string, int> mapSigHashValues = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150370695",
      "id" : 150370695,
      "in_reply_to_id" : 150281481,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 8,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75919447,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150370695",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@NicolasDorier I don't understand, you can't just paste signature hashes into any other RPC, so it can't be a 'missing piece'. You still need to know what the chain's signatures look like (ECDSA, sighash flags, scripting system, ...) to use that information for anything. I expect that if not already, between any two interesting chains those things will differ significantly.\r\n\r\nA more useful thing would be an RPC which you give an unsigned transaction, a key and/or an output being spent, possibly a scriptCode, and a sighash flag, and it gives you a piece of scriptSig/witness containing a valid signature for it. You'd still be responsible for combining it with other script elements. Even that isn't a missing piece IMHO, but it wouldn't need intricate knowledge of the digital signature system in your application.",
      "created_at" : "2017-11-11T02:00:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343631851",
      "id" : 343631851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T02:04:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343631851",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150370911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150370911"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently it's not.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-11T02:05:43Z",
      "diff_hunk" : "@@ -131,6 +131,25 @@ uint256 ParseHashV(const UniValue& v, std::string strName)\n     result.SetHex(strHex);\n     return result;\n }\n+\n+int ParseSigHash(std::string strHashType)\n+{\n+    int nHashType = 0;\n+    static std::map<std::string, int> mapSigHashValues = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150370911",
      "id" : 150370911,
      "in_reply_to_id" : 150281481,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 8,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 75919685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150370911",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa there is indeed the creation of script that the library need. But the scripts are most likely similar accross all chains.\r\nGood point for the ECDSA. I thought they were not different, but they are: Bitcoin Cash is using another sighash. I agree, having a RPC method `gettransactionsignature` where you pass the private key be more generic. Will work on another PR for this as well.",
      "created_at" : "2017-11-11T02:09:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343632622",
      "id" : 343632622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T02:20:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343632622",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150371275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150371275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "the scriptCode is difficult to explain, it depends on `OP_CODESEPARATOR` and whether you are using Segwit/P2SH/Segwit-P2SH/Normal script. It will never fit in one line.",
      "commit_id" : "b899e24299dfce38a13758514ef868f28ce96f64",
      "created_at" : "2017-11-11T02:16:33Z",
      "diff_hunk" : "@@ -320,6 +320,73 @@ UniValue createmultisig(const JSONRPCRequest& request)\n     return result;\n }\n \n+UniValue getsignaturehash(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() < 5 || request.params.size() > 6)\n+        throw std::runtime_error(\n+            \"getsignaturehash \\\"tx\\\" \\\"scriptcode\\\" \\\"amount\\\" \\\"sigversion\\\" inputindex (\\\"sighashtype\\\")\\n\"\n+            \"\\nCreate the hash to sign for the given input\\n\"\n+\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"tx\\\"     (string, required) The transaction hex string\\n\"\n+            \"2. \\\"scriptcode\\\"     (string, required) The scriptCode to sign\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#discussion_r150371275",
      "id" : 150371275,
      "in_reply_to_id" : 150283768,
      "original_commit_id" : "3f98c3c55425133f010f69d05dd4f0b66e9f47a0",
      "original_position" : 13,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 75920079,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11653",
      "updated_at" : "2017-11-11T02:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150371275",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I addressed the nits, I keep this open while working on an alternative `gettransactionsignature` which accept a private key as well and returns the signature.",
      "created_at" : "2017-11-11T03:14:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343636409",
      "id" : 343636409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-11T03:14:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343636409",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Alternative `signinput`: https://github.com/bitcoin/bitcoin/pull/11666 ",
      "created_at" : "2017-11-12T05:10:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-343714087",
      "id" : 343714087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2017-11-12T05:10:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343714087",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "supersede by #11666",
      "created_at" : "2018-03-06T17:04:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11653#issuecomment-370853167",
      "id" : 370853167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11653",
      "updated_at" : "2018-03-06T17:04:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370853167",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   }
]
