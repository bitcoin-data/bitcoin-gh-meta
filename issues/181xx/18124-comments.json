[
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure whether it's better to crash than start with a \"wrong\" locale. We're already avoiding using locale-dependent functions in pretty much all important places.\r\n\r\nEdit: also, why are our assumptions different for bitcoin-qt and bitcoind?",
      "created_at" : "2020-02-12T15:36:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585264292",
      "id" : 585264292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI2NDI5Mg==",
      "updated_at" : "2020-02-12T15:42:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585264292",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj I think you misunderstand the patch. Note that currently there is no way for a user to make `bitcoind` or `bitcoin-qt` start with the \"wrong\" locale (\"wrong\" as in that the assertions in this PR does not hold).\r\n\r\nThis is just a sanity check that makes sure that the assumption we know to be true today remain true also in the future. Like `ECC_InitSanityCheck`, `Random_SanityCheck`, etc it tests that our assumptions hold true also in practice at run-time. What risks do you see?",
      "created_at" : "2020-02-12T15:45:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585268983",
      "id" : 585268983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI2ODk4Mw==",
      "updated_at" : "2020-02-14T14:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585268983",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is just my personal opinion but I think this adds some quite ugly code into our already convoluted initialization process, using weird functions such as `setlocale`. I'd prefer to avoid it and focus on getting rid of locale dependent functions where it's a problem.\r\n\r\nIf we decide to do this, I'd prefer to add the common checks to the other sanity checks and not distinguish between  `bitcoind.cpp`/`qt/bitcoin.cpp`.\r\n",
      "created_at" : "2020-02-12T15:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585272928",
      "id" : 585272928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI3MjkyOA==",
      "updated_at" : "2020-02-12T15:56:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585272928",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj How would you suggest checking for the assumed locales in a less ugly way?\r\n\r\nHow do you suggest reading the C locale without using `setlocale`? (Please note that the C locale is *not* the same thing as the C++ locale.)",
      "created_at" : "2020-02-12T15:58:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585275389",
      "id" : 585275389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI3NTM4OQ==",
      "updated_at" : "2020-02-12T15:58:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585275389",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If we decide to do this, I'd prefer to add the common checks to the other sanity checks and not distinguish between `bitcoind.cpp`/`qt/bitcoin.cpp`.\r\n\r\nBut we're making different assumptions for `bitcoind` and `bitcoin-qt`, no?\r\n\r\n| Program        | C locale (`setlocale`) | Global C++ locale (`std::locale`) |\r\n| ------------- | ------------- | ----- |\r\n| `bitcoind`      | `C` (classic) | `C` (classic) |\r\n| `bitcoin-qt`      | No assumed locale  | `C` (classic) |\r\n\r\nAs the code is written we apparently want the C locale to be user-defined in `bitcoin-qt` but not in `bitcoind`. That is how it is done now in practice at least.",
      "created_at" : "2020-02-12T16:04:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585278347",
      "id" : 585278347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI3ODM0Nw==",
      "updated_at" : "2020-02-14T14:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585278347",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Perhaps I should have included a few examples in the PR title. The gotcha list could be made very long, but this is a C locale gotcha example :)\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <clocale>\r\n[cling]$ #include <string>\r\n[cling]$ std::string current_locale = {setlocale(LC_ALL, nullptr)}\r\n(std::string &) \"C\"\r\n[cling]$ std::to_string(1.23)\r\n(std::string) \"1.230000\"\r\n[cling]$ setlocale(LC_ALL, \"de_DE\");\r\n[cling]$ std::to_string(1.23)\r\n(std::string) \"1,230000\"\r\n```\r\n\r\nPerhaps surprisingly `std::to_string` cares about the C locale and not the global C++ locale.",
      "created_at" : "2020-02-12T16:14:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585283654",
      "id" : 585283654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI4MzY1NA==",
      "updated_at" : "2020-02-12T16:17:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585283654",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "And a C++ locale gotcha:\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <locale>\r\n[cling]$ #include <sstream>\r\n[cling]$ std::locale{}.name()\r\n(std::string) \"C\"\r\n[cling]$ std::ostringstream oss1;\r\n[cling]$ oss1 << 1000000;\r\n[cling]$ std::string s1 = oss1.str()\r\n(std::string &) \"1000000\"\r\n[cling]$ std::locale::global(std::locale(\"de_DE\"));\r\n[cling]$ std::ostringstream oss2;\r\n[cling]$ oss2 << 1000000;\r\n[cling]$ std::string s2 = oss2.str()\r\n(std::string &) \"1.000.000\"\r\n```",
      "created_at" : "2020-02-12T16:22:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585287999",
      "id" : 585287999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTI4Nzk5OQ==",
      "updated_at" : "2020-02-12T16:24:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585287999",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "More C locale WTF:\r\n\r\n```\r\n$ uname -s\r\nDarwin\r\n$ cat poc.cpp\r\n#include <iostream>\r\n#include <locale>\r\n\r\nint main(void) {\r\n    setlocale(LC_ALL, \"\");\r\n    std::cout << std::isspace(133) << ' ' << std::isspace(154) << ' ' << std::isspace(160);\r\n    std::cout << '\\n';\r\n}\r\n$ clang++ -o poc poc.cpp\r\n$ ./poc\r\n1 0 1\r\n$ LC_ALL=en_US ./poc\r\n1 0 1\r\n$ LC_ALL=C ./poc\r\n0 0 0\r\n$ LC_ALL=ru_RU.KOI8-R ./poc # an \"interesting\" locale\r\n0 1 0\r\n```\r\n\r\nLet me know when I've made my case sufficiently clear :)",
      "created_at" : "2020-02-12T20:04:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585392775",
      "id" : 585392775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTM5Mjc3NQ==",
      "updated_at" : "2020-02-12T20:04:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585392775",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift You're making the case that locales are annoying, but we already knew that.\r\n\r\nI think what @laanwj means is that he'd rather just avoid any locale-dependent functionality in the code (to make the locale settings irrelevant) as opposed to forcing the locale to a known value (correct me if I'm wrong of course).\r\n\r\n",
      "created_at" : "2020-02-12T20:11:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585395551",
      "id" : 585395551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTM5NTU1MQ==",
      "updated_at" : "2020-02-12T20:11:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585395551",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "-0 I agree with @laanwj let's remove locale dependence rather than reduce the set of configurations we can run against.",
      "created_at" : "2020-02-12T20:11:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585395564",
      "id" : 585395564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTM5NTU2NA==",
      "updated_at" : "2020-02-12T20:11:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585395564",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Empact \r\n\r\n> -0 I agree with @laanwj let's remove locale dependence rather than reduce the set of configurations we can run against.\r\n\r\nI don't follow. What user configuration was possible before this PR that is not possible after this PR? Can you give a specific example?",
      "created_at" : "2020-02-12T21:09:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585418510",
      "id" : 585418510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQxODUxMA==",
      "updated_at" : "2020-02-12T21:09:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585418510",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa \r\n\r\n> I think what @laanwj means is that he'd rather just avoid any locale-dependent functionality in the code (to make the locale settings irrelevant) as opposed to forcing the locale to a known value (correct me if I'm wrong of course).\r\n\r\nNote that this PR simply documents and asserts restrictions we already have in place. More specifically it does *not* disallow any configuration that is currently allowed. (Please correct me if you think I'm wrong.)\r\n\r\nI've worked a lot on removing the use of locale-dependent functions and I fail to see how that effort would be in conflict with documenting and asserting the currently made locale assumptions.\r\n\r\nIt is my understanding the following are the only possible effective locale combinations before _and_ after this PR:\r\n\r\n| Program        | C locale (`setlocale`) | Global C++ locale (`std::locale`) |\r\n| ------------- | ------------- | ----- |\r\n| `bitcoind`      | `C` (classic) | `C` (classic) |\r\n| `bitcoin-qt`      | User configured (no assumed locale) | `C` (classic) |\r\n\r\nIs that your understanding as well?\r\n\r\nPerhaps the suggestion is that we might want to change the current locale logic and allow for `bitcoind` to run with a C locale (`setlocale`) or global C++ locale (`std::locale`) other than the classic locale in the future? That sounds _really_ risky. The mere thought of an accidental fork/network split made possible by a locale dependency bug in combination with the fact that we would allow running `bitcoind` which an _effective_ non-classic C or C++ locale (think `zh_CN`!) gives me nightmares :)\r\n\r\nAgain, please correct me if my reasoning is wrong. I could be missing something :)",
      "created_at" : "2020-02-12T21:42:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585432406",
      "id" : 585432406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQzMjQwNg==",
      "updated_at" : "2020-02-12T22:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585432406",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Recommended reading to better understand the motivation behind this PR: [\"Differences between the C Locale and the C++ Locales\"](https://stdcxx.apache.org/doc/stdlibug/24-3.html)",
      "created_at" : "2020-02-12T22:14:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585444819",
      "id" : 585444819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ0NDgxOQ==",
      "updated_at" : "2020-02-12T22:14:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585444819",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, what I'm trying to say is simply that if we don't have locale-dependent functions, this should be unnecessary complexity.",
      "created_at" : "2020-02-12T22:18:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585446260",
      "id" : 585446260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ0NjI2MA==",
      "updated_at" : "2020-02-12T22:18:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585446260",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa \r\n\r\nIt is my understanding the following are the only possible effective locale combinations before _and_ after this PR:\r\n\r\n| Program        | C locale (`setlocale`) | Global C++ locale (`std::locale`) |\r\n| ------------- | ------------- | ----- |\r\n| `bitcoind`      | `C` (classic) | `C` (classic) |\r\n| `bitcoin-qt`      | User configured (no assumed locale) | `C` (classic) |\r\n\r\nIs that your understanding as well?",
      "created_at" : "2020-02-12T22:23:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585448156",
      "id" : 585448156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ0ODE1Ng==",
      "updated_at" : "2020-02-12T22:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585448156",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't understand what you mean by \"effective locale\". The locale shouldn't matter, so for all we care they're both always effectively equal to \"foobar\".",
      "created_at" : "2020-02-12T22:28:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585450140",
      "id" : 585450140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ1MDE0MA==",
      "updated_at" : "2020-02-12T22:28:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585450140",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa Sorry for my sloppy wording: with \"effective locale\" I simply meant the current locale in use (the C locale and the global C++ locale).\r\n\r\nMore specifically the following:\r\n\r\n```\r\nconst std::locale current_cpp_locale;\r\nconst std::string current_c_locale{setlocale(LC_ALL, nullptr)};\r\n```\r\n\r\nI claim the following is guaranteed to hold true no matter user configuration:\r\n\r\n| Program        | C locale (`setlocale`) | Global C++ locale (`std::locale`) |\r\n| ------------- | ------------- | ----- |\r\n| `bitcoind`      | `C` (classic) | `C` (classic) |\r\n| `bitcoin-qt`      | User configured (no assumed locale) | `C` (classic) |\r\n\r\nTo make it even more explicit - it is my understanding that the following assertions are guaranteed to hold for the entire lifetime of the processes regardless of user configuration and/or what the user has in his/hers `LC_ALL`:\r\n\r\nFor `bitcoind`:\r\n\r\n```\r\nassert(std::locale{}.name() == \"C\");\r\nconst std::string current_c_locale = {setlocale(LC_ALL, nullptr)};\r\nassert(current_c_locale == \"C\");\r\n\r\nstd::ostringstream oss1;\r\noss1 << 1000000;\r\nassert(oss1.str() == \"1000000\");\r\nassert(std::to_string(1.23) == \"1.230000\");\r\n```\r\n\r\nFor `bitcoin-qt`:\r\n\r\n```\r\nassert(std::locale{}.name() == \"C\");\r\n\r\nstd::ostringstream oss1;\r\noss1 << 1000000;\r\nassert(oss1.str() == \"1000000\");\r\n```\r\n\r\nIs that your understanding as well? :)",
      "created_at" : "2020-02-12T22:50:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585457998",
      "id" : 585457998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ1Nzk5OA==",
      "updated_at" : "2020-02-12T23:51:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585457998",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Before this PR, those assertions obviously don't hold? I'm very confused.",
      "created_at" : "2020-02-12T23:03:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585462560",
      "id" : 585462560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ2MjU2MA==",
      "updated_at" : "2020-02-12T23:03:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585462560",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18130 (Replace uses of boost::trim* with locale-independent alternatives by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-02-12T23:03:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585462590",
      "id" : 585462590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ2MjU5MA==",
      "updated_at" : "2020-02-12T23:03:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585462590",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Before this PR, those assertions obviously don't hold? I'm very confused.\r\n\r\nThen **I'm** confused by your confusion :)\r\n\r\nWhat assertion are you claiming not to hold before this PR? The `bitcoind` or the `bitcoin-qt` assertions or all of them? A single counter-example would settle this. What user configuration should I run to make the assertions fail?\r\n\r\nVery interesting: it seems like one of us will walk away from here with a \"TIL moment\" :) Very exciting regardless of outcome! :)\r\n\r\n---\r\n\r\nFWIW:\r\n\r\n```patch\r\n$ git diff\r\ndiff --git a/src/logging.h b/src/logging.h\r\nindex b2fde1b9e..6b3bc5032 100644\r\n--- a/src/logging.h\r\n+++ b/src/logging.h\r\n@@ -10,9 +10,12 @@\r\n #include <tinyformat.h>\r\n \r\n #include <atomic>\r\n+#include <clocale>\r\n #include <cstdint>\r\n #include <list>\r\n+#include <locale>\r\n #include <mutex>\r\n+#include <sstream>\r\n #include <string>\r\n #include <vector>\r\n \r\n@@ -162,6 +165,15 @@ bool GetLogCategory(BCLog::LogFlags& flag, const std::string& str);\r\n template <typename... Args>\r\n static inline void LogPrintf(const char* fmt, const Args&... args)\r\n {\r\n+    std::ostringstream oss1;\r\n+    oss1 << 1000000;\r\n+    assert(oss1.str() == \"1000000\");\r\n+    assert(std::to_string(1.23) == \"1.230000\");\r\n+\r\n+    assert(std::locale{}.name() == \"C\");\r\n+    std::string current_locale = {setlocale(LC_ALL, nullptr)};\r\n+    assert(current_locale == \"C\");\r\n+\r\n     if (LogInstance().Enabled()) {\r\n         std::string log_msg;\r\n         try {\r\n$ make\r\n$ LC_ALL=de_DE src/bitcoind\r\nâ¦ note the absence of assertion failures â¦\r\n```",
      "created_at" : "2020-02-12T23:21:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585467979",
      "id" : 585467979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ2Nzk3OQ==",
      "updated_at" : "2020-02-12T23:21:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585467979",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`std::to_string(1.23)` won't always be `\"1.230000\"` with the current code, if LC_ALL isn't set to C?",
      "created_at" : "2020-02-12T23:32:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585471561",
      "id" : 585471561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ3MTU2MQ==",
      "updated_at" : "2020-02-12T23:32:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585471561",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa \r\n\r\nAs you probably know the equivalent of `std::setlocale(LC_ALL, \"C\");` is always executed before `main` is run.\r\n\r\nI think you're incorrectly assuming that we are doing `std::setlocale(LC_ALL, \"\");` in the `bitcoind` code (which would set the locale to whatever the user has set the environment variable `LC_ALL` to) .\r\n\r\nCould that be the case?",
      "created_at" : "2020-02-12T23:45:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585475591",
      "id" : 585475591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ3NTU5MQ==",
      "updated_at" : "2020-02-12T23:45:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585475591",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, I'm not assuming any `setlocale` call. I'm saying that _before_ this PR, there is no such call, and thus `std::to_string(1.23)` _right now_ won't be guaranteed to be \"1.230000\".",
      "created_at" : "2020-02-12T23:52:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585477459",
      "id" : 585477459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ3NzQ1OQ==",
      "updated_at" : "2020-02-12T23:52:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585477459",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa \r\n\r\nSounds like you're incorrectly assuming that `setlocale(LC_ALL, nullptr);` _sets_ the locale. Could that be the case? Note that `setlocale(LC_ALL, nullptr);` is _not_ equivalent to `setlocale(LC_ALL, \"\");`.\r\n\r\nI claim that `std::to_string(1.23)` _right now_ (prior to this PR) is guaranteed to be `\"1.230000\"` during the entire lifetime of the `bitcoind` process regardless of the user's configuration and/or his/her `LC_ALL` environment variable.\r\n\r\nIf you still don't think that is the case then I kindly ask you to provide a counter-example in the form of a configuration and/or diff. I would love to be proved wrong and walk away with a TIL experience :)\r\n\r\n---\r\n\r\nFWIW:\r\n\r\n```\r\nSYNOPSIS\r\n       #include <locale.h>\r\n\r\n       char *setlocale(int category, const char *locale);\r\n\r\nDESCRIPTION\r\n       The setlocale() function is used to set or query the program's current locale.\r\n\r\n       If  locale is not NULL, the program's current locale is modified according\r\n       to the arguments.\r\n\r\n       [â¦]\r\n\r\n       If locale is NULL, the current locale is only queried, not modified.\r\n\r\n       [â¦]\r\n\r\n       On startup of the main program, the portable \"C\" locale is selected as default.\r\n       A program may be made portable to all locales by calling:\r\n\r\n           setlocale(LC_ALL, \"\");\r\n\r\n       after program initialization [â¦]\r\n```\r\n",
      "created_at" : "2020-02-13T00:03:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585480540",
      "id" : 585480540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ4MDU0MA==",
      "updated_at" : "2020-02-13T00:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585480540",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Aha, I was indeed making the assumption that `setlocale(?, nullptr)` was changing the locale.\r\n\r\nIn that case, I have another concern: doesn't this break running `bitcoind` with locale env variables set to anything but LC_ALL?",
      "created_at" : "2020-02-13T00:52:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585493739",
      "id" : 585493739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTQ5MzczOQ==",
      "updated_at" : "2020-02-13T00:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585493739",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa \r\n\r\n> In that case, I have another concern: doesn't this break running bitcoind with locale env variables set to anything but LC_ALL?\r\n\r\nIt sounds like you're incorrectly assuming that any of the `LC_*` environment variables will somehow control the C and C++ locales used without any explicit call to `setlocale(LC_*, \"\")` being made in the user code. Could that be the case?\r\n\r\nAs you probably know the equivalent of `setlocale(LC_ALL, \"C\")` is called automatically in all applications before `main`.\r\n\r\nThus when the execution of `main` begins the C locale and the global C++ locale are both guaranteed to equal to the classic locale (a.k.a. the \"C\" locale).\r\n\r\nWithout any explicit call to `setlocale(LC_*, \"\")` in the code the default \"C\" locale will be in use throughout the process lifetime no matter what the `LC_*` environment variables are set to.\r\n\r\nLet's demonstrate this with a small test program:\r\n\r\n```c++\r\n#include <clocale>\r\n#include <cstdlib>\r\n#include <iostream>\r\n#include <locale>\r\n#include <sstream>\r\n#include <string>\r\n\r\nint main(void)\r\n{\r\n    std::cout << \"C locale at beginning of main: \" << std::string{setlocale(LC_ALL, nullptr)} << \"\\n\";\r\n    std::cout << \"C++ locale at beginning of main: \" << std::locale{}.name() << \"\\n\\n\";\r\n#if OPT_IN_TO_LOCALIZATION_USING_SET_LOCALE\r\n    setlocale(LC_ALL, \"\");\r\n#endif\r\n#if OPT_IN_TO_LOCALIZATION_USING_STD_LOCALE_GLOBAL\r\n    std::locale::global(std::locale(\"\"));\r\n#endif\r\n    std::ostringstream oss;\r\n    oss << 1000000;\r\n    std::cout << \"std::ostringstream oss; oss << 1000000; oss.str() equals \" << oss.str() << \"\\n\";\r\n    std::cout << \"std::to_string(1.23) equals \" << std::to_string(1.23) << \"\\n\\n\";\r\n    std::cout << \"C locale at end of main: \" << std::string{setlocale(LC_ALL, nullptr)} << \"\\n\";\r\n    std::cout << \"C++ locale at end of main: \" << std::locale{}.name() << \"\\n\\n\";\r\n    std::cout << \"setlocale(LC_COLLATE,  nullptr) (read-only operation) = \" << std::string{setlocale(LC_COLLATE, nullptr)} << \"\\n\";\r\n    std::cout << \"setlocale(LC_CTYPE,    nullptr) (read-only operation) = \" << std::string{setlocale(LC_CTYPE, nullptr)} << \"\\n\";\r\n    std::cout << \"setlocale(LC_MESSAGES, nullptr) (read-only operation) = \" << std::string{setlocale(LC_MESSAGES, nullptr)} << \"\\n\";\r\n    std::cout << \"setlocale(LC_MONETARY, nullptr) (read-only operation) = \" << std::string{setlocale(LC_MONETARY, nullptr)} << \"\\n\";\r\n    std::cout << \"setlocale(LC_NUMERIC,  nullptr) (read-only operation) = \" << std::string{setlocale(LC_NUMERIC, nullptr)} << \"\\n\";\r\n    std::cout << \"setlocale(LC_TIME,     nullptr) (read-only operation) = \" << std::string{setlocale(LC_TIME, nullptr)} << \"\\n\";\r\n}\r\n```\r\n\r\nLet's try with `LC_ALL=de_DE ./l8n` without any opt-in to locale dependence:\r\n\r\n```\r\n$ clang++ -o l8n l8n.cpp\r\n$ LC_ALL=de_DE ./l8n\r\nC locale at beginning of main: C\r\nC++ locale at beginning of main: C\r\n\r\nstd::ostringstream oss; oss << 1000000; oss.str() equals 1000000\r\nstd::to_string(1.23) equals 1.230000\r\n\r\nC locale at end of main: C\r\nC++ locale at end of main: C\r\n\r\nsetlocale(LC_COLLATE,  nullptr) (read-only operation) = C\r\nsetlocale(LC_CTYPE,    nullptr) (read-only operation) = C\r\nsetlocale(LC_MESSAGES, nullptr) (read-only operation) = C\r\nsetlocale(LC_MONETARY, nullptr) (read-only operation) = C\r\nsetlocale(LC_NUMERIC,  nullptr) (read-only operation) = C\r\nsetlocale(LC_TIME,     nullptr) (read-only operation) = C\r\n```\r\n\r\nLet's try with `LC_NUMERIC=de_DE ./l8n` without any opt-in to locale dependence:\r\n\r\n```\r\n$ clang++ -o l8n l8n.cpp\r\n$ LC_NUMERIC=de_DE ./l8n\r\nC locale at beginning of main: C\r\nC++ locale at beginning of main: C\r\n\r\nstd::ostringstream oss; oss << 1000000; oss.str() equals 1000000\r\nstd::to_string(1.23) equals 1.230000\r\n\r\nC locale at end of main: C\r\nC++ locale at end of main: C\r\n\r\nsetlocale(LC_COLLATE,  nullptr) (read-only operation) = C\r\nsetlocale(LC_CTYPE,    nullptr) (read-only operation) = C\r\nsetlocale(LC_MESSAGES, nullptr) (read-only operation) = C\r\nsetlocale(LC_MONETARY, nullptr) (read-only operation) = C\r\nsetlocale(LC_NUMERIC,  nullptr) (read-only operation) = C\r\nsetlocale(LC_TIME,     nullptr) (read-only operation) = C\r\n```\r\n\r\nLet's try `LC_ALL=de_DE ./l8n` with opt-in to locale dependence using `set_locale`:\r\n\r\n```\r\n$ clang++ -DOPT_IN_TO_LOCALIZATION_USING_SET_LOCALE -o l8n l8n.cpp\r\n$ LC_ALL=de_DE ./l8n\r\nC locale at beginning of main: C\r\nC++ locale at beginning of main: C\r\n\r\nstd::ostringstream oss; oss << 1000000; oss.str() equals 1000000\r\nstd::to_string(1.23) equals 1,230000\r\n\r\nC locale at end of main: de_DE\r\nC++ locale at end of main: C\r\n\r\nsetlocale(LC_COLLATE,  nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_CTYPE,    nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_MESSAGES, nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_MONETARY, nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_NUMERIC,  nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_TIME,     nullptr) (read-only operation) = de_DE\r\n```\r\n\r\nLet's try `LC_ALL=de_DE ./l8n` with opt-in to locale dependence using `std::locale::global`:\r\n\r\n```\r\n$ clang++ -DOPT_IN_TO_LOCALIZATION_USING_STD_LOCALE_GLOBAL -o l8n l8n.cpp\r\n$ LC_ALL=de_DE ./l8n\r\nC locale at beginning of main: C\r\nC++ locale at beginning of main: C\r\n\r\nstd::ostringstream oss; oss << 1000000; oss.str() equals 1.000.000\r\nstd::to_string(1.23) equals 1,230000\r\n\r\nC locale at end of main: de_DE\r\nC++ locale at end of main: de_DE\r\n\r\nsetlocale(LC_COLLATE,  nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_CTYPE,    nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_MESSAGES, nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_MONETARY, nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_NUMERIC,  nullptr) (read-only operation) = de_DE\r\nsetlocale(LC_TIME,     nullptr) (read-only operation) = de_DE\r\n```\r\n\r\nQED? :)",
      "created_at" : "2020-02-13T16:56:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585859719",
      "id" : 585859719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTg1OTcxOQ==",
      "updated_at" : "2020-02-13T16:56:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585859719",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, I'm indeed learning. I assumed that the LC_ environment variables automatically affect all programs.\r\n\r\nSo what is this testing? It seems to verify things that are guaranteed by the language?\r\n",
      "created_at" : "2020-02-13T18:11:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-585896017",
      "id" : 585896017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTg5NjAxNw==",
      "updated_at" : "2020-02-13T18:11:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585896017",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa The only thing guaranteed by the language is that a C++ program has the C and C++ locales set to the classic locale when entering `main`. After that the user code is free to mess with the locale as it seen fit: hence the need to verify that the assumption we make hold true :)\r\n\r\nThere are quite a few gotchas that are worth guarding against in my opinion:\r\n\r\nA common gotcha is that `setlocale(LC_ALL, \"\")` (write) where `setlocale(LC_ALL, nullptr)` (read) was intended.\r\n\r\nAnother common gotcha is libraries calling `setlocale(LC_ALL, \"\")` without the application author being aware of it which of course messes with the locale of the entire application in unexpected ways.\r\n\r\nI think we have that problem today in the form of Qt which runs `std::setlocale(LC_ALL, \"\")` as part of its setup process. That is why the reported locale issues historically have popped up in `bitcoin-qt` and not in `bitcoind` AFAICT.",
      "created_at" : "2020-02-14T15:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-586336779",
      "id" : 586336779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjMzNjc3OQ==",
      "updated_at" : "2020-02-14T15:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586336779",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To make things even more unpredictable some versions of Qt messes with all locale categories whereas other versions only messes with a subset of locale categories. I believe a major locale handling change was made in Qt 4.4 for example.",
      "created_at" : "2020-02-14T15:55:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-586348312",
      "id" : 586348312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjM0ODMxMg==",
      "updated_at" : "2020-02-14T16:17:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586348312",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some of our stuff, like `bitcoin-qt` and `bitcoin-wallet` *should* use locales...",
      "created_at" : "2020-02-14T17:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-586382342",
      "id" : 586382342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjM4MjM0Mg==",
      "updated_at" : "2020-02-14T17:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586382342",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr \r\n\r\nWe produce the following five binaries:\r\n\r\n* `bitcoin-cli`\r\n* `bitcoin-qt`\r\n* `bitcoin-tx`\r\n* `bitcoin-wallet`\r\n* `bitcoind`\r\n\r\nWhich of them should be localized and which should not be localized?\r\n",
      "created_at" : "2020-02-15T16:48:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-586618780",
      "id" : 586618780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjYxODc4MA==",
      "updated_at" : "2020-02-15T16:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586618780",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr Could you clarify your comment by answering the last question? :)",
      "created_at" : "2020-02-23T10:27:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-590053781",
      "id" : 590053781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDA1Mzc4MQ==",
      "updated_at" : "2020-02-23T10:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590053781",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift Purely user-facing graphical displays should be localized ",
      "created_at" : "2020-02-24T18:25:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-590478407",
      "id" : 590478407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDQ3ODQwNw==",
      "updated_at" : "2020-02-24T18:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590478407",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke `bitcoin-qt` is the only of the five binaries producing purely user-facing graphical displays AFAICT, so `bitcoin-qt` is thus the only application that should be localized. Correct? :)",
      "created_at" : "2020-02-24T21:07:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-590548775",
      "id" : 590548775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDU0ODc3NQ==",
      "updated_at" : "2020-02-24T21:07:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590548775",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> bitcoin-qt is the only of the five binaries producing purely user-facing graphical displays AFAICT, so bitcoin-qt is thus the only application that should be localized. Correct? :)\r\n\r\nI think it's wrong to think about binaries being localized or not.\r\n\r\nThe user-interfacing code in `bitcoin-qt` should/may be localized, but other code in `bitcoin-qt` (e.g. the RPC code in it) still shouldn't.",
      "created_at" : "2020-02-24T21:15:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-590551903",
      "id" : 590551903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDU1MTkwMw==",
      "updated_at" : "2020-02-24T21:15:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590551903",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > bitcoin-qt is the only of the five binaries producing purely user-facing graphical displays AFAICT, so bitcoin-qt is thus the only application that should be localized. Correct? :)\r\n> \r\n> I think it's wrong to think about binaries being localized or not.\r\n> \r\n> The user-interfacing code in `bitcoin-qt` should/may be localized, but other code in `bitcoin-qt` (e.g. the RPC code in it) still shouldn't.\r\n\r\nI think our statements can be combined to a meaningful policy:\r\n\r\n* Code in `bitcoin-cli`, `bitcoin-tx`, `bitcoin-wallet` and `bitcoind` must not be localized.\r\n* Purely user-facing graphical displays in `bitcoin-qt` should/may be localized, but all other code in `bitcoin-qt` must not be localized.\r\n\r\nOr alternatively:\r\n\r\n* Code in the project must not be localized with the exception of purely user-facing graphical displays in Qt related code which should/may be localized.\r\n\r\nSounds good? :)",
      "created_at" : "2020-03-06T15:46:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-595827802",
      "id" : 595827802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NTgyNzgwMg==",
      "updated_at" : "2020-03-06T15:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/595827802",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift That sounds right; I don't think any of that is related to the changes in this PR.",
      "created_at" : "2020-03-13T03:10:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18124#issuecomment-598527283",
      "id" : 598527283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18124",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODUyNzI4Mw==",
      "updated_at" : "2020-03-13T03:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598527283",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
