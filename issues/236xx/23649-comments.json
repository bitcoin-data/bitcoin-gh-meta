[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "CC @MarcoFalke, comments from https://github.com/bitcoin/bitcoin/pull/22677#pullrequestreview-820587394",
      "created_at" : "2021-12-02T12:06:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23649#issuecomment-984567444",
      "id" : 984567444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23649",
      "node_id" : "IC_kwDOABII5846r06U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984567444/reactions"
      },
      "updated_at" : "2021-12-02T12:06:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984567444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23649#discussion_r761054652"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761054652"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        const LockPoints lp{it->GetLockPoints()};\r\n```",
      "commit_id" : "c1ba9e8dd843ba34c1e60bec838ca803cabcbd4e",
      "created_at" : "2021-12-02T12:40:41Z",
      "diff_hunk" : "@@ -650,7 +649,7 @@ void CTxMemPool::removeForReorg(CChain& chain, std::function<bool(txiter)> check\n     RemoveStaged(setAllRemoves, false, MemPoolRemovalReason::REORG);\n     for (indexed_transaction_set::const_iterator it = mapTx.begin(); it != mapTx.end(); it++) {\n         LockPoints lp = it->GetLockPoints();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23649#discussion_r761054652",
      "id" : 761054652,
      "line" : 651,
      "node_id" : "PRRC_kwDOABII584tXMW8",
      "original_commit_id" : "c1ba9e8dd843ba34c1e60bec838ca803cabcbd4e",
      "original_line" : 651,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 23,
      "pull_request_review_id" : 821446829,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761054652/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-02T12:40:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761054652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thoughts on this suggested diff?\r\n\r\n```diff\r\ndiff --git a/src/txmempool.cpp b/src/txmempool.cpp\r\nindex 27fbb8acac..2cc0aa1e90 100644\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -5,6 +5,7 @@\r\n \r\n #include <txmempool.h>\r\n \r\n+#include <chain.h>\r\n #include <coins.h>\r\n #include <consensus/consensus.h>\r\n #include <consensus/tx_verify.h>\r\ndiff --git a/src/txmempool.h b/src/txmempool.h\r\nindex c6e08a3ca5..15a57de922 100644\r\n--- a/src/txmempool.h\r\n+++ b/src/txmempool.h\r\n@@ -14,7 +14,6 @@\r\n #include <utility>\r\n #include <vector>\r\n \r\n-#include <chain.h>\r\n #include <coins.h>\r\n #include <consensus/amount.h>\r\n #include <indirectmap.h>\r\n@@ -26,12 +25,13 @@\r\n #include <util/epochguard.h>\r\n #include <util/hasher.h>\r\n \r\n-#include <boost/multi_index_container.hpp>\r\n #include <boost/multi_index/hashed_index.hpp>\r\n #include <boost/multi_index/ordered_index.hpp>\r\n #include <boost/multi_index/sequenced_index.hpp>\r\n+#include <boost/multi_index_container.hpp>\r\n \r\n class CBlockIndex;\r\n+class CChain;\r\n class CChainState;\r\n extern RecursiveMutex cs_main;\r\n \r\n",
      "created_at" : "2021-12-02T14:34:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23649#issuecomment-984683414",
      "id" : 984683414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23649",
      "node_id" : "IC_kwDOABII5846sROW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984683414/reactions"
      },
      "updated_at" : "2021-12-02T14:34:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984683414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops forgot the txmempool.cpp include. Added suggestions, thanks @MarcoFalke ",
      "created_at" : "2021-12-02T14:55:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23649#issuecomment-984702961",
      "id" : 984702961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23649",
      "node_id" : "IC_kwDOABII5846sV_x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984702961/reactions"
      },
      "updated_at" : "2021-12-02T14:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984702961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23649#discussion_r761735639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761735639"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Actually I am wondering what this code is doing at all? How is it not a noop that can be removed?",
      "commit_id" : "ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
      "created_at" : "2021-12-03T08:32:42Z",
      "diff_hunk" : "@@ -649,8 +649,8 @@ void CTxMemPool::removeForReorg(CChain& chain, std::function<bool(txiter)> check\n     }\n     RemoveStaged(setAllRemoves, false, MemPoolRemovalReason::REORG);\n     for (indexed_transaction_set::const_iterator it = mapTx.begin(); it != mapTx.end(); it++) {\n-        LockPoints lp = it->GetLockPoints();\n-        if (!TestLockPointValidity(chain, &lp)) {\n+        const LockPoints lp{it->GetLockPoints()};\n+        if (!TestLockPointValidity(chain, lp)) {\n             mapTx.modify(it, update_lock_points(lp));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23649#discussion_r761735639",
      "id" : 761735639,
      "line" : 654,
      "node_id" : "PRRC_kwDOABII584tZynX",
      "original_commit_id" : "ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
      "original_line" : 654,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 36,
      "pull_request_review_id" : 822374768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761735639/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-03T08:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/761735639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
