[
   {
      "author_association" : "MEMBER",
      "body" : "It should probably also fail if the node didn't get any txs from the network (e.g. `-connect=$(SOME_NO_TX_RELAY_NODE)`). Not sure if this is possible with the current fee estimator design. @morcos any thoughts on this?",
      "created_at" : "2019-09-10T11:47:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-529898147",
      "id" : 529898147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyOTg5ODE0Nw==",
      "updated_at" : "2019-09-10T11:47:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/529898147",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't looked at this in a while, but I thought the behavior was that if you had relatively recent estimates (which would only be the case if you'd been receiving transactions and your node was in sync) then estimatesmartfee would continue reporting those estimates for some period of time until the data was old enough that they were stale.  This would happen naturally since the estimates use a exponentially decaying moving average and would happen quicker for estimates for shorter confirmation times.   It's possible it doesn't work quite like this, or this doesn't aggressively enough disable estimates, but I don't know without further investigation.  \r\n\r\nFor a non-lightning use case, the slightly stale estimates are still designed to be good enough to be usable for getting transactions confirmed and I think make more sense than having no estimates.  I'd never considered a design goal of trying to keep estimates in sync with peers. ",
      "created_at" : "2019-09-10T12:06:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-529904220",
      "id" : 529904220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyOTkwNDIyMA==",
      "updated_at" : "2019-09-10T12:06:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/529904220",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "node_id" : "MDQ6VXNlcjQzNjAzNDk=",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I was that user. :)\r\n\r\nWhat I recommend is that if blocksonly is enabled, the algorithm should take in consideration only the fees already paid in the last blocks and discard the ones of the mempool, because obviusly there is no mempool.\r\n",
      "created_at" : "2019-09-10T12:22:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-529909740",
      "id" : 529909740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyOTkwOTc0MA==",
      "updated_at" : "2019-09-10T12:22:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/529909740",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6039997?v=4",
         "events_url" : "https://api.github.com/users/JavierRSobrino/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JavierRSobrino/followers",
         "following_url" : "https://api.github.com/users/JavierRSobrino/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JavierRSobrino/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JavierRSobrino",
         "id" : 6039997,
         "login" : "JavierRSobrino",
         "node_id" : "MDQ6VXNlcjYwMzk5OTc=",
         "organizations_url" : "https://api.github.com/users/JavierRSobrino/orgs",
         "received_events_url" : "https://api.github.com/users/JavierRSobrino/received_events",
         "repos_url" : "https://api.github.com/users/JavierRSobrino/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JavierRSobrino/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JavierRSobrino/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JavierRSobrino"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You didn't by any chance have debugging on?  I'd be curious what the lines that start with \"FeeEst:\" or \"Blockpolicy estimates\" look like around the time you got the bad estimates.   Also, were your estimates too high or too low?   If there are no transactions in the mempool, the estimates won't be considering transactions in the mempool, the problem is they can't consider transactions in the blocks if you are only seeing the transactions when they show up in the blocks, so the estimates are stuck from when you used to receive transactions.",
      "created_at" : "2019-09-10T14:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-529954409",
      "id" : 529954409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyOTk1NDQwOQ==",
      "updated_at" : "2019-09-10T14:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/529954409",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "node_id" : "MDQ6VXNlcjQzNjAzNDk=",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have some logs in c-lightning, the last recent error is:\r\n\r\n> CHANNELD_NORMAL:update_fee 5046 outside range 9345-186900\r\n\r\nfor a normal channel close tx, the ID is 92f83af6a1459d449803824d724e1333cdb45a86b22e73ae27438aa7f897402d\r\n\r\nI think the channel closed on 3th September.\r\nThe node was running in blocksonly mode for quite a few weeks.",
      "created_at" : "2019-09-10T19:13:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-530079654",
      "id" : 530079654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMDA3OTY1NA==",
      "updated_at" : "2019-09-10T19:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/530079654",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6039997?v=4",
         "events_url" : "https://api.github.com/users/JavierRSobrino/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JavierRSobrino/followers",
         "following_url" : "https://api.github.com/users/JavierRSobrino/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JavierRSobrino/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JavierRSobrino",
         "id" : 6039997,
         "login" : "JavierRSobrino",
         "node_id" : "MDQ6VXNlcjYwMzk5OTc=",
         "organizations_url" : "https://api.github.com/users/JavierRSobrino/orgs",
         "received_events_url" : "https://api.github.com/users/JavierRSobrino/received_events",
         "repos_url" : "https://api.github.com/users/JavierRSobrino/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JavierRSobrino/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JavierRSobrino/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JavierRSobrino"
      }
   }
]
