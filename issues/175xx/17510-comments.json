[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347542712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347542712"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this is needed, there is another problem. Why does a move cause UB? And why is a move being invoked in the first place with operator=?",
      "commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "created_at" : "2019-11-18T18:36:06Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347542712",
      "id" : 347542712,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzU0MjcxMg==",
      "original_commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 318542643,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510",
      "updated_at" : "2019-11-18T18:36:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347542712",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347574079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347574079"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No idea. Maybe @practicalswift can shed some light here?",
      "commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "created_at" : "2019-11-18T19:44:04Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347574079",
      "id" : 347574079,
      "in_reply_to_id" : 347542712,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzU3NDA3OQ==",
      "original_commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 318583421,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510",
      "updated_at" : "2019-11-18T19:44:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347574079",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For reference, one tb is this:\r\n\r\n\r\n```\r\nvim $(pwd)/test/sanitizer_suppressions # Remove the prevector suppressions \r\n./configure  --with-sanitizers=address,undefined CC=clang CXX=clang++\r\nmake\r\nexport LSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/lsan\"\r\nexport TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan\"\r\nexport UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1\"\r\n$ ./src/test/test_bitcoin -t denialofservice_tests\r\nRunning 6 test cases...\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7ffdaaebe012 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7ffdaaebe012: note: pointer points here\r\n 00 00  00 00 00 00 00 00 6c 00  00 00 20 9e 01 00 b0 60  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^ \r\n    #0 0x56076599c81d in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) ./src/./prevector.h:452:9\r\n    #1 0x560765991f58 in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) ./src/./prevector.h:272:9\r\n    #2 0x560765991f58 in CScript::operator=(CScript&&) ./src/./script/script.h:390\r\n    #3 0x5607673635b5 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) ./src/script/sign.cpp:240:23\r\n    #4 0x56076736766c in SignSignature(SigningProvider const&, CScript const&, CMutableTransaction&, unsigned int, long const&, int) ./src/script/sign.cpp:375:16\r\n    #5 0x5607673679bb in SignSignature(SigningProvider const&, CTransaction const&, CMutableTransaction&, unsigned int, int) ./src/script/sign.cpp:387:12\r\n    #6 0x560765d5c515 in denialofservice_tests::DoS_mapOrphans::test_method() ./src/test/denialofservice_tests.cpp:403:9\r\n    #7 0x560765d5a4bc in denialofservice_tests::DoS_mapOrphans_invoker() ./src/test/denialofservice_tests.cpp:369:1\r\n    #8 0x560765aa4cc5 in boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:117:11\r\n    #9 0x7fa1a39b7581  (/lib64/libboost_unit_test_framework.so.1.69.0+0x30581)\r\n    #10 0x7fa1a39b65ec in boost::execution_monitor::catch_signals(boost::function<int ()> const&) (/lib64/libboost_unit_test_framework.so.1.69.0+0x2f5ec)\r\n    #11 0x7fa1a39b6677 in boost::execution_monitor::execute(boost::function<int ()> const&) (/lib64/libboost_unit_test_framework.so.1.69.0+0x2f677)\r\n    #12 0x7fa1a39b674d in boost::execution_monitor::vexecute(boost::function<void ()> const&) (/lib64/libboost_unit_test_framework.so.1.69.0+0x2f74d)\r\n    #13 0x7fa1a39e124e in boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned int) (/lib64/libboost_unit_test_framework.so.1.69.0+0x5a24e)\r\n    #14 0x7fa1a39c667f  (/lib64/libboost_unit_test_framework.so.1.69.0+0x3f67f)\r\n    #15 0x7fa1a39c6913  (/lib64/libboost_unit_test_framework.so.1.69.0+0x3f913)\r\n    #16 0x7fa1a39c6913  (/lib64/libboost_unit_test_framework.so.1.69.0+0x3f913)\r\n    #17 0x7fa1a39bdc73 in boost::unit_test::framework::run(unsigned long, bool) (/lib64/libboost_unit_test_framework.so.1.69.0+0x36c73)\r\n    #18 0x7fa1a39e00d1 in boost::unit_test::unit_test_main(bool (*)(), int, char**) (/lib64/libboost_unit_test_framework.so.1.69.0+0x590d1)\r\n    #19 0x5607659a1526 in main /usr/include/boost/test/unit_test.hpp:63:12\r\n    #20 0x7fa1a2f8df42 in __libc_start_main (/lib64/libc.so.6+0x23f42)\r\n    #21 0x560765861f8d in _start (./src/test/test_bitcoin+0x2a59f8d)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior prevector.h:452:19 in \r\n",
      "created_at" : "2019-11-18T21:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555208986",
      "id" : 555208986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTIwODk4Ng==",
      "updated_at" : "2019-11-19T02:33:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555208986",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17208](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17208.html) (Make all tests pass UBSan without using any UBSan suppressions by practicalswift)\n* [#10785](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10785.html) (Serialization improvements by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-18T21:47:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555224412",
      "id" : 555224412,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTIyNDQxMg==",
      "updated_at" : "2019-11-18T21:47:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555224412",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If this is needed, there is another problem. Why does a move cause UB? And why is a move being invoked in the first place with operator=?\r\n\r\nAgree. This is kind of scary, and working around it like this seems a bad idea if we don't understand why it happens.",
      "created_at" : "2019-11-19T08:00:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555380874",
      "id" : 555380874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTM4MDg3NA==",
      "updated_at" : "2019-11-19T08:00:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555380874",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "BTW, this reverts 2ddfcfd2d67bc2bd8aa4682ceaba6a59614e54d1 (#9349), with the difference that the new code invokes `CScript` instead of `CScriptBase`.",
      "created_at" : "2019-11-19T08:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555398703",
      "id" : 555398703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTM5ODcwMw==",
      "updated_at" : "2019-11-19T08:51:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555398703",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could this pragma in prevector.h be causing alignment issues? (doesn't it mean something like \"ignore all padding requirements within the struct\")\r\n```\r\n#pragma pack(push, 1)\r\n```\r\n\r\n\r\n",
      "created_at" : "2019-11-19T09:01:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555402521",
      "id" : 555402521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTQwMjUyMQ==",
      "updated_at" : "2019-11-19T09:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555402521",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347858416"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347858416"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See also: https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544160293",
      "commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "created_at" : "2019-11-19T10:58:49Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#discussion_r347858416",
      "id" : 347858416,
      "in_reply_to_id" : 347542712,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Nzg1ODQxNg==",
      "original_commit_id" : "d86e9180ac7d3f12997842c0cd15b3efb6b025d9",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 318948409,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17510",
      "updated_at" : "2019-11-19T10:58:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347858416",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Smaller code to reproduce:\r\n\r\n```cpp\r\nstruct Test {\r\n    uint8_t a : 8;\r\n    CScript script;\r\n};\r\n\r\n\r\n{\r\n    const std::array<unsigned char, 5> D{1, 2, 3, 4, 5};\r\n    Test t{0x0f, {}};\r\n    t.script = CScript{D.begin(), D.end()};\r\n}\r\n```\r\n\r\nResult:\r\n\r\n```\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7ffe6446c741 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7ffe6446c741: note: pointer points here\r\n 7f 00 00  0f 00 00 00 00 01 02 03  04 05 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00\r\n              ^ \r\n    #0 0x555dd33f9a7d in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) /home/marco/workspace/btc_bitcoin_core/src/./prevector.h:452:9\r\n    #1 0x555dd33ef1b8 in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) /home/marco/workspace/btc_bitcoin_core/src/./prevector.h:272:9\r\n    #2 0x555dd33ef1b8 in CScript::operator=(CScript&&) /home/marco/workspace/btc_bitcoin_core/src/./script/script.h:390\r\n    #3 0x555dd37a0aaa in a() /tmp/a.cpp:79:11\r\n",
      "created_at" : "2019-11-19T13:45:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555513897",
      "id" : 555513897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTUxMzg5Nw==",
      "updated_at" : "2019-11-19T13:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555513897",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does it go away if you remove the pragma?",
      "created_at" : "2019-11-19T13:50:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555516011",
      "id" : 555516011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTUxNjAxMQ==",
      "updated_at" : "2019-11-19T13:50:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555516011",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, with this diff it goes away:\r\n\r\n```diff\r\ndiff --git a/src/prevector.h b/src/prevector.h\r\nindex d307495fbe..a55bcb50fe 100644\r\n--- a/src/prevector.h\r\n+++ b/src/prevector.h\r\n@@ -14,7 +14,6 @@\r\n #include <cstddef>\r\n #include <type_traits>\r\n \r\n-#pragma pack(push, 1)\r\n /** Implements a drop-in replacement for std::vector<T> which stores up to N\r\n  *  elements directly (without heap allocation). The types Size and Diff are\r\n  *  used to store element counts, and can be any unsigned + signed type.\r\n@@ -522,6 +521,5 @@ public:\r\n         return item_ptr(0);\r\n     }\r\n };\r\n-#pragma pack(pop)\r\n \r\n #endif // BITCOIN_PREVECTOR_H\r\n",
      "created_at" : "2019-11-19T14:13:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555525385",
      "id" : 555525385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTUyNTM4NQ==",
      "updated_at" : "2019-11-19T14:13:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555525385",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I would prefer that solution, then. I'm not sure in how far unaligned integers are really UB in C++ (versus architecture/implementation defined), but it'd be better to avoid that for architectures that don't support (or have slow fallback paths for) unaligned reads/writes.",
      "created_at" : "2019-11-19T14:43:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555538652",
      "id" : 555538652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTUzODY1Mg==",
      "updated_at" : "2019-11-19T14:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555538652",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj John Regehr and Pascal Cuoq's excellent post [\"Undefined Behavior in 2017\"](https://blog.regehr.org/archives/1520) has a nice section on Alignment Violations. Highly recommended reading!",
      "created_at" : "2019-11-19T17:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17510#issuecomment-555617057",
      "id" : 555617057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17510",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTYxNzA1Nw==",
      "updated_at" : "2019-11-19T17:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555617057",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
