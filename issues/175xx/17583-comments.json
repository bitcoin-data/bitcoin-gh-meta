[
   {
      "author_association" : "MEMBER",
      "body" : "ping re: coin selection strategies @achow101 @meshcollider @kallewoof \r\n\r\nPR #14582 \"wallet: try -avoidpartialspends mode and use its result if fees do not change\" seems vaguely related.",
      "created_at" : "2019-11-26T10:31:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17583#issuecomment-558567090",
      "id" : 558567090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17583",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1ODU2NzA5MA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558567090/reactions"
      },
      "updated_at" : "2019-11-26T10:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558567090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Makes sense, concept ACK.\r\n\r\nA stupid approach would be to first select unspents from non malleable transactions and then, if necessary, select from remaining transactions?",
      "created_at" : "2019-12-14T16:18:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17583#issuecomment-565731094",
      "id" : 565731094,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17583",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NTczMTA5NA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565731094/reactions"
      },
      "updated_at" : "2019-12-14T16:18:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565731094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag indeed. It somewhat already does, in the sense that it will only try any unconfirmed coins if the txn can't be accomplished with confirmed coins.  So it could gain an extra layer of trying confirmed+unconfirmed-non-malleable first before trying all coins only as a last resort.  Has the nice property that it could be a default behaviour without risking disrupting anyone.",
      "created_at" : "2019-12-21T12:06:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17583#issuecomment-568176216",
      "id" : 568176216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17583",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODE3NjIxNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568176216/reactions"
      },
      "updated_at" : "2019-12-21T12:06:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568176216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "At this point, I don't think we need to explicitly address this case anymore.\r\nMeanwhile, we generally create segwit change by default, except when we pay a recipient that explicitly requested payment to a legacy output and match the type for the change output. We also already avoid unconfirmed change in the initial coin selection pass, so having special logic to deprioritize unconfirmed P2PKH change in coin selection feels like unnecessary additional complexity for an increasingly rare case: it would only be relevant when we need to spend unconfirmed change, but have multiple unconfirmed change outputs of which some are non-segwit and some are segwit.\r\n\r\nIf we do add a reliability score next to the waste score in coin selection, we should consider third-party malleability, though.\r\n \r\ncc: @josibake ",
      "created_at" : "2022-10-26T20:08:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17583#issuecomment-1292597021",
      "id" : 1292597021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17583",
      "node_id" : "IC_kwDOABII585NC3cd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1292597021/reactions"
      },
      "updated_at" : "2022-10-26T20:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1292597021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   }
]
