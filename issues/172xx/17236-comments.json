[
   {
      "author_association" : "MEMBER",
      "body" : "All you need is the rpc auth (not the whole datadir), then you can get the version as described in https://github.com/bitcoin/bitcoin/blob/master/doc/JSON-RPC-interface.md#versioning",
      "created_at" : "2019-10-24T02:42:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-545716858",
      "id" : 545716858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTcxNjg1OA==",
      "updated_at" : "2019-10-24T02:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545716858",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "But for the RPC auth you need the datadir right?\r\nAt least you need te specify it every time when you use the non default one with bitcoin-cil.",
      "created_at" : "2019-10-24T11:58:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-545884099",
      "id" : 545884099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTg4NDA5OQ==",
      "updated_at" : "2019-10-24T11:58:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545884099",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If it is running *and* you know the datadir, and assuming they use cookie auth, you can use RPC to query the version. Other cases (not currently running, datadir unknown, custom user/password auth) are more difficult.\r\n\r\nThe version from RPC is useful for sanity-checking the version when your application launches (and is already installed and attuned to a bitcoin core installation), to detect whether the user has upgraded behind your back.\r\n\r\n> but is there a way to acquire the version from the data folder somehow?\r\n\r\nA datadir at rest doesn't have a version. Although there have been some incompatible changes with regard to data files, such as block index upgrades, usually they tend to be compatible through a range of versions.\r\n\r\nI think it's more useful to look for installed version(s) of bitcoin core, and check their version, not to reason from the datadir.\r\n\r\n> In that case, is it possible to recognize programmatically her custom data folder if she's using one?\r\n\r\nNot in general, there are many ways to pass a custom data directory.\r\n\r\nIt's possible to mimic bitcoin d/-qt's own logic to find the default data directory. This is platform specific. E.g., for UNIX, default to `~/.bitcoin`, look for a `bitcoin.conf` there, there might be a `datadir=...` there that points somewhere else.\r\n\r\nBut it's not possible this way to find out if someone happens to specify a non-standard datadir through `-datadir=...` or `-conf=...` (with a custom datadir) on the command line from a script or init task.\r\n\r\nAs there is no 'perfect' way to detect this I think it'd be best to look at some of the hints and based on those, ask the user at install time, whether they provide an existing install of bitcoin core (specifying the data directory if it's not the default one, let them check the auto-detected values) or want to install a new one.",
      "created_at" : "2019-10-24T17:51:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-546029616",
      "id" : 546029616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjAyOTYxNg==",
      "updated_at" : "2019-10-24T19:10:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546029616",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> But it's not possible this way to find out if someone happens to specify a non-standard datadir through -datadir=... or -conf=... (with a custom datadir) on the command line from a script or init task.\r\n\r\nA quirky way on UNIX systems would be to parse `ps aux | grep bitcoind`. Then you could get the -conf and -datadir parameter if you have sufficient permissions",
      "created_at" : "2019-10-24T18:42:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-546050128",
      "id" : 546050128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjA1MDEyOA==",
      "updated_at" : "2019-10-24T18:42:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546050128",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It is possible to have multiple datadirs in different locations, so I'd advise against using an assumed datadir without asking the user",
      "created_at" : "2019-10-24T19:08:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-546059943",
      "id" : 546059943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjA1OTk0Mw==",
      "updated_at" : "2019-10-24T19:08:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546059943",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "to make things worse, if you go around looking for datadirs, here might be datadirs for altcoins that are difficult to distinguish from bitcoin's",
      "created_at" : "2019-10-24T20:10:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-546082458",
      "id" : 546082458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjA4MjQ1OA==",
      "updated_at" : "2019-10-24T20:10:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546082458",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thank you for the replies! In summary: there's no best practice, but numerous approaches and ideas with different tradeoffs, which if someone finds this thread should be able to evaluate. While I believe we did not fully exhausted the topic, we explored it to a reasonable degree and maybe it's better to not waste more time of this repo's devs with this, so closing.",
      "created_at" : "2019-10-24T23:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17236#issuecomment-546137763",
      "id" : 546137763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17236",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjEzNzc2Mw==",
      "updated_at" : "2019-10-24T23:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546137763",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/9156103?v=4",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "node_id" : "MDQ6VXNlcjkxNTYxMDM=",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   }
]
