[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I think the \"Users of this module must hold an ECCVerifyHandle.\" message is unclear, doesn't provide context.\r\nwhat about a more direct \"secp256k1_context_verify must be initialized to use CPubKey\"",
      "created_at" : "2019-10-28T10:06:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17275#issuecomment-546877192",
      "id" : 546877192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0Njg3NzE5Mg==",
      "updated_at" : "2019-10-28T10:06:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546877192",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj \r\n\r\nI've now changed to the suggested wording.\r\n\r\nThe old wording was taken from here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/773026044f9d87462de4809fbb339e42c52d0a76/src/pubkey.h#L227-L227\r\n\r\nPlease re-review :)",
      "created_at" : "2019-10-28T15:10:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17275#issuecomment-546992379",
      "id" : 546992379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0Njk5MjM3OQ==",
      "updated_at" : "2019-10-28T15:10:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546992379",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake No longer waiting for author? :)",
      "created_at" : "2019-10-29T23:44:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17275#issuecomment-547677260",
      "id" : 547677260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzY3NzI2MA==",
      "updated_at" : "2019-10-29T23:44:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547677260",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj Would you mind reviewing? :)",
      "created_at" : "2019-11-14T09:25:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17275#issuecomment-553800866",
      "id" : 553800866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MzgwMDg2Ng==",
      "updated_at" : "2019-11-14T09:25:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553800866",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it would be good to have these assertions in.\r\n\r\nWithout these it is possible for someone to mess up and have a NULL `secp256k1_context_verify` passed to the `secp256k1`-functions (by forgetting the `ECCVerifyHandle` pre-conditiion).\r\n\r\nConsider the following example:\r\n\r\n```\r\nbool CPubKey::IsFullyValid() const {\r\n    if (!IsValid())\r\n        return false;\r\n    secp256k1_pubkey pubkey;\r\n    return secp256k1_ec_pubkey_parse(secp256k1_context_verify, &pubkey, vch, size());\r\n}\r\n```\r\n\r\nThat function will return also in cases where `secp256k1_context_verify == nullptr`.\r\n\r\nI think it would be good to guard against those sharp edges by adding the suggested assertions :)\r\n\r\nIn this case:\r\n\r\n```\r\nbool CPubKey::IsFullyValid() const {\r\n    if (!IsValid())\r\n        return false;\r\n    secp256k1_pubkey pubkey;\r\n    assert(secp256k1_context_verify && \"secp256k1_context_verify must be initialized to use CPubKey.\");\r\n    return secp256k1_ec_pubkey_parse(secp256k1_context_verify, &pubkey, vch, size());\r\n}\r\n```\r\n\r\n",
      "created_at" : "2019-12-06T18:06:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17275#issuecomment-562678519",
      "id" : 562678519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MjY3ODUxOQ==",
      "updated_at" : "2019-12-06T18:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562678519",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
