{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "# Introduction \r\n\r\nAs discussed with @laanwj on IRC: \r\n\r\n- PID file creation was never enabled for Windows, as the `pid_t` filetype is not available for it. However, the WIN32 API contains the header [`Processthreadsapi.h`](https://github.com/CodeShark/x86_64-w64-mingw32/blob/master/include/processthreadsapi.h) which in turn contains the function [`GetCurrentProcessId()`](https://docs.microsoft.com/en-gb/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentprocessid). ~~This function is called at a higher level by [`_getpid()`](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/getpid?view=vs-2017)~~ EDIT: `_getpid()` is not available to the MSVC compiler used in the AppVeyor build. As a result, I have changed the function call to`GetCurrentProcessId()`, which performs the same function and is available to both MinGW & MSVC.\r\nThis allows one to capture the PID in Windows, without any additional includes - the above function is already available.\r\n\r\n- Within this PR, I have added a separate line that calls `GetCurrentProcessId()` in the case of a WIN compilation, and the usual `getpid()` otherwise. All code blocks processing PID file logic that avoid WIN32 have been changed to consider it. I have also updated the preprocessor definitions in `libbitcoin_server.vcxproj.in` to suppress a warning related to `std::strerror` for the MSVC build, that was causing the AppVeyor build to fail (see @fanquake comment below).\r\n\r\n# Rationale\r\n- Consistency between OS's running Bitcoin\r\n    - Applications which build off of `bitcoind`, such as novel front-end clients, often need access to the PID in order to control the daemon. Instead of designing some alternate way of doing this for one system, it should be consistent between all of them.\r\n\r\n\r\nIn collaboration with @joernroeder",
   "closed_at" : "2019-02-25T12:21:03Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15456/comments",
   "created_at" : "2019-02-21T11:47:27Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15456/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/15456",
   "id" : 412885128,
   "labels" : [
      {
         "color" : "884400",
         "default" : false,
         "id" : 234877,
         "name" : "Windows",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15456/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MjU0OTkxOTYy",
   "number" : 15456,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/15456.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15456",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/15456.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15456"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Enable PID file creation on WIN",
   "updated_at" : "2019-02-25T12:21:03Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15456",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/6988731?v=4",
      "events_url" : "https://api.github.com/users/riordant/events{/privacy}",
      "followers_url" : "https://api.github.com/users/riordant/followers",
      "following_url" : "https://api.github.com/users/riordant/following{/other_user}",
      "gists_url" : "https://api.github.com/users/riordant/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/riordant",
      "id" : 6988731,
      "login" : "riordant",
      "node_id" : "MDQ6VXNlcjY5ODg3MzE=",
      "organizations_url" : "https://api.github.com/users/riordant/orgs",
      "received_events_url" : "https://api.github.com/users/riordant/received_events",
      "repos_url" : "https://api.github.com/users/riordant/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/riordant/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/riordant/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/riordant"
   }
}
