[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It might be useful to test `getaddressesbyaccount` in 0.17.1 with `-deprecatedrpc=accounts`, to see if that is slow as well. \r\n\r\nJust comparing [`getaddressesbyaccount` in 0.16.3](https://github.com/bitcoin/bitcoin/blob/v0.16.3/src/wallet/rpcwallet.cpp#L393-L401) and [`getaddressesbylabel` in 0.17.1](https://github.com/bitcoin/bitcoin/blob/v0.17.1/src/wallet/rpcwallet.cpp#L4299-L4305), I don't see what would make the new version O(N^2), although it is returning more data so I would expect it to be somewhat slower.\r\n\r\nIf I were going to try to optimize this code, I think I might start by adding a UniValue move constructor, and pushKV overload that can move from std::string and UniValue arguments instead of copying. It looks like all this code is doing is iterating over a map and building a giant UniValue.",
      "created_at" : "2019-02-20T22:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15447#issuecomment-465773948",
      "id" : 465773948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15447",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NTc3Mzk0OA==",
      "updated_at" : "2019-02-20T22:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/465773948",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Related #14765?",
      "created_at" : "2019-02-21T14:24:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15447#issuecomment-466017873",
      "id" : 466017873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15447",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NjAxNzg3Mw==",
      "updated_at" : "2019-02-21T14:24:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/466017873",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Related #14765?\r\n\r\nGood find, #14765 completely explains this issue. The switch from `push_back` to `pushKV` makes `getaddressesbylabel` O(N^2). Using `__pushKV` instead would fix it.",
      "created_at" : "2019-02-21T15:14:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15447#issuecomment-466036876",
      "id" : 466036876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15447",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NjAzNjg3Ng==",
      "updated_at" : "2019-02-21T15:14:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/466036876",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is annoying but not a blocker for 0.18.0 release imo (it's not a regression in 0.18 after all), moving the milestone.",
      "created_at" : "2019-03-04T11:50:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15447#issuecomment-469225016",
      "id" : 469225016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15447",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2OTIyNTAxNg==",
      "updated_at" : "2019-03-04T11:50:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/469225016",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
