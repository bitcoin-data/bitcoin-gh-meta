{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Currently, using the getcoins.py with a custom signet executes successfully and shows the transfer of 0.001 testBTC as complete, however for obvious reasons, it should not. In fact, upon verification it does not actually execute the transaction, but rather gives the output that it did, as shown below which can be misleading:\r\n\r\n```\r\n[nikhilb@nikhil-PC bitcoin]$ echo $datadir\r\n/home/nikhilb/signet-custom\r\n[nikhilb@nikhil-PC bitcoin]$ contrib/signet/getcoins.py -- -datadir=$datadir\r\nPayment of 0.00100000 BTC sent with txid dd22c7d996e95f3e5baf20f73140d517ff48f1b26d0e4fefd61e3c37991b8f86\r\n[nikhilb@nikhil-PC bitcoin]$ bitcoin-cli -datadir=$datadir getrawtransaction dd22c7d996e95f3e5baf20f73140d517ff48f1b26d0e4fefd61e3c37991b8f86\r\nerror code: -5\r\nerror message:\r\nNo such mempool or blockchain transaction. Use gettransaction for wallet transactions.\r\n[nikhilb@nikhil-PC bitcoin]$ bitcoin-cli -datadir=$datadir gettransaction dd22c7d996e95f3e5baf20f73140d517ff48f1b26d0e4fefd61e3c37991b8f86\r\nerror code: -5\r\nerror message:\r\nInvalid or non-wallet transaction id\r\n\r\n```\r\nThis PR adds a sanity check for custom signet by comparing the current network's first block hash (the block after the genesis block) with global signet's respective block hash (since all signet networks share the same genesis block) and if a custom network is detected, the user is prompted to either work on the global signet or setup their own faucet.\r\n\r\nThe PR was checked to be working successfully, giving the output as below:\r\n\r\n```\r\n[nikhilb@nikhil-PC bitcoin]$ git checkout update_signet_getcoins\r\nSwitched to branch 'update_signet_getcoins'\r\nYour branch is ahead of 'upstream/master' by 1 commit.\r\n  (use \"git push\" to publish your local commits)\r\n[nikhilb@nikhil-PC bitcoin]$ contrib/signet/getcoins.py -- -datadir=$datadir\r\nThe global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet for the same.\r\n\r\nYou can have a look here for setting up your own faucet: https://en.bitcoin.it/wiki/Signet\r\n\r\n```",
   "closed_at" : "2021-08-23T17:19:40Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 15,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565/comments",
   "created_at" : "2021-07-27T20:24:23Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565",
   "id" : 954238889,
   "labels" : [
      {
         "color" : "ffffee",
         "default" : false,
         "description" : null,
         "id" : 231994551,
         "name" : "Scripts and tools",
         "node_id" : "MDU6TGFiZWwyMzE5OTQ1NTE=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0Njk4MTY1MjIz",
   "number" : 22565,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/22565.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/22565.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[script] signet's getcoins.py improvements",
   "updated_at" : "2021-08-23T17:19:40Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
      "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
      "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
      "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
      "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/NikhilBartwal",
      "id" : 42388668,
      "login" : "NikhilBartwal",
      "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
      "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
      "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
      "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/NikhilBartwal"
   }
}
