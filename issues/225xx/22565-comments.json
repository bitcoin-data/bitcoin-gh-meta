[
   {
      "author_association" : "NONE",
      "body" : "In addition to the above, since the faucet limit is once per 24 hrs for each IP address (for the script), getcoins.py can only be used once for each IP. However, using it twice gives a vague output like this:\r\n\r\n```\r\n[nikhilb@nikhil-PC bitcoin]$ contrib/signet/getcoins.py \r\nCaptcha required (reload page)\r\n\r\n```\r\nIt would be better if the output provided is something on the lines of:\r\n```\r\nDaily limit exhausted for signet faucet. Please try again after 24hrs\r\n```\r\nWill be pushing a commit soon for the doc update as well as a cleaner error :)",
      "created_at" : "2021-07-27T20:41:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-887820382",
      "id" : 887820382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII58406xBe",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T09:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887820382",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Currently, there are some scenarios where the faucet transaction can fail, some of which are:\r\n\r\n* If the script is run with the same IP within 24hrs (Status code 400)\r\n* If the specified faucet URL is invalid (Status code 404)\r\n* If the provided signet address is invalid (Status code 504)\r\n\r\nOriginally, the script outputs a vague `Captcha required (reload page)` error for the first scenario and some weird raw HTML for the other two, which seems confusing. It is, therefore, better to have explicit errors for them.",
      "created_at" : "2021-07-28T20:18:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-888593639",
      "id" : 888593639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII58409tzn",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T20:18:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888593639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679033508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679033508"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I find the following comment clearer: \r\n```python\r\n# Get the hash of the block at height 1 of the currently active signet chain\r\n```",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T10:35:57Z",
      "diff_hunk" : "@@ -5,18 +5,34 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the first block hash for the current signet network",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679033508",
      "id" : 679033508,
      "line" : 24,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTAzMzUwOA==",
      "original_commit_id" : "dda15ee260eb4437c4392c5b0512ca1817a90092",
      "original_line" : 24,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 22,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679033508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679034751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679034751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: comment not needed",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T10:37:59Z",
      "diff_hunk" : "@@ -5,18 +5,34 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the first block hash for the current signet network\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        # Becomes true for custom signet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679034751",
      "id" : 679034751,
      "line" : 31,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTAzNDc1MQ==",
      "original_commit_id" : "dda15ee260eb4437c4392c5b0512ca1817a90092",
      "original_line" : 31,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 29,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679034751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679037279"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "[en.bitcoin.it/wiki/Signet](https://en.bitcoin.it/wiki/Signet) only lists two faucet repositories, but does not provide setup instructions. Might be better to drop this message.",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T10:42:01Z",
      "diff_hunk" : "@@ -5,18 +5,34 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the first block hash for the current signet network\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        # Becomes true for custom signet\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet for the same.\\n')\n+        print('You can have a look here for setting up your own faucet: https://en.bitcoin.it/wiki/Signet')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037279",
      "id" : 679037279,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTAzNzI3OQ==",
      "original_commit_id" : "dda15ee260eb4437c4392c5b0512ca1817a90092",
      "original_line" : 33,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 31,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679037279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037579"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679037579"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "should be in the first commit",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T10:42:31Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@\n         exit()\n     if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n         # Becomes true for custom signet\n-        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet for the same.\\n')\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet to use this functionality.\\n')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037579",
      "id" : 679037579,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTAzNzU3OQ==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 32,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 30,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679037579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679041545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679041545"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This catch-all could have a broader error message. It's not always the transaction that can't be processed.\r\n\r\nMaybe `The request could not be processed.` and then print the server response.",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T10:48:59Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 504:\n+    print('The specified signet address is not valid. Please check it and try again.')\n+else:\n+    print('Unfortunately, the transaction could not be processed. Please check all arguments and try again.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679041545",
      "id" : 679041545,
      "line" : 64,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTA0MTU0NQ==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 64,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 54,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679041545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679049280"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The faucet should return [\"429 Too Many Requests\"](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429) which indicates rate-limiting. Returning \"400 Bad Request\" is incorrect HTTP. [Could be changed here](https://github.com/kallewoof/bitcoin-faucet/blob/8575d3dc38341561551635793e892be913e3a27d/src/index.ts#L188).\r\n",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-07-29T11:01:15Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280",
      "id" : 679049280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTA0OTI4MA==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 55,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-03T10:00:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679049280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679052084"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The faucet returns \"400 Bad Request\" in [multiple places](https://github.com/kallewoof/bitcoin-faucet/blob/8575d3dc38341561551635793e892be913e3a27d/src/index.ts). So status 400 doesn't have to be rate limiting. Better not match on it.",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T11:06:01Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052084",
      "id" : 679052084,
      "in_reply_to_id" : 679049280,
      "line" : 57,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTA1MjA4NA==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 57,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 47,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679052084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679052302"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure about printing `address not valid` for a status code that should be `504 Gateway Timeout`. There might be different reasons for a 504.",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T11:06:24Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 504:\n+    print('The specified signet address is not valid. Please check it and try again.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052302",
      "id" : 679052302,
      "line" : 62,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTA1MjMwMg==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 62,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 52,
      "pull_request_review_id" : 717937382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T11:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679052302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree with most of the comments by 0xb10c. Adding few more things which may help in improving this script:\r\n\r\n>In addition to the above, since the faucet limit is once per 24 hrs for each IP address, getcoins.py can only be used once for each IP. However, using it twice gives a vague output like this:\r\nCaptcha required (reload page)\r\n\r\n> It would be better if the output provided is something on the lines of:\r\nDaily limit exhausted for signet faucet. Please try again after 24hrs\r\n\r\nI think there is no limit and users don't need to wait for 24 hours. They just need to enter captcha or use new IP. As a user or dev I would solve this problem with one of the below solutions:\r\n\r\n1. Use new IP for each request. Maybe new tor circuit while using `torsocks`.\r\n2. Show captcha image with python code.\r\n3. Not use script. Open website in browser, enter captcha and get some coins.",
      "created_at" : "2021-07-29T11:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889056047",
      "id" : 889056047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5840_esv",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-29T12:59:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889056047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think there is no limit and users don't need to wait for 24 hours. They just need to enter captcha or use new IP. As a user or dev I would solve this problem with one of the below solutions:\r\n> * Use new IP for each request. Maybe new tor circuit while using `torsocks`.\r\n> * Show captcha image with python code.\r\n> * Not use script. Open website in browser with new IP and get some coins.\r\n\r\nKalle Alm has implemented the rate-limiting for a reason. There is no need to game these limits or to make the script more complex than it has to be (with e.g. tor or rendering the captcha SVGs via python)...   ",
      "created_at" : "2021-07-29T12:35:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889083726",
      "id" : 889083726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5840_ldO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-29T12:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889083726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> There is no need to game these limits or to make the script more complex than it has to be (with e.g. tor or rendering the captcha SVGs via python)\r\n\r\nThen maybe 3 can be used. And no need to mislead users that they should wait for 24 hours.",
      "created_at" : "2021-07-29T12:48:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889113739",
      "id" : 889113739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5840_syL",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-29T12:51:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889113739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679149658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679149658"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\nwebbrowser.open('https://signetfaucet.com/', new = 1)\r\n```",
      "commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "created_at" : "2021-07-29T13:27:36Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679149658",
      "id" : 679149658,
      "line" : 58,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTE0OTY1OA==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 58,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 48,
      "pull_request_review_id" : 718091931,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-29T13:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679149658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689416"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679689416"
         }
      },
      "author_association" : "NONE",
      "body" : "Sure, block height makes sense :)",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T06:48:55Z",
      "diff_hunk" : "@@ -5,18 +5,34 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the first block hash for the current signet network",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689416",
      "id" : 679689416,
      "in_reply_to_id" : 679033508,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY4OTQxNg==",
      "original_commit_id" : "dda15ee260eb4437c4392c5b0512ca1817a90092",
      "original_line" : 24,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718769493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T06:48:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679689416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679689684"
         }
      },
      "author_association" : "NONE",
      "body" : "Ah, alright!",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T06:49:20Z",
      "diff_hunk" : "@@ -5,18 +5,34 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the first block hash for the current signet network\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        # Becomes true for custom signet\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet for the same.\\n')\n+        print('You can have a look here for setting up your own faucet: https://en.bitcoin.it/wiki/Signet')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689684",
      "id" : 679689684,
      "in_reply_to_id" : 679037279,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY4OTY4NA==",
      "original_commit_id" : "dda15ee260eb4437c4392c5b0512ca1817a90092",
      "original_line" : 33,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718769767,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T06:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679689684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679690803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679690803"
         }
      },
      "author_association" : "NONE",
      "body" : "Yes, I agree that having such detailed error handling might be confusing and not the best to have. Maybe we can have an explicit one for 404 and a common one for all others for now.",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T06:51:29Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 504:\n+    print('The specified signet address is not valid. Please check it and try again.')\n+else:\n+    print('Unfortunately, the transaction could not be processed. Please check all arguments and try again.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679690803",
      "id" : 679690803,
      "in_reply_to_id" : 679041545,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY5MDgwMw==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 62,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718771103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T06:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679690803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679691227"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679691227"
         }
      },
      "author_association" : "NONE",
      "body" : "Makes sense :)",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T06:52:16Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 504:\n+    print('The specified signet address is not valid. Please check it and try again.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679691227",
      "id" : 679691227,
      "in_reply_to_id" : 679052302,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY5MTIyNw==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 60,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718771570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T06:52:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679691227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679693800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679693800"
         }
      },
      "author_association" : "NONE",
      "body" : "Actually, when 504 happens, it returns a huge chunk of raw HTML which might look weird if we print it as output.",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-07-30T06:57:47Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 504:\n+    print('The specified signet address is not valid. Please check it and try again.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679693800",
      "id" : 679693800,
      "in_reply_to_id" : 679052302,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY5MzgwMA==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 60,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718774839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-03T09:49:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679693800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679814438"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679814438"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There is no such thing. Error is misleading.\r\n\r\nUsed the same IP for these 2 transactions:\r\nhttps://explorer.bc-2.jp/tx/e18da1b1df25376ace8b75fcab9c54c72a601cb52c04568da2b52dfc61ebec18\r\nhttps://explorer.bc-2.jp/tx/17770112c1939212bcc20903a686335296a7713eb80654ac6ef411a96c747bbd\r\n\r\nJust had to open https://signetfaucet.com/ in browser and enter details.\r\n\r\nIf the error isn't changed, it's a NACK from me.",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T10:14:33Z",
      "diff_hunk" : "@@ -47,4 +47,14 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code is in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+else:\n+    print(f'Returned Error Code {res.status_code}\\n{res.text}\\n')\n+    print('Please check the provided arguments for their validity/any possible typo.')\n+    print('NOTE: The global faucet is currently rate-limited to 1 request per IP per 24hrs. If that\\'s the case, please try again after the time limit!')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679814438",
      "id" : 679814438,
      "line" : 60,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTgxNDQzOA==",
      "original_commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "original_line" : 60,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 50,
      "pull_request_review_id" : 718931558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T10:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679814438",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679844826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679844826"
         }
      },
      "author_association" : "NONE",
      "body" : "Actually, the faucet only asks for the captcha for the second (or more) time usage from the same IP, not the first time. Hence, the script in its current form cannot be used more than once in a while (as the faucet needs some hours before being used without captcha from the same IP).\r\n\r\nThat's why it kindof acts like a rate limiter (for the current script). The actual rate limits are 1 btc per hr or 500 requests per week. \r\n\r\nSo now, we can either state explicitly that the script currently supports single time usage only and they can use the browser manually for more or we would have to upgrade the script for captcha (which IMO would not be worth the maintenance). @0xB10C Would love to hear your thoughts",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T11:12:04Z",
      "diff_hunk" : "@@ -47,4 +47,14 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code is in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+else:\n+    print(f'Returned Error Code {res.status_code}\\n{res.text}\\n')\n+    print('Please check the provided arguments for their validity/any possible typo.')\n+    print('NOTE: The global faucet is currently rate-limited to 1 request per IP per 24hrs. If that\\'s the case, please try again after the time limit!')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679844826",
      "id" : 679844826,
      "in_reply_to_id" : 679814438,
      "line" : 60,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTg0NDgyNg==",
      "original_commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "original_line" : 60,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 50,
      "pull_request_review_id" : 718971043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T11:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679844826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679847709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679847709"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Just had to open https://signetfaucet.com/ in browser and enter details.\r\n\r\nThis is missing the point. This changes the `getcoins.py` script. You can't assume that because something works in the browser, it works in the script. The script might be used automatically where you can't open a browser.\r\n\r\nFurthermore, this is in an else branch and **only printed IF an error occurs**. Additionally, it clearly says **NOTE** informing the user that this might be the reason for failure.\r\n\r\nBased on https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-887820382 I think @NikhilBartwal ran into this problem when using the script and I think it's reasonable to mention it if an error occurs. ",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-07-30T11:17:21Z",
      "diff_hunk" : "@@ -47,4 +47,14 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code is in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+else:\n+    print(f'Returned Error Code {res.status_code}\\n{res.text}\\n')\n+    print('Please check the provided arguments for their validity/any possible typo.')\n+    print('NOTE: The global faucet is currently rate-limited to 1 request per IP per 24hrs. If that\\'s the case, please try again after the time limit!')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679847709",
      "id" : 679847709,
      "in_reply_to_id" : 679814438,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTg0NzcwOQ==",
      "original_commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "original_line" : 60,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718974678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T16:20:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679847709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679848687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679848687"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`getcoins.py` is a script for a reason. You can't assume that every machine has a GUI or even a browser installed. Especially if this script is used in some automated way.",
      "commit_id" : "abba5de3302ac1ce12ec1703b3370242c8612dcc",
      "created_at" : "2021-07-30T11:19:15Z",
      "diff_hunk" : "@@ -49,4 +49,16 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 400:\n+    print('You can use the global faucet only once per 24hrs. Please try again later.')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679848687",
      "id" : 679848687,
      "in_reply_to_id" : 679149658,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTg0ODY4Nw==",
      "original_commit_id" : "57c9ccc40ecb34b772a5d41265ad1aae0adf83c0",
      "original_line" : 56,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 718975919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T11:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679848687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-07-31T20:26:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-890400518",
      "id" : 890400518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841Em8G",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-31T20:26:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890400518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cc @kallewoof you might be interested in reviewing this as it touches your signet faucet.\r\n\r\nDo you have the time to work on the faucet (or review a PR to the faucet) at the moment? See e.g. https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280. ",
      "created_at" : "2021-08-03T10:08:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891717157",
      "id" : 891717157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841JoYl",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T10:08:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891717157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will review. Some general comments:\r\n\r\n* I am willing to change the faucet if it's warranted.\r\n* I do think 1 no-captcha request/day/IP is reasonable. The getcoins script gets you enough coins to get started, and I don't see a point in needing to do multiple requests each day, especially if you are automating the process.\r\n* If you're not automating the process, open a browser and answer the captcha. Assumably once you have coins, you won't have to re-do this.\r\n* I do think the getcoins script should inform the user of this fact, i.e. \"You need to open in a browser and solve the captcha to get multiple pay-outs in a single day.\"\r\n* And please don't use multiple IP's etc to get around the faucet rate limiting...\r\n",
      "created_at" : "2021-08-03T10:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891728383",
      "id" : 891728383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841JrH_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T10:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891728383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@kallewoof I agree with the points mentioned and the rate limiting. The PR, in its current form gives a somewhat better error message in case the Faucet Transaction fails. \r\n\r\nHowever, I think it might be even better if we could update the faucet to return a Code **'429 Too many requests'** error when accessing the faucet more than once with the script, as suggested by @0xB10C [here](https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280) so that we can provide a more cleaner message to use the browser for multiple pay-outs. \r\n\r\nLet me know your views on it :)",
      "created_at" : "2021-08-03T12:52:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891821877",
      "id" : 891821877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841KB81",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T12:52:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891821877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've changed to return code 429 in two places:\r\n* when user tries to get coins a *second* time without providing a captcha answer\r\n* when user tries to get coins so much that they hit the daily limit (even with captcha's)\r\n",
      "created_at" : "2021-08-04T00:08:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-892251308",
      "id" : 892251308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841Lqys",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-04T00:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892251308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for the update @kallewoof. I've added an explicit error message for multiple-payouts from script and a common one for other possible scenarios. Let me know if it needs any updates @0xB10C.",
      "created_at" : "2021-08-04T11:02:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-892566433",
      "id" : 892566433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841M3uh",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-04T11:02:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892566433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682776280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682776280"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "During the `getblockhash 1` RPC call `-signet` isn't set in `args.bitcoin_cli_args` yet. `bitcoin-cli` tries to reach the mainnet RPC port 8332. \r\n\r\nYou need to set the `-signet` argument before you do the first RPC call. Probably just move the following up:\r\n``` python\r\n if args.bitcoin_cli_args == []:\r\n        args.bitcoin_cli_args = ['-signet']\r\n```\r\n        \r\n(I guess this works fine if one sets `signet=1` in the `bitcoin.conf` file, but that can't be assumed to be the case)",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-08-04T16:29:43Z",
      "diff_hunk" : "@@ -5,18 +5,32 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the hash of the block at height 1 of the currently active signet chain\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet to use this functionality.\\n')\n+        exit()\n+\n if args.addr == '':\n     if args.bitcoin_cli_args == []:\n         args.bitcoin_cli_args = ['-signet']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682776280",
      "id" : 682776280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mjc3NjI4MA==",
      "original_commit_id" : "495007b1448eba86cb05e99d1ed458afcb3583f7",
      "original_line" : 36,
      "original_position" : 34,
      "original_start_line" : 35,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 722497189,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-04T16:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682776280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682974040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682974040"
         }
      },
      "author_association" : "NONE",
      "body" : "Absolutely! I guess I missed this edge case, thanks for mentioning! I've included this in the first commit and pushed the changes :)",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-08-04T21:31:56Z",
      "diff_hunk" : "@@ -5,18 +5,32 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the hash of the block at height 1 of the currently active signet chain\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet to use this functionality.\\n')\n+        exit()\n+\n if args.addr == '':\n     if args.bitcoin_cli_args == []:\n         args.bitcoin_cli_args = ['-signet']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682974040",
      "id" : 682974040,
      "in_reply_to_id" : 682776280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mjk3NDA0MA==",
      "original_commit_id" : "495007b1448eba86cb05e99d1ed458afcb3583f7",
      "original_line" : 36,
      "original_position" : 34,
      "original_start_line" : 35,
      "path" : "contrib/signet/getcoins.py",
      "position" : null,
      "pull_request_review_id" : 722757095,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-04T21:31:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682974040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42388668?v=4",
         "events_url" : "https://api.github.com/users/NikhilBartwal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NikhilBartwal/followers",
         "following_url" : "https://api.github.com/users/NikhilBartwal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NikhilBartwal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NikhilBartwal",
         "id" : 42388668,
         "login" : "NikhilBartwal",
         "node_id" : "MDQ6VXNlcjQyMzg4NjY4",
         "organizations_url" : "https://api.github.com/users/NikhilBartwal/orgs",
         "received_events_url" : "https://api.github.com/users/NikhilBartwal/received_events",
         "repos_url" : "https://api.github.com/users/NikhilBartwal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NikhilBartwal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NikhilBartwal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NikhilBartwal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682985352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682985352"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This looks better. Thanks for adding that last sentence.",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-08-04T21:53:41Z",
      "diff_hunk" : "@@ -48,4 +48,15 @@\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])\n     exit()\n-print(res.text)\n+\n+# Display the output as per the returned status code\n+if res:\n+    # When the return code is in between 200 and 400 i.e. successful\n+    print(res.text)\n+elif res.status_code == 404:\n+    print('The specified faucet URL does not exist. Please check for any server issues/typo.')\n+elif res.status_code == 429:\n+    print('The script does not allow for repeated transactions as the global faucet is rate-limitied to 1 request/IP/day. You can access the faucet website to get more coins manually')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682985352",
      "id" : 682985352,
      "line" : 59,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mjk4NTM1Mg==",
      "original_commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "original_line" : 59,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "contrib/signet/getcoins.py",
      "position" : 54,
      "pull_request_review_id" : 722770994,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-04T21:53:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682985352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/22565/commits/b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-08-04T21:54:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-893000366",
      "id" : 893000366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841Ohqu",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-04T21:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893000366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r683754875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683754875"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: When using a SigNet with a chain length of 1 (chain = only the Genesis block), this will fail with a `Block height out of range` error message. This might be confusing for someone unfamiliar with the `getcoins.py` code. If you happen to touch this again, you could add catch-all except handling here mentioning that checking the hash of the first block to determine the SigNet chain failed. This should also print the RPC response with `Block height out of range`.",
      "commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "created_at" : "2021-08-05T20:10:12Z",
      "diff_hunk" : "@@ -5,21 +5,36 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n+if args.bitcoin_cli_args == []:\n+    args.bitcoin_cli_args = ['-signet']\n+\n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the hash of the block at height 1 of the currently active signet chain\n+    try:\n+        curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\n+    except FileNotFoundError:\n+        print('The binary', args.cmd, 'could not be found.')\n+        exit()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#discussion_r683754875",
      "id" : 683754875,
      "line" : 32,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Mzc1NDg3NQ==",
      "original_commit_id" : "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
      "original_line" : 32,
      "original_position" : 30,
      "original_start_line" : 28,
      "path" : "contrib/signet/getcoins.py",
      "position" : 30,
      "pull_request_review_id" : 723754365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22565",
      "side" : "RIGHT",
      "start_line" : 28,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-05T20:32:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/683754875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK b0c8246cac97b7792a50afc22ef1fe39c5028e00\r\n",
      "created_at" : "2021-08-17T07:07:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-900049510",
      "id" : 900049510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841papm",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-17T07:07:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/900049510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "utACK b0c8246",
      "created_at" : "2021-08-18T14:10:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-901148544",
      "id" : 901148544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841tm-A",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-18T14:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901148544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/51032928?v=4",
         "events_url" : "https://api.github.com/users/arnabsen1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arnabsen1729/followers",
         "following_url" : "https://api.github.com/users/arnabsen1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arnabsen1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arnabsen1729",
         "id" : 51032928,
         "login" : "arnabsen1729",
         "node_id" : "MDQ6VXNlcjUxMDMyOTI4",
         "organizations_url" : "https://api.github.com/users/arnabsen1729/orgs",
         "received_events_url" : "https://api.github.com/users/arnabsen1729/received_events",
         "repos_url" : "https://api.github.com/users/arnabsen1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arnabsen1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arnabsen1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arnabsen1729"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "utACK b0c8246",
      "created_at" : "2021-08-18T14:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-901160345",
      "id" : 901160345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22565",
      "node_id" : "IC_kwDOABII5841tp2Z",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-18T14:34:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901160345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44579179?v=4",
         "events_url" : "https://api.github.com/users/prakash1512/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prakash1512/followers",
         "following_url" : "https://api.github.com/users/prakash1512/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prakash1512/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prakash1512",
         "id" : 44579179,
         "login" : "prakash1512",
         "node_id" : "MDQ6VXNlcjQ0NTc5MTc5",
         "organizations_url" : "https://api.github.com/users/prakash1512/orgs",
         "received_events_url" : "https://api.github.com/users/prakash1512/received_events",
         "repos_url" : "https://api.github.com/users/prakash1512/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prakash1512/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prakash1512/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prakash1512"
      }
   }
]
