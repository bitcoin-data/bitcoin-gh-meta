[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675650932"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675650932"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can also remove `m_replacement_transaction`, now that it is unused and inline `setConflicts.size()` again?",
      "commit_id" : "d76493ec2236e26f81dc081ea32067926c2ed55d",
      "created_at" : "2021-07-23T15:26:50Z",
      "diff_hunk" : "@@ -982,7 +982,6 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     const CAmount& nModifiedFees = ws.m_modified_fees;\n     const CAmount& nConflictingFees = ws.m_conflicting_fees;\n     const size_t& nConflictingSize = ws.m_conflicting_size;\n-    const bool fReplacementTransaction = ws.m_replacement_transaction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675650932",
      "id" : 675650932,
      "line" : 985,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTY1MDkzMg==",
      "original_commit_id" : "68959526f3d8d42fbbc60b29a3142789dccb3c75",
      "original_line" : 985,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 30,
      "pull_request_review_id" : 713842810,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-23T15:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675650932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK \r\n\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/126806362-5131232e-4ec3-44a5-bec2-05aafd030640.png)\r\n",
      "created_at" : "2021-07-23T15:32:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-885722039",
      "id" : 885722039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5840ywu3",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-23T15:38:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885722039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675668597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675668597"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "d76493ec2236e26f81dc081ea32067926c2ed55d",
      "created_at" : "2021-07-23T15:52:52Z",
      "diff_hunk" : "@@ -982,7 +982,6 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     const CAmount& nModifiedFees = ws.m_modified_fees;\n     const CAmount& nConflictingFees = ws.m_conflicting_fees;\n     const size_t& nConflictingSize = ws.m_conflicting_size;\n-    const bool fReplacementTransaction = ws.m_replacement_transaction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675668597",
      "id" : 675668597,
      "in_reply_to_id" : 675650932,
      "line" : 985,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTY2ODU5Nw==",
      "original_commit_id" : "68959526f3d8d42fbbc60b29a3142789dccb3c75",
      "original_line" : 985,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 30,
      "pull_request_review_id" : 713865793,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-23T15:52:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675668597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Asking the mempool statistics reference on IRC, @0xB10C pointed out to me there are between 2000 and 6000 replacements per day at the moment.",
      "created_at" : "2021-07-23T16:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-885743844",
      "id" : 885743844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5840y2Dk",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-23T16:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885743844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675678612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675678612"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: braces go on the same line\r\n\r\n```suggestion\r\n    if (setConflicts.size()) {\r\n```",
      "commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "created_at" : "2021-07-23T16:08:46Z",
      "diff_hunk" : "@@ -805,8 +803,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // If we don't hold the lock allConflicting might be incomplete; the\n     // subsequent RemoveStaged() and addUnchecked() calls don't guarantee\n     // mempool consistency for us.\n-    fReplacementTransaction = setConflicts.size();\n-    if (fReplacementTransaction)\n+    if (setConflicts.size())\n     {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675678612",
      "id" : 675678612,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTY3ODYxMg==",
      "original_commit_id" : "d76493ec2236e26f81dc081ea32067926c2ed55d",
      "original_line" : 807,
      "original_position" : 23,
      "original_start_line" : 806,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 713879434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-23T16:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675678612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675680974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675680974"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "created_at" : "2021-07-23T16:12:35Z",
      "diff_hunk" : "@@ -805,8 +803,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // If we don't hold the lock allConflicting might be incomplete; the\n     // subsequent RemoveStaged() and addUnchecked() calls don't guarantee\n     // mempool consistency for us.\n-    fReplacementTransaction = setConflicts.size();\n-    if (fReplacementTransaction)\n+    if (setConflicts.size())\n     {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675680974",
      "id" : 675680974,
      "in_reply_to_id" : 675678612,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTY4MDk3NA==",
      "original_commit_id" : "d76493ec2236e26f81dc081ea32067926c2ed55d",
      "original_line" : 807,
      "original_position" : 23,
      "original_start_line" : 806,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 713882457,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-23T16:12:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675680974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Out of interest, did anyone collect stats on how many txs are replacements? Edit: see previous comment\r\n\r\nAlthough 0xb10c shared there are 2000-6000 replacement tx per day , I don't think it matters for few reasons:\r\n\r\n1. Fee estimation is a meme IMO or maybe helps in UX for newbies. You cannot predict if a fee rate will confirm the transaction in next N blocks. Context: https://bitcoin.stackexchange.com/questions/105860/what-are-we-trying-to-predict-in-fee-estimation-and-why/106129\r\n2. If fee estimates are used, they should be available for all type of transactions and not based on % of txs per day. Rationale in PR https://github.com/bitcoin/bitcoin/pull/9519 was not good enough to change something. Not sure about the ACKs in that PR.\r\n3. If any % still matters to document in PR, it should be RBF per day because if a user did transaction with RBF enabled, fee estimate may be required by replacement tx. Total transaction per day around 200k so 20% is 40k RBF transactions. We shouldn't wait for usage or other node implementations/wallets to do better before doing things that make sense.",
      "created_at" : "2021-07-23T16:34:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-885759874",
      "id" : 885759874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5840y5-C",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-23T16:34:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885759874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Out of interest, did anyone collect stats on how many txs are replacements? Edit: see previous comment\r\n\r\n![image](https://user-images.githubusercontent.com/19157360/126814167-15aae792-cc2b-46a5-8445-bd37fdfca1a2.png)\r\n",
      "created_at" : "2021-07-23T16:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-885763670",
      "id" : 885763670,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5840y65W",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-23T16:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885763670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675959061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675959061"
         }
      },
      "author_association" : "MEMBER",
      "body" : "One risk I could see is that someone running with a full-rbf patch might pay a higher fee now. So I am wondering if this needs to be re-introduced with a full-rbf patch?",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-07-24T06:48:25Z",
      "diff_hunk" : "@@ -998,11 +993,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     m_pool.RemoveStaged(allConflicting, false, MemPoolRemovalReason::REPLACED);\n \n     // This transaction should only count for fee estimation if:\n-    // - it isn't a BIP 125 replacement transaction (may not be widely supported)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r675959061",
      "id" : 675959061,
      "line" : 903,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTk1OTA2MQ==",
      "original_commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "original_line" : 903,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 38,
      "pull_request_review_id" : 714211679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675959061/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-07T12:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675959061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Llevo el timon que es lo que inporta nadieme inpresionaEnviado desde mi HUAWEI Mate 20 Pro-------- Mensaje original --------De: Prayank ***@***.***>Fecha: vie., 23 jul. 2021 12:36 p. m.Para: bitcoin/bitcoin ***@***.***>CC: Subscribed ***@***.***>Asunto: Re: [bitcoin/bitcoin] Re-include RBF replacement txs in fee estimation (#22539)\r\n\r\nOut of interest, did anyone collect stats on how many txs are replacements? Edit: see previous comment\r\n\r\nAlthough 0xb10c shared there are 2000-6000 replacement tx per day , I don't think it matters for few reasons:\r\nFee estimation is a meme IMO or maybe helps in UX for newbies. You cannot predict if a fee rate will confirm the transaction in next N blocks. Context: https://bitcoin.stackexchange.com/questions/105860/what-are-we-trying-to-predict-in-fee-estimation-and-why/106129If fee estimates are used, they should be available for all type of transactions and not based on % of txs per day. Rationale in PR #9519 was not good enough to change something. Not sure about the ACKs in that PR.If any % still matters to document in PR, it should be RBF per day because if a user did transaction with RBF enabled, fee estimate may be required by replacement tx. Total transaction per day around 200k so 20% is 40k RBF transactions. We shouldn't wait for usage or other node implementations/wallets to do better before doing things that make sense.\r\n\r\nâYou are receiving this because you are subscribed to this thread.Reply to this email directly, view it on GitHub, or unsubscribe.",
      "created_at" : "2021-07-25T06:17:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-886153290",
      "id" : 886153290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII58400aBK",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-25T06:17:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886153290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/60577865?v=4",
         "events_url" : "https://api.github.com/users/josedanielrojaspixel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josedanielrojaspixel/followers",
         "following_url" : "https://api.github.com/users/josedanielrojaspixel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josedanielrojaspixel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josedanielrojaspixel",
         "id" : 60577865,
         "login" : "josedanielrojaspixel",
         "node_id" : "MDQ6VXNlcjYwNTc3ODY1",
         "organizations_url" : "https://api.github.com/users/josedanielrojaspixel/orgs",
         "received_events_url" : "https://api.github.com/users/josedanielrojaspixel/received_events",
         "repos_url" : "https://api.github.com/users/josedanielrojaspixel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josedanielrojaspixel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josedanielrojaspixel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josedanielrojaspixel"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK, due to reasons stated in OP",
      "created_at" : "2021-07-25T23:57:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-886278775",
      "id" : 886278775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII584004p3",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-25T23:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886278775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For what it's worth, I've been comparing running this on 2 pretty similar nodes for the past week. This didn't affect estimates, it must be because we are currently in a pretty low fee period.",
      "created_at" : "2021-07-29T09:11:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-888947157",
      "id" : 888947157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5840_EHV",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-29T09:11:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888947157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r680198364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/680198364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Not sure if we have this in the coding guidelines, but personally I'm not a fan of implicit int-to-bool casts. Could avoid it via e.g.\r\n```suggestion\r\n    if (setConflicts.size() > 0) {\r\n```\r\nor\r\n```suggestion\r\n    if (!setConflicts.empty()) {\r\n```",
      "commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "created_at" : "2021-07-30T20:21:03Z",
      "diff_hunk" : "@@ -805,9 +803,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // If we don't hold the lock allConflicting might be incomplete; the\n     // subsequent RemoveStaged() and addUnchecked() calls don't guarantee\n     // mempool consistency for us.\n-    fReplacementTransaction = setConflicts.size();\n-    if (fReplacementTransaction)\n-    {\n+    if (setConflicts.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r680198364",
      "id" : 680198364,
      "line" : 806,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDE5ODM2NA==",
      "original_commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "original_line" : 806,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 23,
      "pull_request_review_id" : 719434845,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-30T20:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/680198364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23075](https://github.com/bitcoin/bitcoin/pull/23075) (refactoring: Fee estimation functional test cleanups by darosior)\n* [#22674](https://github.com/bitcoin/bitcoin/pull/22674) (validation: mempool validation and submission for packages of 1 child + parents by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-08-10T20:26:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-896295043",
      "id" : 896295043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5841bGCD",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-30T01:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896295043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-08-31T14:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-909302989",
      "id" : 909302989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5842MtzN",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-31T14:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909302989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master after #22796 merge and addressed @theStack 's nit.",
      "created_at" : "2021-08-31T15:26:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-909341560",
      "id" : 909341560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5842M3N4",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-31T15:26:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909341560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK https://github.com/bitcoin/bitcoin/pull/22539/commits/5b29258076a3665100400768de8124be64eb4c6f",
      "created_at" : "2021-09-02T07:48:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-911333486",
      "id" : 911333486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5842Udhu",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T07:48:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911333486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@darosior sorry for making you rebase again, but this change is more straightforward than some other PRs in that regard.",
      "created_at" : "2021-09-10T06:45:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-916671292",
      "id" : 916671292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5842o0s8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-10T06:45:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916671292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-10T07:54:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-916708252",
      "id" : 916708252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5842o9uc",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-10T07:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916708252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased\r\n\r\n> sorry for making you rebase again, but this change is more straightforward\r\n\r\nSure",
      "created_at" : "2021-09-15T11:18:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-919929841",
      "id" : 919929841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII58421QPx",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T11:18:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919929841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/22539/commits/fab8ce071566033316189283684340424cb2f7d0\r\n\r\nAlthough I still have the same opinion: https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-885759874\r\n\r\nLets not restrict it for some transactions because of numbers.",
      "created_at" : "2021-09-16T15:23:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-921000599",
      "id" : 921000599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII58425VqX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-16T15:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/921000599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-23T10:40:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-925696581",
      "id" : 925696581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843LQJF",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T10:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925696581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks everyone for following, please bear with me one more time :)\r\n\r\nRebased on master to solve conflict, added a functional test demonstrating behaviour (similarly to #23074 ) and added release notes.",
      "created_at" : "2021-09-24T13:48:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-926638890",
      "id" : 926638890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843O2Mq",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T13:48:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926638890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So i've been plotting the estimates at each block on both a node with this patch and one without. Here are the results for the past 3 days (still running)\r\n\r\n![image](https://user-images.githubusercontent.com/22457751/134709338-fd2ac969-7c41-4df8-9599-377b8d456552.png)\r\n\r\nFeerate is low at the moment so there is hardly any divergence.\r\nData for generating this plot can be found here https://github.com/darosior/fee_estimation_hacks",
      "created_at" : "2021-09-24T16:31:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-926766465",
      "id" : 926766465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843PVWB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T16:31:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926766465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-28T22:12:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-929663668",
      "id" : 929663668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843aYq0",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-28T22:12:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/929663668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased following conflict with #22722 .\r\n\r\nHere is the plot of the estimates with and without this patch for the past 8 days:\r\n![image](https://user-images.githubusercontent.com/22457751/135310699-0c2a2737-246b-4811-bd5d-0035b11950f9.png)\r\n",
      "created_at" : "2021-09-29T16:31:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-930339499",
      "id" : 930339499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843c9qr",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T16:31:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930339499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK https://github.com/bitcoin/bitcoin/pull/22539/commits/3b613722f6b895d7b268b3f878fddfc888381226\r\n\r\n",
      "created_at" : "2021-09-30T04:09:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-930765191",
      "id" : 930765191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843elmH",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-30T04:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930765191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719418075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719418075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 4556406562:\r\n\r\nA nice followup could be to use `MiniWallet` and get rid of feature_fee_estimation.py's dependency on wallet in general? `send_self_transfer` allows specifying the utxo to spend and the feerate; you wouldn't have to do these  size calculations.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T13:40:30Z",
      "diff_hunk" : "@@ -155,6 +156,21 @@ def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n+\n+def send_tx(node, utxo, feerate):\n+    \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n+    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n+    tx_size = overhead + op + scriptsig + nseq + value + spk\n+    fee = tx_size * feerate\n+\n+    tx = CTransaction()\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n+    txid = node.sendrawtransaction(tx.serialize().hex())\n+\n+    return txid",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719418075",
      "id" : 719418075,
      "line" : 171,
      "node_id" : "PRRC_kwDOABII584q4XLb",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 171,
      "original_position" : 24,
      "original_start_line" : 160,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 24,
      "pull_request_review_id" : 767859977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719418075/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 160,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-30T15:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719418075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719480641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm a little confused about why there needs to be 10% of the transactions confirming with low feerate? Why can't the test be:\r\n\r\n- broadcast low fee transactions, don't let any of them confirm\r\n- RBF the low fee transactions with high fee ones, confirm them\r\n- assert that fee estimate only returns higher feerate\r\n\r\n(edit: ended up just writing it https://github.com/glozow/bitcoin/commit/10b89fc4bc8408a6b9341ff98fb910128f60ee6b)",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T14:44:34Z",
      "diff_hunk" : "@@ -279,11 +283,100 @@ def run_test(self):\n         self.log.info(\"Final estimates after emptying mempools\")\n         check_estimates(self.nodes[1], self.fees_per_kb)\n \n-        # check that the effective feerate is greater than or equal to the mempoolminfee even for high mempoolminfee\n-        self.log.info(\"Test fee rate estimation after restarting node with high MempoolMinFee\")\n+    def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719480641",
      "id" : 719480641,
      "line" : 319,
      "node_id" : "PRRC_kwDOABII584q4mdB",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 319,
      "original_position" : 132,
      "original_start_line" : 317,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 132,
      "pull_request_review_id" : 767859977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480641/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 317,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-30T15:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480641",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719494583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719494583"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This mines the replacement transactions from a previous iteration of the loop - is that intentional?",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T14:58:00Z",
      "diff_hunk" : "@@ -279,11 +283,100 @@ def run_test(self):\n         self.log.info(\"Final estimates after emptying mempools\")\n         check_estimates(self.nodes[1], self.fees_per_kb)\n \n-        # check that the effective feerate is greater than or equal to the mempoolminfee even for high mempoolminfee\n-        self.log.info(\"Test fee rate estimation after restarting node with high MempoolMinFee\")\n+    def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)\n+            # Mine the transactions on another node\n+            self.sync_mempools(wait=.1, nodes=[node, miner])\n+            for txid in txids_to_replace:\n+                miner.prioritisetransaction(txid=txid, fee_delta=-COIN)\n+            self.generate(miner, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719494583",
      "id" : 719494583,
      "line" : 324,
      "node_id" : "PRRC_kwDOABII584q4p23",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 324,
      "original_position" : 137,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 137,
      "pull_request_review_id" : 767859977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719494583/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T15:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719494583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719499839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719499839"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have a question about the desired behavior because it's a subtle thing that isn't mentioned here: with this PR, if a transaction is RBF'ed in our mempool, we add the replacement transaction and remove the original transaction(s) from the fee estimator. If the original transactions end up being mined in a block anyway (e.g. a miner had already started working on it before the replacement transaction was accepted), we lose that data in fee estimation. Is this what we want? If yes, maybe document?",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:03:27Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- Fee estimation now takes the feerate of replacement (RBF) transactions into",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719499839",
      "id" : 719499839,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII584q4rI_",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 7,
      "pull_request_review_id" : 767859977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719499839/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T15:10:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719499839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719516240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719516240"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah i could do that in https://github.com/bitcoin/bitcoin/pull/23075 once this one is merged :)",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:21:27Z",
      "diff_hunk" : "@@ -155,6 +156,21 @@ def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n+\n+def send_tx(node, utxo, feerate):\n+    \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n+    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n+    tx_size = overhead + op + scriptsig + nseq + value + spk\n+    fee = tx_size * feerate\n+\n+    tx = CTransaction()\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n+    txid = node.sendrawtransaction(tx.serialize().hex())\n+\n+    return txid",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719516240",
      "id" : 719516240,
      "in_reply_to_id" : 719418075,
      "line" : 171,
      "node_id" : "PRRC_kwDOABII584q4vJQ",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 171,
      "original_position" : 24,
      "original_start_line" : 160,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 24,
      "pull_request_review_id" : 768013017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719516240/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 160,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-30T15:21:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719516240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719517968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719517968"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I'm a little confused about why there needs to be 10% of the transactions confirming with low feerate?\r\n\r\nThere does not need to, i just wanted to simulate a more realistic scenario than just triggering the specific behaviour.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:23:25Z",
      "diff_hunk" : "@@ -279,11 +283,100 @@ def run_test(self):\n         self.log.info(\"Final estimates after emptying mempools\")\n         check_estimates(self.nodes[1], self.fees_per_kb)\n \n-        # check that the effective feerate is greater than or equal to the mempoolminfee even for high mempoolminfee\n-        self.log.info(\"Test fee rate estimation after restarting node with high MempoolMinFee\")\n+    def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719517968",
      "id" : 719517968,
      "in_reply_to_id" : 719480641,
      "line" : 319,
      "node_id" : "PRRC_kwDOABII584q4vkQ",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 319,
      "original_position" : 132,
      "original_start_line" : 317,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 132,
      "pull_request_review_id" : 768015399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719517968/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 317,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-30T15:23:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719517968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719520185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719520185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes it is. The point is to simulate a somewhat real life scenario \"broadcast a low fee tx, it does not confirm, it gets RBF'd, the replacement gets confirmed\". You would not RBF before a single block was mined",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:25:51Z",
      "diff_hunk" : "@@ -279,11 +283,100 @@ def run_test(self):\n         self.log.info(\"Final estimates after emptying mempools\")\n         check_estimates(self.nodes[1], self.fees_per_kb)\n \n-        # check that the effective feerate is greater than or equal to the mempoolminfee even for high mempoolminfee\n-        self.log.info(\"Test fee rate estimation after restarting node with high MempoolMinFee\")\n+    def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)\n+            # Mine the transactions on another node\n+            self.sync_mempools(wait=.1, nodes=[node, miner])\n+            for txid in txids_to_replace:\n+                miner.prioritisetransaction(txid=txid, fee_delta=-COIN)\n+            self.generate(miner, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719520185",
      "id" : 719520185,
      "in_reply_to_id" : 719494583,
      "line" : 324,
      "node_id" : "PRRC_kwDOABII584q4wG5",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 324,
      "original_position" : 137,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 137,
      "pull_request_review_id" : 768018382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719520185/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T15:25:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719520185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719523977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719523977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah I hadn't seen that - great!",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:29:37Z",
      "diff_hunk" : "@@ -155,6 +156,21 @@ def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n+\n+def send_tx(node, utxo, feerate):\n+    \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n+    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n+    tx_size = overhead + op + scriptsig + nseq + value + spk\n+    fee = tx_size * feerate\n+\n+    tx = CTransaction()\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n+    txid = node.sendrawtransaction(tx.serialize().hex())\n+\n+    return txid",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719523977",
      "id" : 719523977,
      "in_reply_to_id" : 719418075,
      "line" : 171,
      "node_id" : "PRRC_kwDOABII584q4xCJ",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 171,
      "original_position" : 24,
      "original_start_line" : 160,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 24,
      "pull_request_review_id" : 768023576,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719523977/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 160,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-30T15:29:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719523977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719524717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719524717"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Is this what we want?\r\n\r\nYes, because there is nothing we can do about that. And such a race sounds to be very improbable.. (are there still mining pools refusing RBFs for whatever reason?)\r\n\r\n>  If yes, maybe document?\r\n\r\nThis is not a change in behaviour, i don't think it should be in the changelog. Before this patch if you accept a replacement transaction in your mempool but the original tx ends up being mined you would lose the data anyways.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:30:25Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- Fee estimation now takes the feerate of replacement (RBF) transactions into",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719524717",
      "id" : 719524717,
      "in_reply_to_id" : 719499839,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII584q4xNt",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 7,
      "pull_request_review_id" : 768024581,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719524717/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T15:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719524717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> transaction is RBF'ed in our mempool, but the original transaction is included in a block\r\n\r\nThat's a very good point. I think with this patch we would keep the replacement tx in the buckets until it expires..",
      "created_at" : "2021-09-30T15:31:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-931431233",
      "id" : 931431233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843hINB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931431233/reactions"
      },
      "updated_at" : "2021-09-30T15:31:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931431233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think with this patch we would keep the replacement tx in the buckets until it expires..\r\n\r\nActually, I think it would be removed [here](https://github.com/bitcoin/bitcoin/blob/9013f23b0a6e0e450c4603f9d0f050ff10d552f6/src/txmempool.cpp#L503) when `removeForBlock()` calls `removeConflicts` [here](https://github.com/bitcoin/bitcoin/blob/9013f23b0a6e0e450c4603f9d0f050ff10d552f6/src/txmempool.cpp#L648) since it's conflicted out of the mempool. So that's fine, we'd just lose a data point.\r\n\r\nI ask because in some cases we keep the original transaction (e.g. we'll put it in `vExtraTxnForCompact` for reconstructing compact blocks), so I wondered if that's something we want here.",
      "created_at" : "2021-09-30T15:36:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-931435086",
      "id" : 931435086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843hJJO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931435086/reactions"
      },
      "updated_at" : "2021-09-30T15:44:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931435086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719531864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719531864"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ah ok, putting it that way makes sense",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-09-30T15:38:42Z",
      "diff_hunk" : "@@ -279,11 +283,100 @@ def run_test(self):\n         self.log.info(\"Final estimates after emptying mempools\")\n         check_estimates(self.nodes[1], self.fees_per_kb)\n \n-        # check that the effective feerate is greater than or equal to the mempoolminfee even for high mempoolminfee\n-        self.log.info(\"Test fee rate estimation after restarting node with high MempoolMinFee\")\n+    def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)\n+            # Mine the transactions on another node\n+            self.sync_mempools(wait=.1, nodes=[node, miner])\n+            for txid in txids_to_replace:\n+                miner.prioritisetransaction(txid=txid, fee_delta=-COIN)\n+            self.generate(miner, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719531864",
      "id" : 719531864,
      "in_reply_to_id" : 719494583,
      "line" : 324,
      "node_id" : "PRRC_kwDOABII584q4y9Y",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 324,
      "original_position" : 137,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 137,
      "pull_request_review_id" : 768034343,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719531864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T15:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719531864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720112054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720112054"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah you're right, we're already removing the original transactions. My mistake!",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-01T09:55:18Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- Fee estimation now takes the feerate of replacement (RBF) transactions into",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720112054",
      "id" : 720112054,
      "in_reply_to_id" : 719499839,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII584q7Am2",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 7,
      "pull_request_review_id" : 768777595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720112054/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T09:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720112054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Actually, I think it would be removed here when removeForBlock() calls removeConflicts here since it's conflicted out of the mempool. So that's fine, we'd just lose a data point.\r\n\r\nSo at first i did not think it was fine. We in this case call `removeTx` with `inBlock` set to `false`, ie counting this removal as a failure to confirm. This could have led to wrecked estimations because we would count a higher fee tx as failed.\r\n\r\nBut actually, we'd only count it as a failure if it didn't confirm for at least 12 blocks (for short stats, 24 and 42 for med and long). It's plenty of time for the replacement to have propagated and makes this type of race so unlikely that i think it's fine.\r\n\r\nThank you for raising this point!",
      "created_at" : "2021-10-01T10:06:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-932096391",
      "id" : 932096391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843jqmH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932096391/reactions"
      },
      "updated_at" : "2021-10-01T10:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932096391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@tryphe @theStack @josibake do you mind re-[reviewing-and-]ACKing? I think we are getting close to merge and no other conflicting PR reported by Drahbot seem closer to merge.",
      "created_at" : "2021-10-01T10:12:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-932100691",
      "id" : 932100691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5843jrpT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932100691/reactions"
      },
      "updated_at" : "2021-10-01T10:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932100691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720711850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720711850"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "To avoid manual tx size calculation with magic numbers, you could simply create the `CTransaction` first (without the fee), determine tx size via `len(tx.serialize())` and then subtract the fee. \r\n\r\n```suggestion\r\n    tx = CTransaction()\r\n    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\r\n    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN), P2SH_1)]\r\n    fee = len(tx.serialize()) * feerate\r\n    tx.vout[0].nValue -= fee\r\n```",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-02T18:22:21Z",
      "diff_hunk" : "@@ -155,6 +156,21 @@ def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n+\n+def send_tx(node, utxo, feerate):\n+    \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n+    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n+    tx_size = overhead + op + scriptsig + nseq + value + spk\n+    fee = tx_size * feerate\n+\n+    tx = CTransaction()\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720711850",
      "id" : 720711850,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII584q9TCq",
      "original_commit_id" : "45564065627ada5dfadff13bc32bc672a4edf152",
      "original_line" : 168,
      "original_position" : 21,
      "original_start_line" : 162,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 21,
      "pull_request_review_id" : 769516484,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720711850/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 162,
      "start_side" : "RIGHT",
      "updated_at" : "2021-10-02T18:34:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720711850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720712618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720712618"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Might be a bit shorter and more pythonic without exception:\r\n```suggestion\r\n            while utxos_to_respond:\r\n                u = utxos_to_respend.pop(0)\r\n                send_tx(node, u, high_feerate)\r\n```",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-02T18:29:12Z",
      "diff_hunk" : "@@ -271,6 +287,60 @@ def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)\n+            # Mine the transactions on another node\n+            self.sync_mempools(wait=.1, nodes=[node, miner])\n+            for txid in txids_to_replace:\n+                miner.prioritisetransaction(txid=txid, fee_delta=-COIN)\n+            self.generate(miner, 1)\n+            self.sync_blocks(wait=.1, nodes=[node, miner])\n+            # RBF the low-fee transactions\n+            while True:\n+                try:\n+                    u = utxos_to_respend.pop(0)\n+                    send_tx(node, u, high_feerate)\n+                except IndexError:\n+                    break",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720712618",
      "id" : 720712618,
      "line" : 332,
      "node_id" : "PRRC_kwDOABII584q9TOq",
      "original_commit_id" : "45564065627ada5dfadff13bc32bc672a4edf152",
      "original_line" : 332,
      "original_position" : 76,
      "original_start_line" : 327,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 145,
      "pull_request_review_id" : 769516484,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720712618/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 327,
      "start_side" : "RIGHT",
      "updated_at" : "2021-10-02T18:34:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720712618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917349"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh right since we use legacy txs in this test it's indeed much cleaner. However i'd like to not invalidate 4 ACKs on a cosmetic change. Do you mind if i make it a follow-up in #23075 ?",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-03T22:33:56Z",
      "diff_hunk" : "@@ -155,6 +156,21 @@ def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n+\n+def send_tx(node, utxo, feerate):\n+    \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n+    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n+    tx_size = overhead + op + scriptsig + nseq + value + spk\n+    fee = tx_size * feerate\n+\n+    tx = CTransaction()\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917349",
      "id" : 720917349,
      "in_reply_to_id" : 720711850,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII584q-FNl",
      "original_commit_id" : "45564065627ada5dfadff13bc32bc672a4edf152",
      "original_line" : 168,
      "original_position" : 21,
      "original_start_line" : 162,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 21,
      "pull_request_review_id" : 769701391,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917349/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 162,
      "start_side" : "RIGHT",
      "updated_at" : "2021-10-03T22:33:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917514"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed :man_facepalming: but same rationale as above, as ugly as it is i'd rather address it in #23075",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-03T22:35:30Z",
      "diff_hunk" : "@@ -271,6 +287,60 @@ def test_feerate_mempoolminfee(self):\n         high_val = 3*self.nodes[1].estimatesmartfee(1)['feerate']\n         self.restart_node(1, extra_args=[f'-minrelaytxfee={high_val}'])\n         check_estimates(self.nodes[1], self.fees_per_kb)\n+        self.restart_node(1)\n+\n+    def sanity_check_rbf_estimates(self, utxos):\n+        \"\"\"During 5 blocks, broadcast low fee transactions. Only 10% of them get\n+        confirmed and the remaining ones get RBF'd with a high fee transaction at\n+        the next block.\n+        The block policy estimator should return the high feerate.\n+        \"\"\"\n+        # The broadcaster and block producer\n+        node = self.nodes[0]\n+        miner = self.nodes[1]\n+        # In sat/vb\n+        low_feerate = 1\n+        high_feerate = 10\n+        # Cache the utxos of which to replace the spender after it failed to get\n+        # confirmed\n+        utxos_to_respend = []\n+        txids_to_replace = []\n+\n+        assert len(utxos) >= 250\n+        for _ in range(5):\n+            # Broadcast 45 low fee transactions that will need to be RBF'd\n+            for _ in range(45):\n+                u = utxos.pop(0)\n+                txid = send_tx(node, u, low_feerate)\n+                utxos_to_respend.append(u)\n+                txids_to_replace.append(txid)\n+            # Broadcast 5 low fee transaction which don't need to\n+            for _ in range(5):\n+                send_tx(node, utxos.pop(0), low_feerate)\n+            # Mine the transactions on another node\n+            self.sync_mempools(wait=.1, nodes=[node, miner])\n+            for txid in txids_to_replace:\n+                miner.prioritisetransaction(txid=txid, fee_delta=-COIN)\n+            self.generate(miner, 1)\n+            self.sync_blocks(wait=.1, nodes=[node, miner])\n+            # RBF the low-fee transactions\n+            while True:\n+                try:\n+                    u = utxos_to_respend.pop(0)\n+                    send_tx(node, u, high_feerate)\n+                except IndexError:\n+                    break",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917514",
      "id" : 720917514,
      "in_reply_to_id" : 720712618,
      "line" : 332,
      "node_id" : "PRRC_kwDOABII584q-FQK",
      "original_commit_id" : "45564065627ada5dfadff13bc32bc672a4edf152",
      "original_line" : 332,
      "original_position" : 76,
      "original_start_line" : 327,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 145,
      "pull_request_review_id" : 769704254,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917514/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 327,
      "start_side" : "RIGHT",
      "updated_at" : "2021-10-03T22:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720917514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724271453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724271453"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This can only increase the fees for anyone, but if it does it means that it was necessary (a higher feerate was needed in order to have this transaction go through). How could a full-rbf patch wrongly increase estimates?",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-07T15:04:20Z",
      "diff_hunk" : "@@ -998,11 +993,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     m_pool.RemoveStaged(allConflicting, false, MemPoolRemovalReason::REPLACED);\n \n     // This transaction should only count for fee estimation if:\n-    // - it isn't a BIP 125 replacement transaction (may not be widely supported)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724271453",
      "id" : 724271453,
      "in_reply_to_id" : 675959061,
      "line" : 903,
      "node_id" : "PRRC_kwDOABII584rK4Fd",
      "original_commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "original_line" : 903,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 38,
      "pull_request_review_id" : 774039154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724271453/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-07T15:04:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724271453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724941584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724941584"
         }
      },
      "author_association" : "MEMBER",
      "body" : "High-fee non-miner-policy txs (In this case full-rbf'ed) might fill your mempool, but never get confirmed, thus raising your estimates.\r\n\r\nThis is a general problem and I was just wondering if the patch should be re-introduced for full-rbf (or other similar policy changes in the future).",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-08T11:47:57Z",
      "diff_hunk" : "@@ -998,11 +993,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     m_pool.RemoveStaged(allConflicting, false, MemPoolRemovalReason::REPLACED);\n \n     // This transaction should only count for fee estimation if:\n-    // - it isn't a BIP 125 replacement transaction (may not be widely supported)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724941584",
      "id" : 724941584,
      "in_reply_to_id" : 675959061,
      "line" : 903,
      "node_id" : "PRRC_kwDOABII584rNbsQ",
      "original_commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "original_line" : 903,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 38,
      "pull_request_review_id" : 774914248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724941584/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-08T11:47:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724941584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724950415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724950415"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh for people running it without knowing that some miners do as well.\r\n\r\nI think stopping (again) to consider replacement transactions would be a step backward. However it could make sense for a full-RBF patch to stop considering replacement to not-opted-in transactions for fee estimation until the full-RBF policy is reasonably deployed on the network. Since we only implement explicit signaling it sounds like the complexity of doing so would be reasonable.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-08T12:02:25Z",
      "diff_hunk" : "@@ -998,11 +993,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n     m_pool.RemoveStaged(allConflicting, false, MemPoolRemovalReason::REPLACED);\n \n     // This transaction should only count for fee estimation if:\n-    // - it isn't a BIP 125 replacement transaction (may not be widely supported)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724950415",
      "id" : 724950415,
      "in_reply_to_id" : 675959061,
      "line" : 903,
      "node_id" : "PRRC_kwDOABII584rNd2P",
      "original_commit_id" : "4abe6aab798fcb9d80228d4e49844b96690bfa2f",
      "original_line" : 903,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 38,
      "pull_request_review_id" : 774926111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724950415/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-08T12:02:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724950415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724956773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724956773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this something that should be mentioned in the release notes at all? Given that less than 25% of txs are opt-in-rbf and way less than that are conflicts, this shouldn't have any significant effect on real-world fee estimation. See also your findings: https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-930339499\r\n\r\nAlso, it doesn't change the P2P protocol or is a network change. At most it would affect your local estimates, so if the notes are kept, the section headline could be adjusted.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-08T12:12:52Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724956773",
      "id" : 724956773,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584rNfZl",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 4,
      "pull_request_review_id" : 774934922,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724956773/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-08T12:12:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724956773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724963150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724963150"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> See also your findings: #22539 (comment)\r\n\r\nI expect this to be very different with a not so low fee market (replacement-aware fee estimation to constantly be slightly higher).\r\n\r\n> the section headline could be adjusted\r\n\r\nSure, what do you suggest? To be honest i was not sure what headline to use and since fee estimation is ubiquitous i figured it was a notable change, but happy to change it.",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-08T12:23:02Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724963150",
      "id" : 724963150,
      "in_reply_to_id" : 724956773,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584rNg9O",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 4,
      "pull_request_review_id" : 774943786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724963150/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-08T12:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724963150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724971313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724971313"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will show up in the section \"Policy\" (example: https://github.com/bitcoin/bitcoin/blob/master/doc/release-notes/release-notes-22.0.md#policy), but I think we never had a \"notable change\" policy section. Maybe \"Fee estimation changes\"?\r\n",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-08T12:34:39Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r724971313",
      "id" : 724971313,
      "in_reply_to_id" : 724956773,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584rNi8x",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 4,
      "pull_request_review_id" : 774956775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724971313/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-08T12:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/724971313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r729653566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729653566"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done here https://github.com/bitcoin/bitcoin/pull/23284",
      "commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "created_at" : "2021-10-15T09:09:09Z",
      "diff_hunk" : "@@ -0,0 +1,8 @@\n+Notable changes\n+===============\n+\n+P2P and network changes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r729653566",
      "id" : 729653566,
      "in_reply_to_id" : 724956773,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584rfaE-",
      "original_commit_id" : "3b613722f6b895d7b268b3f878fddfc888381226",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-22539.md",
      "position" : 4,
      "pull_request_review_id" : 780627095,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729653566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-15T09:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729653566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For what it's worth here is again another diagram for last ~2 wee\r\n![702743_705101](https://user-images.githubusercontent.com/22457751/137485633-9867e8ec-dbf1-48a1-969c-9354e8e7399b.png)\r\nks",
      "created_at" : "2021-10-15T12:19:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22539#issuecomment-944252254",
      "id" : 944252254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22539",
      "node_id" : "IC_kwDOABII5844SCVe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/944252254/reactions"
      },
      "updated_at" : "2021-10-15T12:19:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/944252254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
