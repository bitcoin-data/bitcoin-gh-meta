[
   {
      "author_association" : "NONE",
      "body" : "Blocks 91812 and 91722 coinbase spends cause that issue.\r\nI can confirm the observation.\r\nWhen the full scan reach deep down into the data at block 91721 and try to invalidate older blocks in DisconnectBlock\r\n... some memories came up, when digging way back into November 2010 :woman_shrugging: ",
      "created_at" : "2021-08-01T02:51:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890438290",
      "id" : 890438290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841EwKS",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T02:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890438290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78295570?v=4",
         "events_url" : "https://api.github.com/users/snpoold/events{/privacy}",
         "followers_url" : "https://api.github.com/users/snpoold/followers",
         "following_url" : "https://api.github.com/users/snpoold/following{/other_user}",
         "gists_url" : "https://api.github.com/users/snpoold/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/snpoold",
         "id" : 78295570,
         "login" : "snpoold",
         "node_id" : "MDQ6VXNlcjc4Mjk1NTcw",
         "organizations_url" : "https://api.github.com/users/snpoold/orgs",
         "received_events_url" : "https://api.github.com/users/snpoold/received_events",
         "repos_url" : "https://api.github.com/users/snpoold/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/snpoold/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/snpoold/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/snpoold"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Blocks 91812 and 91722 coinbase spends cause that issue.\r\n> I can confirm the observation.\r\n> When the full scan reach deep down into the data at block 91721 and try to invalidate older blocks in DisconnectBlock\r\n> ... some memories came up, when digging way back into November 2010 ð¤·ââï¸\r\n\r\nMaybe related to the overflow thing? https://bitcointalk.org/index.php?topic=822.0",
      "created_at" : "2021-08-01T03:45:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890442984",
      "id" : 890442984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841ExTo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T03:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890442984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3718063?v=4",
         "events_url" : "https://api.github.com/users/bg002h/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bg002h/followers",
         "following_url" : "https://api.github.com/users/bg002h/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bg002h/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bg002h",
         "id" : 3718063,
         "login" : "bg002h",
         "node_id" : "MDQ6VXNlcjM3MTgwNjM=",
         "organizations_url" : "https://api.github.com/users/bg002h/orgs",
         "received_events_url" : "https://api.github.com/users/bg002h/received_events",
         "repos_url" : "https://api.github.com/users/bg002h/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bg002h/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bg002h/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bg002h"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "These are the two BIP30 exceptions, where coinbases were overwritten.",
      "created_at" : "2021-08-01T05:32:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890454196",
      "id" : 890454196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841E0C0",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T05:32:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890454196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> These are the two BIP30 exceptions, where coinbases were overwritten.\r\n\r\nAlthough it would be nice if we could skip the detection by setting option` checkblocks=0` more gracefully and not error break and maybe just a hint to BIP30, what we hardcode anyway in IBD?  \r\n\r\n```diff \r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex d1dd4f472..49158b588 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -3980,8 +3980,13 @@\r\n         if (ShutdownRequested()) return true;\r\n     }\r\n-    if (pindexFailure)\r\n-        return error(\"VerifyDB(): *** coin database inconsistencies found (last %i blocks, %i good transactions before that)\\n\", chainstate.m_chain.Height() - pindexFailure->nHeight + 1, nGoodTransactions);\r\n+    if (pindexFailure) {\r\n+        if (pindexFailure->nHeight == 91722) {\r\n+            LogPrintf(\"VerifyDB(): skiping BIP30 exeption at height %d\\n\", pindexFailure->nHeight);\r\n+               } else {\r\n+            return error(\"VerifyDB(): *** coin database inconsistencies found (last %i blocks, %i accumulated good transactions vtx size before that)\\n\", chainstate.m_chain.Height() - pindexFailure->nHeight + 1, nGoodTransactions);\r\n+        }\r\n+    }\r\n\r\n```",
      "created_at" : "2021-08-01T10:23:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890491604",
      "id" : 890491604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841E9LU",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T10:23:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890491604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78295570?v=4",
         "events_url" : "https://api.github.com/users/snpoold/events{/privacy}",
         "followers_url" : "https://api.github.com/users/snpoold/followers",
         "following_url" : "https://api.github.com/users/snpoold/following{/other_user}",
         "gists_url" : "https://api.github.com/users/snpoold/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/snpoold",
         "id" : 78295570,
         "login" : "snpoold",
         "node_id" : "MDQ6VXNlcjc4Mjk1NTcw",
         "organizations_url" : "https://api.github.com/users/snpoold/orgs",
         "received_events_url" : "https://api.github.com/users/snpoold/received_events",
         "repos_url" : "https://api.github.com/users/snpoold/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/snpoold/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/snpoold/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/snpoold"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sure, this is a bug, and should be fixed. I'm just pointing out what it is related to.",
      "created_at" : "2021-08-01T14:27:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890530493",
      "id" : 890530493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841FGq9",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890530493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> These are the two BIP30 exceptions, where coinbases were overwritten.\r\n\r\nI see. Iâm rather glad to hear this is expected behavior! Is the code different when validating from\r\nGenesis to tip different than tip to Genesis (eg hard coded ~~deception~~ exception in IBD) or is it the over writing of a txid that makes it impossible to validate âbackwardsâ beyond a certain point? \r\n\r\nI canât see how this has any practical impact on the network (other than someone wanting to write  a click baity FUD hysteria ânewsâ article). Bitcoin is quirky like that. Things arenât always as simple as they seem. ",
      "created_at" : "2021-08-01T15:49:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890542786",
      "id" : 890542786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841FJrC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-02T15:05:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890542786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3718063?v=4",
         "events_url" : "https://api.github.com/users/bg002h/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bg002h/followers",
         "following_url" : "https://api.github.com/users/bg002h/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bg002h/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bg002h",
         "id" : 3718063,
         "login" : "bg002h",
         "node_id" : "MDQ6VXNlcjM3MTgwNjM=",
         "organizations_url" : "https://api.github.com/users/bg002h/orgs",
         "received_events_url" : "https://api.github.com/users/bg002h/received_events",
         "repos_url" : "https://api.github.com/users/bg002h/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bg002h/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bg002h/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bg002h"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is the code different when validating from\r\nGenesis to tip different than tip to Genesis (eg hard coded deception in IBD) or is it the over writing of a txid that makes it impossible to validate âbackwardsâ beyond a certain point?\r\n\r\nYes, there is special handling of the duplicate coinbase transactions in `ConnectBlock()`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1758-L1759\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1825-L1834\r\n\r\nThere is no such special handling in the analogous code `DisconnectBlock()` which checks that the ouputs of the transactions exist in the UTXO set:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1535-L1544\r\n\r\nWhich means that when `VerifyDB()` tries to rewind the effects of the blocks, it finds the inconsistency.",
      "created_at" : "2021-08-02T14:22:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-891069454",
      "id" : 891069454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841HKQO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-02T14:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891069454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This seems like a bug worth preserving for someone looking to cut their teeth on Core. Iâm just a physician with rather modest coding skills and this has even my interest piquedâ¦maybe someone more qualified (and/or less busy) can pick up this ball and run with it. \r\n\r\nAll that said, performance for checking all the blocks seems really rather good. I thought it would take a day or more, but it looks like it was gonna be about half that. Thereâs some deep magic going on to make this happen so quickly.  ",
      "created_at" : "2021-08-02T15:21:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-891114177",
      "id" : 891114177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
      "node_id" : "IC_kwDOABII5841HVLB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-02T15:21:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891114177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3718063?v=4",
         "events_url" : "https://api.github.com/users/bg002h/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bg002h/followers",
         "following_url" : "https://api.github.com/users/bg002h/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bg002h/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bg002h",
         "id" : 3718063,
         "login" : "bg002h",
         "node_id" : "MDQ6VXNlcjM3MTgwNjM=",
         "organizations_url" : "https://api.github.com/users/bg002h/orgs",
         "received_events_url" : "https://api.github.com/users/bg002h/received_events",
         "repos_url" : "https://api.github.com/users/bg002h/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bg002h/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bg002h/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bg002h"
      }
   }
]
