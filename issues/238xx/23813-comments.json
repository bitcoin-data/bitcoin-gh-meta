[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stratospher](https://github.com/bitcoin/bitcoin/pull/23813#pullrequestreview-1331193565), [Sjors](https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1462438231) |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-997235323) |\n| Stale ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/23813#pullrequestreview-838341011), [jonatack](https://github.com/bitcoin/bitcoin/pull/23813#pullrequestreview-867229332) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2021-12-18T16:24:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-997226154",
      "id" : 997226154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5847cHaq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997226154/reactions"
      },
      "updated_at" : "2023-03-09T17:10:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997226154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-12-18T17:31:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-997235323",
      "id" : 997235323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5847cJp7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997235323/reactions"
      },
      "updated_at" : "2021-12-18T17:31:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997235323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you rebase this on #23706? Otherwise it might get confusing...",
      "created_at" : "2021-12-20T02:39:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-997544082",
      "id" : 997544082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5847dVCS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997544082/reactions"
      },
      "updated_at" : "2021-12-20T02:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997544082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you rebase this on #23706? Otherwise it might get confusing...\r\n\r\nDone",
      "created_at" : "2021-12-20T21:16:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-998275782",
      "id" : 998275782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5847gHrG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998275782/reactions"
      },
      "updated_at" : "2021-12-20T21:16:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998275782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r772792931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772792931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I dropped the `warnings` field in 6f2133d3e6a9df23ba7922f51bdc17acd049e2e6, so this `assert` can't fail anymore...",
      "commit_id" : "5ed8de7a2a36b640442ab2b2b6ed494db116a49c",
      "created_at" : "2021-12-21T02:51:48Z",
      "diff_hunk" : "@@ -60,11 +65,30 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(self.nodes[0], short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)\n+        assert_equal(pruneheight, 248)\n+        # Ensure the block is actually pruned\n+        pruned_block = self.nodes[0].getblockhash(2)\n+        assert_raises_rpc_error(-1, \"Block not available (pruned data)\", self.nodes[2].getblock, pruned_block)\n+\n+        self.log.info(\"Fetch pruned block\")\n+        peers = self.nodes[2].getpeerinfo()\n+        assert_equal(len(peers), 1)\n+        peer_2_peer_0_id = peers[0][\"id\"]\n+        result = self.nodes[2].getblockfrompeer(pruned_block, peer_2_peer_0_id)\n+        self.wait_until(lambda: self.check_for_block(self.nodes[2], pruned_block), timeout=1)\n+        assert(not \"warnings\" in result)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r772792931",
      "id" : 772792931,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII584uD-Jj",
      "original_commit_id" : "5ed8de7a2a36b640442ab2b2b6ed494db116a49c",
      "original_line" : 90,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : 59,
      "pull_request_review_id" : 836973462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772792931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-21T02:51:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772792931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r773433182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/773433182"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "809b2afa02e5ab8a839306562e82434c218f7632",
      "created_at" : "2021-12-21T20:45:52Z",
      "diff_hunk" : "@@ -60,11 +65,30 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(self.nodes[0], short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)\n+        assert_equal(pruneheight, 248)\n+        # Ensure the block is actually pruned\n+        pruned_block = self.nodes[0].getblockhash(2)\n+        assert_raises_rpc_error(-1, \"Block not available (pruned data)\", self.nodes[2].getblock, pruned_block)\n+\n+        self.log.info(\"Fetch pruned block\")\n+        peers = self.nodes[2].getpeerinfo()\n+        assert_equal(len(peers), 1)\n+        peer_2_peer_0_id = peers[0][\"id\"]\n+        result = self.nodes[2].getblockfrompeer(pruned_block, peer_2_peer_0_id)\n+        self.wait_until(lambda: self.check_for_block(self.nodes[2], pruned_block), timeout=1)\n+        assert(not \"warnings\" in result)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r773433182",
      "id" : 773433182,
      "in_reply_to_id" : 772792931,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584uGade",
      "original_commit_id" : "5ed8de7a2a36b640442ab2b2b6ed494db116a49c",
      "original_line" : 90,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : null,
      "pull_request_review_id" : 837856887,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/773433182/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-21T20:45:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/773433182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-01-25T19:35:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1021538824",
      "id" : 1021538824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII584843II",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021538824/reactions"
      },
      "updated_at" : "2022-01-25T19:35:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021538824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased since #23706 was merged",
      "created_at" : "2022-01-25T19:56:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1021555258",
      "id" : 1021555258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII584847I6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021555258/reactions"
      },
      "updated_at" : "2022-01-25T19:56:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021555258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r792624849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792624849"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What block does \"the block\" refer to? The most recent block that's being fetched as part of the regular activity?\r\n\r\nMaybe this can be a bit shorter: \"Previously pruned blocks are only preserved until the next pruning event.\" (afaik this is true as long as the user doesn't change `-prune`)",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-26T13:17:32Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r792624849",
      "id" : 792624849,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII584vPn7R",
      "original_commit_id" : "11009c3a6055a254864ee4a63af89e2b930b7c92",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 863523651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792624849/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-26T13:20:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792624849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795084544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795084544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"block\" both times refers to the block being fetched with `getblockfrompeer`. I see how it was not super clear so I revised the wording a bit.\r\n\r\nI think your shorter version is not necessarily correct. The block might be pruned with the next pruning event or not, it depends on the prune height requested if it is in a file that is otherwise ready to be pruned. So the block with the highest height in the same file is the deciding factor as far as I understand. Since the fetched blocked is usually appended in the file with the current tip, the next pruning event will often not allow that file to be pruned. The expanded test that you requested actually shows this well already and so I structured it in a way that this behavior is made explicit.",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-29T19:11:35Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795084544",
      "id" : 795084544,
      "in_reply_to_id" : 792624849,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII584vZAcA",
      "original_commit_id" : "11009c3a6055a254864ee4a63af89e2b930b7c92",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 866999574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795084544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-29T19:11:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795084544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Do you want to expand the test to show how the fetched block disappears again at the next prune event?\r\n\r\nExpanded the test. See [my comment](https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795084544) for some more related info.",
      "created_at" : "2022-01-29T19:12:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1024969946",
      "id" : 1024969946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5849F8za",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024969946/reactions"
      },
      "updated_at" : "2022-01-29T19:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024969946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795207138"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795207138"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah I see. Then I think there should be a warning that this can temporarily cause pruning to be deferred? I.e. disk space may exceed `-prune`? Is there an upper limit of required extra free disk space that we can suggest?",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-30T16:00:19Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795207138",
      "id" : 795207138,
      "in_reply_to_id" : 792624849,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII584vZeXi",
      "original_commit_id" : "11009c3a6055a254864ee4a63af89e2b930b7c92",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 867139230,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795207138/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-30T16:01:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795207138",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795218441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795218441"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, if the node has not synced up to the fetched block yet, that can happen. That is the issue I am addressing with #23927 . I could amend the comment here now and then change it again if that PR is merged. But I think I would rather keep it separate since I also don't know what might be merged first. If the fix in #23927 is not getting in, I would change that PR to at least document the issue better for the user instead.",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-30T17:32:51Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795218441",
      "id" : 795218441,
      "in_reply_to_id" : 792624849,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII584vZhIJ",
      "original_commit_id" : "11009c3a6055a254864ee4a63af89e2b930b7c92",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 867149467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795218441/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-30T17:32:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795218441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795263014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263014"
         }
      },
      "author_association" : "MEMBER",
      "body" : "not sure, but without the spaces these look like RPC fields or inputs, yet aren't part of this RPC \r\n```suggestion\r\n        \"\\nNote: On a pruned node this block might be pruned again as soon as the prune height surpasses the block height at the time of fetching the block.\\n\",\r\n```",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-30T22:48:59Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795263014",
      "id" : 795263014,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII584vZsAm",
      "original_commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 867229332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263014/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-30T22:54:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795263403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263403"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe faster/cleaner to pass only the node number instead of whole node objects (also, use named args)\r\n```diff\r\n     def check_for_block(self, node, hash):\r\n         try:\r\n-            self.nodes[0].getblock(hash)\r\n+            self.nodes[node].getblock(hash)\r\n             return True\r\n@@ -65,7 +65,7 @@ class GetBlockFromPeerTest(BitcoinTestFramework):\r\n \r\n         self.log.info(\"Successful fetch\")\r\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\r\n-        self.wait_until(lambda: self.check_for_block(self.nodes[0], short_tip), timeout=1)\r\n+        self.wait_until(lambda: self.check_for_block(node=0, hash=short_tip), timeout=1)\r\n         assert_equal(result, {})\r\n \r\n@@ -86,7 +86,7 @@ class GetBlockFromPeerTest(BitcoinTestFramework):\r\n         peer_2_peer_0_id = peers[0][\"id\"]\r\n         result = self.nodes[2].getblockfrompeer(pruned_block, peer_2_peer_0_id)\r\n-        self.wait_until(lambda: self.check_for_block(self.nodes[2], pruned_block), timeout=1)\r\n+        self.wait_until(lambda: self.check_for_block(node=2, hash=pruned_block), timeout=1)\r\n         assert_equal(result, {})\r\n\r\n```",
      "commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "created_at" : "2022-01-30T22:52:42Z",
      "diff_hunk" : "@@ -13,14 +13,19 @@\n \n class GetBlockFromPeerTest(BitcoinTestFramework):\n     def set_test_params(self):\n-        self.num_nodes = 2\n+        self.num_nodes = 3\n+        self.extra_args = [\n+            [],\n+            [],\n+            [\"-fastprune\", \"-prune=1\"]\n+        ]\n \n     def setup_network(self):\n         self.setup_nodes()\n \n-    def check_for_block(self, hash):\n+    def check_for_block(self, node, hash):\n         try:\n-            self.nodes[0].getblock(hash)\n+            node.getblock(hash)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r795263403",
      "id" : 795263403,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII584vZsGr",
      "original_commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "original_line" : 28,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : 19,
      "pull_request_review_id" : 867229332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263403/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-30T22:54:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795263403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-01-31T08:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1025472187",
      "id" : 1025472187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5849H3a7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025472187/reactions"
      },
      "updated_at" : "2022-01-31T08:07:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025472187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r800110567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110567"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "476f63a081e4e313f9f0ac04ddeeba7b7525f9bf",
      "created_at" : "2022-02-06T00:26:54Z",
      "diff_hunk" : "@@ -793,7 +793,8 @@ static RPCHelpMan getblockfrompeer()\n         \"\\nAttempt to fetch block from a given peer.\\n\"\n         \"\\nWe must have the header for this block, e.g. using submitheader.\\n\"\n         \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n-        \"\\nReturns an empty JSON object if the request was successfully scheduled.\",\n+        \"\\nReturns an empty JSON object if the request was successfully scheduled.\"\n+        \"\\nNote: On a pruned node this block might be pruned again as soon as the pruneheight surpasses the blockheight at the time of fetching the block.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r800110567",
      "id" : 800110567,
      "in_reply_to_id" : 795263014,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsLfn",
      "original_commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "original_line" : 797,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 873979249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110567/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T00:26:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r800110570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110570"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "476f63a081e4e313f9f0ac04ddeeba7b7525f9bf",
      "created_at" : "2022-02-06T00:26:58Z",
      "diff_hunk" : "@@ -13,14 +13,19 @@\n \n class GetBlockFromPeerTest(BitcoinTestFramework):\n     def set_test_params(self):\n-        self.num_nodes = 2\n+        self.num_nodes = 3\n+        self.extra_args = [\n+            [],\n+            [],\n+            [\"-fastprune\", \"-prune=1\"]\n+        ]\n \n     def setup_network(self):\n         self.setup_nodes()\n \n-    def check_for_block(self, hash):\n+    def check_for_block(self, node, hash):\n         try:\n-            self.nodes[0].getblock(hash)\n+            node.getblock(hash)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r800110570",
      "id" : 800110570,
      "in_reply_to_id" : 795263403,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsLfq",
      "original_commit_id" : "6946327b191a0b573658e098e1d470d8dd7dae37",
      "original_line" : 28,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : null,
      "pull_request_review_id" : 873979250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110570/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T00:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800110570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and took @jonatack 's suggestions.",
      "created_at" : "2022-02-06T00:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1030720333",
      "id" : 1030720333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII5849b4tN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030720333/reactions"
      },
      "updated_at" : "2022-02-06T00:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030720333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r816833144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816833144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is currently a no-op from a sync perspective, as the passed list only contains one element (`x[0:1]`is the same as `[x[0]]`). Probably you meant\r\n```suggestion\r\n        self.sync_blocks(self.nodes[0:2])\r\n```\r\n?\r\nAn other alternative would be `self.sync_blocks([self.nodes[0], self.nodes[1]])`.",
      "commit_id" : "476f63a081e4e313f9f0ac04ddeeba7b7525f9bf",
      "created_at" : "2022-03-01T14:43:48Z",
      "diff_hunk" : "@@ -37,7 +42,7 @@ def run_test(self):\n \n         self.log.info(\"Connect nodes to sync headers\")\n         self.connect_nodes(0, 1)\n-        self.sync_blocks()\n+        self.sync_blocks(self.nodes[0:1])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r816833144",
      "id" : 816833144,
      "line" : 45,
      "node_id" : "PRRC_kwDOABII584wr-J4",
      "original_commit_id" : "476f63a081e4e313f9f0ac04ddeeba7b7525f9bf",
      "original_line" : 45,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : 28,
      "pull_request_review_id" : 896392644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816833144/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-01T14:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816833144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r820126283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820126283"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed. Fixed, thanks!",
      "commit_id" : "5dee698101cf707a4454995e2512d154d375f16c",
      "created_at" : "2022-03-05T17:01:26Z",
      "diff_hunk" : "@@ -37,7 +42,7 @@ def run_test(self):\n \n         self.log.info(\"Connect nodes to sync headers\")\n         self.connect_nodes(0, 1)\n-        self.sync_blocks()\n+        self.sync_blocks(self.nodes[0:1])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r820126283",
      "id" : 820126283,
      "in_reply_to_id" : 816833144,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w4iJL",
      "original_commit_id" : "476f63a081e4e313f9f0ac04ddeeba7b7525f9bf",
      "original_line" : 45,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : null,
      "pull_request_review_id" : 900992637,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820126283/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-05T17:01:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820126283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-01T07:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1143201890",
      "id" : 1143201890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585EI-Bi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143201890/reactions"
      },
      "updated_at" : "2022-06-01T07:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143201890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2022-06-05T23:32:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1146906830",
      "id" : 1146906830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585EXGjO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146906830/reactions"
      },
      "updated_at" : "2022-06-05T23:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146906830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Somewhat ominous CI failure.",
      "created_at" : "2022-07-18T09:51:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1186994811",
      "id" : 1186994811,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585GwBp7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186994811/reactions"
      },
      "updated_at" : "2022-07-18T09:51:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186994811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Somewhat ominous CI failure.\r\n\r\nSeems to have been the CI choking but I also saw that there was a silent merge conflict after I re-ran, so rebased and fixed that.",
      "created_at" : "2022-07-22T16:22:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1192739030",
      "id" : 1192739030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585HF8DW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1192739030/reactions"
      },
      "updated_at" : "2022-07-26T20:58:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1192739030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r969247408"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969247408"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `node_2_peer_0_id` or `pruned_node_peer_0_id`",
      "commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "created_at" : "2022-09-13T07:27:32Z",
      "diff_hunk" : "@@ -75,12 +80,42 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(node=0, hash=short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)\n+        assert_equal(pruneheight, 248)\n+        # Ensure the block is actually pruned\n+        pruned_block = self.nodes[0].getblockhash(2)\n+        assert_raises_rpc_error(-1, \"Block not available (pruned data)\", self.nodes[2].getblock, pruned_block)\n+\n+        self.log.info(\"Fetch pruned block\")\n+        peers = self.nodes[2].getpeerinfo()\n+        assert_equal(len(peers), 1)\n+        peer_2_peer_0_id = peers[0][\"id\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r969247408",
      "id" : 969247408,
      "line" : 102,
      "node_id" : "PRRC_kwDOABII5845xYqw",
      "original_commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "original_line" : 102,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : 56,
      "pull_request_review_id" : 1105262294,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969247408/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-13T07:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969247408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r969249387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969249387"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you have to retouch, if you call this `pruned_node = self.nodes[2]` the rest of the test is a bit easier to read. ",
      "commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "created_at" : "2022-09-13T07:29:33Z",
      "diff_hunk" : "@@ -75,12 +80,42 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(node=0, hash=short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r969249387",
      "id" : 969249387,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII5845xZJr",
      "original_commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "original_line" : 93,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : 47,
      "pull_request_review_id" : 1105262294,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969249387/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-13T07:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/969249387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-10-26T15:35:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1292235155",
      "id" : 1292235155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585NBfGT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1292235155/reactions"
      },
      "updated_at" : "2022-10-26T15:35:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1292235155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "rebased",
      "created_at" : "2022-11-13T19:21:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1312801905",
      "id" : 1312801905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585OP8Rx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1312801905/reactions"
      },
      "updated_at" : "2022-11-13T19:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1312801905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1022184258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1022184258"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If a user calls getblockfrompeer 200 times or so, it's quite possible they will fill a block file and get pruned *before* the current height is pruned.\r\n\r\nThe only way to guarantee any survival of a fetched block would be something like #19463",
      "commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "created_at" : "2022-11-15T00:04:21Z",
      "diff_hunk" : "@@ -428,7 +428,8 @@ static RPCHelpMan getblockfrompeer()\n         \"getblockfrompeer\",\n         \"Attempt to fetch block from a given peer.\\n\\n\"\n         \"We must have the header for this block, e.g. using submitheader.\\n\"\n-        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\\n\"\n+        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n+        \"Note: On a pruned node this block can be pruned again as soon as the prune height surpasses the block height at the time it was fetched.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1022184258",
      "id" : 1022184258,
      "line" : 432,
      "node_id" : "PRRC_kwDOABII58487UtC",
      "original_commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "original_line" : 432,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 1180014696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1022184258/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-15T00:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1022184258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1027164313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027164313"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, that's correct, how would you like `Note: There is no guarantee the block will be available at a specific time in the future as it may be gone with the next pruning event` ?",
      "commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "created_at" : "2022-11-20T00:35:06Z",
      "diff_hunk" : "@@ -428,7 +428,8 @@ static RPCHelpMan getblockfrompeer()\n         \"getblockfrompeer\",\n         \"Attempt to fetch block from a given peer.\\n\\n\"\n         \"We must have the header for this block, e.g. using submitheader.\\n\"\n-        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\\n\"\n+        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n+        \"Note: On a pruned node this block can be pruned again as soon as the prune height surpasses the block height at the time it was fetched.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1027164313",
      "id" : 1027164313,
      "in_reply_to_id" : 1022184258,
      "line" : 432,
      "node_id" : "PRRC_kwDOABII5849OUiZ",
      "original_commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "original_line" : 432,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 1187143318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027164313/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-20T00:35:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027164313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1027362631"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027362631"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe a bit long. How about \"Note: The block could be re-pruned as soon as it is received.\"\r\n\r\nThough if the peer simply never responds, it's basically the same outcome?",
      "commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "created_at" : "2022-11-20T22:15:17Z",
      "diff_hunk" : "@@ -428,7 +428,8 @@ static RPCHelpMan getblockfrompeer()\n         \"getblockfrompeer\",\n         \"Attempt to fetch block from a given peer.\\n\\n\"\n         \"We must have the header for this block, e.g. using submitheader.\\n\"\n-        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\\n\"\n+        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n+        \"Note: On a pruned node this block can be pruned again as soon as the prune height surpasses the block height at the time it was fetched.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1027362631",
      "id" : 1027362631,
      "in_reply_to_id" : 1022184258,
      "line" : 432,
      "node_id" : "PRRC_kwDOABII5849PE9H",
      "original_commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "original_line" : 432,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 6,
      "pull_request_review_id" : 1187330028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027362631/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-20T22:15:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027362631",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1032922905"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032922905"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I took your suggested test.\r\n\r\nAnd it's true, it's the same outcome if the block is never received. But I don't think we have to worry about that here, the wording above says \"Attempt to fetch...\" which implies the operation might fail and there should be logging in place as well.",
      "commit_id" : "c9d2f75411457c3d2de795881526bd4ca43decaf",
      "created_at" : "2022-11-27T12:29:52Z",
      "diff_hunk" : "@@ -428,7 +428,8 @@ static RPCHelpMan getblockfrompeer()\n         \"getblockfrompeer\",\n         \"Attempt to fetch block from a given peer.\\n\\n\"\n         \"We must have the header for this block, e.g. using submitheader.\\n\"\n-        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\\n\"\n+        \"Subsequent calls for the same block and a new peer will cause the response from the previous peer to be ignored.\\n\"\n+        \"Note: On a pruned node this block can be pruned again as soon as the prune height surpasses the block height at the time it was fetched.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1032922905",
      "id" : 1032922905,
      "in_reply_to_id" : 1022184258,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849kScZ",
      "original_commit_id" : "23ea3e01ca679b3b039b2fabdb8b8517f5907791",
      "original_line" : 432,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1194977565,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032922905/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-27T12:29:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1032922905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-12-05T13:37:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1337369325",
      "id" : 1337369325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585PtqLt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1337369325/reactions"
      },
      "updated_at" : "2022-12-05T13:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1337369325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1055769134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769134"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "fe329dc936d1e02da406345e4223e11d1fa6fb38",
      "created_at" : "2022-12-22T19:02:22Z",
      "diff_hunk" : "@@ -75,12 +80,42 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(node=0, hash=short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1055769134",
      "id" : 1055769134,
      "in_reply_to_id" : 969249387,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-7cIu",
      "original_commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "original_line" : 124,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : null,
      "pull_request_review_id" : 1228137246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-22T19:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1055769174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769174"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "fe329dc936d1e02da406345e4223e11d1fa6fb38",
      "created_at" : "2022-12-22T19:02:26Z",
      "diff_hunk" : "@@ -75,12 +80,42 @@ def run_test(self):\n \n         self.log.info(\"Successful fetch\")\n         result = self.nodes[0].getblockfrompeer(short_tip, peer_0_peer_1_id)\n-        self.wait_until(lambda: self.check_for_block(short_tip), timeout=1)\n+        self.wait_until(lambda: self.check_for_block(node=0, hash=short_tip), timeout=1)\n         assert_equal(result, {})\n \n         self.log.info(\"Don't fetch blocks we already have\")\n         assert_raises_rpc_error(-1, \"Block already downloaded\", self.nodes[0].getblockfrompeer, short_tip, peer_0_peer_1_id)\n \n+        self.log.info(\"Connect pruned node\")\n+        # We need to generate more blocks to be able to prune\n+        self.connect_nodes(0, 2)\n+        self.generate(self.nodes[0], 400)\n+        pruneheight = self.nodes[2].pruneblockchain(300)\n+        assert_equal(pruneheight, 248)\n+        # Ensure the block is actually pruned\n+        pruned_block = self.nodes[0].getblockhash(2)\n+        assert_raises_rpc_error(-1, \"Block not available (pruned data)\", self.nodes[2].getblock, pruned_block)\n+\n+        self.log.info(\"Fetch pruned block\")\n+        peers = self.nodes[2].getpeerinfo()\n+        assert_equal(len(peers), 1)\n+        peer_2_peer_0_id = peers[0][\"id\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#discussion_r1055769174",
      "id" : 1055769174,
      "in_reply_to_id" : 969247408,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-7cJW",
      "original_commit_id" : "da1bd8e31dc0ccb297c23fce68a68b6d1a51b508",
      "original_line" : 133,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblockfrompeer.py",
      "position" : null,
      "pull_request_review_id" : 1228137285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23813",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-22T19:02:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055769174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Failed to address @Sjors ' comments on the previous rebase, done now.",
      "created_at" : "2022-12-22T19:02:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1363244561",
      "id" : 1363244561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585RQXYR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1363244561/reactions"
      },
      "updated_at" : "2022-12-22T19:02:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1363244561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK fe329dc936d1e02da406345e4223e11d1fa6fb38",
      "created_at" : "2023-03-09T17:10:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23813#issuecomment-1462438231",
      "id" : 1462438231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23813",
      "node_id" : "IC_kwDOABII585XKwlX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1462438231/reactions"
      },
      "updated_at" : "2023-03-09T17:10:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1462438231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
