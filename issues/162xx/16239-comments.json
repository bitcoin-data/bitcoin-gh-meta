[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16240](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16240.html) (JSONRPCRequest-aware RPCHelpMan by kallewoof)\n* [#11413](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/11413.html) ([wallet] [rpc] sendtoaddress/sendmany: Add explicit feerate option by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-06-19T07:20:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503439580",
      "id" : 503439580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzQzOTU4MA==",
      "updated_at" : "2019-06-19T16:28:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503439580",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295302127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295302127"
         }
      },
      "author_association" : "MEMBER",
      "body" : "7e7bb17352a3a74e142eae20572a163384fa1502\r\n\r\nOnly present if `avoid_reuse` flag is set.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T13:39:37Z",
      "diff_hunk" : "@@ -2409,6 +2409,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n             \"      \\\"trusted\\\": xxx                 (numeric) trusted balance (outputs created by the wallet or confirmed outputs)\\n\"\n             \"      \\\"untrusted_pending\\\": xxx       (numeric) untrusted pending balance (outputs created by others that are in the mempool)\\n\"\n             \"      \\\"immature\\\": xxx                (numeric) balance from immature coinbase outputs\\n\"\n+            \"      \\\"used\\\": xxx                    (numeric) balance from coins sent to addresses that were previously spent from (potentially privacy violating)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295302127",
      "id" : 295302127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMwMjEyNw==",
      "original_commit_id" : "7e7bb17352a3a74e142eae20572a163384fa1502",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251705407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295302127",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295302333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295302333"
         }
      },
      "author_association" : "MEMBER",
      "body" : "7e7bb17352a3a74e142eae20572a163384fa1502\r\n\r\nnit, const",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T13:39:59Z",
      "diff_hunk" : "@@ -2434,13 +2435,16 @@ static UniValue getbalances(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n \n+    bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295302333",
      "id" : 295302333,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMwMjMzMw==",
      "original_commit_id" : "7e7bb17352a3a74e142eae20572a163384fa1502",
      "original_position" : 12,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251705407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295302333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295303211"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295303211"
         }
      },
      "author_association" : "MEMBER",
      "body" : "7e7bb17352a3a74e142eae20572a163384fa1502\r\n\r\nMaybe test that this is not present if `avoid_reused` flag is not set.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T13:41:47Z",
      "diff_hunk" : "@@ -2434,13 +2435,16 @@ static UniValue getbalances(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n \n+    bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     const auto bal = wallet.GetBalance();\n+    const auto bal_used = avoid_reuse ? wallet.GetBalance(0, false) : bal;\n     UniValue balances{UniValue::VOBJ};\n     {\n         UniValue balances_mine{UniValue::VOBJ};\n         balances_mine.pushKV(\"trusted\", ValueFromAmount(bal.m_mine_trusted));\n         balances_mine.pushKV(\"untrusted_pending\", ValueFromAmount(bal.m_mine_untrusted_pending));\n         balances_mine.pushKV(\"immature\", ValueFromAmount(bal.m_mine_immature));\n+        if (avoid_reuse) balances_mine.pushKV(\"used\", ValueFromAmount(bal_used.m_mine_trusted + bal_used.m_mine_untrusted_pending - bal.m_mine_trusted - bal.m_mine_untrusted_pending));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295303211",
      "id" : 295303211,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMwMzIxMQ==",
      "original_commit_id" : "7e7bb17352a3a74e142eae20572a163384fa1502",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251705407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295303211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295305739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295305739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5e704ab66336eafef2955e3087f7bbf8c7ca26cd\r\n\r\nMove after wallet lock in L3023.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T13:46:41Z",
      "diff_hunk" : "@@ -2891,9 +2891,8 @@ static UniValue listunspent(const JSONRPCRequest& request)\n \n     bool avoid_reuse = pwallet->IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295305739",
      "id" : 295305739,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMwNTczOQ==",
      "original_commit_id" : "5e704ab66336eafef2955e3087f7bbf8c7ca26cd",
      "original_position" : 2,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251705407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295305739",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295306055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295306055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5e704ab66336eafef2955e3087f7bbf8c7ca26cd\r\n\r\nMention \"only present if avoid_reuse flag is set\".",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T13:47:18Z",
      "diff_hunk" : "@@ -2930,9 +2929,7 @@ static UniValue listunspent(const JSONRPCRequest& request)\n             \"    \\\"witnessScript\\\" : \\\"script\\\" (string) witnessScript if the scriptPubKey is P2WSH or P2SH-P2WSH\\n\"\n             \"    \\\"spendable\\\" : xxx,        (bool) Whether we have the private keys to spend this output\\n\"\n             \"    \\\"solvable\\\" : xxx,         (bool) Whether we know how to spend this output, ignoring the lack of keys\\n\"\n-            + (avoid_reuse ?\n-            \"    \\\"reused\\\" : xxx,           (bool) Whether this output is reused/dirty (sent to an address that was previously spent from)\\n\" :\n-            \"\") +\n+            \"    \\\"reused\\\" : xxx,           (bool) Whether this output is reused/dirty (sent to an address that was previously spent from)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295306055",
      "id" : 295306055,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMwNjA1NQ==",
      "original_commit_id" : "5e704ab66336eafef2955e3087f7bbf8c7ca26cd",
      "original_position" : 19,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251705407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295306055",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295325961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295325961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Adding check to wallet_avoidreuse.py that node 0 does not include a \"used\" key.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T14:22:34Z",
      "diff_hunk" : "@@ -2434,13 +2435,16 @@ static UniValue getbalances(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n \n+    bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     const auto bal = wallet.GetBalance();\n+    const auto bal_used = avoid_reuse ? wallet.GetBalance(0, false) : bal;\n     UniValue balances{UniValue::VOBJ};\n     {\n         UniValue balances_mine{UniValue::VOBJ};\n         balances_mine.pushKV(\"trusted\", ValueFromAmount(bal.m_mine_trusted));\n         balances_mine.pushKV(\"untrusted_pending\", ValueFromAmount(bal.m_mine_untrusted_pending));\n         balances_mine.pushKV(\"immature\", ValueFromAmount(bal.m_mine_immature));\n+        if (avoid_reuse) balances_mine.pushKV(\"used\", ValueFromAmount(bal_used.m_mine_trusted + bal_used.m_mine_untrusted_pending - bal.m_mine_trusted - bal.m_mine_untrusted_pending));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295325961",
      "id" : 295325961,
      "in_reply_to_id" : 295303211,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMyNTk2MQ==",
      "original_commit_id" : "7e7bb17352a3a74e142eae20572a163384fa1502",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251736361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295325961",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag Thanks a lot for review! I addressed everything you noted.",
      "created_at" : "2019-06-19T14:26:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503584473",
      "id" : 503584473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzU4NDQ3Mw==",
      "updated_at" : "2019-06-19T14:26:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503584473",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295339124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295339124"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, const.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T14:45:40Z",
      "diff_hunk" : "@@ -3017,6 +3020,8 @@ static UniValue listunspent(const JSONRPCRequest& request)\n \n     LOCK(pwallet->cs_wallet);\n \n+    bool avoid_reuse = pwallet->IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295339124",
      "id" : 295339124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTMzOTEyNA==",
      "original_commit_id" : "c8568bb2a2e1430ff8429769ef451e5de7722553",
      "original_position" : 67,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 251753512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295339124",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295348857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295348857"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, IMO these assertions aren't necessary, `assert_approx` are enough.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T15:03:13Z",
      "diff_hunk" : "@@ -63,6 +63,20 @@ def assert_unspent(node, total_count=None, total_sum=None, reused_supported=None\n     if reused_sum is not None:\n         assert_approx(stats[\"reused\"][\"sum\"], reused_sum, 0.001)\n \n+def assert_balances(node, mine=None, watchonly=None):\n+    '''Make assertions about a node's getbalances output'''\n+    balances = node.getbalances()\n+    if mine:\n+        got = balances[\"mine\"]\n+        for k,v in mine.items():\n+            assert(k in got)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295348857",
      "id" : 295348857,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTM0ODg1Nw==",
      "original_commit_id" : "c8568bb2a2e1430ff8429769ef451e5de7722553",
      "original_position" : 25,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : null,
      "pull_request_review_id" : 251753512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295348857",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295371614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295371614"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, agreed, removing.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T15:46:17Z",
      "diff_hunk" : "@@ -63,6 +63,20 @@ def assert_unspent(node, total_count=None, total_sum=None, reused_supported=None\n     if reused_sum is not None:\n         assert_approx(stats[\"reused\"][\"sum\"], reused_sum, 0.001)\n \n+def assert_balances(node, mine=None, watchonly=None):\n+    '''Make assertions about a node's getbalances output'''\n+    balances = node.getbalances()\n+    if mine:\n+        got = balances[\"mine\"]\n+        for k,v in mine.items():\n+            assert(k in got)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295371614",
      "id" : 295371614,
      "in_reply_to_id" : 295348857,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTM3MTYxNA==",
      "original_commit_id" : "c8568bb2a2e1430ff8429769ef451e5de7722553",
      "original_position" : 25,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : null,
      "pull_request_review_id" : 251795544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295371614",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag Thanks for thoroughness, it is very appreciated. Addressed all.",
      "created_at" : "2019-06-19T15:46:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503617599",
      "id" : 503617599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzYxNzU5OQ==",
      "updated_at" : "2019-06-19T15:46:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503617599",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I left some review in the other pull, which could be addressed here?",
      "created_at" : "2019-06-19T15:49:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503618835",
      "id" : 503618835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzYxODgzNQ==",
      "updated_at" : "2019-06-19T15:49:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503618835",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @MarcoFalke comments in #13756. Thanks for feedback!",
      "created_at" : "2019-06-19T16:09:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503626911",
      "id" : 503626911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzYyNjkxMQ==",
      "updated_at" : "2019-06-19T16:09:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503626911",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295393035"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295393035"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nRescanning the blockchain is required, to correctly mark previously\r\n```",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T16:29:39Z",
      "diff_hunk" : "@@ -7,7 +7,7 @@ A new wallet flag `avoid_reuse` has been added (default off). When enabled,\n a wallet will distinguish between used and unused addresses, and default to not\n use the former in coin selection.\n \n-(Note: rescanning the blockchain is required, to correctly mark previously\n+(Rescanning the blockchain is required, to correctly mark previously",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295393035",
      "id" : 295393035,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTM5MzAzNQ==",
      "original_commit_id" : "5ff6aaa2d241dc916f9baa36c04791e1373e07e0",
      "original_position" : 5,
      "path" : "doc/release-notes-13756.md",
      "position" : null,
      "pull_request_review_id" : 251822776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295393035",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295393555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295393555"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nIn addition, `sendtoaddress` has been changed to avoid partial spends ... (if not already enabled via the  `-avoidpartialspends` command line flag) ...\r\n```",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-19T16:30:47Z",
      "diff_hunk" : "@@ -30,10 +30,12 @@ These include:\n \n - createwallet\n - getbalance\n+- getbalances\n - sendtoaddress\n \n-In addition, `sendtoaddress` has been changed to enable `-avoidpartialspends` when\n-`avoid_reuse` is enabled.\n+In addition, `sendtoaddress` has been changed to always use `-avoidpartialspends`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295393555",
      "id" : 295393555,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTM5MzU1NQ==",
      "original_commit_id" : "5ff6aaa2d241dc916f9baa36c04791e1373e07e0",
      "original_position" : 18,
      "path" : "doc/release-notes-13756.md",
      "position" : null,
      "pull_request_review_id" : 251822776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295393555",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Thanks, I missed that one. I believe I got all of them this time. Also updated release notes based on your suggestions.",
      "created_at" : "2019-06-19T16:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503643428",
      "id" : 503643428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzY0MzQyOA==",
      "updated_at" : "2019-06-19T16:55:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503643428",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK b59d4c7da1b886a0834211e70850127faf3e121e (scrolled through the diff on GitHub)",
      "created_at" : "2019-06-19T16:59:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-503644901",
      "id" : 503644901,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzY0NDkwMQ==",
      "updated_at" : "2019-06-19T16:59:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503644901",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295917922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295917922"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think `watchonly` is ever used. Just remove it (and the `if watchonly` block in the function)",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-20T17:34:49Z",
      "diff_hunk" : "@@ -63,6 +63,18 @@ def assert_unspent(node, total_count=None, total_sum=None, reused_supported=None\n     if reused_sum is not None:\n         assert_approx(stats[\"reused\"][\"sum\"], reused_sum, 0.001)\n \n+def assert_balances(node, mine=None, watchonly=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295917922",
      "id" : 295917922,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTkxNzkyMg==",
      "original_commit_id" : "b59d4c7da1b886a0834211e70850127faf3e121e",
      "original_position" : 19,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : null,
      "pull_request_review_id" : 252433238,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295917922",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295918585"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295918585"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You can remove these change since `assert_balances()` is never called with `watchonly`, and so `assert_approx()` is only called for `mine` balances.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-20T17:36:26Z",
      "diff_hunk" : "@@ -12,11 +12,11 @@\n )\n \n # TODO: Copied from wallet_groups.py -- should perhaps move into util.py\n-def assert_approx(v, vexp, vspan=0.00001):\n+def assert_approx(v, vexp, vspan=0.00001, descr=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r295918585",
      "id" : 295918585,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NTkxODU4NQ==",
      "original_commit_id" : "b59d4c7da1b886a0834211e70850127faf3e121e",
      "original_position" : 5,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : null,
      "pull_request_review_id" : 252433238,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/295918585",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery thanks! Trimmed tests as suggested.",
      "created_at" : "2019-06-21T02:38:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504267046",
      "id" : 504267046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDI2NzA0Ng==",
      "updated_at" : "2019-06-21T02:38:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504267046",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code looks good, code review ACK https://github.com/bitcoin/bitcoin/pull/16239/commits/7f39c40a332824043e3bef282580daf748131bb4\r\n\r\nI'm just slightly unsure about the word \"used\" in the getbalance RPC, could seem like the balance which has been used (spent) rather than the balance which is \"dirty\" or \"reused\" or something\r\n",
      "created_at" : "2019-06-21T07:55:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504330493",
      "id" : 504330493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDMzMDQ5Mw==",
      "updated_at" : "2019-06-21T07:55:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504330493",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I initially used the word \"dirty\", but then realized that is internally used for something else in the wallet, and there was a comment about \"dirty\" being confusing in https://github.com/bitcoin/bitcoin/pull/13756#issuecomment-408214120\r\n\r\n> I think \"dirty\" is a confusing concept. Maybe add an exclamation mark (or a detective icon) next to the transaction and when the user clicks on that, say something like \"This address has been used before, for privacy reasons it's better to create a new address each time you wish to receive coins, even from the same person\".\r\n\r\n(in reference to a GUI comment).\r\n\r\nI'm open for changing it, but I'm not sure what would be a good name for it.",
      "created_at" : "2019-06-21T12:29:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504408018",
      "id" : 504408018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDQwODAxOA==",
      "updated_at" : "2019-06-21T12:29:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504408018",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'm open for changing it, but I'm not sure what would be a good name for it.\r\n\r\nHow about \"used address balance\" or \"reused address balance\"? Bit of a mouthful, but at least it's explicit.",
      "created_at" : "2019-06-21T13:29:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504426017",
      "id" : 504426017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDQyNjAxNw==",
      "updated_at" : "2019-06-21T13:29:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504426017",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery A bit long, maybe.. I mean, if we change it I would ideally like to change it everywhere, including the \"avoid_reuse\" flags in RPC commands and such.\r\n\r\nEven \"used\"/\"reused\" does not accurately describe what this is referring to, as evident by the fact I as the author screwed it up (thankfully @jnewbery caught that one).\r\n\r\n\"UTXO/balance that was sent to an address after it was spent from\"\r\n",
      "created_at" : "2019-06-21T13:54:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504434330",
      "id" : 504434330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDQzNDMzMA==",
      "updated_at" : "2019-06-21T13:55:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504434330",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296287372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296287372"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I felt like this logic could have used more commenting, and the variable was a bit confusingly named (and also could potentially be scoped more tightly).\r\n\r\nI think the following is equivalent, but perhaps a little clearer:\r\n\r\n```\r\nâ git d\r\ndiff --git a/src/wallet/rpcwallet.cpp b/src/wallet/rpcwallet.cpp\r\nindex ce1c94905..f53469ce6 100644\r\n--- a/src/wallet/rpcwallet.cpp\r\n+++ b/src/wallet/rpcwallet.cpp\r\n@@ -2435,16 +2435,19 @@ static UniValue getbalances(const JSONRPCRequest& request)\r\n \r\n     UniValue obj(UniValue::VOBJ);\r\n \r\n-    const bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\r\n     const auto bal = wallet.GetBalance();\r\n-    const auto bal_used = avoid_reuse ? wallet.GetBalance(0, false) : bal;\r\n     UniValue balances{UniValue::VOBJ};\r\n     {\r\n         UniValue balances_mine{UniValue::VOBJ};\r\n         balances_mine.pushKV(\"trusted\", ValueFromAmount(bal.m_mine_trusted));\r\n         balances_mine.pushKV(\"untrusted_pending\", ValueFromAmount(bal.m_mine_untrusted_pending));\r\n         balances_mine.pushKV(\"immature\", ValueFromAmount(bal.m_mine_immature));\r\n-        if (avoid_reuse) balances_mine.pushKV(\"used\", ValueFromAmount(bal_used.m_mine_trusted + bal_used.m_mine_untrusted_pending - bal.m_mine_trusted - bal.m_mine_untrusted_pending));\r\n+        if (wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE)) {\r\n+            // If the AVOID_REUSE flag is set, bal has been set to just the un-reused address balance. Get\r\n+            // the total balance, and then subtract bal to get the reused address balance.\r\n+            const auto full_bal = wallet.GetBalance(0, false);\r\n+            balances_mine.pushKV(\"used\", ValueFromAmount(full_bal.m_mine_trusted + full_bal.m_mine_untrusted_pending - bal.m_mine_trusted - bal.m_mine_untrusted_pending));\r\n+        }\r\n         balances.pushKV(\"mine\", balances_mine);\r\n     }\r\n     if (wallet.HaveWatchOnly()) {\r\n```\r\n\r\nFeel free to use if you think that's better.",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-21T15:33:17Z",
      "diff_hunk" : "@@ -2434,13 +2435,16 @@ static UniValue getbalances(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n \n+    const bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     const auto bal = wallet.GetBalance();\n+    const auto bal_used = avoid_reuse ? wallet.GetBalance(0, false) : bal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296287372",
      "id" : 296287372,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NjI4NzM3Mg==",
      "original_commit_id" : "7f39c40a332824043e3bef282580daf748131bb4",
      "original_position" : 32,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 252892249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296287372",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296288275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296288275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "micronit (not worth changing): could be combined with line above",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-21T15:35:40Z",
      "diff_hunk" : "@@ -63,6 +63,13 @@ def assert_unspent(node, total_count=None, total_sum=None, reused_supported=None\n     if reused_sum is not None:\n         assert_approx(stats[\"reused\"][\"sum\"], reused_sum, 0.001)\n \n+def assert_balances(node, mine):\n+    '''Make assertions about a node's getbalances output'''\n+    balances = node.getbalances()\n+    got = balances[\"mine\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296288275",
      "id" : 296288275,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NjI4ODI3NQ==",
      "original_commit_id" : "7f39c40a332824043e3bef282580daf748131bb4",
      "original_position" : 7,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : null,
      "pull_request_review_id" : 252892249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296288275",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296331852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296331852"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yep, that looks cleaner. Thanks!",
      "commit_id" : "71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-21T17:43:53Z",
      "diff_hunk" : "@@ -2434,13 +2435,16 @@ static UniValue getbalances(const JSONRPCRequest& request)\n \n     UniValue obj(UniValue::VOBJ);\n \n+    const bool avoid_reuse = wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     const auto bal = wallet.GetBalance();\n+    const auto bal_used = avoid_reuse ? wallet.GetBalance(0, false) : bal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#discussion_r296331852",
      "id" : 296331852,
      "in_reply_to_id" : 296287372,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NjMzMTg1Mg==",
      "original_commit_id" : "7f39c40a332824043e3bef282580daf748131bb4",
      "original_position" : 32,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 252950463,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16239",
      "updated_at" : "2019-06-21T17:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296331852",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 71d0344cf25d3aaf60112c5248198c444bc98105\r\n\r\nThanks for quick turnaround!",
      "created_at" : "2019-06-21T18:28:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504526356",
      "id" : 504526356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDUyNjM1Ng==",
      "updated_at" : "2019-06-21T18:28:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504526356",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK https://github.com/bitcoin/bitcoin/pull/16239/commits/71d0344cf25d3aaf60112c5248198c444bc98105",
      "created_at" : "2019-06-22T09:58:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16239#issuecomment-504650958",
      "id" : 504650958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16239",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDY1MDk1OA==",
      "updated_at" : "2019-06-22T09:58:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504650958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   }
]
