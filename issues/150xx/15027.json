{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "After using `bitcoin-cli importmulti` to import a watch-only multisig p2sh-segwit address in a non-default wallet, the GUI shows all balances as 0 despite correctly listing a recent incoming transaction.\r\n# Steps to repeat\r\n\r\n    bitcoin-qt -server -testnet\r\n    bitcoin-cli -testnet createwallet \"glacier5\" true\r\n    bitcoin-cli -testnet -rpcwallet=glacier5 importmulti '[{ \"scriptPubKey\": { \"address\": \"2MzqiaZzpLT2SSBfsFqqo3FpZsP8g6WTvyC\" }, \"timestamp\":1545413762, \"redeemscript\":\"5221029f531503facdac2496f50a446d9bd29846a06a04a45e3845b656bb471df422fc2102e30787703a990e4015a2cb9071fcfd1c7d4641fb294e4b4c3f5f6b450a1925132102da28088a8022651171c4f13429b98709dabe13bc6da526537fdd2d0730dd2dbb2103286c96ecaa850a6ba43cc45fbb539c1fb1d65c23cc0f3cd09fcf9765826ff9de54ae\", \"watchonly\":true, \"label\":\"Glacier 2012-12-21\" }, { \"scriptPubKey\": { \"address\": \"2MzqiaZzpLT2SSBfsFqqo3FpZsP8g6WTvyC\" }, \"timestamp\":1545413762, \"redeemscript\":\"0020dabea3445c14e4a08d6705db4373bef467d4c64e7c8ddf149be50670de6878ae\", \"watchonly\":true, \"label\":\"Glacier 2012-12-21\" }]'\r\n\r\n# Expected behavior\r\n\r\nThe GUI now shows a pulldown in the upper-right corner to select a wallet. When I select the new glacier5 wallet, it shows a recent incoming transaction.\r\n\r\nIt should also include the amount of this incoming transaction (which the tooltip reports as having 90 confirmations) in the watchonly balances.\r\n\r\n# Actual behavior\r\n\r\nThe watchonly balances are all 0.\r\n\r\nAfter restarting the GUI and doing `loadwallet \"glacier5\"`, the balances are correct.\r\n\r\n# System details\r\n\r\nRunning Whonix 13 with the binary distro `bitcoin-0.17.0.1-i686-pc-linux-gnu.tar.gz`. Also recreated in my own build of 0.17.1rc1.",
   "closed_at" : "2020-04-26T15:19:38Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15027/comments",
   "created_at" : "2018-12-22T18:57:59Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15027/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/15027",
   "id" : 393695726,
   "labels" : [
      {
         "color" : "02d7e1",
         "default" : false,
         "description" : null,
         "id" : 135946,
         "name" : "GUI",
         "node_id" : "MDU6TGFiZWwxMzU5NDY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI"
      },
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15027/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzOTM2OTU3MjY=",
   "number" : 15027,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "GUI balance doesn't update after `importmulti`",
   "updated_at" : "2020-04-26T15:19:38Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15027",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/31543633?v=4",
      "events_url" : "https://api.github.com/users/bitcoinhodler/events{/privacy}",
      "followers_url" : "https://api.github.com/users/bitcoinhodler/followers",
      "following_url" : "https://api.github.com/users/bitcoinhodler/following{/other_user}",
      "gists_url" : "https://api.github.com/users/bitcoinhodler/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/bitcoinhodler",
      "id" : 31543633,
      "login" : "bitcoinhodler",
      "node_id" : "MDQ6VXNlcjMxNTQzNjMz",
      "organizations_url" : "https://api.github.com/users/bitcoinhodler/orgs",
      "received_events_url" : "https://api.github.com/users/bitcoinhodler/received_events",
      "repos_url" : "https://api.github.com/users/bitcoinhodler/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/bitcoinhodler/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/bitcoinhodler/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/bitcoinhodler"
   }
}
