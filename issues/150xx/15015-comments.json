[
   {
      "author_association" : "NONE",
      "body" : "same here. on custom testnet, empty wallet works like charm, but large wallet tooooooooo slow... one click for 5 seconds even no RPC calls!\r\n\r\ndebug is OK, but only GUI freeze\r\n\r\nOS: ubuntu 16.04.5-64bit\r\nCPU: i5 skylake\r\nRAM: 24GB\r\n\r\n`v0.16.3`",
      "created_at" : "2019-02-07T12:21:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-461397712",
      "id" : 461397712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MTM5NzcxMg==",
      "updated_at" : "2019-02-07T12:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/461397712",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/37016180?v=4",
         "events_url" : "https://api.github.com/users/cryptozeny/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cryptozeny/followers",
         "following_url" : "https://api.github.com/users/cryptozeny/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cryptozeny/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cryptozeny",
         "id" : 37016180,
         "login" : "cryptozeny",
         "node_id" : "MDQ6VXNlcjM3MDE2MTgw",
         "organizations_url" : "https://api.github.com/users/cryptozeny/orgs",
         "received_events_url" : "https://api.github.com/users/cryptozeny/received_events",
         "repos_url" : "https://api.github.com/users/cryptozeny/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cryptozeny/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cryptozeny/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cryptozeny"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@HashUnlimited are you able reproduce with #18160? ty",
      "created_at" : "2020-02-17T10:09:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-586915064",
      "id" : 586915064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjkxNTA2NA==",
      "updated_at" : "2020-02-17T10:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586915064",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was not able to reproduce this issue, though I initially had a different one (see the bottom).\r\n\r\nYesterday I tested the GUI on current master 5f9cd62f33f, and with #18160 rebased onto it, both on Debian and MacOS.\r\n\r\n- Debian 4.19.37amd64 (2019-08-08) x86_64 - Intel Core i7-6500U 2.50GHz Ã 4 - 32GB\r\n- MacOS 10.14.6 - MacBook Pro Retina 2012 - Intel Core i7 2.7GHz - 16GB 1600 DDR3\r\n\r\nI did not see a real difference in performance between the four configurations. **EDIT: While scanning, or in sometimes in general, performance does seem better with #18160. The results are variable and it's hard for me to have confidence in them. When all is snappy and well, I am not seeing a difference. When the GUI is laggy/scanning, the PR does seem better, but it's hard to say. I built and compared both several times, back and forth.**\r\n\r\nThe test was to load several wallets, 2-3 small wallets and then one large 177MB wallet, and run various console commands like getbalances, getwalletinfo, listwallets, etc. The large wallet is a regtest one generated with @achow101's [make-big-wallet.py](https://gist.github.com/achow101/f24309bba501cc08c9a3a3d55fa6eec6) script. \r\n\r\nOn both Debian and MacOS it takes the GUI 5-6 minutes to load the big wallet.\r\n\r\n![gui-big-wallet-loading](https://user-images.githubusercontent.com/2415484/77901255-d1cc0800-726e-11ea-9567-05084242b0aa.jpg)\r\n\r\nOnce loaded, the GUI ran fine in my tests, with an additional reaction latency of ~400-500 ms with console commands like getbalances or getwalletinfo when the commands were run on big wallet. The other commands, and clicking on and opening transactions, ran basically as fast as they do with tiny wallets.\r\n\r\nWith one build on Debian, I did see the GUI halt, and then crash with segmentation faults, when loading any wallet at all. However, rebuilding after make clean solved that, so I suspect it was the build.\r\n\r\nIf anyone has suggestions on how to best instrument this or for further tests to run with the big wallet, let me know.\r\n",
      "created_at" : "2020-03-30T09:53:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-605901091",
      "id" : 605901091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTkwMTA5MQ==",
      "updated_at" : "2020-03-30T11:44:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605901091",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack The big wallet script does ~100,000 txs. It's possible that this is not big enough as it seems that OP has a wallet with several million txs. You should try increasing the iteration count to make a wallet that has a few million txs.",
      "created_at" : "2020-03-30T16:15:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-606096687",
      "id" : 606096687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNjA5NjY4Nw==",
      "updated_at" : "2020-03-30T16:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606096687",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "According to OP\r\n\r\n> Note: this behaviour is not limited to the Overview page or CoinControl but in general as long as the wallet is loaded. A headless setup performs nicely though.\r\n\r\n@achow101 see my last post at #18160, I think it's safe to say that #18160 will improve in this case.",
      "created_at" : "2020-03-30T16:19:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-606099122",
      "id" : 606099122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNjA5OTEyMg==",
      "updated_at" : "2020-03-30T16:19:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606099122",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 @promag thanks. Both trying with a larger wallet and instrumenting as per https://github.com/bitcoin/bitcoin/pull/18160#issuecomment-606033867 to reproduce @promag's result (and/or with a flamegraph) seem worthwhile.",
      "created_at" : "2020-03-30T16:30:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-606104883",
      "id" : 606104883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNjEwNDg4Mw==",
      "updated_at" : "2020-03-30T16:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606104883",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry for the late reply. Just tested with the same wallet - performance is WAY better now. ",
      "created_at" : "2020-04-01T10:56:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-607180130",
      "id" : 607180130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzE4MDEzMA==",
      "updated_at" : "2020-04-01T10:56:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607180130",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/26601261?v=4",
         "events_url" : "https://api.github.com/users/HashUnlimited/events{/privacy}",
         "followers_url" : "https://api.github.com/users/HashUnlimited/followers",
         "following_url" : "https://api.github.com/users/HashUnlimited/following{/other_user}",
         "gists_url" : "https://api.github.com/users/HashUnlimited/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/HashUnlimited",
         "id" : 26601261,
         "login" : "HashUnlimited",
         "node_id" : "MDQ6VXNlcjI2NjAxMjYx",
         "organizations_url" : "https://api.github.com/users/HashUnlimited/orgs",
         "received_events_url" : "https://api.github.com/users/HashUnlimited/received_events",
         "repos_url" : "https://api.github.com/users/HashUnlimited/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/HashUnlimited/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/HashUnlimited/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/HashUnlimited"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> performance is WAY better now.\r\n\r\n@HashUnlimited I guess you tested with #18160, and if so happy to know that.",
      "created_at" : "2020-04-01T10:58:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-607181170",
      "id" : 607181170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzE4MTE3MA==",
      "updated_at" : "2020-04-01T10:58:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607181170",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, tested twice. Once with master and once with 0.18 and implemented #18160 just to make sure this is the performance booster.",
      "created_at" : "2020-04-01T11:01:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-607182401",
      "id" : 607182401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzE4MjQwMQ==",
      "updated_at" : "2020-04-01T11:01:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607182401",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/26601261?v=4",
         "events_url" : "https://api.github.com/users/HashUnlimited/events{/privacy}",
         "followers_url" : "https://api.github.com/users/HashUnlimited/followers",
         "following_url" : "https://api.github.com/users/HashUnlimited/following{/other_user}",
         "gists_url" : "https://api.github.com/users/HashUnlimited/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/HashUnlimited",
         "id" : 26601261,
         "login" : "HashUnlimited",
         "node_id" : "MDQ6VXNlcjI2NjAxMjYx",
         "organizations_url" : "https://api.github.com/users/HashUnlimited/orgs",
         "received_events_url" : "https://api.github.com/users/HashUnlimited/received_events",
         "repos_url" : "https://api.github.com/users/HashUnlimited/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/HashUnlimited/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/HashUnlimited/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/HashUnlimited"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Great, thanks for reporting the result.",
      "created_at" : "2020-04-01T11:17:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15015#issuecomment-607188779",
      "id" : 607188779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzE4ODc3OQ==",
      "updated_at" : "2020-04-01T11:17:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607188779",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
