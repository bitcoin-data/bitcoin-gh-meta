[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-02-05T10:14:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-582335557",
      "id" : 582335557,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MjMzNTU1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T21:22:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/582335557",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "utACK",
      "created_at" : "2020-02-17T18:44:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-587117806",
      "id" : 587117806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzExNzgwNg==",
      "updated_at" : "2020-02-17T18:44:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587117806",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/10149425?v=4",
         "events_url" : "https://api.github.com/users/prestwich/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prestwich/followers",
         "following_url" : "https://api.github.com/users/prestwich/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prestwich/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prestwich",
         "id" : 10149425,
         "login" : "prestwich",
         "node_id" : "MDQ6VXNlcjEwMTQ5NDI1",
         "organizations_url" : "https://api.github.com/users/prestwich/orgs",
         "received_events_url" : "https://api.github.com/users/prestwich/received_events",
         "repos_url" : "https://api.github.com/users/prestwich/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prestwich/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prestwich/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prestwich"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-16T16:18:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-614752416",
      "id" : 614752416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDc1MjQxNg==",
      "updated_at" : "2020-04-16T16:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614752416",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on getting this refactor in separate from #17977 (Taproot) and #19055 (MuHash). Will review later.",
      "created_at" : "2020-07-24T09:30:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-663447256",
      "id" : 663447256,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzQ0NzI1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T09:30:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663447256",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459970859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459970859"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't GetCheapHash be calling GetSHA256? I.e. \"Cheap\" refers to a single rather than a double hash.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T10:22:08Z",
      "diff_hunk" : "@@ -132,20 +132,33 @@ class CHashWriter\n         ctx.Write((const unsigned char*)pch, size);\n     }\n \n-    // invalidates the object\n+    /** Compute the double-SHA256 hash of all data written to this object.\n+     *\n+     * Invalidates this object.\n+     */\n     uint256 GetHash() {\n         uint256 result;\n-        ctx.Finalize((unsigned char*)&result);\n+        ctx.Finalize(result.begin());\n+        ctx.Reset().Write(result.begin(), CSHA256::OUTPUT_SIZE).Finalize(result.begin());\n+        return result;\n+    }\n+\n+    /** Compute the SHA256 hash of all data written to this object.\n+     *\n+     * Invalidates this object.\n+     */\n+    uint256 GetSHA256() {\n+        uint256 result;\n+        ctx.Finalize(result.begin());\n         return result;\n     }\n \n     /**\n      * Returns the first 64 bits from the resulting hash.\n      */\n     inline uint64_t GetCheapHash() {\n-        unsigned char result[CHash256::OUTPUT_SIZE];\n-        ctx.Finalize(result);\n-        return ReadLE64(result);\n+        uint256 result = GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459970859",
      "id" : 459970859,
      "line" : 141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk3MDg1OQ==",
      "original_commit_id" : "3f2b537fa8dc1b46cf725d50322a890dc77e5d45",
      "original_line" : 141,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/hash.h",
      "position" : 47,
      "pull_request_review_id" : 454780312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459970859",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459980372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459980372"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might as well rename these to plural prevout**s** and sequence**s**: `GetPrevoutsSHA256` and `GetSequencesSHA256`. ",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T10:45:40Z",
      "diff_hunk" : "@@ -1259,33 +1259,33 @@ class CTransactionSignatureSerializer\n };\n \n template <class T>\n-uint256 GetPrevoutHash(const T& txTo)\n+uint256 GetPrevoutSHA256(const T& txTo)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459980372",
      "id" : 459980372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk4MDM3Mg==",
      "original_commit_id" : "09b832b57b691bc118e3957c7ec8c1ac2d24498b",
      "original_line" : 1262,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 454780312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459980372",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459980886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459980886"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would prefer to do this as a one-liner: `hashPrevouts = SHA256Uint256(GetPrevoutSHA256(txTo))`, as you do below.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T10:47:00Z",
      "diff_hunk" : "@@ -1297,9 +1297,12 @@ void PrecomputedTransactionData::Init(const T& txTo)\n \n     // Cache is calculated only for transactions with witness\n     if (txTo.HasWitness()) {\n-        hashPrevouts = GetPrevoutHash(txTo);\n-        hashSequence = GetSequenceHash(txTo);\n-        hashOutputs = GetOutputsHash(txTo);\n+        hashPrevouts = GetPrevoutSHA256(txTo);\n+        hashSequence = GetSequenceSHA256(txTo);\n+        hashOutputs = GetOutputsSHA256(txTo);\n+        SHA256Uint256(hashPrevouts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r459980886",
      "id" : 459980886,
      "line" : 1303,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk4MDg4Ng==",
      "original_commit_id" : "09b832b57b691bc118e3957c7ec8c1ac2d24498b",
      "original_line" : 1303,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 50,
      "pull_request_review_id" : 454780312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459980886",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There are some changes in #17977 to these commits, which should be added here if we merge this separately.",
      "created_at" : "2020-07-24T12:11:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-663508515",
      "id" : 663508515,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzUwODUxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T12:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663508515",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460173088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460173088"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "see https://github.com/bitcoin/bitcoin/pull/19055#discussion_r460171013",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T16:53:11Z",
      "diff_hunk" : "@@ -132,20 +132,33 @@ class CHashWriter\n         ctx.Write((const unsigned char*)pch, size);\n     }\n \n-    // invalidates the object\n+    /** Compute the double-SHA256 hash of all data written to this object.\n+     *\n+     * Invalidates this object.\n+     */\n     uint256 GetHash() {\n         uint256 result;\n-        ctx.Finalize((unsigned char*)&result);\n+        ctx.Finalize(result.begin());\n+        ctx.Reset().Write(result.begin(), CSHA256::OUTPUT_SIZE).Finalize(result.begin());\n+        return result;\n+    }\n+\n+    /** Compute the SHA256 hash of all data written to this object.\n+     *\n+     * Invalidates this object.\n+     */\n+    uint256 GetSHA256() {\n+        uint256 result;\n+        ctx.Finalize(result.begin());\n         return result;\n     }\n \n     /**\n      * Returns the first 64 bits from the resulting hash.\n      */\n     inline uint64_t GetCheapHash() {\n-        unsigned char result[CHash256::OUTPUT_SIZE];\n-        ctx.Finalize(result);\n-        return ReadLE64(result);\n+        uint256 result = GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460173088",
      "id" : 460173088,
      "in_reply_to_id" : 459970859,
      "line" : 141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE3MzA4OA==",
      "original_commit_id" : "3f2b537fa8dc1b46cf725d50322a890dc77e5d45",
      "original_line" : 141,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/hash.h",
      "position" : 47,
      "pull_request_review_id" : 455040628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460173088",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460173819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460173819"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The point of not being a one liner is to make it easier for future work to just add a line of copying.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T16:54:34Z",
      "diff_hunk" : "@@ -1297,9 +1297,12 @@ void PrecomputedTransactionData::Init(const T& txTo)\n \n     // Cache is calculated only for transactions with witness\n     if (txTo.HasWitness()) {\n-        hashPrevouts = GetPrevoutHash(txTo);\n-        hashSequence = GetSequenceHash(txTo);\n-        hashOutputs = GetOutputsHash(txTo);\n+        hashPrevouts = GetPrevoutSHA256(txTo);\n+        hashSequence = GetSequenceSHA256(txTo);\n+        hashOutputs = GetOutputsSHA256(txTo);\n+        SHA256Uint256(hashPrevouts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460173819",
      "id" : 460173819,
      "in_reply_to_id" : 459980886,
      "line" : 1303,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE3MzgxOQ==",
      "original_commit_id" : "09b832b57b691bc118e3957c7ec8c1ac2d24498b",
      "original_line" : 1303,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 50,
      "pull_request_review_id" : 455041542,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460173819",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460205137"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460205137"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-24T17:57:33Z",
      "diff_hunk" : "@@ -1259,33 +1259,33 @@ class CTransactionSignatureSerializer\n };\n \n template <class T>\n-uint256 GetPrevoutHash(const T& txTo)\n+uint256 GetPrevoutSHA256(const T& txTo)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r460205137",
      "id" : 460205137,
      "in_reply_to_id" : 459980372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDIwNTEzNw==",
      "original_commit_id" : "09b832b57b691bc118e3957c7ec8c1ac2d24498b",
      "original_line" : 1262,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 455081548,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460205137",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors requested changes made where applicable.\r\n\r\n@jnewbery could you be more specific? I scanned over the diffs and am not sure what you're referring to.",
      "created_at" : "2020-07-24T17:58:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-663661067",
      "id" : 663661067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzY2MTA2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T17:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663661067",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> could you be more specific?\r\n\r\nOne example is here: https://github.com/bitcoin/bitcoin/pull/17977/files#diff-46ec93803811240fe7b2b9e83eac7ba2R94\r\n\r\nHere's another: https://github.com/bitcoin/bitcoin/pull/17977/files#diff-05b3817be9a0d72b5ad9fa1cff567facR218",
      "created_at" : "2020-07-24T19:36:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-663699881",
      "id" : 663699881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzY5OTg4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T19:36:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663699881",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah those changes are intentional for SHA256Uint256, since we use a r-value version at a callsite I figure it's better to have an explicit version that does that.\r\n\r\nIn this version, I make the r-value version return a hash (forcing lifetime consumption of it's parameter) and make the reference version overwrite it's parameter and return void. It should be harder to misuse this API as the types are more clear in the places we use it.\r\n\r\nIn any case, if there is consensus preferring the approach currently in #17977, we'd want to minimally see changes to the Taproot version to both:\r\n\r\n1) change the parameter names for consistency.\r\n2) make the SHA256Uint256 take a `const uint256&` instead of a `uint256&`.\r\n\r\nI think those are all the differences, aside from the precomputed caches (which would be inappropriate to modify in this PR)? If there are other changes, please let me know.",
      "created_at" : "2020-07-24T20:29:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-663720955",
      "id" : 663720955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzcyMDk1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T20:29:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663720955",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's still unresolved if the `CheapHash` function can use `GetHash` (instead of `GetSHA256`) without breaking Addrman's bucketing. See https://github.com/bitcoin/bitcoin/pull/19055#discussion_r460172516",
      "created_at" : "2020-07-27T09:02:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-664216225",
      "id" : 664216225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDIxNjIyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T09:02:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664216225",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If the intention here is to have function signatures that are different from #17977, then I'm NACKish on this, since it would create additional rebase work for the author and reviewers of that PR.",
      "created_at" : "2020-07-27T10:35:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-664292688",
      "id" : 664292688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDI5MjY4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T10:35:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664292688",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It's still unresolved if the `CheapHash` function can use `GetHash` (instead of `GetSHA256`) without breaking Addrman's bucketing. See [#19055 (comment)](https://github.com/bitcoin/bitcoin/pull/19055#discussion_r460172516)\r\n\r\nI think that consideration can be left for a follow-up. It is a further behavior change that makes sense to review separately to make sure nothing breaks. And this change here is valuable enough without it for #17977 etc. So after it is merged the other PRs can be rebased and the `CheapHash` discussion can go on without blocking anything.",
      "created_at" : "2020-07-27T12:34:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-664368923",
      "id" : 664368923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDM2ODkyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T12:34:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664368923",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree with @fjahr, it's best if this PR can make no functional changes. Am happy to make a follow-up PR that can be reviewed independently switching cheaphash to a single sha256 (or as sipa points out, even siphash). @Sjors is that OK?\r\n\r\n@jnewbery this PR has been open for half a year, and is a part of my review of the Taproot code. The below should be about the only diff required as a result of interface changes, which mostly have to be patched into 41d08f5d77f52bec0e31bb081d85fff2d67d0467. This code is more clear because m_*_hash is not touched once it has been set.\r\n\r\nRegardless of this PR, the function signatures should be changed to a const ref. It's not clear to me that it's defined behavior to pass an r-value as a non-const ref, which is done in the taproot code currently (hence the interface changes here -- clearly no UB). If there is consensus that the interfaces should not change, preferring the approach in #17977, I can refactor this PR to be similar.\r\n\r\nedit: I guess it's not using UB... I could have sworn somewhere that the input to SHA256Uint256 was a non const...\r\n\r\n```diff\r\ndiff --git a/src/script/interpreter.cpp b/src/script/interpreter.cpp\r\nindex 9ec960d17..003c873d9 100644\r\n--- a/src/script/interpreter.cpp\r\n+++ b/src/script/interpreter.cpp\r\n@@ -1408,12 +1408,12 @@ void PrecomputedTransactionData::Init(const T& txTo, std::vector<CTxOut> spent_o\r\n \r\n     // Cache is calculated only for transactions with witness\r\n     if (txTo.HasWitness()) {\r\n-        m_prevouts_hash = GetPrevoutHash(txTo);\r\n-        hashPrevouts = SHA256Uint256(m_prevouts_hash);\r\n-        m_sequences_hash = GetSequenceHash(txTo);\r\n-        hashSequence = SHA256Uint256(m_sequences_hash);\r\n-        m_outputs_hash = GetOutputsHash(txTo);\r\n-        hashOutputs = SHA256Uint256(m_outputs_hash);\r\n+        hashPrevouts = m_prevouts_hash = GetPrevoutsSHA256(txTo);\r\n+        SHA256Uint256(hashPrevouts);\r\n+        hashSequence = m_sequences_hash = GetSequencesSHA256(txTo);\r\n+        SHA256Uint256(hashSequence);\r\n+        hashOutputs = m_outputs_hash = GetOutputsSHA256(txTo);\r\n+        SHA256Uint256(hashOutputs);\r\n```",
      "created_at" : "2020-07-27T17:41:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-664539720",
      "id" : 664539720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDUzOTcyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T17:49:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664539720",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463255545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463255545"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nano nit: hash_io.size()",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-30T20:35:07Z",
      "diff_hunk" : "@@ -77,3 +77,14 @@ void BIP32Hash(const ChainCode &chainCode, unsigned int nChild, unsigned char he\n     num[3] = (nChild >>  0) & 0xFF;\n     CHMAC_SHA512(chainCode.begin(), chainCode.size()).Write(&header, 1).Write(data, 32).Write(num, 4).Finalize(output);\n }\n+\n+void SHA256Uint256(uint256& hash_io)\n+{\n+    CSHA256().Write(hash_io.begin(), 32).Finalize(hash_io.begin());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463255545",
      "id" : 463255545,
      "line" : 83,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI1NTU0NQ==",
      "original_commit_id" : "b0ac6eb86f98258d14800a8f913f977902aed856",
      "original_line" : 83,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/hash.cpp",
      "position" : 7,
      "pull_request_review_id" : 458736627,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463255545",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463255613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463255613"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nano nit: hash_io.size()",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-30T20:35:13Z",
      "diff_hunk" : "@@ -77,3 +77,14 @@ void BIP32Hash(const ChainCode &chainCode, unsigned int nChild, unsigned char he\n     num[3] = (nChild >>  0) & 0xFF;\n     CHMAC_SHA512(chainCode.begin(), chainCode.size()).Write(&header, 1).Write(data, 32).Write(num, 4).Finalize(output);\n }\n+\n+void SHA256Uint256(uint256& hash_io)\n+{\n+    CSHA256().Write(hash_io.begin(), 32).Finalize(hash_io.begin());\n+}\n+\n+uint256 SHA256Uint256(uint256&& hash_io)\n+{\n+    CSHA256().Write(hash_io.begin(), 32).Finalize(hash_io.begin());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463255613",
      "id" : 463255613,
      "line" : 88,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI1NTYxMw==",
      "original_commit_id" : "b0ac6eb86f98258d14800a8f913f977902aed856",
      "original_line" : 88,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/hash.cpp",
      "position" : 12,
      "pull_request_review_id" : 458736627,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463255613",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463266029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463266029"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We do this a ton of places in the codebase -- might be nice for someone to add a Write/Finalize interface that is uint256 aware and fix these all at once?",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-30T20:55:44Z",
      "diff_hunk" : "@@ -77,3 +77,14 @@ void BIP32Hash(const ChainCode &chainCode, unsigned int nChild, unsigned char he\n     num[3] = (nChild >>  0) & 0xFF;\n     CHMAC_SHA512(chainCode.begin(), chainCode.size()).Write(&header, 1).Write(data, 32).Write(num, 4).Finalize(output);\n }\n+\n+void SHA256Uint256(uint256& hash_io)\n+{\n+    CSHA256().Write(hash_io.begin(), 32).Finalize(hash_io.begin());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463266029",
      "id" : 463266029,
      "in_reply_to_id" : 463255545,
      "line" : 83,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI2NjAyOQ==",
      "original_commit_id" : "b0ac6eb86f98258d14800a8f913f977902aed856",
      "original_line" : 83,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/hash.cpp",
      "position" : 7,
      "pull_request_review_id" : 458750052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463266029",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463275088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463275088"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See #19326 (which only does it for the hash.h ones and not the crypto/* ones, but certainly makes sense as a follow-up there too).",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-07-30T21:14:29Z",
      "diff_hunk" : "@@ -77,3 +77,14 @@ void BIP32Hash(const ChainCode &chainCode, unsigned int nChild, unsigned char he\n     num[3] = (nChild >>  0) & 0xFF;\n     CHMAC_SHA512(chainCode.begin(), chainCode.size()).Write(&header, 1).Write(data, 32).Write(num, 4).Finalize(output);\n }\n+\n+void SHA256Uint256(uint256& hash_io)\n+{\n+    CSHA256().Write(hash_io.begin(), 32).Finalize(hash_io.begin());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r463275088",
      "id" : 463275088,
      "in_reply_to_id" : 463255545,
      "line" : 83,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI3NTA4OA==",
      "original_commit_id" : "b0ac6eb86f98258d14800a8f913f977902aed856",
      "original_line" : 83,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/hash.cpp",
      "position" : 7,
      "pull_request_review_id" : 458761565,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T17:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463275088",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I agree with @fjahr, it's best if this PR can make no functional changes. Am happy to make a follow-up PR that can be reviewed independently switching cheaphash to a single sha256 (or as sipa points out, even siphash). @Sjors is that OK?\r\n\r\nThat makes no sense; cheaphash uses a single sha256. This PR changes it to a double hash, so it's a functional change. Unless I'm reading it wrong.",
      "created_at" : "2020-07-31T17:32:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-667244333",
      "id" : 667244333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzI0NDMzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-31T17:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667244333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors yes you are reading it wrong. The type of ctx changes from double hashed writer to a single hashed writer.",
      "created_at" : "2020-07-31T17:42:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-667248559",
      "id" : 667248559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzI0ODU1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-31T17:42:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667248559",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-03T16:26:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-668116692",
      "id" : 668116692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2ODExNjY5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T16:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/668116692",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've rebased #18071 following the hash.h span changes (but not #19601 -- I can rebase that one if there is a preference for that approach).\r\n\r\npre-rebase summary:\r\n@jnewbery nack-ish (#17977 conflicts may prefer #19601 approach?)\r\n@instagibbs code review ACK (slightly prefers #18071 over #19601)\r\n@fjahr code review ACK (micro nit fixed)\r\n@luke-jr utack\r\n@prestwich utack\r\n@Sjors concept-ack\r\n\r\nPlease check the rebase diff at your convenience!\r\n\r\n@sipa it would be good if you could weigh in on if this is acceptable or if #19601 is better.\r\n\r\nI think since merge of the span.h changes causes #17977 to need to rebase, it might be a decent time to rebase onto this branch without too much extra work.",
      "created_at" : "2020-08-03T19:54:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-668211508",
      "id" : 668211508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2ODIxMTUwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T19:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/668211508",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r464633591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464633591"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What is the point of having these functions instead of a single `uint256 SHA256Uint256(const uint256& input)` ?",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-08-03T20:04:34Z",
      "diff_hunk" : "@@ -194,6 +194,12 @@ uint256 SerializeHash(const T& obj, int nType=SER_GETHASH, int nVersion=PROTOCOL\n     return ss.GetHash();\n }\n \n+/** Single-SHA256 a 32-byte input (represented as uint256).\n+ *  hash_io is read and written over with the result.\n+ */\n+void SHA256Uint256(uint256& hash_io);\n+uint256 SHA256Uint256(uint256&& hash_io);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r464633591",
      "id" : 464633591,
      "line" : 201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYzMzU5MQ==",
      "original_commit_id" : "425ba916d8c341a85722b6032f8d4cd103267f36",
      "original_line" : 201,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/hash.h",
      "position" : 60,
      "pull_request_review_id" : 460305298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-03T20:08:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464633591",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r464733374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464733374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "One benefit is that both versions operate completely in-place on their arguments (otherwise we're reading from a pointer, writing to the stack, then writing to a pointer). Another benefit is that it is slightly harder to misuse this because when you are operating on a l-value there is no return value, which otherwise you might forget to assign.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-08-04T00:36:57Z",
      "diff_hunk" : "@@ -194,6 +194,12 @@ uint256 SerializeHash(const T& obj, int nType=SER_GETHASH, int nVersion=PROTOCOL\n     return ss.GetHash();\n }\n \n+/** Single-SHA256 a 32-byte input (represented as uint256).\n+ *  hash_io is read and written over with the result.\n+ */\n+void SHA256Uint256(uint256& hash_io);\n+uint256 SHA256Uint256(uint256&& hash_io);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r464733374",
      "id" : 464733374,
      "in_reply_to_id" : 464633591,
      "line" : 201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczMzM3NA==",
      "original_commit_id" : "425ba916d8c341a85722b6032f8d4cd103267f36",
      "original_line" : 201,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/hash.h",
      "position" : 60,
      "pull_request_review_id" : 460422246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-04T00:36:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464733374",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah, I missed the switch from `CHash256` (double) to `CSHA256` (single). I wrote a test, which this PR indeed doesn't break:\r\n\r\n```cpp\r\nBOOST_AUTO_TEST_CASE(getcheaphash)\r\n{\r\n    CHashWriter ss(SER_DISK, CLIENT_VERSION);\r\n    ss << 1;\r\n    BOOST_CHECK_EQUAL(ss.GetCheapHash(), 0x8D07CCE5F258F741ULL);    \r\n}\r\n```",
      "created_at" : "2020-08-04T09:11:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#issuecomment-668481325",
      "id" : 668481325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18071",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2ODQ4MTMyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-04T09:11:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/668481325",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r465283390"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465283390"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That could be solved using NODISCARD instead. I don't think saving a super brief 32 bytes on the stack is even going to be be observable.",
      "commit_id" : "03b1cf8e93137187911df8d04ba5ff4f9f9ddaf3",
      "created_at" : "2020-08-04T19:33:24Z",
      "diff_hunk" : "@@ -194,6 +194,12 @@ uint256 SerializeHash(const T& obj, int nType=SER_GETHASH, int nVersion=PROTOCOL\n     return ss.GetHash();\n }\n \n+/** Single-SHA256 a 32-byte input (represented as uint256).\n+ *  hash_io is read and written over with the result.\n+ */\n+void SHA256Uint256(uint256& hash_io);\n+uint256 SHA256Uint256(uint256&& hash_io);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18071#discussion_r465283390",
      "id" : 465283390,
      "in_reply_to_id" : 464633591,
      "line" : 201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI4MzM5MA==",
      "original_commit_id" : "425ba916d8c341a85722b6032f8d4cd103267f36",
      "original_line" : 201,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/hash.h",
      "position" : 60,
      "pull_request_review_id" : 461113619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18071",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-04T19:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465283390",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
