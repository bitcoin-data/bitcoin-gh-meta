[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 5546ed61c65c167ba839df7b5277f8689242ae8b. Sheds light on a confusing corner of the code. ",
      "created_at" : "2020-02-07T21:11:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-583614009",
      "id" : 583614009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MzYxNDAwOQ==",
      "updated_at" : "2020-02-07T21:11:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/583614009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r379129481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/379129481"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"This enable a lightweight onchain covenant where you can be safe than constrained output can't be spent until reaching committed nBlockHeight/nBlockTime\"",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-02-13T21:30:49Z",
      "diff_hunk" : "@@ -1347,9 +1347,9 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r379129481",
      "id" : 379129481,
      "line" : 1441,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEyOTQ4MQ==",
      "original_commit_id" : "5546ed61c65c167ba839df7b5277f8689242ae8b",
      "original_line" : 1441,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 11,
      "pull_request_review_id" : 358565150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/379129481",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r379833669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/379833669"
         }
      },
      "author_association" : "NONE",
      "body" : "I expanded a bit on your suggestion in c4a022d4\r\n\r\np.s. sorry for accidentally clicking resolve",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-02-15T14:09:32Z",
      "diff_hunk" : "@@ -1347,9 +1347,9 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r379833669",
      "id" : 379833669,
      "in_reply_to_id" : 379129481,
      "line" : 1441,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgzMzY2OQ==",
      "original_commit_id" : "5546ed61c65c167ba839df7b5277f8689242ae8b",
      "original_line" : 1441,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 11,
      "pull_request_review_id" : 359347218,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/379833669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-02-17T04:31:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-586812804",
      "id" : 586812804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NjgxMjgwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-06-09T06:05:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/586812804",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r422552076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422552076"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: You could make clear that by final you mean if the nSequence values are maxed out to `0xffffffff`. Perhaps this wording of final is clear to everyone else (in which case ignore).",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-05-09T22:06:58Z",
      "diff_hunk" : "@@ -20,6 +20,15 @@ bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n         return true;\n     if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n         return true;\n+\n+    // Even if tx.nLockTime isn't satisfied by nBlockHeight/nBlockTime, a\n+    // transaction is still considered final if all nSequence values are final,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r422552076",
      "id" : 422552076,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MjA3Ng==",
      "original_commit_id" : "c4a022d4f75384ba9d6978971fcaeabd072a9acc",
      "original_line" : 25,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/consensus/tx_verify.cpp",
      "position" : null,
      "pull_request_review_id" : 408687664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422552076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@nothingmuch could you squash the fixup commit ?",
      "created_at" : "2020-05-09T22:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-626242223",
      "id" : 626242223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjI0MjIyMw==",
      "updated_at" : "2020-05-09T22:13:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626242223",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Done. I've also included @michaelfolkson's suggestion.",
      "created_at" : "2020-05-10T01:28:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-626258591",
      "id" : 626258591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjI1ODU5MQ==",
      "updated_at" : "2020-05-10T01:28:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626258591",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "After rereading the diff I added a minor rewording of the comment explaining nLockTime covenants, since I felt it lacked clarity, and force pushed that so that the PR is still squashed at the moment.",
      "created_at" : "2020-05-10T01:36:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-626259177",
      "id" : 626259177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjI1OTE3Nw==",
      "updated_at" : "2020-05-10T01:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626259177",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK ae93eb3379604a5ee83242f420bb5431fa238b9e. British English spelling of \"behaviour\" but not worth another force push to change in my view.",
      "created_at" : "2020-05-11T15:51:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-626789056",
      "id" : 626789056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjc4OTA1Ng==",
      "updated_at" : "2020-05-11T15:51:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626789056",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r425941699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425941699"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not a huge fan of having function names in the comments, because the code might change over time. eg. theoretically there could be another calling path that also disables, right? \r\n\r\nin this case I don't think its a big deal esp bc its consensus code that seems _quite unlikely_ to change ",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-05-15T17:19:35Z",
      "diff_hunk" : "@@ -1434,16 +1434,22 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r425941699",
      "id" : 425941699,
      "line" : 1437,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk0MTY5OQ==",
      "original_commit_id" : "ae93eb3379604a5ee83242f420bb5431fa238b9e",
      "original_line" : 1437,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 7,
      "pull_request_review_id" : 412830038,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425941699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r425985481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425985481"
         }
      },
      "author_association" : "NONE",
      "body" : "FWIW the rationale for adding it was specifically to cross reference these the two locations in the code, as they are more easily understood together.\r\n\r\nI can definitely see why this is not worth the risk of stale comments, but [edit to add: assuming it's desired] couldn't think of a simpler way.\r\n\r\nMaybe just mentioning `CHECKLOCKTIMEVERIFY` and `SEQUENCE_FINAL` is a good compromise, there are few false positives, and those are even less likely to change.",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-05-15T18:47:25Z",
      "diff_hunk" : "@@ -1434,16 +1434,22 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r425985481",
      "id" : 425985481,
      "in_reply_to_id" : 425941699,
      "line" : 1437,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk4NTQ4MQ==",
      "original_commit_id" : "ae93eb3379604a5ee83242f420bb5431fa238b9e",
      "original_line" : 1437,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 7,
      "pull_request_review_id" : 412886428,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425985481",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r426065637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426065637"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> FWIW the rationale for adding it was specifically to cross reference these the two locations in the code, as they are more easily understood together.\r\n\r\nfair enough. makes sense in this case",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2020-05-15T22:00:13Z",
      "diff_hunk" : "@@ -1434,16 +1434,22 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r426065637",
      "id" : 426065637,
      "in_reply_to_id" : 425941699,
      "line" : 1437,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA2NTYzNw==",
      "original_commit_id" : "ae93eb3379604a5ee83242f420bb5431fa238b9e",
      "original_line" : 1437,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 7,
      "pull_request_review_id" : 412991516,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426065637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, definitely makes sense to document unexpected behaviour in more detail.",
      "created_at" : "2020-07-26T21:14:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-664041343",
      "id" : 664041343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDA0MTM0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-26T21:14:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664041343",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "i fixed both \"behaviour\" and \"the the\", will squash & rebase after i reread everything tomorrow",
      "created_at" : "2020-07-26T23:09:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-664052311",
      "id" : 664052311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDA1MjMxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-26T23:09:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664052311",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "so, despite previous ACKs i couldn't resist rephrasing the paragraph about the locktime covenants, since i could barely understand what i had originally meant by it... squashed and rebased on master",
      "created_at" : "2020-07-28T02:56:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-664746288",
      "id" : 664746288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDc0NjI4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-28T02:56:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664746288",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK abc8f3bae2cd9a65e170528d77973307050c5b47.\r\n\r\nHoping this PR can get merged soon! ",
      "created_at" : "2020-08-08T03:35:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-670817502",
      "id" : 670817502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MDgxNzUwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-08T03:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/670817502",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK `abc8f3b`",
      "created_at" : "2020-09-08T23:42:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-689193009",
      "id" : 689193009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTE5MzAwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T23:42:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689193009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK abc8f3b. Looks good.",
      "created_at" : "2020-09-09T03:53:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-689284793",
      "id" : 689284793,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTI4NDc5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-09T03:53:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689284793",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/23586626?v=4",
         "events_url" : "https://api.github.com/users/Zero-1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Zero-1729/followers",
         "following_url" : "https://api.github.com/users/Zero-1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Zero-1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Zero-1729",
         "id" : 23586626,
         "login" : "Zero-1729",
         "node_id" : "MDQ6VXNlcjIzNTg2NjI2",
         "organizations_url" : "https://api.github.com/users/Zero-1729/orgs",
         "received_events_url" : "https://api.github.com/users/Zero-1729/received_events",
         "repos_url" : "https://api.github.com/users/Zero-1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Zero-1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Zero-1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Zero-1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r617375783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617375783"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the Bitcoin Core source code (or interpreter source code) is the wrong place to document what is possible with each opcode. Better places to document this is the BIPs repo (or stackexchange, the mailing list, your private blog or website, ...).\r\n\r\nIn fact the BIP already mentions several use cases. See https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki#Motivation . Should the other use-cases be copy-pasted here as well? If a new use-case is found, should it be copied here, too? How much review/maintenance time is this going to consume?\r\n\r\nAlso, you mention the word `covenant`, which isn't defined in our source code, nor the BIP text. I think this section adds more confusion for anyone reading the BIP and then this section. ",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2021-04-21T09:52:25Z",
      "diff_hunk" : "@@ -1434,16 +1434,23 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.\n     //\n     // Testing if this vin is not final is sufficient to\n     // prevent this condition. Alternatively we could test all\n     // inputs, but testing just this input minimizes the data\n     // required to prove correct CHECKLOCKTIMEVERIFY execution.\n+    //\n+    // This additional constraint enables a kind of lightweight\n+    // covenant: by using OP_CHECKLOCKTIMEVERIFY an output may\n+    // be unspendable until a specific nBlockHeight/nBlockTime\n+    // committed in the scriptPubKey, as opposed to a spending\n+    // transaction's nLockTime only being constrained by\n+    // signature verification.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r617375783",
      "id" : 617375783,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNzM3NTc4Mw==",
      "original_commit_id" : "abc8f3bae2cd9a65e170528d77973307050c5b47",
      "original_line" : 1453,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 640874901,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617375783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r617607405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617607405"
         }
      },
      "author_association" : "NONE",
      "body" : "That sounds reasonable to me and fits in with the original motivation. @ariard since this was your [suggestion](https://github.com/bitcoin/bitcoin/pull/18096#discussion_r379129481) do you mind if I remove it?",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2021-04-21T14:35:18Z",
      "diff_hunk" : "@@ -1434,16 +1434,23 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.\n     //\n     // Testing if this vin is not final is sufficient to\n     // prevent this condition. Alternatively we could test all\n     // inputs, but testing just this input minimizes the data\n     // required to prove correct CHECKLOCKTIMEVERIFY execution.\n+    //\n+    // This additional constraint enables a kind of lightweight\n+    // covenant: by using OP_CHECKLOCKTIMEVERIFY an output may\n+    // be unspendable until a specific nBlockHeight/nBlockTime\n+    // committed in the scriptPubKey, as opposed to a spending\n+    // transaction's nLockTime only being constrained by\n+    // signature verification.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r617607405",
      "id" : 617607405,
      "in_reply_to_id" : 617375783,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNzYwNzQwNQ==",
      "original_commit_id" : "abc8f3bae2cd9a65e170528d77973307050c5b47",
      "original_line" : 1453,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 641172456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/617607405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r619572373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619572373"
         }
      },
      "author_association" : "NONE",
      "body" : "I went ahead and removed this addition.",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2021-04-24T03:14:01Z",
      "diff_hunk" : "@@ -1434,16 +1434,23 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.\n     //\n     // Testing if this vin is not final is sufficient to\n     // prevent this condition. Alternatively we could test all\n     // inputs, but testing just this input minimizes the data\n     // required to prove correct CHECKLOCKTIMEVERIFY execution.\n+    //\n+    // This additional constraint enables a kind of lightweight\n+    // covenant: by using OP_CHECKLOCKTIMEVERIFY an output may\n+    // be unspendable until a specific nBlockHeight/nBlockTime\n+    // committed in the scriptPubKey, as opposed to a spending\n+    // transaction's nLockTime only being constrained by\n+    // signature verification.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r619572373",
      "id" : 619572373,
      "in_reply_to_id" : 617375783,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxOTU3MjM3Mw==",
      "original_commit_id" : "abc8f3bae2cd9a65e170528d77973307050c5b47",
      "original_line" : 1453,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 643746767,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-24T03:14:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/619572373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14242?v=4",
         "events_url" : "https://api.github.com/users/nothingmuch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nothingmuch/followers",
         "following_url" : "https://api.github.com/users/nothingmuch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nothingmuch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nothingmuch",
         "id" : 14242,
         "login" : "nothingmuch",
         "node_id" : "MDQ6VXNlcjE0MjQy",
         "organizations_url" : "https://api.github.com/users/nothingmuch/orgs",
         "received_events_url" : "https://api.github.com/users/nothingmuch/received_events",
         "repos_url" : "https://api.github.com/users/nothingmuch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nothingmuch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nothingmuch"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r620505684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620505684"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fine to remove it. IIRC, I did advise you this comment because I was surprised to see nowhere this relation between nLocktime enforcement and finality of inputs documented. At least not in BOLT3, where timeout transactions nSequence are carefully set to non-final.\r\n\r\nOverall I agree with @MarcoFalke. Though I would say some mechanism usage towards specific Bitcoin applications are already documented in the codebase. For e.g the carve-out rule in the mempool : https://github.com/bitcoin/bitcoin/blob/683dda2a70e7a210996fa34be23bd0c563971ba9/src/validation.cpp#L801",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2021-04-26T17:31:16Z",
      "diff_hunk" : "@@ -1434,16 +1434,23 @@ bool GenericTransactionSignatureChecker<T>::CheckLockTime(const CScriptNum& nLoc\n     if (nLockTime > (int64_t)txTo->nLockTime)\n         return false;\n \n-    // Finally the nLockTime feature can be disabled and thus\n-    // CHECKLOCKTIMEVERIFY bypassed if every txin has been\n-    // finalized by setting nSequence to maxint. The\n+    // Finally the nLockTime feature can be disabled in IsFinalTx()\n+    // and thus CHECKLOCKTIMEVERIFY bypassed if every txin has\n+    // been finalized by setting nSequence to maxint. The\n     // transaction would be allowed into the blockchain, making\n     // the opcode ineffective.\n     //\n     // Testing if this vin is not final is sufficient to\n     // prevent this condition. Alternatively we could test all\n     // inputs, but testing just this input minimizes the data\n     // required to prove correct CHECKLOCKTIMEVERIFY execution.\n+    //\n+    // This additional constraint enables a kind of lightweight\n+    // covenant: by using OP_CHECKLOCKTIMEVERIFY an output may\n+    // be unspendable until a specific nBlockHeight/nBlockTime\n+    // committed in the scriptPubKey, as opposed to a spending\n+    // transaction's nLockTime only being constrained by\n+    // signature verification.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r620505684",
      "id" : 620505684,
      "in_reply_to_id" : 617375783,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDUwNTY4NA==",
      "original_commit_id" : "abc8f3bae2cd9a65e170528d77973307050c5b47",
      "original_line" : 1453,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_review_id" : 644940322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-26T17:31:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620505684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r620505955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620505955"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: if all inputs's nSequence",
      "commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "created_at" : "2021-04-26T17:31:38Z",
      "diff_hunk" : "@@ -20,6 +20,15 @@ bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n         return true;\n     if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n         return true;\n+\n+    // Even if tx.nLockTime isn't satisfied by nBlockHeight/nBlockTime, a\n+    // transaction is still considered final if all nSequence == SEQUENCE_FINAL",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#discussion_r620505955",
      "id" : 620505955,
      "line" : 25,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDUwNTk1NQ==",
      "original_commit_id" : "047c6075edbf8186f4acc00b709b918a29e7c547",
      "original_line" : 25,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/consensus/tx_verify.cpp",
      "position" : 6,
      "pull_request_review_id" : 644940633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18096",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-26T17:32:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620505955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK f9e37f33ce2d8b463a0bcbe7189c9bc5b36530b7",
      "created_at" : "2021-06-29T07:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18096#issuecomment-870357492",
      "id" : 870357492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDM1NzQ5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T07:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870357492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
