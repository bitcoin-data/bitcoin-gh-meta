{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "I noticed that the sum of my unspent outputs is greater than my balance.\r\n\r\nUpon investigating it turns out that this is because one of my outputs is marked as \"used\", even though it hasn't been.\r\n\r\nTracing through the execution I see that `CWallet::IsSpentKey()` is returning here:\r\n\r\n    if (IsAddressUsed(dest)) {\r\n        return true;\r\n    }\r\n\r\nand `IsAddressUsed()` is looking for key `used` in the address book for that address, and presumably finding it.\r\n\r\nThe address of the UTXO in question only has a single transaction, creating my UTXO. The address isn't reused, and no other address with the same public key is used either.\r\n\r\nThe UTXO was created in Feb 2020 and I've used many different versions of Bitcoin Core since then, so I don't know when or why the UTXO's address was marked as \"used\".\r\n\r\nCould it be that I made a transaction that spent that UTXO but the transaction never confirmed and I later \"zapped\" it? Or RBF'ed it, causing different inputs to be used?",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317/comments",
   "created_at" : "2022-10-15T04:02:21Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/26317",
   "id" : 1410034075,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585UC2mb",
   "number" : 26317,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317/timeline",
   "title" : "avoid_reuse=true is incorrectly skipping one of my UXTOs",
   "updated_at" : "2022-10-15T04:03:34Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26317",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
      "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dooglus/followers",
      "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dooglus",
      "id" : 573356,
      "login" : "dooglus",
      "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
      "organizations_url" : "https://api.github.com/users/dooglus/orgs",
      "received_events_url" : "https://api.github.com/users/dooglus/received_events",
      "repos_url" : "https://api.github.com/users/dooglus/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dooglus"
   }
}
