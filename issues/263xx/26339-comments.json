[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "With the same build on Ubuntu 22.04 I could not reproduce this error with a number of tests. I did however take a shortcut which could have influenced the outcome, namely only performing a ~10,000 block rescan, but using `bitcoin-cli -rpctimeout=5 rescanblockchain 750000` so that my bitcoin-cli call would time out in the same way as yours before the rescan was complete.\r\n\r\nThe first timeout is expected as the function call will likely not return before a full chain rescan is complete. In my tests I could still check rescan progress and cancel the scan with `abortrescan` as expected. Additional `bitcoin-cli` calls after the rescan was complete such as `listunspent` also still worked.\r\n\r\n`SIGPIPE` on `b-http` indicates that bitcoin-qt tried to write back to an RPC/REST socket, presumably the call from `bitcoin-cli rescanblockchain` in this case, and found it closed. However my tests indicate that Bitcoin Core (and libevent) is generally robust when trying to write back to closed FDs:\r\n\r\n<details>\r\n  <summary>Log file for early cli return on rescanblockchain</summary>\r\n  \r\n```\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004eb0 (fd -1), callback 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004f30 (fd -1), callback 0x7f7315b3b500\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event: 0x7f7224004f30 (fd 21),  EV_WRITE   call 0x7f7315b3b500\r\n2022-10-19T21:25:10Z [libevent:debug] Epoll ADD(4) on fd 21 okay. Old events were 0; read change was 0 (none); write change was 1 (add); close change was 0 (none)\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ    call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] Epoll MOD(5) on fd 21 okay. Old events were 4; read change was 1 (add); write change was 0 (none); close change was 0 (none)\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004f30 (fd 21), callback 0x7f7315b3b500\r\n2022-10-19T21:25:10Z [libevent:debug] Epoll MOD(1) on fd 21 okay. Old events were 6; read change was 0 (none); write change was 2 (del); close change was 0 (none)\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ   EV_TIMEOUT call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event 0x7f7224004eb0, timeout in 30 seconds 0 useconds, call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004f30 (fd 21), callback 0x7f7315b3b500\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ   EV_TIMEOUT call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event 0x7f7224004eb0, timeout in 30 seconds 0 useconds, call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] timeout_next: event: 0x7f7224004eb0, in 30 seconds, 0 useconds\r\n2022-10-19T21:25:10Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2022-10-19T21:25:10Z [libevent:debug] event_active: 0x7f7224004eb0 (fd 21), res 2, callback 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_process_active: event: 0x7f7224004eb0, EV_READ   call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ   EV_TIMEOUT call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_add: event 0x7f7224004eb0, timeout in 87440 seconds 75927 useconds, call 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_add_header: key: Host val: 127.0.0.1\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_add_header: key: Connection val: close\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_add_header: key: Content-Type val: application/json\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_add_header: key: Authorization val: Basic X19jb29raWVfXzo5MGUxNTRjOTA2NWM5ODlkMmM1MTg3NTE1NTM0NDljMzUwNzEzODFmNjQ5ZjA5MGU4ZjBmMTUzZGY3MWI1MzM0\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_add_header: key: Content-Length val: 55\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_read_header: checking for post data on 21\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] evhttp_get_body_length: bytes to read: 55 (in buffer 55)\r\n\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004eb0 (fd 21), callback 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] Epoll DEL(1) on fd 21 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004eb0 (fd 21), callback 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [libevent:debug] event_del: 0x7f7224004eb0 (fd 21), callback 0x7f7315b3ad70\r\n2022-10-19T21:25:10Z [http] Received a POST request for / from 127.0.0.1:56524\r\n2022-10-19T21:25:10Z [rpc] ThreadRPCServer method=rescanblockchain user=__cookie__\r\n2022-10-19T21:25:10Z [timeouttestwallet] Rescan started from block 000000000000000000073cdaa0c1e5f91707f7b3217a4b3265d2e783f2fa83db...\r\n2022-10-19T21:25:30Z [timeouttestwallet] Scanning current mempool transactions.\r\n2022-10-19T21:25:30Z [timeouttestwallet] Rescan completed in           19911ms\r\n2022-10-19T21:25:30Z [libevent:debug] evhttp_add_header: key: Content-Type val: application/json\r\n\r\n2022-10-19T21:25:30Z [libevent:debug] event_active: 0x7f71e418b040 (fd -1), res 0, callback 0x56005b0b71c0\r\n2022-10-19T21:25:30Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2022-10-19T21:25:30Z [libevent:debug] event_active: 0x7f72740688e0 (fd 44), res 2, callback 0x7f7315b45620\r\n2022-10-19T21:25:30Z [libevent:debug] event_del: 0x7f71e418b040 (fd -1), callback 0x56005b0b71c0\r\n2022-10-19T21:25:30Z [libevent:debug] event_process_active: event: 0x7f71e418b040,    call 0x56005b0b71c0\r\n2022-10-19T21:25:30Z [libevent:debug] evhttp_add_header: key: Date val: Wed, 19 Oct 2022 21:25:30 GMT\r\n\r\n2022-10-19T21:25:30Z [libevent:debug] evhttp_add_header: key: Content-Length val: 76\r\n\r\n2022-10-19T21:25:30Z [libevent:debug] evhttp_add_header: key: Connection val: close\r\n\r\n2022-10-19T21:25:30Z [libevent:debug] evhttp_write_buffer: preparing to write buffer\r\n\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ   EV_TIMEOUT call 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] Epoll ADD(1) on fd 21 okay. Old events were 0; read change was 1 (add); write change was 0 (none); close change was 0 (none)\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event 0x7f7224004eb0, timeout in 30 seconds 0 useconds, call 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event: 0x7f7224004f30 (fd 21),  EV_WRITE  EV_TIMEOUT call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] Epoll MOD(5) on fd 21 okay. Old events were 2; read change was 0 (none); write change was 1 (add); close change was 0 (none)\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event 0x7f7224004f30, timeout in 30 seconds 0 useconds, call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event: 0x7f7224004eb0 (fd 21), EV_READ   EV_TIMEOUT call 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event 0x7f7224004eb0, timeout in 30 seconds 0 useconds, call 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event: 0x7f7224004f30 (fd 21),  EV_WRITE  EV_TIMEOUT call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event 0x7f7224004f30, timeout in 30 seconds 0 useconds, call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_del: 0x7f71e418b040 (fd -1), callback 0x56005b0b71c0\r\n2022-10-19T21:25:30Z [libevent:debug] event_process_active: event: 0x7f72740688e0, EV_READ   call 0x7f7315b45620\r\n2022-10-19T21:25:30Z [libevent:debug] timeout_next: event: 0x7f7224004eb0, in 30 seconds, 0 useconds\r\n2022-10-19T21:25:30Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2022-10-19T21:25:30Z [libevent:debug] event_active: 0x7f7224004f30 (fd 21), res 4, callback 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_active: 0x7f7224004eb0 (fd 21), res 2, callback 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] event_process_active: event: 0x7f7224004f30,  EV_WRITE  call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event: 0x7f7224004f30 (fd 21),  EV_WRITE  EV_TIMEOUT call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_add: event 0x7f7224004f30, timeout in 87459 seconds 987941 useconds, call 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_del: 0x7f7224004f30 (fd 21), callback 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] Epoll MOD(1) on fd 21 okay. Old events were 6; read change was 0 (none); write change was 2 (del); close change was 0 (none)\r\n2022-10-19T21:25:30Z [libevent:debug] event_callback_finalize_many_: 3 events finalizing\r\n2022-10-19T21:25:30Z [libevent:debug] event_del: 0x7f7224004eb0 (fd 21), callback 0x7f7315b3ad70\r\n2022-10-19T21:25:30Z [libevent:debug] Epoll DEL(1) on fd 21 gave Bad file descriptor: DEL was unnecessary.\r\n2022-10-19T21:25:30Z [libevent:debug] event_del: 0x7f7224004f30 (fd 21), callback 0x7f7315b3b500\r\n2022-10-19T21:25:30Z [libevent:debug] event_process_active: event: 0x7f7224004f30,  EV_WRITE  call 0x7f7315b38720\r\n```\r\n</details>\r\n\r\nI am not able to decipher your particular libevent stacktrace, but perhaps someone else (@promag ?) might know more.",
      "created_at" : "2022-10-19T21:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1284601207",
      "id" : 1284601207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MkXV3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284601207/reactions"
      },
      "updated_at" : "2022-10-19T21:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284601207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@willcl-ark I tried reproducing the crash using the `-rpctimeout` option that you mentioned but am not finding it:\r\n\r\n    $ bitcoin-cli -rpctimeout=5 rescanblockchain 750000\r\n    Error parsing command line arguments: Invalid parameter -rpctimeout=5\r\n\r\nDid you type it wrongly?\r\n\r\nEdit: never mind - it's `-rpcclienttimeout=5`, and trying to shortcut it using that doesn't make it crash for me either. I'll try another very large rescan overnight tonight to see if it crashes again.\r\n\r\n    $ bitcoin-cli -rpcclienttimeout=1 rescanblockchain 700000 700100\r\n    error: timeout on transient error: Could not connect to the server 127.0.0.1:8332 (error code 0 - \"timeout reached\")\r\n    \r\n    Make sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n    \r\n    $ bitcoin-cli -rpcclienttimeout=11 rescanblockchain 700000 700100\r\n    {\r\n      \"start_height\": 700000,\r\n      \"stop_height\": 700100\r\n    }\r\n\r\nie. after the timeout the bitcoin-qt is still responsive.",
      "created_at" : "2022-10-19T22:55:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1284655262",
      "id" : 1284655262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585Mkkie",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284655262/reactions"
      },
      "updated_at" : "2022-10-19T23:14:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284655262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah yes, it should say `rpcclienttimeout`. And it's not a crash per se, but just the rpc not returning before the timeout.",
      "created_at" : "2022-10-19T23:31:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1284700324",
      "id" : 1284700324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585Mkvik",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284700324/reactions"
      },
      "updated_at" : "2022-10-19T23:31:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284700324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The bitcoin-qt process exited immediately upon receiving a SIGPIPE signal. I'd call that a crash. No clean shutdown, it just stopped running.\r\n\r\nI've seen lots of timeouts from bitcoin-cli in the past but never before yesterday have I seen it cause the bitcoin server to exit.",
      "created_at" : "2022-10-19T23:50:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1284712232",
      "id" : 1284712232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585Mkyco",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284712232/reactions"
      },
      "updated_at" : "2022-10-19T23:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1284712232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree `SIGPIPE` should not crash the entire program. Unfortunately I am still unable to reproduce your crash. I have just tested sending `SIGPIPE` to the http thread whilst in the middle of a rescan (and watching it in gdb), and whilst the signal is detected, execution appears to continue as normal and bitcoin-qt remains operational.\r\n\r\n<details>\r\n  <summary>gdb log</summary>\r\n\r\n```\r\nBreakpoint 1 at 0x9c3d16: file ./src/httprpc.cpp, line 179.\r\nStarting program: /home/will/src/bitcoin/src/qt/bitcoin-qt \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n\r\n// snip\r\n// called `bitcoin-cli -rpcclienttimeout=1 rescanblockchain 790000`\r\n\r\n[Switching to Thread 0x7fff24ff9640 (LWP 2248544)]\r\n\r\nThread 51 \"b-httpworker.0\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff00001b10) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n\r\n// sent SIGPIPE to thread 2248544\r\n\r\nThread 51 \"b-httpworker.0\" received signal SIGPIPE, Broken pipe.\r\n0x0000555555fcc66e in std::_Hash_impl::hash<unsigned long> (__val=@0x7fff24ff59b8: 140733814117952) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/functional_hash.h:203\r\n203\t      { return hash(&__val, sizeof(__val)); }\r\n#0  0x0000555555fcc66e in std::_Hash_impl::hash<unsigned long> (__val=@0x7fff24ff59b8: 140733814117952)\r\n    at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/functional_hash.h:203\r\n#1  0x0000555555fcc58a in std::hash<std::thread::id>::operator() (this=0x5555572646e0, __id=...)\r\n    at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:300\r\n#2  0x0000555555fcc1e6 in std::__detail::_Hash_code_base<std::thread::id, std::pair<std::thread::id const, std::vector<std::pair<void*, CLockLocation>, std::allocator<std::pair<void*, CLockLocation> > > >, std::__detail::_Select1st, std::hash<std::thread::id>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code (\r\n    this=0x5555572646e0, __k=...)\r\n    at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/hashtable_policy.h:1219\r\n#3  0x0000555555fcdb69 in std::__detail::_Map_base<std::thread::id, std::pair<std::thread::id const, std::vector<std::pair<void*, CLockLocation>, std::allocator<std::pair<void*, CLockLocation> > > >, std::allocator<std::pair<std::thread::id const, std::vector<std::pair<void*, CLockLocation>, std::allocator<std::pair<void*, CLockLocation> > > > >, std::__detail::_Select1st, std::equal_to<std::thread::id>, std::hash<std::thread::id>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>, true>::operator[] (this=0x5555572646e0, __k=...)\r\n    at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/hashtable_policy.h:729\r\n#4  0x0000555555fca31e in std::unordered_map<std::thread::id, std::vector<std::pair<void*, CLockLocation>, std::allocator<std::pair<void*, CLockLocation> > >, std::hash<std::thread::id>, std::equal_to<std::thread::id>, std::allocator<std::pair<std::thread::id const, std::vector<std::pair<void*, CLockLocation>, std::allocator<std::pair<void*, CLockLocation> > > > > >::operator[] (this=0x5555572646e0, __k=...)\r\n    at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/unordered_map.h:984\r\n#5  0x0000555555fc7d80 in pop_lock () at ./src/sync.cpp:201\r\n#6  0x0000555555fc7d0e in LeaveCritical () at ./src/sync.cpp:246\r\n#7  0x00005555558d5e1c in UniqueLock<AnnotatedMixin<std::recursive_mutex>, std::unique_lock<std::recursive_mutex> >::~UniqueLock (this=0x7fff24ff5ac8) at ./sync.h:198\r\n#8  0x00005555561e5609 in wallet::CWallet::GetDebit (this=0x7ffeb7161390, txin=..., filter=@0x7fff24ff5bf4: 3)\r\n    at ./src/wallet/wallet.cpp:1404\r\n#9  0x00005555561e59c7 in wallet::CWallet::GetDebit (this=0x7ffeb7161390, tx=..., filter=@0x7fff24ff5bf4: 3)\r\n    at ./src/wallet/wallet.cpp:1462\r\n#10 0x00005555561e3359 in wallet::CWallet::IsFromMe (this=0x7ffeb7161390, tx=...) at ./src/wallet/wallet.cpp:1454\r\n#11 0x00005555561e2be6 in wallet::CWallet::AddToWalletIfInvolvingMe (this=0x7ffeb7161390, ptx=warning: RTTI symbol not found for class 'std::_Sp_counted_ptr_inplace<CTransaction const, std::allocator<CTransaction>, (__gnu_cxx::_Lock_policy)2>'\r\nwarning: RTTI symbol not found for class 'std::_Sp_counted_ptr_inplace<CTransaction const, std::allocator<CTransaction>, (__gnu_cxx::_Lock_policy)2>'\r\nstd::shared_ptr<const CTransaction> (use count 1, weak count 0) = {...}, state=std::variant<wallet::TxStateConfirmed, wallet::TxStateInMempool, wallet::TxStateInactive> [index 0] = {...}, fUpdate=true, rescanning_old_block=true) at ./src/wallet/wallet.cpp:1121\r\n#12 0x00005555561e478a in wallet::CWallet::SyncTransaction (this=0x7ffeb7161390, ptx=warning: RTTI symbol not found for class 'std::_Sp_counted_ptr_inplace<CTransaction const, std::allocator<CTransaction>, (__gnu_cxx::_Lock_policy)2>'\r\nwarning: RTTI symbol not found for class 'std::_Sp_counted_ptr_inplace<CTransaction const, std::allocator<CTransaction>, (__gnu_cxx::_Lock_policy)2>'\r\nstd::shared_ptr<const CTransaction> (use count 1, weak count 0) = {...}, state=std::variant<wallet::TxStateConfirmed, wallet::TxStateInMempool, wallet::TxStateInactive> [index 0] = {...}, update_tx=true, rescanning_old_block=true) at ./src/wallet/wallet.cpp:1290\r\n#13 0x00005555561e8e90 in wallet::CWallet::ScanForWalletTransactions (this=0x7ffeb7161390, start_block=..., start_height=759000, max_height=std::optional<int> [no contained value], reserver=..., fUpdate=true, save_progress=false) at ./src/wallet/wallet.cpp:1806\r\n#14 0x00005555563d961f in wallet::rescanblockchain()::$_7::operator()(RPCHelpMan const&, JSONRPCRequest const&) const (this=0x7fff24ff7180, self=..., request=...) at ./src/wallet/rpc/transactions.cpp:905\r\n#15 0x00005555563d8ab7 in std::__invoke_impl<UniValue, wallet::rescanblockchain()::$_7&, RPCHelpMan const&, JSONRPCRequest const&>(std::__invoke_other, wallet::rescanblockchain()::$_7&, RPCHelpMan const&, JSONRPCRequest const&) (__f=..., __args=..., __args=...) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#16 0x00005555563d89c7 in std::__invoke_r<UniValue, wallet::rescanblockchain()::$_7&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::rescanblockchain()::$_7&, RPCHelpMan const&, JSONRPCRequest const&) (__fn=..., __args=..., __args=...) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:114\r\n#17 0x00005555563d882b in std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), wallet::rescanblockchain()::$_7>::_M_invoke(std::_Any_data const&, RPCHelpMan const&, JSONRPCRequest const&) (__functor=..., __args=..., __args=...) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:290\r\n#18 0x000055555649aa4a in std::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const (this=0x7fff24ff7180, __args=..., __args=...) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:590\r\n#19 0x0000555556494194 in RPCHelpMan::HandleRequest (this=0x7fff24ff7160, request=...) at ./src/rpc/util.cpp:585\r\n#20 0x0000555555bfe00c in CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x55555722d4c0 <wallet::GetWalletRPCCommands()::commands+6080>, request=..., result=...) at ./rpc/server.h:109\r\n#21 0x0000555555bfdf20 in std::__invoke_impl<bool, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(std::__invoke_other, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__f=..., __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#22 0x0000555555bfde1d in std::__invoke_r<bool, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__fn=..., __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:114\r\n#23 0x0000555555bfdc4d in std::_Function_handler<bool (JSONRPCRequest const&, UniValue&, bool), CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, RPCHelpMan (*)())::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}>::_M_invoke(std::_Any_data const&, JSONRPCRequest const&, UniValue&, bool&&) (__functor=..., __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true, __args=@0x7fff24ff73e7: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:290\r\n#24 0x0000555555b54c9f in std::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x55555722d4c0 <wallet::GetWalletRPCCommands()::commands+6080>, __args=true, __args=true, __args=true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:590\r\n#25 0x00005555560b2795 in wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x7fff5006a170, request=..., result=..., last_handler=true) at ./src/wallet/interfaces.cpp:541\r\n#26 0x00005555560b265c in std::__invoke_impl<bool, wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(std::__invoke_other, wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__f=..., __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#27 0x00005555560b2559 in std::__invoke_r<bool, wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__fn=..., __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:114\r\n#28 0x00005555560b238d in std::_Function_handler<bool (JSONRPCRequest const&, UniValue&, bool), wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}>::_M_invoke(std::_Any_data const&, JSONRPCRequest const&, UniValue&, bool&&) (__functor=..., __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true, __args=@0x7fff24ff7717: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:290\r\n#29 0x0000555555b54c9f in std::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x7fff5006a170, __args=true, __args=true, __args=true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:590\r\n#30 0x0000555555b46840 in node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x7fff5006a228, request=..., result=..., last_handler=true) at ./src/node/interfaces.cpp:469\r\n#31 0x0000555555b4674c in std::__invoke_impl<bool, node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(std::__invoke_other, node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__f=..., __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#32 0x0000555555b46649 in std::__invoke_r<bool, node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}&, JSONRPCRequest const&, UniValue&, bool&&) (__fn=..., __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:114\r\n#33 0x0000555555b4647d in std::_Function_handler<bool (JSONRPCRequest const&, UniValue&, bool), node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::{lambda(JSONRPCRequest const&, UniValue&, bool)#1}>::_M_invoke(std::_Any_data const&, JSONRPCRequest const&, UniValue&, bool&&) (__functor=..., __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true, __args=@0x7fff24ff7957: true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:290\r\n#34 0x0000555555b54c9f in std::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const (this=0x7fff5006a228, __args=true, __args=true, __args=true) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:590\r\n#35 0x0000555555d2c3af in ExecuteCommand (command=..., request=..., result=..., last_handler=true) at ./src/rpc/server.cpp:476\r\n#36 0x0000555555d27d9a in ExecuteCommands (commands=std::vector of length 1, capacity 1 = {...}, request=..., result=...) at ./src/rpc/server.cpp:440\r\n#37 0x0000555555d27b2d in CRPCTable::execute (this=0x555557229398 <tableRPC>, request=...) at ./src/rpc/server.cpp:460\r\n#38 0x0000555555f184a8 in HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff00001b10) at ./src/httprpc.cpp:201\r\n#39 0x0000555555f1741e in StartHTTPRPC(std::any const&)::$_0::operator()(HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const (this=0x7fff00001d20, req=0x7fff00001b10) at ./src/httprpc.cpp:300\r\n#40 0x0000555555f173b7 in std::__invoke_impl<bool, StartHTTPRPC(std::any const&)::$_0&, HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>(std::__invoke_other, StartHTTPRPC(std::any const&)::$_0&, HTTPRequest*&&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (__f=..., __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n, __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#41 0x0000555555f172e4 in std::__invoke_r<bool, StartHTTPRPC(std::any const&)::$_0&, HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>(StartHTTPRPC(std::any const&)::$_0&, HTTPRequest*&&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (__fn=..., __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n, __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:114\r\n#42 0x0000555555f17048 in std::_Function_handler<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&), StartHTTPRPC(std::any const&)::$_0>::_M_invoke(std::_Any_data const&, HTTPRequest*&&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (__functor=..., __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n, __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:290\r\n#43 0x0000555555f2f2e7 in std::function<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>::operator()(HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const (this=0x7fff00001cf0, __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n, __args=Python Exception <class 'gdb.error'>: There is no member named _M_p.\r\n) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:590\r\n#44 0x0000555555f2f11d in HTTPWorkItem::operator() (this=0x7fff00001cc0) at ./src/httpserver.cpp:56\r\n#45 0x0000555555f35f01 in WorkQueue<HTTPClosure>::Run (this=0x7fff5004f490) at ./src/httpserver.cpp:111\r\n#46 0x0000555555f25be2 in HTTPWorkQueueRun (queue=0x7fff5004f490, worker_num=0) at ./src/httpserver.cpp:343\r\n#47 0x0000555555f39fbd in std::__invoke_impl<void, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int> (__f=@0x7fff5006c008: 0x555555f25b80 <HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int)>, __args=@0x7fff5006bff8: 0, __args=@0x7fff5006bff8: 0) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61\r\n#48 0x0000555555f39dc8 in std::__invoke<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int> (__fn=@0x7fff5006c008: 0x555555f25b80 <HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int)>, __args=@0x7fff5006bff8: 0, __args=@0x7fff5006bff8: 0) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:96\r\n#49 0x0000555555f39d4c in std::thread::_Invoker<std::tuple<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int> >::_M_invoke<0ul, 1ul, 2ul> (this=0x7fff5006bff8) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:253\r\n#50 0x0000555555f39cb6 in std::thread::_Invoker<std::tuple<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int> >::operator() (this=0x7fff5006bff8) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:260\r\n#51 0x0000555555f399ca in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int> > >::_M_run (this=0x7fff5006bff0) at /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:211\r\n#52 0x00007ffff66ac2b3 in ?? () from /lib/x86_64-linux-gnu/libstdc++.so.6\r\n#53 0x00007ffff6335b43 in start_thread (arg=<optimised out>) at ./nptl/pthread_create.c:442\r\n#54 0x00007ffff63c7a00 in clone3 () at ../sysdeps/unix/sysv/linux/x86_64/clone3.S:81\r\nContinuing.\r\n\r\n// snip\r\n// sent `bitcoin-cli getwalletinfo` command\r\n\r\n[Switching to Thread 0x7fff1ffff640 (LWP 2248545)]\r\n\r\nThread 52 \"b-httpworker.1\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff00001b60) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n\r\n// sent `bitcoin-cli stop` command\r\n\r\n[Switching to Thread 0x7fff1effd640 (LWP 2248546)]\r\n\r\nThread 53 \"b-httpworker.2\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff00001250) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n\r\n// snip\r\n\r\n[Inferior 1 (process 2247667) exited normally]\r\n```\r\n\r\n</details>",
      "created_at" : "2022-10-20T09:38:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1285233446",
      "id" : 1285233446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585Mmxsm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285233446/reactions"
      },
      "updated_at" : "2022-10-20T09:38:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285233446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  bitcoin-qt crashed with this error in gdb\r\n\r\nCould it be possible that a crash is caused by gdb?\r\n\r\nSee: https://ahlamnote.blogspot.com/2006/12/gdb-ignore-sigpipe.html.",
      "created_at" : "2022-10-20T11:47:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1285388212",
      "id" : 1285388212,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MnXe0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285388212/reactions"
      },
      "updated_at" : "2022-10-20T11:48:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285388212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Interesting idea. I did just test that (once) and saw no difference in behaviour (i.e. it did not crash qt):\r\n\r\n<details>\r\n  <summary>gdb log</summary>\r\n\r\n```\r\nBreakpoint 1 at 0x9c3d16: file ./src/httprpc.cpp, line 179.\r\nSignal        Stop\tPrint\tPass to program\tDescription\r\nSIGPIPE       No\tNo\tYes\t\tBroken pipe\r\nStarting program: /home/will/src/bitcoin/src/qt/bitcoin-qt \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n\r\n// snip\r\n// send bitcoin-cli rescanblockchain\r\n\r\n[Switching to Thread 0x7fff0bfff640 (LWP 3898352)]\r\n\r\nThread 51 \"b-httpworker.0\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff04001b10) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n\r\n// sent SIGPIPE which did not pause GDB\r\n// rescan finished\r\n\r\n// sent bitcoin-cli getwalletinfo\r\n\r\n[Switching to Thread 0x7fff0b7fe640 (LWP 3898353)]\r\n\r\nThread 52 \"b-httpworker.1\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff04001b60) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n[Switching to Thread 0x7fff0affd640 (LWP 3898354)]\r\n\r\n// sent bitcoin-cli stop\r\n\r\nThread 53 \"b-httpworker.2\" hit Breakpoint 1, HTTPReq_JSONRPC (context=std::any containing node::NodeContext * = {...}, req=0x7fff040023f0) at ./src/httprpc.cpp:179\r\n179\t        UniValue valRequest;\r\nContinuing.\r\n\r\n// snip\r\n\r\n[Inferior 1 (process 3897242) exited normally]\r\n```\r\n\r\n</details>",
      "created_at" : "2022-10-20T12:00:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1285405712",
      "id" : 1285405712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MnbwQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285405712/reactions"
      },
      "updated_at" : "2022-10-20T12:00:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285405712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Last night I ran an almost-full rescan inside gdb and bitcoin-qt crashed on SIGPIPE again, the same as it did the previous night.\r\n\r\nNow I'm trying it without gdb. I'll report what happens when the rescan completes.",
      "created_at" : "2022-10-20T19:40:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1286048194",
      "id" : 1286048194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585Mp4nC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1286048194/reactions"
      },
      "updated_at" : "2022-10-20T19:40:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1286048194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The full rescan ran without problems when I wasn't running bitcoin-qt inside gdb.\r\n\r\nI'll close this issue since it's a gdb problem not a bitcoin problem.",
      "created_at" : "2022-10-21T13:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1286964992",
      "id" : 1286964992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MtYcA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1286964992/reactions"
      },
      "updated_at" : "2022-10-21T13:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1286964992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the investigation and follow up @dooglus ",
      "created_at" : "2022-10-21T17:32:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1287250859",
      "id" : 1287250859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MueOr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1287250859/reactions"
      },
      "updated_at" : "2022-10-21T17:32:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1287250859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It turns out that when gdb sees the SIGPIPE it pauses, but I type `continue` and hit return and `bitcoin-qt` carries on running as normal.",
      "created_at" : "2022-10-21T18:57:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26339#issuecomment-1287330692",
      "id" : 1287330692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26339",
      "node_id" : "IC_kwDOABII585MuxuE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1287330692/reactions"
      },
      "updated_at" : "2022-10-21T18:57:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1287330692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   }
]
