{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "**Is your feature request related to a problem? Please describe.**\r\n\r\nIt is not possible to get per message stats accumulated since the node has started. This would make analyzing network traffic in details easier.\r\n\r\n**Describe the solution you'd like**\r\n\r\nExtend `getnettotals` with a data similar to what is present in `getpeerinfo` per peer.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nLooking at `getpeerinfo` gives some approximation, but it is only for currently connected peers and the stats are lost when a peer disconnects. It is possible to derive/interpolate from that and the time the peer has been connected, but that is cumbersome and prone to errors due to temporary traffic glitches (if the traffic is not uniform over time). E.g. if this peer has been connected for 10 seconds and transferred 5 bytes for INV messages and `bitcoind` is up for 1000 seconds, then 500 * number_of_peers bytes have been transferred for INV messages since startup, assuming number of connected peers does not change.\r\n\r\n**Additional context**\r\n\r\nSuggested additions to `getnettotals`:\r\n\r\n```diff\r\n{\r\n  \"totalbytesrecv\": 304173500,\r\n  \"totalbytessent\": 291919674,\r\n+ \"bytessent_per_msg\": {\r\n+   \"addrv2\": 8215,\r\n+   \"feefilter\": 32,\r\n+   \"getaddr\": 24,\r\n+   \"getdata\": 9542,\r\n+   \"getheaders\": 1053,\r\n+   \"headers\": 1696,\r\n+   \"inv\": 1536387,\r\n+   \"notfound\": 61,\r\n+   \"ping\": 3584,\r\n+   \"pong\": 3616,\r\n+   \"sendaddrv2\": 24,\r\n+   \"sendcmpct\": 33,\r\n+   \"sendheaders\": 24,\r\n+   \"tx\": 1446525,\r\n+   \"verack\": 24,\r\n+   \"version\": 127,\r\n+   \"wtxidrelay\": 24\r\n+ },\r\n+ \"bytesrecv_per_msg\": {\r\n+   \"addrv2\": 52611,\r\n+   \"feefilter\": 32,\r\n+   \"getdata\": 15413,\r\n+   \"getheaders\": 1053,\r\n+   \"headers\": 3604,\r\n+   \"inv\": 444758,\r\n+   \"notfound\": 183,\r\n+   \"ping\": 3616,\r\n+   \"pong\": 3584,\r\n+   \"sendaddrv2\": 24,\r\n+   \"sendcmpct\": 66,\r\n+   \"sendheaders\": 24,\r\n+   \"tx\": 506127,\r\n+   \"verack\": 24,\r\n+   \"version\": 126,\r\n+   \"wtxidrelay\": 24\r\n+ },\r\n  \"timemillis\": 1666181842031,\r\n  \"uploadtarget\": {\r\n    \"timeframe\": 86400,\r\n    \"target\": 0,\r\n    \"target_reached\": false,\r\n    \"serve_historical_blocks\": true,\r\n    \"bytes_left_in_cycle\": 0,\r\n    \"time_left_in_cycle\": 0\r\n  }\r\n}\r\n```\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337/comments",
   "created_at" : "2022-10-19T12:24:11Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/26337",
   "id" : 1414878536,
   "labels" : [
      {
         "color" : "7cf575",
         "default" : false,
         "description" : null,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585UVVVI",
   "number" : 26337,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337/timeline",
   "title" : "Add per message stats to getnettotals rpc",
   "updated_at" : "2022-11-03T02:12:47Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26337",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
      "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
      "followers_url" : "https://api.github.com/users/vasild/followers",
      "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/vasild",
      "id" : 266751,
      "login" : "vasild",
      "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
      "organizations_url" : "https://api.github.com/users/vasild/orgs",
      "received_events_url" : "https://api.github.com/users/vasild/received_events",
      "repos_url" : "https://api.github.com/users/vasild/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/vasild"
   }
}
