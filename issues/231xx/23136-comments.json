[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r718564526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718564526"
         }
      },
      "author_association" : "MEMBER",
      "body" : "the first arg is `fee` (absolute fee), not a feerate",
      "commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "created_at" : "2021-09-29T14:18:41Z",
      "diff_hunk" : "@@ -777,10 +777,10 @@ def test_option_feerate(self):\n         result4 = node.fundrawtransaction(rawtx, {\"feeRate\": str(10 * self.min_relay_tx_fee)})\n \n         result_fee_rate = result['fee'] * 1000 / count_bytes(result['hex'])\n-        assert_fee_amount(result1['fee'], count_bytes(result1['hex']), 2 * result_fee_rate)\n-        assert_fee_amount(result2['fee'], count_bytes(result2['hex']), 2 * result_fee_rate)\n-        assert_fee_amount(result3['fee'], count_bytes(result3['hex']), 10 * result_fee_rate)\n-        assert_fee_amount(result4['fee'], count_bytes(result4['hex']), 10 * result_fee_rate)\n+        assert_feerate_amount(result1['fee'], count_bytes(result1['hex']), 2 * result_fee_rate)\n+        assert_feerate_amount(result2['fee'], count_bytes(result2['hex']), 2 * result_fee_rate)\n+        assert_feerate_amount(result3['fee'], count_bytes(result3['hex']), 10 * result_fee_rate)\n+        assert_feerate_amount(result4['fee'], count_bytes(result4['hex']), 10 * result_fee_rate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r718564526",
      "id" : 718564526,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q1Gyu",
      "original_commit_id" : "4774f842fc986d3f3f81e5ff920c57698b14f43c",
      "original_line" : 783,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 766758848,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-29T14:18:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718564526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r718578568"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718578568"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oops. thanks, fixed, change is much smaller now",
      "commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "created_at" : "2021-09-29T14:29:32Z",
      "diff_hunk" : "@@ -777,10 +777,10 @@ def test_option_feerate(self):\n         result4 = node.fundrawtransaction(rawtx, {\"feeRate\": str(10 * self.min_relay_tx_fee)})\n \n         result_fee_rate = result['fee'] * 1000 / count_bytes(result['hex'])\n-        assert_fee_amount(result1['fee'], count_bytes(result1['hex']), 2 * result_fee_rate)\n-        assert_fee_amount(result2['fee'], count_bytes(result2['hex']), 2 * result_fee_rate)\n-        assert_fee_amount(result3['fee'], count_bytes(result3['hex']), 10 * result_fee_rate)\n-        assert_fee_amount(result4['fee'], count_bytes(result4['hex']), 10 * result_fee_rate)\n+        assert_feerate_amount(result1['fee'], count_bytes(result1['hex']), 2 * result_fee_rate)\n+        assert_feerate_amount(result2['fee'], count_bytes(result2['hex']), 2 * result_fee_rate)\n+        assert_feerate_amount(result3['fee'], count_bytes(result3['hex']), 10 * result_fee_rate)\n+        assert_feerate_amount(result4['fee'], count_bytes(result4['hex']), 10 * result_fee_rate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r718578568",
      "id" : 718578568,
      "in_reply_to_id" : 718564526,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q1KOI",
      "original_commit_id" : "4774f842fc986d3f3f81e5ff920c57698b14f43c",
      "original_line" : 783,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 766778281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-29T14:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718578568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the quick look. Fixed, simplified, and updated the description to explain the changes.",
      "created_at" : "2021-09-29T14:33:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#issuecomment-930235877",
      "id" : 930235877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23136",
      "node_id" : "IC_kwDOABII5843ckXl",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T14:33:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930235877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23141](https://github.com/bitcoin/bitcoin/pull/23141) (test: Fix intermitent failure in wallet_basic.py by meshcollider)\n* [#22364](https://github.com/bitcoin/bitcoin/pull/22364) (wallet: Make a tr() descriptor by default by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-29T17:03:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#issuecomment-930363503",
      "id" : 930363503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23136",
      "node_id" : "IC_kwDOABII5843dDhv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930363503/reactions"
      },
      "updated_at" : "2021-09-30T14:49:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930363503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719417222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719417222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wondering if `feerate_per_kvB` is better than `fee_per_kvB`. Technically `_per_kvB` indicates a rate, so `feerate_per_kvB` may sound like `rate of a rate`. \r\n\r\nNo hard opinion in either way.     ",
      "commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "created_at" : "2021-09-30T13:39:42Z",
      "diff_hunk" : "@@ -34,13 +34,13 @@ def assert_approx(v, vexp, vspan=0.00001):\n         raise AssertionError(\"%s > [%s..%s]\" % (str(v), str(vexp - vspan), str(vexp + vspan)))\n \n \n-def assert_fee_amount(fee, tx_size, fee_per_kB):\n-    \"\"\"Assert the fee was in range\"\"\"\n-    target_fee = round(tx_size * fee_per_kB / 1000, 8)\n+def assert_fee_amount(fee, tx_size, feerate_per_kvB):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719417222",
      "id" : 719417222,
      "line" : 37,
      "node_id" : "PRRC_kwDOABII584q4W-G",
      "original_commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "original_line" : 37,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 7,
      "pull_request_review_id" : 767876099,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719417222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T13:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719417222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719480253"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480253"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point, updated to the more precise `feerate_BTC_kvB`. Let me know if that's better.",
      "commit_id" : "b658d7d5c5339739dc19bf961d84186469a818d5",
      "created_at" : "2021-09-30T14:44:11Z",
      "diff_hunk" : "@@ -34,13 +34,13 @@ def assert_approx(v, vexp, vspan=0.00001):\n         raise AssertionError(\"%s > [%s..%s]\" % (str(v), str(vexp - vspan), str(vexp + vspan)))\n \n \n-def assert_fee_amount(fee, tx_size, fee_per_kB):\n-    \"\"\"Assert the fee was in range\"\"\"\n-    target_fee = round(tx_size * fee_per_kB / 1000, 8)\n+def assert_fee_amount(fee, tx_size, feerate_per_kvB):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719480253",
      "id" : 719480253,
      "in_reply_to_id" : 719417222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q4mW9",
      "original_commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "original_line" : 37,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 767963803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480253/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T14:44:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719480253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719676533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719676533"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry I am probably bikeshedding here, this one seems even more confusing. To me the original `fee_per_kvB` seems reasonable. ",
      "commit_id" : "b658d7d5c5339739dc19bf961d84186469a818d5",
      "created_at" : "2021-09-30T18:55:22Z",
      "diff_hunk" : "@@ -34,13 +34,13 @@ def assert_approx(v, vexp, vspan=0.00001):\n         raise AssertionError(\"%s > [%s..%s]\" % (str(v), str(vexp - vspan), str(vexp + vspan)))\n \n \n-def assert_fee_amount(fee, tx_size, fee_per_kB):\n-    \"\"\"Assert the fee was in range\"\"\"\n-    target_fee = round(tx_size * fee_per_kB / 1000, 8)\n+def assert_fee_amount(fee, tx_size, feerate_per_kvB):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719676533",
      "id" : 719676533,
      "in_reply_to_id" : 719417222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q5WR1",
      "original_commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "original_line" : 37,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 768226953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719676533/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T18:55:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719676533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719743952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719743952"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, if you run something like `git grep -ni \"btc_kvb\\|sat_vb\"` from repo root, you'll see that we have been working to upgrade and standardize how we describe fee rates\r\n\r\n- from fee to fee rate or feerate\r\n- from `fee per (denominator without specifying the numerator)` to `fee rate in numerator/denominator` \r\n- from fee rate units like BTC or satoshis or kB or B, to BTC/kvB and sat/vB",
      "commit_id" : "b658d7d5c5339739dc19bf961d84186469a818d5",
      "created_at" : "2021-09-30T20:45:18Z",
      "diff_hunk" : "@@ -34,13 +34,13 @@ def assert_approx(v, vexp, vspan=0.00001):\n         raise AssertionError(\"%s > [%s..%s]\" % (str(v), str(vexp - vspan), str(vexp + vspan)))\n \n \n-def assert_fee_amount(fee, tx_size, fee_per_kB):\n-    \"\"\"Assert the fee was in range\"\"\"\n-    target_fee = round(tx_size * fee_per_kB / 1000, 8)\n+def assert_fee_amount(fee, tx_size, feerate_per_kvB):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#discussion_r719743952",
      "id" : 719743952,
      "in_reply_to_id" : 719417222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q5mvQ",
      "original_commit_id" : "f4f0ec5e2bcd91c5ce6bb5d45924237524b8fef7",
      "original_line" : 37,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 768317966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719743952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T20:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719743952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think the test is correct and this is a bug that should be fixed: https://github.com/bitcoin/bitcoin/pull/22949#issuecomment-932045979",
      "created_at" : "2021-10-01T08:54:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#issuecomment-932046513",
      "id" : 932046513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23136",
      "node_id" : "IC_kwDOABII5843jeax",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932046513/reactions"
      },
      "updated_at" : "2021-10-01T08:54:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932046513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks everyone.\r\n\r\nSanity check if anyone passing by is curious:\r\n\r\n```diff\r\n--- a/test/functional/test_framework/util.py\r\n+++ b/test/functional/test_framework/util.py\r\n@@ -38,6 +38,12 @@ def assert_fee_amount(fee, tx_size, feerate_BTC_kvB):\r\n     \"\"\"Assert the fee is in range.\"\"\"\r\n     feerate_BTC_vB = feerate_BTC_kvB / 1000\r\n     target_fee = satoshi_round(tx_size * feerate_BTC_vB)\r\n+    target_fee_old = round(tx_size * feerate_BTC_vB, 8)\r\n+\r\n+    import pprint\r\n+    pprint.pprint(f\"{target_fee_old} round()\")\r\n+    pprint.pprint(f\"{target_fee} satoshi_round()\")\r\n+\r\n     if fee < target_fee:\r\n         raise AssertionError(\"Fee of %s BTC too low! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n     # allow the wallet's estimation to be at most 2 bytes off\r\n```\r\n\r\n```\r\n$ test/functional/wallet_basic.py \r\n2021-10-01T11:52:21.033000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_juu29c68\r\n2021-10-01T11:52:22.323000Z TestFramework (INFO): Mining blocks...\r\n2021-10-01T11:52:24.085000Z TestFramework (INFO): Test gettxout\r\n2021-10-01T11:52:24.209000Z TestFramework (INFO): Test gettxout (second part)\r\n'0.00014100 round()'\r\n'0.00014100 satoshi_round()'\r\n'0.00011000 round()'\r\n'0.00011000 satoshi_round()'\r\n2021-10-01T11:52:32.374000Z TestFramework (INFO): Test sendmany\r\n'0.00014100 round()'\r\n'0.00014100 satoshi_round()'\r\n'0.00014100 round()'\r\n'0.00014100 satoshi_round()'\r\n2021-10-01T11:52:33.550000Z TestFramework (INFO): Test sendmany with fee_rate param (explicit fee rate in sat/vB)\r\n'0.00000282 round()'\r\n'0.00000282 satoshi_round()'\r\n'0.00000282 round()'\r\n'0.00000282 satoshi_round()'\r\n2021-10-01T11:52:35.802000Z TestFramework (INFO): Test sendmany raises 'fee rate too low' if fee_rate of 0.99999999 is passed\r\n2021-10-01T11:52:35.822000Z TestFramework (INFO): Test sendmany raises if an invalid fee_rate is passed\r\n2021-10-01T11:52:35.926000Z TestFramework (INFO): Test sendmany raises if an invalid conf_target or estimate_mode is passed\r\n2021-10-01T11:52:44.981000Z TestFramework (INFO): Test -walletbroadcast\r\n2021-10-01T11:52:55.891000Z TestFramework (INFO): Test sendtoaddress with fee_rate param (explicit fee rate in sat/vB)\r\n'0.00000282 round()'\r\n'0.00000282 satoshi_round()'\r\n'0.00000173 round()'\r\n'0.00000173 satoshi_round()'\r\n2021-10-01T11:53:03.407000Z TestFramework (INFO): Test sendtoaddress raises 'fee rate too low' if fee_rate of 0.99999999 is passed\r\n2021-10-01T11:53:03.432000Z TestFramework (INFO): Test sendtoaddress raises if an invalid fee_rate is passed\r\n2021-10-01T11:53:03.539000Z TestFramework (INFO): Test sendtoaddress raises if an invalid conf_target or estimate_mode is passed\r\n2021-10-01T11:53:05.333000Z TestFramework (INFO): Test -reindex\r\n2021-10-01T11:53:11.957000Z TestFramework (INFO): Testing gettransaction response with different arguments...\r\n2021-10-01T11:53:11.976000Z TestFramework (INFO): Test send* RPCs with verbose=True\r\n2021-10-01T11:53:12.210000Z TestFramework (INFO): Test send* RPCs with verbose=False\r\n2021-10-01T11:53:12.462000Z TestFramework (INFO): Stopping nodes\r\n2021-10-01T11:53:12.670000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_juu29c68 on exit\r\n2021-10-01T11:53:12.670000Z TestFramework (INFO): Tests successful\r\n```\r\n",
      "created_at" : "2021-10-01T11:56:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23136#issuecomment-932163945",
      "id" : 932163945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23136",
      "node_id" : "IC_kwDOABII5843j7Fp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932163945/reactions"
      },
      "updated_at" : "2021-10-01T11:56:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932163945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
