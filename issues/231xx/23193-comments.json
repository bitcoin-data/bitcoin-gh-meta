[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Alternative solution:\r\n\r\nUse IP addresses for DNS seeds instead of domains and method used by nodes behind a proxy.\r\n\r\nNode -> IP address of seed node -> P2P message with address for several other nodes\r\n\r\nhttps://bitcoin.stackexchange.com/a/109535/",
      "created_at" : "2021-10-06T00:47:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935165608",
      "id" : 935165608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843vX6o",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935165608/reactions"
      },
      "updated_at" : "2021-10-06T00:47:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935165608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 Were you able to reproduce the issue described? :)",
      "created_at" : "2021-10-06T09:10:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935806407",
      "id" : 935806407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843x0XH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935806407/reactions"
      },
      "updated_at" : "2021-10-06T09:10:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935806407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I was not able to reproduce this issue with below config in Fedora although learnt something new when I was reading your comments in that PR:\r\n\r\n_/etc/resolv.conf_\r\n\r\n```\r\nnameserver 127.0.0.53\r\noptions edns0 trust-ad\r\nsearch localtest.me\r\n```\r\n\r\nAnd running command:\r\n\r\n```\r\n$ sudo RES_OPTIONS=\"options ndots:15\" LOCALDOMAIN=\"localtest.me\" bitcoind\r\n```\r\n\r\n```\r\n2021-10-06T09:43:51Z dnsseed thread start\r\n2021-10-06T09:43:51Z Loading addresses from DNS seed dnsseed.bitcoin.dashjr.org\r\n2021-10-06T09:43:51Z msghand thread start\r\n2021-10-06T09:43:51Z addcon thread start\r\n2021-10-06T09:43:51Z opencon thread start\r\n2021-10-06T09:43:51Z Loading addresses from DNS seed seed.bitcoin.sipa.be\r\n```\r\n\r\n```\r\n[prayank@fedora ~]$ nslookup test\r\nServer:\t\t127.0.0.53\r\nAddress:\t127.0.0.53#53\r\n\r\nNon-authoritative answer:\r\nName:\ttest.localtest.me\r\nAddress: 127.0.0.1\r\n\r\nnslookup seed.bitcoin.sipa.be\r\nServer:\t\t127.0.0.53\r\nAddress:\t127.0.0.53#53\r\n\r\nNon-authoritative answer:\r\nName:\tseed.bitcoin.sipa.be\r\nAddress: 114.246.97.39\r\n```\r\nhttps://pastebin.com/raw/adgvS3JC\r\n\r\nHowever I was assuming it happens in other networks or using different config and there are other issues with use of domains:\r\n\r\n1. Use of DNS servers as explained in https://voluntarymind.com/bitcoin/2021/\r\n2. One of the 9 domains getting hacked and pointing to malicious nodes for few hours\r\n3. DNS leaks if `onion` is used instead of `proxy`\r\n4. Few governments like to ask ISPs in their country to ban bitcoin related domains     \r\n\r\nSo I was thinking if we can use IPs instead of domains for bootstrapping. Maybe try on testnet for few months and see how things work.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2021-10-06T10:08:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935897967",
      "id" : 935897967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843yKtv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935897967/reactions"
      },
      "updated_at" : "2021-10-06T10:16:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935897967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 Did you get any valid addresses from those DNS seed lookups? Note that despite the log entry `2021-10-06T09:43:51Z Loading addresses from DNS seed seed.bitcoin.sipa.be` the actual DNS lookup may have been made against `seed.bitcoin.sipa.be.localtest.me` instead of `seed.bitcoin.sipa.be`. You'll have to look at the actual DNS traffic using something like `tcpdump -n 'port 53'` to be certain.",
      "created_at" : "2021-10-06T10:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935927623",
      "id" : 935927623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843yR9H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935927623/reactions"
      },
      "updated_at" : "2021-10-06T10:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935927623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tried `tcpdump -n 'port 53'`:\r\n\r\n```\r\n$ sudo tcpdump -n 'port 53'\r\ndropped privs to tcpdump\r\ntcpdump: verbose output suppressed, use -v[v]... for full protocol decode\r\nlistening on ens33, link-type EN10MB (Ethernet), snapshot length 262144 bytes\r\n16:15:37.086033 IP 192.168.170.134.39047 > 192.168.170.2.domain: 58619+ [1au] A? x9.seed.btc.petertodd.org. (54)\r\n16:15:37.086303 IP 192.168.170.134.50888 > 192.168.170.2.domain: 42718+ [1au] AAAA? x9.seed.btc.petertodd.org. (54)\r\n16:15:37.705798 IP 192.168.170.2.domain > 192.168.170.134.39047: 58619 24/0/1 CNAME x9.seed.btc.petertodd.net., A 147.219.148.106, A 46.8.179.222, A 193.198.34.24, A 3.112.7.115, A 34.139.129.19, A 128.199.212.225, A 78.21.167.8, \r\n```\r\nChecked one of the IP from results:\r\n\r\nhttps://bitnodes.io/nodes/78.21.167.8-8333/\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/136189801-d2dbf2dc-7537-4be4-8b2b-fd0bab6457af.png)\r\n",
      "created_at" : "2021-10-06T10:56:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935969136",
      "id" : 935969136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843ycFw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935969136/reactions"
      },
      "updated_at" : "2021-10-06T10:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935969136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 Oh, that's not the expected result! Could be that the environment variable approach is not working for some reason. Perhaps it would be easier to reproduce using the \"traditional\" `/etc/resolv.conf` approach :)\r\n\r\nTry this:\r\n\r\n```\r\n$ cat /etc/resolv.conf\r\n# Use CloudFlare public DNS\r\nnameserver 1.1.1.1\r\n\r\n# seed.bitcoin.sipa.be.localtest.me (and the other DNS seeds)\r\n# will resolve to 127.0.0.1 since localtest.me is configured to\r\n# respond with 127.0.0.1 for *.localtest.me.\r\nsearch localtest.me\r\n\r\noptions ndots:15\r\n$ git diff src/net.cpp\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex fca53a6f0..45276f5bc 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -1729,6 +1729,8 @@ void CConnman::ThreadDNSAddressSeed()\r\n                 for (const CNetAddr& ip : vIPs) {\r\n                     int nOneDay = 24*3600;\r\n                     CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()), requiredServiceBits);\r\n+                    std::cout << \"* DNS seed \" << host << \" responded with IP \" << ip.ToString() << \"\\n\";\r\n+                    std::abort();\r\n                     addr.nTime = GetTime() - 3*nOneDay - rng.randrange(4*nOneDay); // use a random age between 3 and 7 days old\r\n                     vAdd.push_back(addr);\r\n                     found++;\r\n$ make -C src/ bitcoind\r\n$ rm -f ~/.bitcoin/peers.dat\r\n$ tcpdump -n 'port 53' &\r\n$ src/bitcoind -forcednsseed=1\r\nâ¦\r\nIP <src> > 1.1.1.1.53: A? x9.seed.bitcoin.sipa.be.localtest.me.\r\nâ¦\r\n2021-10-01T01:23:45Z Loading addresses from DNS seed seed.bitcoin.sipa.be\r\n* DNS seed x9.seed.bitcoin.sipa.be responded with IP 127.0.0.1\r\nâ¦\r\n```\r\n\r\nAre you able to reproduce now? :)",
      "created_at" : "2021-10-07T11:49:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-937717145",
      "id" : 937717145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII58435G2Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937717145/reactions"
      },
      "updated_at" : "2021-10-07T12:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937717145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you able to reproduce now? :)\r\n\r\nNo. I followed everything you shared. Edited resolv.conf, made changes to `src/net.cpp`, compiled, deleted _peers.dat_ and then run bitcoind\r\n\r\n```\r\n* DNS seed x9.seed.bitcoin.jonasschnelli.ch responded with IP 18.140.56.125\r\nAborted\r\n```",
      "created_at" : "2021-10-08T12:50:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-938617206",
      "id" : 938617206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII58438il2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938617206/reactions"
      },
      "updated_at" : "2021-10-08T13:28:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938617206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 \r\n\r\nThat's super weird! :)\r\n\r\nIt seems like the instructions in your `resolv.conf` are disregarded for some reason.\r\n\r\nIf you have this (and only this) in your `/etc/resolv.conf` â¦\r\n\r\n```\r\n# Use CloudFlare public DNS\r\nnameserver 1.1.1.1\r\n\r\n# seed.bitcoin.sipa.be.localtest.me (and the other DNS seeds)\r\n# will resolve to 127.0.0.1 since localtest.me is configured to\r\n# respond with 127.0.0.1 for *.localtest.me.\r\nsearch localtest.me\r\n\r\noptions ndots:15\r\n```\r\n\r\nâ¦ and then do `host x9.seed.bitcoin.sipa.be` -- what is the result? (It should be `127.0.0.1` given the above configuration since `x9.seed.bitcoin.sipa.be.localtest.me.` is the actual FQDN being looked up.)\r\n\r\nAnyone else who is able to reproduce? :)",
      "created_at" : "2021-10-08T15:06:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-938715606",
      "id" : 938715606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII584386nW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938715606/reactions"
      },
      "updated_at" : "2021-10-08T15:16:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938715606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift Its working. Sorry I had wrong resolv.conf earlier or maybe didn't save properly before exiting editor.\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/136654478-035f89db-56ff-4257-83e5-5b0d45b77006.png)\r\n",
      "created_at" : "2021-10-09T10:30:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939273525",
      "id" : 939273525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_C01",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939273525/reactions"
      },
      "updated_at" : "2021-10-09T10:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939273525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 That's great!\r\n\r\nWhat results do you get from `bitcoind` if you do the full reproduce routine below? :)\r\n\r\n```\r\n$ cat /etc/resolv.conf\r\n# Use CloudFlare public DNS\r\nnameserver 1.1.1.1\r\n\r\n# seed.bitcoin.sipa.be.localtest.me (and the other DNS seeds)\r\n# will resolve to 127.0.0.1 since localtest.me is configured to\r\n# respond with 127.0.0.1 for *.localtest.me.\r\nsearch localtest.me\r\n\r\noptions ndots:15\r\n$ git diff src/net.cpp\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex fca53a6f0..45276f5bc 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -1729,6 +1729,8 @@ void CConnman::ThreadDNSAddressSeed()\r\n                 for (const CNetAddr& ip : vIPs) {\r\n                     int nOneDay = 24*3600;\r\n                     CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()), requiredServiceBits);\r\n+                    std::cout << \"* DNS seed \" << host << \" responded with IP \" << ip.ToString() << \"\\n\";\r\n+                    std::abort();\r\n                     addr.nTime = GetTime() - 3*nOneDay - rng.randrange(4*nOneDay); // use a random age between 3 and 7 days old\r\n                     vAdd.push_back(addr);\r\n                     found++;\r\n$ make -C src/ bitcoind\r\n$ rm -f ~/.bitcoin/peers.dat\r\n$ tcpdump -n 'port 53' &\r\n$ src/bitcoind\r\n```",
      "created_at" : "2021-10-09T11:05:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939278214",
      "id" : 939278214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_D-G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939278214/reactions"
      },
      "updated_at" : "2021-10-09T11:05:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939278214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> What results do you get from bitcoind if you do the full reproduce routine below? :)\r\n\r\n1. resolv.conf\r\n   ```$ cat /etc/resolv.conf\r\n    # Use CloudFlare public DNS\r\n    nameserver 1.1.1.1\r\n\r\n   # seed.bitcoin.sipa.be.localtest.me (and the other DNS seeds)\r\n   # will resolve to 127.0.0.1 since localtest.me is configured to\r\n   # respond with 127.0.0.1 for *.localtest.me.\r\n   search localtest.me\r\n\r\n   options ndots:15\r\n   ```\r\n2. src/net.cpp\r\n   \r\n![image](https://user-images.githubusercontent.com/13405205/136656031-c22ad48f-e0d7-451f-9a4b-b34e954f4cca.png)\r\n\r\n3. \r\n   ```\r\n   [prayank@fedora ~]$ host x9.seed.bitcoin.wiz.biz\r\n   x9.seed.bitcoin.wiz.biz.localtest.me has address 127.0.0.1\r\n   ```\r\n4. `rm -f /home/prayank/.bitcoin/peers.dat`\r\n5.  `tcpdump -n 'port 53'`\r\n6. `cd /home/prayank/binaries/dns-seed/usr/local/` and `./bitcoind`\r\n\r\n```\r\n2021-10-09T04:34:19Z dnsseed thread start\r\n2021-10-09T04:34:19Z Loading addresses from DNS seed seed.bitcoin.wiz.biz\r\n2021-10-09T04:34:19Z opencon thread start\r\n2021-10-09T04:34:19Z msghand thread start\r\n2021-10-09T04:34:19Z addcon thread start\r\n2021-10-09T04:34:20Z New outbound peer connected: version: 70016, blocks=704207, peer=0 (block-relay-only)\r\n* DNS seed x9.seed.bitcoin.wiz.biz responded with IP 69.64.225.5\r\nAborted (core dumped)\r\n```\r\nhttps://bitnodes.io/nodes/69.64.225.5-8333/\r\n\r\n```\r\ndropped privs to tcpdump\r\ntcpdump: verbose output suppressed, use -v[v]... for full protocol decode\r\nlistening on ens33, link-type EN10MB (Ethernet), snapshot length 262144 bytes\r\n10:00:17.082328 IP 192.168.170.134.35580 > 192.168.170.2.domain: 47835+ [1au] AAAA? fedoraproject.org. (46)\r\n10:00:17.093759 IP 192.168.170.2.domain > 192.168.170.134.35580: 47835 6/0/1 AAAA 2620:52:3:1:dead:beef:cafe:fed6, AAAA 2605:bc80:3010:600:dead:beef:cafe:feda, AAAA 2620:52:3:1:dead:beef:cafe:fed7, AAAA 2610:28:3090:3001:dead:beef:cafe:fed3, AAAA 2604:1580:fe00:0:dead:beef:cafe:fed1, AAAA 2605:bc80:3010:600:dead:beef:cafe:fed9 (214)\r\n10:01:47.052342 IP 192.168.170.134.58903 > 192.168.170.2.domain: 61722+ [1au] A? fedoraproject.org. (46)\r\n10:01:47.064272 IP 192.168.170.2.domain > 192.168.170.134.58903: 61722 10/0/1 A 140.211.169.206, A 152.19.134.198, A 8.43.85.67, A 152.19.134.142, A 67.219.144.68, A 38.145.60.20, A 209.132.190.2, A 38.145.60.21, A 8.43.85.73, A 140.211.169.196 (206)\r\n10:04:19.136429 IP 192.168.170.134.35432 > 192.168.170.2.domain: 32770+ [1au] A? x9.seed.bitcoin.wiz.biz. (52)\r\n10:04:19.136540 IP 192.168.170.134.53555 > 192.168.170.2.domain: 14664+ [1au] AAAA? x9.seed.bitcoin.wiz.biz. (52)\r\n10:04:21.203964 IP 192.168.170.2.domain > 192.168.170.134.35432: 32770 21/0/1 A 221.168.38.150, A 171.6.209.170, A 82.197.206.139, A 192.166.219.200, A 181.198.182.39, A 83.163.211.75, A 46.229.170.218, A 69.64.225.5, A 90.182.165.18, A 77.93.223.9, A 188.214.132.45, A 91.204.149.5, A 103.232.104.227, A 185.233.148.146, A 81.0.198.25, A 50.125.234.132, A 197.245.46.242, A 216.107.238.165, A 202.239.42.192, A 210.55.57.179, A 217.23.6.148 (388)\r\n10:04:21.426191 IP 192.168.170.2.domain > 192.168.170.134.53555: 14664 10/0/1 AAAA 2605:ae00:203::203, AAAA 2001:f40:908:64ef:a933:9d18:93f5:be0, AAAA 2001:4454:539:d700:274a:5997:e231:ad58, AAAA 2003:cf:b71e:a400:4c1d:75d6:f396:c5a5, AAAA 2001:14bb:ae:5ea7:189:b34c:c58:1ccc, AAAA 2001:19f0:6801:6ec:2::1, AAAA 2a01:430:17:1::ffff:1153, AAAA 2a01:7c8:d001:1c1:5054:ff:feee:3e1a, AAAA 2a01:7e01::f03c:92ff:fe78:405f, AAAA 2620:6e:a000:1:42:42:42:42 (332)\r\n10:05:01.324800 IP 192.168.170.134.44591 > 1.1.1.1.domain: 12666+ A? x9.seed.bitcoin.wiz.biz.localtest.me. (54)\r\n10:05:02.009099 IP 1.1.1.1.domain > 192.168.170.134.44591: 12666 1/0/0 A 127.0.0.1 (70)\r\n10:05:02.011849 IP 192.168.170.134.35867 > 1.1.1.1.domain: 57604+ AAAA? x9.seed.bitcoin.wiz.biz.localtest.me. (54)\r\n10:05:02.550530 IP 1.1.1.1.domain > 192.168.170.134.35867: 57604 0/1/0 (112)\r\n10:05:02.551849 IP 192.168.170.134.50518 > 1.1.1.1.domain: 23051+ MX? x9.seed.bitcoin.wiz.biz.localtest.me. (54)\r\n10:05:02.752406 IP 1.1.1.1.domain > 192.168.170.134.50518: 23051 0/1/0 (112)\r\n```\r\n\r\n   \r\n",
      "created_at" : "2021-10-09T11:34:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939281889",
      "id" : 939281889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_E3h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939281889/reactions"
      },
      "updated_at" : "2021-10-09T11:34:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939281889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 It seems like something is a bit off in the configuration: judging from the `tcpdump` output it appears that DNS lookups from the `host` command respect the `/etc/resolv.conf` settings whereas DNS lookups from `bitcoind` disregard these settings.\r\n\r\nAre you able to test on another system? You don't happen to have a Debian or Ubuntu system to test under?",
      "created_at" : "2021-10-09T11:48:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939283812",
      "id" : 939283812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_FVk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939283812/reactions"
      },
      "updated_at" : "2021-10-09T11:48:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939283812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> You don't happen to have a Debian or Ubuntu system to test under?\r\n\r\nI have Pop!_OS and Ubuntu. Will try in one of them in sometime. I think there can be few changes. I remember hosts file being different in Fedora and few other things.",
      "created_at" : "2021-10-09T12:01:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939285660",
      "id" : 939285660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_Fyc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939285660/reactions"
      },
      "updated_at" : "2021-10-09T12:01:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939285660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Even though you have removed the systemd stub resolver form your /etc/resolv.conf, it's possible that getaddrinfo is still using systemd if /etc/nsswitch.conf contains \"resolve\" in the host directive. This is the default in fedora, but not ubuntu (not sure about debian). \r\n\r\nhttps://www.freedesktop.org/software/systemd/man/nss-resolve.html",
      "created_at" : "2021-10-09T15:34:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939315601",
      "id" : 939315601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_NGR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939315601/reactions"
      },
      "updated_at" : "2021-10-09T15:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939315601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2775339?v=4",
         "events_url" : "https://api.github.com/users/tylerchambers/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tylerchambers/followers",
         "following_url" : "https://api.github.com/users/tylerchambers/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tylerchambers/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tylerchambers",
         "id" : 2775339,
         "login" : "tylerchambers",
         "node_id" : "MDQ6VXNlcjI3NzUzMzk=",
         "organizations_url" : "https://api.github.com/users/tylerchambers/orgs",
         "received_events_url" : "https://api.github.com/users/tylerchambers/received_events",
         "repos_url" : "https://api.github.com/users/tylerchambers/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tylerchambers/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tylerchambers/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tylerchambers"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift I have emailed you details and few questions after testing on Ubuntu",
      "created_at" : "2021-10-09T17:10:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939329324",
      "id" : 939329324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_Qcs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939329324/reactions"
      },
      "updated_at" : "2021-10-09T17:10:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939329324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is expected behaviour, though it probably wouldn't hurt to make the names used more absolute.\r\n\r\nDNS seeds aren't supposed to be trusted, so IMO not an issue per se.",
      "created_at" : "2021-10-10T01:38:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939389359",
      "id" : 939389359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_fGv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939389359/reactions"
      },
      "updated_at" : "2021-10-10T01:38:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939389359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr \r\n\r\n> This is expected behaviour, [â¦]\r\n\r\nI don't understand: _what_ is expected behaviour?\r\n\r\nIs it expected behaviour that the seed node string `seed.bitcoin.sipa.be` might end up being interpreted as `seed.bitcoin.sipa.be.megacorp.com` in practice?\r\n\r\nWhat in the world would the use case be for that behaviour? :)",
      "created_at" : "2021-10-10T05:40:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939410853",
      "id" : 939410853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_kWl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939410853/reactions"
      },
      "updated_at" : "2021-10-10T05:49:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939410853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 \r\n\r\n> @practicalswift I have emailed you details and few questions after testing on Ubuntu\r\n\r\nPlease post here instead. I like all my Bitcoin Core communication to be public for transparency and documentation purposes. And often someone's dumb questions are someone else's dumb questions, too. I don't think there is anything security sensitive here.",
      "created_at" : "2021-10-10T05:45:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939411277",
      "id" : 939411277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_kdN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939411277/reactions"
      },
      "updated_at" : "2021-10-10T05:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939411277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I don't think there is anything security sensitive here\r\n\r\nI wasn't sure so wanted to confirm before responding. \r\n\r\nIt's working on Ubuntu and DNS seed domain resolves to localhost. I am still trying to figure out if there is any way this can be exploited remotely.",
      "created_at" : "2021-10-10T05:51:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939411867",
      "id" : 939411867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_kmb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939411867/reactions"
      },
      "updated_at" : "2021-10-10T05:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939411867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I couldn't find anything interesting however either this should be fixed with one of the solutions suggested in issue description or we [stop using domains](https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935165608) to avoid DNS [related issues](https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-935897967)\r\n\r\nIt can affect users who sometimes use public WiFi but that doesn't make it a vulnerability in Bitcoin Core: https://www.teiss.co.uk/dns-search-suffix-wi-fi-attacks/\r\n\r\nFew CVEs also exist in which [attacker needs access](https://rchase.com/downloads/momentum-iot-penetration-test-report.pdf) to victim's machine for few minutes: http://cve.mitre.org/cgi-bin/cvename.cgi?name=2018-12257",
      "created_at" : "2021-10-10T11:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939464083",
      "id" : 939464083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_xWT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939464083/reactions"
      },
      "updated_at" : "2021-10-10T11:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939464083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift It's expected that *any* name resolution will fallback to the \"search\" domain reparenting. If you type google.com into your browser, for example, if google.com fails to resolve, it will try google.com.localtest.me\r\n\r\nAnyone who can control your DNS search domains, can most likely also MITM your DNS lookups, or even your p2p connections. Furthermore, we do not treat DNS seeds as trusted, so resolving them incorrectly should not create any security issues.",
      "created_at" : "2021-10-10T15:48:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-939505540",
      "id" : 939505540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5843_7eE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939505540/reactions"
      },
      "updated_at" : "2021-10-10T15:48:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939505540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr \r\n\r\n> It's expected that any name resolution will fallback to the \"search\" domain reparenting.\r\n\r\nThe \"search\" domain will _not_ will not be used if a FQDN is passed to `getaddrinfo`.\r\n\r\nIn other words:\r\n* Looking up `seed.bitcoin.sipa.be.` (a FQDN: with an ending dot) is guaranteed to give the results for `seed.bitcoin.sipa.be.` regardless of your \"search\" domain settings.\r\n* Looking up `seed.bitcoin.sipa.be` (a partially qualified domain name: without an ending dot) is _not_ guaranteed to give the results for `seed.bitcoin.sipa.be.` as demonstrated by the PoC above. In the example above a lookup for `seed.bitcoin.sipa.be` resulted in a query for `seed.bitcoin.sipa.be.localtest.me.`.\r\n\r\nThat's why I'm suggesting that we should err on the safe side and always pass FQDN to `getaddrinfo` for the seed nodes and in other similar contexts where the intention is to look up a FQDN (rather than a partially qualified domain name).\r\n\r\n> If you type google.com into your browser, for example, if google.com fails to resolve, it will try google.com.localtest.me\r\n\r\nIt seems like you've not tested the PoC above: `seed.bitcoin.sipa.be.localtest.me.` is tested _before_ `seed.bitcoin.sipa.be.`\r\n\r\n> Anyone who can control your DNS search domains, can most likely also MITM your DNS lookups[â¦]\r\n\r\nThis is a correctness issue. I'm not claiming this is an exploitable security issue in any meaningful way.\r\n\r\nNit: Note that setting environment variables (`RES_OPTIONS` and `LOCALDOMAIN`) does not require the ability to MITM DNS lookups.",
      "created_at" : "2021-10-11T16:13:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-940166586",
      "id" : 940166586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5844Cc26",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940166586/reactions"
      },
      "updated_at" : "2021-10-11T16:13:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940166586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think we should just use FQDNs for the DNS seeds.",
      "created_at" : "2021-10-11T18:51:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-940360166",
      "id" : 940360166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5844DMHm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940360166/reactions"
      },
      "updated_at" : "2021-10-11T18:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940360166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23 Consider submitting that PR (https://github.com/bitcoinknots/bitcoin/pull/40) upstreams too :)  I'd be glad to review.",
      "created_at" : "2021-10-12T14:59:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23193#issuecomment-941094002",
      "id" : 941094002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23193",
      "node_id" : "IC_kwDOABII5844F_Ry",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/941094002/reactions"
      },
      "updated_at" : "2021-10-12T14:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/941094002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
