[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2022-05-21T08:02:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1133560428",
      "id" : 1133560428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585DkMJs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133560428/reactions"
      },
      "updated_at" : "2022-05-21T08:02:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133560428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25933](https://github.com/bitcoin/bitcoin/pull/25933) (wallet: AvailableCoins, simplify output script type acquisition by furszy)\n* [#25730](https://github.com/bitcoin/bitcoin/pull/25730) (RPC: listunspent, add \"include immature coinbase\" flag by furszy)\n* [#25291](https://github.com/bitcoin/bitcoin/pull/25291) (test: Refactor rpc_fundrawtransaction.py by akankshakashyap)\n* [#25273](https://github.com/bitcoin/bitcoin/pull/25273) (wallet: Pass through transaction locktime and preset input sequences and scripts to CreateTransaction by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-21T16:02:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1133660802",
      "id" : 1133660802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585DkkqC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133660802/reactions"
      },
      "updated_at" : "2022-09-15T02:28:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133660802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@aureleoules can we achieve the same result by using descriptors wallet with only segwit descriptors?",
      "created_at" : "2022-05-23T07:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1134311246",
      "id" : 1134311246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585DnDdO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134311246/reactions"
      },
      "updated_at" : "2022-05-23T07:53:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134311246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\n@brunoerg I think it's fine as it. Should squash if the 1st commit requires the 2nd to pass CI.",
      "created_at" : "2022-05-23T22:58:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1135215654",
      "id" : 1135215654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585DqgQm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135215654/reactions"
      },
      "updated_at" : "2022-05-23T22:58:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135215654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @aureleoules can we achieve the same result by using descriptors wallet with only segwit descriptors?\r\n\r\nI am not very familiar with wallet descriptors.\r\nDo you mean using a wallet that does not have legacy descriptors imported?\r\nI think @achow101 answed that yes (https://github.com/bitcoin/bitcoin/issues/25181#issuecomment-1134923482).\r\n\r\nBut if I understand correctly, this feature might still be useful in cases where you don't control the wallet.",
      "created_at" : "2022-05-24T01:08:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1135291216",
      "id" : 1135291216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585DqytQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135291216/reactions"
      },
      "updated_at" : "2022-05-24T01:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135291216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r881581203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881581203"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The name here seems confusing to me. Maybe `\"segwit_inputs_only\"`?",
      "commit_id" : "6677717fba71b64a476b441f3af0fdf4fa98631d",
      "created_at" : "2022-05-25T12:16:15Z",
      "diff_hunk" : "@@ -787,7 +792,8 @@ RPCHelpMan fundrawtransaction()\n                                         \"so the maximum DER signatures size of 73 bytes should be used when considering ECDSA signatures.\"\n                                         \"Remember to convert serialized sizes to weight units when necessary.\"},\n                                 },\n-                             },\n+                            },\n+                            {\"inputs_witness_only\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Whether to only use inputs with witness data for transaction.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r881581203",
      "id" : 881581203,
      "line" : 796,
      "node_id" : "PRRC_kwDOABII5840i9yT",
      "original_commit_id" : "6677717fba71b64a476b441f3af0fdf4fa98631d",
      "original_line" : 796,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 25,
      "pull_request_review_id" : 984708878,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881581203/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T12:16:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881581203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r881703417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881703417"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed, I changed it.",
      "commit_id" : "1c5cfd84b3dc14ab886acd47c7891c11eb2457ec",
      "created_at" : "2022-05-25T14:10:03Z",
      "diff_hunk" : "@@ -787,7 +792,8 @@ RPCHelpMan fundrawtransaction()\n                                         \"so the maximum DER signatures size of 73 bytes should be used when considering ECDSA signatures.\"\n                                         \"Remember to convert serialized sizes to weight units when necessary.\"},\n                                 },\n-                             },\n+                            },\n+                            {\"inputs_witness_only\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Whether to only use inputs with witness data for transaction.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r881703417",
      "id" : 881703417,
      "in_reply_to_id" : 881581203,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840jbn5",
      "original_commit_id" : "6677717fba71b64a476b441f3af0fdf4fa98631d",
      "original_line" : 796,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 984885962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881703417/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T14:10:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/881703417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r885759061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885759061"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This may actually be testing something else than intended: given that the coinbase output is not 100 blocks old yet, I suspect the \"Insufficient funds\" would be foremost caused by the inputs being immature.\r\n\r\nThis test could be improved by creating a scenario in which a transaction is first successfully funded by using legacy inputs, but then toggling the `'segwit_inputs_only': true` causes a repeated attempt to fund the transaction to fail.",
      "commit_id" : "1c5cfd84b3dc14ab886acd47c7891c11eb2457ec",
      "created_at" : "2022-05-31T15:08:07Z",
      "diff_hunk" : "@@ -177,6 +178,38 @@ def test_simple(self):\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtxfund['hex'])\n         assert len(dec_tx['vin']) > 0  #test that we have enough inputs\n \n+    def check_witness_inputs(self, vins):\n+        for vin in vins:\n+            # check vin is a segwit input\n+            utxo = self.nodes[2].gettxout(vin['txid'], vin['vout'])\n+            info = self.nodes[2].getaddressinfo(utxo['scriptPubKey']['address'])\n+            if not info['iswitness']:\n+                return False\n+\n+        return True\n+\n+    def test_witness_only(self):\n+        self.log.info(\"Testing fundrawtxn with witness inputs only\")\n+\n+        inputs  = [ ]\n+\n+        # make sure legacy inputs are not accepted in witness only mode if no witness inputs are found\n+        self.generatetoaddress(self.nodes[2], 2, self.nodes[2].getnewaddress(address_type='legacy'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r885759061",
      "id" : 885759061,
      "line" : 197,
      "node_id" : "PRRC_kwDOABII5840y5xV",
      "original_commit_id" : "1c5cfd84b3dc14ab886acd47c7891c11eb2457ec",
      "original_line" : 197,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 990630370,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885759061/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T15:12:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885759061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r886850214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886850214"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for reviewing the code!\r\n\r\n> This may actually be testing something else than intended: given that the coinbase output is not 100 blocks old yet, I suspect the \"Insufficient funds\" would be foremost caused by the inputs being immature.\r\n\r\nIf I increase the amount of blocks to generate in legacy (400+), the \"Insufficient funds\" error is still raised. ~~There are already blocks generated before the new test here so there should be enough legacy coins.\r\nhttps://github.com/bitcoin/bitcoin/blob/1c5cfd84b3dc14ab886acd47c7891c11eb2457ec/test/functional/rpc_fundrawtransaction.py#L103-L104~~\r\nWrong node my bad.\r\n\r\n\r\n> This test could be improved by creating a scenario in which a transaction is first successfully funded by using legacy inputs, but then toggling the 'segwit_inputs_only': true causes a repeated attempt to fund the transaction to fail.\r\n\r\nI'll look into that, this seems better.\r\n",
      "commit_id" : "1c5cfd84b3dc14ab886acd47c7891c11eb2457ec",
      "created_at" : "2022-06-01T14:05:31Z",
      "diff_hunk" : "@@ -177,6 +178,38 @@ def test_simple(self):\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtxfund['hex'])\n         assert len(dec_tx['vin']) > 0  #test that we have enough inputs\n \n+    def check_witness_inputs(self, vins):\n+        for vin in vins:\n+            # check vin is a segwit input\n+            utxo = self.nodes[2].gettxout(vin['txid'], vin['vout'])\n+            info = self.nodes[2].getaddressinfo(utxo['scriptPubKey']['address'])\n+            if not info['iswitness']:\n+                return False\n+\n+        return True\n+\n+    def test_witness_only(self):\n+        self.log.info(\"Testing fundrawtxn with witness inputs only\")\n+\n+        inputs  = [ ]\n+\n+        # make sure legacy inputs are not accepted in witness only mode if no witness inputs are found\n+        self.generatetoaddress(self.nodes[2], 2, self.nodes[2].getnewaddress(address_type='legacy'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r886850214",
      "id" : 886850214,
      "in_reply_to_id" : 885759061,
      "line" : 197,
      "node_id" : "PRRC_kwDOABII58403EKm",
      "original_commit_id" : "1c5cfd84b3dc14ab886acd47c7891c11eb2457ec",
      "original_line" : 197,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 992035260,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886850214/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T14:07:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886850214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Would it be useful to add the `\"segwit_inputs_only\"` option to `walletcreatefundedpsbt` as well? They both call `FundTransaction` so I think you would just have to include it in the `walletcreatefundedpsbt` options.",
      "created_at" : "2022-06-05T17:41:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1146854804",
      "id" : 1146854804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585EW52U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146854804/reactions"
      },
      "updated_at" : "2022-06-05T17:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146854804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-17T22:56:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1159291372",
      "id" : 1159291372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585FGWHs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159291372/reactions"
      },
      "updated_at" : "2022-06-17T22:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159291372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've rebased my PR on top of #24584 as @Xekyo suggested and addressed the comments.\r\nThanks for the reviews!",
      "created_at" : "2022-07-06T15:38:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1176375257",
      "id" : 1176375257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585GHg_Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1176375257/reactions"
      },
      "updated_at" : "2022-07-06T15:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1176375257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> But if I understand correctly, this feature might still be useful in cases where you don't control the wallet.\r\n\r\n@aureleoules Do you have a concrete use-case in mind? I'm not sure, but it seems #25181 supposes that we do control the wallet.",
      "created_at" : "2022-07-21T06:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1191106511",
      "id" : 1191106511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585G_tfP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191106511/reactions"
      },
      "updated_at" : "2022-07-21T06:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191106511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Instead of adding the `segwit_inputs_only` filter only, what if we add a general input type filter? Something like `filter_inputs_by=<OutputType>`\r\n\r\nSo we aren't forced to add a new `type*_inputs_only` flag in every RPC command every time that a new inputs type filter is required.",
      "created_at" : "2022-07-22T14:13:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1192618154",
      "id" : 1192618154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585HFeiq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1192618154/reactions"
      },
      "updated_at" : "2022-07-22T14:13:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1192618154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Do you have a concrete use-case in mind? I'm not sure, but it seems https://github.com/bitcoin/bitcoin/issues/25181 supposes that we do control the wallet.\r\n\r\nI believe if your wallet already has mixed inputs and you want to filter these, this feature may be useful.",
      "created_at" : "2022-07-29T10:46:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1199134552",
      "id" : 1199134552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585HeVdY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199134552/reactions"
      },
      "updated_at" : "2022-07-29T10:46:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199134552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933109063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109063"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should go with the other std lib includes.",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T10:46:26Z",
      "diff_hunk" : "@@ -12,6 +12,7 @@\n #include <script/keyorigin.h>\n #include <script/signingprovider.h>\n #include <script/standard.h>\n+#include <unordered_set>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933109063",
      "id" : 933109063,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843nh1H",
      "original_commit_id" : "7d1e4a107a9fcd2d49dbebcc5ba1bebb8c292087",
      "original_line" : 15,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 1055349441,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109063/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T10:46:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Instead of adding the `segwit_inputs_only` filter only, what if we add a general input type filter? Something like `filter_inputs_by=<OutputType>`\r\n> \r\n> So we aren't forced to add a new `type*_inputs_only` flag in every RPC command every time that a new inputs type filter is required.\r\n\r\nThanks for the feedback, I've added it.",
      "created_at" : "2022-07-29T10:46:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1199135188",
      "id" : 1199135188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585HeVnU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199135188/reactions"
      },
      "updated_at" : "2022-07-29T10:46:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199135188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933109955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109955"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed, thanks.",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T10:47:41Z",
      "diff_hunk" : "@@ -12,6 +12,7 @@\n #include <script/keyorigin.h>\n #include <script/signingprovider.h>\n #include <script/standard.h>\n+#include <unordered_set>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933109955",
      "id" : 933109955,
      "in_reply_to_id" : 933109063,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843niDD",
      "original_commit_id" : "7d1e4a107a9fcd2d49dbebcc5ba1bebb8c292087",
      "original_line" : 15,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 1055350648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109955/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T10:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933109955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nThis is coming along nicely! I do have a few suggestions:\r\n\r\nI think the correct place to do the filtering is in `AvailableCoins`. This would make it more useful outside of just funding a transaction. I recently opened #25734 which should make this _much_ easier. All we would need is your update to `coincontrol.h` and a small change to `AvailableCoins` and then any RPC can filter by just adding filters to `m_filter_inputs` (like you've done with `fundrawtransaction`.\r\n\r\nI rebased this off #25734 , added my suggested changes, and verified that the functional tests still ran. Feel free to cherry pick:\r\n\r\n* [josibake@e4369e6](https://github.com/bitcoin/bitcoin/commit/e4369e604ad278741a0d50136e3f8dbca02e390c) (add filter to AvailableCoins)\r\n* [josibake@2609ab1](https://github.com/bitcoin/bitcoin/commit/2609ab114e7e8b5c8ef9d85796d9851d0c3da612) (your commit rebased on my changes)\r\n\r\nAlso, small nit (feel free to ignore): I'd suggest breaking up your commits to make it easier to review.. something like 1) make changes to AvailableCoins 2) make changes to the RPC 3) make changes to the functional test. Makes it much easier from a review perspective, imo",
      "created_at" : "2022-07-29T14:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1199442747",
      "id" : 1199442747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585Hfgs7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199442747/reactions"
      },
      "updated_at" : "2022-07-29T14:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199442747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933354909"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933354909"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this function should also handle lists like `bech32, bech32m`, as most users will probably pass them with spaces. i tested that this currently fails by passing `bech32, bech32m` in the functional test.",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T14:53:25Z",
      "diff_hunk" : "@@ -486,6 +486,27 @@ static std::vector<RPCArg> FundTxDoc(bool solving_data = true)\n     return args;\n }\n \n+static inline OutputType parseOutputType(const std::string& outputTypeStr)\n+{\n+    const auto outputType = ParseOutputType(outputTypeStr);\n+    if (!outputType) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Unknown input type '%s'\", outputTypeStr));\n+    }\n+\n+    return *outputType;\n+}\n+\n+static inline std::vector<std::string> parseStringList(std::stringstream& ss)\n+{\n+    std::vector<std::string> result;\n+    std::string item;\n+    while (ss.good()) {\n+        getline(ss, item, ',');\n+        result.push_back(item);\n+    }\n+    return result;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933354909",
      "id" : 933354909,
      "line" : 508,
      "node_id" : "PRRC_kwDOABII5843od2d",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 508,
      "original_position" : 23,
      "original_start_line" : 499,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 23,
      "pull_request_review_id" : 1055687529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933354909/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 499,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-29T14:58:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933354909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933355842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933355842"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "if you do the filtering in `AvailableCoins`, we don't need to add this to `coinselection.h`",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T14:54:26Z",
      "diff_hunk" : "@@ -145,6 +147,8 @@ struct CoinSelectionParams {\n      * associated with the same address. This helps reduce privacy leaks resulting from address\n      * reuse. Dust outputs are not eligible to be added to output groups and thus not considered. */\n     bool m_avoid_partial_spends = false;\n+    /** Filter transaction inputs by type */\n+    std::unordered_set<OutputType> m_filter_inputs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933355842",
      "id" : 933355842,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII5843oeFC",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 151,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 17,
      "pull_request_review_id" : 1055687529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933355842/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T14:58:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933355842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933356420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933356420"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "same as above, this isn't needed if we filter in `AvailableCoins`",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T14:55:01Z",
      "diff_hunk" : "@@ -776,6 +801,7 @@ static BResult<CreatedTransactionResult> CreateTransactionInternal(\n \n     CoinSelectionParams coin_selection_params{rng_fast}; // Parameters for coin selection, init with dummy\n     coin_selection_params.m_avoid_partial_spends = coin_control.m_avoid_partial_spends;\n+    coin_selection_params.m_filter_inputs = coin_control.m_filter_inputs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933356420",
      "id" : 933356420,
      "line" : 804,
      "node_id" : "PRRC_kwDOABII5843oeOE",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 804,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 63,
      "pull_request_review_id" : 1055687529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933356420/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T14:58:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933356420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933358821"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933358821"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "it would be great to test the case where we filter inputs to a particular type (or multiple types) and then verify that the inputs in the funded tx only contain those types. you can look at `test/functioanal/wallet_avoid_mixing_output_types.py` for an example of checking the inputs to a transaction and verifying they are all of a certain `OutputType`",
      "commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "created_at" : "2022-07-29T14:57:31Z",
      "diff_hunk" : "@@ -181,6 +182,41 @@ def test_simple(self):\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtxfund['hex'])\n         assert len(dec_tx['vin']) > 0  #test that we have enough inputs\n \n+    def check_segwit_inputs(self, vins):\n+        for vin in vins:\n+            # check vin is a segwit input\n+            utxo = self.nodes[2].gettxout(vin['txid'], vin['vout'])\n+            info = self.nodes[2].getaddressinfo(utxo['scriptPubKey']['address'])\n+            if not info['iswitness']:\n+                return False\n+\n+        return True\n+\n+    def test_witness_only(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933358821",
      "id" : 933358821,
      "line" : 195,
      "node_id" : "PRRC_kwDOABII5843oezl",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 195,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 22,
      "pull_request_review_id" : 1055687529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933358821/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T14:58:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933358821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933799137"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933799137"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I fixed it",
      "commit_id" : "8f907bbc43a6310112fabc42d0fd4b7cd57530e1",
      "created_at" : "2022-07-30T12:18:01Z",
      "diff_hunk" : "@@ -486,6 +486,27 @@ static std::vector<RPCArg> FundTxDoc(bool solving_data = true)\n     return args;\n }\n \n+static inline OutputType parseOutputType(const std::string& outputTypeStr)\n+{\n+    const auto outputType = ParseOutputType(outputTypeStr);\n+    if (!outputType) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Unknown input type '%s'\", outputTypeStr));\n+    }\n+\n+    return *outputType;\n+}\n+\n+static inline std::vector<std::string> parseStringList(std::stringstream& ss)\n+{\n+    std::vector<std::string> result;\n+    std::string item;\n+    while (ss.good()) {\n+        getline(ss, item, ',');\n+        result.push_back(item);\n+    }\n+    return result;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r933799137",
      "id" : 933799137,
      "in_reply_to_id" : 933354909,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843qKTh",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 509,
      "original_position" : 23,
      "original_start_line" : 499,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1056297660,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933799137/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-30T12:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933799137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you @josibake for the review and the commits! I added your commits and fixed the list parsing.\r\nI will address the test a bit later.",
      "created_at" : "2022-07-30T12:19:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1200147861",
      "id" : 1200147861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585HiM2V",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200147861/reactions"
      },
      "updated_at" : "2022-07-30T12:19:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200147861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r934638820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934638820"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I've added these tests.\r\nI included some helpers from `wallet_avoid_mixing_output_types` to the test framework to reuse them.",
      "commit_id" : "0a9d34527ebce75b97aa040e3853e1d0112fa0da",
      "created_at" : "2022-08-01T15:08:56Z",
      "diff_hunk" : "@@ -181,6 +182,41 @@ def test_simple(self):\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtxfund['hex'])\n         assert len(dec_tx['vin']) > 0  #test that we have enough inputs\n \n+    def check_segwit_inputs(self, vins):\n+        for vin in vins:\n+            # check vin is a segwit input\n+            utxo = self.nodes[2].gettxout(vin['txid'], vin['vout'])\n+            info = self.nodes[2].getaddressinfo(utxo['scriptPubKey']['address'])\n+            if not info['iswitness']:\n+                return False\n+\n+        return True\n+\n+    def test_witness_only(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r934638820",
      "id" : 934638820,
      "in_reply_to_id" : 933358821,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843tXTk",
      "original_commit_id" : "a99b734ec1c138deaa448a4c9787bb1db5996d39",
      "original_line" : 195,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 1057461747,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934638820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-01T15:08:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/934638820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have rebased the PR on top of @josibake's PR #25734.\r\nThe RPC `fundrawtransaction` and `walletcreatefundedpsbt` now take an option to filter inputs during the coin selection.\r\nI've added a test case.",
      "created_at" : "2022-08-01T15:12:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1201334294",
      "id" : 1201334294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585HmugW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1201334294/reactions"
      },
      "updated_at" : "2022-08-01T15:12:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1201334294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-05T13:56:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1206487021",
      "id" : 1206487021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585H6Yft",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206487021/reactions"
      },
      "updated_at" : "2022-08-05T13:56:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206487021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r962154789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962154789"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Small idea, what about using an optional bit-field here?\r\nSo you later can skip coins with a fast:\r\n```c++\r\nif (m_filter_inputs && !(*m_filter_inputs & coin_type)) continue;\r\n```",
      "commit_id" : "0a9d34527ebce75b97aa040e3853e1d0112fa0da",
      "created_at" : "2022-09-03T13:33:36Z",
      "diff_hunk" : "@@ -38,6 +39,8 @@ class CCoinControl\n     //! If true, the selection process can add extra unselected inputs from the wallet\n     //! while requires all selected inputs be used\n     bool m_allow_other_inputs = false;\n+    //! Filter inputs by type\n+    std::unordered_set<OutputType> m_filter_inputs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r962154789",
      "id" : 962154789,
      "line" : 43,
      "node_id" : "PRRC_kwDOABII5845WVEl",
      "original_commit_id" : "432310ff0bfe8938db0b3f0360382376c4ce5a11",
      "original_line" : 43,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/coincontrol.h",
      "position" : 13,
      "pull_request_review_id" : 1095508148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962154789/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-03T13:33:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962154789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r962695948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962695948"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "great idea, I pushed it\r\n`git diff 0a9d345 89ea8fc`",
      "commit_id" : "89ea8fcb92cebf8443886ad1d6032c2bef3c5025",
      "created_at" : "2022-09-05T09:29:01Z",
      "diff_hunk" : "@@ -38,6 +39,8 @@ class CCoinControl\n     //! If true, the selection process can add extra unselected inputs from the wallet\n     //! while requires all selected inputs be used\n     bool m_allow_other_inputs = false;\n+    //! Filter inputs by type\n+    std::unordered_set<OutputType> m_filter_inputs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r962695948",
      "id" : 962695948,
      "in_reply_to_id" : 962154789,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845YZMM",
      "original_commit_id" : "432310ff0bfe8938db0b3f0360382376c4ce5a11",
      "original_line" : 43,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 1096155473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962695948/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-05T09:29:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/962695948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963004630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963004630"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "can remove this include now.",
      "commit_id" : "28540bcacaed113fd8b3b4b7046a8ac2557a2c8c",
      "created_at" : "2022-09-05T15:21:41Z",
      "diff_hunk" : "@@ -17,6 +17,7 @@\n #include <algorithm>\n #include <map>\n #include <set>\n+#include <unordered_set>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963004630",
      "id" : 963004630,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5845ZkjW",
      "original_commit_id" : "28540bcacaed113fd8b3b4b7046a8ac2557a2c8c",
      "original_line" : 20,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/coincontrol.h",
      "position" : 4,
      "pull_request_review_id" : 1096600034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963004630/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-05T15:35:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963004630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963012107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963012107"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No need to implement the function `parseStringList`, we already have such functionality.  Can directly provide the array and read it in the following way:\r\n```c++\r\nUniValue array = options[\"filter_inputs_by\"].get_array();\r\nfor (size_t i = 0; i < array.size(); i++) {\r\n    const auto& type = parseOutputType(array[I].get_str());\r\n    if (!type) throw exception;\r\n    coinControl->m_filter_inputs |= static_cast<unsigned int>(*type);\r\n}\r\n```\r\n\r\n(remember to change the test to provide an array instead of a string separated by commas as well)",
      "commit_id" : "9e7fd5c0fe3752d0c99858a24b953584916042f7",
      "created_at" : "2022-09-05T15:32:52Z",
      "diff_hunk" : "@@ -530,13 +552,24 @@ void FundTransaction(CWallet& wallet, CMutableTransaction& tx, CAmount& fee_out,\n                 {\"conf_target\", UniValueType(UniValue::VNUM)},\n                 {\"estimate_mode\", UniValueType(UniValue::VSTR)},\n                 {\"input_weights\", UniValueType(UniValue::VARR)},\n+                {\"filter_inputs_by\", UniValueType(UniValue::VSTR)},\n             },\n             true, true);\n \n         if (options.exists(\"add_inputs\")) {\n             coinControl.m_allow_other_inputs = options[\"add_inputs\"].get_bool();\n         }\n \n+        if (options.exists(\"filter_inputs_by\")) {\n+            UniValue v = options[\"filter_inputs_by\"];\n+            std::stringstream ss(v.get_str());\n+            const auto& outputTypes = parseStringList(ss);\n+            coinControl.m_filter_inputs = 0;\n+            for (size_t i = 0; i < outputTypes.size(); i++) {\n+                *coinControl.m_filter_inputs |= static_cast<unsigned int>(parseOutputType(outputTypes[i]));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963012107",
      "id" : 963012107,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845ZmYL",
      "original_commit_id" : "28540bcacaed113fd8b3b4b7046a8ac2557a2c8c",
      "original_line" : 569,
      "original_position" : 47,
      "original_start_line" : 564,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1096600034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963012107/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-05T19:19:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963012107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963473174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963473174"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "thanks, i pushed it",
      "commit_id" : "9e7fd5c0fe3752d0c99858a24b953584916042f7",
      "created_at" : "2022-09-06T09:21:59Z",
      "diff_hunk" : "@@ -530,13 +552,24 @@ void FundTransaction(CWallet& wallet, CMutableTransaction& tx, CAmount& fee_out,\n                 {\"conf_target\", UniValueType(UniValue::VNUM)},\n                 {\"estimate_mode\", UniValueType(UniValue::VSTR)},\n                 {\"input_weights\", UniValueType(UniValue::VARR)},\n+                {\"filter_inputs_by\", UniValueType(UniValue::VSTR)},\n             },\n             true, true);\n \n         if (options.exists(\"add_inputs\")) {\n             coinControl.m_allow_other_inputs = options[\"add_inputs\"].get_bool();\n         }\n \n+        if (options.exists(\"filter_inputs_by\")) {\n+            UniValue v = options[\"filter_inputs_by\"];\n+            std::stringstream ss(v.get_str());\n+            const auto& outputTypes = parseStringList(ss);\n+            coinControl.m_filter_inputs = 0;\n+            for (size_t i = 0; i < outputTypes.size(); i++) {\n+                *coinControl.m_filter_inputs |= static_cast<unsigned int>(parseOutputType(outputTypes[i]));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#discussion_r963473174",
      "id" : 963473174,
      "in_reply_to_id" : 963012107,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845bW8W",
      "original_commit_id" : "28540bcacaed113fd8b3b4b7046a8ac2557a2c8c",
      "original_line" : 569,
      "original_position" : 47,
      "original_start_line" : 564,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1097246745,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25183",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963473174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-06T09:21:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/963473174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Do you have a concrete use-case in mind? I'm not sure, but it seems #25181 supposes that we do control the wallet.\r\n> \r\n> I believe if your wallet already has mixed inputs and you want to filter these, this feature may be useful.\r\n\r\nI was thinking about this proposal and I'm still not convinced there is a clear understanding how this would be actually used in the real world.\r\n\r\nThe declared benefit is non-malleability for lightning wallets (#25181). For new lightning wallets this is a non-issue as they shouldn't have non-segwit descriptors in the first place. IIUC the proposed solution for existing wallets is to filter malleable inputs when creating channel opening txs in `fundrawtransaction` and `walletcreatefundedpsbt`. This approach renders a portion of wallet funds unusable and have a number of problems:\r\n1) users could be confused about funding errors despite having enough balance\r\n2) it doesn't provide a solution how to make all the funds usable\r\n3) what about other RPCs? what if non-malleable inputs are added by `walletprocesspsbt` or when bumping psbt?\r\n     \r\nIt seems what you really want is to \"unmix\" the wallet, i.e. sweep all malleable inputs as a one-time operation. \r\nToday, I think, there are two main approaches users can take to achieve this:\r\n1) (preferred, descriptors only) create a new wallet and import only segwit descriptors from the old wallet\r\n2) create a new lighting wallet and fund it with desired amount to one or more addresses \r\n\r\nWhile 2nd approach has some downsides, maybe it's just good enough. I don't know whether there are enough users affected and whether these downsides outweigh the added complexity.",
      "created_at" : "2022-09-07T07:22:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1239007186",
      "id" : 1239007186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585J2b_S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1239007186/reactions"
      },
      "updated_at" : "2022-09-07T07:22:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1239007186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-09-21T15:42:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25183#issuecomment-1253890171",
      "id" : 1253890171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25183",
      "node_id" : "IC_kwDOABII585KvNh7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1253890171/reactions"
      },
      "updated_at" : "2022-09-21T15:42:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1253890171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
