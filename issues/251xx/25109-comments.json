[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cc @vasild @w0xlt @jonatack @hebasto \r\n\r\nThis is the first two commits from #24931 so we can hopefully make some progress..",
      "created_at" : "2022-05-11T17:17:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1124036445",
      "id" : 1124036445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585C_29d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124036445/reactions"
      },
      "updated_at" : "2022-05-11T17:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124036445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24970](https://github.com/bitcoin/bitcoin/pull/24970) (net processing: Move cleanSubVer, fPreferredDownload and nLocalHostNonce to Peer by jnewbery)\n* [#24474](https://github.com/bitcoin/bitcoin/pull/24474) (Additional thread safety annotations for CNode/Peer by ajtowns)\n* [#24356](https://github.com/bitcoin/bitcoin/pull/24356) (refactor: replace CConnman::SocketEvents() with mockable Sock::WaitMany() by vasild)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n* [#24170](https://github.com/bitcoin/bitcoin/pull/24170) (p2p, rpc: Manual block-relay-only connections with addnode by mzumsande)\n* [#24122](https://github.com/bitcoin/bitcoin/pull/24122) (refactor: replace RecursiveMutex `cs_vProcessMsg` with Mutex (and rename) by theStack)\n* [#21878](https://github.com/bitcoin/bitcoin/pull/21878) (Make all networking code mockable by vasild)\n* [#21527](https://github.com/bitcoin/bitcoin/pull/21527) (net_processing: lock clean up by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-12T07:24:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1124625585",
      "id" : 1124625585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DCGyx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124625585/reactions"
      },
      "updated_at" : "2022-05-13T17:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1124625585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> diff ...\r\n\r\nI don't think it is meaningful or useful to annotate lambdas, as annotations are stripped as soon as they are assigned to a `std::function<...>` type.",
      "created_at" : "2022-05-13T14:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126112871",
      "id" : 1126112871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DHx5n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126112871/reactions"
      },
      "updated_at" : "2022-05-13T14:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126112871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> annotations are stripped\r\n\r\nHmm:\r\n\r\n```cpp\r\nvoid f()\r\n{\r\n    auto g = []() EXCLUSIVE_LOCKS_REQUIRED(!::cs_main) { AssertLockNotHeld(::cs_main); };\r\n    g(); // error: calling function 'operator()' requires negative capability '!cs_main' [-Werror,-Wthread-safety-analysis]\r\n}\r\n```\r\n\r\n (clang 15)",
      "created_at" : "2022-05-13T14:44:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126136958",
      "id" : 1126136958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DH3x-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126136958/reactions"
      },
      "updated_at" : "2022-05-13T14:44:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126136958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > diff ...\r\n\r\nI think that's large enough and independent enough that it warrants its own PR...\r\n\r\n> I don't think it is meaningful or useful to annotate lambdas, as annotations are stripped as soon as they are assigned to a `std::function<...>` type.\r\n\r\nThat means they're still useful when passed around via `auto` or templated types though. It gets pretty cumbersome anytime the lambda is passed to some generic function that wants a callback though.",
      "created_at" : "2022-05-13T15:08:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126159979",
      "id" : 1126159979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DH9Zr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126159979/reactions"
      },
      "updated_at" : "2022-05-13T15:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126159979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Hmm `auto`\r\n\r\nauto in this context is not a `std::function`, so it may still have the annotations attached.\r\n\r\n> That means they're still useful when passed around via auto or templated types though.\r\n\r\nEh, isn't this what we want to avoid? For example, annotating an rpc method lambda with lock annotations will either:\r\n\r\n* get them stripped away (as they are assigned to a `std::function`)\r\n* pollute the rpc server code (if they are somehow templated) with global lock annotations\r\n* might result in a compile failure if the calling function can't be annotated (for example it is from an external library) \r\n\r\nNone of this sounds useful or like an improvement. The diff that @vasild posted above looks similar to the diff that I NACKed two years ago https://github.com/bitcoin/bitcoin/pull/20272#pullrequestreview-520824413",
      "created_at" : "2022-05-13T15:25:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126176071",
      "id" : 1126176071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DIBVH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126176071/reactions"
      },
      "updated_at" : "2022-05-13T15:25:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126176071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Well, that diff above is required if we want to avoid the two `AssertLockNotHeldInline()` introduced in this PR and use just the first one:\r\n\r\n```cpp\r\ninline void AssertLockNotHeldInline(const char* name, const char* file, int line, Mutex* cs) EXCLUSIVE_LOCKS_REQUIRED(!cs) { AssertLockNotHeldInternal(name, file, line, cs); }\r\ninline void AssertLockNotHeldInline(const char* name, const char* file, int line, RecursiveMutex* cs) LOCKS_EXCLUDED(cs) { AssertLockNotHeldInternal(name, file, line, cs); }\r\n```\r\n\r\nOr, in other words, to avoid this (from this PR description):\r\n\r\n> Note that this can't reasonably be used for globals, because clang would require every function to be annotated with EXCLUSIVE_LOCKS_REQUIRED(!g_mutex) for each global mutex.\r\n\r\nAnyway - I am ok with this PR as it is. It's an improvement from the current situation IMO, even with the two `AssertLockNotHeldInline()`s.",
      "created_at" : "2022-05-13T15:58:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126205612",
      "id" : 1126205612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DIIis",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126205612/reactions"
      },
      "updated_at" : "2022-05-13T15:59:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126205612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > That means they're still useful when passed around via `auto` or templated types though. It gets pretty cumbersome anytime the lambda is passed to some generic function that wants a callback though.\r\n>\r\n> Eh, isn't this what we want to avoid? For example, annotating an rpc method lambda with lock annotations will ...\r\n\r\nYeah, that's what I meant by cumbersome. Could be worthwhile in some cases maybe though (I know I've added annotations to some lambdas which didn't seem too bad).",
      "created_at" : "2022-05-13T17:05:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1126265489",
      "id" : 1126265489,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DIXKR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126265489/reactions"
      },
      "updated_at" : "2022-05-13T17:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126265489",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873629811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873629811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is `!m_added_nodes_mutex` needed? Recall that starting a thread that takes a lock has no lock annotation implications on the caller.",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T11:47:13Z",
      "diff_hunk" : "@@ -795,7 +795,8 @@ class CConnman\n              bool network_active = true);\n \n     ~CConnman();\n-    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex, !m_added_nodes_mutex, !m_addr_fetches_mutex, !mutexMsgProc);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873629811",
      "id" : 873629811,
      "line" : 799,
      "node_id" : "PRRC_kwDOABII5840Eohz",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 799,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 48,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873629811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873629811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873639165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873639165"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: This should probably be removed",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T11:58:23Z",
      "diff_hunk" : "@@ -440,30 +440,37 @@ class PeerManagerImpl final : public PeerManager\n                     CTxMemPool& pool, bool ignore_incoming_txs);\n \n     /** Overridden from CValidationInterface. */\n-    void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected) override;\n-    void BlockDisconnected(const std::shared_ptr<const CBlock> &block, const CBlockIndex* pindex) override;\n-    void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) override;\n-    void BlockChecked(const CBlock& block, const BlockValidationState& state) override;\n+    void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_recent_confirmed_transactions_mutex);\n+    void BlockDisconnected(const std::shared_ptr<const CBlock> &block, const CBlockIndex* pindex) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_recent_confirmed_transactions_mutex);\n+    void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void BlockChecked(const CBlock& block, const BlockValidationState& state) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& pblock) override;\n \n     /** Implement NetEventsInterface */\n-    void InitializeNode(CNode* pnode) override;\n-    void FinalizeNode(const CNode& node) override;\n-    bool ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt) override;\n-    bool SendMessages(CNode* pto) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing);\n+    void InitializeNode(CNode* pnode) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void FinalizeNode(const CNode& node) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    bool ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex, !m_recent_confirmed_transactions_mutex);\n+    bool SendMessages(CNode* pto) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex, !m_recent_confirmed_transactions_mutex);\n \n     /** Implement PeerManager */\n     void StartScheduledTasks(CScheduler& scheduler) override;\n     void CheckForStaleTipAndEvictPeers() override;\n     std::optional<std::string> FetchBlock(NodeId peer_id, const CBlockIndex& block_index) override;\n-    bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) const override;\n+    bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) const override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     bool IgnoresIncomingTxs() override { return m_ignore_incoming_txs; }\n-    void SendPings() override;\n-    void RelayTransaction(const uint256& txid, const uint256& wtxid) override;\n+    void SendPings() override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void RelayTransaction(const uint256& txid, const uint256& wtxid) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     void SetBestHeight(int height) override { m_best_height = height; };\n-    void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message) override;\n+    void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873639165",
      "id" : 873639165,
      "line" : 470,
      "node_id" : "PRRC_kwDOABII5840Eqz9",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 470,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 43,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873639165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873639165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873646983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873646983"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same here, as it would be better to just pass the `Peer&`",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T12:07:58Z",
      "diff_hunk" : "@@ -495,14 +502,16 @@ class PeerManagerImpl final : public PeerManager\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n     bool MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n-                                 bool via_compact_block, const std::string& message = \"\");\n+                                 bool via_compact_block, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873646983",
      "id" : 873646983,
      "line" : 506,
      "node_id" : "PRRC_kwDOABII5840EsuH",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 506,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 76,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873646983/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873646983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873647178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873647178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T12:08:10Z",
      "diff_hunk" : "@@ -495,14 +502,16 @@ class PeerManagerImpl final : public PeerManager\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n     bool MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n-                                 bool via_compact_block, const std::string& message = \"\");\n+                                 bool via_compact_block, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n \n     /**\n      * Potentially disconnect and discourage a node based on the contents of a TxValidationState object\n      *\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n-    bool MaybePunishNodeForTx(NodeId nodeid, const TxValidationState& state, const std::string& message = \"\");\n+    bool MaybePunishNodeForTx(NodeId nodeid, const TxValidationState& state, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873647178",
      "id" : 873647178,
      "line" : 514,
      "node_id" : "PRRC_kwDOABII5840EsxK",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 514,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 85,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873647178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873647178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873648811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873648811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T12:10:04Z",
      "diff_hunk" : "@@ -512,13 +521,16 @@ class PeerManagerImpl final : public PeerManager\n      */\n     bool MaybeDiscourageAndDisconnect(CNode& pnode, Peer& peer);\n \n-    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans);\n+    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     /** Process a single headers message from a peer. */\n     void ProcessHeadersMessage(CNode& pfrom, const Peer& peer,\n                                const std::vector<CBlockHeader>& headers,\n-                               bool via_compact_block);\n+                               bool via_compact_block)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873648811",
      "id" : 873648811,
      "line" : 530,
      "node_id" : "PRRC_kwDOABII5840EtKr",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 530,
      "original_position" : 101,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 101,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873648811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873648811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873649270"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873649270"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T12:10:34Z",
      "diff_hunk" : "@@ -512,13 +521,16 @@ class PeerManagerImpl final : public PeerManager\n      */\n     bool MaybeDiscourageAndDisconnect(CNode& pnode, Peer& peer);\n \n-    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans);\n+    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873649270",
      "id" : 873649270,
      "line" : 525,
      "node_id" : "PRRC_kwDOABII5840EtR2",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 525,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 95,
      "pull_request_review_id" : 973819164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873649270/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T12:17:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873649270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873713512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873713512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It was an extra assertion needed for the subsequent commits in #24931.",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T13:16:14Z",
      "diff_hunk" : "@@ -795,7 +795,8 @@ class CConnman\n              bool network_active = true);\n \n     ~CConnman();\n-    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex, !m_added_nodes_mutex, !m_addr_fetches_mutex, !mutexMsgProc);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873713512",
      "id" : 873713512,
      "in_reply_to_id" : 873629811,
      "line" : 799,
      "node_id" : "PRRC_kwDOABII5840E89o",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 799,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 48,
      "pull_request_review_id" : 973937659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873713512/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T13:16:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873713512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873778526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778526"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tried this, but didn't work, as the Peer might be non-existent (disconnected) at this point.",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:12:44Z",
      "diff_hunk" : "@@ -495,14 +502,16 @@ class PeerManagerImpl final : public PeerManager\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n     bool MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n-                                 bool via_compact_block, const std::string& message = \"\");\n+                                 bool via_compact_block, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873778526",
      "id" : 873778526,
      "in_reply_to_id" : 873646983,
      "line" : 506,
      "node_id" : "PRRC_kwDOABII5840FM1e",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 506,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 76,
      "pull_request_review_id" : 974031637,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778526/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:12:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873778698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778698"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tried this, but didn't work, as the Peer might be non-existent (disconnected) at this point.",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:12:53Z",
      "diff_hunk" : "@@ -495,14 +502,16 @@ class PeerManagerImpl final : public PeerManager\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n     bool MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n-                                 bool via_compact_block, const std::string& message = \"\");\n+                                 bool via_compact_block, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n \n     /**\n      * Potentially disconnect and discourage a node based on the contents of a TxValidationState object\n      *\n      * @return Returns true if the peer was punished (probably disconnected)\n      */\n-    bool MaybePunishNodeForTx(NodeId nodeid, const TxValidationState& state, const std::string& message = \"\");\n+    bool MaybePunishNodeForTx(NodeId nodeid, const TxValidationState& state, const std::string& message = \"\")\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873778698",
      "id" : 873778698,
      "in_reply_to_id" : 873647178,
      "line" : 514,
      "node_id" : "PRRC_kwDOABII5840FM4K",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 514,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 85,
      "pull_request_review_id" : 974031870,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778698/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873778698",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873779713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873779713"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tried this, but didn't work, as the Peer might be non-existent (disconnected) at this point.",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:13:48Z",
      "diff_hunk" : "@@ -512,13 +521,16 @@ class PeerManagerImpl final : public PeerManager\n      */\n     bool MaybeDiscourageAndDisconnect(CNode& pnode, Peer& peer);\n \n-    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans);\n+    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873779713",
      "id" : 873779713,
      "in_reply_to_id" : 873649270,
      "line" : 525,
      "node_id" : "PRRC_kwDOABII5840FNIB",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 525,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 95,
      "pull_request_review_id" : 974033375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873779713/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873779713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873792664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Attempt in #25144 ",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:24:55Z",
      "diff_hunk" : "@@ -512,13 +521,16 @@ class PeerManagerImpl final : public PeerManager\n      */\n     bool MaybeDiscourageAndDisconnect(CNode& pnode, Peer& peer);\n \n-    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans);\n+    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     /** Process a single headers message from a peer. */\n     void ProcessHeadersMessage(CNode& pfrom, const Peer& peer,\n                                const std::vector<CBlockHeader>& headers,\n-                               bool via_compact_block);\n+                               bool via_compact_block)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873792664",
      "id" : 873792664,
      "in_reply_to_id" : 873648811,
      "line" : 530,
      "node_id" : "PRRC_kwDOABII5840FQSY",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 530,
      "original_position" : 101,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 101,
      "pull_request_review_id" : 974051941,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792664/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873792810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792810"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Attempt in #25144",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:25:02Z",
      "diff_hunk" : "@@ -440,30 +440,37 @@ class PeerManagerImpl final : public PeerManager\n                     CTxMemPool& pool, bool ignore_incoming_txs);\n \n     /** Overridden from CValidationInterface. */\n-    void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected) override;\n-    void BlockDisconnected(const std::shared_ptr<const CBlock> &block, const CBlockIndex* pindex) override;\n-    void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) override;\n-    void BlockChecked(const CBlock& block, const BlockValidationState& state) override;\n+    void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_recent_confirmed_transactions_mutex);\n+    void BlockDisconnected(const std::shared_ptr<const CBlock> &block, const CBlockIndex* pindex) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_recent_confirmed_transactions_mutex);\n+    void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void BlockChecked(const CBlock& block, const BlockValidationState& state) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& pblock) override;\n \n     /** Implement NetEventsInterface */\n-    void InitializeNode(CNode* pnode) override;\n-    void FinalizeNode(const CNode& node) override;\n-    bool ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt) override;\n-    bool SendMessages(CNode* pto) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing);\n+    void InitializeNode(CNode* pnode) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void FinalizeNode(const CNode& node) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    bool ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt) override\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex, !m_recent_confirmed_transactions_mutex);\n+    bool SendMessages(CNode* pto) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex, !m_recent_confirmed_transactions_mutex);\n \n     /** Implement PeerManager */\n     void StartScheduledTasks(CScheduler& scheduler) override;\n     void CheckForStaleTipAndEvictPeers() override;\n     std::optional<std::string> FetchBlock(NodeId peer_id, const CBlockIndex& block_index) override;\n-    bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) const override;\n+    bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) const override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     bool IgnoresIncomingTxs() override { return m_ignore_incoming_txs; }\n-    void SendPings() override;\n-    void RelayTransaction(const uint256& txid, const uint256& wtxid) override;\n+    void SendPings() override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n+    void RelayTransaction(const uint256& txid, const uint256& wtxid) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);\n     void SetBestHeight(int height) override { m_best_height = height; };\n-    void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message) override;\n+    void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message) override EXCLUSIVE_LOCKS_REQUIRED(!m_peer_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873792810",
      "id" : 873792810,
      "in_reply_to_id" : 873639165,
      "line" : 470,
      "node_id" : "PRRC_kwDOABII5840FQUq",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 470,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 43,
      "pull_request_review_id" : 974052177,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792810/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:25:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873792810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873811436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873811436"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah. For reference:\r\n\r\n```\r\nnet.cpp:2594:5: warning: calling function 'Init' requires negative capability '!m_added_nodes_mutex' [-Wthread-safety-analysis]\r\n    Init(connOptions);\r\n    ^\r\n1 warning generated.\r\n",
      "commit_id" : "436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:40:39Z",
      "diff_hunk" : "@@ -795,7 +795,8 @@ class CConnman\n              bool network_active = true);\n \n     ~CConnman();\n-    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex, !m_added_nodes_mutex, !m_addr_fetches_mutex, !mutexMsgProc);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#discussion_r873811436",
      "id" : 873811436,
      "in_reply_to_id" : 873629811,
      "line" : 799,
      "node_id" : "PRRC_kwDOABII5840FU3s",
      "original_commit_id" : "7d73f58e9cea8f4b0bc16512983898fddde3d764",
      "original_line" : 799,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 48,
      "pull_request_review_id" : 974080173,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25109",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873811436/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T14:40:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873811436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Post-merge ACK https://github.com/bitcoin/bitcoin/pull/25109/commits/436ce0233c276e263dcb441255dc0b881cb39cfb",
      "created_at" : "2022-05-16T14:50:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25109#issuecomment-1127773639",
      "id" : 1127773639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25109",
      "node_id" : "IC_kwDOABII585DOHXH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127773639/reactions"
      },
      "updated_at" : "2022-05-16T14:50:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127773639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   }
]
