[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "One thing I'm unsure about is that part 1) of this PR  will now make it impossible to go back if we don't know the top block of the locator for some reason - although I don't know how this would be possible because I don't know of a process that would prune stale blocks from the Block Index (except the contrib/linearize script).\r\n\r\nThe old code could recover an index with a no-longer existing best block from that (at the cost of corrupting the coinstatsindex), but I wonder if it would be good to still call `FindForkInGlobalIndex()`, maybe as a fallback, for the other indexes.",
      "created_at" : "2022-05-23T21:28:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135154066",
      "id" : 1135154066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqROS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135154066/reactions"
      },
      "updated_at" : "2022-05-23T21:28:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135154066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/25193#pullrequestreview-1413010190), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/25193#pullrequestreview-1423149303) |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135206510) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/25193#pullrequestreview-1133427556) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27607](https://github.com/bitcoin/bitcoin/pull/27607) (init: verify blocks data existence only once for all the indexers by furszy)\n* [#27596](https://github.com/bitcoin/bitcoin/pull/27596) (assumeutxo (2) by jamesob)\n* [#27125](https://github.com/bitcoin/bitcoin/pull/27125) (refactor, kernel: Decouple ArgsManager from blockstorage by TheCharlatan)\n* [#25302](https://github.com/bitcoin/bitcoin/pull/25302) (build: Check usages of #if defined(...) by brokenprogrammer)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n* [#19792](https://github.com/bitcoin/bitcoin/pull/19792) (rpc: Add dumpcoinstats by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-05-23T21:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135165802",
      "id" : 1135165802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqUFq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135165802/reactions"
      },
      "updated_at" : "2023-05-11T17:54:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135165802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-05-23T22:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135206510",
      "id" : 1135206510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqeBu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135206510/reactions"
      },
      "updated_at" : "2022-05-23T22:42:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135206510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-25T08:21:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1136941599",
      "id" : 1136941599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DxFof",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136941599/reactions"
      },
      "updated_at" : "2022-05-25T08:21:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136941599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893905682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: Use first block from locator instead of looking for fork point\" (20bd2219894e53ab39d2b11edf9a7f3c7bda489b)\r\n\r\nMight be better to call `vHave.at(0)` or check explicitly for an empty vector because `vHave.front()` behavior is undefined if the vector is empty.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:00:48Z",
      "diff_hunk" : "@@ -67,7 +67,13 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893905682",
      "id" : 893905682,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII5841R-sS",
      "original_commit_id" : "20bd2219894e53ab39d2b11edf9a7f3c7bda489b",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 1001910809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:00:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893913934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"node: add fReindexChainState flag to node\" (8898261ac03945e559c98a0abcb9455942ab4775)\r\n\r\nI understand that what this is doing with the new `fReindexChainState` global is similar to what happens with the existing `fReindex` global, but I think what happens with the `fReindex` global is not ideal. I think it's unnecessarily fragile how the value starts off false, then switches to true, then switches back to false again, and think a one way latch would be better. I think it's bad the the variable doesn't have any straightforward meaning but is some combination \"was reindexing requested?\" and \"is reindexing in progress?\". Also in this commit, `fReindexChainState` is different local variables subtly replaced by a global so you can't tell just looking at a diff whether all the existing `fReindexChainState` references were updated correctly.\r\n\r\nI'd suggest leaving `fReindexChainState` alone, and adding a simpler `atomic_bool g_indexes_ready_to_sync = false` global variable, and setting it to true here, and in the normal code path. I think this would make the diff and the overall initialization sequence simpler and easier to understand.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:11:56Z",
      "diff_hunk" : "@@ -885,6 +886,7 @@ void ThreadImport(ChainstateManager& chainman, std::vector<fs::path> vImportFile\n                 StartShutdown();\n                 return;\n             }\n+            fReindexChainState = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893913934",
      "id" : 893913934,
      "line" : 889,
      "node_id" : "PRRC_kwDOABII5841SAtO",
      "original_commit_id" : "8898261ac03945e559c98a0abcb9455942ab4775",
      "original_line" : 889,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 12,
      "pull_request_review_id" : 1001922704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893918940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: Enable reindex-chainstate with active indexes\" (1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc)\r\n\r\nThis is pretty opaque and could use a comment. I'm also not sure it is better to be looking at `fPruneMode` here, than just checking whether reindexing is happening, when it sounds like reindexing is the real problem, and checking for `fPruneMode` is just a proxy for avoiding the real source of the problem?\r\n\r\nAlso it is not obvious to me that just because pruning isn't currently enabled doesn't mean pruning wasn't previously enabled and there couldn't be missing blocks worth checking for here.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:18:59Z",
      "diff_hunk" : "@@ -76,7 +78,7 @@ bool BaseIndex::Init()\n         SetBestBlockIndex(locator_index);\n     }\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n-    if (!m_synced) {\n+    if (!m_synced && fPruneMode) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893918940",
      "id" : 893918940,
      "line" : 81,
      "node_id" : "PRRC_kwDOABII5841SB7c",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 81,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1001922704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:21:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just leaving as a note, but I think this allows the `if (!active_chain.Contains(block_to_test)) {` case to be hit. Previously `FindForkInGlobalIndex` would return a `CBlockIndex` only in the current chain and so `active_chain.Contains` would always be true.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-22T18:15:22Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952",
      "id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII584142To",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1015681435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T18:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904408112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952\r\n\r\nIn commit \"index: Use first block from locator instead of looking for fork point\" (20bd2219894e53ab39d2b11edf9a7f3c7bda489b)\r\n\r\nYes, this seems to be the case. This is a good indication the original author or this code expecting was expecting to FindForkInGlobalIndex to just return a block based on the locator, not necessarily a block on the current chain. So new code is probably closer to intent of original code.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:04:19Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904408112",
      "id" : 904408112,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416Cww",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016169995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:04:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736"
         }
      },
      "author_association" : "NONE",
      "body" : "Thank you your a angle",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:38:06Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421736",
      "id" : 904421736,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416GFo",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016202899,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:38:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89423062?v=4",
         "events_url" : "https://api.github.com/users/Bat3an/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bat3an/followers",
         "following_url" : "https://api.github.com/users/Bat3an/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bat3an/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bat3an",
         "id" : 89423062,
         "login" : "Bat3an",
         "node_id" : "MDQ6VXNlcjg5NDIzMDYy",
         "organizations_url" : "https://api.github.com/users/Bat3an/orgs",
         "received_events_url" : "https://api.github.com/users/Bat3an/received_events",
         "repos_url" : "https://api.github.com/users/Bat3an/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bat3an/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bat3an/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bat3an"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985"
         }
      },
      "author_association" : "NONE",
      "body" : "The both you are gods sent angle's ",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:38:45Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421985",
      "id" : 904421985,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416GJh",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016203164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:38:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89423062?v=4",
         "events_url" : "https://api.github.com/users/Bat3an/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bat3an/followers",
         "following_url" : "https://api.github.com/users/Bat3an/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bat3an/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bat3an",
         "id" : 89423062,
         "login" : "Bat3an",
         "node_id" : "MDQ6VXNlcjg5NDIzMDYy",
         "organizations_url" : "https://api.github.com/users/Bat3an/orgs",
         "received_events_url" : "https://api.github.com/users/Bat3an/received_events",
         "repos_url" : "https://api.github.com/users/Bat3an/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bat3an/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bat3an/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bat3an"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905382208"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905382208"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also it is not obvious to me that just because pruning isn't currently enabled doesn't mean pruning wasn't previously enabled and there couldn't be missing blocks worth checking for here.\r\n\r\nI think that this shouldn't be possible: We check in Init when loading the chainstate (`chainman.LoadBlockIndex()`) that we either have all the blocks from genesis, or allow for pruning - otherwise, we abort with an InitError and never get to the point where the indexes are started.\r\n\r\nI replaced the check with the indirect `g_indexes_ready_to_sync` as suggested and added a comment. This way, the pruning check will continue to be executed regardless of pruning status (unless -reindex is specified).\r\n\r\nWhat I don't like is that this would throw a confusing InitError message if it somehow failed on a non-pruning node (\"block of the index goes beyond pruned data\"). Maybe the check should assert instead if `fPrune==false`? ",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-23T19:25:25Z",
      "diff_hunk" : "@@ -76,7 +78,7 @@ bool BaseIndex::Init()\n         SetBestBlockIndex(locator_index);\n     }\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n-    if (!m_synced) {\n+    if (!m_synced && fPruneMode) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905382208",
      "id" : 905382208,
      "in_reply_to_id" : 893918940,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58419wlA",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 81,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1017534498,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905382208/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T19:25:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905382208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905383089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That makes sense. I dropped the commit that made `fReindexChainState` a global and added `g_indexes_ready_to_sync` as suggested.",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-23T19:26:42Z",
      "diff_hunk" : "@@ -885,6 +886,7 @@ void ThreadImport(ChainstateManager& chainman, std::vector<fs::path> vImportFile\n                 StartShutdown();\n                 return;\n             }\n+            fReindexChainState = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905383089",
      "id" : 905383089,
      "in_reply_to_id" : 893913934,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58419wyx",
      "original_commit_id" : "8898261ac03945e559c98a0abcb9455942ab4775",
      "original_line" : 889,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1017535759,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T19:26:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905383530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383530"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Changed to `vHave.at(0)`",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-23T19:27:16Z",
      "diff_hunk" : "@@ -67,7 +67,13 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905383530",
      "id" : 905383530,
      "in_reply_to_id" : 893905682,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58419w5q",
      "original_commit_id" : "20bd2219894e53ab39d2b11edf9a7f3c7bda489b",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1017536353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383530/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T19:27:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905383530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905388593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905388593"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> So new code is probably closer to intent of original code.\r\n\r\nTrue. Although to be fair, this also changes the reading of the best block such that we don't use anything but the top block of the locator, which probably wasn't the original intent because otherwise there would have been no need to store a locator in the first place instead of a single block hash. ",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-23T19:34:30Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905388593",
      "id" : 905388593,
      "in_reply_to_id" : 904094952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58419yIx",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1017543810,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905388593/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T19:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905388593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[1e598cf ](https://github.com/bitcoin/bitcoin/commit/1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc)to [91947e4](https://github.com/bitcoin/bitcoin/commit/91947e4387d98290d39c9201f85a9aefa235a4d1)\r\naddressed feedback by @ryanofsky - thanks!",
      "created_at" : "2022-06-23T19:35:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1164793674",
      "id" : 1164793674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585FbVdK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164793674/reactions"
      },
      "updated_at" : "2022-06-23T20:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164793674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905412120"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905412120"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Making `g_indexes_ready_to_sync` a one-way switch requires to manually set it to true in the unit tests though. I did that in `TestingSetup::TestingSetup()` to avoid setting it in each unit tests that uses indexes separately.",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-23T20:07:04Z",
      "diff_hunk" : "@@ -885,6 +886,7 @@ void ThreadImport(ChainstateManager& chainman, std::vector<fs::path> vImportFile\n                 StartShutdown();\n                 return;\n             }\n+            fReindexChainState = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r905412120",
      "id" : 905412120,
      "in_reply_to_id" : 893913934,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841934Y",
      "original_commit_id" : "8898261ac03945e559c98a0abcb9455942ab4775",
      "original_line" : 889,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1017577795,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905412120/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T20:07:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905412120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907572547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907572547"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Without this patch, is it possible that the old code goes back to genesis in this rare, kind of contrived scenario?:\r\n\r\n- index best block committed at height `h`\r\n- a reorg occurs starting at `h-1` to `h+1`\r\n- notifications are queued\r\n- chain state happens to be flushed (say the coins cache size is critical)\r\n- node crashes after flush so notifications aren't delivered\r\n- on startup, `Tip=h+1`, so `FindForkInGlobalIndex` for the index best block returns genesis",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-27T16:25:30Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907572547",
      "id" : 907572547,
      "in_reply_to_id" : 904094952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842GHVD",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1020457427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907572547/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T16:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907572547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907689834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907689834"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: Enable reindex-chainstate with active indexes\" (91947e4387d98290d39c9201f85a9aefa235a4d1)\r\n\r\nThis is a pedantic, academic suggestion, but should consider writing this as:\r\n\r\n```c++\r\nif (!fReindexChainState) g_indexes_ready_to_sync = true;\r\n```\r\n\r\nTo make this part of the init function idempotent, and also make it clearer that index code only needs to handle `g_indexes_ready_to_sync` transitioning from false to true, never the other way around.",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-27T18:41:31Z",
      "diff_hunk" : "@@ -1563,6 +1551,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     RegisterValidationInterface(node.peerman.get());\n \n     // ********************************************************* Step 8: start indexers\n+\n+    // If reindex-chainstate was specified, delay syncing indexes until ThreadImport has reindexed the chain\n+    g_indexes_ready_to_sync = !fReindexChainState;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907689834",
      "id" : 907689834,
      "line" : 1556,
      "node_id" : "PRRC_kwDOABII5842Gj9q",
      "original_commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "original_line" : 1556,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 43,
      "pull_request_review_id" : 1020628059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907689834/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T18:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907689834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907702886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907702886"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907572547\r\n\r\n> Without this patch, is it possible that the old code goes back to genesis in this rare, kind of contrived scenario?:\r\n\r\nMaybe I need to think about this more, but I don't think it can go back to genesis. It can just go back to the last common block before the reorg. Also, the problem which this patch fixes isn't going backwards in general, but going backwards without rewinding. The problem with the `FindForkInGlobalIndex` is that it goes backwards without making needed `Rewind()` call to update indexes",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-27T18:56:49Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907702886",
      "id" : 907702886,
      "in_reply_to_id" : 904094952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842GnJm",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1020628059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907702886/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T18:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907702886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907779757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907779757"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "From my reading, if `FindForkInGlobalIndex` doesn't find `pindex` in the chain or doesn't find `Tip()` as an ancestor of `pindex`, it returns genesis. But yeah a bit orthogonal to the issue at hand",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-27T20:41:05Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907779757",
      "id" : 907779757,
      "in_reply_to_id" : 904094952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842G56t",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1020756270,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907779757/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T20:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907779757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907855877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907855877"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907779757\r\n\r\n> From my reading, if `FindForkInGlobalIndex` doesn't find `pindex` in the chain or doesn't find `Tip()` as an ancestor of `pindex`, it returns genesis. But yeah a bit orthogonal to the issue at hand\r\n\r\nWow, you are right. The [`FindForkInGlobalIndex`](https://github.com/bitcoin/bitcoin/blob/2111f32f2a6998531871e7792b5208992868ba7f/src/validation.cpp#L131-L149) behavior is much different than the [`FindFork`](https://github.com/bitcoin/bitcoin/blob/2111f32f2a6998531871e7792b5208992868ba7f/src/chain.cpp#L54-L63) behavior. I assumed `FindForkInGlobalIndex` would try to find the last common ancestor between the locator block and the chain like `FindFork` does, but it doesn't even try to do this. Instead it will literally only return the exact locator block, or the chain tip, or the genesis block. It doesn't make any sense to me why the function would be implemented this way, but I guess it's good that this PR removes one usage of it...",
      "commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "created_at" : "2022-06-27T22:39:15Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r907855877",
      "id" : 907855877,
      "in_reply_to_id" : 904094952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842HMgF",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1020864258,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907855877/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T22:39:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907855877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-29T08:02:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1169661247",
      "id" : 1169661247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585Ft50_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169661247/reactions"
      },
      "updated_at" : "2022-06-29T08:02:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169661247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r912052487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/912052487"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done with the latest push.",
      "commit_id" : "702f481f7e97ebfd438f27464de3a2d4d77497bc",
      "created_at" : "2022-07-01T15:16:59Z",
      "diff_hunk" : "@@ -1563,6 +1551,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     RegisterValidationInterface(node.peerman.get());\n \n     // ********************************************************* Step 8: start indexers\n+\n+    // If reindex-chainstate was specified, delay syncing indexes until ThreadImport has reindexed the chain\n+    g_indexes_ready_to_sync = !fReindexChainState;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r912052487",
      "id" : 912052487,
      "in_reply_to_id" : 907689834,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842XNEH",
      "original_commit_id" : "91947e4387d98290d39c9201f85a9aefa235a4d1",
      "original_line" : 1556,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1026355531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/912052487/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-01T15:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/912052487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[91947e4 ](https://github.com/bitcoin/bitcoin/commit/91947e4387d98290d39c9201f85a9aefa235a4d1)to [702f481](https://github.com/bitcoin/bitcoin/commit/702f481f7e97ebfd438f27464de3a2d4d77497bc): \r\nrebased and addressed comment by @ryanofsky ",
      "created_at" : "2022-07-01T15:19:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1172457193",
      "id" : 1172457193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585F4kbp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172457193/reactions"
      },
      "updated_at" : "2022-07-01T15:19:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172457193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-18T15:52:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1187670580",
      "id" : 1187670580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585Gymo0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187670580/reactions"
      },
      "updated_at" : "2022-07-18T15:52:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187670580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[702f481 ](https://github.com/bitcoin/bitcoin/commit/702f481f7e97ebfd438f27464de3a2d4d77497bc)to [6a85526](https://github.com/bitcoin/bitcoin/commit/6a855268964152f920baa98b8e71150604043448):\r\nrebased due to conflict with #25487",
      "created_at" : "2022-07-19T22:24:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1189610402",
      "id" : 1189610402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585G6AOi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189610402/reactions"
      },
      "updated_at" : "2022-07-19T22:24:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189610402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-20T06:10:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1189868653",
      "id" : 1189868653,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585G6_Rt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189868653/reactions"
      },
      "updated_at" : "2022-07-20T06:10:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189868653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[6a85526 ](https://github.com/bitcoin/bitcoin/commit/6a855268964152f920baa98b8e71150604043448)to [53ff637](https://github.com/bitcoin/bitcoin/commit/53ff63799404e6828779c5e4f321acf256fe9018):\r\nrebased due to conflict with #25308",
      "created_at" : "2022-07-20T15:15:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1190414964",
      "id" : 1190414964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585G9Ep0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1190414964/reactions"
      },
      "updated_at" : "2022-07-20T15:15:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1190414964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I do think it would be good if PR description described benefits of these changes\r\n\r\nDone, thanks.\r\n\r\n> You could also consider including this information in release notes.\r\n\r\nDo you mean a sentence like \"The `-reindex-chainstate` option can now be used without the necessity to disable custom indexes\"? I'm not sure if the first change changes user experience enough to be part of the release notes.",
      "created_at" : "2022-08-21T17:49:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1221591911",
      "id" : 1221591911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585I0ANn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1221591911/reactions"
      },
      "updated_at" : "2022-08-21T17:49:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1221591911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-09-16T12:27:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1249303155",
      "id" : 1249303155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585Kdtpz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249303155/reactions"
      },
      "updated_at" : "2022-09-16T12:27:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249303155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[53ff637 ](https://github.com/bitcoin/bitcoin/commit/53ff63799404e6828779c5e4f321acf256fe9018)to [2d0acc2](https://github.com/bitcoin/bitcoin/commit/2d0acc259836e5cb7f40579e76375420a942b86c): Rebased",
      "created_at" : "2022-09-19T17:41:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1251338043",
      "id" : 1251338043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585Klec7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1251338043/reactions"
      },
      "updated_at" : "2022-09-19T17:41:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1251338043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-10-26T11:19:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1291878934",
      "id" : 1291878934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585NAIIW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291878934/reactions"
      },
      "updated_at" : "2022-10-26T11:19:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291878934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[2d0acc2 ](https://github.com/bitcoin/bitcoin/commit/2d0acc259836e5cb7f40579e76375420a942b86c)to [0d00d69](https://github.com/bitcoin/bitcoin/commit/0d00d6996c25d8b82412f022dfe246887bc135c4): rebased due to conflict with #25704",
      "created_at" : "2022-11-03T01:20:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1301542282",
      "id" : 1301542282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585Nk_WK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1301542282/reactions"
      },
      "updated_at" : "2022-11-03T01:20:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1301542282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-03-15T23:53:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1470995443",
      "id" : 1470995443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585XrZvz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470995443/reactions"
      },
      "updated_at" : "2023-03-15T23:53:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470995443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "0577bd6d1bcbbc808fd20d7a368a562799ceccc3 to 974140f9e721740f857b45d10d7dbab62fdbbe53: rebased due to conflict with #25781",
      "created_at" : "2023-04-05T17:11:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1497845534",
      "id" : 1497845534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585ZR08e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497845534/reactions"
      },
      "updated_at" : "2023-04-05T17:11:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497845534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-11T10:33:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1543748392",
      "id" : 1543748392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585cA7so",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1543748392/reactions"
      },
      "updated_at" : "2023-05-11T10:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1543748392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r1191500724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191500724"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Another side effect of this PR is I don't think we use the `locator` at all anymore besides its tip hash ?!",
      "commit_id" : "974140f9e721740f857b45d10d7dbab62fdbbe53",
      "created_at" : "2023-05-11T17:37:16Z",
      "diff_hunk" : "@@ -94,14 +95,22 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.at(0))};\n+        if (!locator_index) {\n+            return InitError(strprintf(Untranslated(\"%s: best block of the index not found. Please rebuild the index.\"), GetName()));\n+        }\n+        SetBestBlockIndex(locator_index);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r1191500724",
      "id" : 1191500724,
      "line" : 104,
      "node_id" : "PRRC_kwDOABII585HBNu0",
      "original_commit_id" : "974140f9e721740f857b45d10d7dbab62fdbbe53",
      "original_line" : 104,
      "original_position" : 19,
      "original_start_line" : 98,
      "path" : "src/index/base.cpp",
      "position" : 19,
      "pull_request_review_id" : 1423124313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191500724/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 98,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-11T17:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191500724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> In first commit vector `front()` call is replaced by `at(0)` call to avoid undefined behavior in case null locator is loaded.\r\n\r\nThis happens again later too:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/974140f9e721740f857b45d10d7dbab62fdbbe53/src/index/base.cpp#L100",
      "created_at" : "2023-05-11T17:48:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1544432693",
      "id" : 1544432693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585cDiw1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544432693/reactions"
      },
      "updated_at" : "2023-05-11T17:48:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544432693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r1191521866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191521866"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That's correct! I didn't want to change the db format though to not break compatibility.",
      "commit_id" : "974140f9e721740f857b45d10d7dbab62fdbbe53",
      "created_at" : "2023-05-11T17:59:25Z",
      "diff_hunk" : "@@ -94,14 +95,22 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.at(0))};\n+        if (!locator_index) {\n+            return InitError(strprintf(Untranslated(\"%s: best block of the index not found. Please rebuild the index.\"), GetName()));\n+        }\n+        SetBestBlockIndex(locator_index);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r1191521866",
      "id" : 1191521866,
      "in_reply_to_id" : 1191500724,
      "line" : 104,
      "node_id" : "PRRC_kwDOABII585HBS5K",
      "original_commit_id" : "974140f9e721740f857b45d10d7dbab62fdbbe53",
      "original_line" : 104,
      "original_position" : 19,
      "original_start_line" : 98,
      "path" : "src/index/base.cpp",
      "position" : 19,
      "pull_request_review_id" : 1423157143,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191521866/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 98,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-11T17:59:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191521866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! I'll rebase and address furszy's comments next week!",
      "created_at" : "2023-05-11T18:00:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1544447815",
      "id" : 1544447815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585cDmdH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544447815/reactions"
      },
      "updated_at" : "2023-05-11T18:00:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544447815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
