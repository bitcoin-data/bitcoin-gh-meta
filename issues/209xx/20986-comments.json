[
   {
      "author_association" : "MEMBER",
      "body" : "Marking as draft for now. I expect people will have **opinions**.",
      "created_at" : "2021-01-22T10:04:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765292529",
      "id" : 765292529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTI5MjUyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T10:04:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765292529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. And forbid refactoring pulls just to make lines shorter.",
      "created_at" : "2021-01-22T10:48:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765318270",
      "id" : 765318270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTMxODI3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T10:48:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765318270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The primary issue I experience as a reviewer is reformatting of lines, especially function signatures or function calls, to make lines shorter. It adds churn, obfuscates the diff and makes review more fatiguing, difficult and error-prone than it otherwise needed to be.\r\n\r\n(The example in the PR description is more readable to me in one line than split into several.)\r\n",
      "created_at" : "2021-01-22T11:27:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765336808",
      "id" : 765336808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTMzNjgwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T11:27:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765336808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The primary issue I experience as a reviewer is reformatting of lines, especially function signatures or function calls, to make lines shorter.\r\n\r\n@jonatack My take on this is that if I need to add an argument to a 230 char wide function declaration, then I'd much prefer to split that line then turn it into a 260 char wide function declaration. The alternative results in lines that just grow without bound.\r\n\r\n> ... obfuscates the diff and makes review more fatiguing, difficult and error-prone than it otherwise needed to be.\r\n\r\nIn my experience, it's pretty easy to see which changes are whitespace only, eg in meld:\r\n\r\n![image](https://user-images.githubusercontent.com/1063656/105488522-ab69d400-5ca9-11eb-940f-2b7d8a6a6245.png)\r\n\r\ncompared to this for adding a new argument to a very long line:\r\n\r\n![image](https://user-images.githubusercontent.com/1063656/105488605-ca686600-5ca9-11eb-917a-b997398726ed.png)\r\n\r\n> The example in the PR description is more readable to me in one line than split into several\r\n\r\nCan you share a screenshot? In my editor, with a column width of 126 chars, it looks like:\r\n\r\n![image](https://user-images.githubusercontent.com/1063656/105489004-71e59880-5caa-11eb-9017-c9d719c6b42d.png)\r\n\r\nwhich I find very difficult to read.",
      "created_at" : "2021-01-22T12:10:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765355346",
      "id" : 765355346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTM1NTM0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T21:50:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765355346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\nThe long lines have been bothering me for quite some time and I think in the long-term following this guideline will increase code quality. Agree with hebasto though that refactor PRs with the sole goal of line-shortening should be discouraged. (On the other hand, I think many reasonable refactorings _will_ as a side-effect lead to shorter lines.)\r\n\r\nFrom a practical point of view, I personally (and know many people who do) enjoy being able to view two source code files side-by-side without line breaks on a single modern screen, and while 80 is likely too low, decades after 80x25 terminals were widespread (there has been an interesting discussion on the Linux Kernel Mailing List about this subject: https://lkml.org/lkml/2020/5/29/1038), a soft-limit of 100 seems to be a good compromise here. If 100 is still too low for some, the absolute maximum should be a number that is still visible on a single screen without line breaks. Lines longer than 180-200 chars are absolutely inacceptable, IMHO. And unfortunately, we have many instances of those, especially in `src/validation.cpp`.\r\n\r\n> The primary issue I experience as a reviewer is reformatting of lines, especially function signatures or function calls, to make lines shorter. It adds churn, obfuscates the diff and makes review more fatiguing, difficult and error-prone than it otherwise needed to be.\r\n\r\nTend to agree with jnewbery here, that this can be solved by right usage of the diff-tool. In an ideal world the creator of commit would always put review options suggestions in a commit message where the regular diff is hard to read. This is happening already, e.g. \"best reviewed with -w --color-moved=...\" etc. The drawback is that this doesn't work with the rendered diff online on github, but this shouldn't be encouraged anyways.\r\n\r\nIn the long term, after this rule will roughly be followed for quite some time, if there is still many instances where changes introduce line-breaks, there is more likely something wrong with the code. I don't think that having lots of functions/methods with 5+ parameters is desirable. Hence I would hope that in the long-term, with this rule applied the functions/methods are designed in a way that most calls would still likely fit in a single line.",
      "created_at" : "2021-01-22T13:51:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765411143",
      "id" : 765411143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTQxMTE0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T14:02:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765411143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I review in buffers or screens of varying widths. For the diff I usually start with gitk (which I believe is widely used), or git in the terminal with -w / colorMoved = dimmed-zebra / colorMovedWs = allow-indentation-change. I'm open to suggestions on diff tooling or how I can use them better.\r\n\r\nAdding a param to a long function without otherwise reformatting it is a trivial diff to review in gitk, but adding reformatting churn makes it more difficult, fatiguing and error-prone as the entire signature has to be reviewed, param by param. This reached the point where I stopped reviewing a couple of pulls lately (one of yours, John, and #20788) because there were several long function signatures being reformatted in a way that needlessly increased the review burden with no benefit. More work for the author, more work for the reviewers. In both cases I gave feedback on that, to no avail...and told myself that to say nothing more and add a caveat to my review that I did not verify (or do not have confidence in my verification of) all the parameters in the reformatted function signatures. I don't see justification or benefit in adding churn that entails the need for that, but this is open source--it's ad hoc and everyone has their point of view.\r\n\r\nAt the end of the day, I suppose it's the author's prerogative to propose churn and the reviewer's prerogative to review or not or give feedback or just shrug and move on. Some authors can get away with it, but I have enough difficulty attracting review (and the situation has not improved over the past two years from my point of view) that I try to make my proposals easy to review (I often don't succeed, but I try).\r\n",
      "created_at" : "2021-01-22T14:33:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765442344",
      "id" : 765442344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTQ0MjM0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T14:33:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765442344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can you share a screenshot? In my editor, with a column width of 126 chars, it looks like:\r\n> \r\n> ![image](https://user-images.githubusercontent.com/1063656/105489004-71e59880-5caa-11eb-9017-c9d719c6b42d.png)\r\n\r\nYes, the code looks like that in the editor for me, too. I did mind in the beginning (after decades of 80 or 100 character limits this codebase was a...change) but I suppose I adapted to it and in this codebase with its sometimes long function signatures, I grok why it was done and like it. Perhaps line wrapping is more predictable and easier for me to follow on different screen sizes than arbitrary line breaks. Anyway, that's only an opinion :tm:.",
      "created_at" : "2021-01-22T14:56:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765460312",
      "id" : 765460312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTQ2MDMxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T14:56:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765460312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jonatack: Hm, I see your point of view. Though it's very reviewers-centric and not taking into account potential new contributors which could also be turned off just by seeing those long lines. (And overly huge function/method bodies, but that's another topic...)\r\n\r\nI think in cases like #20788 where really lots of those line-breaks occur, the root of the problem is that stylistic changes and logical changes are mixed in one. It would make sense to first have an isolated commits that solely refactors the line-breaks, which could in theory be verified automatically (not sure if such a tool already exists, but I think it could be possible to \"normalize\" all white-space in two source files and then compare if they are still identical) and then based on this do the actual function signature changes. Reviewing the logical change would then be a piece of cake.\r\n\r\nFor example, instead of having a single commit that suffers from your described problem:\r\n```diff\r\n-static bool Socks5(const std::string& strDest, int port, const ProxyCredentials *auth, const SOCKET& hSocket)\r\n+static bool Socks5(const std::string& strDest,\r\n+                   int port,\r\n+                   const ProxyCredentials* auth,\r\n+                   const Sock& sock)\r\n```\r\nyou would have a pure-line-break-refactor (potentially machine-verified) commit (1/2)\r\n```diff\r\n-static bool Socks5(const std::string& strDest, int port, const ProxyCredentials *auth, const SOCKET& hSocket)\r\n+static bool Socks5(const std::string& strDest,\r\n+                   int port,\r\n+                   const ProxyCredentials *auth,\r\n+                   const SOCKET& hSocket)\r\n```\r\n\r\nand then a logical human-verified commit (2/2) that focusses on the actual signature changes\r\n```diff\r\n static bool Socks5(const std::string& strDest,\r\n                    int port,\r\n-                   const ProxyCredentials *auth,\r\n-                   const SOCKET& hSocket)\r\n+                   const ProxyCredentials* auth,\r\n+                   const Sock& sock)\r\n```\r\n\r\nThat's just an idea, don't know if it's worth chasing it further. My point is that it's not an absolute unavoidable consequence of proposed line-length limits that there _has_ to be churn. Like already described in a previous comment, I'd assume that the changes get less and less painful for reviewers once the first line-shortening is done. For newly written code, exceeding the line limit too much will serve as kind of a warning sign that the code structure is likely flawed and should be reconsidered.",
      "created_at" : "2021-01-22T15:22:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765480088",
      "id" : 765480088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTQ4MDA4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T15:22:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765480088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See commit a4fb8abe06f9 for an example of what I'm referring to. There are several changes like this in that one commit, where every argument has to be re-verified in the name of shorter lines (and there is code change inside of the churn):\r\n\r\n```diff\r\n+++ b/src/netbase.h\r\n@@ -68,7 +68,12 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\r\n extern std::function<std::unique_ptr<Sock>(const CService&)> CreateSock;\r\n \r\n bool ConnectSocketDirectly(const CService &addrConnect, const SOCKET& hSocketRet, int nTimeout, bool manual_connection);\r\n-bool ConnectThroughProxy(const proxyType &proxy, const std::string& strDest, int port, const SOCKET& hSocketRet, int nTimeout, bool& outProxyConnectionFailed);\r\n+bool ConnectThroughProxy(const proxyType& proxy,\r\n+                         const std::string& strDest,\r\n+                         int port,\r\n+                         const Sock& sock,\r\n+                         int nTimeout,\r\n+                         bool& outProxyConnectionFailed);\r\n```\r\n(I pick on this author because they know I support their work a lot ;)",
      "created_at" : "2021-01-22T15:23:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-765481368",
      "id" : 765481368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTQ4MTM2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T15:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765481368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "You can enforce line lengths while still allowing exceptions to the rule via the following:\r\n\r\n``` c\r\n// clang-format off\r\nthis is a block where ...\r\n... very long lines ...\r\n... and other formatting exceptions ....\r\n... are allowed ....\r\n... but there always need to be ...\r\n... a very good reason for that\r\n// clang-format on\r\n```\r\n\r\nWe use this for Trezor and it's working perfectly. Code that deserves special handling is explicitly marked and the rule is followed everywhere else.\r\n\r\nWe also decided to follow Google practices (`BasedOnStyle: Google` which defines line length = 80 and tab width = 2 among other things) for the following reasons:\r\n- while most of the editors can show 100+ characters on modern displays without any problems; they can't show 160+ characters required for the side-by-side diffs - not having to scroll makes code review much less painful\r\n- using tab width of 4 or more is very limiting when using only 80 chars per line; tab width of 2 saves a lot of precious line space and still provides good readability \r\n\r\nTo wrap it up - I think it makes sense to have either line length of 100 + tab width of 4 or line length of 80 + tab width of 2, while the latter makes side-by-side reviews much more pleasant experience. \r\n\r\nI just shared this to explain what we went through; I am not trying to expose our/Google formatting rules on the bitcoin codebase and I'll be happy with any outcome of this discussion.",
      "created_at" : "2021-01-23T13:37:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-766064387",
      "id" : 766064387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjA2NDM4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-23T13:41:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766064387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. It is cleaner and easier to compare in diffs.",
      "created_at" : "2021-01-25T16:03:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-766921307",
      "id" : 766921307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjkyMTMwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T16:03:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766921307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127973?v=4",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "node_id" : "MDQ6VXNlcjEyNzk3Mw==",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-01-25T17:30:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-766981703",
      "id" : 766981703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2Njk4MTcwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T17:30:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766981703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK, code is much easier to read when I can see it :) \r\n\r\nI'd personally prefer 120 characters, esp with some of our long function names, but its nbd and would rather aim for 100 than off-the-page long. ",
      "created_at" : "2021-01-25T21:05:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-767112053",
      "id" : 767112053,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NzExMjA1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T21:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767112053",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK: when it comes to degrees of freedom in code formatting less is more :)\r\n\r\nPersonally I'm a big fan of `black`, `clang-format`, `gofmt`, etc: computers have a comparative advantage when it comes to non-creative tasks :)",
      "created_at" : "2021-01-26T10:58:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-767466913",
      "id" : 767466913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NzQ2NjkxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-26T10:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767466913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I think this notes what we currently try to do.\r\n\r\n> Concept ACK. And forbid refactoring pulls just to make lines shorter.\r\n\r\n@hebasto that's already noted:\r\n\r\n> Do not submit patches solely to modify the style of existing code.\r\n\r\n",
      "created_at" : "2021-01-27T12:03:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-768240116",
      "id" : 768240116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODI0MDExNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T12:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768240116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm fine with this, as long as it's meant as a review guideline for new code and not too zealously enforced. I wouldn't like to see e.g. PRs that just change line length all over the codebase.",
      "created_at" : "2021-01-27T16:43:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-768415049",
      "id" : 768415049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODQxNTA0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T16:43:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768415049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, I believe documenting general preferences (which we already have) would reduce the amount of time spent on style when coding and reviewing. I think it'd be most effective to just point to a tool or script that we can use to do it automatically.",
      "created_at" : "2021-01-29T15:12:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-769863216",
      "id" : 769863216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2OTg2MzIxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-29T15:12:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/769863216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK aa929abf8dc022e900755234c857541faeea8239 - this is basically just something to point too when a PR has unreasonably long lines for no particularly reason.\r\n\r\n> I'm fine with this, as long as it's meant as a review guideline for new code and not too zealously enforced. I wouldn't like to see e.g. PRs that just change line length all over the codebase.\r\n\r\nAgree. PRs opened just to shuffle code around and reduce line length will be closed.\r\n\r\nOtherwise. I'm not sure what's left to do here? \r\n\r\n",
      "created_at" : "2021-02-13T03:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-778556069",
      "id" : 778556069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODU1NjA2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-13T03:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778556069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK aa929abf8dc022e900755234c857541faeea8239",
      "created_at" : "2021-02-13T07:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-778574502",
      "id" : 778574502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODU3NDUwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-13T07:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778574502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This seems to have broad support, so I'm moving it out of draft.\r\n\r\nSeveral reviewers have highlighted that there shouldn't be PRs just to 'fix up' long lines. That's already covered further up in the developer notes:\r\n\r\n```\r\nDo not submit patches solely to modify the style of existing code.\r\n```",
      "created_at" : "2021-02-13T17:47:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-778652137",
      "id" : 778652137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODY1MjEzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-13T17:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778652137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK aa929abf8dc022e900755234c857541faeea8239",
      "created_at" : "2021-02-14T02:30:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20986#issuecomment-778711098",
      "id" : 778711098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODcxMTA5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-14T02:30:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778711098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   }
]
