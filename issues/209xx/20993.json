{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "It seems more natural to treat the \"subversion\" field (=user agent string, see [BIP 14](https://github.com/bitcoin/bips/blob/master/bip-0014.mediawiki#Proposal)) of a node as pure string rather than a bytestring within the test framework. This is also suggested with the naming prefix in `msg_version.strSubVer`: one probably wouldn't expect a field starting with \"str\" to be a bytestring that needs further decoding to be useful. This PR moves the encoding/decoding parts to the serialization/deserialization routines so that the user doesn't have to bother with that anymore.\r\n\r\nNote that currently, in the master branch the `msg_version.strSubVer` is never read (only in `msg_version.__repr__`); However, one issue that is solved by this PR came up while testing #19509 (not merged yet): A decoding script for binary message capture files takes use of the functional test framework convert it into JSON format. Bytestrings will be convered to hexstrings, while pure strings will (surprise surprise) end up without modification in the file.\r\n\r\nSo without this patch, we get:\r\n\r\n```\r\n$ jq . out.json | grep -m5 strSubVer\r\n      \"strSubVer\": \"2f5361746f7368693a32312e39392e302f\"\r\n      \"strSubVer\": \"2f5361746f7368693a302e32302e312f\"\r\n      \"strSubVer\": \"2f5361746f7368693a32312e39392e302f\"\r\n      \"strSubVer\": \"2f5361746f7368693a302e32302e312f\"\r\n      \"strSubVer\": \"2f5361746f7368693a32312e39392e302f\"\r\n```\r\n\r\nAfter this patch:\r\n\r\n```\r\n$ jq . out2.json | grep -m5 strSubVer\r\n      \"strSubVer\": \"/Satoshi:21.99.0/\"\r\n      \"strSubVer\": \"/Satoshi:0.20.1/\"\r\n      \"strSubVer\": \"/Satoshi:21.99.0/\"\r\n      \"strSubVer\": \"/Satoshi:0.20.1/\"\r\n      \"strSubVer\": \"/Satoshi:21.99.0/\"\r\n```\r\n",
   "closed_at" : "2021-02-17T08:38:16Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20993/comments",
   "created_at" : "2021-01-23T16:03:22Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20993/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/20993",
   "id" : 792591186,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "description" : null,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20993/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NTYwNDQ2MzY0",
   "number" : 20993,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/20993.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20993",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/20993.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20993"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "test: store subversion (user agent) as string in msg_version",
   "updated_at" : "2021-02-17T08:38:16Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20993",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
      "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
      "followers_url" : "https://api.github.com/users/theStack/followers",
      "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/theStack",
      "id" : 91535,
      "login" : "theStack",
      "node_id" : "MDQ6VXNlcjkxNTM1",
      "organizations_url" : "https://api.github.com/users/theStack/orgs",
      "received_events_url" : "https://api.github.com/users/theStack/received_events",
      "repos_url" : "https://api.github.com/users/theStack/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/theStack"
   }
}
