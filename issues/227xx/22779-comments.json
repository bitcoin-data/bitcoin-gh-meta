[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694020889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694020889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The outcome is the same, but I think the witness size is 66 (1 byte 0x01 to indicate the stack size, 1 byte 0x40 to indicate the size of the first element, 64 byte sig).",
      "commit_id" : "a7efad7cb4e41d7520975daa7b6957f0b9cacf13",
      "created_at" : "2021-08-23T14:25:06Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {\n+            // P2WPKH spend, a compressed public key + a DER-encoded ECDSA signature\n+            nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        } else {\n+            // Taproot key spend, a single BIP341 signature\n+            nSize += (32 + 4 + 1 + (65 / WITNESS_SCALE_FACTOR) + 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694020889",
      "id" : 694020889,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDAyMDg4OQ==",
      "original_commit_id" : "e49c9e12f95bd5f1a15ec04fb47a667e21b5ed2c",
      "original_line" : 45,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : null,
      "pull_request_review_id" : 736189083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-23T14:25:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694020889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694023011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694023011"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, forgot the stack size byte",
      "commit_id" : "a7efad7cb4e41d7520975daa7b6957f0b9cacf13",
      "created_at" : "2021-08-23T14:27:20Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {\n+            // P2WPKH spend, a compressed public key + a DER-encoded ECDSA signature\n+            nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        } else {\n+            // Taproot key spend, a single BIP341 signature\n+            nSize += (32 + 4 + 1 + (65 / WITNESS_SCALE_FACTOR) + 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694023011",
      "id" : 694023011,
      "in_reply_to_id" : 694020889,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDAyMzAxMQ==",
      "original_commit_id" : "e49c9e12f95bd5f1a15ec04fb47a667e21b5ed2c",
      "original_line" : 45,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : null,
      "pull_request_review_id" : 736191916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-23T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694023011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-08-23T16:41:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-903936605",
      "id" : 903936605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58414Ppd",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T16:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903936605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-08-23T16:42:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-903937361",
      "id" : 903937361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58414P1R",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T16:42:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903937361",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694182178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694182178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You can just use a repeating hex character to allow for better compression. \r\n\r\n```suggestion\r\n    t.vout[0].scriptPubKey = CScript() << OP_1 << ParseHex(\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\r\n```\r\n\r\nAlso, would be nice to add a test for OP_16 (as you change this too in this pull) and OP_0, because it is missing.",
      "commit_id" : "a7efad7cb4e41d7520975daa7b6957f0b9cacf13",
      "created_at" : "2021-08-23T17:46:13Z",
      "diff_hunk" : "@@ -955,6 +955,15 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     BOOST_CHECK(!IsStandardTx(CTransaction(t), reason));\n     BOOST_CHECK_EQUAL(reason, \"bare-multisig\");\n     fIsBareMultisigStd = DEFAULT_PERMIT_BAREMULTISIG;\n+\n+    // Check Taproot outputs dust threshold\n+    t.vout[0].scriptPubKey = CScript() << OP_1 << ParseHex(\"72ad3fb702bf1a2111b09c2bf1e72f4f52d4ceb2acdcfcd0c63abf70a59c36d6\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694182178",
      "id" : 694182178,
      "line" : 960,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDE4MjE3OA==",
      "original_commit_id" : "a7efad7cb4e41d7520975daa7b6957f0b9cacf13",
      "original_line" : 960,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 6,
      "pull_request_review_id" : 736400422,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-23T17:46:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694182178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694587557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694587557"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Used repeating characters, tested for Segwit v0, and added test for future witness versions.\r\n\r\nAwkward to test something that is almost certainly wrong, comforts me in the idea that we should refactor `GetDustThreshold` to loudly fail rather than returning an invalid value.",
      "commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "created_at" : "2021-08-24T07:45:20Z",
      "diff_hunk" : "@@ -955,6 +955,15 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     BOOST_CHECK(!IsStandardTx(CTransaction(t), reason));\n     BOOST_CHECK_EQUAL(reason, \"bare-multisig\");\n     fIsBareMultisigStd = DEFAULT_PERMIT_BAREMULTISIG;\n+\n+    // Check Taproot outputs dust threshold\n+    t.vout[0].scriptPubKey = CScript() << OP_1 << ParseHex(\"72ad3fb702bf1a2111b09c2bf1e72f4f52d4ceb2acdcfcd0c63abf70a59c36d6\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694587557",
      "id" : 694587557,
      "in_reply_to_id" : 694182178,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDU4NzU1Nw==",
      "original_commit_id" : "a7efad7cb4e41d7520975daa7b6957f0b9cacf13",
      "original_line" : 960,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 736901042,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-24T07:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694587557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694968467"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694968467"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "More of a meta-comment:\r\n\r\nIf `GetDustThreshold` attempts to calculate the cost at which it's economical to spend an output, why is `nSize` initialized to `GetSerializedSize(txout)`? When spending the dust output, the size of the txout isn't in the spending tx unless the spending tx also spends to the same output type. This heuristic/initialization doesn't make sense to me because if we take P2WSH as an example (w/ dust limit of 330), `330 - fees < 330` it is impossible to spend to the same output type unless other inputs are added. It seems to me that if witness version non-zero is being changed, this could be a place to fix or clarify this calculation for witness version non-zero.",
      "commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "created_at" : "2021-08-24T15:34:30Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {\n+            // P2WPKH spend, a compressed public key + a DER-encoded ECDSA signature\n+            nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        } else {\n+            // Taproot key spend, a single BIP341 signature\n+            nSize += (32 + 4 + 1 + (66 / WITNESS_SCALE_FACTOR) + 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r694968467",
      "id" : 694968467,
      "line" : 45,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDk2ODQ2Nw==",
      "original_commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "original_line" : 45,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : 10,
      "pull_request_review_id" : 737384786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-24T15:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694968467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n> Eventually i believe it would be good to prevent future overlooks by not applying the dust check to unknown witness versions and aborting if witness_version > current_version.\r\n\r\nIIUC, you're aiming to return `IsDust()` == true for any transaction with witness outputs superior to current version, wouldn't this be a revert of https://github.com/bitcoin/bitcoin/pull/15846 ? As we don't know what would be the minimal spent or we can pick-up an arbitrary amount e.g 1000 sats, and consider the effective dust threshold for future type will be lower. And as such minimize risks of policy _tightening_ changes.",
      "created_at" : "2021-08-24T21:20:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-904985220",
      "id" : 904985220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58418PqE",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T21:20:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904985220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, i'm aiming to do the opposite: not call IsDust for witness versions >1, effectively having IsDust == false for any witness version from the future. Since, as you mention it, we can't know the size in advance.\nâââââââ Original Message âââââââ\nLe mardi 24 aoÃ»t 2021 Ã  11:21 PM, Antoine Riard ***@***.***> a Ã©crit :\n\n> Concept ACK\n>\n>> Eventually i believe it would be good to prevent future overlooks by not applying the dust check to unknown witness versions and aborting if witness_version > current_version.\n>\n> IIUC, you're aiming to return IsDust() == true for any transaction with witness outputs superior to current version, wouldn't this be a revert of [#15846](https://github.com/bitcoin/bitcoin/pull/15846) ? As we don't know what would be the minimal spent or we can pick-up an arbitrary amount e.g 1000 sats, and consider the effective dust threshold for future type will be lower. And as such minimize risks of policy tightening changes.\n>\n> â\n> You are receiving this because you authored the thread.\n> Reply to this email directly, [view it on GitHub](https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-904985220), or [unsubscribe](https://github.com/notifications/unsubscribe-auth/AFLK3F233XM5Z52Y2EHXUU3T6QEL7ANCNFSM5CUWHKOQ).\n> Triage notifications on the go with GitHub Mobile for [iOS](https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675) or [Android](https://play.google.com/store/apps/details?id=com.github.android&utm_campaign=notification-email).",
      "created_at" : "2021-08-24T21:24:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-904987167",
      "id" : 904987167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58418QIf",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T21:24:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904987167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r695227758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695227758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: If you intent to refer to the signature standard, should say BIP340 no? BIP341 describe the consensus rules applying the schnorr signature scheme.",
      "commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "created_at" : "2021-08-24T21:24:25Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {\n+            // P2WPKH spend, a compressed public key + a DER-encoded ECDSA signature\n+            nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        } else {\n+            // Taproot key spend, a single BIP341 signature",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r695227758",
      "id" : 695227758,
      "line" : 44,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NTIyNzc1OA==",
      "original_commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "original_line" : 44,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : 9,
      "pull_request_review_id" : 737706776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-24T21:24:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695227758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> No, i'm aiming to do the opposite: not call IsDust for witness versions >1, effectively having IsDust == false for any witness version from the future.\r\n\r\nHmmmm so you could propagate transactions SegWit v2+ with `nValue` == 0 and as such freely write on the UTXO set? Unknown witness outputs are standard iirc.",
      "created_at" : "2021-08-24T21:26:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-904988338",
      "id" : 904988338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58418Qay",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T21:26:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904988338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r695471529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695471529"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right, thanks. Doc-off-by-one!",
      "commit_id" : "9155f6cf738c790c389e105ce48d895634dd084f",
      "created_at" : "2021-08-25T07:24:01Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {\n+            // P2WPKH spend, a compressed public key + a DER-encoded ECDSA signature\n+            nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        } else {\n+            // Taproot key spend, a single BIP341 signature",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r695471529",
      "id" : 695471529,
      "in_reply_to_id" : 695227758,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NTQ3MTUyOQ==",
      "original_commit_id" : "b1a8a410513ecf1f73daf7468c5934970e352fa6",
      "original_line" : 44,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : null,
      "pull_request_review_id" : 737988034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-25T07:24:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695471529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Hmmmm so you could propagate transactions SegWit v2+ with nValue == 0 and as such freely write on the UTXO set? Unknown witness outputs are standard iirc.\r\n\r\nYou are right, i shouldn't reply to Github comments at 11:21PM :p\r\nMaybe it could be made of a fixed value (this one, or another large one so we don't tighten it when introducing a new version). Anyways i don't intend to (address it in this PR and) modify the existing behaviour, just to refactor the code to prevent a future overlook.",
      "created_at" : "2021-08-25T07:30:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-905254905",
      "id" : 905254905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII58419Rf5",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T07:30:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905254905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code Review ACK 9155f6c\r\n\r\n>  Maybe it could be made of a fixed value (this one, or another large one so we don't tighten it when introducing a new version). Anyways i don't intend to (address it in this PR and) modify the existing behaviour, just to refactor the code to prevent a future overlook.\r\n\r\nYes honestly I think we should revamp our approach w.r.t to dust outputs, from a hard non-propagating threshold to a feerate penalty approach, that way adjustable by L2 nodes at broadcast time in function of mempool congestion. Though need to work-out a design first and discussion better left to the ML :)",
      "created_at" : "2021-08-26T00:33:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-905967703",
      "id" : 905967703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5841__hX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-26T00:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905967703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK. I don't think it makes sense to be lowering the dust levels in bitcoin generally. The context for the dust levels was calculated many years ago, I don't think it applies anymore.",
      "created_at" : "2021-08-30T21:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-908712317",
      "id" : 908712317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842Kdl9",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-30T21:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908712317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r698883696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698883696"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:prefer a switch statement here",
      "commit_id" : "9155f6cf738c790c389e105ce48d895634dd084f",
      "created_at" : "2021-08-30T23:52:27Z",
      "diff_hunk" : "@@ -37,7 +37,13 @@ CAmount GetDustThreshold(const CTxOut& txout, const CFeeRate& dustRelayFeeIn)\n     if (txout.scriptPubKey.IsWitnessProgram(witnessversion, witnessprogram)) {\n         // sum the sizes of the parts of a transaction input\n         // with 75% segwit discount applied to the script size.\n-        nSize += (32 + 4 + 1 + (107 / WITNESS_SCALE_FACTOR) + 4);\n+        if (witnessversion == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#discussion_r698883696",
      "id" : 698883696,
      "line" : 40,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5ODg4MzY5Ng==",
      "original_commit_id" : "9155f6cf738c790c389e105ce48d895634dd084f",
      "original_line" : 40,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : 5,
      "pull_request_review_id" : 742161539,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22779",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-30T23:52:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698883696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK --\r\n\r\nI think we should either remove the dust limit entirely or not muck around with it.\r\n\r\nDust limits are not incentive compatible with miner preferences and if they are they can be configured by users individually.\r\n\r\nThat said, it's CR-Ack for me for this code, which seems to be improving the dust nSize calculation (which should be independent of any actual fee policy, the code could be cleaned up to make it have a min somewhere later but we shouldn't confuse byte counting with thresholds).",
      "created_at" : "2021-08-30T23:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-908786170",
      "id" : 908786170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842Kvn6",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-30T23:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908786170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe split off the added tests from the behaviour change, because they seem useful on their own?",
      "created_at" : "2021-08-31T08:12:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-909003849",
      "id" : 909003849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842LkxJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-31T08:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909003849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke done in #22846\r\n\r\n@TheBlueMatt i too am of the opinion that we should not decrease the dust thresholds, but i think that if we want to keep the same dust thresholds for Taproot outputs we should instead raise `DUST_RELAY_TX_FEE` instead of keeping the wrong computation. But this would unfortunately be a security issue for (some) L2s relying on it..\r\n\r\nI don't think the rationale of \"dust threshold was calculated many years ago, let's not fix it for a new output type unused on the network yet\" holds. It was adapted for Segwit v0 and now Segwit v1 should be \"penalized\"?\r\nIn any case, i think that even if we want to keep it larger for Taproot outputs than for Segwit v0 outputs we should  document it instead of having the current \"at least a 33-bytes pubkey and an ECDSA signature are required to spend\" rationale for any Segwit output.",
      "created_at" : "2021-08-31T15:06:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-909323858",
      "id" : 909323858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842My5S",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-31T15:06:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909323858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @TheBlueMatt i too am of the opinion that we should not decrease the dust thresholds, but i think that if we want to keep the same dust thresholds for Taproot outputs we should instead raise DUST_RELAY_TX_FEE instead of keeping the wrong computation. But this would unfortunately be a security issue for (some) L2s relying on it..\r\n\r\nIndeed, I don't think we can in any practical sense increase the dust threshold for deployed things, for exactly the reason you specify. I also agree with you that, ideally, we'd increase `DUST_RELAY_TX_FEE`, but given that we agree that we cannot, the only thing we can do is not make the problem worse for, which I'd argue this does.\r\n\r\nI'm not really sure why \"consistency\" here matters, the numbers are too low, reducing them is not great, so lets not do that :).",
      "created_at" : "2021-08-31T23:14:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-909718819",
      "id" : 909718819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842OTUj",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-31T23:14:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909718819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22846](https://github.com/bitcoin/bitcoin/pull/22846) (policy: unit test Segwit dust thresholds by darosior)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-01T09:40:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-910115245",
      "id" : 910115245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842P0Gt",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T09:40:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910115245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-02T08:27:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-911379647",
      "id" : 911379647,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842Uoy_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T08:27:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911379647",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think Matt is right. Closing this one in favour of documenting the behaviour in https://github.com/bitcoin/bitcoin/pull/22863 .",
      "created_at" : "2021-09-02T11:45:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-911579388",
      "id" : 911579388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842VZj8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T11:45:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911579388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> But this would unfortunately be a security issue for (some) L2s relying on it..\r\n\r\nThen those L2s are broken. Policy is never a guarantee and should not be treated like one.\r\n\r\nIMO you should reopen this.",
      "created_at" : "2021-09-20T01:53:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22779#issuecomment-922592049",
      "id" : 922592049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22779",
      "node_id" : "IC_kwDOABII5842_aMx",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-20T01:53:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/922592049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
