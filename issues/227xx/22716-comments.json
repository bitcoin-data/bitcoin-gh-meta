[
   {
      "author_association" : "MEMBER",
      "body" : "Are the manual addresses up?  Just ran `rpc addnode onetry` for the 3 torv3 addresses you mentioned and only one of them  `rp7k2g...` seems to be online.\r\n\r\n```\r\n2021-08-16T10:47:23Z Socks5() connect to sxjbh....onion:8333 failed: host unreachable\r\n2021-08-16T10:51:15Z Socks5() connect to d6jwdc...onion:8333 failed: host unreachable\r\n```\r\n\r\nManual connections have a separate connection limit (8) from the other peer connections (8 full-relay connections, 2 block-relay-only ones, and occasionally 1 short-lived feeler or extra outbound block-relay-only connection). Manual connections aren't affected by `-maxconnection` settings.",
      "created_at" : "2021-08-16T10:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899415956",
      "id" : 899415956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841m_-U",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:04:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899415956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "With respect to manual (addnode) peers:\r\n\r\n- in `net_processing.cpp::PeerManagerImpl::ConsiderEviction()`, only outbound full and block relay peers, but not manual ones, are considered for eviction\r\n\r\n- we also never disconnect or discourage manual peers for bad behavior (`net_processing.cpp::PeerManagerImpl::MaybeDiscourageAndDisconnect()`)",
      "created_at" : "2021-08-16T11:02:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899420442",
      "id" : 899420442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841nBEa",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:03:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899420442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ah, you are right, they don't seem to be up. So that's not part of the issue. However, more in general, I observe that when my node has just started it gets a few outbound tor connections that it always loses later on. Isn't it logical that when there is a special provision to protect inbound tor connections from eviction, the same kind of protection should be applied to outbound tor connections?",
      "created_at" : "2021-08-16T11:03:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899421217",
      "id" : 899421217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841nBQh",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899421217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74196711?v=4",
         "events_url" : "https://api.github.com/users/hMsats/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hMsats/followers",
         "following_url" : "https://api.github.com/users/hMsats/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hMsats/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hMsats",
         "id" : 74196711,
         "login" : "hMsats",
         "node_id" : "MDQ6VXNlcjc0MTk2NzEx",
         "organizations_url" : "https://api.github.com/users/hMsats/orgs",
         "received_events_url" : "https://api.github.com/users/hMsats/received_events",
         "repos_url" : "https://api.github.com/users/hMsats/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hMsats/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hMsats/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hMsats"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Outbound peers aren't penalized for worse latency (e.g. higher min ping time), and Tor peers shouldn't be unduly penalized under our outbound eviction criteria, which are more about if the peer isn't lagging, is synced to the current tip with as much work as ours, provided valid connecting headers, wasn't the last one to announce a new block. (Manual peers are spared these restrictions.) Maybe I'm forgetting something though.",
      "created_at" : "2021-08-16T11:14:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899428439",
      "id" : 899428439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841nDBX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:17:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899428439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks! I will try to connect other (long running) outbound tor v3 peers to my node and see what happens. If those remain that would be good enough for me to close the issue. I should have but it didn't occur to me to check if the tor nodes that were recommended to test Bitcoin Core 22.0 were actually up. Typical example of \"don't trust, verify\" :-)",
      "created_at" : "2021-08-16T11:32:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899438146",
      "id" : 899438146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841nFZC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:32:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899438146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74196711?v=4",
         "events_url" : "https://api.github.com/users/hMsats/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hMsats/followers",
         "following_url" : "https://api.github.com/users/hMsats/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hMsats/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hMsats",
         "id" : 74196711,
         "login" : "hMsats",
         "node_id" : "MDQ6VXNlcjc0MTk2NzEx",
         "organizations_url" : "https://api.github.com/users/hMsats/orgs",
         "received_events_url" : "https://api.github.com/users/hMsats/received_events",
         "repos_url" : "https://api.github.com/users/hMsats/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hMsats/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hMsats/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hMsats"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Have added other outbound tor nodes and things are looking good. Will close this issue for now and reopen if necessary. Thanks for all the help.",
      "created_at" : "2021-08-16T15:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22716#issuecomment-899595095",
      "id" : 899595095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22716",
      "node_id" : "IC_kwDOABII5841nrtX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T15:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899595095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74196711?v=4",
         "events_url" : "https://api.github.com/users/hMsats/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hMsats/followers",
         "following_url" : "https://api.github.com/users/hMsats/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hMsats/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hMsats",
         "id" : 74196711,
         "login" : "hMsats",
         "node_id" : "MDQ6VXNlcjc0MTk2NzEx",
         "organizations_url" : "https://api.github.com/users/hMsats/orgs",
         "received_events_url" : "https://api.github.com/users/hMsats/received_events",
         "repos_url" : "https://api.github.com/users/hMsats/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hMsats/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hMsats/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hMsats"
      }
   }
]
