[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/26594#pullrequestreview-1199716393), [furszy](https://github.com/bitcoin/bitcoin/pull/26594#pullrequestreview-1199726995), [S3RK](https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1332713912) |\n| Concept ACK | [shaavan](https://github.com/bitcoin/bitcoin/pull/26594#pullrequestreview-1198194287) |\n| Stale ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/26594#pullrequestreview-1198541191) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26596](https://github.com/bitcoin/bitcoin/pull/26596) (wallet: Migrate legacy wallets to descriptor wallets without requiring BDB by achow101)\n* [#26595](https://github.com/bitcoin/bitcoin/pull/26595) (wallet: be able to specify a wallet name and passphrase to migratewallet by achow101)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-11-28T23:37:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1329888000",
      "id" : 1329888000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26594",
      "node_id" : "IC_kwDOABII585PRHsA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329888000/reactions"
      },
      "updated_at" : "2022-11-30T20:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329888000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK 91c935a495f2bb25ad24173e73852e749db21b0e\r\n\r\nI think this should be backported to 24.x with a better error message saying that encrypted wallets will be supported in the future. ",
      "created_at" : "2022-11-29T08:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1330232016",
      "id" : 1330232016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26594",
      "node_id" : "IC_kwDOABII585PSbrQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330232016/reactions"
      },
      "updated_at" : "2022-11-29T08:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330232016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035045439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035045439"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`res` is returned by the function, couldn't a move operation introduce UB here? \r\n```suggestion\r\n        if (res.watchonly_wallet) created_wallets.push_back(res.watchonly_wallet);\r\n        if (res.solvables_wallet) created_wallets.push_back(res.solvables_wallet);\r\n```",
      "commit_id" : "7d7d02fad5746a02298fea4e43f1d38881df01ef",
      "created_at" : "2022-11-29T17:19:54Z",
      "diff_hunk" : "@@ -4182,8 +4182,8 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n \n         // Make list of wallets to cleanup\n         std::vector<std::shared_ptr<CWallet>> created_wallets;\n-        created_wallets.push_back(std::move(res.watchonly_wallet));\n-        created_wallets.push_back(std::move(res.solvables_wallet));\n+        if (res.watchonly_wallet) created_wallets.push_back(std::move(res.watchonly_wallet));\n+        if (res.solvables_wallet) created_wallets.push_back(std::move(res.solvables_wallet));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035045439",
      "id" : 1035045439,
      "line" : 4186,
      "node_id" : "PRRC_kwDOABII5849sYo_",
      "original_commit_id" : "91c935a495f2bb25ad24173e73852e749db21b0e",
      "original_line" : 4186,
      "original_position" : 7,
      "original_start_line" : 4185,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 1198002349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035045439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4185,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-29T17:32:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035045439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035174420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035174420"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These lines seem to be unrelated to the behavior we are testing for, and the test compiles and runs perfectly for the branch and fails for the master (as expected). So, could these lines be removed?\r\n\r\n```suggestion\r\n```",
      "commit_id" : "7d7d02fad5746a02298fea4e43f1d38881df01ef",
      "created_at" : "2022-11-29T19:08:29Z",
      "diff_hunk" : "@@ -396,6 +396,20 @@ def test_pk_coinbases(self):\n \n         assert_equal(bals, wallet.getbalances())\n \n+    def test_encrypted(self):\n+        self.log.info(\"Test migration of an encrypted wallet\")\n+        wallet = self.create_legacy_wallet(\"encrypted\")\n+        default = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        wallet.encryptwallet(\"pass\")\n+        addr = wallet.getnewaddress()\n+        default.sendtoaddress(addr, 1)\n+        self.generate(self.nodes[0], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035174420",
      "id" : 1035174420,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849s4IU",
      "original_commit_id" : "91c935a495f2bb25ad24173e73852e749db21b0e",
      "original_line" : 407,
      "original_position" : 12,
      "original_start_line" : 405,
      "path" : "test/functional/wallet_migration.py",
      "position" : null,
      "pull_request_review_id" : 1198194287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035174420/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-29T19:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035174420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035180488"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035180488"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`res` isn't returned by the failure path. These also need to be moved in order to keep the refcount at 1 so that these wallets are properly removed and cleaned up in this failure path.",
      "commit_id" : "7d7d02fad5746a02298fea4e43f1d38881df01ef",
      "created_at" : "2022-11-29T19:14:42Z",
      "diff_hunk" : "@@ -4182,8 +4182,8 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n \n         // Make list of wallets to cleanup\n         std::vector<std::shared_ptr<CWallet>> created_wallets;\n-        created_wallets.push_back(std::move(res.watchonly_wallet));\n-        created_wallets.push_back(std::move(res.solvables_wallet));\n+        if (res.watchonly_wallet) created_wallets.push_back(std::move(res.watchonly_wallet));\n+        if (res.solvables_wallet) created_wallets.push_back(std::move(res.solvables_wallet));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035180488",
      "id" : 1035180488,
      "in_reply_to_id" : 1035045439,
      "line" : 4186,
      "node_id" : "PRRC_kwDOABII5849s5nI",
      "original_commit_id" : "91c935a495f2bb25ad24173e73852e749db21b0e",
      "original_line" : 4186,
      "original_position" : 7,
      "original_start_line" : 4185,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 1198204216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035180488/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4185,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-29T19:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035180488",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035195434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035195434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "7d7d02fad5746a02298fea4e43f1d38881df01ef",
      "created_at" : "2022-11-29T19:30:48Z",
      "diff_hunk" : "@@ -396,6 +396,20 @@ def test_pk_coinbases(self):\n \n         assert_equal(bals, wallet.getbalances())\n \n+    def test_encrypted(self):\n+        self.log.info(\"Test migration of an encrypted wallet\")\n+        wallet = self.create_legacy_wallet(\"encrypted\")\n+        default = self.nodes[0].get_wallet_rpc(self.default_wallet_name)\n+\n+        wallet.encryptwallet(\"pass\")\n+        addr = wallet.getnewaddress()\n+        default.sendtoaddress(addr, 1)\n+        self.generate(self.nodes[0], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035195434",
      "id" : 1035195434,
      "in_reply_to_id" : 1035174420,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849s9Qq",
      "original_commit_id" : "91c935a495f2bb25ad24173e73852e749db21b0e",
      "original_line" : 407,
      "original_position" : 12,
      "original_start_line" : 405,
      "path" : "test/functional/wallet_migration.py",
      "position" : null,
      "pull_request_review_id" : 1198224473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035195434/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-29T19:30:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035195434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035202913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035202913"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point, thanks. Resolved.",
      "commit_id" : "7d7d02fad5746a02298fea4e43f1d38881df01ef",
      "created_at" : "2022-11-29T19:38:31Z",
      "diff_hunk" : "@@ -4182,8 +4182,8 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n \n         // Make list of wallets to cleanup\n         std::vector<std::shared_ptr<CWallet>> created_wallets;\n-        created_wallets.push_back(std::move(res.watchonly_wallet));\n-        created_wallets.push_back(std::move(res.solvables_wallet));\n+        if (res.watchonly_wallet) created_wallets.push_back(std::move(res.watchonly_wallet));\n+        if (res.solvables_wallet) created_wallets.push_back(std::move(res.solvables_wallet));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035202913",
      "id" : 1035202913,
      "in_reply_to_id" : 1035045439,
      "line" : 4186,
      "node_id" : "PRRC_kwDOABII5849s_Fh",
      "original_commit_id" : "91c935a495f2bb25ad24173e73852e749db21b0e",
      "original_line" : 4186,
      "original_position" : 7,
      "original_start_line" : 4185,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 1198235244,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035202913/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4185,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-29T19:38:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035202913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think this should be backported to 24.x with a better error message saying that encrypted wallets will be supported in the future.\r\n\r\nI've added a commit for an explicit error message saying so.",
      "created_at" : "2022-11-29T21:17:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1331320982",
      "id" : 1331320982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26594",
      "node_id" : "IC_kwDOABII585PWliW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1331320982/reactions"
      },
      "updated_at" : "2022-11-29T21:17:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1331320982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035568572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035568572"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As stated earlier in this PR. The encrypted legacy wallet cannot be migrated even if it is unlocked.\r\nSo, in this case, I don't think **RPC_WALLET_UNLOCK_NEEDED** would be an appropriate error code to use.\r\n\r\nSuggestion:\r\n\r\nWe can add a new error code for this particular behavior in the `src/rpc/protocol.h`\r\n\r\n```\r\nRPC_WALLET_LEGACY_ENCRYPTED     = -37, //!< The legacy wallet is encrypted and is not yet supported for migration.",
      "commit_id" : "0c340e93e160d788fc70ba8d12c578ceeedf8008",
      "created_at" : "2022-11-30T06:20:51Z",
      "diff_hunk" : "@@ -730,7 +730,9 @@ static RPCHelpMan migratewallet()\n             std::shared_ptr<CWallet> wallet = GetWalletForJSONRPCRequest(request);\n             if (!wallet) return NullUniValue;\n \n-            EnsureWalletIsUnlocked(*wallet);\n+            if (wallet->IsCrypted()) {\n+                throw JSONRPCError(RPC_WALLET_UNLOCK_NEEDED, \"Error: migratewallet on encrypted wallets is currently unsupported.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#discussion_r1035568572",
      "id" : 1035568572,
      "line" : 734,
      "node_id" : "PRRC_kwDOABII5849uYW8",
      "original_commit_id" : "0c340e93e160d788fc70ba8d12c578ceeedf8008",
      "original_line" : 734,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1198739439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26594",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035568572/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-30T06:20:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1035568572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK 5e65a216d1fd00c447757736d4f2899d235e731a",
      "created_at" : "2022-11-30T20:42:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1332713912",
      "id" : 1332713912,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26594",
      "node_id" : "IC_kwDOABII585Pb5m4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332713912/reactions"
      },
      "updated_at" : "2022-11-30T20:42:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332713912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Backported in #26616.",
      "created_at" : "2022-12-01T10:28:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26594#issuecomment-1333548089",
      "id" : 1333548089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26594",
      "node_id" : "IC_kwDOABII585PfFQ5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333548089/reactions"
      },
      "updated_at" : "2022-12-01T10:28:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333548089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
