[
   {
      "author_association" : "MEMBER",
      "body" : "> It means that this error give us lot's of work \r\n\r\nDo you happen to know why it corrupts? If it is due to hardware error, it might be scary to just continue, because it might also corrupt wallet.dat.",
      "created_at" : "2022-11-29T12:38:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1330584634",
      "id" : 1330584634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PTxw6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330584634/reactions"
      },
      "updated_at" : "2022-11-29T12:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330584634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If the cause is known and harmless, it can be fixed like https://github.com/bitcoin/bitcoin/commit/b00b60ed4f27066656e45635f1386e6b1550c6ed",
      "created_at" : "2022-11-29T12:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1330592310",
      "id" : 1330592310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PTzo2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330592310/reactions"
      },
      "updated_at" : "2022-11-29T12:41:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1330592310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@NicolasDorier Were you able to find the reason for corruption? Steps to reproduce could help in knowing the severity of the issue",
      "created_at" : "2022-11-30T22:05:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1332791869",
      "id" : 1332791869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PcMo9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332791869/reactions"
      },
      "updated_at" : "2022-11-30T22:05:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332791869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@1440000bytes @MarcoFalke I don't know the reason, I can just report it happened to maybe 2 or 3 different people on our support in one or two months. Removing the `peers.dat` fixed their problem.\r\nMy guess is that bitcoin core was not shut down cleanly. (such as the process killed while saving peers.dat?)\r\n\r\nOn another note: A wallet corruption, which is genuinely more scary, doesn't make bitcoin core crash when starting. (it isn't related to this issue, but I can share a corrupted wallet.dat not crashing bitcoin core on startup if that interest anybody)",
      "created_at" : "2022-12-01T02:29:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333071141",
      "id" : 1333071141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PdQ0l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333071141/reactions"
      },
      "updated_at" : "2022-12-01T02:35:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333071141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> such as the process killed while saving peers.dat\r\n\r\nRenameOver should be atomic, so I don't think this can happen.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/e2bfd41f832dc7c7be6f17e928352f0eb2865f66/src/addrdb.cpp#L79",
      "created_at" : "2022-12-01T08:46:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333412109",
      "id" : 1333412109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PekEN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333412109/reactions"
      },
      "updated_at" : "2022-12-01T08:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333412109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I will ask for the next time it happens to save the `peers.dat` so we can analyze it.",
      "created_at" : "2022-12-01T09:03:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333441743",
      "id" : 1333441743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PerTP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333441743/reactions"
      },
      "updated_at" : "2022-12-01T09:03:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333441743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, thanks. Closing for now, but this can be reopened if you leave another comment or referred to if you open a new issue.",
      "created_at" : "2022-12-01T09:13:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333456025",
      "id" : 1333456025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PeuyZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333456025/reactions"
      },
      "updated_at" : "2022-12-01T09:13:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333456025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I think the reason why it is corrupt is different from the topic of not crashing for a `peers.dat` file. This file is non-essential, it shouldn't be a problem to restart.",
      "created_at" : "2022-12-01T09:47:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333495464",
      "id" : 1333495464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585Pe4ao",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333495464/reactions"
      },
      "updated_at" : "2022-12-01T09:47:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333495464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So I don't know if that help, told me that it mainly happen with people running with low spec RAM (2GB)\r\nApparently, one user had repeated corruptions with 1gb ram.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2022-12-01T11:21:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333612693",
      "id" : 1333612693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PfVCV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333612693/reactions"
      },
      "updated_at" : "2022-12-01T11:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333612693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To me it sounds like a bug that should be fixed and not silently ignored",
      "created_at" : "2022-12-01T11:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333614893",
      "id" : 1333614893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PfVkt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333614893/reactions"
      },
      "updated_at" : "2022-12-01T11:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333614893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The `peers.dat` file is designed to avoid having to reach out to the DNS or hardcoded seeds more than once, as this is the moment your node is most susceptible to being poisoned with attacker ip addresses and perhaps in the future blocks and transactions.\r\n\r\nIf the file becomes corrupted then `anchors.dat` should help protect the node from a successful future eclipse attack, but new addresses will have to either be added manually or fetched from DNS or hardcoded seeds again.\r\n\r\nI agree that the best course of action here is to find out what's corrupting `peers.dat` and fix that, rather than have Core silently ignore errors on something that _could_ be used as a first step towards eclipse attacking you...\r\n\r\nSide note: it does make me wonder whether it could be worth having certain runtime \"profiles\". For example I have seen software with \"paranoia level\" settings, and we could perhaps have something like\r\n\r\n- **Paranoid**: Fail on detecting any corrupt file, data, etc. debugging enabled on many categories by default, notification of re-orgs >= `n` blocks etc.\r\n- **Normal** (default): Somthing similar to todays defaults\r\n- **Resilient**: Try to recover from more non-critical errors to stay operational. Automatcially restart and rebuild broken indexes, etc. if needed",
      "created_at" : "2022-12-01T12:14:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333679286",
      "id" : 1333679286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PflS2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333679286/reactions"
      },
      "updated_at" : "2022-12-01T12:14:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333679286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe related: #25874 (with a slightly different error)\r\n\r\nI agree that having access to a corrupted `peers.dat` would be very helpful.",
      "created_at" : "2022-12-01T15:41:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333957965",
      "id" : 1333957965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PgpVN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333957965/reactions"
      },
      "updated_at" : "2022-12-01T15:41:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333957965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It _would_ be interesting if somehow Core is corrupting its own `peers.dat` in some way, but a more common source of errors is bad disk failure or a `mv` or archive operation going wrong/being cancelled mid-way through.\r\n\r\nI just used `dd if=/dev/urandom of=peers.dat bs=1024 seek=(math (random) % 10) count=1 conv=notrunc` (fish syntax) to write some random bytes to one of the first 10 blocks for a quick test which reproduced the error.\r\n\r\nI suppose in theory we could try to recover whatever entries we can. If an attacker has modified it they would also be able to update the checksum, so the hash is not providing any protection in this scenario.",
      "created_at" : "2022-12-01T15:58:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1333985193",
      "id" : 1333985193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585Pgv-p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333985193/reactions"
      },
      "updated_at" : "2022-12-01T15:58:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1333985193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It would be interesting if somehow Core is corrupting its own peers.dat in some way, but a more common source of errors is bad disk failure or a mv or archive operation going wrong/being cancelled mid-way through.\r\n\r\nIt would be more interesting if I can corrupt it remotely for another node. That would be something we need to report to: https://github.com/bitcoin/bitcoin/security/policy",
      "created_at" : "2022-12-01T19:10:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1334226764",
      "id" : 1334226764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585Phq9M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1334226764/reactions"
      },
      "updated_at" : "2022-12-01T19:10:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1334226764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@NicolasDorier I was just re-reading your original issue and had forgotten you had asked for a bash script to detect issues. `peers.dat` is just double sha256 checksummed, so something like this should work for you:\r\n\r\n```bash\r\n#!/usr/bin/env bash\r\n\r\necho \"Validating double sha256 checksum of file $1\"\r\n\r\n# Check if file is provided as argument\r\nif [ -z \"$1\" ]; then\r\n\techo \"Please provide a file as an argument\"\r\n\texit 1\r\nfi\r\n\r\n# Check if file exists\r\nif [ ! -f \"$1\" ]; then\r\n\techo \"File does not exist\"\r\n\texit 1\r\nfi\r\n\r\n# Use a full path for better error logging if possible\r\nif command -v realpath &>/dev/null; then\r\n\tfile=$(realpath \"$1\")\r\nelse\r\n\tfile=\"$1\"\r\nfi\r\n\r\n# Original file hash from file $1\r\nfile_hash=$(tail --bytes=32 \"$file\")\r\n\r\n# Calculated sha256 hash of file $1\r\ncalc_hash=$(head --bytes=-32 \"$file\" | sha256sum -b | cut -c1-64 | xxd -r -p | sha256sum | cut -c1-64 | xxd -r -p)\r\n\r\nif [ \"$file_hash\" == \"$calc_hash\" ]; then\r\n\techo \"File $file has a valid sha256 checksum\"\r\n\texit 0\r\nelse\r\n\techo \"File $file has an invalid sha256 checksum and may be corrupted\"\r\n\techo \"$file sha256 hash:\"\r\n\techo \"$file_hash\" | xxd --plain -cols 64\r\n\techo \"$file calculated sha256 hash:\"\r\n\techo \"$calc_hash\" | xxd --plain -cols 64\r\n\techo \"Please consider communicating this corrupt $1 file to Bitcoin Core developers for analysis\"\r\n\r\n\r\n    # You could optionally move/rename the file here so that Bitcoin Core will startup without error\r\n\t# e.g.:\r\n    # mv \"$1\" \"$1.corrupt\"\r\n\texit 1\r\nfi\r\n```\r\n\r\nIf you do use a check like this, perhaps you could consider a way we could have these multiple corrupt `peers.dat` files returned for analysis?",
      "created_at" : "2022-12-02T10:02:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1335014680",
      "id" : 1335014680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585PkrUY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1335014680/reactions"
      },
      "updated_at" : "2022-12-02T10:02:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1335014680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@willcl-ark  The corrupt peers.dat probably didn't have the sha256 matching. @petzsch was going to try to reproduce. Will ping him.",
      "created_at" : "2022-12-10T11:08:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1345240580",
      "id" : 1345240580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585QLr4E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345240580/reactions"
      },
      "updated_at" : "2022-12-10T11:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345240580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Still working at reproducing the issue on a VirtualBox VM with 1 GB RAM and 8 CPU cores for hopefully faster syncing (at around 20% synced now). So far no errors concerning the peers.dat.\r\n\r\nIs there anything else I should try for forcing data corruption to happen? Like power down the VM without a regular shutdown sequence? Not sure what our users where doing with their installs to torture them into this error. :-)\r\n\r\nCould this error be hardware specific (not just low RAM)? I'm virtualizing with VirtualBox on a i9-9900k ...the VM has 64 Bit Ubuntu 22.04 running with the usual btcpay docker stack.\r\n\r\n@NicolasDorier you mentioned a user who ran into this error several times with 1 GB RAM: Can we still reach them for more details what machine they used?",
      "created_at" : "2022-12-10T11:39:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1345245604",
      "id" : 1345245604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585QLtGk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345245604/reactions"
      },
      "updated_at" : "2022-12-10T11:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345245604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1374810?v=4",
         "events_url" : "https://api.github.com/users/petzsch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petzsch/followers",
         "following_url" : "https://api.github.com/users/petzsch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petzsch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petzsch",
         "id" : 1374810,
         "login" : "petzsch",
         "node_id" : "MDQ6VXNlcjEzNzQ4MTA=",
         "organizations_url" : "https://api.github.com/users/petzsch/orgs",
         "received_events_url" : "https://api.github.com/users/petzsch/received_events",
         "repos_url" : "https://api.github.com/users/petzsch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petzsch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petzsch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petzsch"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This error affected my btcpay server apparently since 1.7.1 update (11/29/22).\r\n`$docker logs btcpayserver_bitcoind` ->\r\n`Error: Invalid or corrupt peers.dat (Checksum mismatch, data corrupted). If you believe this is a bug, please report it to https://github.com/bitcoin/bitcoin/issues. As a workaround, you can move the file (\"/home/bitcoin/.bitcoin/peers.dat\") out of the way (rename, move, or delete) to have a new one created on the next start.`\r\n\r\nAs suggested, after deleting `peers.dat` my node resumed blocks syncing smoothly. Before that, I was able to make a copy of the corrupted `peers.dat`, but I haven't found a way to read it. \r\n\r\nMy server has low hardware capacity: 2 GB RAM, 50 GB Disk (running in prune mode 25GB) and OS Ubuntu 20.04 x64.",
      "created_at" : "2022-12-11T00:41:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1345419977",
      "id" : 1345419977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585QMXrJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345419977/reactions"
      },
      "updated_at" : "2022-12-11T00:41:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345419977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19850959?v=4",
         "events_url" : "https://api.github.com/users/cpleonardo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cpleonardo/followers",
         "following_url" : "https://api.github.com/users/cpleonardo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cpleonardo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cpleonardo",
         "id" : 19850959,
         "login" : "cpleonardo",
         "node_id" : "MDQ6VXNlcjE5ODUwOTU5",
         "organizations_url" : "https://api.github.com/users/cpleonardo/orgs",
         "received_events_url" : "https://api.github.com/users/cpleonardo/received_events",
         "repos_url" : "https://api.github.com/users/cpleonardo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cpleonardo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cpleonardo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cpleonardo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you check the debug log for possible causes of the corruption (maybe at the time of shutdown); Alternatively you can upload it here.\r\n\r\nYou can find the debug.log in your [data dir](https://github.com/bitcoin/bitcoin/blob/master/doc/files.md#data-directory-location).\r\n\r\nPlease be aware that the debug log might contain personally identifying information.\r\n\r\nYou may also upload the peers dat, with the same disclaimer.",
      "created_at" : "2022-12-12T09:34:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1346164512",
      "id" : 1346164512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585QPNcg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346164512/reactions"
      },
      "updated_at" : "2022-12-12T09:34:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346164512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@cpleonardo You can see the deserialisation code in addrdb.cpp [here](https://github.com/bitcoin/bitcoin/blob/v24.0.1/src/addrdb.cpp#L88-L110) if you want to try and re-implement some manual deserialisation.\r\n\r\nIn addition to @MarcoFalke's suggestions, perhaps `dmesg` contains logs of a hardware failure? You could check with e.g.  `dmesg --level=err,warn` (needs `sudo`).",
      "created_at" : "2022-12-12T09:40:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1346172301",
      "id" : 1346172301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585QPPWN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346172301/reactions"
      },
      "updated_at" : "2022-12-12T09:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346172301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Can confirm this. Happened to a friend of mine after a power outage ",
      "created_at" : "2022-12-24T15:25:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1364545126",
      "id" : 1364545126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585RVU5m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1364545126/reactions"
      },
      "updated_at" : "2022-12-24T15:25:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1364545126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7918067?v=4",
         "events_url" : "https://api.github.com/users/jaonoctus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jaonoctus/followers",
         "following_url" : "https://api.github.com/users/jaonoctus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jaonoctus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jaonoctus",
         "id" : 7918067,
         "login" : "jaonoctus",
         "node_id" : "MDQ6VXNlcjc5MTgwNjc=",
         "organizations_url" : "https://api.github.com/users/jaonoctus/orgs",
         "received_events_url" : "https://api.github.com/users/jaonoctus/received_events",
         "repos_url" : "https://api.github.com/users/jaonoctus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jaonoctus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jaonoctus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jaonoctus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "For now I will modify our docker image to wipe `peers.dat` after every restart, too many people hitting the issue.\r\nOr maybe try to detect corruption in bash.",
      "created_at" : "2023-01-06T00:40:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1372981893",
      "id" : 1372981893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585R1gqF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1372981893/reactions"
      },
      "updated_at" : "2023-01-06T00:42:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1372981893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> So I don't know if that help, told me that it mainly happen with people running with low spec RAM (2GB) Apparently, one user had repeated corruptions with 1gb ram.\r\n\r\nOOM kill?",
      "created_at" : "2023-01-06T00:57:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1372994788",
      "id" : 1372994788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585R1jzk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1372994788/reactions"
      },
      "updated_at" : "2023-01-06T00:57:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1372994788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Adding this to our docker image\r\n```bash\r\n\t# peers_dat is routinely corrupted, preventing bitcoind to start, see https://github.com/bitcoin/bitcoin/issues/26599\r\n\tpeers_dat=\"peers.dat\"\r\n\tpeers_dat_corrupted=\"peers_corrupted.dat\"\r\n\tif [[ -f \"${peers_dat}\" ]]; then\r\n\t\tactual_hash=$(head -c -32 \"${peers_dat}\" | sha256sum | cut -c1-64 | xxd -r -p | sha256sum | cut -c1-64)\r\n\t\texpected_hash=$(tail -c 32 \"${peers_dat}\" | xxd -ps -c 32)\r\n\t\tif [[ \"${actual_hash}\" != \"${expected_hash}\" ]]; then\r\n\t\t\techo \"${peers_dat} is corrupted, moving it to ${peers_dat_corrupted}\"\r\n\t\t\trm -f \"${peers_dat_corrupted}\"\r\n\t\t\tmv \"${peers_dat}\" \"${peers_dat_corrupted}\"\r\n\t\tfi\r\n\tfi\r\n```\r\nIf that happen, I keep the corrupted file so I can share here",
      "created_at" : "2023-01-06T01:18:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1373010122",
      "id" : 1373010122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585R1njK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373010122/reactions"
      },
      "updated_at" : "2023-01-06T01:19:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373010122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "For people having issues getting bitcoind to start on btcpay server docker deployment, run `btcpay-update.sh`. Our new image now automatically move the corrupted file.\r\n\r\nOn a maybe related matter, for long time we are also deleting the `settings.json` before starting bitcoin core with `rm -f /home/bitcoin/.bitcoin/settings.json` a long time ago, as it also happened often that bitcoind was unable to start due to random corruption of it.",
      "created_at" : "2023-01-06T04:03:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1373115318",
      "id" : 1373115318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585R2BO2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373115318/reactions"
      },
      "updated_at" : "2023-01-06T04:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1373115318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This just happened to my bitcoind node running inside an old raspberry pi 2 (1gb memory).\r\n\r\nHere is my corrupted peers.dat:\r\n[crashed-peers.zip](https://github.com/bitcoin/bitcoin/files/10397169/crashed-peers.zip)\r\n\r\nHere are the relevant lines from my debug.log:\r\nhttps://gist.github.com/fedevegili/d8afe7ca6a46bea5c5281aeda661e5e9\r\n\r\nHope it helps.\r\n\r\n",
      "created_at" : "2023-01-12T01:05:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1379678337",
      "id" : 1379678337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SPDiB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1379678337/reactions"
      },
      "updated_at" : "2023-01-12T01:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1379678337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6809993?v=4",
         "events_url" : "https://api.github.com/users/fedevegili/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fedevegili/followers",
         "following_url" : "https://api.github.com/users/fedevegili/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fedevegili/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fedevegili",
         "id" : 6809993,
         "login" : "fedevegili",
         "node_id" : "MDQ6VXNlcjY4MDk5OTM=",
         "organizations_url" : "https://api.github.com/users/fedevegili/orgs",
         "received_events_url" : "https://api.github.com/users/fedevegili/received_events",
         "repos_url" : "https://api.github.com/users/fedevegili/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fedevegili/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fedevegili/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fedevegili"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What type of underlying storage does `/mnt/usb/bitcoin-data` point to? If the medium is eager to corrupt itself you may find other files (such as the coins db) corrupted as well.",
      "created_at" : "2023-01-12T09:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1380016035",
      "id" : 1380016035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SQV-j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380016035/reactions"
      },
      "updated_at" : "2023-01-12T09:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380016035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> What type of underlying storage does `/mnt/usb/bitcoin-data` point to? If the medium is eager to corrupt itself you may find other files (such as the coins db) corrupted as well.\r\n\r\nIt's an ext4 1tb SSD connected to the raspberry pi through an external HDD case. I'd say it's quite error prone.\r\n\r\nHowever, only this file got corrupted so far, only this time. I have this setup for about 2 months.",
      "created_at" : "2023-01-12T11:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1380187733",
      "id" : 1380187733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SQ_5V",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380187733/reactions"
      },
      "updated_at" : "2023-01-12T11:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380187733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6809993?v=4",
         "events_url" : "https://api.github.com/users/fedevegili/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fedevegili/followers",
         "following_url" : "https://api.github.com/users/fedevegili/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fedevegili/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fedevegili",
         "id" : 6809993,
         "login" : "fedevegili",
         "node_id" : "MDQ6VXNlcjY4MDk5OTM=",
         "organizations_url" : "https://api.github.com/users/fedevegili/orgs",
         "received_events_url" : "https://api.github.com/users/fedevegili/received_events",
         "repos_url" : "https://api.github.com/users/fedevegili/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fedevegili/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fedevegili/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fedevegili"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Here are the relevant lines from my debug.log:\r\n> https://gist.github.com/fedevegili/d8afe7ca6a46bea5c5281aeda661e5e9\r\n\r\nWhat happened here, did the node crash without an error, and then you restarted it and got the corrupted-peers error? I'm asking because the time stamps in the debug.log aren't chronological, at 2023-01-08T18:55:41Z a new outbound peer is connected, and then it jumps back in time.",
      "created_at" : "2023-01-12T16:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1380699675",
      "id" : 1380699675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SS84b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380699675/reactions"
      },
      "updated_at" : "2023-01-12T16:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380699675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't know the reason, I can just report it happened to maybe 2 or 3 different people on our support in one or two months. Removing the `peers.dat` fixed their problem. My guess is that bitcoin core was not shut down cleanly. (such as the process killed while saving peers.dat?)\r\n\r\nI also saw this happen a couple times a year on my older laptop running debian. I restart nodes frequently in order to test pull requests, and IIRC the corruption would happen after one of the Bitcoin Core peers.dat-related threads hung during shutdown and bitcoind had to be killed manually.",
      "created_at" : "2023-01-12T20:15:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1380948396",
      "id" : 1380948396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585ST5ms",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380948396/reactions"
      },
      "updated_at" : "2023-01-12T20:15:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1380948396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe I've found the bug that caused this with the help of the provided `peers.dat` (which was completely ok as far as I can see, just that the checksum was wrong, and when overwriting the bad checksum with the correct one it would load correctly):\r\n\r\nEvery 15 minutes, the scheduler thread will dump peers.dat to disk - for this it calls https://github.com/bitcoin/bitcoin/blob/f4ef856375c5b295d78169b136c6aee928c19bc9/src/addrdb.cpp#L38-L40\r\n\r\nwhich first writes the data (i.e. AddrMan) into the stream, and then writes the same data into a hasher - which then provides the hash that is added to the stream in the third line. The problem is that AddrMan can change in between the first two calls (e.g. if we receive a new address), and then the data and hash won't match anymore and the written file is corrupt. \r\n\r\nI could reproduce this by adding a sleep for the scheduler thread in between the two writes of `data`, manually adding artificial addresses with `addpeeraddress` during this sleep, and then killing bitcoind (so that it can't correct the peers.dat at a clean shutdown). That way, I would corrupt my own peers.dat.\r\n\r\nI will work on a fix!\r\n",
      "created_at" : "2023-01-12T22:54:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1381082886",
      "id" : 1381082886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SUacG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 3,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 1,
         "rocket" : 0,
         "total_count" : 4,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1381082886/reactions"
      },
      "updated_at" : "2023-01-12T23:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1381082886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> > Here are the relevant lines from my debug.log:\r\n> > https://gist.github.com/fedevegili/d8afe7ca6a46bea5c5281aeda661e5e9\r\n> \r\n> What happened here, did the node crash without an error, and then you restarted it and got the corrupted-peers error? I'm asking because the time stamps in the debug.log aren't chronological, at 2023-01-08T18:55:41Z a new outbound peer is connected, and then it jumps back in time.\r\n\r\nUnfortunately I have no idea. I realized the logs were out of order too, but couldn't figure out why.\r\n\r\nEverything was working and 4-5 days later when I checked again, the bitcoin process was not running and I was not able to start the process anymore. No one touchs this raspberry pi and no one connected to it in the meantime. The bitcoind process starts with system boot, so I'd say there was definitely a restart at some point.\r\n\r\nMaybe the logs seems to be out of order because of clock syncing adjustments after a system restart?",
      "created_at" : "2023-01-13T17:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1382187944",
      "id" : 1382187944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585SYoOo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1382187944/reactions"
      },
      "updated_at" : "2023-01-13T17:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1382187944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6809993?v=4",
         "events_url" : "https://api.github.com/users/fedevegili/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fedevegili/followers",
         "following_url" : "https://api.github.com/users/fedevegili/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fedevegili/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fedevegili",
         "id" : 6809993,
         "login" : "fedevegili",
         "node_id" : "MDQ6VXNlcjY4MDk5OTM=",
         "organizations_url" : "https://api.github.com/users/fedevegili/orgs",
         "received_events_url" : "https://api.github.com/users/fedevegili/received_events",
         "repos_url" : "https://api.github.com/users/fedevegili/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fedevegili/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fedevegili/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fedevegili"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> To me it sounds like a bug that should be fixed and not silently ignored\r\n\r\nWhat about having a backup peers.dat? On startup, after peers.dat is successfully loaded, the backup would be updated / replaced with the current version. If peers.dat was corrupted and failed to load, the backup could be used instead, along with an alert to the user.",
      "created_at" : "2023-01-15T16:56:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1383199627",
      "id" : 1383199627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585ScfOL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1383199627/reactions"
      },
      "updated_at" : "2023-01-15T16:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1383199627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7982712?v=4",
         "events_url" : "https://api.github.com/users/CubicEarth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/CubicEarth/followers",
         "following_url" : "https://api.github.com/users/CubicEarth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/CubicEarth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/CubicEarth",
         "id" : 7982712,
         "login" : "CubicEarth",
         "node_id" : "MDQ6VXNlcjc5ODI3MTI=",
         "organizations_url" : "https://api.github.com/users/CubicEarth/orgs",
         "received_events_url" : "https://api.github.com/users/CubicEarth/received_events",
         "repos_url" : "https://api.github.com/users/CubicEarth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/CubicEarth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/CubicEarth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/CubicEarth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I opened #26909 to fix this.",
      "created_at" : "2023-01-17T18:58:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1385903868",
      "id" : 1385903868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585Smzb8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1385903868/reactions"
      },
      "updated_at" : "2023-01-17T18:58:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1385903868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Although this issue has been marked as fixed for the next release, I'll leave this additional note here for posterity.\r\n\r\nThis issue happens me every few days on my 4gb pi umbrel.  It appears that immediately before each crash, the log contains `Socks5() connect to xxx.xxx.xxx.xxx:8333 failed: InterruptibleRecv() timeout or other failure`.",
      "created_at" : "2023-05-20T17:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1555962035",
      "id" : 1555962035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585cvhiz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555962035/reactions"
      },
      "updated_at" : "2023-05-20T17:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555962035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/211684?v=4",
         "events_url" : "https://api.github.com/users/beeduul/events{/privacy}",
         "followers_url" : "https://api.github.com/users/beeduul/followers",
         "following_url" : "https://api.github.com/users/beeduul/following{/other_user}",
         "gists_url" : "https://api.github.com/users/beeduul/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/beeduul",
         "id" : 211684,
         "login" : "beeduul",
         "node_id" : "MDQ6VXNlcjIxMTY4NA==",
         "organizations_url" : "https://api.github.com/users/beeduul/orgs",
         "received_events_url" : "https://api.github.com/users/beeduul/received_events",
         "repos_url" : "https://api.github.com/users/beeduul/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/beeduul/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/beeduul/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/beeduul"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Although this issue has been marked as fixed for the next release, I'll leave this additional note here for posterity.\r\n> \r\n> This issue happens me every few days on my 4gb pi umbrel. It appears that immediately before each crash, the log contains `Socks5() connect to xxx.xxx.xxx.xxx:8333 failed: InterruptibleRecv() timeout or other failure`.\r\n\r\nTo be clear: the fix doesn't prevent any crashes from happening - what it fixes is that if the node crashes for some unrelated reason, `peers.dat` shouldn't get corrupted anymore (which would only be visible at the next startup). So if your node crashes every few days, it sounds like you have another, unrelated problem.",
      "created_at" : "2023-05-20T21:15:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1556008722",
      "id" : 1556008722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585cvs8S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556008722/reactions"
      },
      "updated_at" : "2023-05-20T21:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556008722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So if your node crashes every few days, it sounds like you have another, unrelated problem.\r\n\r\n@beeduul do you want to follow up with a new issue, providing more info if possible? Assuming this isn't a hardware related problem.",
      "created_at" : "2023-05-22T09:09:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26599#issuecomment-1556844214",
      "id" : 1556844214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26599",
      "node_id" : "IC_kwDOABII585cy462",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556844214/reactions"
      },
      "updated_at" : "2023-05-22T09:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1556844214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
