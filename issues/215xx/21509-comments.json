[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21509#discussion_r599305809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599305809"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It might be good to split each `&&` into its own line, to clarify that each condition needs to be fulfilled independently",
      "commit_id" : "18a9b27dd68dc9044a82fba0802b8cb5c68d10ce",
      "created_at" : "2021-03-23T06:41:13Z",
      "diff_hunk" : "@@ -4689,7 +4689,8 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n         //\n         // Message: feefilter\n         //\n-        if (pto->m_tx_relay != nullptr && pto->GetCommonVersion() >= FEEFILTER_VERSION && gArgs.GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER) &&\n+        if (pto->m_tx_relay != nullptr && !m_ignore_incoming_txs && pto->GetCommonVersion() >= FEEFILTER_VERSION &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#discussion_r599305809",
      "id" : 599305809,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTMwNTgwOQ==",
      "original_commit_id" : "c2aa9d004c1c67f8fe92d79454b9872c12c40043",
      "original_line" : 4692,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 618246866,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21509",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-23T17:59:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599305809",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21506 (p2p, refactor: make NetPermissionFlags an enum class by jonatack)\n* #21160 (Net/Net processing: Move tx inventory into net_processing by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-23T10:28:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-804791121",
      "id" : 804791121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDc5MTEyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T10:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804791121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nBitcoin Core follows BIP 133: [feefilter messages](https://github.com/bitcoin/bitcoin/blob/master/doc/bips.md)\r\n\r\n[BIP 133](https://github.com/bitcoin/bips/blob/master/bip-0133.mediawiki#abstract): Add a new message, \"feefilter\", which serves to instruct peers not to send \"inv\"'s to the node for **transactions with fees below the specified fee rate**. \r\n\r\n-[blocksonly](https://github.com/bitcoin/bitcoin/blob/master/doc/reduce-traffic.md#4-turn-off-transaction-relay--blocksonly): **To only sync blocks with other peers, you can disable transaction relay** ",
      "created_at" : "2021-03-23T10:58:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-804809251",
      "id" : 804809251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDgwOTI1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T10:58:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804809251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> My first reaction was to suggest that they send the MAX_FILTER once, so that feefilter could slowly replace the fRelay mechanism to enable/disable tx relay.\r\n\r\nIs it possible to replace exactly? Disabling tx relay using `fRelay` means you disconnect them for sending you a tx, but it's ok if they ignore a fee filter, right?",
      "created_at" : "2021-03-23T14:40:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-804957876",
      "id" : 804957876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDk1Nzg3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T14:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804957876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, we'd have to disconnect on feefilter violations (at least MAX_FITLER ones). There might be a large overlap between peers that ignore fRelay (and get disconnected) with peers that ignore feefilter, but I haven't collected data on this.",
      "created_at" : "2021-03-23T14:49:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-804966039",
      "id" : 804966039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDk2NjAzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T14:49:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804966039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Yeah, we'd have to disconnect on feefilter violations (at least MAX_FITLER ones). There might be a large overlap between peers that ignore fRelay (and get disconnected) with peers that ignore feefilter, but I haven't collected data on this.\r\n\r\nJust curious. Have you seen https://github.com/bitcoin/bitcoin/pull/20895#issuecomment-757387607?",
      "created_at" : "2021-03-23T15:34:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805002891",
      "id" : 805002891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTAwMjg5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T15:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805002891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I did and I agree. I was hypothesising *if* the set of peers that ignore fRelay is identical to the set of nodes that ignore MAX_FILTER, then there is practically no difference whether they are disconnected due to ignoring either.",
      "created_at" : "2021-03-23T17:21:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805084669",
      "id" : 805084669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTA4NDY2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T17:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805084669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This discussion drifted away from the scope of this PR a bit - but what is the motivation behind the idea of replacing the `fRelay` mechanism by a MAX_FILTER feefilter?",
      "created_at" : "2021-03-23T17:49:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805105065",
      "id" : 805105065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTEwNTA2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T17:49:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805105065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21509#discussion_r599810286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599810286"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "18a9b27dd68dc9044a82fba0802b8cb5c68d10ce",
      "created_at" : "2021-03-23T18:00:00Z",
      "diff_hunk" : "@@ -4689,7 +4689,8 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n         //\n         // Message: feefilter\n         //\n-        if (pto->m_tx_relay != nullptr && pto->GetCommonVersion() >= FEEFILTER_VERSION && gArgs.GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER) &&\n+        if (pto->m_tx_relay != nullptr && !m_ignore_incoming_txs && pto->GetCommonVersion() >= FEEFILTER_VERSION &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#discussion_r599810286",
      "id" : 599810286,
      "in_reply_to_id" : 599305809,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTgxMDI4Ng==",
      "original_commit_id" : "c2aa9d004c1c67f8fe92d79454b9872c12c40043",
      "original_line" : 4692,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 618909709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21509",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-23T18:00:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599810286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This discussion drifted away from the scope of this PR a bit - but what is the motivation behind the idea of replacing the `fRelay` mechanism by a MAX_FILTER feefilter?\r\n\r\nSorry about that ð. AFAIK, `fRelay` was introduced as a `VERSION` field in BIP37 as a way to turn tx relay off until a bloom filter is sent. That means it's not very flexible, since you can't send multiple versions and we don't use bloom filters anymore.",
      "created_at" : "2021-03-23T21:36:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805279983",
      "id" : 805279983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTI3OTk4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T21:36:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805279983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Separate from the `fRelay` convo... Concept ACK to having consistent behavior towards our block-relay-only peers as when we're in blocksonly mode. I don't see how there'd be any benefit of sending them fee filters right now ð¤ ",
      "created_at" : "2021-03-23T21:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805286501",
      "id" : 805286501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTI4NjUwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T21:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805286501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 18a9b27dd68dc9044a82fba0802b8cb5c68d10ce\r\n\r\nI think the whole fee filter sending logic could be cleaned up substantially:\r\n\r\n- remove the `-feefilter` option, which is debug only and isn't used in any of our tests. Seems wasteful to check this option for every peer on every iteration of the message handler loop.\r\n- factor this logic out into its own function. The compiler will inline it anyway, but it helps readability to break the very long SendMessages() function into smaller units.\r\n- move the logic out of the cs_main lock scope. I don't think there's anything in there that requires cs_main.\r\n\r\nObviously out of scope for this PR.",
      "created_at" : "2021-03-24T13:12:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-805808485",
      "id" : 805808485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTgwODQ4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T13:12:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805808485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tested ACK 18a9b27dd68dc9044a82fba0802b8cb5c68d10ce using [this](https://github.com/glozow/bitcoin/commit/9989c728a027d1d268b3e66d64d6b5fdbd5c7fa2). Looks like we didn't have a test for block-relay-only either.",
      "created_at" : "2021-03-24T18:51:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-806072950",
      "id" : 806072950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjA3Mjk1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T18:51:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806072950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I wonder if we should also skip processing the message if we are in `-blocksonly` mode, but the processing is pretty trivial, so doesn't seem like it would matter much.\r\n\r\nI had thought about that but decided against it, since sending transactions in `-blocksonly` mode is unusual but not impossible (`sendrawtransaction` as was recently discussed in [IRC](http://www.erisian.com.au/bitcoin-core-dev/log-2021-03-04.html), and I think we'd also answer unsolicited GETDATAs). In that case, it would be nice to also respect our peers' feefilters.\r\n\r\n> You could add a small test for this behavior, something like this in p2p_feefilter.py:\r\n\r\n> tested ACK [18a9b27](https://github.com/bitcoin/bitcoin/commit/18a9b27dd68dc9044a82fba0802b8cb5c68d10ce) using [this](https://github.com/glozow/bitcoin/commit/9989c728a027d1d268b3e66d64d6b5fdbd5c7fa2). Looks like we didn't have a test for block-relay-only either.\r\n\r\nThanks for the suggestion - I cherry-picked @glozow's test commit and added it to the PR.\r\n\r\n",
      "created_at" : "2021-03-25T21:13:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-807499012",
      "id" : 807499012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNzQ5OTAxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-25T21:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807499012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re ACK beead33a21483c4901e76799ba5c8f7d6fdfffe9 ð thanks for adding the test!",
      "created_at" : "2021-03-25T22:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-807600568",
      "id" : 807600568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNzYwMDU2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-25T22:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807600568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK beead33a21483c4901e76799ba5c8f7d6fdfffe9 \r\n\r\n> I had thought about that but decided against it, since sending transactions in -blocksonly mode is unusual but not impossible (sendrawtransaction as was recently discussed in IRC, and I think we'd also answer unsolicited GETDATAs). In that case, it would be nice to also respect our peers' feefilters.\r\n\r\nyeah, great point :) ",
      "created_at" : "2021-03-26T05:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-807941441",
      "id" : 807941441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNzk0MTQ0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-26T05:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807941441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "* remove the -feefilter option, which is debug only and isn't used in any of our tests. Seems wasteful to check this option for every peer on every iteration of the message handler loop.\r\n\r\nACK, seems redundant with forcerelay\r\n\r\n* move the logic out of the cs_main lock scope. I don't think there's anything in there that requires cs_main.\r\n\r\nround isn't thread-safe, so it needs a lock. See\r\n\r\n```cpp\r\nsrc/policy/fees.h-    /** Quantize a minimum fee for privacy purpose before broadcast. Not thread-safe due to use of FastRandomContext */\r\nsrc/policy/fees.h-    CAmount round(CAmount currentMinFee);\r\n",
      "created_at" : "2021-03-26T07:08:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-807992199",
      "id" : 807992199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNzk5MjE5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-26T07:08:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807992199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "review ACK beead33a21483c4901e76799ba5c8f7d6fdfffe9",
      "created_at" : "2021-03-26T07:09:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-807992368",
      "id" : 807992368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNzk5MjM2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-26T07:09:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807992368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK beead33a21483c4901e76799ba5c8f7d6fdfffe9",
      "created_at" : "2021-03-29T09:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21509#issuecomment-809244971",
      "id" : 809244971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTI0NDk3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T09:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809244971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
