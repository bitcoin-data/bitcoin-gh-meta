[
   {
      "author_association" : "MEMBER",
      "body" : "You can import xpub-based descriptors using `importmulti` (legacy wallets) or `importdescriptor` (descriptor wallets).",
      "created_at" : "2021-03-29T16:30:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-809525537",
      "id" : 809525537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTUyNTUzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T16:30:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809525537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok I think I accidentally found a good example for usage in #17797",
      "created_at" : "2021-03-30T10:28:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-810108553",
      "id" : 810108553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDEwODU1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T10:28:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810108553",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1282298?v=4",
         "events_url" : "https://api.github.com/users/typoworx-de/events{/privacy}",
         "followers_url" : "https://api.github.com/users/typoworx-de/followers",
         "following_url" : "https://api.github.com/users/typoworx-de/following{/other_user}",
         "gists_url" : "https://api.github.com/users/typoworx-de/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/typoworx-de",
         "id" : 1282298,
         "login" : "typoworx-de",
         "node_id" : "MDQ6VXNlcjEyODIyOTg=",
         "organizations_url" : "https://api.github.com/users/typoworx-de/orgs",
         "received_events_url" : "https://api.github.com/users/typoworx-de/received_events",
         "repos_url" : "https://api.github.com/users/typoworx-de/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/typoworx-de/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/typoworx-de/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/typoworx-de"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa may be you could give me a hint to the code given in #17797\r\n\r\n```\r\nI run this RPC $ bitcoin-cli -rpcwallet=wallet-my-test-wallet.dat importmulti '[{\"desc\": \"sh(wpkh(xpub6EcgD73U5aQe8F9k1VQmz3bDdnMmgNAouVixdsKVC9YTJb1BNPPq9jSCuDArzxzj2JAWcGyL9sJofgLQHAYovQqCibh3ovuWVtwiagp1x7d/*))#9fdjk2ls\", \"range\": [0, 999999], \"timestamp\": \"now\", \"watchonly\": true}]' '{\"rescan\": false}'\r\n```\r\n\r\nThe notation is clear so far. But what exactly is the '#9fdjk2ls' given after:\r\n\"sh(wpkh(**_{myXpubKey}_**/*))**_#9fdjk2ls_**\"\r\n\r\nThe \"/*\" I assume is some kind of wildcard for the xpub-path? and the string afterwards?",
      "created_at" : "2021-03-30T10:39:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-810115146",
      "id" : 810115146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDExNTE0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T10:39:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810115146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1282298?v=4",
         "events_url" : "https://api.github.com/users/typoworx-de/events{/privacy}",
         "followers_url" : "https://api.github.com/users/typoworx-de/followers",
         "following_url" : "https://api.github.com/users/typoworx-de/following{/other_user}",
         "gists_url" : "https://api.github.com/users/typoworx-de/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/typoworx-de",
         "id" : 1282298,
         "login" : "typoworx-de",
         "node_id" : "MDQ6VXNlcjEyODIyOTg=",
         "organizations_url" : "https://api.github.com/users/typoworx-de/orgs",
         "received_events_url" : "https://api.github.com/users/typoworx-de/received_events",
         "repos_url" : "https://api.github.com/users/typoworx-de/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/typoworx-de/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/typoworx-de/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/typoworx-de"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Just found this document giving a good overview (just for notice to others landing here):\r\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/descriptors.md\r\n\r\nThere are a lot of sub-types mentioned. Is there a \"save way\" to importmulti without knowing exact sub-type like \"sh(multi(...))\" or \"wpkh()\" and so on?\r\n\r\nBut still not knowing what the above mentioned string is good for.",
      "created_at" : "2021-03-30T10:44:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-810118291",
      "id" : 810118291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDExODI5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T10:44:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810118291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1282298?v=4",
         "events_url" : "https://api.github.com/users/typoworx-de/events{/privacy}",
         "followers_url" : "https://api.github.com/users/typoworx-de/followers",
         "following_url" : "https://api.github.com/users/typoworx-de/following{/other_user}",
         "gists_url" : "https://api.github.com/users/typoworx-de/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/typoworx-de",
         "id" : 1282298,
         "login" : "typoworx-de",
         "node_id" : "MDQ6VXNlcjEyODIyOTg=",
         "organizations_url" : "https://api.github.com/users/typoworx-de/orgs",
         "received_events_url" : "https://api.github.com/users/typoworx-de/received_events",
         "repos_url" : "https://api.github.com/users/typoworx-de/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/typoworx-de/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/typoworx-de/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/typoworx-de"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok just in case others are landing here searching for a solution:\r\nuse rpc 'getdescriptorinfo' 'wpkh(_**{yourXpubKey}**_/*)' and then use the result['descriptor'] for importmulti which then includes an appended XPub-Checksum (the strange string I mentioned above).",
      "created_at" : "2021-03-30T11:31:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-810146562",
      "id" : 810146562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDE0NjU2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T11:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810146562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1282298?v=4",
         "events_url" : "https://api.github.com/users/typoworx-de/events{/privacy}",
         "followers_url" : "https://api.github.com/users/typoworx-de/followers",
         "following_url" : "https://api.github.com/users/typoworx-de/following{/other_user}",
         "gists_url" : "https://api.github.com/users/typoworx-de/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/typoworx-de",
         "id" : 1282298,
         "login" : "typoworx-de",
         "node_id" : "MDQ6VXNlcjEyODIyOTg=",
         "organizations_url" : "https://api.github.com/users/typoworx-de/orgs",
         "received_events_url" : "https://api.github.com/users/typoworx-de/received_events",
         "repos_url" : "https://api.github.com/users/typoworx-de/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/typoworx-de/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/typoworx-de/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/typoworx-de"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "the type you specify determines the spending conditions. the same xpub can be used to define a spending condition where the xpub is involved in multi sig so you would use`wsh(multi(3,xpub,...)`, or maybe you want a sh address type so you use `sh(wpkh(xpub))`.  if you just want to monitor a single public key for bech32 hdwallet, you would chose wpkh \r\n```\r\nwpkh([fingerprint/hardened/path]xpub/0/*)#checksum\"\r\n```\r\nthe fingerprint is of the root seed, and the hardened path (purpose/coin/account) that the xpub was made from. eg 84h/0h/0h - for bech32 mainnet addresses at account 0.\r\nThe xpub has to be followed by the path where new addresses will be derived.\r\nThe 0 position specifies deposit. You would use 1 for change. If you want to create psbts then you have to also import the change descriptor. the * is  the index where new addresses are generated. \r\n\r\nIf i am not mistaken this is the standard, but some wallets could just start deriving at xpub/* rather than xpub/0/* for deposits, so you have to make sure you are following the same path as the wallet you are importing from.\r\n\r\nYou cant import ***all*** addresses and usually should avoid finding yourself in a situation where that is required. You have to set a range, and its usually not the best idea to use such a big range like 0-999999. It would be very memory intensive. If you are for example, recovering an hd wallet, your old wallet has very likely not imported addresses beyond the range of 1000. So you have to make sure you get the correct path your wallet was deriving from; then use that in the descriptor and import small ranges at a time.  Then use `rescanblockchain` to sync.\r\n\r\n",
      "created_at" : "2021-04-18T20:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-822054410",
      "id" : 822054410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjA1NDQxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T20:28:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822054410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20156932?v=4",
         "events_url" : "https://api.github.com/users/vmenond/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vmenond/followers",
         "following_url" : "https://api.github.com/users/vmenond/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vmenond/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vmenond",
         "id" : 20156932,
         "login" : "vmenond",
         "node_id" : "MDQ6VXNlcjIwMTU2OTMy",
         "organizations_url" : "https://api.github.com/users/vmenond/orgs",
         "received_events_url" : "https://api.github.com/users/vmenond/received_events",
         "repos_url" : "https://api.github.com/users/vmenond/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vmenond/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vmenond/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vmenond"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "https://github.com/bitcoin-core/HWI",
      "created_at" : "2021-04-18T20:23:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21546#issuecomment-822054992",
      "id" : 822054992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjA1NDk5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T20:23:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822054992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20156932?v=4",
         "events_url" : "https://api.github.com/users/vmenond/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vmenond/followers",
         "following_url" : "https://api.github.com/users/vmenond/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vmenond/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vmenond",
         "id" : 20156932,
         "login" : "vmenond",
         "node_id" : "MDQ6VXNlcjIwMTU2OTMy",
         "organizations_url" : "https://api.github.com/users/vmenond/orgs",
         "received_events_url" : "https://api.github.com/users/vmenond/received_events",
         "repos_url" : "https://api.github.com/users/vmenond/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vmenond/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vmenond/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vmenond"
      }
   }
]
