[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The unicode characters in the temporary test directory paths, while cute, cause inconvenience on remote systems which are not configured to display unicode over tty.\r\n\r\nCorrect me if I'm wrong but it's not about cuteness but rather about testing that unicode paths are properly supported on all supported platforms, isn't it? There are https://github.com/bitcoin/bitcoin/blob/master/src/test/fs_tests.cpp tests but I still miss information whether we test the same things with this PR as we do on master or not.",
      "created_at" : "2021-03-22T15:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804149467",
      "id" : 804149467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDE0OTQ2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T15:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804149467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> but rather about testing that unicode paths are properly supported on all supported platforms, isn't it? \r\n\r\nIf that is indeed the case, and there are codepaths not covered by fs_tests that are somehow covered by the existing test_runner, then I'm happy to change this to be parameterized by some `test_runner.py` flag.",
      "created_at" : "2021-03-22T15:51:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804177085",
      "id" : 804177085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDE3NzA4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T15:51:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804177085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> ... but rather about testing that unicode paths are properly supported on all supported platforms ...\r\n\r\nIt would be strange to hook tests in the _testing framework_ itself instead of having ordinary proper unit or functional tests that run with e.g. `-datadir=fooð£bar`.",
      "created_at" : "2021-03-22T15:56:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804180940",
      "id" : 804180940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDE4MDk0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T15:56:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804180940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The reason that the test framework path (and not the datadir) includes unicode is because wallet files can reside outside the datadir and we want to check that unicode is properly supported for them as well.\r\n\r\nI don't understand why this is causing so much trouble. Shouldn't autocomplete be able to skip over those chars anyway?\r\n\r\nIf you still want to make the changes here, it would be good to overwrite the tmpdirprefix for our ci system, so that at least all ci configs tests unicode paths. Otherwise I'd be less confident about changes like #20744 (which had several failures due to mishandling unicode).",
      "created_at" : "2021-03-22T18:33:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804297850",
      "id" : 804297850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDI5Nzg1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T18:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804297850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21502#discussion_r598978607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21502"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598978607"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might be a good time to use f-strings?",
      "commit_id" : "c5c57ef93708cf2a63ea37bc0aec4838a3beface",
      "created_at" : "2021-03-22T18:34:09Z",
      "diff_hunk" : "@@ -351,7 +351,8 @@ def main():\n     logging.basicConfig(format='%(message)s', level=logging_level)\n \n     # Create base test directory\n-    tmpdir = \"%s/test_runner_â¿_ð_%s\" % (args.tmpdirprefix, datetime.datetime.now().strftime(\"%Y%m%d_%H%M%S\"))\n+    tmpdir = \"%s/test_runner_bitcoincore_%s\" % (\n+        args.tmpdirprefix, datetime.datetime.now().strftime(\"%Y%m%d_%H%M%S\"))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#discussion_r598978607",
      "id" : 598978607,
      "line" : 355,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODk3ODYwNw==",
      "original_commit_id" : "c5c57ef93708cf2a63ea37bc0aec4838a3beface",
      "original_line" : 355,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_runner.py",
      "position" : 6,
      "pull_request_review_id" : 617860494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21502",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-22T18:34:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598978607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It would be strange to hook tests in the _testing framework_ itself instead of having ordinary proper unit or functional tests that run with e.g. `-datadir=fooð£bar`.\r\n\r\nI think Marco answered the question. Using unicode paths instead of ASCII paths is a form of test too and no one needs to write a specific test then for current and future needs - it is somewhat elegant. Anyway, if it were up to me I would have a default unicode path and to make life of @jamesob easier, I would try to add a way to modify that path so that James is happy with an ASCII path.\r\n\r\n> The unicode characters in the temporary test directory paths, while cute, cause inconvenience on remote systems which are not configured to display unicode over tty.\r\n\r\nbtw: Isn't it possible to configure it properly? I mean that would be an ideal solution. ",
      "created_at" : "2021-03-22T18:48:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804308033",
      "id" : 804308033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDMwODAzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T18:48:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804308033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Was able to get what I need with `find /tmp -name '*test_runner*' | grep ...`, then copy/paste. Auto completion fails given the primitive bash config.",
      "created_at" : "2021-03-22T18:52:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21502#issuecomment-804310466",
      "id" : 804310466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21502",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDMxMDQ2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T18:52:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804310466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   }
]
