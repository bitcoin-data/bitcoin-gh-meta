[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21992 (Feefilter cleanups by amadeuszpawlik)\n* #21879 (Wrap accept() and extend usage of Sock by vasild)\n* #21878 (Make all networking code mockable by vasild)\n* #21843 (p2p, rpc: enable GetAddr, GetAddresses, and getnodeaddresses by network by jonatack)\n* #20234 (net: don't extra bind for Tor if binds are restricted by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-22T22:57:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-804449681",
      "id" : 804449681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDQ0OTY4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-19T05:40:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804449681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Strong Concept ACK\r\n\r\n[`enum class` is strictly better :)](https://github.com/bitcoin/bitcoin/pull/19771#issuecomment-678733782)",
      "created_at" : "2021-03-23T16:03:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-805026604",
      "id" : 805026604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTAyNjYwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T16:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805026604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r599761948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599761948"
         }
      },
      "author_association" : "MEMBER",
      "body" : "meta: Could the rename be a scripted-diff?",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-23T17:01:19Z",
      "diff_hunk" : "@@ -968,7 +968,7 @@ bool CConnman::AttemptToEvictConnection()\n \n         LOCK(cs_vNodes);\n         for (const CNode* node : vNodes) {\n-            if (node->HasPermission(NetPermissionFlags::PF_NOBAN))\n+            if (node->HasPermission(NetPermissionFlags::NoBan))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r599761948",
      "id" : 599761948,
      "line" : 1002,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTc2MTk0OA==",
      "original_commit_id" : "98daee8f32de92f9521ebc29ce563987547d6e55",
      "original_line" : 1002,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 618848359,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599761948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600447225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600447225"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-24T12:51:13Z",
      "diff_hunk" : "@@ -968,7 +968,7 @@ bool CConnman::AttemptToEvictConnection()\n \n         LOCK(cs_vNodes);\n         for (const CNode* node : vNodes) {\n-            if (node->HasPermission(NetPermissionFlags::PF_NOBAN))\n+            if (node->HasPermission(NetPermissionFlags::NoBan))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600447225",
      "id" : 600447225,
      "in_reply_to_id" : 599761948,
      "line" : 1002,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDQ0NzIyNQ==",
      "original_commit_id" : "98daee8f32de92f9521ebc29ce563987547d6e55",
      "original_line" : 1002,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 619677894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600447225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600865647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600865647"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    BOOST_CHECK(!NetPermissions::HasAnyFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\r\n```\r\n?",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-24T20:52:16Z",
      "diff_hunk" : "@@ -381,41 +381,47 @@ BOOST_AUTO_TEST_CASE(netpermissions_test)\n     // If no permission flags, assume backward compatibility\n     BOOST_CHECK(NetWhitebindPermissions::TryParse(\"1.2.3.4:32\", whitebindPermissions, error));\n     BOOST_CHECK(error.empty());\n-    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n-    NetPermissions::ClearFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(!NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n-    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, PF_NONE);\n-    NetPermissions::AddFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n+    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, NetPermissionFlags::Implicit);\n+    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+    BOOST_CHECK(NetPermissions::HasAnyFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+\n+    NetPermissions::ClearFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit);\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+    BOOST_CHECK(!NetPermissions::HasAnyFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600865647",
      "id" : 600865647,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg2NTY0Nw==",
      "original_commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "original_line" : 390,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 620220805,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600865647",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600868886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600868886"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could you please explain what was the motivation to add `HasAnyFlag`? Your tests for `HasFlag` and `HasAnyFlag` seem to be the same, hence the question.",
      "commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "created_at" : "2021-03-24T20:57:48Z",
      "diff_hunk" : "@@ -14,46 +15,55 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b) {\n+    using t = typename std::underlying_type<NetPermissionFlags>::type;\n+    return static_cast<NetPermissionFlags>(static_cast<t>(a) | static_cast<t>(b));\n+}\n \n class NetPermissions\n {\n public:\n     NetPermissionFlags m_flags;\n     static std::vector<std::string> ToStrings(NetPermissionFlags flags);\n-    static inline bool HasFlag(const NetPermissionFlags& flags, NetPermissionFlags f)\n-    {\n-        return (flags & f) == f;\n+    static inline bool HasFlag(NetPermissionFlags flags, NetPermissionFlags f) {\n+        using t = typename std::underlying_type<NetPermissionFlags>::type;\n+        return (static_cast<t>(flags) & static_cast<t>(f)) == static_cast<t>(f);\n+    }\n+    static inline bool HasAnyFlag(NetPermissionFlags flags, NetPermissionFlags f) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600868886",
      "id" : 600868886,
      "line" : 55,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg2ODg4Ng==",
      "original_commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "original_line" : 55,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 63,
      "pull_request_review_id" : 620224963,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T20:57:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600868886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, nice change",
      "created_at" : "2021-03-24T21:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-806185541",
      "id" : 806185541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjE4NTU0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T21:05:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806185541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600891562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600891562"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe move this line one line below? So that it is clear how `HasFlag` and `HasAnyFlag` differ. ",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-24T21:38:21Z",
      "diff_hunk" : "@@ -427,14 +433,23 @@ BOOST_AUTO_TEST_CASE(netpermissions_test)\n \n     // Happy path for whitelist parsing\n     BOOST_CHECK(NetWhitelistPermissions::TryParse(\"noban@1.2.3.4\", whitelistPermissions, error));\n-    BOOST_CHECK_EQUAL(whitelistPermissions.m_flags, PF_NOBAN);\n+    BOOST_CHECK_EQUAL(whitelistPermissions.m_flags, NetPermissionFlags::NoBan);\n+    BOOST_CHECK(NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));\n+    BOOST_CHECK(NetPermissions::HasAnyFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));\n+\n+    NetPermissions::ClearFlag(whitelistPermissions.m_flags, NetPermissionFlags::Download);\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::Download));\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r600891562",
      "id" : 600891562,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDg5MTU2Mg==",
      "original_commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "original_line" : 442,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 620253351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600891562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r601556107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601556107"
         }
      },
      "author_association" : "MEMBER",
      "body" : "good eye, thanks! the compiler didn't mind but we do. fixed.",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-25T14:47:18Z",
      "diff_hunk" : "@@ -381,41 +381,47 @@ BOOST_AUTO_TEST_CASE(netpermissions_test)\n     // If no permission flags, assume backward compatibility\n     BOOST_CHECK(NetWhitebindPermissions::TryParse(\"1.2.3.4:32\", whitebindPermissions, error));\n     BOOST_CHECK(error.empty());\n-    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n-    NetPermissions::ClearFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(!NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n-    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, PF_NONE);\n-    NetPermissions::AddFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT);\n-    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, PF_ISIMPLICIT));\n+    BOOST_CHECK_EQUAL(whitebindPermissions.m_flags, NetPermissionFlags::Implicit);\n+    BOOST_CHECK(NetPermissions::HasFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+    BOOST_CHECK(NetPermissions::HasAnyFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+\n+    NetPermissions::ClearFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit);\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));\n+    BOOST_CHECK(!NetPermissions::HasAnyFlag(whitebindPermissions.m_flags, NetPermissionFlags::Implicit));;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r601556107",
      "id" : 601556107,
      "in_reply_to_id" : 600865647,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU1NjEwNw==",
      "original_commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "original_line" : 390,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 621206486,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601556107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r601556341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601556341"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sure, done",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-03-25T14:47:33Z",
      "diff_hunk" : "@@ -427,14 +433,23 @@ BOOST_AUTO_TEST_CASE(netpermissions_test)\n \n     // Happy path for whitelist parsing\n     BOOST_CHECK(NetWhitelistPermissions::TryParse(\"noban@1.2.3.4\", whitelistPermissions, error));\n-    BOOST_CHECK_EQUAL(whitelistPermissions.m_flags, PF_NOBAN);\n+    BOOST_CHECK_EQUAL(whitelistPermissions.m_flags, NetPermissionFlags::NoBan);\n+    BOOST_CHECK(NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));\n+    BOOST_CHECK(NetPermissions::HasAnyFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));\n+\n+    NetPermissions::ClearFlag(whitelistPermissions.m_flags, NetPermissionFlags::Download);\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::Download));\n+    BOOST_CHECK(!NetPermissions::HasFlag(whitelistPermissions.m_flags, NetPermissionFlags::NoBan));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r601556341",
      "id" : 601556341,
      "in_reply_to_id" : 600891562,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU1NjM0MQ==",
      "original_commit_id" : "02270a1ea4892ab66abe19e77946f6a55f5ae3b5",
      "original_line" : 442,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 621206791,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601556341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Could you please explain what was the motivation to add HasAnyFlag?\r\n\r\nThanks for the review @kiminuo! I extracted the `NetPermissions::HasAnyFlag()` addition to a separate commit with a detailed explanation in the commit message and updated with your other feedback.",
      "created_at" : "2021-03-25T15:22:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-806941459",
      "id" : 806941459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjk0MTQ1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-25T15:22:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806941459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-29T10:12:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-809257574",
      "id" : 809257574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTI1NzU3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T10:12:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809257574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2021-03-29T10:24:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-809265876",
      "id" : 809265876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTI2NTg3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T10:24:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809265876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-30T17:30:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-810443759",
      "id" : 810443759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDQ0Mzc1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T17:30:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810443759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2021-03-30T18:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-810485558",
      "id" : 810485558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDQ4NTU1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T18:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810485558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r605945239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605945239"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not `NetPermissions::HasFlag` ?",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-01T21:03:52Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r605945239",
      "id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTk0NTIzOQ==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 626647245,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605945239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r606248080"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606248080"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hm, the tests pass with `HasFlag()` but ISTM that would represent a potential change in behavior in a refactoring pull, as `HasFlag()` returns `(flags & f) == f` instead of `flags & f` and `NetPermissionFlags::NoBan` is a multi-flag (`NoBan = (1U << 4) | Download`). LMK if I'm confused here though.\r\n\r\nAside, this line was last changed in commit bb145c90502:\r\n```diff\r\n-    if (addr.IsRoutable() && fDiscover && (permissions & PF_NOBAN) == 0) {\r\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\r\n```\r\n",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-02T13:55:31Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r606248080",
      "id" : 606248080,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjI0ODA4MA==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 626996639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606248080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The first commit \"p2p, refactor: add NetPermissionFlags scopes where not already present\" could be a scripted-diff:\r\n> \r\n> ```shell\r\n> s() { git grep -l \"$1\" -- 'src' ':!src/net_permissions.h' | xargs sed -i -E \"s/([^:])$1/\\1NetPermissionFlags::$1/\"; }\r\n\r\nThanks! That's a co-credit :) Done in 043a4c5163909d0.\r\n",
      "created_at" : "2021-04-02T13:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-812542044",
      "id" : 812542044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjU0MjA0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-02T13:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812542044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r606878743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606878743"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You are right. Your change is equivalent to the current code. But this raises additional questions:\r\n\r\n1. current tests are not reliable if they\r\n> pass with `HasFlag()`\r\n\r\n2. `HasAnyFlag(permissions, flag_a | flag_b)` is much easier to read and reason about than `HasAnyFlag(permissions, fancy_multiflag)`\r\n\r\n3. in general, with named multiflags, negation of `HasFlag` could have ambiguous meaning. Does this code do what it is supposed to do in all cases: https://github.com/bitcoin/bitcoin/blob/590e49ccf2af27c6c1f1e0eb8be3a4bf4d92ce8b/src/net.cpp#L1110-L1117 ?",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-05T01:17:41Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r606878743",
      "id" : 606878743,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjg3ODc0Mw==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 627589470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606878743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609708573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609708573"
         }
      },
      "author_association" : "MEMBER",
      "body" : "After looking at #16248 and #19191, the current code seems correct.\r\n\r\nThis line was changed in e5b26deaaa6, which pre-dates the download permission being extracted from noban in #19191: \r\n```diff \r\n-    if (addrBind.IsRoutable() && fDiscover && !fWhitelisted)\r\n+    if (addrBind.IsRoutable() && fDiscover && (permissions & PF_NOBAN) == 0)\r\n```\r\nThe intent of adding the Download flag in #19191 was: *\"It should be possible to grant nodes in a local network (e.g. home, university, enterprise, ...) permission to download blocks even after the maxuploadtarget is hit. Currently this is only possible by setting the noban permission, which has some adverse effects, especially if the peers can't be fully trusted. Fix this by extracting a download permission from noban.\"*\r\n\r\nSo, in reply to your questions:\r\n\r\n1. (If I understand correctly) the existing lone bitwise AND here, e.g. `HasAnyFlag(Noban)` is correct (but the precise behavior is not covered by tests)\r\n\r\n2. I guess we could replace `HasAnyFlag(Noban)` with the more verbose `HasFlag(Noban) || HasFlag(Download)` if that seems clearer\r\n\r\n3. Elsewhere, `HasFlag()` appears to be what we want in the cases where it is used, AFAICT\r\n",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-08T13:36:13Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609708573",
      "id" : 609708573,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTcwODU3Mw==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 631403381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609708573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609755453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609755453"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ugh, looks like this is a bug that I introduced in #19191\r\n\r\n(The `download` permission set shouldn't affect places where `noban` is checked for)",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-08T14:21:54Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609755453",
      "id" : 609755453,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTc1NTQ1Mw==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 631458623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609755453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609766590"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609766590"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I first thought that too, but here in Bind() I'm not sure. Confirm that HasFlag(NoBan) is fine here?",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-08T14:32:11Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609766590",
      "id" : 609766590,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTc2NjU5MA==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 631471302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609766590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609780989"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609780989"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Well, fixing a bug should indeed be done in a separate pull from one that is tagged with [refactoring]",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-08T14:45:55Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609780989",
      "id" : 609780989,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTc4MDk4OQ==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 631488306,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609780989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609899271"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609899271"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok will open a separate patch for that.",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-08T16:49:40Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r609899271",
      "id" : 609899271,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTg5OTI3MQ==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 631624636,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609899271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r610871119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610871119"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done in #21644. Resolving here and will simplify this PR, dropping the `HasAnyFlags()` and unit test commits.",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-09T19:50:58Z",
      "diff_hunk" : "@@ -2410,7 +2414,7 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         return false;\n     }\n \n-    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !(permissions & PF_NOBAN)) {\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && !NetPermissions::HasAnyFlag(permissions, NetPermissionFlags::NoBan)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r610871119",
      "id" : 610871119,
      "in_reply_to_id" : 605945239,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDg3MTExOQ==",
      "original_commit_id" : "fa73a18ad874cc076a9201678ff25686766c24d0",
      "original_line" : 2413,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 632741170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-10T11:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610871119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Simplified, dropped the `HasAnyFlag()` and test commits that are replaced by the bugfix in #21644 on which this patch is now based, and updated the PR description. ",
      "created_at" : "2021-04-10T11:35:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-817122255",
      "id" : 817122255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNzEyMjI1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-13T18:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/817122255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is still the following \"strange\" behavior:\r\n\r\n```cpp\r\n// expected to have \"noban\" and \"download\" in flags, true\r\nflags = TryParse(\"noban,download\");\r\n\r\n// expected to have just \"noban\" in flags, given that \"download\" has been removed, not true :(\r\nClearFlag(flags, PF_DOWNLOAD);\r\n\r\n// what happens actually is that now flags is in a \"bricked\" state\r\n// where it does not equal any of the PF_* flags or a bitwise-OR of them.\r\n```\r\n\r\nCould it be avoided to have the download flag included in the noban flag (i.e. to have each PF_* flag have exactly one bit set) and https://github.com/bitcoin/bitcoin/pull/19191 resolved in some other way?",
      "created_at" : "2021-04-14T08:42:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-819344916",
      "id" : 819344916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxOTM0NDkxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-14T08:42:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/819344916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't disagree, though it might be out of scope for this change (which has indeed exposed some issues!)\r\n\r\n`ClearFlag` is currently only used in `src/net.cpp::CConnman::CreateNodeFromAcceptedSocket()` to clear the NetPermissionFlags implicit flag.\r\n\r\nEdit: addressed for now in #21644.",
      "created_at" : "2021-04-14T08:54:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-819352958",
      "id" : 819352958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxOTM1Mjk1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T15:05:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/819352958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r613160043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613160043"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: the opening `{` should be on a new line",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-14T11:21:19Z",
      "diff_hunk" : "@@ -14,46 +15,51 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r613160043",
      "id" : 613160043,
      "line" : 41,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE2MDA0Mw==",
      "original_commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "original_line" : 41,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 46,
      "pull_request_review_id" : 635502679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-14T11:30:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613160043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r613160393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613160393"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: the opening `{` should be on a new line",
      "commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "created_at" : "2021-04-14T11:22:02Z",
      "diff_hunk" : "@@ -14,46 +15,51 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b) {\n+    using t = typename std::underlying_type<NetPermissionFlags>::type;\n+    return static_cast<NetPermissionFlags>(static_cast<t>(a) | static_cast<t>(b));\n+}\n \n class NetPermissions\n {\n public:\n     NetPermissionFlags m_flags;\n     static std::vector<std::string> ToStrings(NetPermissionFlags flags);\n-    static inline bool HasFlag(const NetPermissionFlags& flags, NetPermissionFlags f)\n-    {\n-        return (flags & f) == f;\n+    static inline bool HasFlag(NetPermissionFlags flags, NetPermissionFlags f) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r613160393",
      "id" : 613160393,
      "line" : 51,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzE2MDM5Mw==",
      "original_commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "original_line" : 51,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 59,
      "pull_request_review_id" : 635502679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-14T11:30:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613160393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @vasild! Will update along with the bracket syntax suggestions once #21644 is sorted out.",
      "created_at" : "2021-04-18T15:03:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-822005786",
      "id" : 822005786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAwNTc4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T15:03:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822005786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\nðµï¸ @sipa has been requested to review this pull request as specified in the REVIEWERS file.",
      "created_at" : "2021-05-03T09:33:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-831142194",
      "id" : 831142194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMTE0MjE5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-03T09:33:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks everyone for the ACKs but this isn't being merged and I am tying up loose ends before being less present here for some seminars.",
      "created_at" : "2021-05-11T10:18:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-838218040",
      "id" : 838218040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzODIxODA0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T09:13:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/838218040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Mark up for grabs?",
      "created_at" : "2021-05-11T22:57:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-839259402",
      "id" : 839259402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTI1OTQwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-11T22:57:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839259402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r630866146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630866146"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T09:10:16Z",
      "diff_hunk" : "@@ -14,46 +15,51 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r630866146",
      "id" : 630866146,
      "in_reply_to_id" : 613160043,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDg2NjE0Ng==",
      "original_commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "original_line" : 41,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : null,
      "pull_request_review_id" : 657648752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T09:10:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630866146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r630866290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630866290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done, thanks!",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T09:10:30Z",
      "diff_hunk" : "@@ -14,46 +15,51 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b) {\n+    using t = typename std::underlying_type<NetPermissionFlags>::type;\n+    return static_cast<NetPermissionFlags>(static_cast<t>(a) | static_cast<t>(b));\n+}\n \n class NetPermissions\n {\n public:\n     NetPermissionFlags m_flags;\n     static std::vector<std::string> ToStrings(NetPermissionFlags flags);\n-    static inline bool HasFlag(const NetPermissionFlags& flags, NetPermissionFlags f)\n-    {\n-        return (flags & f) == f;\n+    static inline bool HasFlag(NetPermissionFlags flags, NetPermissionFlags f) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r630866290",
      "id" : 630866290,
      "in_reply_to_id" : 613160393,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDg2NjI5MA==",
      "original_commit_id" : "24b294ac7519d6989d9746edd9e6643a4adbe88a",
      "original_line" : 51,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : null,
      "pull_request_review_id" : 657648984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T09:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630866290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-opening and rebased now that #21644, that this is based on, was merged.",
      "created_at" : "2021-05-12T09:12:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-839607575",
      "id" : 839607575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTYwNzU3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T09:12:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839607575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631022134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631022134"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nice! Why not do this for `&` as well?\r\n(More generally, I wonder if there is a nice way in C++ to define a reusable metatype that is 'enum with bitfield properties'âit seems that this is more generally useful. Not necessarily in this PR though.)",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T13:05:35Z",
      "diff_hunk" : "@@ -14,52 +15,59 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631022134",
      "id" : 631022134,
      "line" : 41,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTAyMjEzNA==",
      "original_commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "original_line" : 41,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 46,
      "pull_request_review_id" : 657859146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T13:08:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631022134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631022611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631022611"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: unnecessary parenthesis",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T13:06:14Z",
      "diff_hunk" : "@@ -14,52 +15,59 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b)\n+{\n+    using t = typename std::underlying_type<NetPermissionFlags>::type;\n+    return static_cast<NetPermissionFlags>(static_cast<t>(a) | static_cast<t>(b));\n+}\n \n class NetPermissions\n {\n public:\n     NetPermissionFlags m_flags;\n     static std::vector<std::string> ToStrings(NetPermissionFlags flags);\n-    static inline bool HasFlag(const NetPermissionFlags& flags, NetPermissionFlags f)\n+    static inline bool HasFlag(NetPermissionFlags flags, NetPermissionFlags f)\n     {\n-        return (flags & f) == f;\n+        using t = typename std::underlying_type<NetPermissionFlags>::type;\n+        return (static_cast<t>(flags) & static_cast<t>(f)) == static_cast<t>(f);\n     }\n     static inline void AddFlag(NetPermissionFlags& flags, NetPermissionFlags f)\n     {\n-        flags = static_cast<NetPermissionFlags>(flags | f);\n+        flags = (flags | f);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631022611",
      "id" : 631022611,
      "line" : 59,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTAyMjYxMQ==",
      "original_commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "original_line" : 59,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 67,
      "pull_request_review_id" : 657859825,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T13:06:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631022611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631025917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631025917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the goal of this pull is to forbid the `&` operator, because it won't do what you think it does. (See the preceding bugfix)",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T13:10:22Z",
      "diff_hunk" : "@@ -14,52 +15,59 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631025917",
      "id" : 631025917,
      "in_reply_to_id" : 631022134,
      "line" : 41,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTAyNTkxNw==",
      "original_commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "original_line" : 41,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 46,
      "pull_request_review_id" : 657864431,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T13:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631025917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631026830"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631026830"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That is, callers should use `HasFlag` instead of `&`.",
      "commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T13:11:30Z",
      "diff_hunk" : "@@ -14,52 +15,59 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631026830",
      "id" : 631026830,
      "in_reply_to_id" : 631022134,
      "line" : 41,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTAyNjgzMA==",
      "original_commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "original_line" : 41,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : 46,
      "pull_request_review_id" : 657865692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T13:11:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631026830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cr ACK d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "created_at" : "2021-05-12T13:13:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-839762436",
      "id" : 839762436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTc2MjQzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T13:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839762436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > drop ALL_CAPS naming per https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Renum-caps\r\n\r\nYes--was wondering if we should update the enum example in our developer notes.\r\n",
      "created_at" : "2021-05-12T13:42:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-839782732",
      "id" : 839782732,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTc4MjczMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T13:42:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839782732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631081923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631081923"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "7075f604e8d0b21b2255fa57e20cd365dc10a288",
      "created_at" : "2021-05-12T14:14:57Z",
      "diff_hunk" : "@@ -14,52 +15,59 @@ struct bilingual_str;\n \n extern const std::vector<std::string> NET_PERMISSIONS_DOC;\n \n-enum NetPermissionFlags {\n-    PF_NONE = 0,\n+enum class NetPermissionFlags : uint32_t {\n+    None = 0,\n     // Can query bloomfilter even if -peerbloomfilters is false\n-    PF_BLOOMFILTER = (1U << 1),\n+    BloomFilter = (1U << 1),\n     // Relay and accept transactions from this peer, even if -blocksonly is true\n     // This peer is also not subject to limits on how many transaction INVs are tracked\n-    PF_RELAY = (1U << 3),\n+    Relay = (1U << 3),\n     // Always relay transactions from this peer, even if already in mempool\n     // Keep parameter interaction: forcerelay implies relay\n-    PF_FORCERELAY = (1U << 2) | PF_RELAY,\n+    ForceRelay = (1U << 2) | Relay,\n     // Allow getheaders during IBD and block-download after maxuploadtarget limit\n-    PF_DOWNLOAD = (1U << 6),\n+    Download = (1U << 6),\n     // Can't be banned/disconnected/discouraged for misbehavior\n-    PF_NOBAN = (1U << 4) | PF_DOWNLOAD,\n+    NoBan = (1U << 4) | Download,\n     // Can query the mempool\n-    PF_MEMPOOL = (1U << 5),\n+    Mempool = (1U << 5),\n     // Can request addrs without hitting a privacy-preserving cache\n-    PF_ADDR = (1U << 7),\n+    Addr = (1U << 7),\n \n     // True if the user did not specifically set fine grained permissions\n-    PF_ISIMPLICIT = (1U << 31),\n-    PF_ALL = PF_BLOOMFILTER | PF_FORCERELAY | PF_RELAY | PF_NOBAN | PF_MEMPOOL | PF_DOWNLOAD | PF_ADDR,\n+    Implicit = (1U << 31),\n+    All = BloomFilter | ForceRelay | Relay | NoBan | Mempool | Download | Addr,\n };\n+static inline constexpr NetPermissionFlags operator|(NetPermissionFlags a, NetPermissionFlags b)\n+{\n+    using t = typename std::underlying_type<NetPermissionFlags>::type;\n+    return static_cast<NetPermissionFlags>(static_cast<t>(a) | static_cast<t>(b));\n+}\n \n class NetPermissions\n {\n public:\n     NetPermissionFlags m_flags;\n     static std::vector<std::string> ToStrings(NetPermissionFlags flags);\n-    static inline bool HasFlag(const NetPermissionFlags& flags, NetPermissionFlags f)\n+    static inline bool HasFlag(NetPermissionFlags flags, NetPermissionFlags f)\n     {\n-        return (flags & f) == f;\n+        using t = typename std::underlying_type<NetPermissionFlags>::type;\n+        return (static_cast<t>(flags) & static_cast<t>(f)) == static_cast<t>(f);\n     }\n     static inline void AddFlag(NetPermissionFlags& flags, NetPermissionFlags f)\n     {\n-        flags = static_cast<NetPermissionFlags>(flags | f);\n+        flags = (flags | f);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#discussion_r631081923",
      "id" : 631081923,
      "in_reply_to_id" : 631022611,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTA4MTkyMw==",
      "original_commit_id" : "d53c70e775e56c4e4c30728262121c9f7e4bcc23",
      "original_line" : 59,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/net_permissions.h",
      "position" : null,
      "pull_request_review_id" : 657941920,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21506",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-12T14:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/631081923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Dropped unneeded parentheses, only change is `git diff d53c70e 7075f60`\r\n```diff\r\ndiff --git a/src/net_permissions.h b/src/net_permissions.h\r\nindex 9cb59bd85f..7a158aa6c5 100644\r\n--- a/src/net_permissions.h\r\n+++ b/src/net_permissions.h\r\n@@ -56,7 +56,7 @@ public:\r\n     }\r\n     static inline void AddFlag(NetPermissionFlags& flags, NetPermissionFlags f)\r\n     {\r\n-        flags = (flags | f);\r\n+        flags = flags | f;\r\n     }\r\n```\r\n",
      "created_at" : "2021-05-12T14:16:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-839809407",
      "id" : 839809407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTgwOTQwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T14:16:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839809407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 7075f604e8d0b21b2255fa57e20cd365dc10a288",
      "created_at" : "2021-05-19T09:51:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21506#issuecomment-843940327",
      "id" : 843940327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21506",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0Mzk0MDMyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-19T09:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/843940327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
