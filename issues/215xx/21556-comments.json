[
   {
      "author_association" : "MEMBER",
      "body" : "You need to provide more information. Which dependencies did you update / upgrade (bdb)? Are you building the v0.20.1 tag,  or the `0.20` branch? Which version of macOS are you building/running on? In fact, could you just supply all of the information that was asked for in the issue template.",
      "created_at" : "2021-03-31T06:59:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-810824871",
      "id" : 810824871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDgyNDg3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T06:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810824871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I am with macOS Catalina, Version 10.15.7\r\n\r\n```\r\n$ uname -a\r\nDarwin isidoros-MacBook-Pro.local 19.6.0 Darwin Kernel Version 19.6.0: Tue Jan 12 22:13:05 PST 2021; root:xnu-6153.141.16~1/RELEASE_X86_64 x86_64\r\n```\r\n\r\n```\r\n$ g++ --version\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 12.0.0 (clang-1200.0.32.29)\r\nTarget: x86_64-apple-darwin19.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\nXcode: `Version 12.4 (12D4e)`\r\n\r\nBitcoin:\r\n* tag: `v0.20.1`\r\n* commit: `7ff64311bee570874c4f0dfa18f518552188df08`\r\n\r\n```\r\n$ make distclean\r\n$ ./autogen.sh\r\n$ ./configure --without-gui --enable-debug\r\nâ¦\r\nOptions used to compile and link:\r\n  with wallet   = yes\r\n  with gui / qt = no\r\n  with zmq      = yes\r\n  with test     = yes\r\n    with fuzz   = no\r\n  with bench    = yes\r\n  with upnp     = yes\r\n  use asm       = yes\r\n  sanitizers    = \r\n  debug enabled = yes\r\n  gprof enabled = no\r\n  werror        = no\r\n\r\n  target os     = darwin\r\n  build os      = darwin19.6.0\r\n\r\n  CC            = gcc\r\n  CFLAGS        = -g -O2\r\n  CPPFLAGS      =  -DDEBUG -DDEBUG_LOCKORDER   -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS -I/usr/local/opt/berkeley-db@4/include -DMAC_OSX -DOBJC_OLD_DISPATCH_PROTOTYPES=0\r\n  CXX           = g++ -std=c++11\r\n  CXXFLAGS      =  -O0 -g3 -ftrapv  -Wstack-protector -fstack-protector-all  -Wall -Wextra -Wformat -Wvla -Wswitch -Wformat-security -Wthread-safety-analysis -Wrange-loop-analysis -Wredundant-decls -Wunused-variable -Wdate-time  -Wno-unused-parameter -Wno-self-assign -Wno-unused-local-typedef -Wno-deprecated-register -Wno-implicit-fallthrough   \r\n  LDFLAGS       = -pthread  -Wl,-bind_at_load   -Wl,-headerpad_max_install_names -Wl,-dead_strip -Wl,-dead_strip_dylibs\r\n  ARFLAGS       = cr\r\n\r\n$ make\r\n$ cd src\r\n$ ./bitcoind\r\n2021-03-31T19:37:21Z Bitcoin Core version v0.20.1 (debug build)\r\n2021-03-31T19:37:21Z Assuming ancestors of block 0000000000000000000f2adce67e49b0b6bdeb9de8b7c3d7e93b21e7fc1e819d have valid signatures.\r\n2021-03-31T19:37:21Z Setting nMinimumChainWork=00000000000000000000000000000000000000000e1ab5ec9348e9f4b8eb8154\r\n2021-03-31T19:37:21Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\n2021-03-31T19:37:21Z Using RdRand as an additional entropy source\r\n2021-03-31T19:37:21Z Default data directory /Users/isghe/Library/Application Support/Bitcoin\r\n2021-03-31T19:37:21Z Using data directory /Users/isghe/Library/Application Support/Bitcoin\r\n2021-03-31T19:37:21Z Config file: /Users/isghe/Library/Application Support/Bitcoin/bitcoin.conf (not found, skipping)\r\n2021-03-31T19:37:21Z Using at most 125 automatic connections (283 file descriptors available)\r\n2021-03-31T19:37:21Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2021-03-31T19:37:21Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2021-03-31T19:37:21Z Script verification uses 7 additional threads\r\n2021-03-31T19:37:21Z scheduler thread start\r\n2021-03-31T19:37:21Z HTTP: creating work queue of depth 16\r\n2021-03-31T19:37:21Z No rpcpassword set - using random cookie authentication.\r\n2021-03-31T19:37:21Z Generated RPC authentication cookie /Users/isghe/Library/Application Support/Bitcoin/.cookie\r\n2021-03-31T19:37:21Z HTTP: starting 4 worker threads\r\n2021-03-31T19:37:21Z Using wallet directory /Users/isghe/Library/Application Support/Bitcoin/wallets\r\n2021-03-31T19:37:21Z init message: Verifying wallet(s)...\r\n2021-03-31T19:37:21Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2021-03-31T19:37:21Z Using wallet /Users/isghe/Library/Application Support/Bitcoin/wallets\r\n2021-03-31T19:37:21Z BerkeleyEnvironment::Open: LogDir=/Users/isghe/Library/Application Support/Bitcoin/wallets/database ErrorFile=/Users/isghe/Library/Application Support/Bitcoin/wallets/db.log\r\nSegmentation fault: 11\r\n```\r\n\r\nI never had this kind of problem.\r\nAnd I am runninq bitcoind on my Mac since 2013, always with the datadir in an USB external HD.\r\n\r\nThe point is, it looks like \"brew update\", or some other update in Xcode broke something.\r\n\r\nIt would be interesting to understand if someone else, in my analogous configuration, has the same problem or not.\r\n\r\nThanks,\r\nIsidoro\r\n",
      "created_at" : "2021-03-31T18:53:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811343186",
      "id" : 811343186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTM0MzE4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T19:38:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811343186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If you suspect your recent `brew update` to have caused this issue, try running `brew list -lt`. It prints a list of formulae and casks, including their modification date. Which formulae have been updated during last update and does reverting them (if they are even related to Bitcoin) helps?",
      "created_at" : "2021-03-31T20:00:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811411524",
      "id" : 811411524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTQxMTUyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T20:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811411524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/46975855?v=4",
         "events_url" : "https://api.github.com/users/n-thumann/events{/privacy}",
         "followers_url" : "https://api.github.com/users/n-thumann/followers",
         "following_url" : "https://api.github.com/users/n-thumann/following{/other_user}",
         "gists_url" : "https://api.github.com/users/n-thumann/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/n-thumann",
         "id" : 46975855,
         "login" : "n-thumann",
         "node_id" : "MDQ6VXNlcjQ2OTc1ODU1",
         "organizations_url" : "https://api.github.com/users/n-thumann/orgs",
         "received_events_url" : "https://api.github.com/users/n-thumann/received_events",
         "repos_url" : "https://api.github.com/users/n-thumann/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/n-thumann/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/n-thumann"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "SOLVED! (soon the details)",
      "created_at" : "2021-03-31T20:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811422040",
      "id" : 811422040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTQyMjA0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T20:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811422040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The problem was \"Berkeley DB 4.8.30\". So I uninstalled it with:\r\n\r\n```shell\r\n$ brew uninstall berkeley-db@4\r\n```\r\n\r\nand I followed the instructions in https://github.com/bitcoin/bitcoin/issues/19411\r\nwith @fanquake's workaround:\r\n\r\n```shell\r\nCFLAGS=\"-Wno-error=implicit-function-declaration\"  ./contrib/install_db4.sh .\r\n```\r\n\r\nso I configured bitcoin, with suggested in the output of `./contrib/install_db4.sh`\r\n\r\n```\r\nWhen compiling bitcoind, run `./configure` in the following way:\r\n\r\n  export BDB_PREFIX='/Users/isghe/development/cryptocoin/bitcoin/db4'\r\n  ./configure BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" ...\r\n```\r\n\r\nso, in my case:\r\n\r\n```shell\r\n$ export BDB_PREFIX='/Users/isghe/development/cryptocoin/bitcoin/db4'\r\n$ ./configure BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" --without-gui --enable-debug\r\n```\r\n\r\nand now bitcoin is alive again ;-)\r\n\r\nThanks, Isidoro\r\n",
      "created_at" : "2021-03-31T20:23:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811437715",
      "id" : 811437715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTQzNzcxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T20:31:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811437715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "however, just a clarification (very small detail):\r\ndespite uninstalling \"Berkeley DB 4.8.30\" in \"brew\", after configuration, it is shown in CPPFLAGS:\r\n```\r\n-I/usr/local/opt/berkeley-db@4/include\r\n```\r\nbut now, on my mac, I no longer have the `/usr/local/opt/berkeley-db@4/` folder\r\n\r\nSo it's a small bug on configurator\r\n\r\n:-p\r\n",
      "created_at" : "2021-03-31T20:46:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811454086",
      "id" : 811454086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTQ1NDA4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T20:48:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811454086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "from my point of view, the problem is SOLVED.\r\nmaybe we need to emphasize this solution in `doc/build-osx.md`\r\nThanks,\r\nIsidoro",
      "created_at" : "2021-03-31T22:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21556#issuecomment-811506426",
      "id" : 811506426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMTUwNjQyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-31T22:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811506426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   }
]
