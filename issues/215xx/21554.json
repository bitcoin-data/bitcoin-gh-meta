{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "\r\n\r\n<!-- Describe the issue -->\r\nGetting \"out of memory\" error during initial sync.\r\n\r\n<!--- What behavior did you expect? -->\r\nTo not get an out of memory error\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\nGot an out of memory error\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\nHappens every time\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\nMaster branch pulled March 29, 2021.\r\nCompiled on Windows 10 64 bit using Visual Studio 2019.\r\nPC has 48GB of RAM and 1TB of free space on drive used by BTC.\r\nRan in both debug and release mode - same issue.\r\nIn debug mode there is no assertion, application just exits.\r\nI can restart and the chain will build again then fail after a couple hours.\r\nRunning with command line option -dbcache=16384\r\nAlso tried -dbcache=8192, same issue\r\nIf I run without -dbcache it seems to work (although didn't wait the whole 18 hours to build entire chain)\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nSee above\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\nNot GUI related\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n\r\nConsole log prior to error...\r\n\r\n2021-03-30T18:37:22Z UpdateTip: new best=0000000000000001e8f6b27e3b62f267084f38a4d5403d69834aa3343fea651a height=282642 version=0x00000002 log2_work=76.074504 tx=31728000 date='2014-01-27T02:05:56Z' progress=0.050509 cache=608.9MiB(5398004txo)\r\n2021-03-30T18:38:05Z UpdateTip: new best=000000000000000087b15e077fd569625cd9c477ef9afc539c45c01ead1e55c8 height=282800 version=0x00000002 log2_work=76.101250 tx=31786000 date='2014-01-27T23:30:17Z' progress=0.050601 cache=614.9MiB(5454255txo)\r\n2021-03-30T18:43:09Z UpdateTip: new best=0000000000000001438931934118d2772deb56efc7be190deb38cc72de267c0a height=284014 version=0x00000002 log2_work=76.291719 tx=32194000 date='2014-02-03T21:29:48Z' progress=0.051250 cache=640.6MiB(5694152txo)\r\n2021-03-30T18:51:28Z UpdateTip: new best=0000000000000000eeea130a6418dc2538690945ab676669c10e569ec5739214 height=285669 version=0x00000002 log2_work=76.550758 tx=32851000 date='2014-02-13T20:29:35Z' progress=0.052296 cache=664.5MiB(5917370txo)\r\n2021-03-30T18:52:20Z UpdateTip: new best=0000000000000001597f7836afd8544c4dc8579f80df1255188d4c4d53d842c0 height=285844 version=0x00000002 log2_work=76.576214 tx=32919000 date='2014-02-14T18:08:25Z' progress=0.052404 cache=666.9MiB(5939396txo)\r\n2021-03-30T18:55:52Z UpdateTip: new best=00000000000000014ac899e0228af437a9752242e7369054877b9bdcd62dc61f height=286636 version=0x00000002 log2_work=76.695542 tx=33198000 date='2014-02-19T05:35:45Z' progress=0.052848 cache=680.5MiB(6065783txo)\r\n2021-03-30T18:57:53Z UpdateTip: new best=00000000000000011eec266001c88f675a3bce478f9525188479b11d02632b95 height=287029 version=0x00000002 log2_work=76.756517 tx=33354000 date='2014-02-21T10:23:07Z' progress=0.053097 cache=687.1MiB(6127357txo)\r\n2021-03-30T19:04:03Z UpdateTip: new best=0000000000000000d5b08fc230ba956a1b0ce35b8a0ee31240e00c92b123589c height=288247 version=0x00000002 log2_work=76.930614 tx=33834000 date='2014-02-28T08:46:47Z' progress=0.053861 cache=711.4MiB(6354539txo)\r\n2021-03-30T19:39:47Z UpdateTip: new best=00000000000000008cdb96a355676dd4cfe4ade7b43707a24be9f44bf14804eb height=295162 version=0x00000002 log2_work=77.887140 tx=36612000 date='2014-04-10T21:45:32Z' progress=0.058282 cache=827.9MiB(7441671txo)\r\n2021-03-30T19:46:06Z UpdateTip: new best=000000000000000040fca501bf00bb045fec41d78bfad8c6b6c2bda19336b9cd height=296473 version=0x00000002 log2_work=78.056940 tx=37089000 date='2014-04-18T13:20:23Z' progress=0.059042 cache=843.0MiB(7581096txo)\r\n2021-03-30T19:51:55Z UpdateTip: new best=000000000000000096cc1c97fb30bce419c4ca56fbdd1589a4eda7accef9d75d height=297632 version=0x00000002 log2_work=78.208146 tx=37541000 date='2014-04-25T13:36:24Z' progress=0.059761 cache=863.7MiB(7774188txo)\r\n2021-03-30T19:53:33Z Error: Out of memory. Terminating.",
   "closed_at" : "2021-04-04T20:04:28Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/81651363?v=4",
      "events_url" : "https://api.github.com/users/dynamo-foundation/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dynamo-foundation/followers",
      "following_url" : "https://api.github.com/users/dynamo-foundation/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dynamo-foundation/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dynamo-foundation",
      "id" : 81651363,
      "login" : "dynamo-foundation",
      "node_id" : "MDQ6VXNlcjgxNjUxMzYz",
      "organizations_url" : "https://api.github.com/users/dynamo-foundation/orgs",
      "received_events_url" : "https://api.github.com/users/dynamo-foundation/received_events",
      "repos_url" : "https://api.github.com/users/dynamo-foundation/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dynamo-foundation/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dynamo-foundation/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dynamo-foundation"
   },
   "comments" : 18,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21554/comments",
   "created_at" : "2021-03-30T20:29:22Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21554/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/21554",
   "id" : 845211191,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "fbca04",
         "default" : false,
         "description" : null,
         "id" : 97470796,
         "name" : "UTXO Db and Indexes",
         "node_id" : "MDU6TGFiZWw5NzQ3MDc5Ng==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes"
      },
      {
         "color" : "884400",
         "default" : false,
         "description" : null,
         "id" : 234877,
         "name" : "Windows",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21554/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU4NDUyMTExOTE=",
   "number" : 21554,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Out of memory error, but there's plenty of free ram and disk space",
   "updated_at" : "2021-04-04T20:10:41Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21554",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/81651363?v=4",
      "events_url" : "https://api.github.com/users/dynamo-foundation/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dynamo-foundation/followers",
      "following_url" : "https://api.github.com/users/dynamo-foundation/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dynamo-foundation/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dynamo-foundation",
      "id" : 81651363,
      "login" : "dynamo-foundation",
      "node_id" : "MDQ6VXNlcjgxNjUxMzYz",
      "organizations_url" : "https://api.github.com/users/dynamo-foundation/orgs",
      "received_events_url" : "https://api.github.com/users/dynamo-foundation/received_events",
      "repos_url" : "https://api.github.com/users/dynamo-foundation/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dynamo-foundation/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dynamo-foundation/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dynamo-foundation"
   }
}
