[
   {
      "author_association" : "MEMBER",
      "body" : "I'm not tremendously excited by this approach of overloading `bumpfee`. But it also seems wrong to use `psbtbumpfee` here for the simple case of a single signer that has all the required keys. I could add yet another RPC method `signerbumpfee`?\r\n\r\ncc @achow101 @instagibbs ",
      "created_at" : "2021-04-02T18:39:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-812659510",
      "id" : 812659510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjY1OTUxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-27T07:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812659510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/21576#pullrequestreview-996016837), [achow101](https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1353715983) |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/21576#pullrequestreview-743327132) |\n| Approach ACK | [jarolrod](https://github.com/bitcoin/bitcoin/pull/21576#pullrequestreview-1141829737) |\n| Stale ACK | [meshcollider](https://github.com/bitcoin/bitcoin/pull/21576#pullrequestreview-672587554) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2021-04-03T01:22:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-812772264",
      "id" : 812772264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjc3MjI2NA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812772264/reactions"
      },
      "updated_at" : "2022-12-15T21:15:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812772264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044198"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044198"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `asked sign` -> `asked to sign`",
      "commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "created_at" : "2021-05-30T08:56:38Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044198",
      "id" : 642044198,
      "line" : 3529,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDE5OA==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3529,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 25,
      "pull_request_review_id" : 671807247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-30T09:00:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044302"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style nit: would be good to include the usual `/* sign */` etc. comments for the bools here.",
      "commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "created_at" : "2021-05-30T08:57:31Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044302",
      "id" : 642044302,
      "line" : 3532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDMwMg==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3532,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 28,
      "pull_request_review_id" : 671807247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-30T09:00:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044407"
         }
      },
      "author_association" : "MEMBER",
      "body" : "redefinition of `mtx`?",
      "commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "created_at" : "2021-05-30T08:58:44Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true, false);\n+            if (err != TransactionError::OK) {\n+                throw JSONRPCTransactionError(err);\n+            }\n \n-        result.pushKV(\"txid\", txid.GetHex());\n+            CMutableTransaction mtx;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044407",
      "id" : 642044407,
      "line" : 3537,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDQwNw==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3537,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 34,
      "pull_request_review_id" : 671807247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-30T09:00:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642045233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642045233"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do the merged changes in #22021 need to be updated with this pull?",
      "commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "created_at" : "2021-05-30T09:06:41Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642045233",
      "id" : 642045233,
      "line" : 3522,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NTIzMw==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3522,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 11,
      "pull_request_review_id" : 671808035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-30T09:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642045233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642506086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642506086"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'll do a rebase and also address the nits above.",
      "commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "created_at" : "2021-05-31T13:53:13Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642506086",
      "id" : 642506086,
      "in_reply_to_id" : 642045233,
      "line" : 3522,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjUwNjA4Ng==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3522,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 11,
      "pull_request_review_id" : 672333773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T13:53:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642506086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642552286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642552286"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For now these comments are correct. In a multisig setup `bumpfee` will throw ` \"Transaction incomplete. Try psbtbumpfee instead.\"` (which in turn won't call the external signer). We can improve that later.",
      "commit_id" : "dda02ce4f99cff37bbd41373df6ecb4541ed66f5",
      "created_at" : "2021-05-31T15:07:50Z",
      "diff_hunk" : "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642552286",
      "id" : 642552286,
      "in_reply_to_id" : 642045233,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjU1MjI4Ng==",
      "original_commit_id" : "0c0d293d31e96c9119e4793df66b375ec9f8495e",
      "original_line" : 3522,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 672394417,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T15:08:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642552286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, addressed comments and added a test.",
      "created_at" : "2021-05-31T15:31:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-851561966",
      "id" : 851561966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MTU2MTk2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-31T15:31:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851561966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-06-17T21:59:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-863590315",
      "id" : 863590315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MzU5MDMxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-17T21:59:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863590315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699783919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699783919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Usually we put the meaning-comment before the value.",
      "commit_id" : "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
      "created_at" : "2021-09-01T01:46:49Z",
      "diff_hunk" : "@@ -4174,10 +4195,10 @@ static RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false /* sign */, true /* bip32derivs */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699783919",
      "id" : 699783919,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5OTc4MzkxOQ==",
      "original_commit_id" : "c7e4cc0c95e99c870ab504f44528792370f36939",
      "original_line" : 4200,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 743327132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-01T02:00:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699783919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699785619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699785619"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Prefer to assign `txid` here and do a single shared `pushKV` later.",
      "commit_id" : "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
      "created_at" : "2021-09-01T01:51:51Z",
      "diff_hunk" : "@@ -3530,16 +3530,37 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // For bumpfee, return the new transaction id.\n     // For psbtbumpfee, return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked to sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true /* sign */, false  /* bip32derivs */);\n+            if (err != TransactionError::OK) {\n+                throw JSONRPCTransactionError(err);\n+            }\n \n-        result.pushKV(\"txid\", txid.GetHex());\n+            complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+            if (!complete) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Transaction incomplete. Try psbtbumpfee instead.\");\n+            }\n+            CTransactionRef tx(MakeTransactionRef(std::move(mtx)));\n+            result.pushKV(\"txid\", tx->GetHash().GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699785619",
      "id" : 699785619,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5OTc4NTYxOQ==",
      "original_commit_id" : "c7e4cc0c95e99c870ab504f44528792370f36939",
      "original_line" : 3552,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 743327132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-01T02:00:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699785619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On further reflection, any reason not to put these details in `feebumper::SignTransaction` so it's more easily reused in the GUI?",
      "created_at" : "2021-09-01T02:04:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-909804743",
      "id" : 909804743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5842OoTH",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T02:04:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909804743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r700248131"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700248131"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That indeed seems more common (`*/,` has 93 results vs 441 for `, /* `)",
      "commit_id" : "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
      "created_at" : "2021-09-01T14:05:52Z",
      "diff_hunk" : "@@ -4174,10 +4195,10 @@ static RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false /* sign */, true /* bip32derivs */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r700248131",
      "id" : 700248131,
      "in_reply_to_id" : 699783919,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMDI0ODEzMQ==",
      "original_commit_id" : "c7e4cc0c95e99c870ab504f44528792370f36939",
      "original_line" : 4200,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 743975319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-01T14:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700248131",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr good idea: now it works with GUI too!",
      "created_at" : "2021-09-01T14:54:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-910364893",
      "id" : 910364893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5842QxDd",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T14:54:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910364893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-12-08T05:23:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-988509946",
      "id" : 988509946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII584663b6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988509946/reactions"
      },
      "updated_at" : "2021-12-08T05:23:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988509946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased after #23667 (manually re-applied changes from `wallet/rpcwallet.cpp` to `wallet/rpc/spend.cpp`)",
      "created_at" : "2021-12-08T05:46:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-988518493",
      "id" : 988518493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII584665hd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988518493/reactions"
      },
      "updated_at" : "2021-12-08T06:03:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988518493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There was a bad rebase, you've re-added `src/wallet/rpcwallet.cpp`.",
      "created_at" : "2021-12-20T21:35:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-998287837",
      "id" : 998287837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5847gKnd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998287837/reactions"
      },
      "updated_at" : "2021-12-20T21:35:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998287837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oops, fixed.",
      "created_at" : "2021-12-21T02:54:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-998427008",
      "id" : 998427008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5847gsmA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998427008/reactions"
      },
      "updated_at" : "2021-12-21T02:54:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998427008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK d5f720fb48d3eeb64101af1d5614a3650643bb1e",
      "created_at" : "2021-12-21T20:22:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-999070023",
      "id" : 999070023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5847jJlH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999070023/reactions"
      },
      "updated_at" : "2021-12-21T20:22:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999070023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-01-09T17:14:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1008338402",
      "id" : 1008338402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5848GgXi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1008338402/reactions"
      },
      "updated_at" : "2022-01-09T17:14:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1008338402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased after bitcoin-core/gui#441, though not tested yet.",
      "created_at" : "2022-01-12T15:47:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1011181943",
      "id" : 1011181943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII5848RWl3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011181943/reactions"
      },
      "updated_at" : "2022-01-12T15:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011181943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-30T14:32:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1083215618",
      "id" : 1083215618,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII585AkI8C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1083215618/reactions"
      },
      "updated_at" : "2022-03-30T14:32:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1083215618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r856931110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856931110"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, /*sign=*/true, /*bip32derivs=*/false);\r\n```\r\n\r\n& other such changes",
      "commit_id" : "ea8f5db52b9be64c972e2f1a37fb1045cf556dfe",
      "created_at" : "2022-04-23T15:10:49Z",
      "diff_hunk" : "@@ -1121,10 +1124,10 @@ RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, /* sign */ false, /* bip32derivs */ true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, /* sign */ true, /* bip32derivs */ false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r856931110",
      "id" : 856931110,
      "line" : 1130,
      "node_id" : "PRRC_kwDOABII584zE7sm",
      "original_commit_id" : "ea8f5db52b9be64c972e2f1a37fb1045cf556dfe",
      "original_line" : 1130,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 29,
      "pull_request_review_id" : 951009492,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856931110/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-23T15:10:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856931110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r857775027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857775027"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed (after the rebase moved everything around)",
      "commit_id" : "3e25b8ec2e70b9da02354e0dd1fbcd509d6c38f9",
      "created_at" : "2022-04-25T15:45:39Z",
      "diff_hunk" : "@@ -1121,10 +1124,10 @@ RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, /* sign */ false, /* bip32derivs */ true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, /* sign */ true, /* bip32derivs */ false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r857775027",
      "id" : 857775027,
      "in_reply_to_id" : 856931110,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zIJuz",
      "original_commit_id" : "ea8f5db52b9be64c972e2f1a37fb1045cf556dfe",
      "original_line" : 1130,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 952088962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857775027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T15:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857775027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, but for the GUI to work I first need to apply the same change as bitcoin-core/gui#555",
      "created_at" : "2022-04-25T15:56:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1108753915",
      "id" : 1108753915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII585CFj37",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108753915/reactions"
      },
      "updated_at" : "2022-04-25T15:56:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108753915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, it works again now.",
      "created_at" : "2022-04-25T16:10:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1108770490",
      "id" : 1108770490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII585CFn66",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108770490/reactions"
      },
      "updated_at" : "2022-04-25T16:10:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108770490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r889705750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889705750"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: as this is the same code that we have in \"rpc/send\" --> `FinishTransaction`, could decouple it into a new function and use it from both sides.",
      "commit_id" : "2c07cfacd1745844a1d3c57f2e8617549b9815d7",
      "created_at" : "2022-06-05T15:41:53Z",
      "diff_hunk" : "@@ -239,7 +239,22 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n \n bool SignTransaction(CWallet& wallet, CMutableTransaction& mtx) {\n     LOCK(wallet.cs_wallet);\n-    return wallet.SignTransaction(mtx);\n+\n+    if (wallet.IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+        // Make a blank psbt\n+        PartiallySignedTransaction psbtx(mtx);\n+\n+        // First fill transaction with our data without signing,\n+        // so external signers are not asked to sign more than once.\n+        bool complete;\n+        wallet.FillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        const TransactionError err = wallet.FillPSBT(psbtx, complete, SIGHASH_ALL, true /* sign */, false  /* bip32derivs */);\n+        if (err != TransactionError::OK) return false;\n+        complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+        return complete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r889705750",
      "id" : 889705750,
      "line" : 254,
      "node_id" : "PRRC_kwDOABII5841B9UW",
      "original_commit_id" : "2c07cfacd1745844a1d3c57f2e8617549b9815d7",
      "original_line" : 254,
      "original_position" : 17,
      "original_start_line" : 244,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 17,
      "pull_request_review_id" : 996016837,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889705750/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 244,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-05T15:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889705750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r923477349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923477349"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I looked into deduplicating the part where we fill without signing and then call fill, but it's not that easy. The following doesn't work: https://github.com/Sjors/bitcoin/commit/5d55117e53c6a460222dea99842edc4fda47622c (because it won't add the bip32 info for some reason)",
      "commit_id" : "2c07cfacd1745844a1d3c57f2e8617549b9815d7",
      "created_at" : "2022-07-18T14:58:50Z",
      "diff_hunk" : "@@ -239,7 +239,22 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n \n bool SignTransaction(CWallet& wallet, CMutableTransaction& mtx) {\n     LOCK(wallet.cs_wallet);\n-    return wallet.SignTransaction(mtx);\n+\n+    if (wallet.IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+        // Make a blank psbt\n+        PartiallySignedTransaction psbtx(mtx);\n+\n+        // First fill transaction with our data without signing,\n+        // so external signers are not asked to sign more than once.\n+        bool complete;\n+        wallet.FillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        const TransactionError err = wallet.FillPSBT(psbtx, complete, SIGHASH_ALL, true /* sign */, false  /* bip32derivs */);\n+        if (err != TransactionError::OK) return false;\n+        complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+        return complete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r923477349",
      "id" : 923477349,
      "in_reply_to_id" : 889705750,
      "line" : 254,
      "node_id" : "PRRC_kwDOABII5843CyVl",
      "original_commit_id" : "2c07cfacd1745844a1d3c57f2e8617549b9815d7",
      "original_line" : 254,
      "original_position" : 17,
      "original_start_line" : 244,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 17,
      "pull_request_review_id" : 1042003894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923477349/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 244,
      "start_side" : "RIGHT",
      "updated_at" : "2022-07-18T14:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923477349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 2c07cfacd1745844a1d3c57f2e8617549b9815d7",
      "created_at" : "2022-12-15T21:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-1353715983",
      "id" : 1353715983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
      "node_id" : "IC_kwDOABII585QsBEP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353715983/reactions"
      },
      "updated_at" : "2022-12-15T21:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353715983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
