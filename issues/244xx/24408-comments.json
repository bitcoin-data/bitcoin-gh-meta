[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811327243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811327243"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It looks like there aren't any dedicated test files for `getmempoolentry`, `getmempoolancestors` and `getmempooldescendants` (I wanted to insert my tests in such a file).\r\n\r\nShould I create a new `rpc_getmempoolpendingtx.py` to put more tests (e.g. some failure cases)?",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-21T17:27:55Z",
      "diff_hunk" : "@@ -100,6 +100,11 @@ def run_test(self):\n             entry = self.nodes[0].getmempoolentry(x)\n             assert_equal(entry, mempool[x])\n \n+            # Check that getmempoolspendingtx is consistent with getrawmempool",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811327243",
      "id" : 811327243,
      "line" : 103,
      "node_id" : "PRRC_kwDOABII584wW98L",
      "original_commit_id" : "2a7db52cec1cb1c4962e384374da6d79fd200b61",
      "original_line" : 103,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_packages.py",
      "position" : 4,
      "pull_request_review_id" : 888961324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811327243/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T17:27:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811327243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For this usecase, why not using `getmempoolentry`'s `spentby` field?",
      "created_at" : "2022-02-21T17:28:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047099947",
      "id" : 1047099947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-aXor",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047099947/reactions"
      },
      "updated_at" : "2022-02-21T17:28:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047099947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> For this usecase, why not using getmempoolentry's spentby field?\r\n\r\nBecause that wouldn't work for confirmed utxos!\r\n\r\nMy funding transaction (or any L2 protocol initial state) has been confirmed on-chain and I want to check who spends it in the mempool. I can't use `getmempoolentry` because I don't know yet the `txid` of the spending tx...\r\n\r\nMaybe the RPC name is misleading, because its inputs (`txid` and `vout`) aren't necessarily for a mempool tx (and most of the time will not), but the RPC output will be a mempool tx (or `null`).",
      "created_at" : "2022-02-21T17:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047101622",
      "id" : 1047101622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-aYC2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047101622/reactions"
      },
      "updated_at" : "2022-02-21T17:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047101622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Right, sorry, i shouldn't have inferred the behaviour from the name. I see it's in the context of `txindex` then, so i don't have an opinion.",
      "created_at" : "2022-02-21T17:39:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047107192",
      "id" : 1047107192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-aZZ4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047107192/reactions"
      },
      "updated_at" : "2022-02-21T17:39:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047107192",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It's much weaker than `txindex`, it's exposing a `txindex` for mempool contents, which is why I think it's acceptable (I'm only querying existing mempool functions).",
      "created_at" : "2022-02-21T17:50:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047114442",
      "id" : 1047114442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-abLK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047114442/reactions"
      },
      "updated_at" : "2022-02-21T17:51:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047114442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > For this usecase, why not using getmempoolentry's spentby field?\r\n> \r\n> Because that wouldn't work for confirmed utxos!\r\n> \r\n> My funding transaction (or any L2 protocol initial state) has been confirmed on-chain and I want to check who spends it in the mempool. I can't use `getmempoolentry` because I don't know yet the `txid` of the spending tx...\r\n> \r\n> Maybe the RPC name is misleading, because its inputs (`txid` and `vout`) aren't necessarily for a mempool tx (and most of the time will not), but the RPC output will be a mempool tx (or `null`).\r\n\r\nIs it possible to add it in existing RPC `getmempoolentry` by adding more arguments (optional)?",
      "created_at" : "2022-02-22T02:04:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047356352",
      "id" : 1047356352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-bWPA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047356352/reactions"
      },
      "updated_at" : "2022-02-22T02:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047356352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is it possible to add it in existing RPC getmempoolentry by adding more arguments (optional)?\r\n\r\nI'm not sure it would be very ergonomic, because `getmempoolentry` requires the `txid` of the mempool transaction you're fetching. If we wanted to overload it, it would have the following two distinct sets of behaviors:\r\n\r\n- a `txid` is provided, so we return a mempool transaction that matches this `txid`\r\n- a `txid` (probably named differently to avoid confusion) and a `vout` are provided, so we return a mempool transaction spending this given `txid:vout`\r\n\r\nCorrectly defining the arguments lists (and which are required) to support both use-cases without creating confusion seems hard to be honest...",
      "created_at" : "2022-02-22T08:48:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047557230",
      "id" : 1047557230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-cHRu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047557230/reactions"
      },
      "updated_at" : "2022-02-22T08:48:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047557230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Not being able to walk the chain forward is certainly the source of huge friction and hacky code while working with Bitcoin RPC. I'd even go that far to claim that this is the single largest missing feature that if we'd have, it would have saved the most time for me personally. Certainly cACK this approach, but I'd like to note a general version of it would be more useful, somehow we should be able to determine which transaction spends a UTXO if any, regardless if it's from mempool or not.",
      "created_at" : "2022-02-22T11:15:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047689558",
      "id" : 1047689558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-cnlW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047689558/reactions"
      },
      "updated_at" : "2022-02-22T11:15:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047689558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9156103?v=4",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "node_id" : "MDQ6VXNlcjkxNTYxMDM=",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811842010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811842010"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, that's probably the move. \"rpc_mempool_info.py\" would be a good place to put tests for all of these RPCs.",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-22T11:22:51Z",
      "diff_hunk" : "@@ -100,6 +100,11 @@ def run_test(self):\n             entry = self.nodes[0].getmempoolentry(x)\n             assert_equal(entry, mempool[x])\n \n+            # Check that getmempoolspendingtx is consistent with getrawmempool",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811842010",
      "id" : 811842010,
      "in_reply_to_id" : 811327243,
      "line" : 103,
      "node_id" : "PRRC_kwDOABII584wY7na",
      "original_commit_id" : "2a7db52cec1cb1c4962e384374da6d79fd200b61",
      "original_line" : 103,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_packages.py",
      "position" : 4,
      "pull_request_review_id" : 889639706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811842010/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-22T11:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811842010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811843082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811843082"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm wondering if, in the future, you might want to pass in a list of prevouts? (e.g. if you have transaction(s) with multiple inputs and want to see if anything in the mempool conflicts)",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-22T11:24:16Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()\n+{\n+    return RPCHelpMan{\"getmempoolspendingtx\",\n+                \"\\nScans the mempool to find a transaction spending the given output\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"transaction id\"},\n+                    {\"n\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"vout number\"},\n+                },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811843082",
      "id" : 811843082,
      "line" : 796,
      "node_id" : "PRRC_kwDOABII584wY74K",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 796,
      "original_position" : 11,
      "original_start_line" : 792,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 11,
      "pull_request_review_id" : 889639706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811843082/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 792,
      "start_side" : "RIGHT",
      "updated_at" : "2022-02-22T11:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811843082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811846174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811846174"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry to nitpick but I was confused in the beginning by the name as well (I thought you wanted the child of a mempool transaction). Maybe `gettxspendingprevout` would be better, but I'm sure there's someone out there who would find it even more confusing :sweat_smile:",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-22T11:28:05Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811846174",
      "id" : 811846174,
      "line" : 789,
      "node_id" : "PRRC_kwDOABII584wY8oe",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 789,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 4,
      "pull_request_review_id" : 889639706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811846174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-22T11:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811846174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'd like to note a general version of it would be more useful, somehow we should be able to determine which transaction spends a UTXO if any, regardless if it's from mempool or not.\r\n\r\nThis might be tricky (the non-mempool case) since we would have deleted the UTXO from our chainstate. And not possible sometimes on a pruned node.",
      "created_at" : "2022-02-22T11:32:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047703058",
      "id" : 1047703058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-cq4S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047703058/reactions"
      },
      "updated_at" : "2022-02-22T11:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047703058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK - rationale in PR description seems strong and other projects (e.g. Wasabi) have experienced same issue.\r\n\r\n> I'd like to note a general version of it would be more useful, somehow we should be able to determine which transaction spends a UTXO if any, regardless if it's from mempool or not\r\n\r\nI think the use case from @nopara73's comment above would be you don't know whether the transaction spending the UTXO is in your mempool or confirmed onchain and you want to query your mempool first and then your transaction index? I think generally you'd want one RPC to query your mempool and one RPC to query your transaction index. Combining both into a single RPC seems to me against separation of concerns (and is easily resolved by just running two RPC commands).\r\n\r\n",
      "created_at" : "2022-02-22T11:55:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047720804",
      "id" : 1047720804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-cvNk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047720804/reactions"
      },
      "updated_at" : "2022-02-22T11:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047720804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "FTR there's `gettxout`. I think my suggestion would fit best there.",
      "created_at" : "2022-02-22T12:01:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047725184",
      "id" : 1047725184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-cwSA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047725184/reactions"
      },
      "updated_at" : "2022-02-22T12:01:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047725184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9156103?v=4",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "node_id" : "MDQ6VXNlcjkxNTYxMDM=",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> FTR there's gettxout. I think my suggestion would fit best there.\r\n\r\n@nopara73 do you mean that instead of adding a new RPC like I'm doing, we could update `gettxout` to return the spending tx when the utxo is spent?\r\n\r\nIn the case where the spending tx is not in the mempool, I think the only solution would be to walk the chain backwards and analyze each block to see if the spending tx is inside it. However, as @glozow says, if you're running a pruned node, you will likely analyze every block you have and won't find anything, which is very inefficient. Even worse, if the provided utxo never existed, you will walk the whole chain without finding anything...\r\n\r\nIt looks like a much more debatable change which would involve serious trade-offs, that's why I think restricting this PR to mempool txs has a better chance of being accepted. I could still reuse `gettxout` instead of adding a new RPC, but that would make it harder (backwards-compatibility wise) to accept a list of `prevouts` as @glozow suggests [here](https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811843082).",
      "created_at" : "2022-02-22T12:31:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1047749530",
      "id" : 1047749530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-c2Oa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047749530/reactions"
      },
      "updated_at" : "2022-02-22T12:31:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047749530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811897533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811897533"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree, I'm not a fan of the name! Should it be `getmempooltxspendingprevout` though to highlight that we return a mempool tx (with ancestor / descendant feerates, which are useful in fee-bumping cases)? It's a long name, but at least it's quite obvious what it does (hopefully).",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-22T12:33:49Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811897533",
      "id" : 811897533,
      "in_reply_to_id" : 811846174,
      "line" : 789,
      "node_id" : "PRRC_kwDOABII584wZJK9",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 789,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 4,
      "pull_request_review_id" : 889728684,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811897533/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-22T12:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811897533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811898624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811898624"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That's a good idea, it's worth adding this flexibility right now to avoid running in backwards-compatibility issues if we add it later, I'll try that. I'll take a list of `prevouts` and return a map of `prevout -> spending tx (or null if not found)`.",
      "commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "created_at" : "2022-02-22T12:35:09Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()\n+{\n+    return RPCHelpMan{\"getmempoolspendingtx\",\n+                \"\\nScans the mempool to find a transaction spending the given output\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"transaction id\"},\n+                    {\"n\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"vout number\"},\n+                },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r811898624",
      "id" : 811898624,
      "in_reply_to_id" : 811843082,
      "line" : 796,
      "node_id" : "PRRC_kwDOABII584wZJcA",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 796,
      "original_position" : 11,
      "original_start_line" : 792,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 11,
      "pull_request_review_id" : 889730193,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811898624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 792,
      "start_side" : "RIGHT",
      "updated_at" : "2022-02-22T12:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811898624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814057779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814057779"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/0015ceb04cb3545914e2bf7c4b2cde6d66f172ed, I have only added tests for my new RPC for now, future PRs can add tests for `getmempoolentry`, `getmempoolancestors` and `getmempooldescendants` here if that makes sense.",
      "commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "created_at" : "2022-02-24T16:31:51Z",
      "diff_hunk" : "@@ -100,6 +100,11 @@ def run_test(self):\n             entry = self.nodes[0].getmempoolentry(x)\n             assert_equal(entry, mempool[x])\n \n+            # Check that getmempoolspendingtx is consistent with getrawmempool",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814057779",
      "id" : 814057779,
      "in_reply_to_id" : 811327243,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584whYkz",
      "original_commit_id" : "2a7db52cec1cb1c4962e384374da6d79fd200b61",
      "original_line" : 103,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_packages.py",
      "position" : null,
      "pull_request_review_id" : 892692776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814057779/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-25T15:41:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814057779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814060287"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814060287"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/0015ceb04cb3545914e2bf7c4b2cde6d66f172ed\r\nI chose to return only the `spendingtxid` instead of the mempool tx data, because otherwise if a transaction appears multiple times (because it spends many of the provided prevouts) it would be duplicated, which is a (small) waste.\r\n\r\nCallers can chain this with `getmempoolentry` to get more data about the conflicting transaction.\r\nIf you think it makes more sense to directly include the mempool tx let me know, I don't have strong feelings about that.",
      "commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "created_at" : "2022-02-24T16:34:20Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()\n+{\n+    return RPCHelpMan{\"getmempoolspendingtx\",\n+                \"\\nScans the mempool to find a transaction spending the given output\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"transaction id\"},\n+                    {\"n\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"vout number\"},\n+                },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814060287",
      "id" : 814060287,
      "in_reply_to_id" : 811843082,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584whZL_",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 804,
      "original_position" : 11,
      "original_start_line" : 792,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 892696288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814060287/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-02-25T15:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814060287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814061201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814061201"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I updated the name, but now that is accepts multiple prevouts, I'm not sure whether I should make it plural or not...\r\nNone of the names I find are completely satisfying, so I'll let reviewers chime in with better proposals!",
      "commit_id" : "263b0a775d606035a852cebfc7c70a3c1a45dce3",
      "created_at" : "2022-02-24T16:35:13Z",
      "diff_hunk" : "@@ -786,6 +786,49 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempoolspendingtx()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r814061201",
      "id" : 814061201,
      "in_reply_to_id" : 811846174,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584whZaR",
      "original_commit_id" : "cc038b6b09ecc36b2f915669116eddf8b6018cf9",
      "original_line" : 789,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 892697968,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814061201/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-24T16:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814061201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add getxpub by Sjors)\n* [#21422](https://github.com/bitcoin/bitcoin/pull/21422) (Add feerate histogram to getmempoolinfo by kiminuo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-25T06:51:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1050575675",
      "id" : 1050575675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-noM7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050575675/reactions"
      },
      "updated_at" : "2022-05-07T09:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050575675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Maybe the two commits can be merged.\r\n\r\nDefinitely, done. I was waiting for the builds to complete to check that I hadn't missed something else that would need fixing.",
      "created_at" : "2022-02-25T15:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1050962672",
      "id" : 1050962672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584-pGrw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050962672/reactions"
      },
      "updated_at" : "2022-02-25T15:40:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050962672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-03T18:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1058365232",
      "id" : 1058365232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_FV8w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058365232/reactions"
      },
      "updated_at" : "2022-03-03T18:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058365232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Without this RPC, application developers need to first call getrawmempool which returns a long list of txid, then fetch each of these transactions individually (getrawtransaction) to check whether they spend the given outpoints, which wastes a lot of bandwidth (in the worst case we need to transfer the whole mempool).\r\n\r\nI think without this RPC, you can create a tx that spends the input and only fetch the whole mempool if the input was spent.\r\n\r\nMoreover, I wonder what happens if the tx is included in a block right away? So the input will be gone, but there isn't a tx in the mempool that spends it.\r\n\r\nWhile the RPC makes sense on its own, it doesn't fix your problem completely?",
      "created_at" : "2022-03-03T19:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1058405400",
      "id" : 1058405400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_FfwY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058405400/reactions"
      },
      "updated_at" : "2022-03-03T19:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058405400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r818993962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818993962"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe move this to a separate file for now?\r\n\r\n`doc/release-notes-24408.md`",
      "commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "created_at" : "2022-03-03T19:24:54Z",
      "diff_hunk" : "@@ -123,6 +123,8 @@ New RPCs\n   a future release. Note that in either case, the `status` field\n   now reflects the status of the current block rather than the next\n   block. (#23508)\n+- A new `getmempooltxspendingprevout` RPC has been added, which scans the mempool to find\n+  transactions spending any of the given outpoints. (#24408)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r818993962",
      "id" : 818993962,
      "line" : 127,
      "node_id" : "PRRC_kwDOABII584w0Nsq",
      "original_commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "original_line" : 127,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 5,
      "pull_request_review_id" : 899417562,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818993962/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-03T19:24:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818993962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r818994278"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818994278"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                \"Scans the mempool to find transactions spending any of the given outputs\",\r\n```\r\n\r\nnit: I think those can be removed",
      "commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "created_at" : "2022-03-03T19:25:21Z",
      "diff_hunk" : "@@ -786,6 +786,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"\\nScans the mempool to find transactions spending any of the given outputs\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r818994278",
      "id" : 818994278,
      "line" : 792,
      "node_id" : "PRRC_kwDOABII584w0Nxm",
      "original_commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "original_line" : 792,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 899418005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818994278/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-03T19:26:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818994278",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @MarcoFalke!\r\n\r\n> I think without this RPC, you can create a tx that spends the input and only fetch the whole mempool if the input was spent.\r\n> Moreover, I wonder what happens if the tx is included in a block right away? So the input will be gone, but there isn't a tx in the mempool that spends it.\r\n> While the RPC makes sense on its own, it doesn't fix your problem completely?\r\n\r\nI probably tried to be a bit too general in my description, let me try to explain in more details my current scenario.\r\n\r\nIn the specific case where I want to apply this in the short term, I'm trying to spend lightning htlcs. I have a pre-signed transaction that spends the outpoint I'm interested in but doesn't provide enough fees, so I'll want to add more inputs to reach the right feerate.\r\n\r\nThe complete flow looks like this:\r\n\r\n- I verify that the output is unspent with `gettxout` (without including the mempool)\r\n  - If it's spent, then I have nothing to do (actually it triggers another flow to spend the output of that spending tx, but that's orthogonal)\r\n  - Otherwise, I check if there is already a mempool tx spending this output with `getmempooltxspendingprevout`\r\n    - If nothing is in the mempool, I'll use `fundrawtransaction` to add inputs and broadcast the transaction\r\n    - Otherwise, I'll modify the mempool transaction to pay more fees (by lowering/removing the existing change output and potentially adding new inputs)\r\n\r\nWithout this RPC, I would have to optimistically fund and broadcast, and if that fails fetch the whole mempool to find the conflicting transaction. I expect to regularly have to go through the RBF flow, so it feels inefficient to have to dump the mempool when that happens :(\r\n\r\nYou're right that if the current mempool transaction confirms while I'm funding its replacement, I'll need to correctly handle it, but that doesn't seem to be too much of a problem for my use-case.\r\n\r\nDoes that make sense with this more detailed scenario?\r\n",
      "created_at" : "2022-03-03T23:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1058677337",
      "id" : 1058677337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_GiJZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058677337/reactions"
      },
      "updated_at" : "2022-03-03T23:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058677337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r819162210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162210"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agreed, done in https://github.com/bitcoin/bitcoin/pull/24408/commits/4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "created_at" : "2022-03-04T00:00:50Z",
      "diff_hunk" : "@@ -786,6 +786,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"\\nScans the mempool to find transactions spending any of the given outputs\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r819162210",
      "id" : 819162210,
      "in_reply_to_id" : 818994278,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w02xi",
      "original_commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "original_line" : 792,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 899663446,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-04T00:00:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r819162399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162399"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21, let me know if the format should be different",
      "commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "created_at" : "2022-03-04T00:01:14Z",
      "diff_hunk" : "@@ -123,6 +123,8 @@ New RPCs\n   a future release. Note that in either case, the `status` field\n   now reflects the status of the current block rather than the next\n   block. (#23508)\n+- A new `getmempooltxspendingprevout` RPC has been added, which scans the mempool to find\n+  transactions spending any of the given outpoints. (#24408)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r819162399",
      "id" : 819162399,
      "in_reply_to_id" : 818993962,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w020f",
      "original_commit_id" : "0015ceb04cb3545914e2bf7c4b2cde6d66f172ed",
      "original_line" : 127,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 899663676,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-04T00:01:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819162399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Actually there is a simpler place where we'll use that new RPC in our codebase. When a lightning node restarts, it lists its channels from its internal DB and verifies that the funding outpoint of each channel is still unspent (with `gettxout`).\r\n\r\nIf we discover than a channel has actually been spent (maybe our counterparty is malicious and saw that we were offline, and tried to cheat), we want to find the spending transaction to be able to react and publish our set of follow-up transactions. So the first thing we do is look into the mempool, currently by dumping it and checking every transaction ourselves. With `getmempooltxspendingprevout` we would avoid a performance hit here.\r\n\r\nOf course, if the spending transaction isn't in the mempool, then we have to check recent blocks one by one, but that shouldn't happen often, and since lightning nodes shouldn't be offline for too long, you usually only have to check 1 or 2 blocks (which means transferring < 5MB which is much smaller than the whole mempool).",
      "created_at" : "2022-03-04T14:02:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1059188351",
      "id" : 1059188351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_Ie5_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059188351/reactions"
      },
      "updated_at" : "2022-03-04T14:02:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059188351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r820032184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820032184"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n- A new `getmempoolprevout` RPC has been added, which scans the mempool to find\r\n```",
      "commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "created_at" : "2022-03-05T03:49:56Z",
      "diff_hunk" : "@@ -0,0 +1,5 @@\n+New RPCs\n+--------\n+\n+- A new `getmempooltxspendingprevout` RPC has been added, which scans the mempool to find",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r820032184",
      "id" : 820032184,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584w4LK4",
      "original_commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes/release-notes-24408.md",
      "position" : 4,
      "pull_request_review_id" : 900888495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820032184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-05T03:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820032184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This seems like it should be using a watch-only wallet instead.",
      "created_at" : "2022-03-07T20:00:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1061079594",
      "id" : 1061079594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_Psoq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061079594/reactions"
      },
      "updated_at" : "2022-03-07T20:00:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061079594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r822857757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822857757"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: I think it should be spelled \"omitted\" (only one m) :) ",
      "commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "created_at" : "2022-03-09T16:41:45Z",
      "diff_hunk" : "@@ -786,6 +786,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (ommitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r822857757",
      "id" : 822857757,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xC9Ad",
      "original_commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "original_line" : 812,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 904662270,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822857757/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-09T17:26:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822857757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This seems like it should be using a watch-only wallet instead.\r\n\r\nThis wouldn't work for users that don't have or don't want a bdb/sqlite dependency as well the overhead of having to deal with wallet maintenance. So I can see the argument that this RPC makes it easier for users.",
      "created_at" : "2022-03-09T17:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1063193347",
      "id" : 1063193347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_XwsD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1063193347/reactions"
      },
      "updated_at" : "2022-03-09T17:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1063193347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-16T10:32:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1068971697",
      "id" : 1068971697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII584_tzax",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068971697/reactions"
      },
      "updated_at" : "2022-03-16T10:32:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068971697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r834105358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/834105358"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! Fixed in https://github.com/bitcoin/bitcoin/pull/24408/commits/9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "created_at" : "2022-03-24T09:39:30Z",
      "diff_hunk" : "@@ -786,6 +786,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (ommitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r834105358",
      "id" : 834105358,
      "in_reply_to_id" : 822857757,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xt3AO",
      "original_commit_id" : "4c96203ec36f5634d6f73f3b9a1d99bbd91dcc21",
      "original_line" : 812,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 919975417,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/834105358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-24T09:39:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/834105358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This seems like it should be using a watch-only wallet instead.\r\n\r\n@luke-jr can you detail how that would work? I may be missing something, but I don't see how that would address my issue. I do need a regular wallet as I'm relying heavily on `fundrawtransaction`, it would be wasteful to need both a watch-only wallet and a regular wallet to make this use-case work?",
      "created_at" : "2022-03-24T09:45:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1077433383",
      "id" : 1077433383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585AOFQn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077433383/reactions"
      },
      "updated_at" : "2022-03-24T09:45:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077433383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry for the delay in responding to comments and rebasing, I've been away for a while, the PR is now rebased.\r\n\r\nOne of the points that I'd like more feedback on is that I chose to return only the `spendingtxid` instead of the mempool tx data, because otherwise if a transaction appears multiple times (because it spends many of the provided prevouts) it would be duplicated, which is a (small) waste.\r\n\r\nCallers can chain this with `getmempoolentry` to get more complete tx data for the conflicting transaction. If you think it makes more sense to directly include the mempool tx let me know, I don't have strong feelings about that.",
      "created_at" : "2022-03-24T09:47:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1077435461",
      "id" : 1077435461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585AOFxF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077435461/reactions"
      },
      "updated_at" : "2022-03-24T09:47:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077435461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r840701421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840701421"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\n        outputs.emplace_back(txid, nOutput);\r\n```\r\n\r\nChange this can avoid a copy of the object",
      "commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "created_at" : "2022-04-01T15:31:58Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r840701421",
      "id" : 840701421,
      "line" : 437,
      "node_id" : "PRRC_kwDOABII584yHBXt",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 437,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : 62,
      "pull_request_review_id" : 929105300,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840701421/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 436,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-01T15:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840701421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r840705230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840705230"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\n    for (const COutPoint& output : outputs) {\r\n        result.emplace_back(UniValue::VOBJ);\r\n        UniValue o = result.back();\r\n        o.pushKV(\"txid\", output.hash.ToString());\r\n        o.pushKV(\"vout\", (uint64_t)output.n);\r\n\r\n        const CTransaction* spendingTx = mempool.GetConflictTx(output);\r\n        if (spendingTx != nullptr) {\r\n            o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\r\n        }\r\n    }\r\n```\r\n\r\nIn this way we avoid the move too, and for a transaction this is important IMHO",
      "commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "created_at" : "2022-04-01T15:36:35Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);\n+    }\n+\n+    const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+    LOCK(mempool.cs);\n+\n+    UniValue result{UniValue::VARR};\n+\n+    for (const COutPoint& output : outputs) {\n+        UniValue o(UniValue::VOBJ);\n+        o.pushKV(\"txid\", output.hash.ToString());\n+        o.pushKV(\"vout\", (uint64_t)output.n);\n+\n+        const CTransaction* spendingTx = mempool.GetConflictTx(output);\n+        if (spendingTx != nullptr) {\n+            o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+        }\n+\n+        result.push_back(o);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r840705230",
      "id" : 840705230,
      "line" : 456,
      "node_id" : "PRRC_kwDOABII584yHCTO",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 456,
      "original_position" : 81,
      "original_start_line" : 445,
      "path" : "src/rpc/mempool.cpp",
      "position" : 81,
      "pull_request_review_id" : 929105300,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840705230/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 445,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-01T15:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/840705230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841428747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841428747"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, done in https://github.com/bitcoin/bitcoin/pull/24408/commits/8e6db71ff6cf2c8f724183996b4842fcf53d16b0",
      "commit_id" : "8e6db71ff6cf2c8f724183996b4842fcf53d16b0",
      "created_at" : "2022-04-04T07:14:32Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841428747",
      "id" : 841428747,
      "in_reply_to_id" : 840701421,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yJy8L",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 437,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 929919934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841428747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T07:14:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841428747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841429455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841429455"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review! This doesn't seem to compile though...and I'm not sure it's needed at all, we're not dealing with a whole transaction here, just a `txid`, so a copy is really not something we care about IMO.",
      "commit_id" : "8e6db71ff6cf2c8f724183996b4842fcf53d16b0",
      "created_at" : "2022-04-04T07:15:36Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);\n+    }\n+\n+    const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+    LOCK(mempool.cs);\n+\n+    UniValue result{UniValue::VARR};\n+\n+    for (const COutPoint& output : outputs) {\n+        UniValue o(UniValue::VOBJ);\n+        o.pushKV(\"txid\", output.hash.ToString());\n+        o.pushKV(\"vout\", (uint64_t)output.n);\n+\n+        const CTransaction* spendingTx = mempool.GetConflictTx(output);\n+        if (spendingTx != nullptr) {\n+            o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+        }\n+\n+        result.push_back(o);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841429455",
      "id" : 841429455,
      "in_reply_to_id" : 840705230,
      "line" : 455,
      "node_id" : "PRRC_kwDOABII584yJzHP",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 456,
      "original_position" : 81,
      "original_start_line" : 445,
      "path" : "src/rpc/mempool.cpp",
      "position" : 80,
      "pull_request_review_id" : 929921000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841429455/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 444,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T07:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841429455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841481867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841481867"
         }
      },
      "author_association" : "NONE",
      "body" : ">Thanks for the review! This doesn't seem to compile though\r\n\r\nI will try to compile it locally maybe something wrong with `UniValue::VOBJ` that my mind compiler is not able to catch right now!\r\n\r\n>just a txid, so a copy is really not something we care about IMO\r\n\r\nRight, I wrote a bad motivation, I mean here there `COutPoint` can be a lot, and this loop with the `emplace_back` and be optimized, because with the `push_back` to need to copy the structure in a pointer this can cause move, or a copy in some case.\r\n\r\nWith emplace_back you need to allocate the space of the struct one time, and this will summarize from:\r\n\r\npush_back: 1 stack allocation + 1 copy to heap, and the copy cost O(N)\r\nemplace_back: 1 allocation and this with reserve() cost O(1)\r\n\r\nBut yes, overall it is not a big deal.",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T08:22:46Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);\n+    }\n+\n+    const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+    LOCK(mempool.cs);\n+\n+    UniValue result{UniValue::VARR};\n+\n+    for (const COutPoint& output : outputs) {\n+        UniValue o(UniValue::VOBJ);\n+        o.pushKV(\"txid\", output.hash.ToString());\n+        o.pushKV(\"vout\", (uint64_t)output.n);\n+\n+        const CTransaction* spendingTx = mempool.GetConflictTx(output);\n+        if (spendingTx != nullptr) {\n+            o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+        }\n+\n+        result.push_back(o);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841481867",
      "id" : 841481867,
      "in_reply_to_id" : 840705230,
      "line" : 667,
      "node_id" : "PRRC_kwDOABII584yJ_6L",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 667,
      "original_position" : 81,
      "original_start_line" : 445,
      "path" : "src/rpc/mempool.cpp",
      "position" : 81,
      "pull_request_review_id" : 929996280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841481867/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 656,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T08:22:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841481867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841510561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841510561"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The tests started failing after this change, so I'm reverting it.\r\nTo be honest, I don't think we care about such optimizations on just a few bytes here.",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T08:55:41Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841510561",
      "id" : 841510561,
      "in_reply_to_id" : 840701421,
      "line" : 648,
      "node_id" : "PRRC_kwDOABII584yKG6h",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 648,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : 62,
      "pull_request_review_id" : 930037317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841510561/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 647,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T08:56:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841510561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841525214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841525214"
         }
      },
      "author_association" : "NONE",
      "body" : ">The tests started failing after this change, so I'm reverting it.\r\n\r\nMh! strange the Ci looks like failing again.\r\n\r\n>To be honest, I don't think we care about such optimizations on just a few bytes here.\r\n\r\nRight, this can be also a followup PR too",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T09:12:27Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841525214",
      "id" : 841525214,
      "in_reply_to_id" : 840701421,
      "line" : 648,
      "node_id" : "PRRC_kwDOABII584yKKfe",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 648,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : 62,
      "pull_request_review_id" : 930058268,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841525214/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 647,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T09:12:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841525214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841530527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841530527"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Mh! strange the Ci looks like failing again.\r\n\r\nTrue! That is strange, I tried rebasing, let's see if that fixes it.",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T09:18:31Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841530527",
      "id" : 841530527,
      "in_reply_to_id" : 840701421,
      "line" : 648,
      "node_id" : "PRRC_kwDOABII584yKLyf",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 648,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : 62,
      "pull_request_review_id" : 930066042,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841530527/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 647,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T09:19:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841530527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841617042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841617042"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                            {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=/*true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\r\n```\r\n\r\nThis may fix the CI failure (haven't tested)",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T11:05:37Z",
      "diff_hunk" : "@@ -587,6 +587,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841617042",
      "id" : 841617042,
      "line" : 613,
      "node_id" : "PRRC_kwDOABII584yKg6S",
      "original_commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "original_line" : 613,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 27,
      "pull_request_review_id" : 930189844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841617042/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-04T11:05:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841617042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841618622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841618622"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Test failure is due to stricter documentation checking in current master, not due to commit 8e6db71ff6cf2c8f724183996b4842fcf53d16b0 . I left a comment with a potential fix.",
      "commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "created_at" : "2022-04-04T11:07:38Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841618622",
      "id" : 841618622,
      "in_reply_to_id" : 840701421,
      "line" : 648,
      "node_id" : "PRRC_kwDOABII584yKhS-",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 648,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : 62,
      "pull_request_review_id" : 930192285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841618622/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 647,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T11:07:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841618622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841770613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841770613"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the tip, this seems to be working! Love the new github name btw ;)",
      "commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "created_at" : "2022-04-04T13:58:30Z",
      "diff_hunk" : "@@ -587,6 +587,90 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841770613",
      "id" : 841770613,
      "in_reply_to_id" : 841617042,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yLGZ1",
      "original_commit_id" : "b68dd3b93172d32545eff86d586445f01bfdfd6a",
      "original_line" : 613,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 930424638,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841770613/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-04T13:58:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841770613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841771322"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841771322"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the tip, I re-added the change requested in that comment in https://github.com/bitcoin/bitcoin/pull/24408/commits/e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "created_at" : "2022-04-04T13:59:08Z",
      "diff_hunk" : "@@ -376,6 +376,90 @@ RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+                \"Scans the mempool to find transactions spending any of the given outputs\",\n+                {\n+                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                        {\n+                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                                {\n+                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                                },\n+                            },\n+                        },\n+                    },\n+                },\n+                RPCResult{\n+                    RPCResult::Type::ARR, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::OBJ, \"\", \"\",\n+                        {\n+                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                            {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                        }},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+    const UniValue& output_params = request.params[0];\n+    if (output_params.empty()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+    }\n+\n+    std::vector<COutPoint> outputs;\n+    outputs.reserve(output_params.size());\n+\n+    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+        const UniValue& o = output_params[idx].get_obj();\n+\n+        RPCTypeCheckObj(o,\n+            {\n+                {\"txid\", UniValueType(UniValue::VSTR)},\n+                {\"vout\", UniValueType(UniValue::VNUM)},\n+            });\n+\n+        const uint256 txid(ParseHashO(o, \"txid\"));\n+        const int nOutput = find_value(o, \"vout\").get_int();\n+        if (nOutput < 0) {\n+            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+        }\n+\n+        const COutPoint output(txid, nOutput);\n+        outputs.push_back(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r841771322",
      "id" : 841771322,
      "in_reply_to_id" : 840701421,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yLGk6",
      "original_commit_id" : "9a9011c5aa4a9d069ba897b07ff9792349692cbb",
      "original_line" : 648,
      "original_position" : 62,
      "original_start_line" : 436,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 930425731,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841771322/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-04T13:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841771322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r843915773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843915773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've reworked this test to use the MiniWallet.\r\n\r\nIf you want you can take the diff and squash. It requires a rebase on current master, though.\r\n\r\nHowever, for some reason one line in the test fails and I fail to see why. I can take another look there, unless someone beats me to it.\r\n\r\nAlso, there are some whitespace fixes. You can check them with `git diff --ignore-all-space`.\r\n\r\n```diff\r\ndiff --git a/src/rpc/mempool.cpp b/src/rpc/mempool.cpp\r\nindex fe25dc9edc..2d07b8bd2e 100644\r\n--- a/src/rpc/mempool.cpp\r\n+++ b/src/rpc/mempool.cpp\r\n@@ -590,83 +590,83 @@ static RPCHelpMan getmempoolentry()\r\n static RPCHelpMan getmempooltxspendingprevout()\r\n {\r\n     return RPCHelpMan{\"getmempooltxspendingprevout\",\r\n-                \"Scans the mempool to find transactions spending any of the given outputs\",\r\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\r\n+        {\r\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\r\n                 {\r\n-                    {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\r\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\r\n                         {\r\n-                            {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\r\n-                                {\r\n-                                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\r\n-                                    {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\r\n-                                },\r\n-                            },\r\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\r\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\r\n                         },\r\n                     },\r\n                 },\r\n-                RPCResult{\r\n-                    RPCResult::Type::ARR, \"\", \"\",\r\n-                    {\r\n-                        {RPCResult::Type::OBJ, \"\", \"\",\r\n-                        {\r\n-                            {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\r\n-                            {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\r\n-                            {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\r\n-                        }},\r\n-                    }\r\n-                },\r\n-                RPCExamples{\r\n-                    HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\r\n-                    + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\r\n-                },\r\n+            },\r\n+        },\r\n+        RPCResult{\r\n+            RPCResult::Type::ARR, \"\", \"\",\r\n+            {\r\n+                {RPCResult::Type::OBJ, \"\", \"\",\r\n+                {\r\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\r\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\r\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\r\n+                }},\r\n+            }\r\n+        },\r\n+        RPCExamples{\r\n+            HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\r\n+            + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\r\n+        },\r\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\r\n-{\r\n-    RPCTypeCheckArgument(request.params[0], UniValue::VARR);\r\n-    const UniValue& output_params = request.params[0];\r\n-    if (output_params.empty()) {\r\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\r\n-    }\r\n+        {\r\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\r\n+            const UniValue& output_params = request.params[0];\r\n+            if (output_params.empty()) {\r\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\r\n+            }\r\n \r\n-    std::vector<COutPoint> outputs;\r\n-    outputs.reserve(output_params.size());\r\n+            std::vector<COutPoint> outputs;\r\n+            outputs.reserve(output_params.size());\r\n \r\n-    for (unsigned int idx = 0; idx < output_params.size(); idx++) {\r\n-        const UniValue& o = output_params[idx].get_obj();\r\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\r\n+                const UniValue& o = output_params[idx].get_obj();\r\n \r\n-        RPCTypeCheckObj(o,\r\n-            {\r\n-                {\"txid\", UniValueType(UniValue::VSTR)},\r\n-                {\"vout\", UniValueType(UniValue::VNUM)},\r\n-            });\r\n+                RPCTypeCheckObj(o,\r\n+                                {\r\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\r\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\r\n+                                });\r\n+\r\n+                const uint256 txid(ParseHashO(o, \"txid\"));\r\n+                const int nOutput = find_value(o, \"vout\").get_int();\r\n+                if (nOutput < 0) {\r\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\r\n+                }\r\n \r\n-        const uint256 txid(ParseHashO(o, \"txid\"));\r\n-        const int nOutput = find_value(o, \"vout\").get_int();\r\n-        if (nOutput < 0) {\r\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\r\n-        }\r\n+                outputs.emplace_back(txid, nOutput);\r\n+            }\r\n \r\n-        outputs.emplace_back(txid, nOutput);\r\n-    }\r\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\r\n+            LOCK(mempool.cs);\r\n \r\n-    const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\r\n-    LOCK(mempool.cs);\r\n-\r\n-    UniValue result{UniValue::VARR};\r\n+            UniValue result{UniValue::VARR};\r\n \r\n-    for (const COutPoint& output : outputs) {\r\n-        UniValue o(UniValue::VOBJ);\r\n-        o.pushKV(\"txid\", output.hash.ToString());\r\n-        o.pushKV(\"vout\", (uint64_t)output.n);\r\n+            for (const COutPoint& output : outputs) {\r\n+                UniValue o(UniValue::VOBJ);\r\n+                o.pushKV(\"txid\", output.hash.ToString());\r\n+                o.pushKV(\"vout\", (uint64_t)output.n);\r\n \r\n-        const CTransaction* spendingTx = mempool.GetConflictTx(output);\r\n-        if (spendingTx != nullptr) {\r\n-            o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\r\n-        }\r\n+                const CTransaction* spendingTx = mempool.GetConflictTx(output);\r\n+                if (spendingTx != nullptr) {\r\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\r\n+                }\r\n \r\n-        result.push_back(o);\r\n-    }\r\n+                result.push_back(o);\r\n+            }\r\n \r\n-    return result;\r\n-},\r\n+            return result;\r\n+        },\r\n     };\r\n }\r\n \r\ndiff --git a/test/functional/rpc_mempool_info.py b/test/functional/rpc_mempool_info.py\r\nindex ef5b9535d4..da4314444d 100755\r\n--- a/test/functional/rpc_mempool_info.py\r\n+++ b/test/functional/rpc_mempool_info.py\r\n@@ -13,19 +13,17 @@ from test_framework.util import (\r\n     assert_raises_rpc_error,\r\n     chain_transaction,\r\n )\r\n+from test_framework.wallet import MiniWallet\r\n+\r\n \r\n class RPCMempoolInfoTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n         self.num_nodes = 1\r\n-        self.setup_clean_chain = True\r\n-\r\n-    def skip_test_if_missing_module(self):\r\n-        self.skip_if_no_wallet()\r\n \r\n     def run_test(self):\r\n-        # Mine some blocks and have them mature.\r\n-        self.generate(self.nodes[0], COINBASE_MATURITY + 1)\r\n-        confirmed_utxo = self.nodes[0].listunspent(1)[0]\r\n+        self.wallet = MiniWallet(self.nodes[0])\r\n+        self.wallet.rescan_utxos()\r\n+        confirmed_utxo = self.wallet.get_utxo()\r\n \r\n         # Create a tree of unconfirmed transactions in the mempool:\r\n         #             txA\r\n@@ -41,15 +39,21 @@ class RPCMempoolInfoTest(BitcoinTestFramework):\r\n         #            \\   /\r\n         #             \\ /\r\n         #             txH\r\n-        fee = Decimal(\"0.0001\")\r\n-        (txidA, txA_amount) = chain_transaction(self.nodes[0], [confirmed_utxo['txid']], [0], confirmed_utxo['amount'], fee, 2)\r\n-        (txidB, txB_amount) = chain_transaction(self.nodes[0], [txidA], [0], txA_amount, fee, 2)\r\n-        (txidC, txC_amount) = chain_transaction(self.nodes[0], [txidA], [1], txA_amount, fee, 2)\r\n-        txidD, _ = chain_transaction(self.nodes[0], [txidB], [0], txB_amount, fee, 1)\r\n-        (txidE, txE_amount) = chain_transaction(self.nodes[0], [txidB], [1], txB_amount, fee, 3)\r\n-        (txidF, txF_amount) = chain_transaction(self.nodes[0], [txidC], [0], txC_amount, fee, 2)\r\n-        txidG, _ = chain_transaction(self.nodes[0], [txidC], [1], txC_amount, fee, 1)\r\n-        txidH, _ = chain_transaction(self.nodes[0], [txidE, txidF], [0, 1], txE_amount + txF_amount, fee, 1)\r\n+\r\n+        def create_tx(**kwargs):\r\n+            return self.wallet.send_self_transfer_multi(\r\n+                from_node=self.nodes[0],\r\n+                **kwargs,\r\n+            )\r\n+\r\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\r\n+        txB, txC = [create_tx(utxos_to_spend=[u], num_outputs=2) for u in txA[\"new_utxos\"]]\r\n+        txD, txE = [create_tx(utxos_to_spend=[u]) for u in txB[\"new_utxos\"]]\r\n+        txF, txG = [create_tx(utxos_to_spend=[u]) for u in txC[\"new_utxos\"]]\r\n+        txH = create_tx(utxos_to_spend=txE[\"new_utxos\"] + txF[\"new_utxos\"])\r\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\r\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\r\n+        ]\r\n \r\n         mempool = self.nodes[0].getrawmempool()\r\n         assert_equal(len(mempool), 8)\r\n",
      "commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "created_at" : "2022-04-06T12:55:08Z",
      "diff_hunk" : "@@ -0,0 +1,98 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from decimal import Decimal\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    chain_transaction,\n+)\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r843915773",
      "id" : 843915773,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII584yTSH9",
      "original_commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 23,
      "pull_request_review_id" : 933445279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843915773/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-06T12:55:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843915773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844024462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844024462"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Many thanks for the suggestion! I have rebased and applied it in https://github.com/bitcoin/bitcoin/pull/24408/commits/aa39757914efd638f76dbb20d21865e8f0488c03, along with a small fix for the MiniWallet issue (by default it looked like there was no utxo generated for the wallet).\r\n\r\nRegarding the whitespace changes, I agree with you that it's much better now, I thought I had to stick with the formatting used by the other functions in this file for consistency (even though it looked weird).",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-06T14:31:48Z",
      "diff_hunk" : "@@ -0,0 +1,98 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from decimal import Decimal\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    chain_transaction,\n+)\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844024462",
      "id" : 844024462,
      "in_reply_to_id" : 843915773,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yTsqO",
      "original_commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 933599028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844024462/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-06T14:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844024462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844037153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844037153"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good to see you fixed up the test. If you squash everything down into one commit, it should be easier for others to review. You don't need to mention me in the commit body.",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-06T14:42:56Z",
      "diff_hunk" : "@@ -0,0 +1,98 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from decimal import Decimal\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    chain_transaction,\n+)\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844037153",
      "id" : 844037153,
      "in_reply_to_id" : 843915773,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yTvwh",
      "original_commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 933616734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844037153/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-06T14:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844037153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844038931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844038931"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, done!",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-06T14:44:30Z",
      "diff_hunk" : "@@ -0,0 +1,98 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from decimal import Decimal\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    chain_transaction,\n+)\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r844038931",
      "id" : 844038931,
      "in_reply_to_id" : 843915773,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yTwMT",
      "original_commit_id" : "e143e80fb93a752f522c7cc3e98a4f55626d6b49",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 933619269,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844038931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-06T14:44:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844038931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@danielabrozzoni @w0xlt @glozow would you mind having a look at the latest state of this PR?\r\n\r\nMy only open question/thing to consider is whether I should include the whole spending tx instead of just the `spendingtxid` in the results. I chose to only include the `spendingtxid` because otherwise if a transaction appears multiple times (because it spends many of the provided prevouts) it would be duplicated, which is a bandwidth waste. Callers can chain this with `getmempoolentry` to get more complete tx data for the conflicting transaction. If you think it makes more sense to directly include the mempool tx let me know, I don't have very strong feelings about that.",
      "created_at" : "2022-04-08T08:18:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1092587389",
      "id" : 1092587389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585BH499",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092587389/reactions"
      },
      "updated_at" : "2022-04-08T08:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092587389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">My only open question/thing to consider is whether I should include the whole spending tx instead of just the spendingtxid in the results. I chose to only include the spendingtxid because otherwise if a transaction appears multiple times (because it spends many of the provided prevouts) it would be duplicated, which is a bandwidth waste. \r\n\r\nIMHO the RPC command needs to do one operation, and in a clean way. What `getmempooltxspendingprevout` already done with your actual implementation. How I can see in my mind if the `getmempooltxspendingprevout` return all the mem pool entry is a solution that makes the API a little bit messy?\r\n\r\n\r\nA solution that can fix your open question is to add another RPC method that returns all the `spendingtxid` for each `prevouts` in there the duplicated can be fine because lives in a separate JSON object.\r\n\r\nWhat do you think?",
      "created_at" : "2022-04-08T11:26:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1092762135",
      "id" : 1092762135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585BIjoX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092762135/reactions"
      },
      "updated_at" : "2022-04-08T11:26:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092762135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> IMHO the RPC command needs to do one operation, and in a clean way. What getmempooltxspendingprevout already done with your actual implementation. \r\n\r\n:+1: \r\n\r\n> A solution that can fix your open question is to add another RPC method that returns all the spendingtxid for each prevouts in there the duplicated can be fine because lives in a separate JSON object.\r\n\r\nI would avoid adding yet another RPC method, since the same result can be easily achieved by doing `getmempooltxspendingprevout` followed by `getmempoolentry`. I would add new RPC methods only for things that really cannot be done with existing RPCs, otherwise `bitcoind` will end up with way too many RPC methods which is going to be a pain to maintain.",
      "created_at" : "2022-04-08T13:00:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1092834772",
      "id" : 1092834772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585BI1XU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092834772/reactions"
      },
      "updated_at" : "2022-04-08T13:00:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092834772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">I would avoid adding yet another RPC method, since the same result can be easily achieved by doing getmempooltxspendingprevout followed by getmempoolentry. I would add new RPC methods only for things that really cannot be done with existing RPCs, otherwise bitcoind will end up with way too many RPC methods which is going to be a pain to maintain.\r\n\r\nI have your same idea here!",
      "created_at" : "2022-04-08T13:06:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1092840201",
      "id" : 1092840201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585BI2sJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092840201/reactions"
      },
      "updated_at" : "2022-04-08T13:06:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1092840201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856576738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856576738"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Question: would it be better for this to throw a `RPC_INVALID_PARAMETER`?",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-22T21:26:07Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=3)\n+        txF = create_tx(utxos_to_spend=[txC[\"new_utxos\"][0]], num_outputs=2)\n+        txG = create_tx(utxos_to_spend=[txC[\"new_utxos\"][1]], num_outputs=1)\n+        txH = create_tx(utxos_to_spend=[txE[\"new_utxos\"][2],txF[\"new_utxos\"][0]], num_outputs=1)\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\n+        ]\n+\n+        mempool = self.nodes[0].getrawmempool()\n+        assert_equal(len(mempool), 8)\n+        for txid in [txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH]:\n+            assert_equal(txid in mempool, True)\n+\n+        self.log.info(\"Find transactions spending outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+\n+        self.log.info(\"Find transaction spending multiple outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidE, 'vout' : 2}, {'txid' : txidF, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidE, 'vout' : 2, 'spendingtxid' : txidH}, {'txid' : txidF, 'vout' : 0, 'spendingtxid' : txidH} ])\n+\n+        self.log.info(\"Find no transaction when output is unspent\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidH, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidH, 'vout' : 0} ])\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidA, 'vout' : 5} ])\n+        assert_equal(result, [ {'txid' : txidA, 'vout' : 5} ])\n+\n+        self.log.info(\"Mixed spent and unspent outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidB, 'vout' : 0}, {'txid' : txidG, 'vout' : 3} ])\n+        assert_equal(result, [ {'txid' : txidB, 'vout' : 0, 'spendingtxid' : txidD}, {'txid' : txidG, 'vout' : 3} ])\n+\n+        self.log.info(\"Unknown input fields\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidC, 'vout' : 1, 'unknown' : 42} ])\n+        assert_equal(result, [ {'txid' : txidC, 'vout' : 1, 'spendingtxid' : txidG} ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856576738",
      "id" : 856576738,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII584zDlLi",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 84,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 84,
      "pull_request_review_id" : 950589393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856576738/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T21:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856576738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856577386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856577386"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Small nit: since the type is `COutPoint`, I would prefer to name this `prevout` or `outpoint` so we don't confuse it with a `COutput`.",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-22T21:27:31Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> outputs;\n+            outputs.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                outputs.emplace_back(txid, nOutput);\n+            }\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& output : outputs) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856577386",
      "id" : 856577386,
      "line" : 655,
      "node_id" : "PRRC_kwDOABII584zDlVq",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 655,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 69,
      "pull_request_review_id" : 950589393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856577386/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T21:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856577386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856579604"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856579604"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also a nit (especially since that PR didn't exist when you opened this one): if we end up with #24539 as well, a more generic RPC named `gettxspendingprevout` might be better, i.e. to retrieve a transaction from block or from mempool.",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-22T21:32:43Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856579604",
      "id" : 856579604,
      "line" : 590,
      "node_id" : "PRRC_kwDOABII584zDl4U",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 590,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 4,
      "pull_request_review_id" : 950589393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856579604/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T21:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856579604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856580142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856580142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: seems like txE only needs 1 output",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-22T21:33:58Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=3)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r856580142",
      "id" : 856580142,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII584zDmAu",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 51,
      "pull_request_review_id" : 950589393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856580142/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T21:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856580142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857348954"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857348954"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good question. I tend to silently ignore unknown parameters in APIs because it's generally more friendly to clients. If a future version of `bitcoind` introduces new optional parameters, a client can safely start including them without caring about the version of `bitcoind` it's running against, and calls will work on older `bitcoind` as well. That's not a very strong reason though, I can change that if you want.",
      "commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "created_at" : "2022-04-25T07:51:51Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=3)\n+        txF = create_tx(utxos_to_spend=[txC[\"new_utxos\"][0]], num_outputs=2)\n+        txG = create_tx(utxos_to_spend=[txC[\"new_utxos\"][1]], num_outputs=1)\n+        txH = create_tx(utxos_to_spend=[txE[\"new_utxos\"][2],txF[\"new_utxos\"][0]], num_outputs=1)\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\n+        ]\n+\n+        mempool = self.nodes[0].getrawmempool()\n+        assert_equal(len(mempool), 8)\n+        for txid in [txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH]:\n+            assert_equal(txid in mempool, True)\n+\n+        self.log.info(\"Find transactions spending outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+\n+        self.log.info(\"Find transaction spending multiple outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidE, 'vout' : 2}, {'txid' : txidF, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidE, 'vout' : 2, 'spendingtxid' : txidH}, {'txid' : txidF, 'vout' : 0, 'spendingtxid' : txidH} ])\n+\n+        self.log.info(\"Find no transaction when output is unspent\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidH, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidH, 'vout' : 0} ])\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidA, 'vout' : 5} ])\n+        assert_equal(result, [ {'txid' : txidA, 'vout' : 5} ])\n+\n+        self.log.info(\"Mixed spent and unspent outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidB, 'vout' : 0}, {'txid' : txidG, 'vout' : 3} ])\n+        assert_equal(result, [ {'txid' : txidB, 'vout' : 0, 'spendingtxid' : txidD}, {'txid' : txidG, 'vout' : 3} ])\n+\n+        self.log.info(\"Unknown input fields\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidC, 'vout' : 1, 'unknown' : 42} ])\n+        assert_equal(result, [ {'txid' : txidC, 'vout' : 1, 'spendingtxid' : txidG} ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857348954",
      "id" : 857348954,
      "in_reply_to_id" : 856576738,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII584zGhta",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 84,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 84,
      "pull_request_review_id" : 951471380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857348954/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T07:51:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857348954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857380544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/8c9152c1098acec4b1b4e333240f0e95eea21159",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-25T08:30:24Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=3)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857380544",
      "id" : 857380544,
      "in_reply_to_id" : 856580142,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zGpbA",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 951516180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T08:30:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857380658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380658"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/8c9152c1098acec4b1b4e333240f0e95eea21159",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-25T08:30:30Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()\n+{\n+    return RPCHelpMan{\"getmempooltxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"getmempooltxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> outputs;\n+            outputs.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                outputs.emplace_back(txid, nOutput);\n+            }\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& output : outputs) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857380658",
      "id" : 857380658,
      "in_reply_to_id" : 856577386,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zGpcy",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 655,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 951516314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380658/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T08:30:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857380658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857383697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857383697"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good idea! I changed that in https://github.com/bitcoin/bitcoin/pull/24408/commits/8c9152c1098acec4b1b4e333240f0e95eea21159 so that #24539 can build on top of it. I currently kept it in `mempool.cpp` and in the mempool RPCs list, I feel it's the responsibility of #24539 to move it elsewhere, is that ok @sstone?\r\n\r\nI think #24539 won't have to modify any of the RPC fields, which is great. Callers will simply follow up with `getrawtransaction` which will provide the `confirmations` field, informing them of whether the sending transaction is in the mempool or is confirmed.",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-25T08:34:04Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857383697",
      "id" : 857383697,
      "in_reply_to_id" : 856579604,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zGqMR",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 590,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 951520581,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857383697/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T08:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857383697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @glozow! \r\n\r\n> I don't feel strongly, but if you change your mind, I think it's perfectly fine to include the whole spending tx. There's not much waste since we've already retrieved it from the mempool, and only a privileged user can be using the RPC interface anyway.\r\n\r\nI am more and more convinced that it's better to only have the `spendingtxid`. There is a lot of useful information in the output of `getrawtransaction` that callers will want, so they will very likely follow up with a call to that RPC anyway (and we don't want to replicate all of its contents in the output of `gettxspendingprevout`). \r\n\r\nWe're regularly seeing big coinjoin transactions in our systems, so if we include the whole tx in the RPC response we can easily have responses that span several Mb, which is a waste for `bitcoind` nodes on remote machines accessed through a (sometimes flaky) VPN (which we've seen some lightning node operators do).",
      "created_at" : "2022-04-25T08:38:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1108257047",
      "id" : 1108257047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CDqkX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108257047/reactions"
      },
      "updated_at" : "2022-04-25T08:39:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108257047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857708543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857708543"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, and I agree that it makes sense to rebase https://github.com/bitcoin/bitcoin/pull/24539 on this PR ",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-25T14:42:31Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan getmempooltxspendingprevout()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857708543",
      "id" : 857708543,
      "in_reply_to_id" : 856579604,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zH5f_",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 590,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 951984496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857708543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857708543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r858039758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858039758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No objections here! Being more user-friendly sounds good :grin:",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-25T21:24:37Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=3)\n+        txF = create_tx(utxos_to_spend=[txC[\"new_utxos\"][0]], num_outputs=2)\n+        txG = create_tx(utxos_to_spend=[txC[\"new_utxos\"][1]], num_outputs=1)\n+        txH = create_tx(utxos_to_spend=[txE[\"new_utxos\"][2],txF[\"new_utxos\"][0]], num_outputs=1)\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\n+        ]\n+\n+        mempool = self.nodes[0].getrawmempool()\n+        assert_equal(len(mempool), 8)\n+        for txid in [txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH]:\n+            assert_equal(txid in mempool, True)\n+\n+        self.log.info(\"Find transactions spending outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+\n+        self.log.info(\"Find transaction spending multiple outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidE, 'vout' : 2}, {'txid' : txidF, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidE, 'vout' : 2, 'spendingtxid' : txidH}, {'txid' : txidF, 'vout' : 0, 'spendingtxid' : txidH} ])\n+\n+        self.log.info(\"Find no transaction when output is unspent\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidH, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidH, 'vout' : 0} ])\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidA, 'vout' : 5} ])\n+        assert_equal(result, [ {'txid' : txidA, 'vout' : 5} ])\n+\n+        self.log.info(\"Mixed spent and unspent outputs\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidB, 'vout' : 0}, {'txid' : txidG, 'vout' : 3} ])\n+        assert_equal(result, [ {'txid' : txidB, 'vout' : 0, 'spendingtxid' : txidD}, {'txid' : txidG, 'vout' : 3} ])\n+\n+        self.log.info(\"Unknown input fields\")\n+        result = self.nodes[0].getmempooltxspendingprevout([ {'txid' : txidC, 'vout' : 1, 'unknown' : 42} ])\n+        assert_equal(result, [ {'txid' : txidC, 'vout' : 1, 'spendingtxid' : txidG} ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r858039758",
      "id" : 858039758,
      "in_reply_to_id" : 856576738,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII584zJKXO",
      "original_commit_id" : "c3cde8ca864f13a638f558d1631f144ffa37e03d",
      "original_line" : 84,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 84,
      "pull_request_review_id" : 952469531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858039758/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T21:24:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858039758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re ACK 8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-26T00:17:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1109162622",
      "id" : 1109162622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CHHp-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109162622/reactions"
      },
      "updated_at" : "2022-04-26T00:17:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109162622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc Antoine for review (@darosior @ariard), if interested.",
      "created_at" : "2022-04-27T12:35:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1110947401",
      "id" : 1110947401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CN7ZJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110947401/reactions"
      },
      "updated_at" : "2022-04-27T12:35:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110947401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r859922532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859922532"
         }
      },
      "author_association" : "MEMBER",
      "body" : "super-nit: if you wanna normalize the wording, one of the information outcome of this RPC is that output might not be spent in fact, so might said \"the check output\" here and above.",
      "commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "created_at" : "2022-04-27T15:11:16Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r859922532",
      "id" : 859922532,
      "line" : 612,
      "node_id" : "PRRC_kwDOABII584zQWBk",
      "original_commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "original_line" : 612,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 26,
      "pull_request_review_id" : 955079717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859922532/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-27T15:18:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859922532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> A caveat : the usage of this RPC you're describing sounds unsafe to me. If you're desirous to monitor the spend of a shared-utxo such as LN funding output, your counterparty might be able to broadcast multiple conflicting transactions.\r\n\r\nThanks for the comments! But that shouldn't be an issue in our case (at least not related to this RPC). This RPC is helpful to react instantly once a shared output is spent. It doesn't matter if in the end it's another transaction that gets confirmed, we will learn this when we receive blocks and will then adapt. It then becomes a different problem of ensuring you're receiving blocks (avoiding complete eclipse attacks), which we solve by a combination of blockchain watchdogs and a good `bitcoind` setup.\r\n\r\nProtecting against commit tx pinning is an entirely separate issue as well, which exists regardless of whether this RPC exists or not.",
      "created_at" : "2022-04-28T06:39:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1111804552",
      "id" : 1111804552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CRMqI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111804552/reactions"
      },
      "updated_at" : "2022-04-28T06:39:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111804552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r860536095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860536095"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, done in https://github.com/bitcoin/bitcoin/pull/24408/commits/8f9335f19ce75515f9e6944de503a5278a92f464",
      "commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "created_at" : "2022-04-28T06:41:05Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r860536095",
      "id" : 860536095,
      "in_reply_to_id" : 859922532,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zSr0f",
      "original_commit_id" : "8c9152c1098acec4b1b4e333240f0e95eea21159",
      "original_line" : 612,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 955930692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860536095/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-28T06:41:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860536095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">@luke-jr can you detail how that would work? \r\n\r\nYou would add the txout you need to watch to the wallet (maybe we need to add a way to do that), then the wallet would scan every new block/tx internally, letting you know via listtransactions.\r\n\r\n>it would be wasteful to need both a watch-only wallet and a regular wallet to make this use-case work?\r\n\r\nAt least legacy wallets support both normal and watch-only in the same wallet...",
      "created_at" : "2022-04-29T20:09:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1113681008",
      "id" : 1113681008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CYWxw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113681008/reactions"
      },
      "updated_at" : "2022-04-29T20:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113681008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862421580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421580"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: With this change, RPC will not accept invalid/unrelated parameters.\r\n\r\n```suggestion\r\n                RPCTypeCheckObj(o,\r\n                                /*typesExpected=*/{\r\n                                    {\"txid\", UniValueType(UniValue::VSTR)},\r\n                                    {\"vout\", UniValueType(UniValue::VNUM)},\r\n                                }, /*fAllowNull=*/false, /*fStrict=*/true);\r\n```",
      "commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "created_at" : "2022-05-01T04:30:50Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the checked output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the checked output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862421580",
      "id" : 862421580,
      "line" : 639,
      "node_id" : "PRRC_kwDOABII584zZ4JM",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 639,
      "original_position" : 53,
      "original_start_line" : 635,
      "path" : "src/rpc/mempool.cpp",
      "position" : 53,
      "pull_request_review_id" : 958542031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421580/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 635,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-01T04:34:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862421744"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421744"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit (related to the previous suggestion): \r\n```suggestion\r\n        self.log.info(\"Unknown input fields\")\r\n        assert_raises_rpc_error(-3, \"Unexpected key unknown\", self.nodes[0].gettxspendingprevout, [{'txid' : txidC, 'vout' : 1, 'unknown' : 42}])\r\n```",
      "commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "created_at" : "2022-05-01T04:33:12Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=1)\n+        txF = create_tx(utxos_to_spend=[txC[\"new_utxos\"][0]], num_outputs=2)\n+        txG = create_tx(utxos_to_spend=[txC[\"new_utxos\"][1]], num_outputs=1)\n+        txH = create_tx(utxos_to_spend=[txE[\"new_utxos\"][0],txF[\"new_utxos\"][0]], num_outputs=1)\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\n+        ]\n+\n+        mempool = self.nodes[0].getrawmempool()\n+        assert_equal(len(mempool), 8)\n+        for txid in [txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH]:\n+            assert_equal(txid in mempool, True)\n+\n+        self.log.info(\"Find transactions spending outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+\n+        self.log.info(\"Find transaction spending multiple outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidE, 'vout' : 0}, {'txid' : txidF, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidE, 'vout' : 0, 'spendingtxid' : txidH}, {'txid' : txidF, 'vout' : 0, 'spendingtxid' : txidH} ])\n+\n+        self.log.info(\"Find no transaction when output is unspent\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidH, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidH, 'vout' : 0} ])\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidA, 'vout' : 5} ])\n+        assert_equal(result, [ {'txid' : txidA, 'vout' : 5} ])\n+\n+        self.log.info(\"Mixed spent and unspent outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidB, 'vout' : 0}, {'txid' : txidG, 'vout' : 3} ])\n+        assert_equal(result, [ {'txid' : txidB, 'vout' : 0, 'spendingtxid' : txidD}, {'txid' : txidG, 'vout' : 3} ])\n+\n+        self.log.info(\"Unknown input fields\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidC, 'vout' : 1, 'unknown' : 42} ])\n+        assert_equal(result, [ {'txid' : txidC, 'vout' : 1, 'spendingtxid' : txidG} ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862421744",
      "id" : 862421744,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII584zZ4Lw",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 84,
      "original_position" : 84,
      "original_start_line" : 82,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 84,
      "pull_request_review_id" : 958542031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421744/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 82,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-01T13:15:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862421744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862623302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862623302"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the tip! I'm leaning more towards being flexible here with regards to unknown parameters (see [this comment](https://github.com/bitcoin/bitcoin/pull/24408#discussion_r857348954)) but it's a weak preference, if you feel more strongly about being strict here I can apply your proposed change, let me know!",
      "commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "created_at" : "2022-05-02T06:51:00Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the checked output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the checked output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862623302",
      "id" : 862623302,
      "in_reply_to_id" : 862421580,
      "line" : 639,
      "node_id" : "PRRC_kwDOABII584zapZG",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 639,
      "original_position" : 53,
      "original_start_line" : 635,
      "path" : "src/rpc/mempool.cpp",
      "position" : 53,
      "pull_request_review_id" : 958759476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862623302/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 635,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-02T06:51:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862623302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr thanks, I understand what you mean, I didn't know a wallet could be both normal and watch-only. This is something that could make sense, we are currently doing this scan outside of `bitcoind`, but having `bitcoind` do it for us could be useful.\r\n\r\nDoes it completely replace this PR though? I can see value in having both options (a dedicated RPC and a watch-only feature), the watch-only mode could be added afterwards (especially if we see people starting to rely on this new RPC).\r\n",
      "created_at" : "2022-05-02T06:59:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1114552961",
      "id" : 1114552961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585CbrqB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114552961/reactions"
      },
      "updated_at" : "2022-05-02T06:59:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114552961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Conceptually, this feature needs a transaction indexer and that's what a wallet is. I think ideally this feature should be part of the wallet as a more general \"get spending tx by prevout\" feature, rather than a very usecase-specific feature leveraging the mempool index.\r\n\r\nI agree, and you're one step ahead, see #24539 :)\r\nThanks for the comments!\r\n",
      "created_at" : "2022-05-02T08:54:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1114635200",
      "id" : 1114635200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585Cb_vA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114635200/reactions"
      },
      "updated_at" : "2022-05-02T08:54:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114635200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862736367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862736367"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Both options work for me. I don't have a strong opinion on that.\r\nI just assume that if an invalid parameter is used then maybe the user is expecting different behavior than the default.",
      "commit_id" : "ad14372cab1897b3f5efafe9861ec696f5e97060",
      "created_at" : "2022-05-02T10:17:43Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the checked output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the checked output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862736367",
      "id" : 862736367,
      "in_reply_to_id" : 862421580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zbE_v",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 639,
      "original_position" : 53,
      "original_start_line" : 635,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 958913246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862736367/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-02T10:17:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862736367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862766245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766245"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since both you and @glozow noticed this, it's probably worth making this stricter as you suggest. Done in https://github.com/bitcoin/bitcoin/pull/24408/commits/ad14372cab1897b3f5efafe9861ec696f5e97060",
      "commit_id" : "ad14372cab1897b3f5efafe9861ec696f5e97060",
      "created_at" : "2022-05-02T11:20:45Z",
      "diff_hunk" : "@@ -587,6 +587,89 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the checked output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the checked output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862766245",
      "id" : 862766245,
      "in_reply_to_id" : 862421580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zbMSl",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 639,
      "original_position" : 53,
      "original_start_line" : 635,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 958954861,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766245/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-02T11:20:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862766318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766318"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, done in https://github.com/bitcoin/bitcoin/pull/24408/commits/ad14372cab1897b3f5efafe9861ec696f5e97060",
      "commit_id" : "ad14372cab1897b3f5efafe9861ec696f5e97060",
      "created_at" : "2022-05-02T11:20:53Z",
      "diff_hunk" : "@@ -0,0 +1,103 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.generate(self.wallet, COINBASE_MATURITY + 1)\n+        self.wallet.rescan_utxos()\n+        confirmed_utxo = self.wallet.get_utxo()\n+\n+        # Create a tree of unconfirmed transactions in the mempool:\n+        #             txA\n+        #             / \\\n+        #            /   \\\n+        #           /     \\\n+        #          /       \\\n+        #         /         \\\n+        #       txB         txC\n+        #       / \\         / \\\n+        #      /   \\       /   \\\n+        #    txD   txE   txF   txG\n+        #            \\   /\n+        #             \\ /\n+        #             txH\n+\n+        def create_tx(**kwargs):\n+            return self.wallet.send_self_transfer_multi(\n+                from_node=self.nodes[0],\n+                **kwargs,\n+            )\n+\n+        txA = create_tx(utxos_to_spend=[confirmed_utxo], num_outputs=2)\n+        txB = create_tx(utxos_to_spend=[txA[\"new_utxos\"][0]], num_outputs=2)\n+        txC = create_tx(utxos_to_spend=[txA[\"new_utxos\"][1]], num_outputs=2)\n+        txD = create_tx(utxos_to_spend=[txB[\"new_utxos\"][0]], num_outputs=1)\n+        txE = create_tx(utxos_to_spend=[txB[\"new_utxos\"][1]], num_outputs=1)\n+        txF = create_tx(utxos_to_spend=[txC[\"new_utxos\"][0]], num_outputs=2)\n+        txG = create_tx(utxos_to_spend=[txC[\"new_utxos\"][1]], num_outputs=1)\n+        txH = create_tx(utxos_to_spend=[txE[\"new_utxos\"][0],txF[\"new_utxos\"][0]], num_outputs=1)\n+        txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH = [\n+            tx[\"txid\"] for tx in [txA, txB, txC, txD, txE, txF, txG, txH]\n+        ]\n+\n+        mempool = self.nodes[0].getrawmempool()\n+        assert_equal(len(mempool), 8)\n+        for txid in [txidA, txidB, txidC, txidD, txidE, txidF, txidG, txidH]:\n+            assert_equal(txid in mempool, True)\n+\n+        self.log.info(\"Find transactions spending outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+\n+        self.log.info(\"Find transaction spending multiple outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidE, 'vout' : 0}, {'txid' : txidF, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidE, 'vout' : 0, 'spendingtxid' : txidH}, {'txid' : txidF, 'vout' : 0, 'spendingtxid' : txidH} ])\n+\n+        self.log.info(\"Find no transaction when output is unspent\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidH, 'vout' : 0} ])\n+        assert_equal(result, [ {'txid' : txidH, 'vout' : 0} ])\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidA, 'vout' : 5} ])\n+        assert_equal(result, [ {'txid' : txidA, 'vout' : 5} ])\n+\n+        self.log.info(\"Mixed spent and unspent outputs\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidB, 'vout' : 0}, {'txid' : txidG, 'vout' : 3} ])\n+        assert_equal(result, [ {'txid' : txidB, 'vout' : 0, 'spendingtxid' : txidD}, {'txid' : txidG, 'vout' : 3} ])\n+\n+        self.log.info(\"Unknown input fields\")\n+        result = self.nodes[0].gettxspendingprevout([ {'txid' : txidC, 'vout' : 1, 'unknown' : 42} ])\n+        assert_equal(result, [ {'txid' : txidC, 'vout' : 1, 'spendingtxid' : txidG} ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#discussion_r862766318",
      "id" : 862766318,
      "in_reply_to_id" : 862421744,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zbMTu",
      "original_commit_id" : "8f9335f19ce75515f9e6944de503a5278a92f464",
      "original_line" : 84,
      "original_position" : 84,
      "original_start_line" : 82,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 958954944,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-02T11:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862766318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Simple rebase on `master` without any changes in https://github.com/bitcoin/bitcoin/pull/24408/commits/418557034055f740951294e7677ae9fd5149ea9b",
      "created_at" : "2022-05-05T13:16:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1118537370",
      "id" : 1118537370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585Cq4aa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1118537370/reactions"
      },
      "updated_at" : "2022-05-05T13:16:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1118537370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't have any pending issues on that PR, if @ariard @darosior @glozow @MarcoFalke you have time to give this another pass whenever possible it would be great :pray: ",
      "created_at" : "2022-05-18T07:44:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1129681061",
      "id" : 1129681061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585DVZCl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1129681061/reactions"
      },
      "updated_at" : "2022-05-18T07:44:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1129681061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @glozow ",
      "created_at" : "2022-05-23T07:30:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1134289715",
      "id" : 1134289715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
      "node_id" : "IC_kwDOABII585Dm-Mz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134289715/reactions"
      },
      "updated_at" : "2022-05-23T07:30:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134289715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
