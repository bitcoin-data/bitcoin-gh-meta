[
   {
      "author_association" : "MEMBER",
      "body" : "What are the steps to reproduce (on regtest, if possible)?",
      "created_at" : "2021-07-15T09:38:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-880550674",
      "id" : 880550674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MDU1MDY3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T09:38:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/880550674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I tried it on mainnet, but I'm assume that the steps are identical for regtest.\r\n\r\n1. Create a new address: 'getnewaddress`\r\n2. Create raw transaction using `createrawtransaction`\r\n3. Sign the transaction with `signrawtransactionwithwallet`\r\n\r\nAt the bitcoin.conf I added this line:\r\n```\r\naddresstype=p2sh-segwit\r\n```\r\n",
      "created_at" : "2021-07-15T10:45:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-880593134",
      "id" : 880593134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MDU5MzEzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T10:45:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/880593134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17683901?v=4",
         "events_url" : "https://api.github.com/users/liorko87/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorko87/followers",
         "following_url" : "https://api.github.com/users/liorko87/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorko87/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorko87",
         "id" : 17683901,
         "login" : "liorko87",
         "node_id" : "MDQ6VXNlcjE3NjgzOTAx",
         "organizations_url" : "https://api.github.com/users/liorko87/orgs",
         "received_events_url" : "https://api.github.com/users/liorko87/received_events",
         "repos_url" : "https://api.github.com/users/liorko87/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorko87/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorko87/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorko87"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I tried it on mainnet, but I'm assume that the steps are identical for regtest.\r\n\r\n@liorko87 Can you try this on testnet in a new wallet?\r\n\r\n> 2. Create raw transaction using `createrawtransaction`\r\n\r\nWhat parameters did you use with `createrawtransaction`? I am not able to reproduce this using the steps you mentioned\r\n\r\n",
      "created_at" : "2021-07-22T01:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-884596026",
      "id" : 884596026,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII5840ud06",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-22T01:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/884596026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@prayank23 I tried also on the testnet and the same happens to me.\r\nI also generated new SegWit addresses and received this error after I called `signrawtransactionwithkey`:\r\n`\"error\": \"Witness program hash mismatch\"`",
      "created_at" : "2021-07-28T09:11:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-888147934",
      "id" : 888147934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII58408A_e",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T09:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888147934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17683901?v=4",
         "events_url" : "https://api.github.com/users/liorko87/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorko87/followers",
         "following_url" : "https://api.github.com/users/liorko87/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorko87/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorko87",
         "id" : 17683901,
         "login" : "liorko87",
         "node_id" : "MDQ6VXNlcjE3NjgzOTAx",
         "organizations_url" : "https://api.github.com/users/liorko87/orgs",
         "received_events_url" : "https://api.github.com/users/liorko87/received_events",
         "repos_url" : "https://api.github.com/users/liorko87/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorko87/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorko87/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorko87"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "We will need exact steps to reproduce (with arguments you provided to the calls)",
      "created_at" : "2021-07-28T09:13:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-888149464",
      "id" : 888149464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII58408BXY",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T09:13:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888149464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Steps to reproduce:\r\n1. Generate two new addresses in different wallets \r\n```\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node1 getnewaddress\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node2 getnewaddress\r\n```\r\n2. Set transaction fee\r\n```\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node1 settxfee 0.02\r\n```\r\n3.  Send money to address\r\n```\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node1 sendtoaddress <wallet_2_address> 0.5\r\n```\r\n4. Create raw transaction\r\n```\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node1 createrawtransaction \\\r\n '[{\"txid\":\"tx_id_stage#3\",\"vout\":0}]' \\\r\n '[{\"<wallet_1_address>\": amount_available_after_transaction_completed}]\r\n```\r\n5. Signed the raw transaction- I tried with `signedrawtransactionwithwallet` and `signrawtransactionwithkey`\r\n```\r\n./bitcoin-cli --datadir=~/bitcoinNodes/node1/signrawtransactionwithkey signed_tx_hex \\\r\n '[private_key_array]'\r\n```",
      "created_at" : "2021-08-01T14:06:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-890526995",
      "id" : 890526995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII5841FF0T",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T14:06:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890526995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17683901?v=4",
         "events_url" : "https://api.github.com/users/liorko87/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorko87/followers",
         "following_url" : "https://api.github.com/users/liorko87/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorko87/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorko87",
         "id" : 17683901,
         "login" : "liorko87",
         "node_id" : "MDQ6VXNlcjE3NjgzOTAx",
         "organizations_url" : "https://api.github.com/users/liorko87/orgs",
         "received_events_url" : "https://api.github.com/users/liorko87/received_events",
         "repos_url" : "https://api.github.com/users/liorko87/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorko87/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorko87/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorko87"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Here is another insight- when I'm generating two SegWit addresses and remove the last stage (`signrawtransactionwithkey`), everything works perfectly.",
      "created_at" : "2021-08-02T08:26:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-890833716",
      "id" : 890833716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII5841GQs0",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-02T08:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890833716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17683901?v=4",
         "events_url" : "https://api.github.com/users/liorko87/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorko87/followers",
         "following_url" : "https://api.github.com/users/liorko87/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorko87/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorko87",
         "id" : 17683901,
         "login" : "liorko87",
         "node_id" : "MDQ6VXNlcjE3NjgzOTAx",
         "organizations_url" : "https://api.github.com/users/liorko87/orgs",
         "received_events_url" : "https://api.github.com/users/liorko87/received_events",
         "repos_url" : "https://api.github.com/users/liorko87/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorko87/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorko87/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorko87"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The issue was using an address that is not in the wallet.\r\nTherefore, I could not sign the transaction.",
      "created_at" : "2021-09-13T08:11:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22451#issuecomment-917948008",
      "id" : 917948008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22451",
      "node_id" : "IC_kwDOABII5842tsZo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-13T08:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917948008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17683901?v=4",
         "events_url" : "https://api.github.com/users/liorko87/events{/privacy}",
         "followers_url" : "https://api.github.com/users/liorko87/followers",
         "following_url" : "https://api.github.com/users/liorko87/following{/other_user}",
         "gists_url" : "https://api.github.com/users/liorko87/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/liorko87",
         "id" : 17683901,
         "login" : "liorko87",
         "node_id" : "MDQ6VXNlcjE3NjgzOTAx",
         "organizations_url" : "https://api.github.com/users/liorko87/orgs",
         "received_events_url" : "https://api.github.com/users/liorko87/received_events",
         "repos_url" : "https://api.github.com/users/liorko87/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/liorko87/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/liorko87/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/liorko87"
      }
   }
]
