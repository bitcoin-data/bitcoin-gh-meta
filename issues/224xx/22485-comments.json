[
   {
      "author_association" : "NONE",
      "body" : "nice Tq",
      "created_at" : "2021-07-18T18:25:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-882098587",
      "id" : 882098587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5840k8Gb",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-18T18:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882098587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74440825?v=4",
         "events_url" : "https://api.github.com/users/Bocoi5011/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bocoi5011/followers",
         "following_url" : "https://api.github.com/users/Bocoi5011/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bocoi5011/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bocoi5011",
         "id" : 74440825,
         "login" : "Bocoi5011",
         "node_id" : "MDQ6VXNlcjc0NDQwODI1",
         "organizations_url" : "https://api.github.com/users/Bocoi5011/orgs",
         "received_events_url" : "https://api.github.com/users/Bocoi5011/received_events",
         "repos_url" : "https://api.github.com/users/Bocoi5011/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bocoi5011/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bocoi5011/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bocoi5011"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25193](https://github.com/bitcoin/bitcoin/pull/25193) (indexes: Read the locator's top block during init, allow interaction with reindex-chainstate by mzumsande)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-07-19T00:04:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-882138024",
      "id" : 882138024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5840lFuo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882138024/reactions"
      },
      "updated_at" : "2022-07-21T00:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882138024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672112880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672112880"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you mean with \"until the next restart\"? Once the index is in sync with the active chain tip, it will stay that way, regardless of restarts. The only way it could get out of sync is when you disable the index on a restart, advance the tip, then enable it again. Am I missing something?",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2021-07-19T08:52:23Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672112880",
      "id" : 672112880,
      "line" : 72,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjExMjg4MA==",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 709309310,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-19T08:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672112880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672130887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672130887"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is contingent on how fast the particular indexing process is; you can imagine that if a given index takes (for the sake of argument) a minute per block to build, if we get 1000 blocks connected and then the user shuts down immediately, the validationinterface queue may not clear* and we will start up out of sync after having been \"synced\" in the degenerate way. Does this make sense?\r\n\r\n*I know we wait for this queue to clear during a graceful shutdown, but we can't assume this.",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2021-07-19T09:17:05Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672130887",
      "id" : 672130887,
      "in_reply_to_id" : 672112880,
      "line" : 72,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjEzMDg4Nw==",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 709332569,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-19T09:17:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672130887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nAny easy way to confirm this behavior, regarding BlockConnected signals vs.\r\nusing ThreadSync()? Would be willing to test it out.",
      "created_at" : "2021-07-30T10:14:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-889792034",
      "id" : 889792034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5841CSYi",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-30T10:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889792034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Worth merging? Anything left to do here? Should I close?",
      "created_at" : "2021-10-29T13:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-954763822",
      "id" : 954763822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII58446Iou",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954763822/reactions"
      },
      "updated_at" : "2021-10-29T13:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954763822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r741400913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: doc/log BaseIndex sync behavior with empty datadir\" (2b48b03f9b6fd3126f957f328dd559fadceeaa7f)\r\n\r\nI also found this confusing and would suggest just saying \"the index will get updated and stay in sync through BlockConnected notifications\"",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2021-11-02T19:27:29Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r741400913",
      "id" : 741400913,
      "in_reply_to_id" : 672112880,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII584sMOFR",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 795833906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T19:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Reopening as I think this is still a useful clarification when trying to remind myself of how indexation works.",
      "created_at" : "2022-01-10T20:58:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-1009335766",
      "id" : 1009335766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5848KT3W",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009335766/reactions"
      },
      "updated_at" : "2022-01-10T20:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009335766",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It is recommended to address the feedback comments in some way before merge",
      "created_at" : "2022-01-11T08:59:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-1009730745",
      "id" : 1009730745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5848L0S5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009730745/reactions"
      },
      "updated_at" : "2022-01-11T08:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009730745",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r782186949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782186949"
         }
      },
      "author_association" : "MEMBER",
      "body" : "My issue with your suggested comment is that that isn't a complete picture of what's going on - as described above, indexation will only happen via BlockConnectected notifications until the next restart. If we have a hard shutoff that doesn't clear the validation queue, the index will sync sequentially in `ThreadSync()`, which makes that comment somewhat misleading.",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-01-11T14:15:08Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r782186949",
      "id" : 782186949,
      "in_reply_to_id" : 672112880,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII584unznF",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 849237377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782186949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:15:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782186949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I guess I like the new comments, but I'm just unsure what the log message adds.\r\n\r\nIt's obviously not mandatory, but I found the whole indexation process a little confusing and so I figured the more hints the better?",
      "created_at" : "2022-01-11T14:16:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-1010006198",
      "id" : 1010006198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII5848M3i2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010006198/reactions"
      },
      "updated_at" : "2022-01-11T14:16:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010006198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r830676207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/830676207"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I also think that there shouldn't be a `LogPrintf` here: At this point in time, we only use this information for skipping the prune violation checks, we aren't \"officially\" synced.\r\nFor signaling to a user that an index is synced, we already have a `LogPrintf` in [`ThreadSync`](https://github.com/bitcoin/bitcoin/blob/ae005a647ffa1d457c5c7a0528cb29f3b1937b96/src/index/base.cpp#L195-L199): It currently says \"[indexname] is enabled\" in case of an empty chain, and \"[indexname] is enabled at height X\" otherwise - we could add an \"due to an empty chain\" here.\r\nBut two messages for the same thing would only be confusing in my opinion.",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-03-20T21:33:57Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r830676207",
      "id" : 830676207,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584xgxzv",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 75,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 10,
      "pull_request_review_id" : 915153115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/830676207/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-20T21:38:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/830676207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831486456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831486456"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is fine. I think I'm just agreeing with Marco that the comment seemed a little strange because I didn't know what it might be implying. It seems obvious there will be no BlockConnected signals if the process is dead.",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-03-21T19:49:07Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831486456",
      "id" : 831486456,
      "in_reply_to_id" : 672112880,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII584xj3n4",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 916279088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831486456/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-21T20:04:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831486456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831494995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831494995"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@mzumsande, maybe you could be specific about what is confusing? Do you only think this is redundant, or do you think there is something misleading or contradictory about these messages?\r\n\r\nIf I were adding a log message here I'd probably say \"Chain height is 0. Index is synced.\" but I don't know if that helps. \r\n\r\nMessage in the PR seems basically ok to me. (I would just drop \"fully\" because no index will be fully synced until the last bitcoin block is produced)",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-03-21T20:00:31Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831494995",
      "id" : 831494995,
      "in_reply_to_id" : 830676207,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584xj5tT",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 75,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 10,
      "pull_request_review_id" : 916279088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831494995/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-21T20:04:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831494995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831507691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831507691"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The log is \r\n```\r\nInit: txindex considered fully synced due to empty chain\r\ntxindex thread start\r\ntxindex is enabled\r\ntxindex thread exit\r\n```\r\n(potentially x3 for each index). \r\nI'd find it a bit confusing why we'd need to start a thread to sync an index right after saying that the index is fully synced. So I think it could be simpler:\r\n```\r\ntxindex thread start\r\ntxindex is enabled due to an empty chain\r\ntxindex thread exit\r\n```",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-03-21T20:17:52Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831507691",
      "id" : 831507691,
      "in_reply_to_id" : 830676207,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584xj8zr",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 75,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 10,
      "pull_request_review_id" : 916308847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831507691/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-21T20:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831507691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831559373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831559373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd find it a bit confusing why we'd need to start a thread to sync an index right after saying that the index is fully synced. \r\n\r\nI see. You don't think the log message gives a misleading impression. You think the log message gives a correct impression that the code is doing something stupid, and it's confusing why the stupid thing would be happening. Fair enough!",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-03-21T21:29:42Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r831559373",
      "id" : 831559373,
      "in_reply_to_id" : 830676207,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584xkJbN",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 75,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 10,
      "pull_request_review_id" : 916380057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831559373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-21T21:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/831559373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r851813967"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851813967"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree with @mzumsande that this is unnecessary. It just doesn't seem like the right place for this kind of information. The information that the code is something stupid seems fine as just a code comment while the logs are also viewed by non-developers who might be confused.",
      "commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "created_at" : "2022-04-17T23:07:23Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r851813967",
      "id" : 851813967,
      "in_reply_to_id" : 830676207,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584yxaZP",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 75,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 10,
      "pull_request_review_id" : 943992694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851813967/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-17T23:51:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851813967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r923782380"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923782380"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've removed this log; now the entire change is doc-only.",
      "commit_id" : "11780f29e7c3f50fb7717fc98950ece9385d314b",
      "created_at" : "2022-07-18T19:31:51Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r923782380",
      "id" : 923782380,
      "in_reply_to_id" : 830676207,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843D8zs",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 78,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1042430814,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923782380/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-18T19:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/923782380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r926742832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926742832"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doesn't look like anything has changed, did you push the wrong commit?",
      "commit_id" : "11780f29e7c3f50fb7717fc98950ece9385d314b",
      "created_at" : "2022-07-21T14:24:35Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r926742832",
      "id" : 926742832,
      "in_reply_to_id" : 830676207,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843PPkw",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 78,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1046628794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926742832/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T14:24:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926742832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r926751376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926751376"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops, thanks @mzumsande.",
      "commit_id" : "11780f29e7c3f50fb7717fc98950ece9385d314b",
      "created_at" : "2022-07-21T14:31:41Z",
      "diff_hunk" : "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n+    if (!m_best_block_index && !active_chain.Tip()) {\n+        LogPrintf(\"%s: %s considered fully synced due to empty chain\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r926751376",
      "id" : 926751376,
      "in_reply_to_id" : 830676207,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843PRqQ",
      "original_commit_id" : "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
      "original_line" : 78,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1046641029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926751376/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T14:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926751376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 11780f29e7c3f50fb7717fc98950ece9385d314b",
      "created_at" : "2022-07-21T17:45:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-1191766677",
      "id" : 1191766677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
      "node_id" : "IC_kwDOABII585HCOqV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191766677/reactions"
      },
      "updated_at" : "2022-07-21T17:45:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191766677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
