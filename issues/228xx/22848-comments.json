[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22849](https://github.com/bitcoin/bitcoin/pull/22849) (Remove unused SERIALIZE_METHODS for CBanEntry by MarcoFalke)\n* [#22762](https://github.com/bitcoin/bitcoin/pull/22762) (Raise InitError when peers.dat is invalid or corrupted by MarcoFalke)\n* [#22362](https://github.com/bitcoin/bitcoin/pull/22362) (Drop only invalid entries when reading banlist.json by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-01T07:19:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#issuecomment-910000024",
      "id" : 910000024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22848",
      "node_id" : "IC_kwDOABII5842PX-Y",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T07:19:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910000024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-01T09:25:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#issuecomment-910103783",
      "id" : 910103783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22848",
      "node_id" : "IC_kwDOABII5842PxTn",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T09:25:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910103783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased b3f46e9058cfdcb2825ea76ed7d5d3c060486a39 -> 19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6 ([`pr/ipc-banmap.1`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-banmap.1) -> [`pr/ipc-banmap.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-banmap.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-banmap.1-rebase..pr/ipc-banmap.2)) due to conflict with #22849",
      "created_at" : "2021-09-03T15:38:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#issuecomment-912628944",
      "id" : 912628944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22848",
      "node_id" : "IC_kwDOABII5842ZZzQ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-03T15:38:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912628944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r701997262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701997262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why?",
      "commit_id" : "19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6",
      "created_at" : "2021-09-03T15:43:21Z",
      "diff_hunk" : "@@ -6,10 +6,55 @@\n #define BITCOIN_NET_TYPES_H\n \n #include <map>\n+#include <serialize.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r701997262",
      "id" : 701997262,
      "line" : 9,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMTk5NzI2Mg==",
      "original_commit_id" : "19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6",
      "original_line" : 9,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 4,
      "pull_request_review_id" : 746252320,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-03T15:43:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701997262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r702000182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/702000182"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> why?\r\n\r\nI must have added it to avoid compile errors before #22849. Probably wasn't the right place to add the include in any case, though. Will remove",
      "commit_id" : "19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6",
      "created_at" : "2021-09-03T15:46:18Z",
      "diff_hunk" : "@@ -6,10 +6,55 @@\n #define BITCOIN_NET_TYPES_H\n \n #include <map>\n+#include <serialize.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r702000182",
      "id" : 702000182,
      "in_reply_to_id" : 701997262,
      "line" : 9,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMjAwMDE4Mg==",
      "original_commit_id" : "19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6",
      "original_line" : 9,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 4,
      "pull_request_review_id" : 746255026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-03T15:46:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/702000182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 19b23cf07636a87e5eb0742d52e5a8b6a7e53ce6 -> 6919c823cbce92248647880fb1d912828449ae57 ([`pr/ipc-banmap.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-banmap.2) -> [`pr/ipc-banmap.3`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-banmap.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-banmap.2..pr/ipc-banmap.3)) tweaking include",
      "created_at" : "2021-09-03T17:32:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#issuecomment-912697916",
      "id" : 912697916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22848",
      "node_id" : "IC_kwDOABII5842Zqo8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-03T17:32:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912697916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r702719863"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/702719863"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Any reason not to use `#include <univalue.h>` here instead of `class UniValue;` (there is no circular dependency in this case)?\r\n\r\nI think by default it should be preferred to include the header instead of doing the forward declaration. And if the forward declaration is really necessary (e.g. circular dependency, compilation speed concerns) then that should be in its own header that is included by \"users\". For example, it is annoying to have to change `struct Foo` to `class Foo` with forward declarations spilled all over the place.",
      "commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "created_at" : "2021-09-06T08:46:05Z",
      "diff_hunk" : "@@ -5,11 +5,56 @@\n #ifndef BITCOIN_NET_TYPES_H\n #define BITCOIN_NET_TYPES_H\n \n+#include <cstdint>\n #include <map>\n \n-class CBanEntry;\n class CSubNet;\n+class UniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r702719863",
      "id" : 702719863,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMjcxOTg2Mw==",
      "original_commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 9,
      "pull_request_review_id" : 746978834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-06T08:47:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/702719863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r703573706"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703573706"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Any reason not to use `#include <univalue.h>` here instead of `class UniValue;` (there is no circular dependency in this case)?\r\n> \r\n> I think by default it should be preferred to include the header instead of doing the forward declaration. And if the forward declaration is really necessary (e.g. circular dependency, compilation speed concerns) then that should be in its own header that is included by \"users\". For example, it is annoying to have to change `struct Foo` to `class Foo` with forward declarations spilled all over the place.\r\n\r\nI have the opposite preference and prefer simple forward declarations whenever possible instead of includes. (Simple forward declarations meaning declarations like `class Foo;` or `struct Foo;` `enum class Foo;` not declarations for templates, typedefs, or std:: types). I don't think forward declarations are just a workaround for circular dependencies. I think they also are important for keeping build times under control and for eliminating dependencies between modules while allowing them to pass data in an opaque but type safe way (avoiding void*). It's possible my preference is out of date (it comes from working on projects using IWYU https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md#why-forward-declare), though, and it probably wouldn't be a bad idea to have a linter or developer note for more consistency here if you wanted to follow up!",
      "commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "created_at" : "2021-09-07T14:40:10Z",
      "diff_hunk" : "@@ -5,11 +5,56 @@\n #ifndef BITCOIN_NET_TYPES_H\n #define BITCOIN_NET_TYPES_H\n \n+#include <cstdint>\n #include <map>\n \n-class CBanEntry;\n class CSubNet;\n+class UniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r703573706",
      "id" : 703573706,
      "in_reply_to_id" : 702719863,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzU3MzcwNg==",
      "original_commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 9,
      "pull_request_review_id" : 748062978,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-07T14:40:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703573706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r703585610"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703585610"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think our compile requirements (both time and space) are still too high. Even if all of the heavy boost was removed, we'd still have our own heavy serialize which is included ~everywhere and thus parsed and compiled each time, even if it isn't used. I agree with Russ that  includes should be kept at a minimum (iwyu) and forward decls are acceptable as well. It would be nice if iwyu  (or something similar) was used more regularly in the dev flow, so that oversights such as https://github.com/bitcoin/bitcoin/pull/22740#issuecomment-911461646 don't happen in the future.",
      "commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "created_at" : "2021-09-07T14:53:09Z",
      "diff_hunk" : "@@ -5,11 +5,56 @@\n #ifndef BITCOIN_NET_TYPES_H\n #define BITCOIN_NET_TYPES_H\n \n+#include <cstdint>\n #include <map>\n \n-class CBanEntry;\n class CSubNet;\n+class UniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r703585610",
      "id" : 703585610,
      "in_reply_to_id" : 702719863,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzU4NTYxMA==",
      "original_commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 9,
      "pull_request_review_id" : 748079057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-07T14:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703585610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r705200466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705200466"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alright, https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md#why-forward-declare mentions some pros and cons of forward declarations and also a workaround of the cons - a 'forwarding headers'.\r\n\r\nWhat about this: https://google.github.io/styleguide/cppguide.html#Forward_Declarations\r\n> * Forward declarations can hide a dependency, allowing user code to skip necessary recompilation when headers change.\r\n> * ... Replacing an #include with a forward declaration can silently change the meaning of code ...\r\n\r\nI think each one of those two is very nasty on its own.\r\n\r\nDid anybody bother to measure the compilation time improvement due to forward declarations? I suspect it may be insignificant.",
      "commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "created_at" : "2021-09-09T10:29:54Z",
      "diff_hunk" : "@@ -5,11 +5,56 @@\n #ifndef BITCOIN_NET_TYPES_H\n #define BITCOIN_NET_TYPES_H\n \n+#include <cstdint>\n #include <map>\n \n-class CBanEntry;\n class CSubNet;\n+class UniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r705200466",
      "id" : 705200466,
      "in_reply_to_id" : 702719863,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTIwMDQ2Ng==",
      "original_commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 9,
      "pull_request_review_id" : 750162827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-09T10:29:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705200466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r705237337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705237337"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> * Forward declarations can hide a dependency, allowing user code to skip necessary recompilation when headers change.\r\n> * ... Replacing an #include with a forward declaration can silently change the meaning of code ...\r\n> \r\n> I think each one of those two is very nasty on its own.\r\n\r\nThe first one would just result in link errors instead of compile errors. Not especially nasty as far as I can see. The second one seems like FUD. Is there a realistic example of this happening? Could the example happen accidentally, or would you have to go out of your way to engineer an it like in void* inheritance case? If this could happen accidentally, would basic sentient human code review or use of \"grep\" catch it?\r\n\r\nThere are practical benefits to using simple forward declarations like the non-template non-typedef non-std:: ones I write myself, or the ones created by the IWYU tool. Obviously there are specific situations where forward declarations are bad to use and the google style guide covers them well. But there is no reason to throw out the baby with the bathwater with another one of these \"X considered harmful\" proclamations. Especially since unlike other X's, you can't actually get rid forward includes if you want to write type-safe modular code.\r\n\r\nI will also say that I like the use of forward declarations aesthetically and semantically. An include says \"the code in this file depends on this code in this other file\". A forward declaration when it is properly used (something enforceable by IWYU) says \"the code in this file does NOT depend on this type, and is just letting code in two other files that do you use the type communicate safely.\"",
      "commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "created_at" : "2021-09-09T11:26:15Z",
      "diff_hunk" : "@@ -5,11 +5,56 @@\n #ifndef BITCOIN_NET_TYPES_H\n #define BITCOIN_NET_TYPES_H\n \n+#include <cstdint>\n #include <map>\n \n-class CBanEntry;\n class CSubNet;\n+class UniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22848#discussion_r705237337",
      "id" : 705237337,
      "in_reply_to_id" : 702719863,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTIzNzMzNw==",
      "original_commit_id" : "6919c823cbce92248647880fb1d912828449ae57",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_types.h",
      "position" : 9,
      "pull_request_review_id" : 750211644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22848",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-09T11:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705237337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
