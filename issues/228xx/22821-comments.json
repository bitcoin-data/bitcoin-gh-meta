[
   {
      "author_association" : "MEMBER",
      "body" : "I don't think there is any bug here, just a misunderstanding of how the software works.\r\n\r\nThere are a few possible issues with the provided script that could cause an insufficient funds message.\r\n\r\nFirst, your input specification could be incorrect. You have specified `\"vout\": 0`, but there is no guarantee that the UTXO you want is at index 0. If the UTXO is not in the wallet, then the wallet will not know anything about it and cannot create the transaction.\r\n\r\nSecond, You have only imported the address, not the public key. The wallet does not have enough information to estimate the size of the signed input so it is unable to choose inputs. You will need to import a public key rather than just the address.",
      "created_at" : "2021-08-27T23:10:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22821#issuecomment-907519554",
      "id" : 907519554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22821",
      "node_id" : "IC_kwDOABII5842F6ZC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-27T23:10:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/907519554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@achow101 Thanks for your comments!\r\n\r\nMy example script does indeed have the incorrect `vout` configured.  I corrected it and can confirm that when the outpoint is correct (known via the call to `listtransactions`), the call to `walletcreatefundedpsbt` fails with the same error.  \r\n\r\nYour second point makes a lot of sense.  I was expecting the wallet to use a heuristic, such as assume all signatures are as large as possible, rather than failing.  It seems appropriate to have a different error message here, if this is indeed what is happening.",
      "created_at" : "2021-08-27T23:30:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22821#issuecomment-907525039",
      "id" : 907525039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22821",
      "node_id" : "IC_kwDOABII5842F7uv",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-27T23:30:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/907525039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22924983?v=4",
         "events_url" : "https://api.github.com/users/GambolingPangolin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GambolingPangolin/followers",
         "following_url" : "https://api.github.com/users/GambolingPangolin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GambolingPangolin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GambolingPangolin",
         "id" : 22924983,
         "login" : "GambolingPangolin",
         "node_id" : "MDQ6VXNlcjIyOTI0OTgz",
         "organizations_url" : "https://api.github.com/users/GambolingPangolin/orgs",
         "received_events_url" : "https://api.github.com/users/GambolingPangolin/received_events",
         "repos_url" : "https://api.github.com/users/GambolingPangolin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GambolingPangolin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GambolingPangolin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GambolingPangolin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@achow101 I updated the [script][script] and verified that your suggestion to import the public key does give the expected result.  Thanks for your help!\r\n\r\n[script]: https://gist.github.com/GambolingPangolin/587c46e9e5421a5401973406a0869519",
      "created_at" : "2021-08-30T16:09:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22821#issuecomment-908472723",
      "id" : 908472723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22821",
      "node_id" : "IC_kwDOABII5842JjGT",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-30T16:09:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908472723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22924983?v=4",
         "events_url" : "https://api.github.com/users/GambolingPangolin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GambolingPangolin/followers",
         "following_url" : "https://api.github.com/users/GambolingPangolin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GambolingPangolin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GambolingPangolin",
         "id" : 22924983,
         "login" : "GambolingPangolin",
         "node_id" : "MDQ6VXNlcjIyOTI0OTgz",
         "organizations_url" : "https://api.github.com/users/GambolingPangolin/orgs",
         "received_events_url" : "https://api.github.com/users/GambolingPangolin/received_events",
         "repos_url" : "https://api.github.com/users/GambolingPangolin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GambolingPangolin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GambolingPangolin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GambolingPangolin"
      }
   }
]
