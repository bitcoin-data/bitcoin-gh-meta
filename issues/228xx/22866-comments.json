[
   {
      "author_association" : "MEMBER",
      "body" : "See also #16719 (gRPC)",
      "created_at" : "2021-09-14T09:05:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22866#issuecomment-918960017",
      "id" : 918960017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22866",
      "node_id" : "IC_kwDOABII5842xjeR",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-14T09:05:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/918960017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Example encoding of `createrawtransaction` body:\r\n\r\nJSON:\r\n\r\n```python\r\n\"{'txid':'b4cc287e58f87cdae59417329f710f3ecd75a4ee1d2872b7248f50977c8493f3','vout':1,'scriptPubKey':'a914b10c9df5f7edf436c697f02f1efdba4cf399615187','redeemScript':'512103debedc17b3df2badbcdd86d5feb4562b86fe182e5998abd8bcd4f122c6155b1b21027e940bb73ab8732bfdf7f9216ecefca5b94d6df834e77e108f68e66f126044c052ae'}\"\r\n```\r\n\r\nCBOR:\r\n\r\n```python\r\nb'\\xa4dtxid\\x98 \\x0b\\x0c\\x02\\x07\\x05\\x0f\\x07\\r\\x0e\\t\\x01\\x03\\t\\x07\\x00\\x03\\x0c\\x07\\n\\x0e\\x01\\x02\\x07\\x0b\\x02\\x08\\x05\\t\\x07\\x08\\t\\x0fdvout\\x01lscriptPubKey\\x97\\n\\x01\\x0b\\x00\\t\\x0f\\x0f\\x0e\\x0f\\x03\\x0c\\t\\x0f\\x02\\x01\\x0f\\x0b\\x04\\x0f\\t\\x06\\x05\\x08lredeemScript\\x98G\\x05\\x02\\x00\\r\\x0b\\r\\x01\\x0b\\r\\x02\\n\\x0b\\r\\x08\\r\\x0f\\x0b\\x05\\x02\\x08\\x0f\\x01\\x02\\x05\\t\\n\\r\\x0b\\r\\x0f\\x02\\x0c\\x01\\x05\\x01\\x02\\x00\\x07\\t\\x00\\x0b\\x03\\x0b\\x07\\x02\\x0f\\x0f\\x0f\\x02\\x06\\x0c\\x0f\\n\\x0b\\x04\\x06\\x0f\\x03\\x0e\\x07\\x01\\x08\\x06\\x0e\\x06\\x01\\x06\\x04\\x0c\\x05\\n'\r\n```\r\n\r\n- JSON length: 308\r\n- CBOR length: 169\r\n\r\nCBOR serialization with [cbor2](https://github.com/agronholm/cbor2) python library\r\n\r\ntest script:\r\n\r\n```python\r\nimport cbor2\r\n\r\ntx={'txid': 'b4cc287e58f87cdae59417329f710f3ecd75a4ee1d2872b7248f50977c8493f3', 'vout': 1, 'scriptPubKey': 'a914b10c9df5f7edf436c697f02f1efdba4cf399615187', 'redeemScript': '512103debedc17b3df2badbcdd86d5feb4562b86fe182e5998abd8bcd4f122c6155b1b21027e940bb73ab8732bfdf7f9216ecefca5b94d6df834e77e108f68e66f126044c052ae'}\r\n# naive JSON, no compression\r\ntxjson=\"{'txid':'b4cc287e58f87cdae59417329f710f3ecd75a4ee1d2872b7248f50977c8493f3','vout':1,'scriptPubKey':'a914b10c9df5f7edf436c697f02f1efdba4cf399615187','redeemScript':'512103debedc17b3df2badbcdd86d5feb4562b86fe182e5998abd8bcd4f122c6155b1b21027e940bb73ab8732bfdf7f9216ecefca5b94d6df834e77e108f68e66f126044c052ae'}\"\r\n# decode hex values to bytes\r\ntxid=b\"\".join([int(x, 16).to_bytes(1, 'little') for x in 'b4cc287e58f87cdae59417329f710f3ecd75a4ee1d2872b7248f50977c8493f3'[::2]])\r\nscriptPubKey=b\"\".join([int(x, 16).to_bytes(1, 'little') for x in 'a914b10c9df5f7edf436c697f02f1efdba4cf399615187'[::2]])\r\nredeemScript=b\"\".join([int(x, 16).to_bytes(1, 'little') for x in '512103debedc17b3df2badbcdd86d5feb4562b86fe182e5998abd8bcd4f122c6155b1b21027e940bb73ab8732bfdf7f9216ecefca5b94d6df834e77e108f68e66f126044c052ae'[::2]])\r\n# encode to CBOR binary string\r\ntxcbor=cbor2.dumps({\"txid\": txid, \"vout\": 1, \"scriptPubKey\": scriptPubKey, \"redeemScript\": redeemScript})\r\njson_len = len(txjson)\r\ncbor_len = len(txcbor)\r\n```",
      "created_at" : "2021-09-14T19:50:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22866#issuecomment-919464563",
      "id" : 919464563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22866",
      "node_id" : "IC_kwDOABII5842zepz",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-14T19:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919464563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/80422284?v=4",
         "events_url" : "https://api.github.com/users/GeneFerneau/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GeneFerneau/followers",
         "following_url" : "https://api.github.com/users/GeneFerneau/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GeneFerneau/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GeneFerneau",
         "id" : 80422284,
         "login" : "GeneFerneau",
         "node_id" : "MDQ6VXNlcjgwNDIyMjg0",
         "organizations_url" : "https://api.github.com/users/GeneFerneau/orgs",
         "received_events_url" : "https://api.github.com/users/GeneFerneau/received_events",
         "repos_url" : "https://api.github.com/users/GeneFerneau/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GeneFerneau/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GeneFerneau/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GeneFerneau"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "We make extensive use of CBOR in a number of emerging airgapped wallet interoperability specs at Blockchain Commons, and some of our c & c++ code might be helpful.\r\n\r\nWhy CBOR? As RFC 7049 states: \r\n> 1. unambiguous encoding of most common data formats from Internet standards\r\n> 2. code compactness for encoder and decoder\r\n> 3. no schema description needed\r\n> 4. reasonably compact serialization\r\n> 5. applicability to constrained and unconstrained applications\r\n> 6. good JSON conversion\r\nextensibility\r\n\r\nWe have an overview on how we use CBOR for cryptographic objects (seeds, hdkeys, descriptors, etc.) starting at https://github.com/BlockchainCommons/crypto-commons/blob/master/Docs/ur-overview.md\r\n\r\nIâm interested in seeing what emerges from this discussion.",
      "created_at" : "2021-09-15T03:14:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22866#issuecomment-919664888",
      "id" : 919664888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22866",
      "node_id" : "IC_kwDOABII58420Pj4",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T03:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919664888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69103?v=4",
         "events_url" : "https://api.github.com/users/ChristopherA/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ChristopherA/followers",
         "following_url" : "https://api.github.com/users/ChristopherA/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ChristopherA/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ChristopherA",
         "id" : 69103,
         "login" : "ChristopherA",
         "node_id" : "MDQ6VXNlcjY5MTAz",
         "organizations_url" : "https://api.github.com/users/ChristopherA/orgs",
         "received_events_url" : "https://api.github.com/users/ChristopherA/received_events",
         "repos_url" : "https://api.github.com/users/ChristopherA/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ChristopherA/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ChristopherA/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ChristopherA"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK to another format in core, this should be handled as a rpc proxy service.\r\n\r\nThis could likely be done as a weekend project on top of https://crates.io/crates/bitcoincore-rpc-json-async or https://crates.io/crates/bitcoincore-rpc-json.",
      "created_at" : "2021-09-15T04:17:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22866#issuecomment-919686331",
      "id" : 919686331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22866",
      "node_id" : "IC_kwDOABII58420Uy7",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T04:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919686331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Concept NACK to another format in core, this should be handled as a rpc proxy service.\r\n\r\nThat is listed as one of the alternatives, definitely open to building as an external service on top of other projects. Thanks for the links.\r\n\r\nI think a solid external service could also work as a PoC for something that  may or may not be integrated into bitcoin-core. A thin proxy that translates in real-time will likely have installing separate software as the biggest overhead.\r\n\r\n> We make extensive use of CBOR in a number of emerging airgapped wallet interoperability specs at Blockchain Commons, and some of our c & c++ code might be helpful\r\n\r\nThank you for letting me know about your project, I'll definitely take a look at your code!",
      "created_at" : "2021-09-15T22:25:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22866#issuecomment-920428705",
      "id" : 920428705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22866",
      "node_id" : "IC_kwDOABII58423KCh",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T22:25:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920428705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/80422284?v=4",
         "events_url" : "https://api.github.com/users/GeneFerneau/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GeneFerneau/followers",
         "following_url" : "https://api.github.com/users/GeneFerneau/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GeneFerneau/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GeneFerneau",
         "id" : 80422284,
         "login" : "GeneFerneau",
         "node_id" : "MDQ6VXNlcjgwNDIyMjg0",
         "organizations_url" : "https://api.github.com/users/GeneFerneau/orgs",
         "received_events_url" : "https://api.github.com/users/GeneFerneau/received_events",
         "repos_url" : "https://api.github.com/users/GeneFerneau/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GeneFerneau/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GeneFerneau/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GeneFerneau"
      }
   }
]
