{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "**Expected behavior**\r\nI should be able to make the depends without an error.\r\n\r\n**Actual behavior**\r\nThe program extracts BDB, preprocesses BDB, and configures BDB (I think), then goes into a long list of \"checking\" lines (e.g. `checking for fopen... yes`).\r\n\r\nThe output shows `checking for clock_gettime monotonic clock...` then the error message below pops up (`The code execution cannot proceed because libwinpthread-1.dll was not found. Reinstalling the program may fix this problem.`)\r\n\r\n![image](https://user-images.githubusercontent.com/30005204/76664418-14010400-6563-11ea-9025-715f0968d9c9.png)\r\n\r\nI click okay and it outputs `no` for `checking for clock_gettime monotonic clock...`. The program continues running the checks and seems to finish building the depends normally.  I can then do the following:\r\n```\r\ncd ..\r\n./autogen.sh\r\nCONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/\r\nmake\r\n```\r\nAnd it builds without error.\r\n\r\n**To reproduce**\r\nI get the error every time I run it on my system.\r\n\r\n1. Clone repository to WSL `/home/billy/bitcoin`\r\n2. Follow steps at https://github.com/bitcoin/bitcoin/blob/master/doc/build-windows.md \"Cross-compilation for Ubuntu and Windows Subsystem for Linux\" and \"Building for 64-bit Windows\" up to and including `make HOST=x86_64-w64-mingw32`\r\n3. Let it run until the error message (screenshot above) pops up\r\n\r\n**System information**\r\n- Bitcoin Core master, built using instructions at https://github.com/bitcoin/bitcoin/blob/master/doc/build-windows.md\r\n- Windows 10 version 10.0.18363.719\r\n- Ubuntu 18.04 WSL (fresh install from Microsoft Store). I also tried on a different WSL that I upgraded from Ubuntu 16.04 to 18.04\r\n- Intel i7 processor\r\n\r\n**Other information**\r\nSimilar issue here: https://github.com/bitcoin/bitcoin/issues/17277\r\n\r\nHere's a copy of the full output from making the depends: https://gist.githubusercontent.com/billygarrison/c548ea99d3b498065c3dc1438d1561c7/raw/64359504e6bf5639396c9aa2313e73a1b0dd2ce8/out.log\r\n\r\nAnd here's a subset of that with showing just the bdb output (line 283 is where it hangs until I click OK on the error popup): https://gist.github.com/billygarrison/ebaad2b2f93c8e89281e7a1d2ce9d88b\r\n\r\n**EDIT:** Removed mention of `make check` test failing as it is not supported in WSL. \r\n\r\n**EDIT 2:** This issue only occurs if I use `make HOST=x86_64-w64-mingw32`, if I use it with `sudo make HOST=x86_64-w64-mingw32` then it builds fine, and the output includes `checking for clock_gettime monotonic clock... yes` instead of `no`.",
   "closed_at" : "2020-06-29T15:47:22Z",
   "closed_by" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
      "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
      "followers_url" : "https://api.github.com/users/billygarrison/followers",
      "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
      "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/billygarrison",
      "id" : 30005204,
      "login" : "billygarrison",
      "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
      "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
      "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
      "repos_url" : "https://api.github.com/users/billygarrison/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/billygarrison"
   },
   "comments" : 24,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348/comments",
   "created_at" : "2020-03-13T22:48:03Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348",
   "id" : 580911540,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU1ODA5MTE1NDA=",
   "number" : 18348,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "libwinpthread-1.dll not found during depends build (bdb) on Windows Subsystem for Linux",
   "updated_at" : "2020-06-29T15:47:23Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
      "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
      "followers_url" : "https://api.github.com/users/billygarrison/followers",
      "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
      "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/billygarrison",
      "id" : 30005204,
      "login" : "billygarrison",
      "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
      "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
      "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
      "repos_url" : "https://api.github.com/users/billygarrison/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/billygarrison"
   }
}
