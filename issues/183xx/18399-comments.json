[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rate limiting of the Travis IPs seems to make the use of an authenticated request mandatory, added that.",
      "created_at" : "2020-03-21T17:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-602078120",
      "id" : 602078120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjA3ODEyMA==",
      "updated_at" : "2020-03-21T17:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602078120",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, thanks for working on this.",
      "created_at" : "2020-03-22T17:42:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-602245571",
      "id" : 602245571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjI0NTU3MQ==",
      "updated_at" : "2020-03-22T17:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602245571",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK: Automation is good",
      "created_at" : "2020-03-22T20:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-602267158",
      "id" : 602267158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjI2NzE1OA==",
      "updated_at" : "2020-03-22T20:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602267158",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-03-23T11:49:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-602545081",
      "id" : 602545081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjU0NTA4MQ==",
      "updated_at" : "2020-03-23T11:49:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602545081",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r397847808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397847808"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess you were inspired by the JavaScript/ECMAScript syntax here with slashes as regex delimiters (https://javascript.info/regexp-escaping#a-slash)? In Python regexs, those don't have any special meaning, as I just tried out, hence they are also part of the searched string (and thus HTML comments are never found!).\r\n\r\n```suggestion\r\n    html_comment_start = \"<!--\"\r\n```",
      "commit_id" : "f23d47a1ebd60429822ece20e1b9e31802090be3",
      "created_at" : "2020-03-25T13:22:23Z",
      "diff_hunk" : "@@ -0,0 +1,79 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import os\n+import re\n+import subprocess\n+import sys\n+import json\n+import codecs\n+from urllib.request import Request, urlopen\n+from urllib.error import HTTPError\n+\n+# External tools (can be overridden using environment\n+GIT = os.getenv('GIT', 'git')\n+\n+def git_config_get(option, default=None):\n+    '''\n+    Get named configuration option from git repository.\n+    '''\n+    try:\n+        return subprocess.check_output([GIT, 'config', '--get', option]).rstrip().decode('utf-8')\n+    except subprocess.CalledProcessError:\n+        return default\n+\n+def get_response(req_url, ghtoken):\n+    req = Request(req_url)\n+    if ghtoken is not None:\n+        req.add_header('Authorization', 'token ' + ghtoken)\n+    return urlopen(req)\n+\n+def retrieve_json(req_url, ghtoken):\n+    '''\n+    Retrieve json from github.\n+    Return None if an error happens.\n+    '''\n+    try:\n+        reader = codecs.getreader('utf-8')\n+        return json.load(reader(get_response(req_url, ghtoken)))\n+    except HTTPError as e:\n+        error_message = e.read()\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        print('Detailed error: %s' % error_message)\n+        return None\n+    except Exception as e:\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        return None\n+\n+def retrieve_pr_info(pull, ghtoken):\n+    req_url = \"https://api.github.com/repos/bitcoin/bitcoin/pulls/\"+pull\n+    return retrieve_json(req_url, ghtoken)\n+\n+def main():\n+    # Get pull request number from Travis environment\n+    if 'TRAVIS_PULL_REQUEST' in os.environ:\n+        pull = os.environ['TRAVIS_PULL_REQUEST']\n+        ghtoken = git_config_get('user.ghtoken')\n+    else:\n+        assert False, \"No pull request number found, PR description could not be checked\"\n+\n+    # Receive pull information from github\n+    info = retrieve_pr_info(pull, ghtoken)\n+    if info is None:\n+        sys.exit(1)\n+\n+    body = info['body'].strip()\n+\n+    # Good enough username regex\n+    gh_username = r\"/\\B@([a-z0-9](?:-?[a-z0-9]){0,38})/gi\"\n+    assert not bool(re.search(gh_username, body)), \"Please remove any GitHub @-prefixed usernames from your PR description\"\n+\n+    html_comment_start = r\"/<!--/\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r397847808",
      "id" : 397847808,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg0NzgwOA==",
      "original_commit_id" : "1f866ba44f3d859cc2a35cb73db1f3ac489a1ff4",
      "original_position" : 72,
      "path" : "test/lint/check-pr-description.py",
      "position" : null,
      "pull_request_review_id" : 381139717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399",
      "updated_at" : "2020-03-25T21:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397847808",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r397850311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397850311"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "See my comment just two lines above. By the way, in Python the prefix \"r\" has nothing to do with regexs per se, but just indicates raw strings, i.e. no need to escape special characters, but our search string doesn't contain any of those anyway.\r\n\r\n```suggestion\r\n    html_comment_end = \"-->\"\r\n```",
      "commit_id" : "f23d47a1ebd60429822ece20e1b9e31802090be3",
      "created_at" : "2020-03-25T13:25:49Z",
      "diff_hunk" : "@@ -0,0 +1,79 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import os\n+import re\n+import subprocess\n+import sys\n+import json\n+import codecs\n+from urllib.request import Request, urlopen\n+from urllib.error import HTTPError\n+\n+# External tools (can be overridden using environment\n+GIT = os.getenv('GIT', 'git')\n+\n+def git_config_get(option, default=None):\n+    '''\n+    Get named configuration option from git repository.\n+    '''\n+    try:\n+        return subprocess.check_output([GIT, 'config', '--get', option]).rstrip().decode('utf-8')\n+    except subprocess.CalledProcessError:\n+        return default\n+\n+def get_response(req_url, ghtoken):\n+    req = Request(req_url)\n+    if ghtoken is not None:\n+        req.add_header('Authorization', 'token ' + ghtoken)\n+    return urlopen(req)\n+\n+def retrieve_json(req_url, ghtoken):\n+    '''\n+    Retrieve json from github.\n+    Return None if an error happens.\n+    '''\n+    try:\n+        reader = codecs.getreader('utf-8')\n+        return json.load(reader(get_response(req_url, ghtoken)))\n+    except HTTPError as e:\n+        error_message = e.read()\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        print('Detailed error: %s' % error_message)\n+        return None\n+    except Exception as e:\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        return None\n+\n+def retrieve_pr_info(pull, ghtoken):\n+    req_url = \"https://api.github.com/repos/bitcoin/bitcoin/pulls/\"+pull\n+    return retrieve_json(req_url, ghtoken)\n+\n+def main():\n+    # Get pull request number from Travis environment\n+    if 'TRAVIS_PULL_REQUEST' in os.environ:\n+        pull = os.environ['TRAVIS_PULL_REQUEST']\n+        ghtoken = git_config_get('user.ghtoken')\n+    else:\n+        assert False, \"No pull request number found, PR description could not be checked\"\n+\n+    # Receive pull information from github\n+    info = retrieve_pr_info(pull, ghtoken)\n+    if info is None:\n+        sys.exit(1)\n+\n+    body = info['body'].strip()\n+\n+    # Good enough username regex\n+    gh_username = r\"/\\B@([a-z0-9](?:-?[a-z0-9]){0,38})/gi\"\n+    assert not bool(re.search(gh_username, body)), \"Please remove any GitHub @-prefixed usernames from your PR description\"\n+\n+    html_comment_start = r\"/<!--/\"\n+    assert not bool(re.search(html_comment_start, body)), \"Please remove the pull request template from your PR description\"\n+    html_comment_end = r\"/-->/\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r397850311",
      "id" : 397850311,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg1MDMxMQ==",
      "original_commit_id" : "1f866ba44f3d859cc2a35cb73db1f3ac489a1ff4",
      "original_position" : 74,
      "path" : "test/lint/check-pr-description.py",
      "position" : null,
      "pull_request_review_id" : 381139717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399",
      "updated_at" : "2020-03-25T21:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397850311",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure if this is worth it. If it is extended to check for `@` in any comment (as suggested in the OP), it is a DOS vector where anyone can block the travis run/make it fail by just posting a comment. In that case maintainers would have to run around and remove the `@` to just get travis to run.\r\n\r\nI think it should be sufficient to have the check in the merge script ",
      "created_at" : "2020-03-25T14:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-603871620",
      "id" : 603871620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMzg3MTYyMA==",
      "updated_at" : "2020-03-25T14:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603871620",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Not sure if this is worth it. If it is extended to check for `@` in any comment (as suggested in the OP), it is a DOS vector where anyone can block the travis run/make it fail by just posting a comment. In that case maintainers would have to run around and remove the `@` to just get travis to run.\r\n> \r\n> I think it should be sufficient to have the check in the merge script\r\n\r\nThat makes a lot of sense, thanks!",
      "created_at" : "2020-03-25T14:32:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-603872800",
      "id" : 603872800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMzg3MjgwMA==",
      "updated_at" : "2020-03-25T14:32:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603872800",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r398186267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/398186267"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed! I think it was more some of my ruby background showing but also I was not sure if I would get ACKs for this so I did not do proper testing yet. Thanks a lot!",
      "commit_id" : "f23d47a1ebd60429822ece20e1b9e31802090be3",
      "created_at" : "2020-03-25T21:38:35Z",
      "diff_hunk" : "@@ -0,0 +1,79 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import os\n+import re\n+import subprocess\n+import sys\n+import json\n+import codecs\n+from urllib.request import Request, urlopen\n+from urllib.error import HTTPError\n+\n+# External tools (can be overridden using environment\n+GIT = os.getenv('GIT', 'git')\n+\n+def git_config_get(option, default=None):\n+    '''\n+    Get named configuration option from git repository.\n+    '''\n+    try:\n+        return subprocess.check_output([GIT, 'config', '--get', option]).rstrip().decode('utf-8')\n+    except subprocess.CalledProcessError:\n+        return default\n+\n+def get_response(req_url, ghtoken):\n+    req = Request(req_url)\n+    if ghtoken is not None:\n+        req.add_header('Authorization', 'token ' + ghtoken)\n+    return urlopen(req)\n+\n+def retrieve_json(req_url, ghtoken):\n+    '''\n+    Retrieve json from github.\n+    Return None if an error happens.\n+    '''\n+    try:\n+        reader = codecs.getreader('utf-8')\n+        return json.load(reader(get_response(req_url, ghtoken)))\n+    except HTTPError as e:\n+        error_message = e.read()\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        print('Detailed error: %s' % error_message)\n+        return None\n+    except Exception as e:\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        return None\n+\n+def retrieve_pr_info(pull, ghtoken):\n+    req_url = \"https://api.github.com/repos/bitcoin/bitcoin/pulls/\"+pull\n+    return retrieve_json(req_url, ghtoken)\n+\n+def main():\n+    # Get pull request number from Travis environment\n+    if 'TRAVIS_PULL_REQUEST' in os.environ:\n+        pull = os.environ['TRAVIS_PULL_REQUEST']\n+        ghtoken = git_config_get('user.ghtoken')\n+    else:\n+        assert False, \"No pull request number found, PR description could not be checked\"\n+\n+    # Receive pull information from github\n+    info = retrieve_pr_info(pull, ghtoken)\n+    if info is None:\n+        sys.exit(1)\n+\n+    body = info['body'].strip()\n+\n+    # Good enough username regex\n+    gh_username = r\"/\\B@([a-z0-9](?:-?[a-z0-9]){0,38})/gi\"\n+    assert not bool(re.search(gh_username, body)), \"Please remove any GitHub @-prefixed usernames from your PR description\"\n+\n+    html_comment_start = r\"/<!--/\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r398186267",
      "id" : 398186267,
      "in_reply_to_id" : 397847808,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE4NjI2Nw==",
      "original_commit_id" : "1f866ba44f3d859cc2a35cb73db1f3ac489a1ff4",
      "original_position" : 72,
      "path" : "test/lint/check-pr-description.py",
      "position" : null,
      "pull_request_review_id" : 381556119,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399",
      "updated_at" : "2020-03-25T21:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/398186267",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r398186335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/398186335"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed!",
      "commit_id" : "f23d47a1ebd60429822ece20e1b9e31802090be3",
      "created_at" : "2020-03-25T21:38:46Z",
      "diff_hunk" : "@@ -0,0 +1,79 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import os\n+import re\n+import subprocess\n+import sys\n+import json\n+import codecs\n+from urllib.request import Request, urlopen\n+from urllib.error import HTTPError\n+\n+# External tools (can be overridden using environment\n+GIT = os.getenv('GIT', 'git')\n+\n+def git_config_get(option, default=None):\n+    '''\n+    Get named configuration option from git repository.\n+    '''\n+    try:\n+        return subprocess.check_output([GIT, 'config', '--get', option]).rstrip().decode('utf-8')\n+    except subprocess.CalledProcessError:\n+        return default\n+\n+def get_response(req_url, ghtoken):\n+    req = Request(req_url)\n+    if ghtoken is not None:\n+        req.add_header('Authorization', 'token ' + ghtoken)\n+    return urlopen(req)\n+\n+def retrieve_json(req_url, ghtoken):\n+    '''\n+    Retrieve json from github.\n+    Return None if an error happens.\n+    '''\n+    try:\n+        reader = codecs.getreader('utf-8')\n+        return json.load(reader(get_response(req_url, ghtoken)))\n+    except HTTPError as e:\n+        error_message = e.read()\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        print('Detailed error: %s' % error_message)\n+        return None\n+    except Exception as e:\n+        print('Warning: unable to retrieve pull information from github: %s' % e)\n+        return None\n+\n+def retrieve_pr_info(pull, ghtoken):\n+    req_url = \"https://api.github.com/repos/bitcoin/bitcoin/pulls/\"+pull\n+    return retrieve_json(req_url, ghtoken)\n+\n+def main():\n+    # Get pull request number from Travis environment\n+    if 'TRAVIS_PULL_REQUEST' in os.environ:\n+        pull = os.environ['TRAVIS_PULL_REQUEST']\n+        ghtoken = git_config_get('user.ghtoken')\n+    else:\n+        assert False, \"No pull request number found, PR description could not be checked\"\n+\n+    # Receive pull information from github\n+    info = retrieve_pr_info(pull, ghtoken)\n+    if info is None:\n+        sys.exit(1)\n+\n+    body = info['body'].strip()\n+\n+    # Good enough username regex\n+    gh_username = r\"/\\B@([a-z0-9](?:-?[a-z0-9]){0,38})/gi\"\n+    assert not bool(re.search(gh_username, body)), \"Please remove any GitHub @-prefixed usernames from your PR description\"\n+\n+    html_comment_start = r\"/<!--/\"\n+    assert not bool(re.search(html_comment_start, body)), \"Please remove the pull request template from your PR description\"\n+    html_comment_end = r\"/-->/\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#discussion_r398186335",
      "id" : 398186335,
      "in_reply_to_id" : 397850311,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE4NjMzNQ==",
      "original_commit_id" : "1f866ba44f3d859cc2a35cb73db1f3ac489a1ff4",
      "original_position" : 74,
      "path" : "test/lint/check-pr-description.py",
      "position" : null,
      "pull_request_review_id" : 381556204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18399",
      "updated_at" : "2020-03-25T21:38:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/398186335",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks to @theStack 's feedback the regex should work properly now. I also simplified the GH username regex and added some documentation.\r\n\r\nHere are some test vectors:\r\n\r\nFail due to HTML tags:\r\n```\r\n$ TRAVIS_PULL_REQUEST=16439 ./check-pr-description.py\r\n```\r\nFail due to GH username:\r\n```\r\n$ TRAVIS_PULL_REQUEST=18376 ./check-pr-description.py\r\n```\r\n\r\nSince these are active the descriptions could be fixed any day so if it does not work withthese please check first if that is the case.\r\n\r\nFor the fun of it, you can test ranges of PRs like so but you will see `404` errors for each number that is an `issue` and not a `pull`:\r\n```\r\nCOUNTER=18000; while [ $COUNTER -lt 18020 ]; do TRAVIS_PULL_REQUEST=$COUNTER test/lint/check-pr-description.py; let COUNTER+=1; done\r\n```",
      "created_at" : "2020-03-25T21:45:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-604104434",
      "id" : 604104434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNDEwNDQzNA==",
      "updated_at" : "2020-03-25T21:45:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604104434",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I thought there was a github access token available in the git config inside Travis but it appears their isn't and not running into rate limiting last time was a false positive. I am trying to find out the variable name if there is one available in the Travis environment, otherwise it would need to be added.",
      "created_at" : "2020-03-25T22:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-604115640",
      "id" : 604115640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNDExNTY0MA==",
      "updated_at" : "2020-03-25T22:15:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604115640",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "FWIW, with the help of a quick `git log --grep=\"-->\"` and further manual inspection I could find two false positives, i.e. PRs that contain no HTML comments but still the linter would complain:\r\n* #17283 (`$ TRAVIS_PULL_REQUEST=17283 ./check-pr-description.py`)\r\n* #12759 (`$ TRAVIS_PULL_REQUEST=12759 ./check-pr-description.py`)",
      "created_at" : "2020-03-25T22:32:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-604121858",
      "id" : 604121858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNDEyMTg1OA==",
      "updated_at" : "2020-03-25T22:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604121858",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> FWIW, with the help of a quick `git log --grep=\"-->\"` and further manual inspection I could find two false positives, i.e. PRs that contain no HTML comments but still the linter would complain:\r\n> \r\n> * #17283 (`$ TRAVIS_PULL_REQUEST=17283 ./check-pr-description.py`)\r\n> * #12759 (`$ TRAVIS_PULL_REQUEST=12759 ./check-pr-description.py`)\r\n\r\nThanks for discovering these. So yes, the current version does give false positives any time someone wants to write something in the PR description that actually includes HTML comments. The only effective way I could think of to mitigate that would be to use the solution with the unique string in the template. It would work like this: at the bottom of the template, there is something like `TEMPLEATE_END_PLEASE_REMOVE_ME` or so and then this linter checks for that string. I am happy to hear feedback if that solution is preferred to prevent these false positives.",
      "created_at" : "2020-03-30T13:28:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-605999158",
      "id" : 605999158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTk5OTE1OA==",
      "updated_at" : "2020-03-30T13:28:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605999158",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Unfortunately, it looks like this is blocked. I was trying to get a Github Oauth Token into the Travis build environment as a secure (encrypted) variable but this variable can still not be accessed by pull requests triggered through forks since the variable would be exposed to unknown code (see [travis docs](https://docs.travis-ci.com/user/environment-variables#defining-encrypted-variables-in-travisyml)) This makes sense and I currently only see this working if the pull body does get added to the standard Travis environment variables. There exists an issue for this https://github.com/travis-ci/travis-ci/issues/9302 and a pull request is open to add the title at least https://github.com/travis-ci/travis-build/pull/1319 but it has been open for 2 years.\r\n\r\nI am happy to hear if there are other ideas on how to achieve this. Otherwise, I will close this and reopen when the pull body becomes available in Travis somehow. But I don't think there are any other obvious solutions as they should have come up in the Travis issues on this topic.",
      "created_at" : "2020-04-04T14:54:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18399#issuecomment-609040498",
      "id" : 609040498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18399",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwOTA0MDQ5OA==",
      "updated_at" : "2020-04-04T14:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/609040498",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
