{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Some tests that use `P2PConnection` might fail after the switch to `asyncio`. The test itself is successful, but the stderr is non-empty. I believe this is an internal race in `asyncio`, where the remote node disconnected from our `P2PConnection`, but asyncio didn't realize it and is still sending (potentially buffered) bytes.\r\n\r\nOne solution would be to just strip the stderr of \"socket.send() raised exception\".\r\n\r\nOne example on osx, but can probably reproduced locally with `./test/functional/test_runner.py -j 16 --extended`:\r\n\r\n```\r\nfeature_assumevalid.py failed, Duration: 13 s\r\nstdout:\r\n2018-06-30T17:10:31.246000Z TestFramework (INFO): Initializing test directory /var/folders/bb/n7t3rs157850byt_jfdcq9k80000gn/T/bitcoin_test_runner_20180630_170848/feature_assumevalid_87\r\n2018-06-30T17:10:43.682000Z TestFramework.mininode (WARNING): Connection lost to 127.0.0.1:11698 due to [Errno 32] Broken pipe\r\n2018-06-30T17:10:43.994000Z TestFramework (INFO): Stopping nodes\r\n2018-06-30T17:10:44.370000Z TestFramework (INFO): Cleaning up /var/folders/bb/n7t3rs157850byt_jfdcq9k80000gn/T/bitcoin_test_runner_20180630_170848/feature_assumevalid_87 on exit\r\n2018-06-30T17:10:44.370000Z TestFramework (INFO): Tests successful\r\nstderr:\r\nsocket.send() raised exception.\r\nsocket.send() raised exception.\r\nsocket.send() raised exception.\r\nsocket.send() raised exception.",
   "closed_at" : "2018-07-19T13:09:28Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13579/comments",
   "created_at" : "2018-07-01T09:05:00Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13579/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/13579",
   "id" : 337275875,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      },
      {
         "color" : "c2e0c6",
         "default" : true,
         "id" : 349312277,
         "name" : "good first issue",
         "node_id" : "MDU6TGFiZWwzNDkzMTIyNzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/good%20first%20issue"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13579/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : "2018-10-14T23:21:13Z",
      "closed_issues" : 122,
      "created_at" : "2017-11-22T18:54:09Z",
      "creator" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/33",
      "id" : 2931889,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/33/labels",
      "node_id" : "MDk6TWlsZXN0b25lMjkzMTg4OQ==",
      "number" : 33,
      "open_issues" : 0,
      "state" : "closed",
      "title" : "0.17.0",
      "updated_at" : "2018-11-28T21:03:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/33"
   },
   "node_id" : "MDU6SXNzdWUzMzcyNzU4NzU=",
   "number" : 13579,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "test_runner sometimes fail due to \"socket.send() raised exception\" in stderr",
   "updated_at" : "2018-07-19T13:09:28Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13579",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   }
}
