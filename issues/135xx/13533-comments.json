[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21702 by JeremyRubin\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-06-26T11:17:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-400271612",
      "id" : 400271612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDI3MTYxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-07T02:14:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400271612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r200417832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/200417832"
         }
      },
      "author_association" : "MEMBER",
      "body" : "we don't use `rand()` anywhere in the code, would be preferable to use a `FastRandomContext insecure_rand(true);` here, also for determinism - for reproducible it is undesirable for different test runs to test a different subset of flags",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2018-07-05T16:40:20Z",
      "diff_hunk" : "@@ -105,9 +105,11 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    for (uint32_t count=0; count < 10000; count++) {\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = rand() % (HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r200417832",
      "id" : 200417832,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMDQxNzgzMg==",
      "original_commit_id" : "ccd99f73605ef83d7358084cd840e29c2a45b569",
      "original_line" : 111,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 134730895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/200417832",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r200561909"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/200561909"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed. Thanks for the explanation!",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2018-07-06T06:43:23Z",
      "diff_hunk" : "@@ -105,9 +105,11 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    for (uint32_t count=0; count < 10000; count++) {\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = rand() % (HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r200561909",
      "id" : 200561909,
      "in_reply_to_id" : 200417832,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMDU2MTkwOQ==",
      "original_commit_id" : "ccd99f73605ef83d7358084cd840e29c2a45b569",
      "original_line" : 111,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 134901993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/200561909",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 50 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2018-08-25T20:55:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-415995977",
      "id" : 415995977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNTk5NTk3Nw==",
      "updated_at" : "2018-08-25T20:55:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/415995977",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r222818622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222818622"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Make this implicit conversion from `uint64_t` to `uint32_t` explicit :-)",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2018-10-04T20:37:13Z",
      "diff_hunk" : "@@ -105,9 +105,13 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (uint32_t count=0; count < 10000; count++) {\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = insecure_rand.randrange(HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r222818622",
      "id" : 222818622,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjgxODYyMg==",
      "original_commit_id" : "ec135f4cc1c3962b722ea7a2c9dff98d501bf17d",
      "original_line" : 113,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 161799515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222818622",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r223220782"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223220782"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Actually there's quite a lot of confusion of types around these types. `randrange` return a ` `uint64_t`, but `CheckInputs` accepts a `unsigned int`, while the flags are actually an enum which has an implementation-specific type. I guess the best is to change it here to `unsigned int` (and make the conversion explicit), and maybe open a separate PR for fixing these type inconsistencies.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2018-10-07T17:08:40Z",
      "diff_hunk" : "@@ -105,9 +105,13 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (uint32_t count=0; count < 10000; count++) {\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = insecure_rand.randrange(HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r223220782",
      "id" : 223220782,
      "in_reply_to_id" : 222818622,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzIyMDc4Mg==",
      "original_commit_id" : "ec135f4cc1c3962b722ea7a2c9dff98d501bf17d",
      "original_line" : 113,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 162297398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223220782",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 312 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2019-08-16T13:49:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-522015281",
      "id" : 522015281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjAxNTI4MQ==",
      "updated_at" : "2019-08-16T13:49:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522015281",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-30T16:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-547990155",
      "id" : 547990155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0Nzk5MDE1NQ==",
      "updated_at" : "2019-10-30T16:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547990155",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI was looking at this before the conflict popped up and the savings on my machine was:\r\n```\r\nBefore: 3.7s\r\nAfter: 2.8s\r\n------------\r\nSaved 0.9s (24%).\r\n```\r\nMy rebase is [here](https://github.com/adamjonas/bitcoin/tree/10-19-reduce-txvalidationcache-tests) for reference.",
      "created_at" : "2019-10-30T19:01:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-548065305",
      "id" : 548065305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODA2NTMwNQ==",
      "updated_at" : "2019-10-30T19:01:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548065305",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thx @adamjonas.\r\nWill be away for a few days, probably will rebase over the weekend.",
      "created_at" : "2019-10-30T21:44:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-548125875",
      "id" : 548125875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODEyNTg3NQ==",
      "updated_at" : "2019-10-30T21:44:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548125875",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@adamjonas rebased. thx",
      "created_at" : "2019-11-05T22:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-550059785",
      "id" : 550059785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDA1OTc4NQ==",
      "updated_at" : "2019-11-05T22:52:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550059785",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370343584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370343584"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd suggest to prefix those two constants with `SCRIPT_VERIFY_` as well. Otherwise ever single translation unit including `script/interpreter.h` will have a bare `HIGHEST_FLAG` {`_PLUS_ONE`} constant in its global namespace and there isn't any reference in the name to _which_ flags it refers to.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-01-23T20:41:47Z",
      "diff_hunk" : "@@ -114,6 +114,12 @@ enum\n     // Making OP_CODESEPARATOR and FindAndDelete fail any non-segwit scripts\n     //\n     SCRIPT_VERIFY_CONST_SCRIPTCODE = (1U << 16),\n+\n+\n+    // Constants to point to the highest flag in use. Add new flags above this line.\n+    //\n+    HIGHEST_FLAG_PLUS_ONE,\n+    HIGHEST_FLAG = HIGHEST_FLAG_PLUS_ONE - 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370343584",
      "id" : 370343584,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM0MzU4NA==",
      "original_commit_id" : "c1a8b47d52747dd4358f1a7ecb63a2b84fd584f0",
      "original_line" : 122,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 347593067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370343584",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370343977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370343977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Now that the loop variable is a simple counter, not representing a bitfield anymore, I'd change the data type to just a plain `int`.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-01-23T20:42:42Z",
      "diff_hunk" : "@@ -111,10 +111,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (uint32_t count=0; count < 10000; count++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370343977",
      "id" : 370343977,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM0Mzk3Nw==",
      "original_commit_id" : "c1a8b47d52747dd4358f1a7ecb63a2b84fd584f0",
      "original_line" : 117,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 347593067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370343977",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370346327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370346327"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: The data type was an explicit `uint32_t` before, so I'd also that type here now rather than the more general `unsigned int` (in practice it won't matter though, so feel free to ignore).",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-01-23T20:48:03Z",
      "diff_hunk" : "@@ -111,10 +111,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata(tx);\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (uint32_t count=0; count < 10000; count++) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        unsigned int test_flags = (unsigned int) insecure_rand.randrange(HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r370346327",
      "id" : 370346327,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM0NjMyNw==",
      "original_commit_id" : "c1a8b47d52747dd4358f1a7ecb63a2b84fd584f0",
      "original_line" : 121,
      "original_position" : 14,
      "original_start_line" : 120,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 347593067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370346327",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK\r\n> Though on the current master branch enumerating through all possible script-verify-flags combinations is still feasible (running `tx_validationcache_tests` takes less than 2 seconds on my machine), the execution time for the validation loop would obviously increase exponentially with each script-verify-flag added.\r\n\r\nHi, @theStack. Thank you for reviewing this PR. I agree with your comments and will implement them. Just a little bit busy, but hopefully will have some time for that in the next few weeks.\r\n\r\nthanks!\r\n",
      "created_at" : "2020-02-13T06:05:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-585566944",
      "id" : 585566944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTU2Njk0NA==",
      "updated_at" : "2020-02-13T06:05:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585566944",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "hi @theStack. finally implemented the changes you suggested, also rebased -- and test are passing.",
      "created_at" : "2020-03-04T19:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-594759376",
      "id" : 594759376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NDc1OTM3Ng==",
      "updated_at" : "2020-03-04T19:07:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/594759376",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-19T11:06:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-616105249",
      "id" : 616105249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNjEwNTI0OQ==",
      "updated_at" : "2020-04-19T11:06:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/616105249",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi @lucash-dev, pinging for a rebase. Mine is [here](https://github.com/bitcoin/bitcoin/compare/master...adamjonas:06-20-reduce-txvalidationcache-tests) for reference.",
      "created_at" : "2020-06-16T19:09:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-644957637",
      "id" : 644957637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NDk1NzYzNw==",
      "updated_at" : "2020-06-16T19:09:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644957637",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "thx @adamjonas. rebased.",
      "created_at" : "2020-06-23T05:28:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-647916896",
      "id" : 647916896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NzkxNjg5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-06-23T05:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647916896",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476960647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476960647"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: extraneous whitespace (1 empty line is usually enough).",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-08-26T01:42:01Z",
      "diff_hunk" : "@@ -114,6 +114,12 @@ enum\n     // Making OP_CODESEPARATOR and FindAndDelete fail any non-segwit scripts\n     //\n     SCRIPT_VERIFY_CONST_SCRIPTCODE = (1U << 16),\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476960647",
      "id" : 476960647,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk2MDY0Nw==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 118,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 475093540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476960647",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476961718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476961718"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest you call this `SCRIPT_VERIFY_END_MARKER`, and then use `< SCRIPT_VERIFY_END_MARKER` logic instead of this, i.e. only add one.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-08-26T01:43:36Z",
      "diff_hunk" : "@@ -114,6 +114,12 @@ enum\n     // Making OP_CODESEPARATOR and FindAndDelete fail any non-segwit scripts\n     //\n     SCRIPT_VERIFY_CONST_SCRIPTCODE = (1U << 16),\n+\n+\n+    // Constants to point to the highest flag in use. Add new flags above this line.\n+    //\n+    SCRIPT_VERIFY_HIGHEST_FLAG_PLUS_ONE,\n+    SCRIPT_VERIFY_HIGHEST_FLAG = SCRIPT_VERIFY_HIGHEST_FLAG_PLUS_ONE - 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476961718",
      "id" : 476961718,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk2MTcxOA==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 122,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 475093540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476961718",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476962441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476962441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Style-nit: spacing, ++ before varname:\r\n```C++\r\nfor (int count = 0; count < 10000; ++count) {\r\n```",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-08-26T01:44:45Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count=0; count < 10000; count++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476962441",
      "id" : 476962441,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk2MjQ0MQ==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 115,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 475093540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476962441",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476965185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476965185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Using the marker style, to get the same you'd `randrange((SCRIPT_VERIFY_END_MARKER - 1) << 1)` here.\r\n\r\nHowever, I'm not sure why you are doing `<< 1` here (`1U << 17`), as the original code only goes up to `SCRIPT_VERIFY_END_MARKER - 1` (i.e. `(1U << 16)`). To retain the same, this would be `randrange(SCRIPT_VERIFY_END_MARKER - 1);`",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-08-26T01:48:47Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count=0; count < 10000; count++) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = (uint32_t) insecure_rand.randrange(SCRIPT_VERIFY_HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r476965185",
      "id" : 476965185,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njk2NTE4NQ==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 119,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 475093540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/476965185",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi @fanquake\r\nWhatâs the reason for closing it now?\r\nI was meaning to implement the latest round of requested changes and it has concept acks.\r\nShould I work on this, open a new one or just move on?\r\nJust looking for clarificationâ donât want to waste anyoneâs time if maintainers donât want this change. I know you have plenty on your plate.\r\nThanks!",
      "created_at" : "2020-09-15T15:29:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-692793987",
      "id" : 692793987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5Mjc5Mzk4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T15:29:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692793987",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hi @lucash-dev. I closed this because of the length of time it's been open overall, the length of time it's been since comments were left and had been unaddressed, and after looking at your GitHub profile it seemed that you were no-longer active here (hence throwing it up for grabs). However if you are going to address the concerns, I'll re-open this.",
      "created_at" : "2020-09-15T22:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-693006007",
      "id" : 693006007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MzAwNjAwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T22:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/693006007",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489086837"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489086837"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi, @kalewoof. Thanks for reviewing.\r\nThe reason for that is that we want to possibly test all flag combinations (or a random subset thereof). The lowest value possible with all flags off is 0, the highest would be the sum of all constants. So if the highest constant is 1<<16, having the maximum value used for test be 1<<16 would preclude testing combinations of that flag being used. We need to test from 0 to `1111111111111111` (1<<17 -1). Because of the range being exclusive of the highest value, I pass `1<<17 = (SCRIPT_VERIFY_END_MARKER - 1) << 1`\r\nHope that clarifies.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-09-16T00:12:14Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count=0; count < 10000; count++) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = (uint32_t) insecure_rand.randrange(SCRIPT_VERIFY_HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489086837",
      "id" : 489086837,
      "in_reply_to_id" : 476965185,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA4NjgzNw==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 119,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 489189097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489086837",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489088824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489088824"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The test currently only going to 1<<16 is probably a mistake caused by adding a flag but not updating the test.",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-09-16T00:19:12Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count=0; count < 10000; count++) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = (uint32_t) insecure_rand.randrange(SCRIPT_VERIFY_HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489088824",
      "id" : 489088824,
      "in_reply_to_id" : 476965185,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA4ODgyNA==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 119,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 489191377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489088824",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @fanquake. Sorry for leaving this PR unattended for so long.",
      "created_at" : "2020-09-16T00:20:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-693097155",
      "id" : 693097155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MzA5NzE1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-16T00:20:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/693097155",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated PR to fix @kallewoof's NIT's.",
      "created_at" : "2020-09-16T00:25:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-693098466",
      "id" : 693098466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MzA5ODQ2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-16T00:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/693098466",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489094135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489094135"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Test created in https://github.com/bitcoin/bitcoin/commit/e3f9c05b966622146e090f2a01a913516ccb874a. Not updated after the new flag added in https://github.com/bitcoin/bitcoin/commit/9dabfe49c066301ef75bcfcb089fd308366127c4",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-09-16T00:38:30Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count=0; count < 10000; count++) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = (uint32_t) insecure_rand.randrange(SCRIPT_VERIFY_HIGHEST_FLAG << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489094135",
      "id" : 489094135,
      "in_reply_to_id" : 476965185,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA5NDEzNQ==",
      "original_commit_id" : "f723288c4f7295f9f00acdccf8d1e6848b223657",
      "original_line" : 119,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 489197090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T00:38:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489094135",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489169645"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489169645"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You want to swap the - and <<; right now you get `111...0`, i.e.\r\n```suggestion\r\n        uint32_t test_flags = (uint32_t) insecure_rand.randrange((SCRIPT_VERIFY_END_MARKER << 1) - 1);\r\n```",
      "commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "created_at" : "2020-09-16T05:21:45Z",
      "diff_hunk" : "@@ -109,10 +109,15 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_block_doublespend, TestChain100Setup)\n static void ValidateCheckInputsForAllFlags(const CTransaction &tx, uint32_t failing_flags, bool add_to_cache) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     PrecomputedTransactionData txdata;\n-    // If we add many more flags, this loop can get too expensive, but we can\n-    // rewrite in the future to randomly pick a set of flags to evaluate.\n-    for (uint32_t test_flags=0; test_flags < (1U << 16); test_flags += 1) {\n+\n+    FastRandomContext insecure_rand(true);\n+\n+    for (int count = 0; count < 10000; ++count) {\n         TxValidationState state;\n+\n+        // Randomly selects flag combinations\n+        uint32_t test_flags = (uint32_t) insecure_rand.randrange((SCRIPT_VERIFY_END_MARKER - 1) << 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#discussion_r489169645",
      "id" : 489169645,
      "line" : 119,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTE2OTY0NQ==",
      "original_commit_id" : "203472e8ec12e3bdb49687b03c6c208d364100f2",
      "original_line" : 119,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/txvalidationcache_tests.cpp",
      "position" : 14,
      "pull_request_review_id" : 489282580,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13533",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-16T05:22:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/489169645",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-10-15T11:11:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-709205478",
      "id" : 709205478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwOTIwNTQ3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-15T11:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/709205478",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased.\r\n\r\n@kallewoof would you mind ACK-ing since I addressed your comments (or otherwise make further comments)?\r\n\r\nI think this PR has become (more) important after the new taproot flags were introduced -- since none of those flags are tested by this test case in `master`. ",
      "created_at" : "2020-10-16T18:14:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-710358244",
      "id" : 710358244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMDM1ODI0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-16T18:14:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710358244",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks everyone!\r\n\r\nI know reviewing PRs is a lot of work, and this one wasn't a priority -- so I'm really glad to see it finally merged. \r\n\r\nI learned a lot from writing it and from your feedback!\r\n",
      "created_at" : "2021-07-26T19:31:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13533#issuecomment-886969574",
      "id" : 886969574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13533",
      "node_id" : "IC_kwDOABII58403hTm",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-26T19:31:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886969574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31627588?v=4",
         "events_url" : "https://api.github.com/users/lucash-dev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucash-dev/followers",
         "following_url" : "https://api.github.com/users/lucash-dev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucash-dev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucash-dev",
         "id" : 31627588,
         "login" : "lucash-dev",
         "node_id" : "MDQ6VXNlcjMxNjI3NTg4",
         "organizations_url" : "https://api.github.com/users/lucash-dev/orgs",
         "received_events_url" : "https://api.github.com/users/lucash-dev/received_events",
         "repos_url" : "https://api.github.com/users/lucash-dev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucash-dev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucash-dev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucash-dev"
      }
   }
]
