[
   {
      "author_association" : "NONE",
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/41906a3ea8322716d6391e5afde90dc81f017651 for binaries and test log.\n",
      "created_at" : "2012-09-27T23:09:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-8958161",
      "id" : 8958161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg5NTgxNjE=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8958161/reactions"
      },
      "updated_at" : "2012-09-27T23:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8958161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=4",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "node_id" : "MDQ6VXNlcjIxMTA5MDc=",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Haven't tested, but code changes look ok.\n",
      "created_at" : "2012-09-28T13:58:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-8977126",
      "id" : 8977126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg5NzcxMjY=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8977126/reactions"
      },
      "updated_at" : "2012-09-28T13:58:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8977126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sanity testing on a testnet-in-a-box \"hell wallet\", I get an extra empty array:\n\nOld:\n\n```\ngavin$ head /tmp/f2\n[\n    [\n        [\n            \"mmU33ZKwUkSoVSx8bHUnf2PmNosDMWvxsU\",\n            17.93950000\n        ],\n        [\n            \"mzGzLeJA2up3VL4gW32x5hT5YvEaA7SnBh\",\n            0.00000000\n        ],\n```\n\nNew:\n\n```\ngavin$ head /tmp/f1\n[\n    [\n    ],\n    [\n        [\n            \"mmU33ZKwUkSoVSx8bHUnf2PmNosDMWvxsU\",\n            17.93950000\n        ],\n        [\n            \"mzGzLeJA2up3VL4gW32x5hT5YvEaA7SnBh\",\n```\n",
      "created_at" : "2012-10-01T21:02:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9049957",
      "id" : 9049957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDkwNDk5NTc=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9049957/reactions"
      },
      "updated_at" : "2012-10-01T21:02:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9049957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=4",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "node_id" : "MDQ6VXNlcjMzMTk5Nw==",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gavinandresen  Ah. Thanks.  I'm pretty sure thats just from adding an empty group after encountering a transaction where it can't add any linked ins or outs.   Pushing a revised patch that I expect will fix that (though I don't have a reproduction setup right now).    It might be helpful to encrypt that wallet with some impossible key and post it.\n",
      "created_at" : "2012-10-02T13:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9069867",
      "id" : 9069867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDkwNjk4Njc=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9069867/reactions"
      },
      "updated_at" : "2012-10-02T13:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9069867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It is a testnet-in-a-box wallet, so it is not sensitive.\n\nWallet and blockchain are at:\n  http://www.skypaint.com/bitcoin/gavin_testnetbox_wallet.tar.gz\n",
      "created_at" : "2012-10-02T13:38:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9070910",
      "id" : 9070910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDkwNzA5MTA=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9070910/reactions"
      },
      "updated_at" : "2012-10-02T13:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9070910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=4",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "node_id" : "MDQ6VXNlcjMzMTk5Nw==",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed, the empty group is gone with the latest update.\n",
      "created_at" : "2012-10-04T14:56:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9144172",
      "id" : 9144172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDkxNDQxNzI=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9144172/reactions"
      },
      "updated_at" : "2012-10-04T14:56:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9144172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK\n",
      "created_at" : "2012-10-09T16:52:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9269294",
      "id" : 9269294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDkyNjkyOTQ=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9269294/reactions"
      },
      "updated_at" : "2012-10-09T16:52:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9269294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=4",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "node_id" : "MDQ6VXNlcjQ5NDQxMQ==",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/f00b335d53380e10b528d3a4e3bf663624eeb61f for binaries and test log.\n",
      "created_at" : "2012-10-20T19:18:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-9635001",
      "id" : 9635001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDk2MzUwMDE=",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9635001/reactions"
      },
      "updated_at" : "2012-10-20T19:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9635001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=4",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "node_id" : "MDQ6VXNlcjIxMTA5MDc=",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1872#discussion_r1962151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1872"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1962151"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to refer to vin[0] specifically?\n",
      "commit_id" : "a3fad2119bcf4638ed137fc5cddc2f34a3bd1dc2",
      "created_at" : "2012-10-28T23:26:10Z",
      "diff_hunk" : "@@ -1664,29 +1664,39 @@ int64 CWallet::GetOldestKeyPoolTime()\n     {\n         CWalletTx *pcoin = &walletEntry.second;\n \n-        if (pcoin->vin.size() > 0 && IsMine(pcoin->vin[0]))\n+        if (pcoin->vin.size() > 0)\n         {\n+            bool any_mine = false;\n             // group all input addresses with each other\n             BOOST_FOREACH(CTxIn txin, pcoin->vin)\n             {\n                 CTxDestination address;\n+                if(!IsMine(txin)) /* If this input isn't mine, ignore it */\n+                    continue;\n                 if(!ExtractDestination(mapWallet[txin.prevout.hash].vout[txin.prevout.n].scriptPubKey, address))\n                     continue;\n                 grouping.insert(address);\n+                any_mine = true;\n             }\n \n             // group change with input addresses\n-            BOOST_FOREACH(CTxOut txout, pcoin->vout)\n-                if (IsChange(txout))\n-                {\n-                    CWalletTx tx = mapWallet[pcoin->vin[0].prevout.hash];\n-                    CTxDestination txoutAddr;\n-                    if(!ExtractDestination(txout.scriptPubKey, txoutAddr))\n-                        continue;\n-                    grouping.insert(txoutAddr);\n-                }\n-            groupings.insert(grouping);\n-            grouping.clear();\n+            if (any_mine)\n+            {\n+               BOOST_FOREACH(CTxOut txout, pcoin->vout)\n+                   if (IsChange(txout))\n+                   {\n+                       CWalletTx tx = mapWallet[pcoin->vin[0].prevout.hash];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#discussion_r1962151",
      "id" : 1962151,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjIxNTE=",
      "original_commit_id" : "f00b335d53380e10b528d3a4e3bf663624eeb61f",
      "original_line" : null,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1872",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1962151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2012-12-14T12:37:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1962151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1872#discussion_r2198358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1872"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2198358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or even better, what is that 'tx' variable doing there at all?\n",
      "commit_id" : "a3fad2119bcf4638ed137fc5cddc2f34a3bd1dc2",
      "created_at" : "2012-11-21T19:36:43Z",
      "diff_hunk" : "@@ -1664,29 +1664,39 @@ int64 CWallet::GetOldestKeyPoolTime()\n     {\n         CWalletTx *pcoin = &walletEntry.second;\n \n-        if (pcoin->vin.size() > 0 && IsMine(pcoin->vin[0]))\n+        if (pcoin->vin.size() > 0)\n         {\n+            bool any_mine = false;\n             // group all input addresses with each other\n             BOOST_FOREACH(CTxIn txin, pcoin->vin)\n             {\n                 CTxDestination address;\n+                if(!IsMine(txin)) /* If this input isn't mine, ignore it */\n+                    continue;\n                 if(!ExtractDestination(mapWallet[txin.prevout.hash].vout[txin.prevout.n].scriptPubKey, address))\n                     continue;\n                 grouping.insert(address);\n+                any_mine = true;\n             }\n \n             // group change with input addresses\n-            BOOST_FOREACH(CTxOut txout, pcoin->vout)\n-                if (IsChange(txout))\n-                {\n-                    CWalletTx tx = mapWallet[pcoin->vin[0].prevout.hash];\n-                    CTxDestination txoutAddr;\n-                    if(!ExtractDestination(txout.scriptPubKey, txoutAddr))\n-                        continue;\n-                    grouping.insert(txoutAddr);\n-                }\n-            groupings.insert(grouping);\n-            grouping.clear();\n+            if (any_mine)\n+            {\n+               BOOST_FOREACH(CTxOut txout, pcoin->vout)\n+                   if (IsChange(txout))\n+                   {\n+                       CWalletTx tx = mapWallet[pcoin->vin[0].prevout.hash];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#discussion_r2198358",
      "id" : 2198358,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTgzNTg=",
      "original_commit_id" : "f00b335d53380e10b528d3a4e3bf663624eeb61f",
      "original_line" : null,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1872",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2198358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2012-12-14T12:37:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2198358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK if you remove the CWalletTx tx = .... dead line of code that sipa pointed out.\n",
      "created_at" : "2012-12-12T17:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-11299097",
      "id" : 11299097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDExMjk5MDk3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11299097/reactions"
      },
      "updated_at" : "2012-12-12T17:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11299097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=4",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "node_id" : "MDQ6VXNlcjMzMTk5Nw==",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yea, dunno how that made it into there.. cruft from an earlier version. Sorry about that. Fixed and tested.\n",
      "created_at" : "2012-12-14T12:38:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-11374904",
      "id" : 11374904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDExMzc0OTA0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11374904/reactions"
      },
      "updated_at" : "2012-12-14T12:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11374904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/a3fad2119bcf4638ed137fc5cddc2f34a3bd1dc2 for binaries and test log.\n",
      "created_at" : "2012-12-16T03:42:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-11413820",
      "id" : 11413820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDExNDEzODIw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11413820/reactions"
      },
      "updated_at" : "2012-12-16T03:42:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11413820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=4",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "node_id" : "MDQ6VXNlcjIxMTA5MDc=",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This one is lingering around for quite some time, I count 2 ACKs, any reason not to merge it or does it need a rebase?\n",
      "created_at" : "2013-01-11T10:09:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1872#issuecomment-12138293",
      "id" : 12138293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1872",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMTM4Mjkz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12138293/reactions"
      },
      "updated_at" : "2013-01-11T10:09:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12138293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=4",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "node_id" : "MDQ6VXNlcjE0MTk2NDk=",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
