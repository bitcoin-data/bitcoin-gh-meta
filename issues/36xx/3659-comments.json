[
   {
      "body" : "    2014-02-12 14:32:44 init message: Zapping all transactions from wallet...\r\n    2014-02-12 14:32:44 init message: Loading wallet...\r\n\r\nWorked for me on regtest.\r\nBefore: wallet with two unconfirmed mutated transactions\r\nAfter: wallet with only confirmed transactions\r\n\r\n(Did not test with dependent chains of unconfirmed transactions, just direct duplicates)\r\n",
      "created_at" : "2014-02-12T14:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34873953",
      "id" : 34873953,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T14:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34873953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r9669566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9669566"
         }
      },
      "body" : "Please don't log/display this message if not zapping, it caught me unaware for a minute",
      "commit_id" : "518f3bdae3415fdb60cef984b69b36f2633c1fe1",
      "created_at" : "2014-02-12T14:53:50Z",
      "diff_hunk" : "@@ -897,6 +904,15 @@ bool AppInit2(boost::thread_group& threadGroup)\n         pwalletMain = NULL;\n         LogPrintf(\"Wallet disabled!\\n\");\n     } else {\n+        uiInterface.InitMessage(_(\"Zapping all transactions from wallet...\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r9669566",
      "id" : 9669566,
      "original_commit_id" : "7ce1e68ffaabf27c4fd9eebe23b07e4dd24f21e3",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659",
      "updated_at" : "2014-02-14T16:34:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9669566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r9669878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9669878"
         }
      },
      "body" : "heh, whoops!",
      "commit_id" : "518f3bdae3415fdb60cef984b69b36f2633c1fe1",
      "created_at" : "2014-02-12T15:00:50Z",
      "diff_hunk" : "@@ -897,6 +904,15 @@ bool AppInit2(boost::thread_group& threadGroup)\n         pwalletMain = NULL;\n         LogPrintf(\"Wallet disabled!\\n\");\n     } else {\n+        uiInterface.InitMessage(_(\"Zapping all transactions from wallet...\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r9669878",
      "id" : 9669878,
      "original_commit_id" : "7ce1e68ffaabf27c4fd9eebe23b07e4dd24f21e3",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659",
      "updated_at" : "2014-02-14T16:34:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9669878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "What does this really do or help with which problem? From the description and comments in the code I don't understand it's purpose ;).",
      "created_at" : "2014-02-12T15:21:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34878560",
      "id" : 34878560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T15:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34878560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo This gets rid of all unconfirmed transactions. Currently used for cleaning up extra transactions inserted by the malleability DOS. It's less drastic than -salvagewallet which also loses all label information and other metadata.",
      "created_at" : "2014-02-12T15:25:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34878999",
      "id" : 34878999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T15:25:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34878999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "So it \"just\" clears (for Qt) the list of unconfirmed transactions? Does this also remove unconfirmed ones that a users created by himself but where the TX fee was too low for example? IMHO the description for the switch should be a little more user friendly/descriptive perhaps.",
      "created_at" : "2014-02-12T15:56:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34882365",
      "id" : 34882365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T15:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34882365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "All transactions are removed.  Confirmed transactions are then added.\r\n\r\nNo unconfirmed transactions will be present after this is run.\r\n\r\nIt might be best just to not document this in command line help.  It's a rare-use utility.\r\n",
      "created_at" : "2014-02-12T15:58:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34882597",
      "id" : 34882597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T15:58:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34882597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@diapolo It's not meant for willy-nilly use. Wrong use of this feature can result in double-spending (transactions that you get rid of in this way may still be in the mempool somewhere else and get mined at some point). It's only meant to get rid of transactions that *can* never confirm.",
      "created_at" : "2014-02-12T15:58:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34882652",
      "id" : 34882652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T15:58:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34882652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Does this clear the vfSpent flag in other transactions? Otherwise it seems pretty useless...",
      "created_at" : "2014-02-12T16:00:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34882845",
      "id" : 34882845,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T16:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34882845",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa It removes *all* transactions and forces a rescan.",
      "created_at" : "2014-02-12T16:03:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34883197",
      "id" : 34883197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T16:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34883197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "As far as I see does this also remove the information of CWalletTx.strFromAccount.\r\nSo we should store all strFromAccount by txhash and then restore this information after rescan.\r\n\r\nAlso I dont like the name and description of the parameter.\r\nThey are really very confusing in several ways.\r\n(If even we are confused, how can a normal user understand this?)\r\nMy suggestion is \"-cleanwallet\".\r\nWe already have disablewallet,salvagewallet,upgradewallet so it should be -XXXwallet.\r\nAnd description\r\n\"Remove all unconfirmed transactions (implies -rescan)\"\r\n\r\nEdit: + \"on startup\", so \"Remove all unconfirmed transactions on startup (implies -rescan)\"\r\n\r\n",
      "created_at" : "2014-02-12T16:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34884804",
      "id" : 34884804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T16:50:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34884804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "So how is this different from -salvagewallet?",
      "created_at" : "2014-02-12T17:26:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34892875",
      "id" : 34892875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T17:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34892875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa It doesn't lose label information. It keeps everything but transactions, instead of only keys. But yes, maybe it could be defined as a mode of salvagewallet instead of a seperate option.\r\n",
      "created_at" : "2014-02-12T17:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34893040",
      "id" : 34893040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T17:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34893040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Got it. Sounds useful indeed, as salvagewallet is overkill here...",
      "created_at" : "2014-02-12T17:36:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-34893950",
      "id" : 34893950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-12T17:36:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34893950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Salvage wallet currently totally corrupts my testnet wallet. I don't know why. Start off with a zillion tnbtc, salvage, end up with a balance of 150 and a wallet that won't unlock. God knows what abusive things I've done to this walletÃ¢ÂÂ I'm not aware of anyone having a similar issue with salvage.\r\n\r\nZapwallet works fine on it. ACK.",
      "created_at" : "2014-02-14T05:00:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35056022",
      "id" : 35056022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T05:00:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35056022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Armchair architecting here but... when I saw the pull request name I thought it would be a JSON-RPC command to surgically remove a specific unconfirmed transaction (identified by hash). Which, btw, is probably a good feature to have but is a separate issue. Maybe zapwallettx should be renamed just zapwallet or flushwallet to avoid the confusion?",
      "created_at" : "2014-02-14T06:51:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35060591",
      "id" : 35060591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T06:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35060591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku IMO, plural -zapwallettxes would be best. Just -zapwallet would imply the whole wallet is desintegrated.",
      "created_at" : "2014-02-14T07:08:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35061284",
      "id" : 35061284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T07:08:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35061284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ACK in any case",
      "created_at" : "2014-02-14T16:21:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35098414",
      "id" : 35098414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T16:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35098414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Updated to use -zapwallettxes, and collapse bug fixes into the main commit.  Given ACKs, will merge, once pull tester is happy.",
      "created_at" : "2014-02-14T16:35:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35099935",
      "id" : 35099935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T16:35:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35099935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I think the plural of tx is more likely to be txs, so -zapwallettxs",
      "created_at" : "2014-02-14T16:54:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35101843",
      "id" : 35101843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T16:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35101843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/251852?v=3",
         "events_url" : "https://api.github.com/users/drak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drak/followers",
         "following_url" : "https://api.github.com/users/drak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drak",
         "id" : 251852,
         "login" : "drak",
         "organizations_url" : "https://api.github.com/users/drak/orgs",
         "received_events_url" : "https://api.github.com/users/drak/received_events",
         "repos_url" : "https://api.github.com/users/drak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drak"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/518f3bdae3415fdb60cef984b69b36f2633c1fe1 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-02-14T17:08:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#issuecomment-35103283",
      "id" : 35103283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3659",
      "updated_at" : "2014-02-14T17:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35103283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r157392236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157392236"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`fNoncriticalErrors` is always `false` as such this is dead code. Cleaned in #11923.",
      "commit_id" : "518f3bdae3415fdb60cef984b69b36f2633c1fe1",
      "created_at" : "2017-12-18T02:40:08Z",
      "diff_hunk" : "@@ -684,6 +684,86 @@ DBErrors CWalletDB::LoadWallet(CWallet* pwallet)\n     return result;\n }\n \n+DBErrors CWalletDB::FindWalletTx(CWallet* pwallet, vector<uint256>& vTxHash)\n+{\n+    pwallet->vchDefaultKey = CPubKey();\n+    CWalletScanState wss;\n+    bool fNoncriticalErrors = false;\n+    DBErrors result = DB_LOAD_OK;\n+\n+    try {\n+        LOCK(pwallet->cs_wallet);\n+        int nMinVersion = 0;\n+        if (Read((string)\"minversion\", nMinVersion))\n+        {\n+            if (nMinVersion > CLIENT_VERSION)\n+                return DB_TOO_NEW;\n+            pwallet->LoadMinVersion(nMinVersion);\n+        }\n+\n+        // Get cursor\n+        Dbc* pcursor = GetCursor();\n+        if (!pcursor)\n+        {\n+            LogPrintf(\"Error getting wallet database cursor\\n\");\n+            return DB_CORRUPT;\n+        }\n+\n+        while (true)\n+        {\n+            // Read next record\n+            CDataStream ssKey(SER_DISK, CLIENT_VERSION);\n+            CDataStream ssValue(SER_DISK, CLIENT_VERSION);\n+            int ret = ReadAtCursor(pcursor, ssKey, ssValue);\n+            if (ret == DB_NOTFOUND)\n+                break;\n+            else if (ret != 0)\n+            {\n+                LogPrintf(\"Error reading next record from wallet database\\n\");\n+                return DB_CORRUPT;\n+            }\n+\n+            string strType;\n+            ssKey >> strType;\n+            if (strType == \"tx\") {\n+                uint256 hash;\n+                ssKey >> hash;\n+\n+                vTxHash.push_back(hash);\n+            }\n+        }\n+        pcursor->close();\n+    }\n+    catch (boost::thread_interrupted) {\n+        throw;\n+    }\n+    catch (...) {\n+        result = DB_CORRUPT;\n+    }\n+\n+    if (fNoncriticalErrors && result == DB_LOAD_OK)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3659#discussion_r157392236",
      "id" : 157392236,
      "original_commit_id" : "518f3bdae3415fdb60cef984b69b36f2633c1fe1",
      "original_position" : 61,
      "path" : "src/walletdb.cpp",
      "position" : 61,
      "pull_request_review_id" : 84024887,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3659",
      "updated_at" : "2017-12-18T02:40:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157392236",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
