[
   {
      "author_association" : "MEMBER",
      "body" : "Heh, this one might be controversial. In theory it shouldn't be confusing if there is only exactly one p2p connection. If this pull gets Concept ACKs, that is fine. If not, it might be good to replace the `assert self.p2ps` with `assert len(self.p2ps)==1`.",
      "created_at" : "2020-08-25T17:45:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680174958",
      "id" : 680174958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDE3NDk1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T17:45:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680174958",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke indeed. [You put this idea in my head](https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644442680) ð but `assert len == 1` is a good way too. I don't see any advantages to having this though.",
      "created_at" : "2020-08-25T17:51:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680177633",
      "id" : 680177633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDE3NzYzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T17:51:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680177633",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, I remember that. It looks like that was in reply to a performance bottleneck. Is that still observable?",
      "created_at" : "2020-08-25T18:16:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680190467",
      "id" : 680190467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDE5MDQ2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T18:16:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680190467",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I think the performance problems were addressed elsewhere [(comment)](https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644530432). We were talking about p2p_invalid_messages.py which has a lot of subtests that needed to wait for `disconnect_p2ps` before moving on.",
      "created_at" : "2020-08-25T19:01:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680212829",
      "id" : 680212829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDIxMjgyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T19:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680212829",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19801 (test: check for all possible OP_CLTV fail reasons in feature_cltv.py (BIP 65) by theStack)\n* #19393 (test: Add more tests for orphan tx handling by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-08-26T01:12:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680401982",
      "id" : 680401982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDQwMTk4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-04T08:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680401982",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-26T09:01:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-680754468",
      "id" : 680754468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDc1NDQ2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-26T09:01:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680754468",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\nI agree that the `p2p` property can be quite confusing, as it is a bit too much of \"implicit magic\" going on.\r\n```\r\nnode.add_p2p_connection(P2PInterface())\r\nnode.p2p.do_something_fancy()\r\n```\r\nis less clear than the explicit\r\n```\r\np2p_conn = node.add_p2p_connection(P2PInterface())\r\np2p_conn.do_something_fancy()\r\n```\r\nin terms of readability, in my opinion. Generally, if you have a function to create an object, the handle returned by that function should be the preferred way to access that object, and not some other implicit way. (`.p2ps[0]` suffers from the same problem, but at least it is more obvious that it is the _first_ connection.)\r\n\r\nThat said, I also agree to MarcoFalke that this might be controversial... if it doesn't get enough Concept ACKs, I'm also happy to ACK the variant with `assert len(self.p2ps)==1` in the p2p property.",
      "created_at" : "2020-08-28T10:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-682455956",
      "id" : 682455956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MjQ1NTk1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-28T10:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682455956",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "thanks for Concept ACK @theStack! \r\n\r\nAgreed that's more clear, I could also just apply the explicit `p2p_conn = node.add_p2p_connection(...)` to all the places where `p2p` is used (just couldn't be a scripted-diff).\r\n\r\nI'll wait for more people to weigh in :)",
      "created_at" : "2020-08-28T15:50:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-682753036",
      "id" : 682753036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Mjc1MzAzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-28T15:50:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682753036",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yes, agreed that this seems controversial :) there was even discussion of this in the original PR: https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331467540\r\n\r\nI don't have a strong preference for `p2p` vs `p2ps[0]`. I have a mild preference for not reversing an existing style decision without new information. Maybe you can see if the original author says \"I regret my decision to introduce the `p2p` property; let's change it\"? :)\r\n\r\nBut I'm definitely in favor of `assert len(self.p2ps) == 1` to avoid incorrect/confusing use of the `p2p` property!",
      "created_at" : "2020-09-01T06:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-684437371",
      "id" : 684437371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NDQzNzM3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T06:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/684437371",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That is true, I should have asked - @jnewbery how do you feel about this?",
      "created_at" : "2020-09-01T11:45:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-684792137",
      "id" : 684792137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NDc5MjEzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T11:45:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/684792137",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @jnewbery how do you feel about this?\r\n\r\nI can see how `TestNode.p2p` could introduce subtle bugs if tests get extended and the wrong connection is used by mistake, so we should either remove the property or add an assert when it gets used.\r\n\r\nThe approach in this PR (removing the property entirely) seems fine to me. Concept ACK.",
      "created_at" : "2020-09-01T13:35:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-684858325",
      "id" : 684858325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NDg1ODMyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T13:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/684858325",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK\r\n\r\nAnd thanks for the motivation to learn about `scripted-diff` :)\r\n\r\nAre you also on MacOS? I had to install `gsed` and use that in place of `sed` in order to run `commit-script-check.sh` locally, but once I did this, I was able to reproduce the CI error.\r\n\r\nA few thoughts:\r\n- Do you need to append a final `/g` to the scripted diff to avoid the \"unterminated `s command\" CI error at https://travis-ci.org/github/bitcoin/bitcoin/jobs/721079379?\r\n- Should the regex be `\\.p2p\\b` (end on a word boundary instead of a dot)? e.g. it looks like `test/functional/feature_versionbits_warning.py` uses `node.p2p` without a trailing dot\r\n- Would it make sense to restrict the `git grep` to the `test/functional` directory?\r\n\r\nHere's a verify script that takes all of the above into account:\r\n\r\n    sed -i 's/\\.p2p\\b/.p2ps[0]/g' $(git grep -l \"\\.p2p\\b\" test/functional)",
      "created_at" : "2020-09-01T17:58:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-685035203",
      "id" : 685035203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTAzNTIwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T17:58:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685035203",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> * Should the regex be `\\.p2p\\b` (end on a word boundary instead of a dot)? e.g. it looks like test/functional/feature_versionbits_warning.py uses node.p2p without a trailing dot\r\n\r\n@robot-dreams really good point about feature_versionbits_warning, thanks for catching that! I think the problem with using `\\.p2p\\b` is we'll also be replacing all of the `test_framework.p2p` imports. I'm going through and refactoring the tests to explicitly call the p2p objects returned from `add_p2p_connection` though, so the scripted diff will be pretty minimal. ",
      "created_at" : "2020-09-04T01:39:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-686849451",
      "id" : 686849451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Njg0OTQ1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-04T01:39:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686849451",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Oops, nice catch! I forgot to actually test the script myself ð \r\n\r\nIt's a moot point at this point since your proposed change sounds better, but I think this would've worked (don't do the replace on lines that start with `from`)\r\n\r\n    sed -i '/^from/!s/\\.p2p\\b/.p2ps[0]/g' $(git grep -l \"\\.p2p\\b\" test/functional)",
      "created_at" : "2020-09-04T02:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-686857844",
      "id" : 686857844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Njg1Nzg0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-04T02:10:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686857844",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "One day I will get the scripted-diff right on the first try... ð \r\n\r\nI figured 3 Concept ACKs was enough for me to put some work into this. Last push replaces `p2p` property with the p2p object returned from `node.add_p2p_connection()` instead (except for two places where it'd be a nontrivial refactor). As stated previously in the description and by @theStack, this is the clearest way to do it. It makes reviewing the PR slightly more involved, but I think it's a bigger improvement as well :) @MarcoFalke please let me know what you think?",
      "created_at" : "2020-09-04T02:25:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-686862039",
      "id" : 686862039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Njg2MjAzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-04T02:25:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686862039",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483351426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483351426"
         }
      },
      "author_association" : "NONE",
      "body" : "Nit: Would it make sense to incorporate this change into the scripted-diff?",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T02:30:47Z",
      "diff_hunk" : "@@ -1407,7 +1407,7 @@ def send_blocks(self, blocks, success=True, reject_reason=None, force_send=False\n         \"\"\"Sends blocks to test node. Syncs and verifies that tip has advanced to most recent block.\n \n         Call with success = False if the tip shouldn't advance to the most recent block.\"\"\"\n-        self.nodes[0].p2p.send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)\n+        self.nodes[0].p2ps[0].send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483351426",
      "id" : 483351426,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzM1MTQyNg==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 1410,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 482317560,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483351426",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483352225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483352225"
         }
      },
      "author_association" : "NONE",
      "body" : "Nit: Should `p2p.wait_until` be replaced with `peer_receiving.wait_until` in this comment?",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T02:34:16Z",
      "diff_hunk" : "@@ -191,25 +191,25 @@ def run_test(self):\n         self.log.info(\"Add P2P connection to node2\")\n         self.nodes[0].disconnect_p2ps()\n \n-        self.nodes[2].add_p2p_connection(BaseNode())\n+        peer_receiving = self.nodes[2].add_p2p_connection(BaseNode())\n \n         self.log.info(\"Test that node2 propagates all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(MSG_BLOCK, block))\n-        self.nodes[2].p2p.send_message(getdata_request)\n+        peer_receiving.send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # P2PInterface objects.\n-        self.nodes[2].p2p.wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2p.block_receive_map.keys())), timeout=5)\n+        peer_receiving.wait_until(lambda: sorted(blocks) == sorted(list(peer_receiving.block_receive_map.keys())), timeout=5)\n \n         self.log.info(\"Check that each block was received only once\")\n         # The network thread uses a global lock on data access to the P2PConnection objects when sending and receiving\n         # messages. The test thread should acquire the global lock before accessing any P2PConnection data to avoid locking\n         # and synchronization issues. Note p2p.wait_until() acquires this global lock internally when testing the predicate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483352225",
      "id" : 483352225,
      "line" : 210,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzM1MjIyNQ==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 210,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/example_test.py",
      "position" : 41,
      "pull_request_review_id" : 482317560,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483352225",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483583612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483583612"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes i should do that!",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T12:27:19Z",
      "diff_hunk" : "@@ -1407,7 +1407,7 @@ def send_blocks(self, blocks, success=True, reject_reason=None, force_send=False\n         \"\"\"Sends blocks to test node. Syncs and verifies that tip has advanced to most recent block.\n \n         Call with success = False if the tip shouldn't advance to the most recent block.\"\"\"\n-        self.nodes[0].p2p.send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)\n+        self.nodes[0].p2ps[0].send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483583612",
      "id" : 483583612,
      "in_reply_to_id" : 483351426,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU4MzYxMg==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 1410,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 482609111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483583612",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483583888"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483583888"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "they are the same, no?",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T12:27:53Z",
      "diff_hunk" : "@@ -191,25 +191,25 @@ def run_test(self):\n         self.log.info(\"Add P2P connection to node2\")\n         self.nodes[0].disconnect_p2ps()\n \n-        self.nodes[2].add_p2p_connection(BaseNode())\n+        peer_receiving = self.nodes[2].add_p2p_connection(BaseNode())\n \n         self.log.info(\"Test that node2 propagates all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(MSG_BLOCK, block))\n-        self.nodes[2].p2p.send_message(getdata_request)\n+        peer_receiving.send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # P2PInterface objects.\n-        self.nodes[2].p2p.wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2p.block_receive_map.keys())), timeout=5)\n+        peer_receiving.wait_until(lambda: sorted(blocks) == sorted(list(peer_receiving.block_receive_map.keys())), timeout=5)\n \n         self.log.info(\"Check that each block was received only once\")\n         # The network thread uses a global lock on data access to the P2PConnection objects when sending and receiving\n         # messages. The test thread should acquire the global lock before accessing any P2PConnection data to avoid locking\n         # and synchronization issues. Note p2p.wait_until() acquires this global lock internally when testing the predicate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483583888",
      "id" : 483583888,
      "in_reply_to_id" : 483352225,
      "line" : 210,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU4Mzg4OA==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 210,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/example_test.py",
      "position" : 41,
      "pull_request_review_id" : 482609482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483583888",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483757252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483757252"
         }
      },
      "author_association" : "NONE",
      "body" : "Yes, my intent was \"for clarity, should the variable name in the comment match the usage on line 205\", but I could also see the case for `p2p` being clearer than `peer_receiving`.\r\n\r\nI'm happy with it the way it is, especially if you think it's clearer as `p2p`!",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T17:21:17Z",
      "diff_hunk" : "@@ -191,25 +191,25 @@ def run_test(self):\n         self.log.info(\"Add P2P connection to node2\")\n         self.nodes[0].disconnect_p2ps()\n \n-        self.nodes[2].add_p2p_connection(BaseNode())\n+        peer_receiving = self.nodes[2].add_p2p_connection(BaseNode())\n \n         self.log.info(\"Test that node2 propagates all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(MSG_BLOCK, block))\n-        self.nodes[2].p2p.send_message(getdata_request)\n+        peer_receiving.send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # P2PInterface objects.\n-        self.nodes[2].p2p.wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2p.block_receive_map.keys())), timeout=5)\n+        peer_receiving.wait_until(lambda: sorted(blocks) == sorted(list(peer_receiving.block_receive_map.keys())), timeout=5)\n \n         self.log.info(\"Check that each block was received only once\")\n         # The network thread uses a global lock on data access to the P2PConnection objects when sending and receiving\n         # messages. The test thread should acquire the global lock before accessing any P2PConnection data to avoid locking\n         # and synchronization issues. Note p2p.wait_until() acquires this global lock internally when testing the predicate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483757252",
      "id" : 483757252,
      "in_reply_to_id" : 483352225,
      "line" : 210,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc1NzI1Mg==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 210,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/example_test.py",
      "position" : 41,
      "pull_request_review_id" : 482829708,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483757252",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483769860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483769860"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ohhhh i see what you mean! ð¤·  I think since it's in example_test.py, yeah, `p2p` might be more helpful",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-04T17:50:43Z",
      "diff_hunk" : "@@ -191,25 +191,25 @@ def run_test(self):\n         self.log.info(\"Add P2P connection to node2\")\n         self.nodes[0].disconnect_p2ps()\n \n-        self.nodes[2].add_p2p_connection(BaseNode())\n+        peer_receiving = self.nodes[2].add_p2p_connection(BaseNode())\n \n         self.log.info(\"Test that node2 propagates all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(MSG_BLOCK, block))\n-        self.nodes[2].p2p.send_message(getdata_request)\n+        peer_receiving.send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # P2PInterface objects.\n-        self.nodes[2].p2p.wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2p.block_receive_map.keys())), timeout=5)\n+        peer_receiving.wait_until(lambda: sorted(blocks) == sorted(list(peer_receiving.block_receive_map.keys())), timeout=5)\n \n         self.log.info(\"Check that each block was received only once\")\n         # The network thread uses a global lock on data access to the P2PConnection objects when sending and receiving\n         # messages. The test thread should acquire the global lock before accessing any P2PConnection data to avoid locking\n         # and synchronization issues. Note p2p.wait_until() acquires this global lock internally when testing the predicate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r483769860",
      "id" : 483769860,
      "in_reply_to_id" : 483352225,
      "line" : 210,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc2OTg2MA==",
      "original_commit_id" : "9223a40a782d0f5093fd082b506d0fefb871cacf",
      "original_line" : 210,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/example_test.py",
      "position" : 41,
      "pull_request_review_id" : 482845930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483769860",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r484041352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484041352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What about \r\n```suggestion\r\n        self.helper_peer = self.nodes[0].add_p2p_connection(P2PDataStore())\r\n```",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-06T08:41:00Z",
      "diff_hunk" : "@@ -1386,14 +1386,14 @@ def bootstrap_p2p(self, timeout=10):\n         \"\"\"Add a P2P connection to the node.\n \n         Helper to connect and wait for version handshake.\"\"\"\n-        self.nodes[0].add_p2p_connection(P2PDataStore())\n+        helper_peer = self.nodes[0].add_p2p_connection(P2PDataStore())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r484041352",
      "id" : 484041352,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA0MTM1Mg==",
      "original_commit_id" : "f1ccb4cc9c4457bed2cc12ff9cedb30d56a31985",
      "original_line" : 1389,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 483123962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484041352",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r484041377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484041377"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        self.helper_peer.send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)\r\n```",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-06T08:41:21Z",
      "diff_hunk" : "@@ -1407,7 +1407,7 @@ def send_blocks(self, blocks, success=True, reject_reason=None, force_send=False\n         \"\"\"Sends blocks to test node. Syncs and verifies that tip has advanced to most recent block.\n \n         Call with success = False if the tip shouldn't advance to the most recent block.\"\"\"\n-        self.nodes[0].p2p.send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)\n+        self.nodes[0].p2ps[0].send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r484041377",
      "id" : 484041377,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA0MTM3Nw==",
      "original_commit_id" : "f1ccb4cc9c4457bed2cc12ff9cedb30d56a31985",
      "original_line" : 1410,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 483123962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484041377",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r486369553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486369553"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ð¤¦ââï¸  I should've just done that",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-10T14:03:19Z",
      "diff_hunk" : "@@ -1407,7 +1407,7 @@ def send_blocks(self, blocks, success=True, reject_reason=None, force_send=False\n         \"\"\"Sends blocks to test node. Syncs and verifies that tip has advanced to most recent block.\n \n         Call with success = False if the tip shouldn't advance to the most recent block.\"\"\"\n-        self.nodes[0].p2p.send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)\n+        self.nodes[0].p2ps[0].send_blocks_and_test(blocks, self.nodes[0], success=success, reject_reason=reject_reason, force_send=force_send, timeout=timeout, expect_disconnect=reconnect)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r486369553",
      "id" : 486369553,
      "in_reply_to_id" : 484041377,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM2OTU1Mw==",
      "original_commit_id" : "f1ccb4cc9c4457bed2cc12ff9cedb30d56a31985",
      "original_line" : 1410,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 485969705,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-10T14:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486369553",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Did a little more refactoring to make feature_block.py and feature_csv_activation.py more clear, addressed @MarcoFalke's comments. Just left p2p_invalid_tx.py for the scripted-diff since it seems to want a variable number of connections in `bootstrap_p2p`, maybe future additions to the test could need it. Also added some stuff to the functional test README. Ready for another look :)",
      "created_at" : "2020-09-10T16:05:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-690411440",
      "id" : 690411440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDQxMTQ0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-10T16:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690411440",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "utACK 10d61505fe77880d6989115defa5e08417f3de2d\r\n\r\nThanks for improving the documentation as well!",
      "created_at" : "2020-09-10T21:33:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-690743886",
      "id" : 690743886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDc0Mzg4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-10T21:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690743886",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-14T08:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#issuecomment-691911283",
      "id" : 691911283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19804",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MTkxMTI4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-14T08:41:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/691911283",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r490286433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/490286433"
         }
      },
      "author_association" : "NONE",
      "body" : "6 lines above there's a stray `node.p2ps[1]` that can be replaced with `peer_second`.",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-17T14:21:18Z",
      "diff_hunk" : "@@ -64,7 +64,7 @@ def run_test(self):\n         # Transaction should be rebroadcast approximately 24 hours in the future,\n         # but can range from 12-36. So bump 36 hours to be sure.\n         node.setmocktime(now + 36 * 60 * 60)\n-        node.p2p.wait_for_broadcast([txid])\n+        peer_second.wait_for_broadcast([txid])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r490286433",
      "id" : 490286433,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI4NjQzMw==",
      "original_commit_id" : "784f757994c1306bb6584b14c0c78617d6248432",
      "original_line" : 67,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : 27,
      "pull_request_review_id" : 490648438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-17T14:32:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/490286433",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008879?v=4",
         "events_url" : "https://api.github.com/users/guggero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/guggero/followers",
         "following_url" : "https://api.github.com/users/guggero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/guggero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/guggero",
         "id" : 1008879,
         "login" : "guggero",
         "node_id" : "MDQ6VXNlcjEwMDg4Nzk=",
         "organizations_url" : "https://api.github.com/users/guggero/orgs",
         "received_events_url" : "https://api.github.com/users/guggero/received_events",
         "repos_url" : "https://api.github.com/users/guggero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/guggero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/guggero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/guggero"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r494950062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494950062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@guggero Seems like a good suggestion. Mind following up with a patch?",
      "commit_id" : "10d61505fe77880d6989115defa5e08417f3de2d",
      "created_at" : "2020-09-25T12:22:23Z",
      "diff_hunk" : "@@ -64,7 +64,7 @@ def run_test(self):\n         # Transaction should be rebroadcast approximately 24 hours in the future,\n         # but can range from 12-36. So bump 36 hours to be sure.\n         node.setmocktime(now + 36 * 60 * 60)\n-        node.p2p.wait_for_broadcast([txid])\n+        peer_second.wait_for_broadcast([txid])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19804#discussion_r494950062",
      "id" : 494950062,
      "in_reply_to_id" : 490286433,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk1MDA2Mg==",
      "original_commit_id" : "784f757994c1306bb6584b14c0c78617d6248432",
      "original_line" : 67,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : 27,
      "pull_request_review_id" : 496369334,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19804",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-25T12:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494950062",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
