[
   {
      "author_association" : "MEMBER",
      "body" : "See CVE 2020-26895 as the original motivation for starting this issue : https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/002856.html\r\n\r\nIn the context of second-layer protocols, can a malicious counterparty abuse our tx-relay DoS protections to directly prevent honest time-sensitive transactions to propagate ? Sadly yes.",
      "created_at" : "2020-10-20T23:09:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-713190585",
      "id" : 713190585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzE5MDU4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T23:09:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713190585",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Excellent research! Thanks a lot @ariard for making us stronger! â¤ï¸ \r\n\r\nAnd thanks for taking the time to request a CVE assignment too: that allows for easy unambiguous referencing.",
      "created_at" : "2020-10-22T07:48:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-714302440",
      "id" : 714302440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDMwMjQ0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T07:48:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714302440",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is clearly important and the work on the CVE is really impressive. On this issue though perhaps you can tentatively start answering the questions you pose @ariard to move this forward. It will be your personal opinion obviously but that's fine, it is easier to have discussion if someone attempts to answer the questions rather than just leave them open ended.\r\n\r\nedit: Perhaps you can add a link to the P2P meeting log where this was initially discussed, presumably http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-08-25-15.00.log.html ",
      "created_at" : "2020-12-28T11:33:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-751682469",
      "id" : 751682469,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MTY4MjQ2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-28T11:40:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751682469",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@michaelfolkson\r\n\r\nFirst, have a look on this gist : https://gist.github.com/ariard/7e509bf2c81ea8049fd0c67978c521af, it's a sum-up around tx-relay jamming and its implications on L2/contract protocols. Note that the set of vulnerabilities (money loss, timevalue DoS, \"contract cancelling\", ...) is different in function of each protocol (CoinSwap, Lightning, DLC, ...).  Maybe we can translate the gist as a dev wiki page ?\r\n\r\nW.r.t to questions, answering them is function of the L2 protocol considered (CoinSwap, Lightning, DLC, ...). What I can do is write down a tx-jamming analysis for the main ones.\r\n\r\nAbout standardness malleability, see logs : https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#topic-reducing-cve-2020-26895-class-of-bugs-and-tx-standardness-ariard, where the majority opinion (which I adhere too now) is that there is no such thing as \"bitcoin's tx relay rules\". So in the future, the burden would be more on L2 protocol designer to make the less assumptions possible on their transaction formats.\r\n\r\nAnyway, tx-relay jamming/mempool congestion fault-tolerance for L2 protocols is a wide subject, I'm glad to get help.",
      "created_at" : "2020-12-29T22:05:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-752256879",
      "id" : 752256879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MjI1Njg3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-29T22:06:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752256879",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for this @ariard. There is really useful information buried in some of these docs but some of these are really long and there is a lot of high level fluff imo that doesn't drive the discussion forward. I'm scanning through these trying to find where the useful information is.\r\n\r\nIn terms of the problem being different for each protocol, DLCs and CoinSwap are very early in their development. Stalling because we don't what their final form will be doesn't make much sense to me. Of course the teams working on them should be consulted once there is a concrete proposal in case the solution doesn't work for them. But directly focusing on solving Lightning specific problems (which we are more clear on) make sense to me if any progress is going to be made.\r\n\r\nI don't mean to sound harsh but we need to move from high level philosophy to a focus on which solutions are optimal for specific Lightning problems and doable from a Core context imo. If the burden is on L2 protocols (e.g. standardness malleability) rather than Core then there is nothing to discuss on this Core issue and it should be closed. But there does seem to be some things that are potentially solved from a Core perspective. I'm just trying to figure out exactly what those things are and will keep reading.\r\n\r\n",
      "created_at" : "2021-01-01T14:39:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-753324708",
      "id" : 753324708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzMyNDcwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-01T14:39:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753324708",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I want to be sure we understand well the vulnerabilities vectors before to rush on integrating some complex change in Core to realize after the fact it doesn't work completely (e.g carve-out and the one-block CSV lift in anchor outputs). IMHO, those issues aren't well understood both by L2/Core devs, so it's still too early to decide if it should be entirely the burden of one side or the other. And the most likely outcome is Core will need to introduce mechanisms (e.g \"libtxstandardness\", package relay, cheaper witness acceptance) which are well-used by L2 devs while minimizing attack surface at L2 protocol design.\r\n\r\nI still have to do the assessment on pinning. Meanwhile, if you have any suggestion to make the gist better and ease understanding of each vector, feel free to comment there :) ",
      "created_at" : "2021-01-04T19:46:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-754178444",
      "id" : 754178444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NDE3ODQ0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-04T19:48:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/754178444",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this issue, I'll dry-up all the substance in new repository, [L2-zoology](https://github.com/ariard/L2-zoology) Aiming to document and discuss in details all the open problems raised in this issue :)",
      "created_at" : "2021-04-20T21:06:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19820#issuecomment-823600671",
      "id" : 823600671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19820",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzYwMDY3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-20T21:06:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823600671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   }
]
