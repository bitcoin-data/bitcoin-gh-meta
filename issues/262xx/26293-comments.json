[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26292](https://github.com/bitcoin/bitcoin/pull/26292) (util: move threadinterrupt into util/ by fanquake)\n* [#26251](https://github.com/bitcoin/bitcoin/pull/26251) (refactor: add cs_main.h by fanquake)\n* [#26177](https://github.com/bitcoin/bitcoin/pull/26177) (refactor / kernel: Move non-gArgs chainparams functionality to kernel by TheCharlatan)\n* [#25729](https://github.com/bitcoin/bitcoin/pull/25729) (wallet: Check max transaction weight in CoinSelection by aureleoules)\n* [#25152](https://github.com/bitcoin/bitcoin/pull/25152) (refactor: Split util/system into exception, shell, and fs-specific files by Empact)\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#15294](https://github.com/bitcoin/bitcoin/pull/15294) (refactor: Extract RipeMd160 by Empact)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-10-11T17:26:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1275038316",
      "id" : 1275038316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585L_4ps",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275038316/reactions"
      },
      "updated_at" : "2022-10-11T17:26:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275038316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2022-10-11T18:18:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1275095633",
      "id" : 1275095633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MAGpR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275095633/reactions"
      },
      "updated_at" : "2022-10-11T18:18:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275095633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think something should be done about the inconsistency of having `libbitcoin_common.a` source files outside of the `src/common/` and this is one possible option. Other possible options are:\r\n\r\n1. Move `src/interface/` files to a `libbitcoin_interfaces.a` library\r\n2. Delete `src/interface/*.cpp` files and make `src/interfaces/` directory only contain headers\r\n\r\nI think I like these options a little better, because they would keep source structure flat and avoid too much nesting. They would also avoid namespace inconsistencies or the need to have a nested `common::interfaces::` namespace that would make function declarations in headers more verbose.\r\n\r\nI want look into option 2 a little more since it seems like the 3 .cpp files in the interfaces directory are very minimal and don't contain much real code.",
      "created_at" : "2022-10-11T19:49:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1275195884",
      "id" : 1275195884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MAfHs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275195884/reactions"
      },
      "updated_at" : "2022-10-12T03:07:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1275195884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky \r\n\r\nAs you mentioned, I agree that we should go for a less nested option when possible.\r\n\r\nNow considering the alternatives you mentioned, Option 2 seems like a pretty interesting idea. I thought it to be a preferable option because it seemed a cleaner way to achieve our goal.\r\nHowever, on second thought, what if we need to expand `src/interfaces` in the future for some reason, and going with a header-only route for the expansion might be unreasonable? So we might have to move to an option similar to your first suggestion.\r\n\r\nThis might be an infeasible scenario, and there might exist other options than the two you mentioned to achieve this goal, which I haven't considered. But I just wanted to explain why I think the second option, though cleaner, might not be feasible in the long run.",
      "created_at" : "2022-10-12T12:44:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1276114335",
      "id" : 1276114335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MD_Wf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276114335/reactions"
      },
      "updated_at" : "2022-10-12T12:44:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276114335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I implemented option 2 above in #26298. It changes fewer files than this PR and avoids the nested directory structure.\r\n\r\n> However, on second thought, what if we need to expand `src/interfaces` in the future for some reason, and going with a header-only route for the expansion might be unreasonable?\r\n\r\nI don't see this happening, just because the point of `src/interfaces/` directory is just to define abstract classes with virtual methods. Implementation of the interfaces belongs in the _node_, _wallet_, or _common_ libraries, or in the GUI. If implementation code sneaks into the interfaces directory it's probably a mistake. Or if it is really intentional, it could logically go into a `libbitcoin_interfaces.a` library that without requiring all the interfaces to move somewhere.",
      "created_at" : "2022-10-12T15:45:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1276389561",
      "id" : 1276389561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MFCi5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276389561/reactions"
      },
      "updated_at" : "2022-10-12T15:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276389561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> because they would keep source structure flat and avoid too much nesting. \r\n\r\nIs this something we are actively trying to avoid? i.e in https://github.com/bitcoin/bitcoin/pull/26250#discussion_r986997358 we seem to be going the other direction.\r\n\r\nIn any case, closing this in favour of #26298.",
      "created_at" : "2022-10-13T05:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1277043406",
      "id" : 1277043406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MHiLO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277043406/reactions"
      },
      "updated_at" : "2022-10-13T05:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277043406",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > because they would keep source structure flat and avoid too much nesting.\r\n> \r\n> Is this something we are actively trying to avoid? i.e in [#26250 (comment)](https://github.com/bitcoin/bitcoin/pull/26250#discussion_r986997358) we seem to be going the other direction.\r\n\r\nI think both changes make sense. In that case, the file `mempool_utils.cpp` is renamed `util/mempool.cpp`, so it's really just swapping out a `_` separator for the `/` separator, not actually adding a deeper level of nesting. I think that change is an improvement because it groups mempool utils with other utils instead of grouping them with mempool tests. It should make mempool utils more discoverable so they can be used by tests using mempool indirectly, not just tests directly testing the mempool.\r\n\r\nIn this case, this PR isn't just changing a `_` separator to a `/` separator or `::` separator, but really adding an extra level to the hierarchy, renaming \"interfaces\" to \"common interfaces\" where I think the word \"common\" isn't helpful descriptively, and isn't great organizationally since it groups wallet and node interface definitions in with `libbitcoin_common` library code that shouldn't know anything about nodes or wallets. It could also make headers more verbose with identifiers like `common::interfaces::Wallet` instead of `interfaces::Wallet`, or introducing an inconsistency between the directory structure and namespace structure.\r\n\r\nThe idea for `src/interfaces/` is that it defines abstract interfaces that libraries can use to call each other without depending on each other at link time. Since #20494, the `libbitcoin_node` library provides `Node` and `Chain` implementations, the `libbitcoin_wallet` library provides `Wallet` and `WalletLoader` implementations. #26298 just extends #20494 so the `libbitcoin_common` provides now provides `Handler` implementations.\r\n\r\nHope that makes sense.",
      "created_at" : "2022-10-13T18:16:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26293#issuecomment-1277998784",
      "id" : 1277998784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
      "node_id" : "IC_kwDOABII585MLLbA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277998784/reactions"
      },
      "updated_at" : "2022-10-13T18:54:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277998784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
