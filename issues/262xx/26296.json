{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Demo of integrating the bitcoin-tidy (https://github.com/theuni/bitcoin-tidy/), [clang-tidy plugin](https://clang.llvm.org/extra/clang-tidy/) written by theuni into our tidy CI job. The plugin currently has a single check (`bitcoin-init-list`), the purpose of which is to warn when non-defaulted fields in an aggregate type are left uninitialized.\r\n\r\nThe REVERT ME commit produces the following output with the check enabled:\r\n```bash\r\nclang-tidy-15 -p=/home/ubuntu/ci_scratch/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu -quiet -load=/home/ubuntu/ci_scratch/ci/scratch/bitcoin-tidy/build/libbitcoin-tidy.so /home/ubuntu/ci_scratch/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/init.cpp\r\ninit.cpp:1454:37: error: Designated initializer for struct kernel::MemPoolOptions has uninitialized member of type int64_t [bitcoin-init-list,-warnings-as-errors]\r\n    CTxMemPool::Options mempool_opts{\r\n                                    ^\r\n\r\nclang-tidy-15 -p=/home/ubuntu/ci_scratch/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu -quiet -load=/home/ubuntu/ci_scratch/ci/scratch/bitcoin-tidy/build/libbitcoin-tidy.so /home/ubuntu/ci_scratch/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/util/setup_common.cpp\r\ntest/util/setup_common.cpp:167:37: error: Designated initializer for struct kernel::MemPoolOptions has uninitialized member of type int64_t [bitcoin-init-list,-warnings-as-errors]\r\n    CTxMemPool::Options mempool_opts{\r\n                                    ^\r\n```\r\n\r\nI've bumped the native_tidy container to use Ubuntu:22.10, which ships with LLVM 15. This also means we get a `run-clang-tidy` that has a `-load` option, which is convinient for passing our plugin through.\r\n\r\nThe diff is more verbose than it would be, because I've commented out IWYU. It doesn't like building with LLVM 15, either our current clang-14 branch, or `master`, so I've just disabled it for the purposes of this PR.\r\n\r\nRelated to #25631. ",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296/comments",
   "created_at" : "2022-10-12T06:35:04Z",
   "draft" : true,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/26296",
   "id" : 1405651308,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585An4JL",
   "number" : 26296,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/26296.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26296",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/26296.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26296"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 1,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 1,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296/timeline",
   "title" : "[DEMO] Integrate `bitcoin-tidy` clang-tidy plugin - warn on uninitialized members of aggregate types",
   "updated_at" : "2022-10-12T07:32:55Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26296",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   }
}
