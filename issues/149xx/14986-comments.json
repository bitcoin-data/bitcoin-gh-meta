[
   {
      "author_association" : "NONE",
      "body" : "I have seen that just ignoring the 8 bytes of zeros everything works ok.\r\n\r\nSo the question is, why does the node, apparently randomly, write 8 bytes with zeros between blocks in blkxxxxx.dat?",
      "created_at" : "2018-12-17T22:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-448029403",
      "id" : 448029403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0ODAyOTQwMw==",
      "updated_at" : "2018-12-17T22:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448029403",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/12698227?v=4",
         "events_url" : "https://api.github.com/users/educob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/educob/followers",
         "following_url" : "https://api.github.com/users/educob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/educob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/educob",
         "id" : 12698227,
         "login" : "educob",
         "node_id" : "MDQ6VXNlcjEyNjk4MjI3",
         "organizations_url" : "https://api.github.com/users/educob/orgs",
         "received_events_url" : "https://api.github.com/users/educob/received_events",
         "repos_url" : "https://api.github.com/users/educob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/educob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/educob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/educob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this helper script still useful? If so, a test should probably be added to test it. Otherwise, it might be best to remove it.",
      "created_at" : "2018-12-17T23:08:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-448033359",
      "id" : 448033359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0ODAzMzM1OQ==",
      "updated_at" : "2018-12-17T23:08:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448033359",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I changed:\r\n\r\n```\r\n            if (not inhdr or (inhdr[0] == \"\\0\")):\r\n                self.inF.close()\r\n                self.inF = None\r\n                self.inFn = self.inFn + 1\r\n                continue\r\n```\r\n\r\nto:\r\n\r\n```\r\n            if (not inhdr or (inhdr[0] == \"\\0\")):\r\n                if(inhdr):\r\n                    print(\"inhdr was 0. inFn:\" + str(self.inFn) + str(len(inhdr)))\r\n                    continue\r\n                self.inF.close()\r\n                self.inF = None\r\n                self.inFn = self.inFn + 1\r\n                continue\r\n```\r\nAnd it's working (still processing block 480000 but it seems it will end successfully)\r\nSo it was useful. \r\nBut I would like to know why the node inserts randomly these 8 zero bytes between blocks.\r\nThanks.\r\n\r\nupdate: it correctly linearized 554000 blocks after the little modification I did.",
      "created_at" : "2018-12-17T23:20:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-448036447",
      "id" : 448036447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0ODAzNjQ0Nw==",
      "updated_at" : "2018-12-18T07:39:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448036447",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/12698227?v=4",
         "events_url" : "https://api.github.com/users/educob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/educob/followers",
         "following_url" : "https://api.github.com/users/educob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/educob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/educob",
         "id" : 12698227,
         "login" : "educob",
         "node_id" : "MDQ6VXNlcjEyNjk4MjI3",
         "organizations_url" : "https://api.github.com/users/educob/orgs",
         "received_events_url" : "https://api.github.com/users/educob/received_events",
         "repos_url" : "https://api.github.com/users/educob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/educob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/educob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/educob"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@MarcoFalke yes, very useful. My node regularly has data corruption issues (still can't figure out why). Using -reindex or -reindex-chainstate does not always fix the issue, instead it usually just causes more data corruption issues. I run your script to make bootstrap.dat backup files which I use to reseed my node after it runs into issues. \r\n\r\nI don't know how to write tests yet but I will try to figure it out and add some tests for this script, which I think is invaluable. \r\n\r\n> Is this helper script still useful? If so, a test should probably be added to test it. Otherwise, it might be best to remove it.\r\n\r\n\r\n\r\n@educob I have a similar issue but it occurs at blk00201.dat (about ~57% of the way through at height 575910 on today's date). I get this error:\r\n\r\n`Invalid magic: 00000000`\r\n\r\nI modified the inMagic if statement to continue on if it fails the check but equals '00000000', which has worked so far. Obviously not thrilled about this solution because I don't know why I had to implement it to begin with. Doesn't answer your question about the node randomly writing zeros but know that you are not alone!\r\n\r\n> I have seen that just ignoring the 8 bytes of zeros everything works ok.\r\n> \r\n> So the question is, why does the node, apparently randomly, write 8 bytes with zeros between blocks in blkxxxxx.dat?",
      "created_at" : "2019-05-13T23:28:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-492022706",
      "id" : 492022706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MjAyMjcwNg==",
      "updated_at" : "2019-05-13T23:28:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/492022706",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2507877?v=4",
         "events_url" : "https://api.github.com/users/mamcmanus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mamcmanus/followers",
         "following_url" : "https://api.github.com/users/mamcmanus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mamcmanus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mamcmanus",
         "id" : 2507877,
         "login" : "mamcmanus",
         "node_id" : "MDQ6VXNlcjI1MDc4Nzc=",
         "organizations_url" : "https://api.github.com/users/mamcmanus/orgs",
         "received_events_url" : "https://api.github.com/users/mamcmanus/received_events",
         "repos_url" : "https://api.github.com/users/mamcmanus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mamcmanus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mamcmanus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mamcmanus"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "A few weeks ago, I was also having this same problem while attempting to export the block data. This problem was also discussed a few years ago in #5028. I worked on a slightly more elegant solution to search for the next position of the valid magic bytes rather than failing in #16802. I have ran the script with block data from a node with the issue and another without the issue and they both yield the same data output.",
      "created_at" : "2019-09-04T07:32:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-527780475",
      "id" : 527780475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNzc4MDQ3NQ==",
      "updated_at" : "2019-09-04T07:32:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/527780475",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/41004?v=4",
         "events_url" : "https://api.github.com/users/takinbo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/takinbo/followers",
         "following_url" : "https://api.github.com/users/takinbo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/takinbo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/takinbo",
         "id" : 41004,
         "login" : "takinbo",
         "node_id" : "MDQ6VXNlcjQxMDA0",
         "organizations_url" : "https://api.github.com/users/takinbo/orgs",
         "received_events_url" : "https://api.github.com/users/takinbo/received_events",
         "repos_url" : "https://api.github.com/users/takinbo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/takinbo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/takinbo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/takinbo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Believe this was resolved by #16802.",
      "created_at" : "2020-04-29T23:07:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14986#issuecomment-621515153",
      "id" : 621515153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14986",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTUxNTE1Mw==",
      "updated_at" : "2020-04-29T23:07:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621515153",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   }
]
