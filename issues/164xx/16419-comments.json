[
   {
      "author_association" : "NONE",
      "body" : "I have gone through `bitcoin_config.h` and found a few of these.",
      "created_at" : "2019-08-04T15:19:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-518012132",
      "id" : 518012132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxODAxMjEzMg==",
      "updated_at" : "2019-08-04T15:19:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518012132",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/2822030?v=4",
         "events_url" : "https://api.github.com/users/Alko89/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Alko89/followers",
         "following_url" : "https://api.github.com/users/Alko89/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Alko89/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Alko89",
         "id" : 2822030,
         "login" : "Alko89",
         "node_id" : "MDQ6VXNlcjI4MjIwMzA=",
         "organizations_url" : "https://api.github.com/users/Alko89/orgs",
         "received_events_url" : "https://api.github.com/users/Alko89/received_events",
         "repos_url" : "https://api.github.com/users/Alko89/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Alko89/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Alko89/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Alko89"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like https://github.com/bitcoin/bitcoin/pull/16547#issuecomment-522735491 is up for grabs?",
      "created_at" : "2020-05-31T13:44:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-636473430",
      "id" : 636473430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjQ3MzQzMA==",
      "updated_at" : "2020-05-31T13:44:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636473430",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm going to revive #16547 and look at turning on `-Wundef`.",
      "created_at" : "2020-08-31T04:57:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-683548757",
      "id" : 683548757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MzU0ODc1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-31T04:57:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683548757",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I looked over the uses in 8be652e43964329c1f2dadd676916b53e5c40974 and found one bug: LevelDB is using `#if defined(HAVE_O_CLOEXEC)`, which we are defining to `0` on systems without it - this leads to a build failure, and should be fixed.",
      "created_at" : "2022-06-18T17:03:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1159516105",
      "id" : 1159516105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585FHM_J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159516105/reactions"
      },
      "updated_at" : "2022-06-18T17:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159516105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I looked over the uses in [8be652e](https://github.com/bitcoin/bitcoin/commit/8be652e43964329c1f2dadd676916b53e5c40974) and found one bug: LevelDB is using `#if defined(HAVE_O_CLOEXEC)`, which we are defining to `0` on systems without it - this leads to a build failure, and should be fixed.\r\n\r\nFixed in #25739.",
      "created_at" : "2022-09-02T10:02:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1235311462",
      "id" : 1235311462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585JoVtm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235311462/reactions"
      },
      "updated_at" : "2022-09-02T10:02:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235311462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is this issue up for grab?",
      "created_at" : "2023-02-11T09:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1426679579",
      "id" : 1426679579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585VCWcb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1426679579/reactions"
      },
      "updated_at" : "2023-02-11T09:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1426679579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/72005385?v=4",
         "events_url" : "https://api.github.com/users/bipulkmr-crypto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bipulkmr-crypto/followers",
         "following_url" : "https://api.github.com/users/bipulkmr-crypto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bipulkmr-crypto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bipulkmr-crypto",
         "id" : 72005385,
         "login" : "bipulkmr-crypto",
         "node_id" : "MDQ6VXNlcjcyMDA1Mzg1",
         "organizations_url" : "https://api.github.com/users/bipulkmr-crypto/orgs",
         "received_events_url" : "https://api.github.com/users/bipulkmr-crypto/received_events",
         "repos_url" : "https://api.github.com/users/bipulkmr-crypto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bipulkmr-crypto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bipulkmr-crypto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bipulkmr-crypto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is this issue up for grab?\r\n\r\nIt is. See #16547.",
      "created_at" : "2023-02-12T10:05:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1426991462",
      "id" : 1426991462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585VDilm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1426991462/reactions"
      },
      "updated_at" : "2023-02-12T10:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1426991462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It is. See https://github.com/bitcoin/bitcoin/pull/16547.\r\n\r\nIt isn't. See #25302.",
      "created_at" : "2023-02-13T13:44:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1427966591",
      "id" : 1427966591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585VHQp_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1427966591/reactions"
      },
      "updated_at" : "2023-02-13T13:44:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1427966591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On the master branch @ 4e8a7654f623fc0dad933b3d93dc54d8206c605d plus https://github.com/bitcoin/bitcoin/pull/27696, there are only two cases in our build system of explicit unconditional usage of the `AC_DEFINE` and `AC_DEFINE_UNQUOTED` macros (except for one which define string literals like `COPYRIGHT_YEAR`):\r\n\r\n- https://github.com/bitcoin/bitcoin/blob/4e8a7654f623fc0dad933b3d93dc54d8206c605d/configure.ac#L1230\r\n- https://github.com/bitcoin/bitcoin/blob/4e8a7654f623fc0dad933b3d93dc54d8206c605d/configure.ac#L1245\r\n\r\nThat means that the `HAVE_FDATASYNC` and `HAVE_O_CLOEXEC` are always defined, and them with `#if defined(...)`  is meaningless. All our code base uses `#if ...` for them.\r\n\r\n _All_ other use cases of the `AC_DEFINE` and `AC_DEFINE_UNQUOTED` macros are _conditional_ with explicitly provided value `1`. That means either a macro is defined and expands to `1` or it is not defined. Therefore, both `#if ...`  and `#if defined(...)` behave equally. However, we mean the latter.\r\n\r\nMoreover, descriptions like \"Define to 1 to enable wallet functions\" should be replaced with \"Define this symbol to enable wallet functions\" as the actual value of the defined macro does not matter at all.\r\n\r\n---\r\n\r\nThe bottom line:\r\n> in most cases, we want `#if ...` instead of `#if defined(...)`, so let's make sure that when we say `#if defined(...)`, we actually mean it.\r\n\r\nThese cases are `HAVE_FDATASYNC` and `HAVE_O_CLOEXEC` only, which are OK now.\r\n\r\n---\r\n\r\nIt is worth mentioning that macros like `AC_CHECK_DECLS` define always define symbols implicitly.\r\n\r\n---\r\n\r\nI don't think any changes in the source files are required. However, in Developer Notes, we can recommend to use `#if defined(...)` by default except for cases when  `#if ...` is required.",
      "created_at" : "2023-05-18T10:51:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16419#issuecomment-1552877492",
      "id" : 1552877492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16419",
      "node_id" : "IC_kwDOABII585cjwe0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1552877492/reactions"
      },
      "updated_at" : "2023-05-18T10:55:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1552877492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
