[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "While this seems to currently not cause any issues, it could do so in the future.  For instance, I'm working on some patches applied on top of Bitcoin Core.  That code [previously had a bug](https://github.com/xaya/xaya/blob/fcda6ade772455494f83b0a3c5605aec97a8991a/src/zmq/zmqgames.cpp#L278) where `cs_main` was not locked even though it should have been, but `AssertLockHeld` did not catch this.  After 682a1d0f2004d808b87b3106d0dfae547005e638, a different (but also wrong) behaviour showed instead:  Now `AssertLockHeld` triggered, [even though `cs_main` was locked correctly](https://github.com/xaya/xaya/blob/b22ff337fdd336c277a7f04e845414a5c7eddc83/src/zmq/zmqgames.cpp#L282).  Both of those bugs were caused because `-DDEBUG_LOCKORDER` was applied inconsistently between the ZMQ code and other parts of the code.\r\n\r\nNote that even the unmodified ZMQ code [does lock `cs_main`](https://github.com/bitcoin/bitcoin/blob/51a6e2c4192913c9c18507d8dfb3302500b26cc3/src/zmq/zmqpublishnotifier.cpp#L187).  So presumably if `ReadBlockFromDisk` were changed to `AssertLockHeld(cs_main)`, then the same bug would actively occur in the vanilla codebase as well.",
      "created_at" : "2019-07-22T12:39:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16434#issuecomment-513773920",
      "id" : 513773920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16434",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzc3MzkyMA==",
      "updated_at" : "2019-07-22T12:39:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513773920",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 29ee4c417d97dca29c4ef53b6c1a55caa902787a",
      "created_at" : "2019-07-30T10:11:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16434#issuecomment-516356815",
      "id" : 516356815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16434",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjM1NjgxNQ==",
      "updated_at" : "2019-07-30T10:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516356815",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
