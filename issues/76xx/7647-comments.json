[
   {
      "author_association" : "MEMBER",
      "body" : "I can't reproduce...\n\nIndeed, moving the wallet file to another destination while Bitcoin Core _is running_ will cause\n\n```\n2016-03-06 15:07:22 Shutdown: In progress...\n2016-03-06 15:07:22 StopNode()\n2016-03-06 15:07:22 *** System error while flushing: CDB: Error 2, can't open database \n2016-03-06 15:07:27 CDBEnv::EnvShutdown: Error 2 shutting down database environment: No such file or directory\n2016-03-06 15:07:27 Shutdown: done\n```\n\nin the debug log on shutdown. Though, I fail to see how someone could lose the wallet file by this: The wallet file should still be at the location you moved it to. (Even though it might be slightly corrupt)\n",
      "created_at" : "2016-03-06T15:23:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192913721",
      "id" : 192913721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkxMzcyMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192913721/reactions"
      },
      "updated_at" : "2016-03-06T15:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192913721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@subSTRATA Please provide _exact_ steps to reproduce, preferably from the command line. Something like \n\n```\n>bitcoin-qt.exe -regtest -datadir=New_folder\n>move \"New_folder\\regtest\\wallet.dat\" New_folder\\regtest\\wallet.dat_bak\n        1 file(s) moved.\n```\n",
      "created_at" : "2016-03-06T15:24:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192913827",
      "id" : 192913827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkxMzgyNw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192913827/reactions"
      },
      "updated_at" : "2016-03-06T15:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192913827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Read https://bitcointalk.org/index.php?topic=1389123.msg14114474#msg14114474 very carefuly, it is not about moving wallet.dat file while Bitcoin Core is running.\n",
      "created_at" : "2016-03-06T15:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192914100",
      "id" : 192914100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkxNDEwMA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192914100/reactions"
      },
      "updated_at" : "2016-03-06T15:30:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192914100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2906757?v=4",
         "events_url" : "https://api.github.com/users/subSTRATA/events{/privacy}",
         "followers_url" : "https://api.github.com/users/subSTRATA/followers",
         "following_url" : "https://api.github.com/users/subSTRATA/following{/other_user}",
         "gists_url" : "https://api.github.com/users/subSTRATA/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/subSTRATA",
         "id" : 2906757,
         "login" : "subSTRATA",
         "node_id" : "MDQ6VXNlcjI5MDY3NTc=",
         "organizations_url" : "https://api.github.com/users/subSTRATA/orgs",
         "received_events_url" : "https://api.github.com/users/subSTRATA/received_events",
         "repos_url" : "https://api.github.com/users/subSTRATA/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/subSTRATA/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/subSTRATA/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/subSTRATA"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Issue occurs ONLY if wallet.dat file was created and renamed within the same session. If Bitcoin Core was restarted between creation of a new wallet.dat file and renaming of it then no problems occur, see step 2b. and consequently different outcome at step 5.\n\n```\n1. Shutdown Bitcoin Core then move existing wallet.dat to some other directory.\n2. Start Bitcoin Core, it will create a new wallet.dat file.\n2b. Restart Bitcoin Core.\n3. While Bitcoin Core is running, rename newly created wallet.dat to whatever else.\n4. Shutdown Bitcoin Core, it will throw an error and exit.\n5. Rename file back to wallet.dat and start Bitcoin Core again, no problems whatsoever.\n```\n",
      "created_at" : "2016-03-06T15:55:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192919715",
      "id" : 192919715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkxOTcxNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192919715/reactions"
      },
      "updated_at" : "2016-03-06T17:20:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192919715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2906757?v=4",
         "events_url" : "https://api.github.com/users/subSTRATA/events{/privacy}",
         "followers_url" : "https://api.github.com/users/subSTRATA/followers",
         "following_url" : "https://api.github.com/users/subSTRATA/following{/other_user}",
         "gists_url" : "https://api.github.com/users/subSTRATA/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/subSTRATA",
         "id" : 2906757,
         "login" : "subSTRATA",
         "node_id" : "MDQ6VXNlcjI5MDY3NTc=",
         "organizations_url" : "https://api.github.com/users/subSTRATA/orgs",
         "received_events_url" : "https://api.github.com/users/subSTRATA/received_events",
         "repos_url" : "https://api.github.com/users/subSTRATA/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/subSTRATA/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/subSTRATA/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/subSTRATA"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I see; This is not reproducible always. Pretty much you rename a corrupt `wallet.(timestamp).bak` file to `wallet.dat` until you get a `__db*` file, which will be deleted on the next start. I could reproduce once but I forgot to save the `wallet.(ts).bak` file. Would you mind uploading one? (Make sure it is for testnet/regnet or does not contain any relevant keys)\n",
      "created_at" : "2016-03-06T16:45:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192928818",
      "id" : 192928818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkyODgxOA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192928818/reactions"
      },
      "updated_at" : "2016-03-06T16:45:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192928818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I can reproduce it always, just follow procedure exactly. Just in case it realy does not work for you every time, here is .bak file which Bitcoin Core just created, mainnet private keys but no worries, wallet was created just for this test.\n\n[https://mega.nz/#!yAZzSQbZ!mZK0q43dm1BIXvIQAx2ZiuCXZRk3_o9shiv2pTcTmrk](https://mega.nz/#!yAZzSQbZ!mZK0q43dm1BIXvIQAx2ZiuCXZRk3_o9shiv2pTcTmrk)\n\n```\n```\n",
      "created_at" : "2016-03-06T16:58:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-192933057",
      "id" : 192933057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE5MjkzMzA1Nw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192933057/reactions"
      },
      "updated_at" : "2016-03-06T17:22:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192933057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2906757?v=4",
         "events_url" : "https://api.github.com/users/subSTRATA/events{/privacy}",
         "followers_url" : "https://api.github.com/users/subSTRATA/followers",
         "following_url" : "https://api.github.com/users/subSTRATA/following{/other_user}",
         "gists_url" : "https://api.github.com/users/subSTRATA/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/subSTRATA",
         "id" : 2906757,
         "login" : "subSTRATA",
         "node_id" : "MDQ6VXNlcjI5MDY3NTc=",
         "organizations_url" : "https://api.github.com/users/subSTRATA/orgs",
         "received_events_url" : "https://api.github.com/users/subSTRATA/received_events",
         "repos_url" : "https://api.github.com/users/subSTRATA/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/subSTRATA/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/subSTRATA/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/subSTRATA"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've tried to reproduce this following the steps from the bitcointalk thread on 0.16 and using the downloadable wallet above, and cannot reproduce, so this can be closed",
      "created_at" : "2018-03-06T18:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7647#issuecomment-370885014",
      "id" : 370885014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM3MDg4NTAxNA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370885014/reactions"
      },
      "updated_at" : "2018-03-06T18:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370885014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   }
]
