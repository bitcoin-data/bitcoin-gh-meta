[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523154287"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523154287"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why?",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T18:42:39Z",
      "diff_hunk" : "@@ -831,11 +832,17 @@ TxMempoolInfo CTxMemPool::info(const GenTxid& gtxid) const\n \n TxMempoolInfo CTxMemPool::info(const uint256& txid) const { return info(GenTxid{false, txid}); }\n \n-void CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n+bool CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n {\n+    if (nFeeDelta == std::numeric_limits<CAmount>::min()) {\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523154287",
      "id" : 523154287,
      "line" : 841,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE1NDI4Nw==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 841,
      "original_position" : 20,
      "original_start_line" : 837,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 530317492,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : 839,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523154287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20406 (util: Avoid invalid integer negation in FormatMoney and ValueFromAmount by practicalswift)\n* #19381 (Fix UBSan warnings triggered when loading corrupt mempool.dat files by rajarshimaitra)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-11-13T20:11:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#issuecomment-727007724",
      "id" : 727007724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20383",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNzAwNzcyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-27T23:20:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/727007724",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523248706"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523248706"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This needs to be in the parent commit",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T21:45:30Z",
      "diff_hunk" : "@@ -25,6 +25,7 @@\n #include <test/util/setup_common.h>\n #include <txmempool.h>\n #include <uint256.h>\n+#include <util/overflow.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523248706",
      "id" : 523248706,
      "line" : 29,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0ODcwNg==",
      "original_commit_id" : "6ab2080bd83479d40c55e0d872e6336d479ad80f",
      "original_line" : 29,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 4,
      "pull_request_review_id" : 530435531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523248706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250052"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250052"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe a bit more verbosity here would be good.",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T21:48:52Z",
      "diff_hunk" : "@@ -472,7 +472,9 @@ static RPCHelpMan prioritisetransaction()\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Priority is no longer supported, dummy argument to prioritisetransaction must be 0.\");\n     }\n \n-    EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount);\n+    if (!EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount)) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"PrioritiseTransaction failed.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250052",
      "id" : 523250052,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI1MDA1Mg==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 476,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/mining.cpp",
      "position" : null,
      "pull_request_review_id" : 530437253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250885"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be literally impossible to hit based on invalid data...?\r\n\r\nAFAICT, the only possibility is if the user manages to call `prioritisetransaction` RPC before it's loaded the transaction in question",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T21:50:55Z",
      "diff_hunk" : "@@ -5081,7 +5081,9 @@ bool LoadMempool(CTxMemPool& pool)\n \n             CAmount amountdelta = nFeeDelta;\n             if (amountdelta) {\n-                pool.PrioritiseTransaction(tx->GetHash(), amountdelta);\n+                if (!pool.PrioritiseTransaction(tx->GetHash(), amountdelta)) {\n+                    LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250885",
      "id" : 523250885,
      "line" : 5031,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI1MDg4NQ==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 5031,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 6,
      "pull_request_review_id" : 530438308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Otherwise the following invalid integer negation will take place:\r\n\r\n```\r\nutil/moneystr.cpp:16:34: runtime error: negation of -9223372036854775808 cannot be represented in type 'CAmount' (aka 'long'); cast to an unsigned type to negate this value to itself\r\n    #0 0x55b386a14eac in FormatMoney[abi:cxx11](long const&) src/util/moneystr.cpp:16:34\r\n    #1 0x55b3861962f3 in CTxMemPool::PrioritiseTransaction(uint256 const&, long const&) src/txmempool.cpp:861:77\r\n```\r\n\r\n`FormatMoney(CAmount n)` is not defined for `n == std::numeric_limits<CAmount>::min()`.\r\n\r\nThe negation of `std::numeric_limits<CAmount>::min()` (-9223372036854775808) cannot be represented in the type `CAmount (int64_t)`.\r\n\r\nTo reproduce:\r\n\r\n```\r\n$ git checkout master\r\n$ make -C src/ bitcoind\r\n$ xxd -p -r > mempool-invalid-negation.dat << \"EOF\"\r\n0100000000000000002e000000005d2d000d020000000000000000000000\r\n200000000000000000000080fc0000002d\r\nEOF\r\n$ cp mempool-invalid-negation.dat ~/.bitcoin/regtest/mempool.dat\r\n$ UBSAN_OPTIONS=\"print_stacktrace=1:halt_on_error=1:report_error_type=1\" src/bitcoind -regtest\r\nâ¦\r\nutil/moneystr.cpp:16:34: runtime error: negation of -9223372036854775808 cannot be represented in type 'CAmount' (aka 'long'); cast to an unsigned type to negate this value to itself\r\nâ¦\r\n```",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T21:50:56Z",
      "diff_hunk" : "@@ -831,11 +832,17 @@ TxMempoolInfo CTxMemPool::info(const GenTxid& gtxid) const\n \n TxMempoolInfo CTxMemPool::info(const uint256& txid) const { return info(GenTxid{false, txid}); }\n \n-void CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n+bool CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n {\n+    if (nFeeDelta == std::numeric_limits<CAmount>::min()) {\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523250890",
      "id" : 523250890,
      "in_reply_to_id" : 523154287,
      "line" : 841,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI1MDg5MA==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 841,
      "original_position" : 20,
      "original_start_line" : 837,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 530438319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : 839,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523250890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523260712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523260712"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It is possible, but don't take my word for it. Take my PoC for it! :)\r\n\r\nProof of concept:\r\n\r\n```\r\n$ git checkout master\r\n$ make -C src/ bitcoind\r\n$ xxd -p -r > mempool-signed-integer-overflow.dat << \"EOF\"\r\n01000000000000003f2d3f3f21f800000000000000000000000000000000\r\n6d697464657363656e64616e00000001000000ec000000003d6a6c000000\r\n000000000000ec9bf601000000000000000000ec9b0001000000000001ff\r\nfffef900000001000000ec0000000000ec9b000001000000000101000100\r\n00000001000000ec000000003d6a6a000000000000000020ec9b000000fa\r\n00\r\nEOF\r\n$ cp mempool-signed-integer-overflow.dat ~/.bitcoin/regtest/mempool.dat\r\n$ UBSAN_OPTIONS=\"print_stacktrace=1:halt_on_error=1:report_error_type=1\" src/bitcoind -regtest\r\nâ¦\r\ntxmempool.cpp:839:15: runtime error: signed integer overflow: -7211388903327006720 + -7211353718954917888 cannot be represented in type 'long'\r\n    #0 0x556807f763ec in CTxMemPool::PrioritiseTransaction(uint256 const&, long const&) src/txmempool.cpp:839:15\r\n    #1 0x556807ff3c61 in LoadMempool(CTxMemPool&) src/validation.cpp:5084:22\r\nâ¦\r\n```",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T22:12:01Z",
      "diff_hunk" : "@@ -5081,7 +5081,9 @@ bool LoadMempool(CTxMemPool& pool)\n \n             CAmount amountdelta = nFeeDelta;\n             if (amountdelta) {\n-                pool.PrioritiseTransaction(tx->GetHash(), amountdelta);\n+                if (!pool.PrioritiseTransaction(tx->GetHash(), amountdelta)) {\n+                    LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523260712",
      "id" : 523260712,
      "in_reply_to_id" : 523250885,
      "line" : 5031,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2MDcxMg==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 5031,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 6,
      "pull_request_review_id" : 530450582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523260712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523261363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523261363"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. Now fixed.",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T22:14:03Z",
      "diff_hunk" : "@@ -25,6 +25,7 @@\n #include <test/util/setup_common.h>\n #include <txmempool.h>\n #include <uint256.h>\n+#include <util/overflow.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523261363",
      "id" : 523261363,
      "in_reply_to_id" : 523248706,
      "line" : 29,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2MTM2Mw==",
      "original_commit_id" : "6ab2080bd83479d40c55e0d872e6336d479ad80f",
      "original_line" : 29,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 4,
      "pull_request_review_id" : 530451439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523261363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523264921"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523264921"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Now using a slightly more verbose error message which hints that an invalid `fee_delta` argument is the most likely cause. Let me know if you have any other suggestion on wording.",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-13T22:24:28Z",
      "diff_hunk" : "@@ -472,7 +472,9 @@ static RPCHelpMan prioritisetransaction()\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Priority is no longer supported, dummy argument to prioritisetransaction must be 0.\");\n     }\n \n-    EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount);\n+    if (!EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount)) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"PrioritiseTransaction failed.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523264921",
      "id" : 523264921,
      "in_reply_to_id" : 523250052,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2NDkyMQ==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 476,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/mining.cpp",
      "position" : null,
      "pull_request_review_id" : 530455923,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523264921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523426834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523426834"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift do you have a PoC for this one too? Just curious what the input looks like.",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-14T14:46:24Z",
      "diff_hunk" : "@@ -5112,7 +5114,9 @@ bool LoadMempool(CTxMemPool& pool)\n         file >> mapDeltas;\n \n         for (const auto& i : mapDeltas) {\n-            pool.PrioritiseTransaction(i.first, i.second);\n+            if (!pool.PrioritiseTransaction(i.first, i.second)) {\n+                LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523426834",
      "id" : 523426834,
      "line" : 5064,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQyNjgzNA==",
      "original_commit_id" : "bde46e38fd4fca9dbef4baad1500dedf387d563e",
      "original_line" : 5064,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 17,
      "pull_request_review_id" : 530582399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523426834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523747142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523747142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ Absolutely, your wish is my command: here you go! :)\r\n\r\nProof of concept:\r\n\r\n```\r\n$ git checkout master\r\n$ make -C src/ bitcoind\r\n$ xxd -p -r > mempool-poc-for-second-case-on-line-5115.dat << EOF\r\n0100000000000000010000000000000000000000000000003f0020202020\r\n202020202020202020ff20ff016e2682a8e0af181ae4ffa4ce2fc42b1e3d\r\n8ce88019b194a45cd7c476b88ef1e220202020202020802020ff2020\r\nEOF\r\n$ cp mempool-poc-for-second-case-on-line-5115.dat ~/.bitcoin/regtest/mempool.dat\r\n$ UBSAN_OPTIONS=\"print_stacktrace=1:halt_on_error=1:report_error_type=1\" src/bitcoind -regtest\r\nâ¦\r\ntxmempool.cpp:839:15: runtime error: signed integer overflow: -62769881340174304 + -9214329515250016224 cannot be represented in type 'long'\r\n    #0 0x5652ab2203ec in CTxMemPool::PrioritiseTransaction(uint256 const&, long const&) src/txmempool.cpp:839:15\r\n    #1 0x5652ab29e1ad in LoadMempool(CTxMemPool&) src/validation.cpp:5115:18\r\nâ¦\r\n```\r\n\r\n:)",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-15T11:43:20Z",
      "diff_hunk" : "@@ -5112,7 +5114,9 @@ bool LoadMempool(CTxMemPool& pool)\n         file >> mapDeltas;\n \n         for (const auto& i : mapDeltas) {\n-            pool.PrioritiseTransaction(i.first, i.second);\n+            if (!pool.PrioritiseTransaction(i.first, i.second)) {\n+                LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523747142",
      "id" : 523747142,
      "in_reply_to_id" : 523426834,
      "line" : 5064,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc0NzE0Mg==",
      "original_commit_id" : "bde46e38fd4fca9dbef4baad1500dedf387d563e",
      "original_line" : 5064,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 17,
      "pull_request_review_id" : 530790741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523747142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523828685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523828685"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Add as a test?",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-15T23:11:45Z",
      "diff_hunk" : "@@ -5112,7 +5114,9 @@ bool LoadMempool(CTxMemPool& pool)\n         file >> mapDeltas;\n \n         for (const auto& i : mapDeltas) {\n-            pool.PrioritiseTransaction(i.first, i.second);\n+            if (!pool.PrioritiseTransaction(i.first, i.second)) {\n+                LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523828685",
      "id" : 523828685,
      "in_reply_to_id" : 523426834,
      "line" : 5064,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgyODY4NQ==",
      "original_commit_id" : "bde46e38fd4fca9dbef4baad1500dedf387d563e",
      "original_line" : 5064,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 17,
      "pull_request_review_id" : 530846628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523828685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523934241"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523934241"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@promag A fuzz test is added in #19259 (\"tests: Add fuzzing harness for LoadMempool(...) and DumpMempool(...)\"). Review welcome! :)",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-16T07:12:47Z",
      "diff_hunk" : "@@ -5112,7 +5114,9 @@ bool LoadMempool(CTxMemPool& pool)\n         file >> mapDeltas;\n \n         for (const auto& i : mapDeltas) {\n-            pool.PrioritiseTransaction(i.first, i.second);\n+            if (!pool.PrioritiseTransaction(i.first, i.second)) {\n+                LogPrintf(\"PrioritiseTransaction(...) failed. Invalid fee delta?\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r523934241",
      "id" : 523934241,
      "in_reply_to_id" : 523426834,
      "line" : 5064,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzkzNDI0MQ==",
      "original_commit_id" : "bde46e38fd4fca9dbef4baad1500dedf387d563e",
      "original_line" : 5064,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 17,
      "pull_request_review_id" : 530958767,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523934241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag A fuzz test is added in #19259 (\"tests: Add fuzzing harness for LoadMempool(...) and DumpMempool(...)\"). Review welcome! :)",
      "created_at" : "2020-11-16T07:13:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#issuecomment-727784758",
      "id" : 727784758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20383",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNzc4NDc1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T07:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/727784758",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r527009032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/527009032"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If the fix to `FormayMoney` in #20406 is applied we don't have to have the restriction. I think that would be even better :)",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2020-11-19T16:09:00Z",
      "diff_hunk" : "@@ -831,11 +832,17 @@ TxMempoolInfo CTxMemPool::info(const GenTxid& gtxid) const\n \n TxMempoolInfo CTxMemPool::info(const uint256& txid) const { return info(GenTxid{false, txid}); }\n \n-void CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n+bool CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n {\n+    if (nFeeDelta == std::numeric_limits<CAmount>::min()) {\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r527009032",
      "id" : 527009032,
      "in_reply_to_id" : 523154287,
      "line" : 841,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAwOTAzMg==",
      "original_commit_id" : "38c331b124329a7fa08ac8d53adfc29a0d1d4ccf",
      "original_line" : 841,
      "original_position" : 20,
      "original_start_line" : 837,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 534606242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : 839,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/527009032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-11-30T14:50:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#issuecomment-735832174",
      "id" : 735832174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20383",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNTgzMjE3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-30T14:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/735832174",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r557250615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557250615"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This check isn't complete. You'd have to check all ancestors and descandants as well. Also, I don't understand why this can't be `FeeDeltaRange` https://github.com/bitcoin/bitcoin/pull/20089/files#r557249710",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2021-01-14T09:22:45Z",
      "diff_hunk" : "@@ -831,11 +832,17 @@ TxMempoolInfo CTxMemPool::info(const GenTxid& gtxid) const\n \n TxMempoolInfo CTxMemPool::info(const uint256& txid) const { return info(GenTxid{false, txid}); }\n \n-void CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n+bool CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n {\n+    if (nFeeDelta == std::numeric_limits<CAmount>::min()) {\n+        return false;\n+    }\n     {\n         LOCK(cs);\n         CAmount &delta = mapDeltas[hash];\n+        if (AdditionOverflow(delta, nFeeDelta)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r557250615",
      "id" : 557250615,
      "line" : 845,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzI1MDYxNQ==",
      "original_commit_id" : "1977f9d9465156483ecfcd6f5a37dc3f8d3f29cb",
      "original_line" : 845,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 21,
      "pull_request_review_id" : 568048834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557250615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r557252571"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557252571"
         }
      },
      "author_association" : "MEMBER",
      "body" : "might be good to update the docs and release notes. Something like\r\n\r\n\r\n```diff\r\ndiff --git a/src/amount.h b/src/amount.h\r\nindex 47968e80b1..9c770a8fe3 100644\r\n--- a/src/amount.h\r\n+++ b/src/amount.h\r\n@@ -24,5 +24,6 @@ static const CAmount COIN = 100000000;\r\n  * */\r\n static const CAmount MAX_MONEY = 21000000 * COIN;\r\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\r\n+inline bool FeeDeltaRange(const CAmount& fee_delta) { return -MAX_MONEY <= fee_delta && fee_delta <= MAX_MONEY; }\r\n \r\n #endif //  BITCOIN_AMOUNT_H\r\ndiff --git a/src/rpc/mining.cpp b/src/rpc/mining.cpp\r\nindex 0e96beb6db..181570807c 100644\r\n--- a/src/rpc/mining.cpp\r\n+++ b/src/rpc/mining.cpp\r\n@@ -444,14 +444,14 @@ static RPCHelpMan prioritisetransaction()\r\n                 {\r\n                     {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id.\"},\r\n                     {\"dummy\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED_NAMED_ARG, \"API-Compatibility for previous API. Must be zero or null.\\n\"\r\n-            \"                  DEPRECATED. For forward compatibility use named arguments and omit this parameter.\"},\r\n-                    {\"fee_delta\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The fee value (in satoshis) to add (or subtract, if negative).\\n\"\r\n-            \"                  Note, that this value is not a fee rate. It is a value to modify absolute fee of the TX.\\n\"\r\n-            \"                  The fee is not actually paid, only the algorithm for selecting transactions into a block\\n\"\r\n-            \"                  considers the transaction as it would have paid a higher (or lower) fee.\"},\r\n+                              \"DEPRECATED. For forward compatibility use named arguments and omit this parameter.\"},\r\n+                    {\"fee_delta\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The fee value (in satoshis) to add (or subtract, if negative). Must be in the range +-\" + ToString(MAX_MONEY) + \" sat.\\n\"\r\n+                              \"Note, that this value is not a fee rate. It is a value to modify absolute fee of the TX.\\n\"\r\n+                              \"The fee is not actually paid, only the algorithm for selecting transactions into a block\\n\"\r\n+                              \"considers the transaction as it would have paid a higher (or lower) fee.\"},\r\n                 },\r\n                 RPCResult{\r\n-                    RPCResult::Type::BOOL, \"\", \"Returns true\"},\r\n+                    RPCResult::Type::BOOL, \"\", \"Returns true or throws on error\"},\r\n                 RPCExamples{\r\n                     HelpExampleCli(\"prioritisetransaction\", \"\\\"txid\\\" 0.0 10000\")\r\n             + HelpExampleRpc(\"prioritisetransaction\", \"\\\"txid\\\", 0.0, 10000\")\r\n@@ -460,14 +460,17 @@ static RPCHelpMan prioritisetransaction()\r\n {\r\n     LOCK(cs_main);\r\n \r\n-    uint256 hash(ParseHashV(request.params[0], \"txid\"));\r\n-    CAmount nAmount = request.params[2].get_int64();\r\n+    const uint256 hash(ParseHashV(request.params[0], \"txid\"));\r\n+    const CAmount nAmount = request.params[2].get_int64();\r\n \r\n     if (!(request.params[1].isNull() || request.params[1].get_real() == 0)) {\r\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Priority is no longer supported, dummy argument to prioritisetransaction must be 0.\");\r\n     }\r\n \r\n-    EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount);\r\n+    CTxMemPool& mempool = EnsureMemPool(request.context);\r\n+    if (!mempool.PrioritiseTransaction(hash, nAmount)) {\r\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid fee_delta passed\");\r\n+    }\r\n     return true;\r\n },\r\n     };\r\n",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2021-01-14T09:25:45Z",
      "diff_hunk" : "@@ -467,7 +467,9 @@ static RPCHelpMan prioritisetransaction()\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Priority is no longer supported, dummy argument to prioritisetransaction must be 0.\");\n     }\n \n-    EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount);\n+    if (!EnsureMemPool(request.context).PrioritiseTransaction(hash, nAmount)) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"PrioritiseTransaction(...) failed. Invalid fee_delta argument?\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r557252571",
      "id" : 557252571,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzI1MjU3MQ==",
      "original_commit_id" : "1977f9d9465156483ecfcd6f5a37dc3f8d3f29cb",
      "original_line" : 471,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/mining.cpp",
      "position" : null,
      "pull_request_review_id" : 568048834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-11T08:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557252571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Maybe a note \"pls don't fuzz your rpc interface in production\" is good enough?\r\n\r\nI think we should try to make all our interfaces robust against crazy inputs. That includes our RPC interface :)\r\n\r\nWhere \"robustness\" includes being able to handle crazy inputs without triggering ASAN, MSAN, TSAN or UBSAN warnings.\r\n\r\nIn other words I think we should strive for handling crazy user input (UI robustness), crazy programmatic input (RPC robustness) and crazy network input (P2P robustness) without triggering sanitizer warnings.\r\n\r\nNote that even if we didn't care _at all_ about robustness against crazy inputs in our RPC interface it is still makes perfect sense to fuzz the RPC interface since it is the broadest possible general \"entry point\" in to our application. By fuzzing the RPC interface we can reach large parts of our code base and uncover also non-RPC specific bugs.",
      "created_at" : "2021-01-15T14:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#issuecomment-760961178",
      "id" : 760961178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20383",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDk2MTE3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-15T14:09:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760961178",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sure, when it is possible to add a simple check if the input is invalid, but here it requires changing the whole mempool package tracking code",
      "created_at" : "2021-01-15T14:16:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#issuecomment-760966729",
      "id" : 760966729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20383",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDk2NjcyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-15T14:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760966729",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r584325323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584325323"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fee deltas have no such range limit.",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2021-02-28T16:56:26Z",
      "diff_hunk" : "@@ -24,5 +24,6 @@ static const CAmount COIN = 100000000;\n  * */\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n+inline bool FeeDeltaRange(const CAmount& fee_delta) { return -MAX_MONEY <= fee_delta && fee_delta <= MAX_MONEY; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r584325323",
      "id" : 584325323,
      "line" : 27,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDMyNTMyMw==",
      "original_commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "original_line" : 27,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 4,
      "pull_request_review_id" : 600279144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-28T16:56:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584325323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r584335817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584335817"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Context: https://github.com/bitcoin/bitcoin/pull/20089#discussion_r557249710 + https://github.com/bitcoin/bitcoin/pull/20383#discussion_r557252571",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2021-02-28T18:15:30Z",
      "diff_hunk" : "@@ -24,5 +24,6 @@ static const CAmount COIN = 100000000;\n  * */\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n+inline bool FeeDeltaRange(const CAmount& fee_delta) { return -MAX_MONEY <= fee_delta && fee_delta <= MAX_MONEY; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r584335817",
      "id" : 584335817,
      "in_reply_to_id" : 584325323,
      "line" : 27,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDMzNTgxNw==",
      "original_commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "original_line" : 27,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 4,
      "pull_request_review_id" : 600287214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-28T18:15:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584335817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r741416636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741416636"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Implemented an alternative that also checks all ancestors and descendants here: #23418 ",
      "commit_id" : "7244d852d21d4aab149ec68165007836ccf298c7",
      "created_at" : "2021-11-02T19:52:19Z",
      "diff_hunk" : "@@ -831,11 +832,17 @@ TxMempoolInfo CTxMemPool::info(const GenTxid& gtxid) const\n \n TxMempoolInfo CTxMemPool::info(const uint256& txid) const { return info(GenTxid{false, txid}); }\n \n-void CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n+bool CTxMemPool::PrioritiseTransaction(const uint256& hash, const CAmount& nFeeDelta)\n {\n+    if (nFeeDelta == std::numeric_limits<CAmount>::min()) {\n+        return false;\n+    }\n     {\n         LOCK(cs);\n         CAmount &delta = mapDeltas[hash];\n+        if (AdditionOverflow(delta, nFeeDelta)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20383#discussion_r741416636",
      "id" : 741416636,
      "in_reply_to_id" : 557250615,
      "line" : 845,
      "node_id" : "PRRC_kwDOABII584sMR68",
      "original_commit_id" : "1977f9d9465156483ecfcd6f5a37dc3f8d3f29cb",
      "original_line" : 845,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 21,
      "pull_request_review_id" : 795854940,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20383",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741416636/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T19:52:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741416636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
