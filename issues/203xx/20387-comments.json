[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems like a good thing to support, but maybe it would be cleaner to use password authentication instead of cookie authentication here. Cookies being secrets chosen by the server, and passwords being secrets chosen externally. But if not getting caught up in cookie/password semantics, we could add a `-rpccookiegenerate`/`-norpccookiegenerate` boolean option defaulting to true, to toggle between either generating the cookie internally or allowing a cookie value to be specified externally. I think adding an option to use external cookies would be better than automatically trusting read-only cookie files, which might be created unintentionally or maliciously.\r\n\r\nAnother suggestion to solve the immediate problem of using bitcoin and electrs with docker secrets: maybe you could have docker generate `/run/secrets/bitcoin_password` and have a startup script include it in electrs and bitcoind configurations (bitcoin `-includeconf` option might be useful here).\r\n",
      "created_at" : "2020-11-16T11:04:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-727908155",
      "id" : 727908155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNzkwODE1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T11:04:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/727908155",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```\r\n  -conf=<file>\r\n       Specify path to read-only configuration file. Relative paths will be\r\n       prefixed by datadir location. (default: bitcoin.conf)\r\n```\r\nMake the whole conf file a secret with desired `rpcauth=...` credentials. Same for electrs.",
      "created_at" : "2020-11-16T11:38:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-727925117",
      "id" : 727925117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNzkyNTExNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T11:38:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/727925117",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky I thought rpc passwords are going to go away? They're already deprecated in current bitcoind. I agree with your concern about the implicit toggle.\r\n\r\n@promag I thought of that too, but putting the entire configuration into a secret seems like an abuse of the secrets mechanism. For example, conf files do not support Docker compose variable substitution, as opposed to config via arguments or environment variables.\r\n",
      "created_at" : "2020-11-16T22:05:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728356703",
      "id" : 728356703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM1NjcwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T22:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728356703",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@schildbach `-rpcpassword`/`-rpcuser` is deprecated. The new mechanism is `-rpcauth`, which uses the same internal mechanism as the cookie logic (but supports configuring using externally generated passwords).",
      "created_at" : "2020-11-16T22:07:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728357872",
      "id" : 728357872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM1Nzg3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T22:07:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728357872",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> conf files do not support Docker compose variable substitution, as opposed to config via arguments or environment variables.\r\n\r\n@schildbach those can be set as the command (beside `-conf`) right?",
      "created_at" : "2020-11-16T22:13:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728361724",
      "id" : 728361724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM2MTcyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T22:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728361724",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @schildbach `-rpcpassword`/`-rpcuser` is deprecated. The new mechanism is `-rpcauth`, which uses the same internal mechanism as the cookie logic (but supports configuring using externally generated passwords).\r\n\r\nExactly, and this feature request is about reading the new RPC auth cookie from a file.",
      "created_at" : "2020-11-16T22:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728364210",
      "id" : 728364210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM2NDIxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T22:20:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728364210",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@schildbach hare you tried to use docker compose `volumes_from`?",
      "created_at" : "2020-11-16T22:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728368380",
      "id" : 728368380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM2ODM4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T22:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728368380",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Anyway, I'm concept NACK on this. I think we could support `-rpcauth=path` instead.\r\n\r\nEdit: since `-rpcauth` is considered sensitive then I'd suggest `-rpcauthfile=path`.",
      "created_at" : "2020-11-16T22:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728370537",
      "id" : 728370537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODM3MDUzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-16T23:14:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728370537",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> but putting the entire configuration into a secret seems like an abuse of the secrets mechanism\r\n\r\nIt doesn't have to be the whole config. It can be just an `-includeconf` which contains just one line with the rpcauth blob",
      "created_at" : "2020-11-17T07:32:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-728743403",
      "id" : 728743403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyODc0MzQwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-17T07:32:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/728743403",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the hint. It still feels kludgy and unsafe though. I don't want the secret to be able to add arbitrary configuration to my bitcoind. Note that secrets are not meant to be reviewed, while configuration is like code in that it should be seen by as many eyes as possible.",
      "created_at" : "2020-11-17T16:44:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-729053628",
      "id" : 729053628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyOTA1MzYyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-17T16:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/729053628",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@schildbach feel free to test #20407.",
      "created_at" : "2020-11-17T16:45:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-729054294",
      "id" : 729054294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyOTA1NDI5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-17T16:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/729054294",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This seems to go against the [purpose of the cookie file](https://github.com/Kixunil/security_writings/blob/master/cookie_files.md#the-problem-with-passwords). To avoid another account capturing the password, the cookie file needs to be regenerated every time bitcoind restarts. Also, it needs to be generated after `bitcoind` binds to the RPC port, so the best place to do generation is inside `bitcoind`",
      "created_at" : "2022-06-02T16:27:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20387#issuecomment-1145065387",
      "id" : 1145065387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20387",
      "node_id" : "IC_kwDOABII585EQE-r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145065387/reactions"
      },
      "updated_at" : "2022-06-02T16:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145065387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/64738?v=4",
         "events_url" : "https://api.github.com/users/alevchuk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/alevchuk/followers",
         "following_url" : "https://api.github.com/users/alevchuk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/alevchuk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/alevchuk",
         "id" : 64738,
         "login" : "alevchuk",
         "node_id" : "MDQ6VXNlcjY0NzM4",
         "organizations_url" : "https://api.github.com/users/alevchuk/orgs",
         "received_events_url" : "https://api.github.com/users/alevchuk/received_events",
         "repos_url" : "https://api.github.com/users/alevchuk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/alevchuk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/alevchuk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/alevchuk"
      }
   }
]
