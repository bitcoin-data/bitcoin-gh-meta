{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Hi,\r\n\r\nIf a user uses the --reindex command to download the block chain this works fine.\r\nHowever if you stop it midway for what ever reason for example:\r\n\r\n- Computer Crash\r\n- Not leaving computer on for days\r\n- Running out of disk space\r\n\r\nThen in this case you need to use the ```--reindex``` command again.\r\nHowever it takes forever to recheck each already downloaded ```blk000*.dat``` file before continuing to reindex.\r\n\r\nCurrently on my machine my blocks are reindexing between 5-26 seconds per block. \r\n(My Machine: Mac Mini with External HDD)\r\n\r\nDo you think it would be a good idea to use file hashing checks to speed up this process for example on ubuntu you can run this command:\r\n\r\n```sha256sum blk00000.dat```\r\n\r\nwhich returns this hash\r\n\r\n```be88bbfc0c09b3527e71f38fe14ba8693d35271d15bfdca57567429e06671003```\r\n\r\nWould it be possible to create another .dat file containing all blk file hashes.\r\nThen this file can be cross referenced against your file system to ensure it matches.\r\nAs long as each node contains a copy of the same file, then this ```block-hashes.dat``` type file \r\ncan be redownloaded from a peer or a hash check to compare it with your current ```block-hashes.dat``` file.\r\n\r\nThen your computer can cross reference each file sha256sum with the ```block-hashes.dat``` file to speed up the process.\r\n\r\nThen i think this would speed up the duplicate --reindex by up to 8-10x faster depending on your machine\r\n\r\nCurrently my blocks are reindexing between 5-26 seconds per block.\r\nIf this was using the ```sha256sum``` it would take about 3 seconds per block on a standard HDD\r\nIm am sure SSD would probably be even faster.\r\n\r\nI believe the change would need to be made in this file\r\nhttps://github.com/bitcoin/bitcoin/blob/f1239b70d116ea28b65e60993a6e4ac82cc6c2b1/src/validation.cpp\r\n\r\nnear line 4611\r\n\r\nI would do this myself yet i am not a C programmer.\r\n\r\n- Does anybody think this would be an improvement.\r\n- would anybody like to implement this update?\r\n- I think this would take about 15 minutes to add this feature for a fluent c programmer.\r\n\r\n\r\n",
   "closed_at" : "2021-02-08T11:12:48Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 8,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21113/comments",
   "created_at" : "2021-02-08T10:49:31Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21113/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/21113",
   "id" : 803439775,
   "labels" : [
      {
         "color" : "7cf575",
         "default" : false,
         "description" : null,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21113/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU4MDM0Mzk3NzU=",
   "number" : 21113,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "New Feature: Faster --reindex speed optimisation",
   "updated_at" : "2021-02-08T12:11:26Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21113",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/910208?v=4",
      "events_url" : "https://api.github.com/users/space-mvc/events{/privacy}",
      "followers_url" : "https://api.github.com/users/space-mvc/followers",
      "following_url" : "https://api.github.com/users/space-mvc/following{/other_user}",
      "gists_url" : "https://api.github.com/users/space-mvc/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/space-mvc",
      "id" : 910208,
      "login" : "space-mvc",
      "node_id" : "MDQ6VXNlcjkxMDIwOA==",
      "organizations_url" : "https://api.github.com/users/space-mvc/orgs",
      "received_events_url" : "https://api.github.com/users/space-mvc/received_events",
      "repos_url" : "https://api.github.com/users/space-mvc/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/space-mvc/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/space-mvc/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/space-mvc"
   }
}
