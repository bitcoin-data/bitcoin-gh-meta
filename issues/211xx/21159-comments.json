[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21159#discussion_r575054942"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575054942"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is used also as 3rd argument to `strncmp()` which is of type `size_t`. I hope this change will not produce a warning for that. If it does, then a typecast would be necessary.",
      "commit_id" : "9cc8e30125df14fe47e21e55ab3bf26f4d416565",
      "created_at" : "2021-02-12T08:25:25Z",
      "diff_hunk" : "@@ -95,7 +95,7 @@ static void CreateSocketPair(int s[2])\n static void SendAndRecvMessage(const Sock& sender, const Sock& receiver)\n {\n     const char* msg = \"abcd\";\n-    constexpr size_t msg_len = 4;\n+    constexpr ssize_t msg_len = 4;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#discussion_r575054942",
      "id" : 575054942,
      "line" : 98,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTA1NDk0Mg==",
      "original_commit_id" : "9cc8e30125df14fe47e21e55ab3bf26f4d416565",
      "original_line" : 98,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/sock_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 589249406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21159",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T08:33:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575054942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cr ACK 9cc8e30125df14fe47e21e55ab3bf26f4d416565\r\n\r\nAgree with @vasild regarding adding `-Werror` for this diagnostic if possible :)",
      "created_at" : "2021-02-12T09:49:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-778092180",
      "id" : 778092180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODA5MjE4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T09:49:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778092180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Odd, I'm pretty we did have a `-Werror` check on Travis, back in the day...\r\n\r\nAnyway, it fixes the error for me on macOS 11.2 with Boost 1.75",
      "created_at" : "2021-02-12T15:19:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-778257199",
      "id" : 778257199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODI1NzE5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T15:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778257199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors, (without looking) I am sure there are some `-Werror` runs on CI, but probably not with the compiler that gets upset by this code.\r\n\r\nIf you observe the warning, which compiler is that?\r\n\r\nNo warning for me with Clang 12.0.0 and Boost 1.72.",
      "created_at" : "2021-02-12T15:35:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-778266258",
      "id" : 778266258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODI2NjI1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T15:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778266258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Apple clang version 12.0.0 (clang-1200.0.32.29)\r\nTarget: x86_64-apple-darwin20.3.0\r\n\r\nSo perhaps the difference is in the boost version?",
      "created_at" : "2021-02-12T16:08:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-778285913",
      "id" : 778285913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODI4NTkxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T16:08:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778285913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I didn't see any warnings with Clang 9.0.1-16 and Boost 1.74.0.3 on Debian.",
      "created_at" : "2021-02-12T16:29:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-778297651",
      "id" : 778297651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODI5NzY1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T16:29:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778297651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's unclear to me why the [macOS 10.15 native](https://cirrus-ci.com/task/5234738890801152) CI run from #20788 didn't fail, as that should be the same setup of `Apple Clang` && [`boost-1.75.0_1`](https://cirrus-ci.com/task/5234738890801152?command=macos_brew_addon#L280) as where I'm seeing the warning. It was also being compiled with [`-Werror=sign-compare`](https://cirrus-ci.com/task/5234738890801152?command=ci#L929).\r\n\r\nI don't think this is a Boost version difference, as I see the same warning whether I compile with Boost 1.71.0 out of depends:\r\n```bash\r\nIn file included from test/sock_tests.cpp:10:\r\nIn file included from /Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/unit_test.hpp:18:\r\nIn file included from /Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/test_tools.hpp:46:\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/impl.hpp:107:17: warning: comparison of integers of different signs: 'const long' and 'const unsigned long' [-Wsign-compare]\r\n    return left == right;\r\n           ~~~~ ^  ~~~~~\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/impl.hpp:130:16: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl<long, unsigned long>' requested here\r\n        return equal_impl( left, right );\r\n               ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/impl.hpp:145:16: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl_frwd::call_impl<long, unsigned long>' requested here\r\n        return call_impl( left, right, left_is_array() );\r\n               ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/impl.hpp:92:50: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl_frwd::operator()<long, unsigned long>' requested here\r\nBOOST_PP_REPEAT( BOOST_TEST_MAX_PREDICATE_ARITY, IMPL_FRWD, _ )\r\n                                                 ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/preprocessor/repetition/repeat.hpp:29:26: note: expanded from macro 'BOOST_PP_REPEAT'\r\n# define BOOST_PP_REPEAT BOOST_PP_CAT(BOOST_PP_REPEAT_, BOOST_PP_AUTO_REC(BOOST_PP_REPEAT_P, 4))\r\n                         ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/preprocessor/cat.hpp:22:32: note: expanded from macro 'BOOST_PP_CAT'\r\n#    define BOOST_PP_CAT(a, b) BOOST_PP_CAT_I(a, b)\r\n                               ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/preprocessor/cat.hpp:29:34: note: expanded from macro 'BOOST_PP_CAT_I'\r\n#    define BOOST_PP_CAT_I(a, b) a ## b\r\n                                 ^\r\n<scratch space>:22:1: note: expanded from here\r\nBOOST_PP_REPEAT_1\r\n^\r\ntest/sock_tests.cpp:101:5: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::check_frwd<boost::test_tools::tt_detail::equal_impl_frwd, long, unsigned long>' requested here\r\n    BOOST_CHECK_EQUAL(sender.Send(msg, msg_len, 0), msg_len);\r\n    ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/interface.hpp:154:45: note: expanded from macro 'BOOST_CHECK_EQUAL'\r\n#define BOOST_CHECK_EQUAL( L, R )           BOOST_TEST_TOOL_IMPL( 0, \\\r\n                                            ^\r\n/Users/michael/github/fanquake-bitcoin/depends/x86_64-apple-darwin19.6.0/include/boost/test/tools/old/interface.hpp:67:47: note: expanded from macro 'BOOST_TEST_TOOL_IMPL'\r\n    BOOST_PP_IF( frwd_type, report_assertion, check_frwd ) (                    \\\r\n                                              ^\r\n1 warning generated.\r\n```\r\n or 1.75.0 from brew:\r\n```bash\r\nIn file included from test/sock_tests.cpp:10:\r\nIn file included from /usr/local/include/boost/test/unit_test.hpp:18:\r\nIn file included from /usr/local/include/boost/test/test_tools.hpp:46:\r\n/usr/local/include/boost/test/tools/old/impl.hpp:107:17: warning: comparison of integers of different signs: 'const long' and 'const unsigned long' [-Wsign-compare]\r\n    return left == right;\r\n           ~~~~ ^  ~~~~~\r\n/usr/local/include/boost/test/tools/old/impl.hpp:130:16: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl<long, unsigned long>' requested here\r\n        return equal_impl( left, right );\r\n               ^\r\n/usr/local/include/boost/test/tools/old/impl.hpp:145:16: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl_frwd::call_impl<long, unsigned long>' requested here\r\n        return call_impl( left, right, left_is_array() );\r\n               ^\r\n/usr/local/include/boost/test/tools/old/impl.hpp:92:50: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::equal_impl_frwd::operator()<long, unsigned long>' requested here\r\nBOOST_PP_REPEAT( BOOST_TEST_MAX_PREDICATE_ARITY, IMPL_FRWD, _ )\r\n                                                 ^\r\n/usr/local/include/boost/preprocessor/repetition/repeat.hpp:30:26: note: expanded from macro 'BOOST_PP_REPEAT'\r\n# define BOOST_PP_REPEAT BOOST_PP_CAT(BOOST_PP_REPEAT_, BOOST_PP_AUTO_REC(BOOST_PP_REPEAT_P, 4))\r\n                         ^\r\n/usr/local/include/boost/preprocessor/cat.hpp:22:32: note: expanded from macro 'BOOST_PP_CAT'\r\n#    define BOOST_PP_CAT(a, b) BOOST_PP_CAT_I(a, b)\r\n                               ^\r\n/usr/local/include/boost/preprocessor/cat.hpp:29:34: note: expanded from macro 'BOOST_PP_CA  CXX      test/test_bitcoin-util_threadnames_tests.o\r\nT_I'\r\n#    define BOOST_PP_CAT_I(a, b) a ## b\r\n                                 ^\r\n<scratch space>:154:1: note: expanded from here\r\nBOOST_PP_REPEAT_1\r\n^\r\ntest/sock_tests.cpp:101:5: note: in instantiation of function template specialization 'boost::test_tools::tt_detail::check_frwd<boost::test_tools::tt_detail::equal_impl_frwd, long, unsigned long>' requested here\r\n    BOOST_CHECK_EQUAL(sender.Send(msg, msg_len, 0), msg_len);\r\n    ^\r\n/usr/local/include/boost/test/tools/old/interface.hpp:154:45: note: expanded from macro 'BOOST_CHECK_EQUAL'\r\n#define BOOST_CHECK_EQUAL( L, R )           BOOST_TEST_TOOL_IMPL( 0, \\\r\n                                            ^\r\n/usr/local/include/boost/test/tools/old/interface.hpp:67:47: note: expanded from macro 'BOOST_TEST_TOOL_IMPL'\r\n    BOOST_PP_IF( frwd_type, report_assertion, check_frwd ) (                    \\\r\n                                              ^\r\n1 warning generated.\r\n```",
      "created_at" : "2021-02-17T00:25:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-780205635",
      "id" : 780205635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MDIwNTYzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-17T00:25:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/780205635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See #19123 ",
      "created_at" : "2021-02-17T09:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21159#issuecomment-780422684",
      "id" : 780422684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21159",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MDQyMjY4NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-17T09:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/780422684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
