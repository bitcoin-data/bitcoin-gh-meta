[
   {
      "author_association" : "MEMBER",
      "body" : "> and there is no drawback.\r\n\r\nThings to consider:\r\n\r\nIf on by default this will likely break some existing log parsing tools.\r\n\r\nOur wallet logs it's name using `[]`, which means we can already have log output like the following:\r\n```bash\r\n2021-02-08T02:55:14Z [test] Wallet File Version = 169900\r\n2021-02-08T02:55:14Z [test] Keys: 2018 plaintext, 0 encrypted, 2018 w/ metadata, 2018 total. Unknown wallet records: 0\r\n```\r\nWith this change, wallet names can be misinterpreted as a logging category.\r\n\r\n> and I would be willing to create a follow-up PR to cleanup that redundancy.\r\n\r\nI think those changes should just be part of this PR. For anyone running with `logthreadnames` this change is going to result in output like the following:\r\n```bash\r\n2021-02-08T02:34:43Z [init] [http] Starting HTTP server\r\n2021-02-08T02:34:43Z [init] HTTP: starting 4 worker threads\r\n2021-02-08T02:34:43Z [http] [http] Entering http event loop\r\n...\r\n2021-02-08T02:34:54Z [torcontrol] [tor] tor: Error connecting to Tor control socket\r\n2021-02-08T02:34:54Z [torcontrol] [tor] tor: Not connected to Tor control port 127.0.0.1:9051, trying to reconnect\r\n```",
      "created_at" : "2021-02-08T03:30:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-774841319",
      "id" : 774841319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NDg0MTMxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-08T03:30:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774841319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19809 (log: Prefix log messages with function name and source code location if -logsourcelocations is set by practicalswift)\n* #19358 (torcontrol : avoid to set wrong outbound proxy and network settings when creating an inbound onion service. by Saibato)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-02-08T05:59:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-774891393",
      "id" : 774891393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NDg5MTM5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-15T20:04:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774891393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > and I would be willing to create a follow-up PR to cleanup that redundancy.\r\n> \r\n> I think those changes should just be part of this PR.\r\n\r\nDone, added a scripted-diff commit.",
      "created_at" : "2021-02-08T08:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-774962267",
      "id" : 774962267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NDk2MjI2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-08T08:20:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774962267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=4",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "node_id" : "MDQ6VXNlcjg0NDc4NzM=",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I was not aware of `logthreadnames` and that after the log category prefix there can be inserted another prefix afterwards at the beginning. When #19809 would be merged, there could be a third prefix as I understand, and the position of a \"prefix\" would not be predictable.\r\nI wonder if \"prefix\" would then be the right word anymore. Maybe this could be seen more like a \"log tag\" then?\r\nThen the log tag which this PR is about could be `[lc:<log category>]` (lc as abbreviation for log category), e.g.\r\n\r\n`2021-02-07T15:45:55Z [lc:coindb] Writing final batch of 0.00 MiB`\r\n\r\nand with `logthreadnames=1` e.g.\r\n\r\n`2021-02-08T02:34:54Z [torcontrol] [lc:tor] Error connecting to Tor control socket`\r\n\r\nI would be fine with that.\r\n\r\nOfftopic of this PR, just an idea:\r\nLearning that there are more tags, I came to the idea if maybe the logged thread name and function name(as of #19809) could have also a log tag prefix, e.g. `[tn:<thread name>]` and `[fn:<function name>]`, `[fl:<file name+line>]`.",
      "created_at" : "2021-02-08T10:14:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-775032817",
      "id" : 775032817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTAzMjgxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-08T10:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775032817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=4",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "node_id" : "MDQ6VXNlcjg0NDc4NzM=",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Log looks now like this with logthreadnames=1:\r\n```\r\n2021-02-08T22:22:30Z [torcontrol] [lc:tor] Error connecting to Tor control socket\r\n2021-02-08T22:22:30Z [torcontrol] [lc:tor] Not connected to Tor control port 127.0.0.1:9051, trying to reconnect\r\n2021-02-08T22:22:31Z [msghand] [lc:addrman] Added 58 addresses from 209.166.10.82: 88 tried, 31277 new\r\n```",
      "created_at" : "2021-02-08T22:25:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-775504482",
      "id" : 775504482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTUwNDQ4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-08T22:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775504482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=4",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "node_id" : "MDQ6VXNlcjg0NDc4NzM=",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-02-18T14:15:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-781372971",
      "id" : 781372971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MTM3Mjk3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-18T14:15:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/781372971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing due to need for rebase and no further feedback.",
      "created_at" : "2021-02-18T18:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21102#issuecomment-781545439",
      "id" : 781545439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21102",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MTU0NTQzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-18T18:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/781545439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8447873?v=4",
         "events_url" : "https://api.github.com/users/wodry/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wodry/followers",
         "following_url" : "https://api.github.com/users/wodry/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wodry/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wodry",
         "id" : 8447873,
         "login" : "wodry",
         "node_id" : "MDQ6VXNlcjg0NDc4NzM=",
         "organizations_url" : "https://api.github.com/users/wodry/orgs",
         "received_events_url" : "https://api.github.com/users/wodry/received_events",
         "repos_url" : "https://api.github.com/users/wodry/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wodry/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wodry/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wodry"
      }
   }
]
