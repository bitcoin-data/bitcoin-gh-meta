[
   {
      "author_association" : "MEMBER",
      "body" : "I've added a fix for the \"wine: fixed a temporary directory error, please try running the same command again\" issue. It seems that just invoking wine once before wrapping is enough to solve it. This fixes the issue, at least for me locally, when running the Windows CI using `DANGER_RUN_CI_ON_HOST` in a Ubuntu Focal container.",
      "created_at" : "2021-02-09T02:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21112#issuecomment-775602612",
      "id" : 775602612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21112",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTYwMjYxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-09T02:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775602612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems that still wasn't enough to fix the wine issue here. Going to look at removing `DANGER_RUN_CI_ON_HOST` use from Cirrus.\r\n\r\n```bash\r\nmake: Leaving directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src/univalue'\r\nwine-5.0 (Ubuntu 5.0-3ubuntu1)\r\n/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/release/bitcoin-cli.exe: PE32+ executable (console) x86-64 (stripped to external PDB), for MS Windows\r\n....\r\nMaking check in src\r\nmake[1]: Entering directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src'\r\nmake[2]: Entering directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src'\r\nmake  check-TESTS check-local\r\nmake[3]: Entering directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src'\r\nRunning tests: arith_uint256_tests from test/arith_uint256_tests.cpp\r\nRunning tests: amount_tests from test/amount_tests.cpp\r\nRunning tests: addrman_tests from test/addrman_tests.cpp\r\nmake[4]: Entering directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src'\r\n============================================================================\r\nTestsuite summary for Bitcoin Core 21.99.0\r\n============================================================================\r\n# TOTAL: 0\r\n# PASS:  0\r\n# SKIP:  0\r\n# XFAIL: 0\r\n# FAIL:  0\r\n# XPASS: 0\r\n# ERROR: 0\r\n============================================================================\r\nmake[4]: Leaving directory '/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-w64-mingw32/src'\r\nRunning tests: allocator_tests from test/allocator_tests.cpp\r\nwine: created the configuration directory '/root/.wine'\r\nwine: fixed a temporary directory error, please try running the same command again\r\nwine: fixed a temporary directory error, please try running the same command again\r\nmake[3]: *** [Makefile:16876: test/allocator_tests.cpp.test] Error 1\r\nmake[3]: *** Waiting for unfinished jobs....\r\nmake[3]: *** [Makefile:16876: test/arith_uint256_tests.cpp.test] Error 1\r\nwine: chdir to /tmp/wine-T4J7Vv/server-31-2397f5 : No such file or directory\r\nwine: created the configuration directory '/root/.wine'\r\nwine: chdir to /tmp/wine-apTpaF/server-31-2397f5 : No such file or directory\r\nmake[3]: *** [Makefile:16876: test/addrman_tests.cpp.test] Error 1\r\nmake[3]: *** [Makefile:16876: test/amount_tests.cpp.test] Error 1\r\n```",
      "created_at" : "2021-02-09T03:43:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21112#issuecomment-775638717",
      "id" : 775638717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21112",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTYzODcxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-09T03:43:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775638717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cr ACK ac24af453d16afd1993fa1f292aa41ae6b16f138",
      "created_at" : "2021-02-09T06:59:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21112#issuecomment-775718639",
      "id" : 775718639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21112",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTcxODYzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-09T06:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775718639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
