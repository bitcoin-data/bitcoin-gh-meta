[
   {
      "author_association" : "MEMBER",
      "body" : "I've also tried rebuilding the base image. Interestingly this gives me a different output for both divergent platforms, but still different from the rest.\r\n\r\nIt looks like the `test_bitcoin` is the only diverging file for both platforms:\r\n```\r\nBinary files achow101/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin and laanwj/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin differ\r\nBinary files achow101/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin and laanwj/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin differ\r\n```\r\n\r\n```\r\n-rwxr-xr-x 1 user user 13791384 Mar  4 15:55 achow101/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin\r\n-rwxr-xr-x 1 user user 12640464 Mar  4 15:55 achow101/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin\r\n-rwxr-xr-x 1 user user 13791272 Mar  4 15:55 laanwj/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin\r\n-rwxr-xr-x 1 user user 12640360 Mar  4 15:55 laanwj/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin\r\n```\r\n",
      "created_at" : "2019-03-06T08:40:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470018829",
      "id" : 470018829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDAxODgyOQ==",
      "updated_at" : "2019-03-06T08:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470018829",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "With my *old* (initial) build, `bitcoin-qt` was the one that differed\r\n```\r\nBinary files achow101/aarch/bitcoin-0.18.0rc1/bin/bitcoin-qt and laanwj2/aarch/bitcoin-0.18.0rc1/bin/bitcoin-qt differ\r\nBinary files achow101/riscv/bitcoin-0.18.0rc1/bin/bitcoin-qt and laanwj2/riscv/bitcoin-0.18.0rc1/bin/bitcoin-qt differ\r\n```\r\n`test_bitcoin` curiously matches @achow101's",
      "created_at" : "2019-03-06T08:46:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470020672",
      "id" : 470020672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDAyMDY3Mg==",
      "updated_at" : "2019-03-06T08:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470020672",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "the difference seems to be minimal: presence/absence of .gnu_debuglink section\r\n```diff\r\n-achow101/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin:     file format elf64-little\r\n+laanwj/aarch/bitcoin-0.18.0rc1/bin/test_bitcoin:     file format elf64-little\r\n\r\n Contents of section .interp:\r\n  0270 2f6c6962 2f6c642d 6c696e75 782d6161  /lib/ld-linux-aa\r\n@@ -861626,6 +861626,3 @@\r\n  0000 4743433a 20285562 756e7475 20382e32  GCC: (Ubuntu 8.2\r\n  0010 2e302d31 7562756e 7475327e 31382e30  .0-1ubuntu2~18.0\r\n  0020 34292038 2e322e30 00                 4) 8.2.0.\r\n-Contents of section .gnu_debuglink:\r\n- 0000 74657374 5f626974 636f696e 2e646267  test_bitcoin.dbg\r\n- 0010 00000000 bee7a613                    ........\r\n```\r\n\r\n```diff\r\n-achow101/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin:     file format elf64-little\r\n+laanwj/riscv/bitcoin-0.18.0rc1/bin/test_bitcoin:     file format elf64-little\r\n\r\n Contents of section .interp:\r\n  0270 2f6c6962 2f6c642d 6c696e75 782d7269  /lib/ld-linux-ri\r\n@@ -789682,6 +789682,3 @@\r\n  0000 4743433a 20285562 756e7475 20382e32  GCC: (Ubuntu 8.2\r\n  0010 2e302d31 7562756e 7475327e 31382e30  .0-1ubuntu2~18.0\r\n  0020 34292038 2e322e30 00                 4) 8.2.0.\r\n-Contents of section .gnu_debuglink:\r\n- 0000 74657374 5f626974 636f696e 2e646267  test_bitcoin.dbg\r\n- 0010 00000000 5c067f87                    ....\\...\r\n```",
      "created_at" : "2019-03-06T09:29:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470034776",
      "id" : 470034776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDAzNDc3Ng==",
      "updated_at" : "2019-03-06T09:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470034776",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Same for the difference between *my own* two builds, but for `bitcoin-qt` !\r\n```diff\r\n-laanwj/aarch/bitcoin-0.18.0rc1/bin/bitcoin-qt:     file format elf64-little\r\n+laanwj2/aarch/bitcoin-0.18.0rc1/bin/bitcoin-qt:     file format elf64-little\r\n\r\n Contents of section .interp:\r\n  0270 2f6c6962 2f6c642d 6c696e75 782d6161  /lib/ld-linux-aa\r\n@@ -2158828,6 +2158828,3 @@\r\n  0000 4743433a 20285562 756e7475 20382e32  GCC: (Ubuntu 8.2\r\n  0010 2e302d31 7562756e 7475327e 31382e30  .0-1ubuntu2~18.0\r\n  0020 34292038 2e322e30 00                 4) 8.2.0.\r\n-Contents of section .gnu_debuglink:\r\n- 0000 62697463 6f696e2d 71742e64 62670000  bitcoin-qt.dbg..\r\n- 0010 9347b4af                             .G..\r\n\r\n-laanwj/riscv/bitcoin-0.18.0rc1/bin/bitcoin-qt:     file format elf64-little\r\n+laanwj2/riscv/bitcoin-0.18.0rc1/bin/bitcoin-qt:     file format elf64-little\r\n\r\n Contents of section .interp:\r\n  0270 2f6c6962 2f6c642d 6c696e75 782d7269  /lib/ld-linux-ri\r\n@@ -1846573,6 +1846573,3 @@\r\n  0000 4743433a 20285562 756e7475 20382e32  GCC: (Ubuntu 8.2\r\n  0010 2e302d31 7562756e 7475327e 31382e30  .0-1ubuntu2~18.0\r\n  0020 34292038 2e322e30 00                 4) 8.2.0.\r\n-Contents of section .gnu_debuglink:\r\n- 0000 62697463 6f696e2d 71742e64 62670000  bitcoin-qt.dbg..\r\n- 0010 ea8590d6                             ....\r\n```\r\nSo the good news is: there's no divergence in the actual code generation.\r\nIt looks like a race condition around *adding* this section? Sometimes it's added, sometimes it isn't.\r\nThis is supposed to happen in `contrib/devtools/split-debug.sh.in`:\r\n```bash\r\n@OBJCOPY@ --enable-deterministic-archives -p --add-gnu-debuglink=$3 $2\r\n```\r\n",
      "created_at" : "2019-03-06T09:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470038949",
      "id" : 470038949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDAzODk0OQ==",
      "updated_at" : "2019-03-06T10:41:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470038949",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm working on a patch so that failures in the `contrib/devtools/split-debug.sh.in` script will cause the build to fail. Currently due to `find -exec` semantics these go silently ignored (well maybe not silently, it will likely log something, but who digs into that every time).",
      "created_at" : "2019-03-06T12:19:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470086981",
      "id" : 470086981,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDA4Njk4MQ==",
      "updated_at" : "2019-03-06T12:20:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470086981",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok that worked, it turns out it was indeed a local issue (it's strange as there's 16G free on the disk, but okÃ¢ÂÂ¦ maybe some VM restriction, yes I see the default size for the LXC disk is 10240MB maybe that's no longer enough):\r\n```\r\n+ xargs -0 -n1 '-I{}' ../contrib/devtools/split-debug.sh '{}' '{}' '{}.dbg'\r\n/usr/bin/aarch64-linux-gnu-objcopy:bitcoin-0.18.0rc1/bin/test_bitcoin.dbg[.debug_info]: No space left on device\r\n/usr/bin/aarch64-linux-gnu-objcopy:bitcoin-0.18.0rc1/bin/stIxfQNI: cannot fill debug link section `bitcoin-0.18.0rc1/bin/test_bitcoin.dbg': No such file or directory\r\n```\r\nWill submit a PR that adds proper error handling, so that these kinds of issues won't be a hidden problem in the future.",
      "created_at" : "2019-03-06T15:53:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470160960",
      "id" : 470160960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDE2MDk2MA==",
      "updated_at" : "2019-03-06T16:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470160960",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, managed to reproduce the common gitian sigs now in https://github.com/bitcoin-core/gitian.sigs/commit/1b4b22304860476b7151757a25c5ae281bb7b19e\r\n\r\nSee  #15549 for changes that would make this failure more apparent.",
      "created_at" : "2019-03-06T17:54:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15541#issuecomment-470208692",
      "id" : 470208692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDIwODY5Mg==",
      "updated_at" : "2019-03-06T17:54:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470208692",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
