[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r265194424"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265194424"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe something for a separate PR, but can we just drop this write entirely? It seems redundant given the write already in WalletBatch::LoadWallet, and better not to write the same field in two different places.\r\n\r\n",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-03-13T15:42:31Z",
      "diff_hunk" : "@@ -587,7 +587,7 @@ BerkeleyBatch::BerkeleyBatch(BerkeleyDatabase& database, const char* pszMode, bo\n             if (fCreate && !Exists(std::string(\"version\"))) {\n                 bool fTmp = fReadOnly;\n                 fReadOnly = false;\n-                WriteVersion(CLIENT_VERSION);\n+                Write(std::string(\"version\"), CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r265194424",
      "id" : 265194424,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NTE5NDQyNA==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 5,
      "path" : "src/wallet/db.cpp",
      "position" : 5,
      "pull_request_review_id" : 214037948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265194424",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just to clarify, is the only user-visible change here replacing:\r\n\r\n```\r\nnFileVersion = [version number of the newest wallet software that ever opened the wallet in the past]\r\n```\r\n\r\nwith\r\n\r\n```\r\nWallet File Version = [minimum wallet software version required to open the wallet file]\r\n```\r\n\r\n?",
      "created_at" : "2019-03-13T16:21:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-472496367",
      "id" : 472496367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MjQ5NjM2Nw==",
      "updated_at" : "2019-03-13T16:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/472496367",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Just to clarify, is the only user-visible change here replacing:\r\n\r\nYes.",
      "created_at" : "2019-03-13T19:29:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-472571622",
      "id" : 472571622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MjU3MTYyMg==",
      "updated_at" : "2019-03-13T19:29:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/472571622",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r265387879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265387879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `last_client_version`?",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-03-14T01:01:47Z",
      "diff_hunk" : "@@ -512,7 +505,12 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n     if (result != DBErrors::LOAD_OK)\n         return result;\n \n-    pwallet->WalletLogPrintf(\"nFileVersion = %d\\n\", wss.nFileVersion);\n+    // Last client version to open this wallet, was previously the file version number\n+    int last_client = CLIENT_VERSION;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r265387879",
      "id" : 265387879,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NTM4Nzg3OQ==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 36,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 36,
      "pull_request_review_id" : 214280237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265387879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15709](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15709.html) (Do not add setting as unknown by Bushstar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-03-31T12:30:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-478337550",
      "id" : 478337550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3ODMzNzU1MA==",
      "updated_at" : "2019-03-31T12:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478337550",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "created_at" : "2019-04-10T11:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-481657062",
      "id" : 481657062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MTY1NzA2Mg==",
      "updated_at" : "2019-04-10T11:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/481657062",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r275892264"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/275892264"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure that this is redundant. It's making sure that the `version` field exists, whereas `WalletBatch::LoadWallet` doesn't necessarily do that.\r\n\r\nBut we can remove this in a separate PR if it is redundant.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-04-16T16:42:31Z",
      "diff_hunk" : "@@ -587,7 +587,7 @@ BerkeleyBatch::BerkeleyBatch(BerkeleyDatabase& database, const char* pszMode, bo\n             if (fCreate && !Exists(std::string(\"version\"))) {\n                 bool fTmp = fReadOnly;\n                 fReadOnly = false;\n-                WriteVersion(CLIENT_VERSION);\n+                Write(std::string(\"version\"), CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r275892264",
      "id" : 275892264,
      "in_reply_to_id" : 265194424,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NTg5MjI2NA==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 5,
      "path" : "src/wallet/db.cpp",
      "position" : 5,
      "pull_request_review_id" : 227316052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/275892264",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r298630065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298630065"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you explain why this can be removed?",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-06-28T14:56:34Z",
      "diff_hunk" : "@@ -376,12 +375,6 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n \n             pwallet->LoadKeyPool(nIndex, keypool);\n         }\n-        else if (strType == \"version\")\n-        {\n-            ssValue >> wss.nFileVersion;\n-            if (wss.nFileVersion == 10300)\n-                wss.nFileVersion = 300;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r298630065",
      "id" : 298630065,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5ODYzMDA2NQ==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 16,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 16,
      "pull_request_review_id" : 214280237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298630065",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r298782551"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298782551"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`nFileVersion` is being removed entirely, and all this `version` record did was fill it. At no point was `nFileVersion` being checked for anything less than 40000 so this if block is meaningless.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-06-29T01:18:45Z",
      "diff_hunk" : "@@ -376,12 +375,6 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n \n             pwallet->LoadKeyPool(nIndex, keypool);\n         }\n-        else if (strType == \"version\")\n-        {\n-            ssValue >> wss.nFileVersion;\n-            if (wss.nFileVersion == 10300)\n-                wss.nFileVersion = 300;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r298782551",
      "id" : 298782551,
      "in_reply_to_id" : 298630065,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5ODc4MjU1MQ==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 16,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 16,
      "pull_request_review_id" : 256017634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298782551",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r301719647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/301719647"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think I'll leave it as is.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-09T18:00:03Z",
      "diff_hunk" : "@@ -512,7 +505,12 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n     if (result != DBErrors::LOAD_OK)\n         return result;\n \n-    pwallet->WalletLogPrintf(\"nFileVersion = %d\\n\", wss.nFileVersion);\n+    // Last client version to open this wallet, was previously the file version number\n+    int last_client = CLIENT_VERSION;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r301719647",
      "id" : 301719647,
      "in_reply_to_id" : 265387879,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMTcxOTY0Nw==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 36,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 36,
      "pull_request_review_id" : 259668152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/301719647",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@meshcollider can you please take a look here",
      "created_at" : "2019-07-11T18:57:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-510611835",
      "id" : 510611835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMDYxMTgzNQ==",
      "updated_at" : "2019-07-11T18:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510611835",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305901025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305901025"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm ok with open-coding this here since there is only one use of it, but for semantic clarity nit we could have just moved it into a static method named `{Read,Write}LatestClientVersion` or something.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T15:17:01Z",
      "diff_hunk" : "@@ -527,7 +527,7 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n         return DBErrors::NEED_REWRITE;\n \n     if (last_client < CLIENT_VERSION) // Update\n-        WriteVersion(CLIENT_VERSION);\n+        m_batch.Write(std::string(\"version\"), CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305901025",
      "id" : 305901025,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkwMTAyNQ==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 14,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 55,
      "pull_request_review_id" : 264887588,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305901025",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305903626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305903626"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK @achow101's comment, I believe this is correct.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T15:21:50Z",
      "diff_hunk" : "@@ -376,12 +375,6 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n \n             pwallet->LoadKeyPool(nIndex, keypool);\n         }\n-        else if (strType == \"version\")\n-        {\n-            ssValue >> wss.nFileVersion;\n-            if (wss.nFileVersion == 10300)\n-                wss.nFileVersion = 300;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305903626",
      "id" : 305903626,
      "in_reply_to_id" : 298630065,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkwMzYyNg==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 16,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 16,
      "pull_request_review_id" : 264887588,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305903626",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305908539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305908539"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Leaving this comment for other reviewers when trying to understand it. The wallet logs any unknown records, since we're not handling the version record specifically anymore (it was a no-op), we don't want to log `version` as an unknown record. It is still read-in during `LoadWallet`.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T15:30:55Z",
      "diff_hunk" : "@@ -419,7 +412,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n                 return false;\n             }\n         } else if (strType != \"bestblock\" && strType != \"bestblock_nomerkle\" &&\n-                strType != \"minversion\" && strType != \"acentry\") {\n+                strType != \"minversion\" && strType != \"acentry\" && strType != \"version\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305908539",
      "id" : 305908539,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkwODUzOQ==",
      "original_commit_id" : "521dd5d34ddeea05f9c28afd54dab34c652e3401",
      "original_position" : 26,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 26,
      "pull_request_review_id" : 264887588,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305908539",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305910789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305910789"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In the subsequent commits, `nFileVersion` is removed from `CWalletScanState`, so reviewing this commit was confusing. perhaps this commit should come after the commit that removes nFileVersion from `CWalletScanState`",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T15:34:58Z",
      "diff_hunk" : "@@ -512,7 +512,8 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n     if (result != DBErrors::LOAD_OK)\n         return result;\n \n-    pwallet->WalletLogPrintf(\"nFileVersion = %d\\n\", wss.nFileVersion);\n+    int wallet_version = pwallet->GetVersion();\n+    pwallet->WalletLogPrintf(\"Wallet File Version = %d\\n\", wallet_version > 0 ? wallet_version : wss.nFileVersion);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305910789",
      "id" : 305910789,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkxMDc4OQ==",
      "original_commit_id" : "835e112b2bd9920a817728f37e4a41f0f06db99e",
      "original_position" : 6,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 264887588,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305910789",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305929674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305929674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I prefer to leave it as is since these are the only uses of it. I had originally planned on removing these reads and writes entirely, but I was not certain that doing so wouldn't break backwards compatibility so I left them in.",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T16:59:41Z",
      "diff_hunk" : "@@ -527,7 +527,7 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n         return DBErrors::NEED_REWRITE;\n \n     if (last_client < CLIENT_VERSION) // Update\n-        WriteVersion(CLIENT_VERSION);\n+        m_batch.Write(std::string(\"version\"), CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305929674",
      "id" : 305929674,
      "in_reply_to_id" : 305901025,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkyOTY3NA==",
      "original_commit_id" : "96a46f5bcd5433c3a4c5900ecc8be547e48f5f74",
      "original_position" : 14,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 55,
      "pull_request_review_id" : 264926621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305929674",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305931385"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305931385"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "35e60e790f2cd602d1bdd0be835d27f0ba37efa9",
      "created_at" : "2019-07-22T17:03:44Z",
      "diff_hunk" : "@@ -512,7 +512,8 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)\n     if (result != DBErrors::LOAD_OK)\n         return result;\n \n-    pwallet->WalletLogPrintf(\"nFileVersion = %d\\n\", wss.nFileVersion);\n+    int wallet_version = pwallet->GetVersion();\n+    pwallet->WalletLogPrintf(\"Wallet File Version = %d\\n\", wallet_version > 0 ? wallet_version : wss.nFileVersion);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#discussion_r305931385",
      "id" : 305931385,
      "in_reply_to_id" : 305910789,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTkzMTM4NQ==",
      "original_commit_id" : "835e112b2bd9920a817728f37e4a41f0f06db99e",
      "original_position" : 6,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 264928781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15588",
      "updated_at" : "2019-07-22T17:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305931385",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 35e60e7, I compiled locally as a quick sanity check.",
      "created_at" : "2019-07-23T04:54:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15588#issuecomment-514053444",
      "id" : 514053444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15588",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDA1MzQ0NA==",
      "updated_at" : "2019-07-23T04:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514053444",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   }
]
