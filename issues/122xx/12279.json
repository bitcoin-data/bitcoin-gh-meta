{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "I tried stopping a v0.15.0.1 node about a minute after starting it. I had started it with an empty .bitcoin directory, and it hadn't synced any blocks at all, so I was intended to shut it down and give it a copy of a good peers.dat file so it could find a peer to sync from - but when I asked it to stop, it didn't.\r\n\r\ngdb shows only 2 threads running:\r\n\r\n    Thread 2 (Thread 0x7f64a97fa700 (LWP 16304)):\r\n    #0  0x00007f64d414473d in connect () at ../sysdeps/unix/syscall-template.S:81\r\n    #1  0x00007f64cc10a306 in send_vc (statp=statp@entry=0x7f64a97fadb8, buf=buf@entry=0x7f64a97f7b60 \"\\367A\\001\", buflen=buflen@entry=42, buf2=buf2@entry=0x7f64a97f7b8c \"\\341+\\001\", buflen2=buflen2@entry=42, ansp=ansp@entry=0x7f64a97f79e8, anssizp=anssizp@entry=0x7f64a97f7b30, terrno=terrno@entry=0x7f64a97f79f0, ns=ns@entry=0, anscp=anscp@entry=0x7f64a97f8fe0, ansp2=ansp2@entry=0x7f64a97f8ff0, anssizp2=anssizp2@entry=0x7f64a97f8fa0, resplen2=resplen2@entry=0x7f64a97f8fb0, ansp2_malloced=ansp2_malloced@entry=0x7f64a97f8fc0) at res_send.c:793\r\n    #2  0x00007f64cc10b7a7 in __libc_res_nsend (statp=statp@entry=0x7f64a97fadb8, buf=buf@entry=0x7f64a97f7b60 \"\\367A\\001\", buflen=42, buf2=buf2@entry=0x7f64a97f7b8c \"\\341+\\001\", buflen2=buflen2@entry=42, ans=ans@entry=0x7f64a97f8770 \"\\341+\\203\\200\", anssiz=anssiz@entry=2048, ansp=ansp@entry=0x7f64a97f8fe0, ansp2=ansp2@entry=0x7f64a97f8ff0, nansp2=nansp2@entry=0x7f64a97f8fa0, resplen2=resplen2@entry=0x7f64a97f8fb0, ansp2_malloced=ansp2_malloced@entry=0x7f64a97f8fc0) at res_send.c:566\r\n    #3  0x00007f64cc108e2c in __GI___libc_res_nquery (statp=statp@entry=0x7f64a97fadb8, name=name@entry=0x7f64a97f82f0 \"x9.seed.bitcoinstats.com.\", class=class@entry=1, type=type@entry=62321, answer=answer@entry=0x7f64a97f8770 \"\\341+\\203\\200\", anslen=anslen@entry=2048, answerp=answerp@entry=0x7f64a97f8fe0, answerp2=answerp2@entry=0x7f64a97f8ff0, nanswerp2=nanswerp2@entry=0x7f64a97f8fa0, resplen2=resplen2@entry=0x7f64a97f8fb0, answerp2_malloced=answerp2_malloced@entry=0x7f64a97f8fc0) at res_query.c:227\r\n    #4  0x00007f64cc1099c5 in __libc_res_nquerydomain (answerp2_malloced=0x7f64a97f8fc0, resplen2=0x7f64a97f8fb0, nanswerp2=0x7f64a97f8fa0, answerp2=0x7f64a97f8ff0, answerp=0x7f64a97f8fe0, anslen=2048, answer=0x7f64a97f8770 \"\\341+\\203\\200\", type=62321, class=1, domain=<optimized out>, name=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", statp=0x7f64a97fadb8) at res_query.c:591\r\n    #5  __GI___libc_res_nsearch (statp=0x7f64a97fadb8, name=name@entry=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", class=class@entry=1, type=type@entry=62321, answer=answer@entry=0x7f64a97f8770 \"\\341+\\203\\200\", anslen=anslen@entry=2048, answerp=answerp@entry=0x7f64a97f8fe0, answerp2=answerp2@entry=0x7f64a97f8ff0, nanswerp2=nanswerp2@entry=0x7f64a97f8fa0, resplen2=resplen2@entry=0x7f64a97f8fb0, answerp2_malloced=answerp2_malloced@entry=0x7f64a97f8fc0) at res_query.c:421\r\n    #6  0x00007f64cc31dc73 in _nss_dns_gethostbyname4_r (name=name@entry=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", pat=pat@entry=0x7f64a97f9600, buffer=buffer@entry=0x7f64a97f9090 \"_\\267\\060u\", buflen=buflen@entry=1064, errnop=errnop@entry=0x7f64a97f95d0, herrnop=herrnop@entry=0x7f64a97f9630, ttlp=ttlp@entry=0x0) at nss_dns/dns-host.c:315\r\n    #7  0x00007f64d3e3d226 in gaih_inet (name=<optimized out>, name@entry=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", service=<optimized out>, req=req@entry=0x7f64a97f98b0, pai=pai@entry=0x7f64a97f9740, naddrs=naddrs@entry=0x7f64a97f9730) at ../sysdeps/posix/getaddrinfo.c:858\r\n    #8  0x00007f64d3e4052d in __GI_getaddrinfo (name=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", service=0x0, hints=0x7f64a97f98b0, pai=0x7f64a97f98a8) at ../sysdeps/posix/getaddrinfo.c:2414\r\n    #9  0x000055e5fd430206 in LookupIntern (pszName=0x7f6494007a88 \"x9.seed.bitcoinstats.com\", vIP=std::vector of length 0, capacity 0, nMaxSolutions=0, fAllowLookup=<optimized out>) at netbase.cpp:85\r\n    #10 0x000055e5fd430578 in LookupHost (pszName=<optimized out>, vIP=std::vector of length 0, capacity 0, nMaxSolutions=nMaxSolutions@entry=0, fAllowLookup=fAllowLookup@entry=true) at netbase.cpp:128\r\n    #11 0x000055e5fd26e899 in CConnman::ThreadDNSAddressSeed (this=0x55e5ffa47f70) at net.cpp:1613\r\n    #12 0x000055e5fd2537bb in operator() (this=0x7f64a97f9e70) at /usr/include/c++/4.8/functional:2471\r\n    #13 TraceThread<std::function<void ()> >(char const*, std::function<void ()>) (name=0x55e5fd582f7e \"dnsseed\", func=...) at util.h:302\r\n    #14 0x000055e5fd285c3f in _M_invoke<0ul, 1ul> (this=<optimized out>) at /usr/include/c++/4.8/functional:1732\r\n    #15 operator() (this=<optimized out>) at /usr/include/c++/4.8/functional:1720\r\n    #16 std::thread::_Impl<std::_Bind_simple<void (*(char const*, std::function<void ()>))(char const*, std::function<void ()>)> >::_M_run() (this=<optimized out>) at /usr/include/c++/4.8/thread:115\r\n    #17 0x00007f64d4920a60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n    #18 0x00007f64d413d184 in start_thread (arg=0x7f64a97fa700) at pthread_create.c:312\r\n    #19 0x00007f64d3e6abed in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\n    Thread 1 (Thread 0x7f64d640b780 (LWP 16288)):\r\n    #0  0x00007f64d413e65b in pthread_join (threadid=140070317172480, thread_return=0x0) at pthread_join.c:92\r\n    #1  0x00007f64d4920857 in std::thread::join() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n    #2  0x000055e5fd2840dd in CConnman::Stop (this=this@entry=0x55e5ffa47f70) at net.cpp:2408\r\n    #3  0x000055e5fd284428 in CConnman::~CConnman (this=0x55e5ffa47f70, __in_chrg=<optimized out>) at net.cpp:2455\r\n    #4  0x000055e5fd233731 in operator() (this=<optimized out>, __ptr=0x55e5ffa47f70) at /usr/include/c++/4.8/bits/unique_ptr.h:67\r\n    #5  reset (__p=0x55e5ffa47f70, this=0x55e5fd96d990 <g_connman>) at /usr/include/c++/4.8/bits/unique_ptr.h:262\r\n    #6  Shutdown () at init.cpp:198\r\n    #7  0x000055e5fd2269a0 in AppInit (argc=1, argv=0x7ffecae4a298) at bitcoind.cpp:183\r\n    #8  0x000055e5fd21a7ef in main (argc=1, argv=0x7ffecae4a298) at bitcoind.cpp:195\r\n",
   "closed_at" : "2018-03-06T18:06:00Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12279/comments",
   "created_at" : "2018-01-27T09:59:15Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12279/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12279",
   "id" : 292108679,
   "labels" : [
      {
         "color" : "770000",
         "default" : false,
         "id" : 234878,
         "name" : "Linux/Unix",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzg=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Linux/Unix"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12279/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyOTIxMDg2Nzk=",
   "number" : 12279,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "shutdown took 8 minutes in v0.15.0.1",
   "updated_at" : "2018-03-06T22:31:21Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12279",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/573356?v=4",
      "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dooglus/followers",
      "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dooglus",
      "id" : 573356,
      "login" : "dooglus",
      "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
      "organizations_url" : "https://api.github.com/users/dooglus/orgs",
      "received_events_url" : "https://api.github.com/users/dooglus/received_events",
      "repos_url" : "https://api.github.com/users/dooglus/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dooglus"
   }
}
