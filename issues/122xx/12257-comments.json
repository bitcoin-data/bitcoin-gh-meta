[
   {
      "author_association" : "MEMBER",
      "body" : "It doesn't avoid reuse (you still need to sign for each input), and has security issues in the event of QC (but that's already a hypothetical big issue for us anyway), but seems useful anyway.\r\n\r\nIs this affected by the current coin control grouping defect, where it includes change in the same group as unrelated outputs? That would be a serious privacy risk, I think, since it would basically tell the world which output was change.",
      "created_at" : "2018-01-24T07:52:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-360048702",
      "id" : 360048702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-24T07:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360048702",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr:\r\n> It doesn't avoid reuse (you still need to sign for each input), and has security issues in the event of QC (but that's already a hypothetical big issue for us anyway), but seems useful anyway.\r\n\r\nTogether with `-avoidreuse` in #10386 it avoids reuse, I think. Are there any cases I'm missing?\r\n\r\n> Is this affected by the current coin control grouping defect, where it includes change in the same group as unrelated outputs? That would be a serious privacy risk, I think, since it would basically tell the world which output was change.\r\n\r\nI'm not sure what this defect is. Is it described somewhere?",
      "created_at" : "2018-01-24T08:07:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-360051914",
      "id" : 360051914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-24T08:07:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360051914",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Does this also keep track of the change outputs in case more coins arrive later to `A`?\r\n\r\nImagine your example, where the coins from `A` go to `C`, with a change output to what we now call `D`.\r\n\r\nIf more coins arrive at `A` later, will they be spent together with `D`?\r\n",
      "created_at" : "2018-01-24T10:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-360092824",
      "id" : 360092824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-24T10:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360092824",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/92292?v=4",
         "events_url" : "https://api.github.com/users/ziggamon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ziggamon/followers",
         "following_url" : "https://api.github.com/users/ziggamon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ziggamon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ziggamon",
         "id" : 92292,
         "login" : "ziggamon",
         "organizations_url" : "https://api.github.com/users/ziggamon/orgs",
         "received_events_url" : "https://api.github.com/users/ziggamon/received_events",
         "repos_url" : "https://api.github.com/users/ziggamon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ziggamon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ziggamon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ziggamon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ziggamon Change outputs will go to a different destination so they will be considered separate from their inputs. In other words, `D` in your case will not be considered related to `A` in this case, and will not be associated with any coins arriving at `A` afterwards.",
      "created_at" : "2018-01-24T12:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-360113119",
      "id" : 360113119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-24T12:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360113119",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164743943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164743943"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this is avoidable complexity, because `avoidpartial` will be always higher fees.\r\nI think it is OK, you pay fee for privacy, while giving incentive to privacy over fee by default.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-30T13:42:21Z",
      "diff_hunk" : "@@ -3063,6 +3048,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164743943",
      "id" : 164743943,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDc0Mzk0Mw==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 257,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 92561230,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164743943",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some notes I am leaving here but to think about:\r\n\r\n* Making it default is the right way, but we should keep in mind that people relying on address reuse will pay way higher fee, so they need to be notified appropriately.\r\nVirtually all japanese exchanges are using address reuse (1 address per customer), this change would impact them a lot. I am unsure if they depend on Bitcoin Core Wallet though.\r\n* I am unsure if Bitcoin Core filter uneconomical outputs (filtering outputs which are more costly than their value to spend), but if bitcoin core implements this, we need to make sure this rule is always enforced at the Output level and not at the OutputGroup level. (Need to be enforced before you create the group)",
      "created_at" : "2018-01-30T13:47:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-361597920",
      "id" : 361597920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-30T13:48:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361597920",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164746945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164746945"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think `coinControl->m_avoid_partial_spends` should be a boolean, and `coinControl` should set its value based on the arg `avoidpartialspends` just after being created. (At worse, just before this call for now)\r\n\r\nThis will make the code easier to reason about.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-30T13:53:06Z",
      "diff_hunk" : "@@ -2575,17 +2556,21 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n+    // form groups from remaining coins; note that preset coins will not\n+    // automatically have their associated (same address) coins included\n+    std::vector<OutputGroup> groups = group_outputs(vCoins, !(coinControl && coinControl->m_avoid_partial_spends > -1 ? coinControl->m_avoid_partial_spends : gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164746945",
      "id" : 164746945,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDc0Njk0NQ==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 219,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 92564712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164746945",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164747804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164747804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what about `std::optional<bool>` ?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-30T13:56:10Z",
      "diff_hunk" : "@@ -30,6 +30,8 @@ class CCoinControl\n     boost::optional<CFeeRate> m_feerate;\n     //! Override the default confirmation target if set\n     boost::optional<unsigned int> m_confirm_target;\n+    //! Avoid partial use of funds sent to a given address: -1 means default\n+    short m_avoid_partial_spends;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164747804",
      "id" : 164747804,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDc0NzgwNA==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 92565726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164747804",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164754352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164754352"
         }
      },
      "author_association" : "MEMBER",
      "body" : " (since C++17) Ã°ÂÂÂ ",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-30T14:19:01Z",
      "diff_hunk" : "@@ -30,6 +30,8 @@ class CCoinControl\n     boost::optional<CFeeRate> m_feerate;\n     //! Override the default confirmation target if set\n     boost::optional<unsigned int> m_confirm_target;\n+    //! Avoid partial use of funds sent to a given address: -1 means default\n+    short m_avoid_partial_spends;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164754352",
      "id" : 164754352,
      "in_reply_to_id" : 164747804,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDc1NDM1Mg==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 92573541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164754352",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164757918"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164757918"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah I forgot we were using boost for that... I would still prefer boost than a short though.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-30T14:31:12Z",
      "diff_hunk" : "@@ -30,6 +30,8 @@ class CCoinControl\n     boost::optional<CFeeRate> m_feerate;\n     //! Override the default confirmation target if set\n     boost::optional<unsigned int> m_confirm_target;\n+    //! Avoid partial use of funds sent to a given address: -1 means default\n+    short m_avoid_partial_spends;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164757918",
      "id" : 164757918,
      "in_reply_to_id" : 164747804,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDc1NzkxOA==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 92577835,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164757918",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164934280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164934280"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Actually `avoidpartial` gives the same fee a lot of the times, from what I've seen so far. It depends on your utxo set, of course.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-31T01:47:45Z",
      "diff_hunk" : "@@ -3063,6 +3048,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164934280",
      "id" : 164934280,
      "in_reply_to_id" : 164743943,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDkzNDI4MA==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 257,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 92785010,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164934280",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164934469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164934469"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unfortunately that means either adding a coincontrol.cpp file and moving the constructor there, or adding a dependency on the `gArg` thing in `coincontrol.h`, which seems a bit overkill just for this. I'm very open to suggestions though; the short thing is an undesired hack.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-31T01:49:08Z",
      "diff_hunk" : "@@ -2575,17 +2556,21 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n+    // form groups from remaining coins; note that preset coins will not\n+    // automatically have their associated (same address) coins included\n+    std::vector<OutputGroup> groups = group_outputs(vCoins, !(coinControl && coinControl->m_avoid_partial_spends > -1 ? coinControl->m_avoid_partial_spends : gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r164934469",
      "id" : 164934469,
      "in_reply_to_id" : 164746945,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDkzNDQ2OQ==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 219,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 92785217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164934469",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@NicolasDorier \r\n> Making it default is the right way, but we should keep in mind that people relying on address reuse will pay way higher fee, so they need to be notified appropriately.\r\n\r\nI think keeping it off by default for now is reasonable, until we get enough of an idea of the general consensus among people. I suspect, though, that most people won't care, as long as it doesn't give overly huge fee increases.\r\n\r\n> Virtually all japanese exchanges are using address reuse (1 address per customer), this change would impact them a lot. I am unsure if they depend on Bitcoin Core Wallet though.\r\n\r\nAlso some people have a \"permanent\" address that they receive payments to over a long period of time (e.g. charities). They also care little about privacy, usually, as their address is publicly tied to them anyway.\r\n\r\n> I am unsure if Bitcoin Core filter uneconomical outputs (filtering outputs which are more costly than their value to spend), but if bitcoin core implements this, we need to make sure this rule is always enforced at the Output level and not at the OutputGroup level. (Need to be enforced before you create the group)\r\n\r\nGood point. I think the dust limit check can be added to the grouping method fairly easily.\r\n",
      "created_at" : "2018-01-31T01:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-361797462",
      "id" : 361797462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-01-31T01:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361797462",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165086889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165086889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I am unsure yet, but I think you can make the diff way smaller by keeping the old signature of this method and building the `OutputGroup` at the scope (local variable) of this function only.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-01-31T15:26:34Z",
      "diff_hunk" : "@@ -2421,103 +2421,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165086889",
      "id" : 165086889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTA4Njg4OQ==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 67,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 92963376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165086889",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165258739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165258739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This method doesn't know whether you want single or grouped as it doesn't have coincontrol. Would have to add a bool for that at least. Not sure it'll become smaller though. It'll just move code around.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-01T04:42:16Z",
      "diff_hunk" : "@@ -2421,103 +2421,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165258739",
      "id" : 165258739,
      "in_reply_to_id" : 165086889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTI1ODczOQ==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 67,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 93165944,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165258739",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165284475"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165284475"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So the way I did it with NBitcoin is to keep the concept of group internal to only the method which does coin packing.\r\n\r\nIf grouping is deactivated, I group by random, that way there is a single code path for everything.\r\n\r\nI think it is a way smaller code change because all consumer of `SelectCoinsMinConf` do not have to change (you can make the `bool` default to `false` to keep original behavior)\r\nThe concept of group does not make lot's of sense anywhere outside of this method.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-01T08:24:12Z",
      "diff_hunk" : "@@ -2421,103 +2421,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165284475",
      "id" : 165284475,
      "in_reply_to_id" : 165086889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTI4NDQ3NQ==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 67,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 93195617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165284475",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165901799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165901799"
         }
      },
      "author_association" : "MEMBER",
      "body" : "would say `Privacy is improved as an address...`",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-05T08:05:49Z",
      "diff_hunk" : "@@ -389,6 +389,14 @@ Include IP addresses in debug output (default: 0)\n .IP\n Prepend debug output with timestamp (default: 1)\n .HP\n+\\fB\\-avoidpartialspends\\fR\n+.IP\n+Group outputs by address, selecting all or none, instead of selecting on\n+a per\\-output basis. Improved privacy as an address is only used",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165901799",
      "id" : 165901799,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTkwMTc5OQ==",
      "original_commit_id" : "740daf7b2c38f1902e29dc4daa3429727e90d924",
      "original_position" : 7,
      "path" : "doc/man/bitcoind.1",
      "position" : null,
      "pull_request_review_id" : 93906903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165901799",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165902270"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165902270"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Changed",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-05T08:09:14Z",
      "diff_hunk" : "@@ -389,6 +389,14 @@ Include IP addresses in debug output (default: 0)\n .IP\n Prepend debug output with timestamp (default: 1)\n .HP\n+\\fB\\-avoidpartialspends\\fR\n+.IP\n+Group outputs by address, selecting all or none, instead of selecting on\n+a per\\-output basis. Improved privacy as an address is only used",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r165902270",
      "id" : 165902270,
      "in_reply_to_id" : 165901799,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTkwMjI3MA==",
      "original_commit_id" : "740daf7b2c38f1902e29dc4daa3429727e90d924",
      "original_position" : 7,
      "path" : "doc/man/bitcoind.1",
      "position" : null,
      "pull_request_review_id" : 93907503,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/165902270",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r167753546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167753546"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I discussed with @NicolasDorier and we concluded that the current way this is done is okay (NBitcoin does it differently so it made sense there).",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-13T03:35:41Z",
      "diff_hunk" : "@@ -2421,103 +2421,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r167753546",
      "id" : 167753546,
      "in_reply_to_id" : 165086889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2Nzc1MzU0Ng==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 67,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 96017610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167753546",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170182753"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170182753"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Changed to using a `boost::optional`.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-23T07:34:47Z",
      "diff_hunk" : "@@ -30,6 +30,8 @@ class CCoinControl\n     boost::optional<CFeeRate> m_feerate;\n     //! Override the default confirmation target if set\n     boost::optional<unsigned int> m_confirm_target;\n+    //! Avoid partial use of funds sent to a given address: -1 means default\n+    short m_avoid_partial_spends;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170182753",
      "id" : 170182753,
      "in_reply_to_id" : 164747804,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDE4Mjc1Mw==",
      "original_commit_id" : "58e4bb1d3943518cebc9ab620e105615d5e3acfe",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 98830043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170182753",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170800643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170800643"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"by key\". Outputs don't have addresses.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-27T02:38:10Z",
      "diff_hunk" : "@@ -462,6 +462,8 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_SIZE));\n         strUsage += HelpMessageOpt(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE));\n     }\n+    strUsage += HelpMessageOpt(\"-avoidpartialspends\", strprintf(_(\"Group outputs by address, selecting all or none, instead of selecting on a per-output basis. Privacy is improved as an address is only used once (unless someone sends to it \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170800643",
      "id" : 170800643,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDgwMDY0Mw==",
      "original_commit_id" : "2f4376122e148b2a16f07ca2772c8c4fa5fb141f",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 99541864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170800643",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170801487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170801487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems this would be better as a method on CCoinControl...",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-27T02:45:21Z",
      "diff_hunk" : "@@ -47,6 +47,8 @@ OutputType g_change_type = OUTPUT_TYPE_NONE;\n const char * DEFAULT_WALLET_DAT = \"wallet.dat\";\n const uint32_t BIP32_HARDENED_KEY_LIMIT = 0x80000000;\n \n+#define COINCONTROL_AVOID_PARTIAL_SPENDS(cc) ((cc) && (cc)->m_avoid_partial_spends ? (cc)->m_avoid_partial_spends.get() : gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170801487",
      "id" : 170801487,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDgwMTQ4Nw==",
      "original_commit_id" : "2f4376122e148b2a16f07ca2772c8c4fa5fb141f",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99542885,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170801487",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170814766"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170814766"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Coin control needs `gArgs` in that case, and currently there is no `.cpp` file so it'd have to be included in the header.\r\n\r\nI'm actually starting to think maybe coin control could use a `.cpp` file...",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-27T04:50:33Z",
      "diff_hunk" : "@@ -47,6 +47,8 @@ OutputType g_change_type = OUTPUT_TYPE_NONE;\n const char * DEFAULT_WALLET_DAT = \"wallet.dat\";\n const uint32_t BIP32_HARDENED_KEY_LIMIT = 0x80000000;\n \n+#define COINCONTROL_AVOID_PARTIAL_SPENDS(cc) ((cc) && (cc)->m_avoid_partial_spends ? (cc)->m_avoid_partial_spends.get() : gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170814766",
      "id" : 170814766,
      "in_reply_to_id" : 170801487,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDgxNDc2Ng==",
      "original_commit_id" : "2f4376122e148b2a16f07ca2772c8c4fa5fb141f",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99557786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170814766",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170815179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170815179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I see what you're saying, but in this case I think 'address' is fine; we speak of address reuse, after all. While outputs themselves don't have addresses, the funding to each output was done to a specific address; if that address was the same, then this PR will group them together.\r\n\r\nMaybe `Group outputs by key (address), selecting all or...` would be fine, though?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-27T04:54:36Z",
      "diff_hunk" : "@@ -462,6 +462,8 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_SIZE));\n         strUsage += HelpMessageOpt(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE));\n     }\n+    strUsage += HelpMessageOpt(\"-avoidpartialspends\", strprintf(_(\"Group outputs by address, selecting all or none, instead of selecting on a per-output basis. Privacy is improved as an address is only used once (unless someone sends to it \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r170815179",
      "id" : 170815179,
      "in_reply_to_id" : 170800643,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDgxNTE3OQ==",
      "original_commit_id" : "2f4376122e148b2a16f07ca2772c8c4fa5fb141f",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 99558236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170815179",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I added `coincontrol.cpp` and moved `SetNull` into it, setting it to the default given in `DEFAULT_AVOIDPARTIALSPENDS`. This cleans up use as it is always a bool with an up-to-date value even when default is used.",
      "created_at" : "2018-02-27T06:16:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-368759789",
      "id" : 368759789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-02-27T06:16:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/368759789",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171127972"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171127972"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also, this should be in `wallet/init`",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T02:22:33Z",
      "diff_hunk" : "@@ -462,6 +462,8 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_SIZE));\n         strUsage += HelpMessageOpt(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE));\n     }\n+    strUsage += HelpMessageOpt(\"-avoidpartialspends\", strprintf(_(\"Group outputs by address, selecting all or none, instead of selecting on a per-output basis. Privacy is improved as an address is only used once (unless someone sends to it \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171127972",
      "id" : 171127972,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTEyNzk3Mg==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 99926462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171127972",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171128124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171128124"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Similarly, in `wallet/wallet.h`",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T02:24:07Z",
      "diff_hunk" : "@@ -53,6 +53,8 @@ static const bool DEFAULT_WHITELISTFORCERELAY = true;\n static const unsigned int DEFAULT_MIN_RELAY_TX_FEE = 1000;\n //! -maxtxfee default\n static const CAmount DEFAULT_TRANSACTION_MAXFEE = 0.1 * COIN;\n+//! -avoidpartialspends default\n+static const bool DEFAULT_AVOIDPARTIALSPENDS = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171128124",
      "id" : 171128124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTEyODEyNA==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 5,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 99926655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171128124",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171141289"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171141289"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Change from uint64_t max to int64_t max should be documented somewhere, probably done alone in a separate bugfix commit.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T04:33:19Z",
      "diff_hunk" : "@@ -2564,17 +2545,21 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n+    // form groups from remaining coins; note that preset coins will not\n+    // automatically have their associated (same address) coins included\n+    std::vector<OutputGroup> groups = group_outputs(vCoins, !(coinControl && coinControl->m_avoid_partial_spends));\n+\n     size_t nMaxChainLength = std::min(gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT), gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT));\n     bool fRejectLongChains = gArgs.GetBoolArg(\"-walletrejectlongchains\", DEFAULT_WALLET_REJECT_LONG_CHAINS);\n \n     bool res = nTargetValue <= nValueFromPresetInputs ||\n-        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 6, 0, vCoins, setCoinsRet, nValueRet) ||\n-        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 1, 0, vCoins, setCoinsRet, nValueRet) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, 2, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::min((size_t)4, nMaxChainLength/3), vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength/2, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::numeric_limits<uint64_t>::max(), vCoins, setCoinsRet, nValueRet));\n+        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 6, 0, groups, setCoinsRet, nValueRet) ||\n+        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 1, 0, groups, setCoinsRet, nValueRet) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, 2, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::min((size_t)4, nMaxChainLength/3), groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength/2, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::numeric_limits<int64_t>::max(), groups, setCoinsRet, nValueRet));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171141289",
      "id" : 171141289,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE0MTI4OQ==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 238,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99941367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171141289",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171141879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171141879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This policy change should be documented in the commit message.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T04:39:25Z",
      "diff_hunk" : "@@ -2410,103 +2410,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,\n-                                 std::set<CInputCoin>& setCoinsRet, CAmount& nValueRet) const\n+bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const int64_t nMaxAncestors,\n+                                 std::vector<OutputGroup> groups, std::set<CInputCoin>& setCoinsRet, CAmount& nValueRet) const\n {\n     setCoinsRet.clear();\n     nValueRet = 0;\n \n     // List of values less than target\n-    boost::optional<CInputCoin> coinLowestLarger;\n-    std::vector<CInputCoin> vValue;\n+    boost::optional<OutputGroup> lowest_larger;\n+    std::vector<OutputGroup> applicable_groups;\n     CAmount nTotalLower = 0;\n \n-    random_shuffle(vCoins.begin(), vCoins.end(), GetRandInt);\n+    random_shuffle(groups.begin(), groups.end(), GetRandInt);\n \n-    for (const COutput &output : vCoins)\n-    {\n-        if (!output.fSpendable)\n-            continue;\n-\n-        const CWalletTx *pcoin = output.tx;\n-\n-        if (output.nDepth < (pcoin->IsFromMe(ISMINE_ALL) ? nConfMine : nConfTheirs))\n-            continue;\n-\n-        if (!mempool.TransactionWithinChainLimit(pcoin->GetHash(), nMaxAncestors))\n-            continue;\n-\n-        int i = output.i;\n+    for (const OutputGroup& group : groups) {\n+        if (group.m_depth < (group.m_from_me ? nConfMine : nConfTheirs)) continue;\n \n-        CInputCoin coin = CInputCoin(pcoin, i);\n+        if (group.m_chain_limit_value >= nMaxAncestors) continue;\n \n-        if (coin.txout.nValue == nTargetValue)\n-        {\n-            setCoinsRet.insert(coin);\n-            nValueRet += coin.txout.nValue;\n+        if (group.m_value == nTargetValue) {\n+            insert(setCoinsRet, group.input_coins());\n+            nValueRet += group.m_value;\n             return true;\n-        }\n-        else if (coin.txout.nValue < nTargetValue + MIN_CHANGE)\n-        {\n-            vValue.push_back(coin);\n-            nTotalLower += coin.txout.nValue;\n-        }\n-        else if (!coinLowestLarger || coin.txout.nValue < coinLowestLarger->txout.nValue)\n-        {\n-            coinLowestLarger = coin;\n+        } else if (group.m_value < nTargetValue + MIN_CHANGE) {\n+            applicable_groups.push_back(group);\n+            nTotalLower += group.m_value;\n+        } else if (!lowest_larger || group.m_value < lowest_larger->m_value) {\n+            lowest_larger = group;\n         }\n     }\n \n-    if (nTotalLower == nTargetValue)\n-    {\n-        for (const auto& input : vValue)\n-        {\n-            setCoinsRet.insert(input);\n-            nValueRet += input.txout.nValue;\n+    if (nTotalLower == nTargetValue) {\n+        for (const auto& group : applicable_groups) {\n+            insert(setCoinsRet, group.input_coins());\n+            nValueRet += group.m_value;\n         }\n         return true;\n     }\n \n-    if (nTotalLower < nTargetValue)\n-    {\n-        if (!coinLowestLarger)\n-            return false;\n-        setCoinsRet.insert(coinLowestLarger.get());\n-        nValueRet += coinLowestLarger->txout.nValue;\n+    // we prioritize the lowest larger if\n+    // 1. it has multiple outputs (i.e. it is the result of address reuse)\n+    // 2. it is not substantially (>2x) larger than the target value\n+    if (nTotalLower < nTargetValue || (lowest_larger && lowest_larger->m_outputs.size() > 1 && lowest_larger->m_value < 2 * nTargetValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171141879",
      "id" : 171141879,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE0MTg3OQ==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 153,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99941990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171141879",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148885"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Moved",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T05:52:04Z",
      "diff_hunk" : "@@ -462,6 +462,8 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_SIZE));\n         strUsage += HelpMessageOpt(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE));\n     }\n+    strUsage += HelpMessageOpt(\"-avoidpartialspends\", strprintf(_(\"Group outputs by address, selecting all or none, instead of selecting on a per-output basis. Privacy is improved as an address is only used once (unless someone sends to it \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148885",
      "id" : 171148885,
      "in_reply_to_id" : 171127972,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE0ODg4NQ==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 99950057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148885",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148934"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Split into its own commit, and documented change in commit message.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T05:52:23Z",
      "diff_hunk" : "@@ -2564,17 +2545,21 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n             ++it;\n     }\n \n+    // form groups from remaining coins; note that preset coins will not\n+    // automatically have their associated (same address) coins included\n+    std::vector<OutputGroup> groups = group_outputs(vCoins, !(coinControl && coinControl->m_avoid_partial_spends));\n+\n     size_t nMaxChainLength = std::min(gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT), gArgs.GetArg(\"-limitdescendantcount\", DEFAULT_DESCENDANT_LIMIT));\n     bool fRejectLongChains = gArgs.GetBoolArg(\"-walletrejectlongchains\", DEFAULT_WALLET_REJECT_LONG_CHAINS);\n \n     bool res = nTargetValue <= nValueFromPresetInputs ||\n-        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 6, 0, vCoins, setCoinsRet, nValueRet) ||\n-        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 1, 0, vCoins, setCoinsRet, nValueRet) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, 2, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::min((size_t)4, nMaxChainLength/3), vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength/2, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength, vCoins, setCoinsRet, nValueRet)) ||\n-        (bSpendZeroConfChange && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::numeric_limits<uint64_t>::max(), vCoins, setCoinsRet, nValueRet));\n+        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 6, 0, groups, setCoinsRet, nValueRet) ||\n+        SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 1, 1, 0, groups, setCoinsRet, nValueRet) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, 2, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::min((size_t)4, nMaxChainLength/3), groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength/2, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, nMaxChainLength, groups, setCoinsRet, nValueRet)) ||\n+        (bSpendZeroConfChange && !fRejectLongChains && SelectCoinsMinConf(nTargetValue - nValueFromPresetInputs, 0, 1, std::numeric_limits<int64_t>::max(), groups, setCoinsRet, nValueRet));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148934",
      "id" : 171148934,
      "in_reply_to_id" : 171141289,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE0ODkzNA==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 238,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99950098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148934",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148962"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Split into its own commit, and documented policy change.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-02-28T05:52:36Z",
      "diff_hunk" : "@@ -2410,103 +2410,84 @@ static void ApproximateBestSubset(const std::vector<CInputCoin>& vValue, const C\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const uint64_t nMaxAncestors, std::vector<COutput> vCoins,\n-                                 std::set<CInputCoin>& setCoinsRet, CAmount& nValueRet) const\n+bool CWallet::SelectCoinsMinConf(const CAmount& nTargetValue, const int nConfMine, const int nConfTheirs, const int64_t nMaxAncestors,\n+                                 std::vector<OutputGroup> groups, std::set<CInputCoin>& setCoinsRet, CAmount& nValueRet) const\n {\n     setCoinsRet.clear();\n     nValueRet = 0;\n \n     // List of values less than target\n-    boost::optional<CInputCoin> coinLowestLarger;\n-    std::vector<CInputCoin> vValue;\n+    boost::optional<OutputGroup> lowest_larger;\n+    std::vector<OutputGroup> applicable_groups;\n     CAmount nTotalLower = 0;\n \n-    random_shuffle(vCoins.begin(), vCoins.end(), GetRandInt);\n+    random_shuffle(groups.begin(), groups.end(), GetRandInt);\n \n-    for (const COutput &output : vCoins)\n-    {\n-        if (!output.fSpendable)\n-            continue;\n-\n-        const CWalletTx *pcoin = output.tx;\n-\n-        if (output.nDepth < (pcoin->IsFromMe(ISMINE_ALL) ? nConfMine : nConfTheirs))\n-            continue;\n-\n-        if (!mempool.TransactionWithinChainLimit(pcoin->GetHash(), nMaxAncestors))\n-            continue;\n-\n-        int i = output.i;\n+    for (const OutputGroup& group : groups) {\n+        if (group.m_depth < (group.m_from_me ? nConfMine : nConfTheirs)) continue;\n \n-        CInputCoin coin = CInputCoin(pcoin, i);\n+        if (group.m_chain_limit_value >= nMaxAncestors) continue;\n \n-        if (coin.txout.nValue == nTargetValue)\n-        {\n-            setCoinsRet.insert(coin);\n-            nValueRet += coin.txout.nValue;\n+        if (group.m_value == nTargetValue) {\n+            insert(setCoinsRet, group.input_coins());\n+            nValueRet += group.m_value;\n             return true;\n-        }\n-        else if (coin.txout.nValue < nTargetValue + MIN_CHANGE)\n-        {\n-            vValue.push_back(coin);\n-            nTotalLower += coin.txout.nValue;\n-        }\n-        else if (!coinLowestLarger || coin.txout.nValue < coinLowestLarger->txout.nValue)\n-        {\n-            coinLowestLarger = coin;\n+        } else if (group.m_value < nTargetValue + MIN_CHANGE) {\n+            applicable_groups.push_back(group);\n+            nTotalLower += group.m_value;\n+        } else if (!lowest_larger || group.m_value < lowest_larger->m_value) {\n+            lowest_larger = group;\n         }\n     }\n \n-    if (nTotalLower == nTargetValue)\n-    {\n-        for (const auto& input : vValue)\n-        {\n-            setCoinsRet.insert(input);\n-            nValueRet += input.txout.nValue;\n+    if (nTotalLower == nTargetValue) {\n+        for (const auto& group : applicable_groups) {\n+            insert(setCoinsRet, group.input_coins());\n+            nValueRet += group.m_value;\n         }\n         return true;\n     }\n \n-    if (nTotalLower < nTargetValue)\n-    {\n-        if (!coinLowestLarger)\n-            return false;\n-        setCoinsRet.insert(coinLowestLarger.get());\n-        nValueRet += coinLowestLarger->txout.nValue;\n+    // we prioritize the lowest larger if\n+    // 1. it has multiple outputs (i.e. it is the result of address reuse)\n+    // 2. it is not substantially (>2x) larger than the target value\n+    if (nTotalLower < nTargetValue || (lowest_larger && lowest_larger->m_outputs.size() > 1 && lowest_larger->m_value < 2 * nTargetValue)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r171148962",
      "id" : 171148962,
      "in_reply_to_id" : 171141879,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE0ODk2Mg==",
      "original_commit_id" : "cf9df64071b697afdf0397438db8dd0a00513664",
      "original_position" : 153,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 99950122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171148962",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK",
      "created_at" : "2018-03-05T20:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-370547626",
      "id" : 370547626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-03-05T20:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370547626",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r172851205"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172851205"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As we discussed you might not need `&&` because you can pass temporary object to the function with `const Tsrc&`",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-03-07T14:06:35Z",
      "diff_hunk" : "@@ -357,4 +358,14 @@ std::unique_ptr<T> MakeUnique(Args&&... args)\n     return std::unique_ptr<T>(new T(std::forward<Args>(args)...));\n }\n \n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+void insert(Tdst& dst, const Tsrc&& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r172851205",
      "id" : 172851205,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3Mjg1MTIwNQ==",
      "original_commit_id" : "44dfa2f86ecbf95a7a45a933f700a68d690f8f68",
      "original_position" : 14,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 101938276,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172851205",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r172852831"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172852831"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: You don't have to do this, but I think it would be better if this commit was self contained, as now the clients of `TransactionWithinChainLimit` are not compiling anymore. To verify your change is valid we need to check other commits later. This make it harder to review.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-03-07T14:11:48Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r172852831",
      "id" : 172852831,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3Mjg1MjgzMQ==",
      "original_commit_id" : "be37c0c21dc29d2075dd15d4c3a117787eb344d8",
      "original_position" : 3,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 101940236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172852831",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code Review ACK, though it would be nice to have the remaining TODO in the test done.\r\n\r\nI am also wondering potential performance problem for wallet with lots of UTXOs. I already heard complaints that core was getting quite slow at doing transactions when for big wallets. (though this could be worked around by asking people to turn on `avoidpartialspends`)",
      "created_at" : "2018-03-07T14:40:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-371159249",
      "id" : 371159249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-03-07T14:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371159249",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I am also wondering potential performance problem for wallet with lots of UTXOs. I already heard complaints that core was getting quite slow at doing transactions when for big wallets. (though this could be worked around by asking people to turn on avoidpartialspends)\r\n\r\nI think wallets with a ton of outputs would want to use avoidpartialspends as it would affect them minimally fee-wise, and it would improve privacy for odd-ball reuse.",
      "created_at" : "2018-03-07T15:39:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-371179101",
      "id" : 371179101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-03-07T15:39:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371179101",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I rebased this on top of the new coin selection algorithm.",
      "created_at" : "2018-03-15T10:17:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-373327079",
      "id" : 373327079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-03-15T10:17:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373327079",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r180825503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180825503"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't this change be part of 27872fa1cf4f7ca5e0c136554078448dc7f92d1d?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-04-11T16:53:45Z",
      "diff_hunk" : "@@ -4387,7 +4387,7 @@ std::vector<COutput>::iterator OutputGroup::discard(const COutput& output) {\n std::vector<CInputCoin> OutputGroup::input_coins() const {\n     std::vector<CInputCoin> coins;\n     for (const auto& output : m_outputs) {\n-        coins.emplace_back(output.tx, output.i);\n+        coins.emplace_back(output.tx->tx, output.i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r180825503",
      "id" : 180825503,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDgyNTUwMw==",
      "original_commit_id" : "f9d1a771b151a721e869d6f5321d3c8dd9a81a75",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 111316021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180825503",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r180939016"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180939016"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes! Thanks for noticing.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-04-12T00:53:46Z",
      "diff_hunk" : "@@ -4387,7 +4387,7 @@ std::vector<COutput>::iterator OutputGroup::discard(const COutput& output) {\n std::vector<CInputCoin> OutputGroup::input_coins() const {\n     std::vector<CInputCoin> coins;\n     for (const auto& output : m_outputs) {\n-        coins.emplace_back(output.tx, output.i);\n+        coins.emplace_back(output.tx->tx, output.i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r180939016",
      "id" : 180939016,
      "in_reply_to_id" : 180825503,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDkzOTAxNg==",
      "original_commit_id" : "f9d1a771b151a721e869d6f5321d3c8dd9a81a75",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 111450151,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180939016",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase if still relevant",
      "created_at" : "2018-05-09T18:40:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-387836031",
      "id" : 387836031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-05-09T18:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/387836031",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2018-05-10T02:01:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-387928694",
      "id" : 387928694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "updated_at" : "2018-05-10T02:01:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/387928694",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-06-11T15:03:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-396276000",
      "id" : 396276000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NjI3NjAwMA==",
      "updated_at" : "2018-06-11T15:03:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396276000",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2018-06-12T06:27:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-396479607",
      "id" : 396479607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NjQ3OTYwNw==",
      "updated_at" : "2018-06-12T06:27:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396479607",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-06-30T12:36:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-401538582",
      "id" : 401538582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMTUzODU4Mg==",
      "updated_at" : "2018-06-30T12:36:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/401538582",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2018-07-02T05:38:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-401677390",
      "id" : 401677390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMTY3NzM5MA==",
      "updated_at" : "2018-07-02T05:38:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/401677390",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK",
      "created_at" : "2018-07-13T03:38:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-404716443",
      "id" : 404716443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNDcxNjQ0Mw==",
      "updated_at" : "2018-07-13T03:38:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/404716443",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492032"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Const rvalue references aren't very useful.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-13T23:06:45Z",
      "diff_hunk" : "@@ -669,6 +668,39 @@ struct CoinEligibilityFilter\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n+struct OutputGroup\n+{\n+    std::vector<COutput> m_outputs;\n+    bool m_from_me;\n+    CAmount m_value;\n+    int m_depth;\n+    size_t m_ancestors;\n+    size_t m_descendants;\n+    CAmount effective_value;\n+    CAmount fee;\n+    CAmount long_term_fee;\n+\n+    OutputGroup() : OutputGroup(std::vector<COutput>(), true, 0, 999, 0, 0) {}\n+    OutputGroup(const std::vector<COutput>&& outputs, bool from_me, CAmount value, int depth, size_t ancestors, size_t descendants)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492032",
      "id" : 202492032,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ5MjAzMg==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 36,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 137213236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492032",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492161"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you avoid this cyclic module dependency (between coinselection and wallet) by moving `OutputGroup` to coinselection.h?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-13T23:08:00Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492161",
      "id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ5MjE2MQ==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137213404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492161",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492813"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can this branching for avoid_partial_spends on/off be done in `CWallet::SelectCoins` (where all different combinations of confirmation levels and depth limits are tried), instead of creating a second place of iterating through things?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-13T23:14:20Z",
      "diff_hunk" : "@@ -3112,6 +3119,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = _create_tx(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already\n+    if (res && !coin_control.m_avoid_partial_spends) {\n+        CCoinControl tmp_cc = coin_control;\n+        tmp_cc.m_avoid_partial_spends = true;\n+        CAmount nFeeRet2;\n+        int nChangePosInOut2 = nChangePosIn;\n+        if (_create_tx(vecSend, tx2, reservekey, nFeeRet2, nChangePosInOut2, strFailReason, tmp_cc, sign)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492813",
      "id" : 202492813,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ5MjgxMw==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 136,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 137213404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492813",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492867"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This feels like a completely unrelated change to the coin selection algorithm. If it's useful, I'd like to see simulation results first, and even then it's probably better in a separate PR.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-13T23:14:59Z",
      "diff_hunk" : "@@ -244,7 +244,10 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<OutputGroup>& group\n         return true;\n     }\n \n-    if (nTotalLower < nTargetValue) {\n+    // we prioritize the lowest larger if",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492867",
      "id" : 202492867,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ5Mjg2Nw==",
      "original_commit_id" : "543bc10b3e773fe558ae5c57ddcd62a210ba4d9c",
      "original_position" : 5,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137213404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202492867",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202513201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202513201"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Generally, we initialize all non-static class members where they are declared. Ensure determinism by avoiding accidental use of uninitialized values. Also, static analyzers balk about this. Initializing the members in the declaration makes it easy to spot uninitialized ones.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#c-data-structures",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-14T11:42:33Z",
      "diff_hunk" : "@@ -0,0 +1,23 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <wallet/coincontrol.h>\n+\n+#include <util.h>\n+\n+void CCoinControl::SetNull()\n+{\n+    destChange = CNoDestination();\n+    m_change_type.reset();\n+    fAllowOtherInputs = false;\n+    fAllowWatchOnly = false;\n+    m_avoid_partial_spends = gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS);\n+    setSelected.clear();\n+    m_feerate.reset();\n+    fOverrideFeeRate = false;\n+    m_confirm_target.reset();\n+    m_signal_bip125_rbf.reset();\n+    m_fee_mode = FeeEstimateMode::UNSET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202513201",
      "id" : 202513201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjUxMzIwMQ==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 21,
      "path" : "src/wallet/coincontrol.cpp",
      "position" : 21,
      "pull_request_review_id" : 137236369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202513201",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202513243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202513243"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: same for all members here. Can just inline into `CAmount long_term_fee{0};` above to avoid duplication.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-14T11:45:43Z",
      "diff_hunk" : "@@ -669,6 +668,39 @@ struct CoinEligibilityFilter\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n+struct OutputGroup\n+{\n+    std::vector<COutput> m_outputs;\n+    bool m_from_me;\n+    CAmount m_value;\n+    int m_depth;\n+    size_t m_ancestors;\n+    size_t m_descendants;\n+    CAmount effective_value;\n+    CAmount fee;\n+    CAmount long_term_fee;\n+\n+    OutputGroup() : OutputGroup(std::vector<COutput>(), true, 0, 999, 0, 0) {}\n+    OutputGroup(const std::vector<COutput>&& outputs, bool from_me, CAmount value, int depth, size_t ancestors, size_t descendants)\n+    : m_outputs(outputs)\n+    , m_from_me(from_me)\n+    , m_value(value)\n+    , m_depth(depth)\n+    , m_ancestors(ancestors)\n+    , m_descendants(descendants)\n+    , effective_value(0)\n+    , fee(0)\n+    , long_term_fee(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202513243",
      "id" : 202513243,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjUxMzI0Mw==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 45,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 137236401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202513243",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202894897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202894897"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`OutputGroup` depends heavily on `COutput`, which is integral to the wallet. I could move it, but it feels like `COutput` doesn't really belong in coin selection.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:02:44Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202894897",
      "id" : 202894897,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NDg5Nw==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137676878,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202894897",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895072"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dropped the relevant commit. I will make a PR once I have simulation results to back the change after merge.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:04:18Z",
      "diff_hunk" : "@@ -244,7 +244,10 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<OutputGroup>& group\n         return true;\n     }\n \n-    if (nTotalLower < nTargetValue) {\n+    // we prioritize the lowest larger if",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895072",
      "id" : 202895072,
      "in_reply_to_id" : 202492867,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NTA3Mg==",
      "original_commit_id" : "543bc10b3e773fe558ae5c57ddcd62a210ba4d9c",
      "original_position" : 5,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137677070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895072",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not? See the wallet as a user of the coin selection algorithm, filling in the relevant data in its native data type.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:04:57Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895135",
      "id" : 202895135,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NTEzNQ==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137677150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895135",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895534"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, I see. COutput contains a CWalletTx. Yeah, no, that doesn't belong in coinselection.\r\n\r\nBut why does the coin selection code need access to CWalletTx's?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:08:31Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202895534",
      "id" : 202895534,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NTUzNA==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137677574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202895534",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202897077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202897077"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It would duplicate the initialization in the `SetNull()` method as well as in the variable declarations. I assume that's okay, then?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:20:39Z",
      "diff_hunk" : "@@ -0,0 +1,23 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <wallet/coincontrol.h>\n+\n+#include <util.h>\n+\n+void CCoinControl::SetNull()\n+{\n+    destChange = CNoDestination();\n+    m_change_type.reset();\n+    fAllowOtherInputs = false;\n+    fAllowWatchOnly = false;\n+    m_avoid_partial_spends = gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS);\n+    setSelected.clear();\n+    m_feerate.reset();\n+    fOverrideFeeRate = false;\n+    m_confirm_target.reset();\n+    m_signal_bip125_rbf.reset();\n+    m_fee_mode = FeeEstimateMode::UNSET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202897077",
      "id" : 202897077,
      "in_reply_to_id" : 202513201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NzA3Nw==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 21,
      "path" : "src/wallet/coincontrol.cpp",
      "position" : 21,
      "pull_request_review_id" : 137679248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202897077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202897929"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202897929"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T05:28:24Z",
      "diff_hunk" : "@@ -669,6 +668,39 @@ struct CoinEligibilityFilter\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n+struct OutputGroup\n+{\n+    std::vector<COutput> m_outputs;\n+    bool m_from_me;\n+    CAmount m_value;\n+    int m_depth;\n+    size_t m_ancestors;\n+    size_t m_descendants;\n+    CAmount effective_value;\n+    CAmount fee;\n+    CAmount long_term_fee;\n+\n+    OutputGroup() : OutputGroup(std::vector<COutput>(), true, 0, 999, 0, 0) {}\n+    OutputGroup(const std::vector<COutput>&& outputs, bool from_me, CAmount value, int depth, size_t ancestors, size_t descendants)\n+    : m_outputs(outputs)\n+    , m_from_me(from_me)\n+    , m_value(value)\n+    , m_depth(depth)\n+    , m_ancestors(ancestors)\n+    , m_descendants(descendants)\n+    , effective_value(0)\n+    , fee(0)\n+    , long_term_fee(0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202897929",
      "id" : 202897929,
      "in_reply_to_id" : 202513243,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjg5NzkyOQ==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 45,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 137680276,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202897929",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202904681"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202904681"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It needs the `tx->tx->vout[output.i].nValue` and `tx->IsEquivalentTo()` (but can probably work around the latter).\r\n\r\nI could replace this with a new struct without the `CWalletTx` reference, if I provided the values, txid, and index, I think.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T06:18:42Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202904681",
      "id" : 202904681,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjkwNDY4MQ==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137687878,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202904681",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202904924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202904924"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Actually, I can probably use `CInputCoin` if I keep the value ivar. Will try that.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T06:20:23Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202904924",
      "id" : 202904924,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjkwNDkyNA==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137688162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202904924",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202967723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202967723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I would love to, but it relies on absolute fee to determine whether to force-use the avoid partial variant, which is not available in `SelectCoins`.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T10:15:37Z",
      "diff_hunk" : "@@ -3112,6 +3119,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = _create_tx(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already\n+    if (res && !coin_control.m_avoid_partial_spends) {\n+        CCoinControl tmp_cc = coin_control;\n+        tmp_cc.m_avoid_partial_spends = true;\n+        CAmount nFeeRet2;\n+        int nChangePosInOut2 = nChangePosIn;\n+        if (_create_tx(vecSend, tx2, reservekey, nFeeRet2, nChangePosInOut2, strFailReason, tmp_cc, sign)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202967723",
      "id" : 202967723,
      "in_reply_to_id" : 202492813,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjk2NzcyMw==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 136,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 137762354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202967723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and addressed all nits except [@sipa's request to move the 'try avoiding' part into SelectCoins](https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202492813): I cannot access fees easily, since select coins handles sets of coins, rather than transactions. It may be reasonable to switch to simply using 'number of inputs' rather than 'absolute fee', in which case this can be moved to `SelectCoins`, but I already did the opposite change as input count was deemed to be a bit too crude.\r\n\r\nEdit: I should note that I ended up moving `CoinEligibilityFilter` to `coinselection.h`, which I think makes perfect sense.",
      "created_at" : "2018-07-17T10:18:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-405533415",
      "id" : 405533415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTUzMzQxNQ==",
      "updated_at" : "2018-07-17T10:58:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405533415",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202970162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202970162"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`CInputCoin` worked great after some tweakery.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T10:24:35Z",
      "diff_hunk" : "@@ -3,12 +3,13 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <wallet/coinselection.h>\n+#include <wallet/wallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202970162",
      "id" : 202970162,
      "in_reply_to_id" : 202492161,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjk3MDE2Mg==",
      "original_commit_id" : "0e7efafa54bae691a89310eba2d00f2154433057",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137765331,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202970162",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202970692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202970692"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW, because the system tries to avoid spending larger than target if it can, this actually turns out to be a significant part of the algorithm. I've kept it out for now, but I feel that it needs to be in there, or the code will *intentionally* avoid spending reuse-groups.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T10:26:40Z",
      "diff_hunk" : "@@ -244,7 +244,10 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<OutputGroup>& group\n         return true;\n     }\n \n-    if (nTotalLower < nTargetValue) {\n+    // we prioritize the lowest larger if",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r202970692",
      "id" : 202970692,
      "in_reply_to_id" : 202492867,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjk3MDY5Mg==",
      "original_commit_id" : "543bc10b3e773fe558ae5c57ddcd62a210ba4d9c",
      "original_position" : 5,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 137765949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202970692",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203004142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203004142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, sorry. I had missed that `SetNull()` is used in the gui code once.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-17T12:40:39Z",
      "diff_hunk" : "@@ -0,0 +1,23 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <wallet/coincontrol.h>\n+\n+#include <util.h>\n+\n+void CCoinControl::SetNull()\n+{\n+    destChange = CNoDestination();\n+    m_change_type.reset();\n+    fAllowOtherInputs = false;\n+    fAllowWatchOnly = false;\n+    m_avoid_partial_spends = gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS);\n+    setSelected.clear();\n+    m_feerate.reset();\n+    fOverrideFeeRate = false;\n+    m_confirm_target.reset();\n+    m_signal_bip125_rbf.reset();\n+    m_fee_mode = FeeEstimateMode::UNSET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203004142",
      "id" : 203004142,
      "in_reply_to_id" : 202513201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzAwNDE0Mg==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 21,
      "path" : "src/wallet/coincontrol.cpp",
      "position" : 21,
      "pull_request_review_id" : 137807168,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203004142",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(mostly @sipa) The policy change in 750db05 is actually a necessary part of the algorithm, so it was re-added. Consider sending 1.1 btc from this utxo set:\r\n* 1.0 btc to A\r\n* 0.3 btc to A\r\n* 0.2 btc to B\r\n* 1.0 btc to C\r\n\r\nThe implementation change will see three \"coins\": A (1.3 btc), B (0.2), and C (1.0). It will see A as 'lowest larger', and not use it, because sum(B:C) can cover the payment.\r\n\r\nIdeally, we want it to pick A, unless A is really big and/or our payment is really small (I arbitrarily set this limit to 2*target).\r\n",
      "created_at" : "2018-07-18T02:31:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-405789226",
      "id" : 405789226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTc4OTIyNg==",
      "updated_at" : "2018-07-18T02:36:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405789226",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kallewoof I understand your argument that it may be desirable, but I don't understand why it is necessary.\n\nHow is it different from a scenario in the existing code where there are only 3 UTXOs (with sizes 1.3 BTC, 0.2 BTC, and 1 BTC)?",
      "created_at" : "2018-07-18T02:47:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-405791570",
      "id" : 405791570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTc5MTU3MA==",
      "updated_at" : "2018-07-18T02:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405791570",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "After discussing with @sipa (and after realizing this only applies to the knapsack solver which is intended to be removed in the near future) I removed the policy change again.",
      "created_at" : "2018-07-18T03:40:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-405799152",
      "id" : 405799152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTc5OTE1Mg==",
      "updated_at" : "2018-07-18T03:40:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405799152",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203243555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203243555"
         }
      },
      "author_association" : "MEMBER",
      "body" : "NP! I am unsure if c942091 should be dropped or if it's a-good to have. Keeping it unless/until someone complains.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T03:42:44Z",
      "diff_hunk" : "@@ -0,0 +1,23 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <wallet/coincontrol.h>\n+\n+#include <util.h>\n+\n+void CCoinControl::SetNull()\n+{\n+    destChange = CNoDestination();\n+    m_change_type.reset();\n+    fAllowOtherInputs = false;\n+    fAllowWatchOnly = false;\n+    m_avoid_partial_spends = gArgs.GetBoolArg(\"-avoidpartialspends\", DEFAULT_AVOIDPARTIALSPENDS);\n+    setSelected.clear();\n+    m_feerate.reset();\n+    fOverrideFeeRate = false;\n+    m_confirm_target.reset();\n+    m_signal_bip125_rbf.reset();\n+    m_fee_mode = FeeEstimateMode::UNSET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203243555",
      "id" : 203243555,
      "in_reply_to_id" : 202513201,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzI0MzU1NQ==",
      "original_commit_id" : "af586af9f0a711bce128b000c4bf3897b4cf38ce",
      "original_position" : 21,
      "path" : "src/wallet/coincontrol.cpp",
      "position" : 21,
      "pull_request_review_id" : 138094103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203243555",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK",
      "created_at" : "2018-07-18T17:32:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-406012652",
      "id" : 406012652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNjAxMjY1Mg==",
      "updated_at" : "2018-07-18T17:32:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406012652",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203491824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203491824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you explain why this is taking `std::max`?  I think the correct calculation would involve taking the set of ancestors or descendants of the group and counting the unique entries.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T18:54:15Z",
      "diff_hunk" : "@@ -298,3 +298,35 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    m_ancestors = std::max(m_ancestors, ancestors);\n+    m_descendants = std::max(m_descendants, descendants);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203491824",
      "id" : 203491824,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQ5MTgyNA==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 17,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 138392285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203491824",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203505968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203505968"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No need for a forward declaration here. wallet/wallet.h already includes wallet/coinselection.h where it is defined.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T19:45:54Z",
      "diff_hunk" : "@@ -642,16 +642,7 @@ struct CoinSelectionParams\n     CoinSelectionParams() {}\n };\n \n-struct CoinEligibilityFilter\n-{\n-    const int conf_mine;\n-    const int conf_theirs;\n-    const uint64_t max_ancestors;\n-    const uint64_t max_descendants;\n-\n-    CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_ancestors) {}\n-    CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n-};\n+struct CoinEligibilityFilter;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203505968",
      "id" : 203505968,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwNTk2OA==",
      "original_commit_id" : "8197c13132e9ac34a45551181e6445c7b497407f",
      "original_position" : 14,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 138409925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203505968",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203506343"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203506343"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If all local variables have a default initialized, you don't need the SetNull call in the constructor anymore.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T19:47:03Z",
      "diff_hunk" : "@@ -17,23 +17,23 @@ class CCoinControl\n {\n public:\n     //! Custom change destination, if not set an address is generated\n-    CTxDestination destChange;\n+    CTxDestination destChange{CNoDestination()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203506343",
      "id" : 203506343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwNjM0Mw==",
      "original_commit_id" : "c94209199f7ed00949ad6705fa9e4af4de7ee215",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 138409925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203506343",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203507457"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203507457"
         }
      },
      "author_association" : "MEMBER",
      "body" : "More efficient: `m_outputs(std::move(outputs))`. The expression 'outputs' here is not an rvalue reference, so this is not automatic.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T19:50:50Z",
      "diff_hunk" : "@@ -66,8 +66,38 @@ struct CoinEligibilityFilter\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n+struct OutputGroup\n+{\n+    std::vector<CInputCoin> m_outputs;\n+    bool m_from_me{true};\n+    CAmount m_value{0};\n+    int m_depth{999};\n+    size_t m_ancestors{0};\n+    size_t m_descendants{0};\n+    CAmount effective_value{0};\n+    CAmount fee{0};\n+    CAmount long_term_fee{0};\n+\n+    OutputGroup() {}\n+    OutputGroup(std::vector<CInputCoin>&& outputs, bool from_me, CAmount value, int depth, size_t ancestors, size_t descendants)\n+    : m_outputs(outputs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203507457",
      "id" : 203507457,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwNzQ1Nw==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 18,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 138409925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203507457",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203508548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203508548"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What is the forward declare for?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T19:54:58Z",
      "diff_hunk" : "@@ -9,6 +9,8 @@\n #include <primitives/transaction.h>\n #include <random.h>\n \n+struct OutputGroup;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203508548",
      "id" : 203508548,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwODU0OA==",
      "original_commit_id" : "e405c94e80c0b5a49668929cbccc34c141c3e1b6",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 138409925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203508548",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203509847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203509847"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's a really crazy function name. What about `CreateTransactionInternal` or so?",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-18T19:58:56Z",
      "diff_hunk" : "@@ -2635,8 +2641,8 @@ OutputType CWallet::TransactionChangeType(OutputType change_type, const std::vec\n     return m_default_address_type;\n }\n \n-bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n-                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+bool CWallet::_create_tx(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203509847",
      "id" : 203509847,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzUwOTg0Nw==",
      "original_commit_id" : "e405c94e80c0b5a49668929cbccc34c141c3e1b6",
      "original_position" : 130,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 138409925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203509847",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203586923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203586923"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The `descendants` value is already a complete count of all descendants starting from the top ancestor of the transaction in question. Here we only really care about who has the most.\r\n\r\nEdit: to explain this further, the behavior should be the same as if the utxo's were selected one at a time; in this case, their individual descendants count would determine their applicability for the current select-coins round, not their collective descendants count. Furthermore, if two coins were related, their descendants count would already include both of them, because it works from the top ancestor (name is slightly misleading IMO).",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:37:29Z",
      "diff_hunk" : "@@ -298,3 +298,35 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    m_ancestors = std::max(m_ancestors, ancestors);\n+    m_descendants = std::max(m_descendants, descendants);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203586923",
      "id" : 203586923,
      "in_reply_to_id" : 203491824,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4NjkyMw==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 17,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 138505606,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203586923",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587337"
         }
      },
      "author_association" : "MEMBER",
      "body" : "They don't -- specifically the new argument requires `gArgs` which are not available here.\r\n\r\nI should probably drop \"Declare-&-initialize...\" commit.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:41:22Z",
      "diff_hunk" : "@@ -17,23 +17,23 @@ class CCoinControl\n {\n public:\n     //! Custom change destination, if not set an address is generated\n-    CTxDestination destChange;\n+    CTxDestination destChange{CNoDestination()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587337",
      "id" : 203587337,
      "in_reply_to_id" : 203506343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4NzMzNw==",
      "original_commit_id" : "c94209199f7ed00949ad6705fa9e4af4de7ee215",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 138506093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587337",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587901"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Huh.. I thought `&&` made it an rvalue. Guess I need to re-read that explanation. Done.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:46:00Z",
      "diff_hunk" : "@@ -66,8 +66,38 @@ struct CoinEligibilityFilter\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n };\n \n+struct OutputGroup\n+{\n+    std::vector<CInputCoin> m_outputs;\n+    bool m_from_me{true};\n+    CAmount m_value{0};\n+    int m_depth{999};\n+    size_t m_ancestors{0};\n+    size_t m_descendants{0};\n+    CAmount effective_value{0};\n+    CAmount fee{0};\n+    CAmount long_term_fee{0};\n+\n+    OutputGroup() {}\n+    OutputGroup(std::vector<CInputCoin>&& outputs, bool from_me, CAmount value, int depth, size_t ancestors, size_t descendants)\n+    : m_outputs(outputs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587901",
      "id" : 203587901,
      "in_reply_to_id" : 203507457,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4NzkwMQ==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 18,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 138506699,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587901",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587925"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Leftover. Removed.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:46:14Z",
      "diff_hunk" : "@@ -9,6 +9,8 @@\n #include <primitives/transaction.h>\n #include <random.h>\n \n+struct OutputGroup;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587925",
      "id" : 203587925,
      "in_reply_to_id" : 203508548,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4NzkyNQ==",
      "original_commit_id" : "e405c94e80c0b5a49668929cbccc34c141c3e1b6",
      "original_position" : 4,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 138506737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587925",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587946"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Renamed.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:46:21Z",
      "diff_hunk" : "@@ -2635,8 +2641,8 @@ OutputType CWallet::TransactionChangeType(OutputType change_type, const std::vec\n     return m_default_address_type;\n }\n \n-bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n-                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+bool CWallet::_create_tx(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203587946",
      "id" : 203587946,
      "in_reply_to_id" : 203509847,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4Nzk0Ng==",
      "original_commit_id" : "e405c94e80c0b5a49668929cbccc34c141c3e1b6",
      "original_position" : 130,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 138506762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203587946",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203588558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203588558"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dropped that commit.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T02:51:23Z",
      "diff_hunk" : "@@ -17,23 +17,23 @@ class CCoinControl\n {\n public:\n     //! Custom change destination, if not set an address is generated\n-    CTxDestination destChange;\n+    CTxDestination destChange{CNoDestination()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203588558",
      "id" : 203588558,
      "in_reply_to_id" : 203506343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU4ODU1OA==",
      "original_commit_id" : "c94209199f7ed00949ad6705fa9e4af4de7ee215",
      "original_position" : 5,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 138507404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203588558",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203741762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203741762"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I believe this calculation may be fine for descendants (if I'm correctly understanding what the descendants variable represents -- it could use a code comment explaining exactly what it is, I think the `descendants` variable is the max number of descendants of any ancestor of a given coin?), however I think it is incorrect for ancestors.\r\n\r\nI believe the ancestor count is the actual number of ancestors a given coin has.  If you just take the max across all coins in an output group, then if you have e.g. 30 2-ancestor coins in an output group, you may treat them as a 2-ancestor output group, when in fact you have 60 ancestors in any transaction that includes the group.\r\n\r\n(For descendants, I think this works out fine, because all we're doing by creating a new transaction is adding one more descendant to every ancestor, so considering the max value is sufficient to try to avoid hitting mempool chain limits.)\r\n\r\nI understand that the existing logic may be imprecise and hacky around this, but I believe that combining all the coins into an output group exacerbates this issue.\r\n\r\nRegardless of what we end up doing here though I think the code could use a comment explaining the logic, as this is non-obvious.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T14:12:07Z",
      "diff_hunk" : "@@ -298,3 +298,35 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    m_ancestors = std::max(m_ancestors, ancestors);\n+    m_descendants = std::max(m_descendants, descendants);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203741762",
      "id" : 203741762,
      "in_reply_to_id" : 203491824,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzc0MTc2Mg==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 17,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 138690385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203741762",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203753054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203753054"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I believe the ancestor count is the actual number of ancestors a given coin has. If you just take the max across all coins in an output group, then if you have e.g. 30 2-ancestor coins in an output group, you may treat them as a 2-ancestor output group, when in fact you have 60 ancestors in any transaction that includes the group.\r\n\r\nAha! This is a very good point. I will think about a remedy for this post-merge. For now, I added a comment explaining how it works and how it can be improved.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-19T14:40:18Z",
      "diff_hunk" : "@@ -298,3 +298,35 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    m_ancestors = std::max(m_ancestors, ancestors);\n+    m_descendants = std::max(m_descendants, descendants);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r203753054",
      "id" : 203753054,
      "in_reply_to_id" : 203491824,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzc1MzA1NA==",
      "original_commit_id" : "ccb73ae1279576d28d55e92cdb63a7e2c2791437",
      "original_position" : 17,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 138704428,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/203753054",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204168100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204168100"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think I would prefer that we not do this -- I'm not sure that `-avoidpartialspends` works very well on wallets that have substantial address reuse, in particular I think you can devolve into cases where you'd produce giant transactions that take forever to sign and would never pass policy (or consensus) limits, in extreme cases.\r\n\r\nI'm going to comment elsewhere about places I think we can mitigate this sort of pathological behavior, but as belt and suspenders I think if the user is not using this new feature, we should not fall back to trying it anyway.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:00:37Z",
      "diff_hunk" : "@@ -3022,6 +3011,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = CreateTransactionInternal(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204168100",
      "id" : 204168100,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE2ODEwMA==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 162,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 139209710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204168100",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204171876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204171876"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps we should not create groups that would be excessively large to send together?  For instance if someone has a couple thousand outputs to the same address, then as a group they would become unspendable (because the resulting transaction would be too big).  \r\n\r\nIt might be pretty annoying for our users if they became vulnerable to weird DoS attacks where people create lots of dust to prevent them from spending their coins...",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:20:16Z",
      "diff_hunk" : "@@ -4379,3 +4392,25 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204171876",
      "id" : 204171876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE3MTg3Ng==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 187,
      "path" : "src/wallet/wallet.cpp",
      "position" : 154,
      "pull_request_review_id" : 139214368,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204171876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204175960"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204175960"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The code only selects the avoiding tx if its fee is lower than the original. I don't think you'd ever run into that case for someone with substantial address reuse.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:40:30Z",
      "diff_hunk" : "@@ -3022,6 +3011,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = CreateTransactionInternal(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204175960",
      "id" : 204175960,
      "in_reply_to_id" : 204168100,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE3NTk2MA==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 162,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 139219226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204175960",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204177020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204177020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "But even running the code on a wallet with a large number of outputs with the same scriptPubKey can be very slow.  Nothing stops the code from eg trying to generate a multi-megabyte transaction and then hit a huge slow down while trying to sign such a transaction, before the transaction gets rejected.  (I have an RPC test that demonstrates this possibility.)",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:45:30Z",
      "diff_hunk" : "@@ -3022,6 +3011,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = CreateTransactionInternal(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204177020",
      "id" : 204177020,
      "in_reply_to_id" : 204168100,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE3NzAyMA==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 162,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 139220295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204177020",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204177652"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204177652"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. I've set a cap at 10 outputs per group. Perhaps this should be a `-option`...\r\n\r\nThat being said, the code (at least BnB algo; knapsack is being deprecated) already removes dust from the group before running coin select. https://github.com/kallewoof/bitcoin/blob/19bbab013860c84475cce98a55179a1167348269/src/wallet/wallet.cpp#L2415-L2422",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:49:29Z",
      "diff_hunk" : "@@ -4379,3 +4392,25 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204177652",
      "id" : 204177652,
      "in_reply_to_id" : 204171876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE3NzY1Mg==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 187,
      "path" : "src/wallet/wallet.cpp",
      "position" : 154,
      "pull_request_review_id" : 139221066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204177652",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204178714"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204178714"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Now that there is a cap on the utxo count per output group, I think parts of this is mitigated, but I'm not sure I've convinced myself this is necessary. Perhaps a 3-state flag (try, on, off) with default=try, so people can disable it...",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-20T21:55:49Z",
      "diff_hunk" : "@@ -3022,6 +3011,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = CreateTransactionInternal(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204178714",
      "id" : 204178714,
      "in_reply_to_id" : 204168100,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDE3ODcxNA==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 162,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 139222346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204178714",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204209135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204209135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removing this. No harm in doing the try style later.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-21T11:55:24Z",
      "diff_hunk" : "@@ -3022,6 +3011,30 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n     return true;\n }\n \n+bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransactionRef& tx, CReserveKey& reservekey, CAmount& nFeeRet,\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+{\n+    int nChangePosIn = nChangePosInOut;\n+    CTransactionRef tx2 = tx;\n+    bool res = CreateTransactionInternal(vecSend, tx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coin_control, sign);\n+    // try with avoidpartialspends unless it's enabled already",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204209135",
      "id" : 204209135,
      "in_reply_to_id" : 204168100,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDIwOTEzNQ==",
      "original_commit_id" : "19bbab013860c84475cce98a55179a1167348269",
      "original_position" : 162,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 139256393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204209135",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204457524"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204457524"
         }
      },
      "author_association" : "MEMBER",
      "body" : "should we call these `insert`? I think it's a bit confusing for readability, as it implies the built-in std function is used in ways that the original one cannot be.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T15:59:38Z",
      "diff_hunk" : "@@ -355,4 +355,14 @@ std::string CopyrightHolders(const std::string& strPrefix);\n  */\n int ScheduleBatchPriority(void);\n \n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+void insert(Tdst& dst, const Tsrc& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204457524",
      "id" : 204457524,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDQ1NzUyNA==",
      "original_commit_id" : "84cf3f14b78ea6bbc49b6dfe497d831720763f52",
      "original_position" : 6,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 139542247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204457524",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204464838"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204464838"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what makes this different from\r\n```c++\r\nint m_input_bytes = -1;\r\n```\r\n(my guess is that it is the same, in which case I think that syntax is preferable because it is already used in so many places)",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T16:12:12Z",
      "diff_hunk" : "@@ -28,12 +28,20 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    {\n+        m_input_bytes = input_bytes;\n+    }\n+\n     COutPoint outpoint;\n     CTxOut txout;\n     CAmount effective_value;\n     CAmount fee = 0;\n     CAmount long_term_fee = 0;\n \n+    /** Pre-computed estimated size of this output as a fully-signed input in a transaction. Can be -1 if it could not be calculated */\n+    int m_input_bytes{-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204464838",
      "id" : 204464838,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDQ2NDgzOA==",
      "original_commit_id" : "7927a5d38ec139e4d2d3d413b10f2a9d696a6474",
      "original_position" : 16,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 139547545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204464838",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204472454"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204472454"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I was considering putting them under a `util::` namespace or somehing to emphasize they're actually not `std` but since we are no longer `using namespace std` it felt unnecessary. I'm up for renaming if it still feels confusing though.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T16:32:47Z",
      "diff_hunk" : "@@ -355,4 +355,14 @@ std::string CopyrightHolders(const std::string& strPrefix);\n  */\n int ScheduleBatchPriority(void);\n \n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+void insert(Tdst& dst, const Tsrc& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204472454",
      "id" : 204472454,
      "in_reply_to_id" : 204457524,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDQ3MjQ1NA==",
      "original_commit_id" : "84cf3f14b78ea6bbc49b6dfe497d831720763f52",
      "original_position" : 6,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 139555543,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204472454",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204475934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204475934"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It is the same. We already use this syntax in a variety of places. See e.g. \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7ebd8c6385253bfa30175169a22f93474d8ddfaf/src/wallet/wallet.h#L97-L101\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7ebd8c6385253bfa30175169a22f93474d8ddfaf/src/wallet/wallet.h#L674-L675\r\n",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T16:44:02Z",
      "diff_hunk" : "@@ -28,12 +28,20 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    {\n+        m_input_bytes = input_bytes;\n+    }\n+\n     COutPoint outpoint;\n     CTxOut txout;\n     CAmount effective_value;\n     CAmount fee = 0;\n     CAmount long_term_fee = 0;\n \n+    /** Pre-computed estimated size of this output as a fully-signed input in a transaction. Can be -1 if it could not be calculated */\n+    int m_input_bytes{-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204475934",
      "id" : 204475934,
      "in_reply_to_id" : 204464838,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDQ3NTkzNA==",
      "original_commit_id" : "7927a5d38ec139e4d2d3d413b10f2a9d696a6474",
      "original_position" : 16,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 139559689,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204475934",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204498056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204498056"
         }
      },
      "author_association" : "MEMBER",
      "body" : "okay! well then my only comment is that mixing the syntaxes in the same class looks inconsistent, but I don't care strongly",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T17:54:11Z",
      "diff_hunk" : "@@ -28,12 +28,20 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    {\n+        m_input_bytes = input_bytes;\n+    }\n+\n     COutPoint outpoint;\n     CTxOut txout;\n     CAmount effective_value;\n     CAmount fee = 0;\n     CAmount long_term_fee = 0;\n \n+    /** Pre-computed estimated size of this output as a fully-signed input in a transaction. Can be -1 if it could not be calculated */\n+    int m_input_bytes{-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204498056",
      "id" : 204498056,
      "in_reply_to_id" : 204464838,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDQ5ODA1Ng==",
      "original_commit_id" : "7927a5d38ec139e4d2d3d413b10f2a9d696a6474",
      "original_position" : 16,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 139586113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204498056",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204549758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204549758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Rather than use std::max, it seems like we could just sum the ancestor values -- that risks overcounting, but what's the downside?  I believe the goal of tracking this stuff is so that calls to SelectCoinsMinConf has a better chance of producing a transaction that passes the mempool chain limits, so if we err on the side of caution here I think that's just strictly better.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T20:51:16Z",
      "diff_hunk" : "@@ -298,3 +287,40 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    // m_ancestors is currently the max ancestor count for all coins in the group; however, this is\n+    // not ideal, as a wallet will consider e.g. thirty 2-ancestor coins as having two ancestors,\n+    // when in reality it has 60 ancestors.\n+    m_ancestors = std::max(m_ancestors, ancestors);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204549758",
      "id" : 204549758,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDU0OTc1OA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 242,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 242,
      "pull_request_review_id" : 139260405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T15:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204549758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204554549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204554549"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you meant `if (gmap[dst].m_outputs.size() == 10)`?  `gmap.count(dst)` should always be 0 or 1.\r\n\r\nAlso -- I'm not sure if there's some negative side effect from deterministically creating these subgroups of outputs.  Intuitively it seems safer to me if we randomly constructed these groups somehow to prevent someone from triggering some kind of coinselection issue by giving us coins that sort in a particular way.  But maybe this concern is overblown.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-23T21:08:38Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204554549",
      "id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDU1NDU0OQ==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 139260405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T15:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204554549",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204607747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204607747"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, hum. I actually thought the {} syntax was preferred and didn't fix the other stuff to avoid diff bloat.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-24T02:32:17Z",
      "diff_hunk" : "@@ -28,12 +28,20 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    {\n+        m_input_bytes = input_bytes;\n+    }\n+\n     COutPoint outpoint;\n     CTxOut txout;\n     CAmount effective_value;\n     CAmount fee = 0;\n     CAmount long_term_fee = 0;\n \n+    /** Pre-computed estimated size of this output as a fully-signed input in a transaction. Can be -1 if it could not be calculated */\n+    int m_input_bytes{-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204607747",
      "id" : 204607747,
      "in_reply_to_id" : 204464838,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDYwNzc0Nw==",
      "original_commit_id" : "7927a5d38ec139e4d2d3d413b10f2a9d696a6474",
      "original_position" : 16,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 139716598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204607747",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204632762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204632762"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I ended up moving into `util::` after all.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-24T06:07:12Z",
      "diff_hunk" : "@@ -355,4 +355,14 @@ std::string CopyrightHolders(const std::string& strPrefix);\n  */\n int ScheduleBatchPriority(void);\n \n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+void insert(Tdst& dst, const Tsrc& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204632762",
      "id" : 204632762,
      "in_reply_to_id" : 204457524,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDYzMjc2Mg==",
      "original_commit_id" : "84cf3f14b78ea6bbc49b6dfe497d831720763f52",
      "original_position" : 6,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 139744903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204632762",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204632965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204632965"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, actually, the other two lines are removed at the end as they are no longer needed.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-24T06:08:30Z",
      "diff_hunk" : "@@ -28,12 +28,20 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    {\n+        m_input_bytes = input_bytes;\n+    }\n+\n     COutPoint outpoint;\n     CTxOut txout;\n     CAmount effective_value;\n     CAmount fee = 0;\n     CAmount long_term_fee = 0;\n \n+    /** Pre-computed estimated size of this output as a fully-signed input in a transaction. Can be -1 if it could not be calculated */\n+    int m_input_bytes{-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r204632965",
      "id" : 204632965,
      "in_reply_to_id" : 204464838,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDYzMjk2NQ==",
      "original_commit_id" : "7927a5d38ec139e4d2d3d413b10f2a9d696a6474",
      "original_position" : 16,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 139745160,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-24T06:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/204632965",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-24T13:33:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#issuecomment-407408225",
      "id" : 407408225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNzQwODIyNQ==",
      "updated_at" : "2018-07-24T13:33:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/407408225",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206238572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206238572"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure it's a big risk, but I also think it's better to be safe than sorry. I envision a replacement of `push_back` with `insert(begin() + random(size())` (forgive pseudo-code-abbrev) in\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/4d550ffab64d79a44fcaa76f6e30c28f01614d3f/src/wallet/coinselection.cpp#L298\r\n\r\nWill make a PR unless someone beats me to it.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T16:31:04Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206238572",
      "id" : 206238572,
      "in_reply_to_id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjIzODU3Mg==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 141615050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T16:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206238572",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206239426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206239426"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, worst case the user has to wait for the inputs to confirm before they can spend them. (Is there a case where that could be a pontential problem? Can't think of one.)",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T16:33:56Z",
      "diff_hunk" : "@@ -298,3 +287,40 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    // m_ancestors is currently the max ancestor count for all coins in the group; however, this is\n+    // not ideal, as a wallet will consider e.g. thirty 2-ancestor coins as having two ancestors,\n+    // when in reality it has 60 ancestors.\n+    m_ancestors = std::max(m_ancestors, ancestors);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206239426",
      "id" : 206239426,
      "in_reply_to_id" : 204549758,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjIzOTQyNg==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 242,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 242,
      "pull_request_review_id" : 141616053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T16:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206239426",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206241468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206241468"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hm.. actually, that's not sufficient due to the capping at 10. I guess shuffling the entire vector at the top in `CWallet::GroupOutputs` is the way to go.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T16:40:21Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206241468",
      "id" : 206241468,
      "in_reply_to_id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjI0MTQ2OA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 141618511,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T16:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206241468",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206247858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206247858"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Adding shuffling in #13808. ~~I chose to put it in the `GroupOutputs` method since it can skip the shuffle for `is_single` and `size() <= 10` cases.~~ Moved outside, due to `const`ness.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T17:00:27Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206247858",
      "id" : 206247858,
      "in_reply_to_id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjI0Nzg1OA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 141626082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T17:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206247858",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206299150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206299150"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See #13812 ",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T19:51:27Z",
      "diff_hunk" : "@@ -298,3 +287,40 @@ bool KnapsackSolver(const CAmount& nTargetValue, std::vector<CInputCoin>& vCoins\n \n     return true;\n }\n+\n+/******************************************************************************\n+\n+ OutputGroup\n+\n+ ******************************************************************************/\n+\n+void OutputGroup::Insert(const CInputCoin& output, int depth, bool from_me, size_t ancestors, size_t descendants) {\n+    m_outputs.push_back(output);\n+    m_from_me &= from_me;\n+    m_value += output.effective_value;\n+    m_depth = std::min(m_depth, depth);\n+    // m_ancestors is currently the max ancestor count for all coins in the group; however, this is\n+    // not ideal, as a wallet will consider e.g. thirty 2-ancestor coins as having two ancestors,\n+    // when in reality it has 60 ancestors.\n+    m_ancestors = std::max(m_ancestors, ancestors);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206299150",
      "id" : 206299150,
      "in_reply_to_id" : 204549758,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjI5OTE1MA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 242,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 242,
      "pull_request_review_id" : 141689577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T19:51:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206299150",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206319728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206319728"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`gmap.count(dst) == 10` is always false and is not fixed in #13808.",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T21:00:21Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206319728",
      "id" : 206319728,
      "in_reply_to_id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjMxOTcyOA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 141714398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T21:00:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206319728",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206321748"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206321748"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's fixed in #13805",
      "commit_id" : "232f96f5c8a3920c09db92f4dbac2ad7d10ce8cf",
      "created_at" : "2018-07-30T21:07:09Z",
      "diff_hunk" : "@@ -4438,3 +4427,29 @@ void CWallet::LearnAllRelatedScripts(const CPubKey& key)\n     LearnRelatedScripts(key, OutputType::P2SH_SEGWIT);\n }\n \n+std::vector<OutputGroup> CWallet::GroupOutputs(const std::vector<COutput>& outputs, bool single_coin) const {\n+    std::vector<OutputGroup> groups;\n+    std::map<CTxDestination, OutputGroup> gmap;\n+    CTxDestination dst;\n+    for (const auto& output : outputs) {\n+        if (output.fSpendable) {\n+            CInputCoin input_coin = output.GetInputCoin();\n+\n+            size_t ancestors, descendants;\n+            mempool.GetTransactionAncestry(output.tx->GetHash(), ancestors, descendants);\n+            if (!single_coin && ExtractDestination(output.tx->tx->vout[output.i].scriptPubKey, dst)) {\n+                if (gmap.count(dst) == 10) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257#discussion_r206321748",
      "id" : 206321748,
      "in_reply_to_id" : 204554549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjMyMTc0OA==",
      "original_commit_id" : "43dcf1a71fd1b76b0bdc9eebb0b86431e5f7cde4",
      "original_position" : 165,
      "path" : "src/wallet/wallet.cpp",
      "position" : 165,
      "pull_request_review_id" : 141716934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257",
      "updated_at" : "2018-07-30T21:07:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/206321748",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   }
]
