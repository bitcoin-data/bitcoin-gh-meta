[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Needs an 0.16 tag.",
      "created_at" : "2018-01-25T02:23:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-360340271",
      "id" : 360340271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-25T02:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360340271",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12266#discussion_r163791819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163791819"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "static?",
      "commit_id" : "935f287a60566f1e4a5dbf05fd92bf248f82e7d8",
      "created_at" : "2018-01-25T09:43:18Z",
      "diff_hunk" : "@@ -155,7 +155,10 @@ class CCoinsViewErrorCatcher final : public CCoinsViewBacked\n static std::unique_ptr<CCoinsViewErrorCatcher> pcoinscatcher;\n static std::unique_ptr<ECCVerifyHandle> globalVerifyHandle;\n \n-void Interrupt(boost::thread_group& threadGroup)\n+boost::thread_group threadGroup;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#discussion_r163791819",
      "id" : 163791819,
      "original_commit_id" : "935f287a60566f1e4a5dbf05fd92bf248f82e7d8",
      "original_position" : 5,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 91460587,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12266",
      "updated_at" : "2018-01-25T09:45:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163791819",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12266#discussion_r163792108"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163792108"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "static?",
      "commit_id" : "935f287a60566f1e4a5dbf05fd92bf248f82e7d8",
      "created_at" : "2018-01-25T09:44:33Z",
      "diff_hunk" : "@@ -155,7 +155,10 @@ class CCoinsViewErrorCatcher final : public CCoinsViewBacked\n static std::unique_ptr<CCoinsViewErrorCatcher> pcoinscatcher;\n static std::unique_ptr<ECCVerifyHandle> globalVerifyHandle;\n \n-void Interrupt(boost::thread_group& threadGroup)\n+boost::thread_group threadGroup;\n+CScheduler scheduler;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#discussion_r163792108",
      "id" : 163792108,
      "original_commit_id" : "935f287a60566f1e4a5dbf05fd92bf248f82e7d8",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 91460587,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12266",
      "updated_at" : "2018-01-25T09:45:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163792108",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Since the scheduler is going to need a proper Interrupt/Shutdown before dropping the threadGroup anyway, can we just take this opportunity to create those? Then we could just skip the threadGroup.interrupt_all(), and the .join_all() would finish immediately.\r\n\r\nThat would be much easier to review, IMO, because it makes the scheduler's teardown procedure explicit.",
      "created_at" : "2018-01-26T23:36:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-360934783",
      "id" : 360934783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-26T23:36:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360934783",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> Then we could just skip the threadGroup.interrupt_all(), and the .join_all() would finish immediately.\r\n\r\nRight - the longer term plan is to rid of 'threadgroup' completely, by giving each 'module' its own Interrupt/Shutdown.\r\n\r\nBut more often than not, changes to shutdown introduced new problems. I think this is very risky to do this last minute for 0.16.\r\n\r\nIs there a more minimalistic, easy to review fix for #12229 that we can do for 0.16, then leave the refactors for 0.17?",
      "created_at" : "2018-01-28T08:49:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361047434",
      "id" : 361047434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-28T08:49:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361047434",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that threadGroup is *only* used for scheduler and checkqueue, I'd strongly object to this being more than a rather-minimalistic change. The \"obvious, minimalistic\" change is to keep the scheduler running until after CConnman has been Stop()ed, which this does, the only additional thing is it keeps the checkqueue running, which is a rather trivial change.",
      "created_at" : "2018-01-29T14:19:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361259054",
      "id" : 361259054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-29T14:19:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361259054",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> But more often than not, changes to shutdown introduced new problems. I think this is very risky to do this last minute for 0.16.\r\n\r\nAgree.\r\n\r\nIs there a way I can reproduce the issue?",
      "created_at" : "2018-01-29T21:37:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361394983",
      "id" : 361394983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-29T21:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361394983",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I discussed with @TheBlueMatt on IRC and now I think this is very straightforward - there's not much left using the thread group (only the scheduler and checkqueue), and anything that removes the global thread group will also need the changes to remove the arguments. So it's a step forward in that regard.\r\n\r\nSo utACK 082a61c69d7a539b5a48c4376a657f1c5aa92d81",
      "created_at" : "2018-01-30T08:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361519571",
      "id" : 361519571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-30T08:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361519571",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not too familiar with the thread management but this looks straightforward enough for me to at least give a concept ACK / tentative utACK https://github.com/bitcoin/bitcoin/pull/12266/commits/082a61c69d7a539b5a48c4376a657f1c5aa92d81",
      "created_at" : "2018-01-30T11:09:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361560897",
      "id" : 361560897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-30T11:09:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361560897",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "posthumous utACK",
      "created_at" : "2018-01-30T14:48:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12266#issuecomment-361615620",
      "id" : 361615620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12266",
      "updated_at" : "2018-01-30T14:48:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/361615620",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
