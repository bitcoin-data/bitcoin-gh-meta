{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "This PR adds an optional (off by default) `-avoidpartialspends` flag, which changes coin select to use output groups rather than outputs, where each output group corresponds to all outputs with the same destination.\r\n\r\nIt is a privacy improvement, as each time you spend some output, any other output that is publicly associated with the destination (address) will also be spent at the same time, at the cost of fee increase for cases where coin select without group restriction would find a more optimal set of coins (see example below).\r\n\r\nFor regular use without address reuse, this PR should have no effect on the user experience whatsoever; it only affects users who, for some reason, have multiple outputs with the same destination (i.e. address reuse).\r\n\r\nNodes with this turned off will still try to avoid partial spending, if the fee of the resulting transaction is not greater than the fee of the original transaction.\r\n\r\nExample: a node has four outputs linked to two addresses `A` and `B`:\r\n\r\n* 1.0 btc to `A`\r\n* 0.5 btc to `A`\r\n* 1.0 btc to `B`\r\n* 0.5 btc to `B`\r\n\r\nThe node sends 0.2 btc to `C`. Without `-avoidpartialspends`, the following coin selection will occur:\r\n* 0.5 btc to `A` or `B` is picked\r\n* 0.2 btc is output to `C`\r\n* 0.3 - fee is output to (unique change address)\r\n\r\nWith `-avoidpartialspends`, the following will instead happen:\r\n* Both of (0.5, 1.0) btc to `A` or `B` is picked (one or the other pair)\r\n* 0.2 btc is output to `C`\r\n* 1.3 - fee is output to (unique change address)\r\n\r\nAs noted, the pro here is that, assuming nobody sends to the address after you spend from it, you will only ever use one address once. The con is that the transaction becomes slightly larger in this case, because it is overpicking outputs to adhere to the no partial spending rule.\r\n\r\nThis complements #10386, in particular it addresses @luke-jr and @gmaxwell's concerns in https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-300667926 and https://github.com/bitcoin/bitcoin/pull/10386#issuecomment-302361381.\r\n\r\nTogether with `-avoidreuse`, this fully addresses the concerns in #10065 I believe.\r\n",
   "closed_at" : "2018-07-24T14:34:56Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 20,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257/comments",
   "created_at" : "2018-01-24T07:16:17Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257",
   "id" : 291106758,
   "labels" : [
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MTY0NzcyODI1",
   "number" : 12257,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/12257.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12257",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/12257.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12257"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[wallet] Use destination groups instead of coins in coin select",
   "updated_at" : "2019-06-19T18:03:01Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12257",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
      "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
      "followers_url" : "https://api.github.com/users/kallewoof/followers",
      "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/kallewoof",
      "id" : 250224,
      "login" : "kallewoof",
      "node_id" : "MDQ6VXNlcjI1MDIyNA==",
      "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
      "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
      "repos_url" : "https://api.github.com/users/kallewoof/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/kallewoof"
   }
}
