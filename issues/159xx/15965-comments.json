[
   {
      "author_association" : "NONE",
      "body" : "How to add Test label to this PR? Do I need permission?",
      "created_at" : "2019-05-06T20:19:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-489761586",
      "id" : 489761586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTc2MTU4Ng==",
      "updated_at" : "2019-05-06T20:19:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489761586",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/47063555?v=4",
         "events_url" : "https://api.github.com/users/zenosage/events{/privacy}",
         "followers_url" : "https://api.github.com/users/zenosage/followers",
         "following_url" : "https://api.github.com/users/zenosage/following{/other_user}",
         "gists_url" : "https://api.github.com/users/zenosage/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/zenosage",
         "id" : 47063555,
         "login" : "zenosage",
         "node_id" : "MDQ6VXNlcjQ3MDYzNTU1",
         "organizations_url" : "https://api.github.com/users/zenosage/orgs",
         "received_events_url" : "https://api.github.com/users/zenosage/received_events",
         "repos_url" : "https://api.github.com/users/zenosage/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/zenosage/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/zenosage/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/zenosage"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-05-06T20:42:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-489769132",
      "id" : 489769132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTc2OTEzMg==",
      "updated_at" : "2019-05-06T20:42:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489769132",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-05-09T02:02:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-490714417",
      "id" : 490714417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDcxNDQxNw==",
      "updated_at" : "2019-07-27T11:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490714417",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure what the goal here is, but I think there may be a misunderstanding -- there should be no logical difference between the failure you're changing and the one above it.  Note the comment above, specifically: \r\n```\r\n         * In any case D3 will also be marked as BLOCK_FAILED_CHILD at restart\r\n         * in LoadBlockIndex.\t      \r\n```\r\n\r\nSo I think the code is correct as-is.",
      "created_at" : "2019-05-17T01:11:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-493282932",
      "id" : 493282932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzI4MjkzMg==",
      "updated_at" : "2019-05-17T01:11:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493282932",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Goal is debugging and understanding. I can not determine which section of code is throwing the same error. This is a design flaw I think?  If there is no logical difference between this and above, then why duplicate logic?",
      "created_at" : "2019-05-22T16:11:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-494870362",
      "id" : 494870362,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDg3MDM2Mg==",
      "updated_at" : "2019-05-22T16:11:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494870362",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/47063555?v=4",
         "events_url" : "https://api.github.com/users/zenosage/events{/privacy}",
         "followers_url" : "https://api.github.com/users/zenosage/followers",
         "following_url" : "https://api.github.com/users/zenosage/following{/other_user}",
         "gists_url" : "https://api.github.com/users/zenosage/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/zenosage",
         "id" : 47063555,
         "login" : "zenosage",
         "node_id" : "MDQ6VXNlcjQ3MDYzNTU1",
         "organizations_url" : "https://api.github.com/users/zenosage/orgs",
         "received_events_url" : "https://api.github.com/users/zenosage/received_events",
         "repos_url" : "https://api.github.com/users/zenosage/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/zenosage/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/zenosage/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/zenosage"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The goal of the logic you're looking at is to determine whether a new block descends from an invalid one.  This is complex due to the intricacies of how block validation occurs.\r\n\r\nIf the direct parent of a new block is known to be invalid, then that is detected immediately in this chunk of code:\r\n```\r\nif (pindexPrev->nStatus & BLOCK_FAILED_MASK)\r\n            return state.Invalid(ValidationInvalidReason::BLOCK_INVALID_PREV, error(\"%s: prev block invalid\", __func__), REJECT_INVALID, \"bad-prevblk\");\t\r\n```\r\n\r\nHowever, as explained in the comment directly above the code you're changing, there are situations where the parent of a block may descend from some other known-invalid block, but the parent itself has not yet been validated and so is not yet marked as invalid.  This code that loops through `m_failed_blocks` looking for an invalid ancestor is for this case.  Logically, this is no different than the direct parent being invalid but not yet having been marked as such.",
      "created_at" : "2019-05-22T16:51:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-494884716",
      "id" : 494884716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDg4NDcxNg==",
      "updated_at" : "2019-05-22T16:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494884716",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "My understanding is this:\r\nIf node has continuous chain of headers A -> ... -> D -> ... -> Z so that D is invalid, all block after D will hit first case.\r\nIf node does not has continuous chain of headers A and D only and D is invalid blocks after D will hit second case.\r\n\r\nYour logic is this:\r\nBoth cases is bad previous block so treat error message and code the same.  This is despite different checks.\r\n\r\nDo I have that correct?",
      "created_at" : "2019-06-22T00:09:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-504608315",
      "id" : 504608315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDYwODMxNQ==",
      "updated_at" : "2019-06-22T00:09:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504608315",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/47063555?v=4",
         "events_url" : "https://api.github.com/users/zenosage/events{/privacy}",
         "followers_url" : "https://api.github.com/users/zenosage/followers",
         "following_url" : "https://api.github.com/users/zenosage/following{/other_user}",
         "gists_url" : "https://api.github.com/users/zenosage/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/zenosage",
         "id" : 47063555,
         "login" : "zenosage",
         "node_id" : "MDQ6VXNlcjQ3MDYzNTU1",
         "organizations_url" : "https://api.github.com/users/zenosage/orgs",
         "received_events_url" : "https://api.github.com/users/zenosage/received_events",
         "repos_url" : "https://api.github.com/users/zenosage/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/zenosage/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/zenosage/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/zenosage"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is first case redundant? Just a optimization?",
      "created_at" : "2019-06-22T00:13:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-504608819",
      "id" : 504608819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNDYwODgxOQ==",
      "updated_at" : "2019-06-22T00:13:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504608819",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/47063555?v=4",
         "events_url" : "https://api.github.com/users/zenosage/events{/privacy}",
         "followers_url" : "https://api.github.com/users/zenosage/followers",
         "following_url" : "https://api.github.com/users/zenosage/following{/other_user}",
         "gists_url" : "https://api.github.com/users/zenosage/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/zenosage",
         "id" : 47063555,
         "login" : "zenosage",
         "node_id" : "MDQ6VXNlcjQ3MDYzNTU1",
         "organizations_url" : "https://api.github.com/users/zenosage/orgs",
         "received_events_url" : "https://api.github.com/users/zenosage/received_events",
         "repos_url" : "https://api.github.com/users/zenosage/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/zenosage/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/zenosage/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/zenosage"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this PR, there's no agreement to change this, it looks more like a question.",
      "created_at" : "2019-08-29T13:38:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15965#issuecomment-526189374",
      "id" : 526189374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15965",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjE4OTM3NA==",
      "updated_at" : "2019-08-29T13:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526189374",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
