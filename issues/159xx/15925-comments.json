[
   {
      "author_association" : "MEMBER",
      "body" : "Reducing the usage of the `cs_main` lock is desirable. Though your approach \"only\" focuses on increasing the concurrency efficiency.\r\n\r\nIMO the JSON RPC interface is not made for efficiency.\r\n\r\nIf you seek fast block fetches, you are much better off with using a) **the p2p API** or b) **the REST API** with binary or at least hex encoding.",
      "created_at" : "2019-04-30T06:13:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-487831407",
      "id" : 487831407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzgzMTQwNw==",
      "updated_at" : "2019-04-30T06:13:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487831407",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If you seek fast block fetches, you are much better off with using a) the p2p API or b) the REST API with binary or at least hex encoding.\r\n\r\nThis is good advice, but it's still interesting to know how time is being spent in the RPC, and I don't think we'd reject a simple PR optimizing it.",
      "created_at" : "2019-04-30T14:39:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-487978488",
      "id" : 487978488,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4Nzk3ODQ4OA==",
      "updated_at" : "2019-04-30T14:39:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487978488",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So JSON serialization takes around 10 times more than loading the block? Ã°ÂÂÂ\r\n\r\nEdit: I'd say `getblock` can be optimized for concurrency (#15932 by @MarcoFalke Ã°ÂÂÂ) and for efficiency (TODO?).",
      "created_at" : "2019-05-02T19:22:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-488798951",
      "id" : 488798951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODc5ODk1MQ==",
      "updated_at" : "2019-05-02T19:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488798951",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, could be the typical o2 complexity thing with univalue?",
      "created_at" : "2019-05-02T19:53:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-488809153",
      "id" : 488809153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODgwOTE1Mw==",
      "updated_at" : "2019-05-02T19:53:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488809153",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Adding UniValue functions with move semantics/rvalue refs would help a lot...",
      "created_at" : "2019-05-02T20:04:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-488812697",
      "id" : 488812697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODgxMjY5Nw==",
      "updated_at" : "2019-05-02T20:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488812697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Yeah, could be the typical o2 complexity thing with univalue?\r\n\r\nI don't think it's the case here.",
      "created_at" : "2019-05-02T20:31:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-488821806",
      "id" : 488821806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODgyMTgwNg==",
      "updated_at" : "2019-05-02T20:31:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488821806",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Keeping this open since translating to json takes 100ms, which seems a bit extreme.",
      "created_at" : "2019-05-03T12:14:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-489075366",
      "id" : 489075366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTA3NTM2Ng==",
      "updated_at" : "2019-05-03T12:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489075366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Adding UniValue functions with move semantics/rvalue refs would help a lot...\r\n\r\nSounds good to me",
      "created_at" : "2019-05-07T15:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-490126995",
      "id" : 490126995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDEyNjk5NQ==",
      "updated_at" : "2019-05-07T15:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490126995",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/494411?v=4",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "node_id" : "MDQ6VXNlcjQ5NDQxMQ==",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just to have some idea of what's going on with `blockToJSON`, this is a rough (some of the fields are commented) benchmark with block 413567.\r\n![Screenshot 2019-05-07 at 16 40 33](https://user-images.githubusercontent.com/3534524/57313149-e2b7dc00-70e6-11e9-80fa-8b18c4766650.png)\r\nBTW, this was taken with some `std::moves` already implemented.\r\n\r\n(running a not-yet-pushed `BENCHMARK(BlockToJSON, 40)`)",
      "created_at" : "2019-05-07T15:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-490135729",
      "id" : 490135729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDEzNTcyOQ==",
      "updated_at" : "2019-05-07T15:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490135729",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag can you show you code for `BENCHMARK(BlockToJSON, 40)`? Thank you in advance!",
      "created_at" : "2019-06-19T14:33:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-503587313",
      "id" : 503587313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzU4NzMxMw==",
      "updated_at" : "2019-06-19T14:33:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503587313",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/2633065?v=4",
         "events_url" : "https://api.github.com/users/fanatid/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanatid/followers",
         "following_url" : "https://api.github.com/users/fanatid/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanatid/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanatid",
         "id" : 2633065,
         "login" : "fanatid",
         "node_id" : "MDQ6VXNlcjI2MzMwNjU=",
         "organizations_url" : "https://api.github.com/users/fanatid/orgs",
         "received_events_url" : "https://api.github.com/users/fanatid/received_events",
         "repos_url" : "https://api.github.com/users/fanatid/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanatid/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanatid/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanatid"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanatid sorry I've missed your comment ð thanks for the pull request!",
      "created_at" : "2019-06-24T13:40:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-505014311",
      "id" : 505014311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNTAxNDMxMQ==",
      "updated_at" : "2019-06-24T13:40:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505014311",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this for now. Translating to json is inherently more expensive than serving the raw block, but as you realized, with the cs_main lock removed, at least it can be done in parallel.",
      "created_at" : "2020-05-06T16:25:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15925#issuecomment-624751026",
      "id" : 624751026,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15925",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDc1MTAyNg==",
      "updated_at" : "2020-05-06T16:25:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624751026",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
