[
   {
      "body" : "Refactored, after conversation with gmaxwell on #bitcoin-dev.\r\n\r\nDefault of whiteconnections is now 4 (if user isn't using whitelist feature at all, default is 0).\r\n\r\nNow acts to essentially reserve slots for exclusive use by whitelisted peers, against the given maxconnections limit, instead of increasing the maxconnections limit.\r\n\r\nWarning message given if whiteconnections value is so high that it will reserve all inbound slots, preventing any non-whitelisted peer from ever being able to connect.\r\n\r\nIf user has not given a maxconnections value, then as a special case it adds the value of whiteconnections to the default for maxconnections.  This is to avoid establishing a new default which would inadvertently reduce the number of incoming slots available for public (non-whitelisted) use.  With the popularity of SPV wallets these days, incoming slots on full nodes are a rather precious resource.\r\n\r\nThis whiteconnections feature is rather nice, especially for long-lived full nodes which reach their capacity of inbound connections.  Now, you don't have to restart your node whenever you restart your miner, just to free up a slot so that your miner can get in!\r\n",
      "created_at" : "2014-11-18T07:33:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-63432405",
      "id" : 63432405,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2014-11-18T07:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63432405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r20504680"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20504680"
         }
      },
      "body" : "Can you add a comment here saying that this number is the *reserved* number of connections for white connections?",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2014-11-18T13:34:56Z",
      "diff_hunk" : "@@ -122,6 +122,7 @@ extern uint64_t nLocalServices;\n extern uint64_t nLocalHostNonce;\n extern CAddrMan addrman;\n extern int nMaxConnections;\n+extern int nWhiteConnections;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r20504680",
      "id" : 20504680,
      "original_commit_id" : "46a74678961747b57cba926fc84f525ce862d8c4",
      "original_position" : 4,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-05-26T08:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20504680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Tested that whitelisted connections are restricted to the whitelisted reserved count, and that the implicit + 4 without specified -maxconnections works as intended.",
      "created_at" : "2014-11-18T13:43:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-63472172",
      "id" : 63472172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2014-11-18T13:43:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63472172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Thanks, sipa, I added a comment showing some of the theory of operation behind nMaxConnections and nWhiteConnections.\r\n",
      "created_at" : "2014-11-19T07:43:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-63603056",
      "id" : 63603056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2014-11-19T07:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63603056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Rebased against the latest, no changes were necessary :)\r\n",
      "created_at" : "2014-12-28T00:09:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-68194228",
      "id" : 68194228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2014-12-28T00:09:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68194228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r23922567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/23922567"
         }
      },
      "body" : "Could you update this to use our doxygen comment format.",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2015-02-02T12:57:44Z",
      "diff_hunk" : "@@ -123,7 +123,17 @@ extern bool fListen;\n extern uint64_t nLocalServices;\n extern uint64_t nLocalHostNonce;\n extern CAddrMan addrman;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r23922567",
      "id" : 23922567,
      "original_commit_id" : "910d9a84076a009621e4d01200a31c3cdb2123a8",
      "original_position" : 4,
      "path" : "src/net.h",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-05-26T08:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/23922567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "Thanks, will update it.\r\n",
      "created_at" : "2015-02-09T20:52:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-73587616",
      "id" : 73587616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-02-09T20:52:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73587616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "utAck. Is the pending update keeping the merge up?",
      "created_at" : "2015-03-11T07:04:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-78214593",
      "id" : 78214593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-11T07:04:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78214593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "Yikes!  Forgot about this.  Will update ASAP.\r\n",
      "created_at" : "2015-03-11T09:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-78227631",
      "id" : 78227631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-11T09:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78227631",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "There, got it merged with latest master, and made the requested documentation cleanup changes!\r\n\r\nThe Travis build still fails for the \"no wallet\" case, but the same thing happens right now for the latest upstream master....\r\n",
      "created_at" : "2015-03-12T09:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-78449971",
      "id" : 78449971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-12T09:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78449971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "No code change, just rebased with latest master to pick up the Travis build fix.\r\n",
      "created_at" : "2015-03-12T18:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-78550869",
      "id" : 78550869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-12T18:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78550869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Thanks!",
      "created_at" : "2015-03-12T22:28:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-78658519",
      "id" : 78658519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-12T22:28:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/78658519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r26663550"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26663550"
         }
      },
      "body" : "What if the user is using `whitebind` instead? ",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2015-03-18T13:49:08Z",
      "diff_hunk" : "@@ -668,7 +668,29 @@ bool AppInit2(boost::thread_group& threadGroup)\n \n     // Make sure enough file descriptors are available\n     int nBind = std::max((int)mapArgs.count(\"-bind\") + (int)mapArgs.count(\"-whitebind\"), 1);\n-    nMaxConnections = GetArg(\"-maxconnections\", 125);\n+    int nUserMaxConnections = GetArg(\"-maxconnections\", 125);\n+    nMaxConnections = std::max(nUserMaxConnections, 0);\n+    int nUserWhiteConnections = GetArg(\"-whiteconnections\", 4);\n+    nWhiteConnections = std::max(nUserWhiteConnections, 0);\n+\n+    if (mapArgs.count(\"-whitelist\")) {\n+        if (!(mapArgs.count(\"-maxconnections\"))) {\n+            // User is using whitelist feature,\n+            // but did not specify -maxconnections parameter.\n+            // Silently increase the default to compensate,\n+            // so that the whitelist connection reservation feature\n+            // does not inadvertently reduce the default\n+            // inbound connection capacity of the network.\n+            nMaxConnections += nWhiteConnections;\n+        }\n+    } else {\n+        // User not using whitelist feature.\n+        // Silently disable connection reservation,\n+        // for the same reason as above.\n+        nWhiteConnections = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r26663550",
      "id" : 26663550,
      "original_commit_id" : "55b94ad23fbd56647f5dafe8f08eeec1412b9fa0",
      "original_position" : 33,
      "path" : "src/init.cpp",
      "position" : 52,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-05-26T08:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26663550",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Good to point out!  I will change it so that the \"User is using whitelist feature\" test matches on either `-whitelist` or `-whitebind` options.\r\n",
      "created_at" : "2015-03-18T22:32:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-83210357",
      "id" : 83210357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-18T22:35:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83210357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "There, updated it as described (both `whitelist` and `whitebind` will work to trigger the nMaxConnections fixup).  Also rebased against latest master.\r\n",
      "created_at" : "2015-03-18T23:30:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-83223897",
      "id" : 83223897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-18T23:30:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83223897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r26749341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26749341"
         }
      },
      "body" : "This inner `if()` seems a bit overcomplicated. I think this addition should either be always done (when whitelisting is used), or never at all. To me it doesn't hold up to the principle of least surprise to do this only to the default `-maxconnections` but not when the user provides one. Too much parameter interaction...\r\n",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2015-03-19T12:37:02Z",
      "diff_hunk" : "@@ -668,7 +668,29 @@ bool AppInit2(boost::thread_group& threadGroup)\n \n     // Make sure enough file descriptors are available\n     int nBind = std::max((int)mapArgs.count(\"-bind\") + (int)mapArgs.count(\"-whitebind\"), 1);\n-    nMaxConnections = GetArg(\"-maxconnections\", 125);\n+    int nUserMaxConnections = GetArg(\"-maxconnections\", 125);\n+    nMaxConnections = std::max(nUserMaxConnections, 0);\n+    int nUserWhiteConnections = GetArg(\"-whiteconnections\", 4);\n+    nWhiteConnections = std::max(nUserWhiteConnections, 0);\n+\n+    if ((mapArgs.count(\"-whitelist\")) || (mapArgs.count(\"-whitebind\"))) {\n+        if (!(mapArgs.count(\"-maxconnections\"))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r26749341",
      "id" : 26749341,
      "original_commit_id" : "d7fcdd03d835d42553a5929898781409ca8448a6",
      "original_position" : 20,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-05-26T08:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26749341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I thought about that as well, during initial implementation thoughts over IRC.  Talked about it with a few others.  Tried to avoid surprise and unintended behavior as best as possible, and this was a compromise.\r\n\r\nIf the increase was done always, then it would be surprising to the user, because it would look like we were blatantly disobeying their given `maxconnections` limit.\r\n\r\nIf user doesn't provide `maxconnections` at all, then the thinking was that they wouldn't care as much, therefore we could get away with doing the increase.  We definitely do want to do the increase, as mentioned in the comments, to avoid reducing connection capacity of the Bitcoin network.\r\n\r\nSo, there's thinking that went into both sides of this decision.\r\n",
      "created_at" : "2015-03-20T06:33:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-83933430",
      "id" : 83933430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-20T06:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83933430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Changing from utAck to tAck.",
      "created_at" : "2015-03-24T21:59:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-85710314",
      "id" : 85710314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-03-24T21:59:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85710314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "I am not sure what's been keeping the PR open?",
      "created_at" : "2015-04-21T23:11:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-94968580",
      "id" : 94968580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-21T23:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/94968580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "I'm not sure either.  I'm hoping there is no issue preventing this from being merged.\r\n",
      "created_at" : "2015-04-22T01:30:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-94993476",
      "id" : 94993476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-22T01:30:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/94993476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Trivial change to keep up with latest upstream.\r\n",
      "created_at" : "2015-04-25T07:33:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-96145882",
      "id" : 96145882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-25T07:33:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96145882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "@Krellan There are several unaddressed comments?",
      "created_at" : "2015-04-26T21:25:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-96436732",
      "id" : 96436732,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-26T21:25:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96436732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Which comments? Thought I addressed all concerns.\r\n",
      "created_at" : "2015-04-26T21:38:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-96438102",
      "id" : 96438102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-26T21:38:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96438102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Sorry, I missed that you answered in the PR rather than on the commits.\r\n",
      "created_at" : "2015-04-26T21:41:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-96438224",
      "id" : 96438224,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-26T21:41:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96438224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The \"increase the maxconnections if not specified, don't if it is\" is fine, I think, but I wonder if the -whiteconnections default = 4 is needed. An existing user of one of the white* features won't expect a change in behaviour.\r\n\r\nI wonder if this isn't a concise way to specify it:\r\n* -whiteconnections defaults to 0, no matter what\r\n* -maxconnections defaults to 125 + [-whiteconnections] (or whatever the FD limit permits)\r\n\r\nSeems easier to explain, and wouldn't violate the least surprise principle either?",
      "created_at" : "2015-04-27T12:27:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-96631501",
      "id" : 96631501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-04-27T12:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96631501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Good point.  I will make it default to 0 instead of 4, so that the default behavior is to change nothing at all.\r\n",
      "created_at" : "2015-05-08T06:35:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-100117930",
      "id" : 100117930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-05-08T06:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100117930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "There, as requested, changed the default from 4 to 0.  Made no other code changes, just these constants.  Also rebased to latest upstream.\r\n\r\nSo, the behavior is now unchanged, by default.  If the user wants the benefit of reserved slots for their whitelisted incoming connections, they will have to explicitly specify how many slots they want to reserve.\r\n",
      "created_at" : "2015-05-26T09:03:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-105456746",
      "id" : 105456746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-05-26T09:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105456746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r32323832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32323832"
         }
      },
      "body" : "Slightly preferred for readability:\r\n```c++\r\nnMaxConnections = std::min(nFD - MIN_CORE_FILEDESCRIPTORS, nMaxConnections);\r\n```",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2015-06-12T15:08:10Z",
      "diff_hunk" : "@@ -720,6 +710,48 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n         }\n #endif\n     }\n+    \n+    // Make sure enough file descriptors are available\n+    int nBind = std::max((int)mapArgs.count(\"-bind\") + (int)mapArgs.count(\"-whitebind\"), 1);\n+    int nUserMaxConnections = GetArg(\"-maxconnections\", 125);\n+    nMaxConnections = std::max(nUserMaxConnections, 0);\n+    int nUserWhiteConnections = GetArg(\"-whiteconnections\", 0);\n+    nWhiteConnections = std::max(nUserWhiteConnections, 0);\n+\n+    if ((mapArgs.count(\"-whitelist\")) || (mapArgs.count(\"-whitebind\"))) {\n+        if (!(mapArgs.count(\"-maxconnections\"))) {\n+            // User is using whitelist feature,\n+            // but did not specify -maxconnections parameter.\n+            // Silently increase the default to compensate,\n+            // so that the whitelist connection reservation feature\n+            // does not inadvertently reduce the default\n+            // inbound connection capacity of the network.\n+            nMaxConnections += nWhiteConnections;\n+        }\n+    } else {\n+        // User not using whitelist feature.\n+        // Silently disable connection reservation,\n+        // for the same reason as above.\n+        nWhiteConnections = 0;\n+    }\n+\n+    // Trim requested connection counts, to fit into system limitations\n+    nMaxConnections = std::max(std::min(nMaxConnections, (int)(FD_SETSIZE - nBind - MIN_CORE_FILEDESCRIPTORS)), 0);\n+    int nFD = RaiseFileDescriptorLimit(nMaxConnections + MIN_CORE_FILEDESCRIPTORS);\n+    if (nFD < MIN_CORE_FILEDESCRIPTORS)\n+        return InitError(_(\"Not enough file descriptors available.\"));\n+    if (nFD - MIN_CORE_FILEDESCRIPTORS < nMaxConnections)\n+        nMaxConnections = nFD - MIN_CORE_FILEDESCRIPTORS;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r32323832",
      "id" : 32323832,
      "original_commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "original_position" : 61,
      "path" : "src/init.cpp",
      "position" : 61,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-06-12T15:08:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32323832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r32324045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32324045"
         }
      },
      "body" : "It's not easy to integrate a 'floating' comment like this into doxygen.\r\nOne way would be to group nMaxConnections and nWhiteConnections using `@{` `@}` and add it as doxygen comment of the group.",
      "commit_id" : "40dc4a7ea8e25ab36d2e5ea69675379806818b31",
      "created_at" : "2015-06-12T15:10:16Z",
      "diff_hunk" : "@@ -123,7 +123,17 @@ extern bool fListen;\n extern uint64_t nLocalServices;\n extern uint64_t nLocalHostNonce;\n extern CAddrMan addrman;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#discussion_r32324045",
      "id" : 32324045,
      "original_commit_id" : "910d9a84076a009621e4d01200a31c3cdb2123a8",
      "original_position" : 4,
      "path" : "src/net.h",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5288",
      "updated_at" : "2015-06-12T15:10:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32324045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK apart from nit (but needs rebase)",
      "created_at" : "2015-06-12T15:10:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-111521695",
      "id" : 111521695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-06-12T15:10:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111521695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased.\r\n",
      "created_at" : "2015-06-14T08:57:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-111801503",
      "id" : 111801503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-06-14T08:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111801503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Addressed the nit, good catch.\r\n\r\nAlso found another place where the default was still 4, changed to 0.\r\n",
      "created_at" : "2015-06-14T09:20:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-111805734",
      "id" : 111805734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-06-14T09:20:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111805734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4563817?v=3",
         "events_url" : "https://api.github.com/users/Krellan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Krellan/followers",
         "following_url" : "https://api.github.com/users/Krellan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Krellan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Krellan",
         "id" : 4563817,
         "login" : "Krellan",
         "organizations_url" : "https://api.github.com/users/Krellan/orgs",
         "received_events_url" : "https://api.github.com/users/Krellan/received_events",
         "repos_url" : "https://api.github.com/users/Krellan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Krellan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Krellan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Krellan"
      }
   },
   {
      "body" : "Untested ACK",
      "created_at" : "2015-06-14T13:06:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5288#issuecomment-111825011",
      "id" : 111825011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5288",
      "updated_at" : "2015-06-14T13:06:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111825011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
