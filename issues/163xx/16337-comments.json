[
   {
      "author_association" : "MEMBER",
      "body" : "Looks like a race with a destructor of a derived class",
      "created_at" : "2019-07-08T21:22:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-509397217",
      "id" : 509397217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwOTM5NzIxNw==",
      "updated_at" : "2019-07-08T21:22:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/509397217",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hmm, maybe not. Does this happen with a sanitizer enabled?",
      "created_at" : "2019-07-08T21:24:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-509397629",
      "id" : 509397629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwOTM5NzYyOQ==",
      "updated_at" : "2019-07-08T21:24:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/509397629",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke This happens without any sanitiser enabled.\r\n\r\nFWIW I hit the case today again:\r\n\r\n```\r\nRunning 15 test cases...\r\ntest/blockfilter_index_tests.cpp(149): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": critical check time_start + timeout_ms > GetTimeMillis() has failed\r\npure virtual method called\r\nterminate called without an active exception\r\nunknown location(0): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": signal: SIGABRT (application abort requested)\r\ntest/blockfilter_index_tests.cpp(149): last checkpoint\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\ntest_bitcoin: /usr/include/boost/thread/pthread/condition_variable_fwd.hpp:116: boost::condition_variable::~condition_variable(): Assertion `!ret' failed.\r\n```",
      "created_at" : "2019-07-30T10:03:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-516354199",
      "id" : 516354199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjM1NDE5OQ==",
      "updated_at" : "2019-07-30T10:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516354199",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So the underlying issue is that it times out.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/53b5a4f7eca9a445266de0f0dc127a76dd36e25d/src/test/blockfilter_index_tests.cpp#L140-L152",
      "created_at" : "2019-07-30T12:01:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-516388897",
      "id" : 516388897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjM4ODg5Nw==",
      "updated_at" : "2019-07-30T12:03:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516388897",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "created_at" : "2020-04-27T01:06:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-619656385",
      "id" : 619656385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTY1NjM4NQ==",
      "updated_at" : "2020-04-27T01:06:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619656385",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Still happening:\r\n\r\n* https://travis-ci.org/github/bitcoin/bitcoin/jobs/687094666#L3207",
      "created_at" : "2020-05-14T23:39:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-628941918",
      "id" : 628941918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyODk0MTkxOA==",
      "updated_at" : "2020-05-14T23:39:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628941918",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke If you want to be able to hit this condition deterministically you can use `rr`'s chaos mode. It is gold for finding intermittent issues in test cases. I've never heard it discussed by other Core contributors but I use it extensively :)",
      "created_at" : "2020-05-15T05:47:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629041023",
      "id" : 629041023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTA0MTAyMw==",
      "updated_at" : "2020-05-15T05:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629041023",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Interesting. What steps do you use to reproduce this issue with `rr`?",
      "created_at" : "2020-05-15T10:13:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629153410",
      "id" : 629153410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTE1MzQxMA==",
      "updated_at" : "2020-05-15T10:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629153410",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Try this:\r\n\r\n```\r\n$ git clone https://github.com/bitcoin/bitcoin\r\n$ cd bitcoin/\r\n$ ./autogen.sh\r\n$ ./configure --with-incompatible-bdb\r\n$ make\r\n$ git clone https://github.com/mozilla/rr\r\n$ cd rr/\r\n$ ./configure\r\n$ make\r\n$ cd ../\r\n$ rm -rf test_bitcoin_chaos\r\n$ while rr/bin/rr record --chaos -o test_bitcoin_chaos src/test/test_bitcoin -l test_suite -t blockfilter_index_tests -- DEBUG_LOG_OUT; do\r\n      rm -rf test_bitcoin_chaos\r\n  done\r\n```",
      "created_at" : "2020-05-15T16:38:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629360810",
      "id" : 629360810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTM2MDgxMA==",
      "updated_at" : "2020-05-15T16:38:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629360810",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "After running the loop above for 14 hours I hit the bug using `rr`:\r\n\r\n```\r\n2020-05-16T05:59:59.184771Z Syncing basic block filter index with block chain from height 0\r\ntest/blockfilter_index_tests.cpp(140): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": critical check time_start + timeout_ms > GetTimeMillis() has failed\r\npure virtual method called\r\nterminate called without an active exception\r\nunknown location(0): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": signal: SIGABRT (application abort requested)\r\ntest/blockfilter_index_tests.cpp(140): last checkpoint\r\ntest/blockfilter_index_tests.cpp(105): Leaving test case \"blockfilter_index_initial_sync\"; testing time: 334500us\r\n```\r\n\r\nNow we can replay the failing test execution deterministically using `rr replay test_bitcoin_chaos/`.",
      "created_at" : "2020-05-16T06:41:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629597859",
      "id" : 629597859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTU5Nzg1OQ==",
      "updated_at" : "2020-05-16T06:46:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629597859",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What is the diff in the debug log/stdout between a passing build and this failing one?",
      "created_at" : "2020-05-16T10:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629621680",
      "id" : 629621680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTYyMTY4MA==",
      "updated_at" : "2020-05-16T10:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629621680",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't investigated that but here is the output from a failing one:\r\n\r\n```\r\n2020-05-16T05:59:57.550904Z     - Index writing: 1.94ms [0.40s (2.03ms/blk)]                                                                                                                                                                                                                                                    [0/1710]\r\n2020-05-16T05:59:57.551566Z     - Callbacks: 0.67ms [0.12s (0.61ms/blk)]\r\n2020-05-16T05:59:57.552209Z BlockChecked: block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d state=Valid\r\n2020-05-16T05:59:57.552852Z   - Connect total: 7.13ms [1.38s (6.93ms/blk)]\r\n2020-05-16T05:59:57.553500Z   - Flush: 0.65ms [0.14s (0.70ms/blk)]\r\n2020-05-16T05:59:57.554153Z   - Writing chainstate: 0.65ms [0.17s (0.84ms/blk)]\r\n2020-05-16T05:59:57.554895Z Blockpolicy estimates updated by 0 of 0 block txs, since last block 0 of 0 tracked, mempool map size 0, max target 0 from current\r\n2020-05-16T05:59:57.555586Z UpdateTip: new best=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d height=99 version=0x20000000 log2_work=7.6438562 tx=100 date='2020-05-16T06:00:11Z' progress=1.000000 cache=0.0MiB(99txo)\r\n2020-05-16T05:59:57.556231Z   - Connect postprocess: 2.08ms [0.43s (2.14ms/blk)]\r\n2020-05-16T05:59:57.556877Z - Connect block: 10.51ms [2.11s (10.62ms/blk)]\r\n2020-05-16T05:59:57.557687Z Checking mempool with 0 transactions and 0 inputs\r\n2020-05-16T05:59:57.571535Z Enqueuing BlockConnected: block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d block height=99\r\n2020-05-16T05:59:57.572202Z Enqueuing UpdatedBlockTip: new block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d fork block hash=5baaa452c43885d714369586561867ad382e55ed27699fa82676c33495e14125 (in IBD=false)\r\n2020-05-16T05:59:57.572970Z CreateNewBlock(): block weight: 904 txs: 0 fees: 0 sigops 400\r\n2020-05-16T05:59:57.573985Z     - Sanity checks: 0.01ms [0.00s (0.01ms/blk)]\r\n2020-05-16T05:59:57.574644Z     - Fork checks: 0.67ms [0.31s (1.55ms/blk)]\r\n2020-05-16T05:59:57.575301Z       - Connect 1 transactions: 0.65ms (0.648ms/tx, 0.000ms/txin) [0.29s (1.46ms/blk)]\r\n2020-05-16T05:59:57.575962Z     - Verify 0 txins: 1.32ms (0.000ms/txin) [0.53s (2.63ms/blk)]\r\n2020-05-16T05:59:57.576603Z CreateNewBlock() packages: 0.01ms (0 packages, 0 updated descendants), validity: 3.65ms (total 3.66ms)\r\n2020-05-16T05:59:57.577353Z NewPoWValidBlock: block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5\r\n2020-05-16T05:59:57.579751Z   - Load block from disk: 0.00ms [0.00s]\r\n2020-05-16T05:59:57.580721Z     - Sanity checks: 0.01ms [0.00s (0.01ms/blk)]\r\n2020-05-16T05:59:57.581374Z     - Fork checks: 0.66ms [0.31s (1.55ms/blk)]\r\n2020-05-16T05:59:57.582022Z       - Connect 1 transactions: 0.64ms (0.644ms/tx, 0.000ms/txin) [0.29s (1.45ms/blk)]\r\n2020-05-16T05:59:57.582672Z     - Verify 0 txins: 1.30ms (0.000ms/txin) [0.53s (2.62ms/blk)]\r\n2020-05-16T05:59:57.584895Z     - Index writing: 2.21ms [0.41s (2.02ms/blk)]\r\n2020-05-16T05:59:57.585539Z     - Callbacks: 0.66ms [0.12s (0.61ms/blk)]\r\n2020-05-16T05:59:57.586168Z BlockChecked: block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 state=Valid\r\n2020-05-16T05:59:57.587934Z   - Connect total: 8.19ms [1.39s (6.90ms/blk)]\r\n2020-05-16T05:59:57.588569Z   - Flush: 0.64ms [0.14s (0.70ms/blk)]\r\n2020-05-16T05:59:57.604022Z   - Writing chainstate: 15.44ms [0.18s (0.91ms/blk)]\r\n2020-05-16T05:59:57.604763Z Blockpolicy estimates updated by 0 of 0 block txs, since last block 0 of 0 tracked, mempool map size 0, max target 0 from current\r\n2020-05-16T05:59:57.605454Z UpdateTip: new best=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 height=100 version=0x20000000 log2_work=7.6582115 tx=101 date='2020-05-16T06:00:11Z' progress=1.000000 cache=0.0MiB(100txo)\r\n2020-05-16T05:59:57.606099Z   - Connect postprocess: 2.09ms [0.43s (2.13ms/blk)]\r\n2020-05-16T05:59:57.606740Z - Connect block: 26.36ms [2.14s (10.65ms/blk)]\r\n2020-05-16T05:59:57.607554Z Checking mempool with 0 transactions and 0 inputs\r\n2020-05-16T05:59:57.608496Z Enqueuing BlockConnected: block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 block height=100\r\n2020-05-16T05:59:57.609144Z Enqueuing UpdatedBlockTip: new block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 fork block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d (in IBD=false)\r\n2020-05-16T05:59:57.613390Z Opened LevelDB successfully\r\n2020-05-16T05:59:57.614711Z Using obfuscation key for /tmp/test_common_Bitcoin Core/8452f2eaa126750ba2992d9a174f267010c49d1332b33956fb3e0963cd70821e/regtest/indexes/blockfilter/basic/db: 0000000000000000\r\n2020-05-16T05:59:57.616968Z BlockConnected: block hash=5baaa452c43885d714369586561867ad382e55ed27699fa82676c33495e14125 block height=98\r\n2020-05-16T05:59:57.618456Z UpdatedBlockTip: new block hash=5baaa452c43885d714369586561867ad382e55ed27699fa82676c33495e14125 fork block hash=79fd5be16c059ff46e8eb70b8b6a37e1b71f4788059ad054941a1f5445ea90f6 (in IBD=false)\r\n2020-05-16T05:59:57.619685Z BlockConnected: block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d block height=99\r\n2020-05-16T05:59:57.620941Z UpdatedBlockTip: new block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d fork block hash=5baaa452c43885d714369586561867ad382e55ed27699fa82676c33495e14125 (in IBD=false)\r\n2020-05-16T05:59:57.622205Z BlockConnected: block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 block height=100\r\n2020-05-16T05:59:57.623487Z UpdatedBlockTip: new block hash=7eddde99a72607cda3cfac83dfbce8cb254693ca76fe0e28d85b01612c7162a5 fork block hash=21b6fd8c6e7d845a5b4959b0c3e439387f6e8f6b98e052140294871356da1c3d (in IBD=false)\r\n2020-05-16T05:59:57.649646Z basic block filter index thread start\r\n2020-05-16T05:59:57.650334Z Syncing basic block filter index with block chain from height 0\r\ntest/blockfilter_index_tests.cpp(140): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": critical check time_start + timeout_ms > GetTimeMillis() has failed\r\npure virtual method called\r\nterminate called without an active exception\r\nunknown location(0): fatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": signal: SIGABRT (application abort requested)\r\n```",
      "created_at" : "2020-05-20T13:10:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-631463969",
      "id" : 631463969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTQ2Mzk2OQ==",
      "updated_at" : "2020-05-20T13:10:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631463969",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would be worth a shot to see if #18791 by @promag fixes this",
      "created_at" : "2020-05-20T14:44:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-631519245",
      "id" : 631519245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTUxOTI0NQ==",
      "updated_at" : "2020-05-20T14:44:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631519245",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This remains an issue and pops up with regularity on our Jenkins CI, which continuously runs master.\r\n\r\nHere are the relevant error snippets:\r\n```\r\n2021-03-04T10:12:28.684510Z [basic block filter index] [index/base.cpp:163] [ThreadSync] Syncing basic block filter index with block chain from height 0\r\ntest/blockfilter_index_tests.cpp(140): [4;31;49mfatal error: in \"blockfilter_index_tests/blockfilter_index_initial_sync\": critical check time_start + timeout_ms > GetTimeMillis() has failed[0;39;49m\r\n==2949==WARNING: MemorySanitizer: use-of-uninitialized-value\r\n...(cut for brevity)...\r\nSUMMARY: MemorySanitizer: use-of-uninitialized-value /var/lib/jenkins/workspace/bitcoin-depends_sanitizers_memory_MSan_focal/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/./streams.h:439:13 in CDataStream::Xor(std::__1::vector<unsigned char, std::__1::allocator<unsigned char> > const&)\r\nExiting\r\nmake[3]: *** [Makefile:17137: test/blockfilter_index_tests.cpp.test] Error 1\r\nmake[3]: *** Waiting for unfinished jobs....\r\n```\r\n\r\nOver the last 30 days, we've seen this 66 of 1831 runs (3.6%) and 11 of 419 (2.6%) over the last week.\r\n\r\nThis OOME event _may be_ responsible for a portion of the cirrus crashes, which show up as a generic \"agent crashed\" in the logs.\r\n\r\n(Thanks to @evanbaer and @MarcoFalke for tracking this down)",
      "created_at" : "2021-03-18T14:26:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-801972079",
      "id" : 801972079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMTk3MjA3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T14:31:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801972079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "FWIW I had the same issue locally (#22614)",
      "created_at" : "2021-08-03T08:16:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-891638036",
      "id" : 891638036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "IC_kwDOABII5841JVEU",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T08:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891638036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I am trying for the last two days to reproduce this with https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-629360810 , but couldn't yet.",
      "created_at" : "2021-08-05T13:22:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16337#issuecomment-893455928",
      "id" : 893455928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16337",
      "node_id" : "IC_kwDOABII5841QQ44",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-05T13:22:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/893455928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
