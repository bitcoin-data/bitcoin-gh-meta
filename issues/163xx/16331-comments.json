[
   {
      "author_association" : "MEMBER",
      "body" : "How is this different from https://github.com/bitcoin/bitcoin/blob/7f985d6c8159f377b685ec2f404f733bdae6ac58/doc/build-unix.md#memory-requirements",
      "created_at" : "2019-07-03T11:29:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508054641",
      "id" : 508054641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA1NDY0MQ==",
      "updated_at" : "2019-07-03T11:29:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508054641",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think the name of this option (`--enable-lowmem`) is confusing. Given that, I'd assume it lowers *run time* memory requirements.",
      "created_at" : "2019-07-03T11:52:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508061104",
      "id" : 508061104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA2MTEwNA==",
      "updated_at" : "2019-07-03T11:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508061104",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj Good point! What would be a more appropriate name?",
      "created_at" : "2019-07-03T11:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508061414",
      "id" : 508061414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA2MTQxNA==",
      "updated_at" : "2019-07-03T11:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508061414",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What is the point in compiling releases with `-g` by default. Has this ever helped to debug an issue, considering that they are optimized with `-O2`?",
      "created_at" : "2019-07-03T12:18:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508068727",
      "id" : 508068727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA2ODcyNw==",
      "updated_at" : "2019-07-03T12:18:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508068727",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What is the point in compiling releases with -g by default. Has this ever helped to debug an issue, considering that they are optimized with -O2?\r\n\r\nThe debug info for releases has been useful for me at times to get backtraces.",
      "created_at" : "2019-07-03T12:40:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508076013",
      "id" : 508076013,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA3NjAxMw==",
      "updated_at" : "2019-07-03T12:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508076013",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> How is this different from https://github.com/bitcoin/bitcoin/blob/7f985d6c8159f377b685ec2f404f733bdae6ac58/doc/build-unix.md#memory-requirements\r\n\r\nThe end result in terms of max RSS for the troublesome files is roughly the same (on my machine at least!), but this PR speeds up the total build time by -11% whereas the linked GCC garbage collection tweak slows down the total build time by several hundred percent.\r\n\r\nThe qualitative difference is that this PR _reduces_ the total amount of work performed during a build whereas the linked work-around simply _trades_ memory use for compile time by making the GCC garbage collector hyperactive :-)",
      "created_at" : "2019-07-03T13:26:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508092256",
      "id" : 508092256,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA5MjI1Ng==",
      "updated_at" : "2019-07-05T16:03:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508092256",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the explanation. Do you think it makes sense to update the documention to mention `fvar-tracking` instead of adding a \"configure wrapper\" around `fvar-tracking`?",
      "created_at" : "2019-07-03T13:31:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508094232",
      "id" : 508094232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODA5NDIzMg==",
      "updated_at" : "2019-07-03T13:31:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508094232",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj \r\n\r\n> > What is the point in compiling releases with -g by default. Has this ever helped to debug an issue, considering that they are optimized with -O2?\r\n\r\n> The debug info for releases has been useful for me at times to get backtraces.\r\n\r\nInstead of switching the default from `-g -O2` to `-O2`: what about going with `-g -O2 -fno-var-tracking` as the default? (`-fvar-tracking` would be opt-in via `--enable-debug` .)\r\n\r\nThat would combine the best of both world: 1.) nice backtraces in releases, 2.) out-of-the-box compile-time memory requirement reduced from 1.4 GB to 1.0 GB and 3.) out-of-the-box compile times reduced by 11%.\r\n\r\nA win win win? :-)\r\n\r\n@MarcoFalke\r\n\r\n> Do you think it makes sense to update the documention to mention `fvar-tracking` instead of adding a \"configure wrapper\" around `fvar-tracking`?\r\n\r\nThat is an option. I guess we can choose from one of three levels of user-friendliness:\r\n\r\n1. Build with low memory requirement by default.\r\n2. Build with low memory requirement if enabled using a `configure` option discoverable by `./configure --help`. Perhaps with the `configure` script suggesting the option if a low memory environment is detected.\r\n3. Build with low memory requirement if enabled using a `CXXFLAGS` environment variable discoverable via the GitHub documentation\r\n\r\nIn the issue #6658 I think @gmaxwell makes a good case for low compile-time memory use in also the out-of-the-box case:\r\n\r\n> Y'all being overly pedantic. Matt identified a usability problem: User obtains and attempts to compile the software with normal instructions on a common and reasonable platform type, and it crashes.\r\n>\r\n> If you want to suggest that the docs should have instructions with low mem cflags or whatnot, OKAY, but without that it doesn't stop being an issue because just us experts can work around it. Our memory usage is kind of obnoxious during compile time IMO, and if we could do some minor tweaks to reduce the peak that would be nice too-- but at the very least we should provide some instructions.\r\n\r\nAnd @TheBlueMatt (earlier) in the same issue:\r\n\r\n> This is a default gcc on a relatively recent Debian. I really don't think the response to \"I can't build Bitcoin Core on a vps with 1GB of memory with default parameters\" should be \"oh, but if you set these flags you can!\"\r\n",
      "created_at" : "2019-07-05T15:44:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16331#issuecomment-508798888",
      "id" : 508798888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODc5ODg4OA==",
      "updated_at" : "2019-07-05T15:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508798888",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
