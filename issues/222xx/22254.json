{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Observed by @fanquake in https://github.com/bitcoin/bitcoin/pull/21935#pullrequestreview-683513857\r\n\r\n> (depends build) Boost Process seems to use Boost ASIO, which uses `std::allocator<void>`, which was deprecated in C++17. This leads to a nice stack of warnings, at least on macOS:\r\n> \r\n> ```shell\r\n> bitcoin/depends/x86_64-apple-darwin20.5.0/include/boost/asio/associated_allocator.hpp:78:49: warning: 'allocator<void>' is deprecated [-Wdeprecated-declarations]\r\n> template <typename T, typename Allocator = std::allocator<void> >\r\n>                                                 ^\r\n> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/v1/memory:730:28: note: 'allocator<void>' has been explicitly marked deprecated here\r\n> class _LIBCPP_TEMPLATE_VIS _LIBCPP_DEPRECATED_IN_CXX17 allocator<void>\r\n>                            ^\r\n> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:1058:39: note: expanded from macro '_LIBCPP_DEPRECATED_IN_CXX17'\r\n> #  define _LIBCPP_DEPRECATED_IN_CXX17 _LIBCPP_DEPRECATED\r\n>                                       ^\r\n> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:1035:48: note: expanded from macro '_LIBCPP_DEPRECATED'\r\n> #    define _LIBCPP_DEPRECATED __attribute__ ((deprecated))\r\n> ```\r\n> \r\n> I'm also seeing unused-result warnings (from Boost) when building on my Ubuntu machine:\r\n> \r\n> ```shell\r\n> In file included from /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/detail/execute_impl.hpp:24,\r\n>                  from /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/child.hpp:22,\r\n>                  from /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/async_system.hpp:22,\r\n>                  from /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process.hpp:24,\r\n>                  from util/system.cpp:9:\r\n> /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/detail/posix/executor.hpp: In member function âvoid boost::process::detail::posix::executor<Sequence>::write_error(const std::error_code&, const char*) [with Sequence = boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<const boost::fusion::tuple<const std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, boost::process::detail::posix::pipe_out<1, -1>&, boost::process::detail::posix::pipe_out<2, -1>&, boost::process::detail::posix::pipe_in&>, boost::process::detail::is_initializer<mpl_::arg<-1> > > >]â:\r\n> /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/detail/posix/executor.hpp:156:16: warning: ignoring return value of âssize_t write(int, const void*, size_t)â declared with attribute âwarn_unused_resultâ [-Wunused-result]\r\n>   156 |         ::write(_pipe_sink, &len, sizeof(int));\r\n>       |         ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n> /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/detail/posix/executor.hpp:159:16: warning: ignoring return value of âssize_t write(int, const void*, size_t)â declared with attribute âwarn_unused_resultâ [-Wunused-result]\r\n>   159 |         ::write(_pipe_sink, &len, sizeof(int));\r\n>       |         ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n> /home/ubuntu/bitcoin/depends/x86_64-pc-linux-gnu/include/boost/process/detail/posix/executor.hpp:160:16: warning: ignoring return value of âssize_t write(int, const void*, size_t)â declared with attribute âwarn_unused_resultâ [-Wunused-result]\r\n>   160 |         ::write(_pipe_sink, msg, len);\r\n>       |         ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~\r\n>   AR       libbitcoin_util.a\r\n> ```\r\n> \r\n\r\nI tried with Boost 1.72 - 1.76 (most recent version on 2021-06-15) but to no avail.\r\n\r\nPossible solutions:\r\n* fix it upstream (using a patch in the mean time):\r\n  * by fixing ASIO, but this has been tried since 2018: https://github.com/boostorg/asio/pull/76\r\n  * by fixing Process to not use Asio perhaps\r\n* refactoring `RunCommandParseJSON` to work without Boost::Process (sadly non trivial, see #15382)\r\n* make llvm not complain: https://bugs.llvm.org/show_bug.cgi?id=50299\r\n\r\nIn addition to annoying warnings, this would require someone with a c++20 compiler to use `--disable-external-signer`.",
   "closed_at" : "2022-08-08T19:40:57Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254/comments",
   "created_at" : "2021-06-15T19:04:52Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/22254",
   "id" : 921709648,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU5MjE3MDk2NDg=",
   "number" : 22254,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254/timeline",
   "title" : "Boost::ASIO  (used by Boost::Process) uses (falsely?) deprecated std::allocator",
   "updated_at" : "2022-08-08T19:40:58Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22254",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
