[
   {
      "body" : "+1\r\n",
      "created_at" : "2015-09-01T14:35:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-136742858",
      "id" : 136742858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-01T14:35:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/136742858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I'd like to try tackling this one, but I'm a little confused about where to start. Is the basic approach here something like\r\n\r\n- On construction of `CCoinsViewDB`, check `db` to ensure that some value exists under key `xor_obfuscate` (or similar); if not, randomly generate one and write it to `db`\r\n- On `CCoinsViewDB::BatchWrite()`, use `db.Read('xor_obfuscate')` to XOR the value of the serialized `Coin` objects being written\r\n- On `CCoinsViewDB::GetCoins()`, use the `xor_obfuscate` value to reverse the XOR in `BatchWrite()`\r\n- Add a flag to disable obfuscation\r\n\r\nDoes that sound like the right tack, or am I off?\r\n\r\nIn terms of testing, it looks like we'd get some incidental coverage out of `test/coins_test.cpp`, but are there any supplemental testcases that should be written?",
      "created_at" : "2015-09-06T01:14:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138016221",
      "id" : 138016221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-06T01:14:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138016221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "Where are you handling un-obfuscated reads (eg, those written with older versions) after initialising the xor_obfuscate key?\r\n",
      "created_at" : "2015-09-06T05:09:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138041030",
      "id" : 138041030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-06T05:09:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138041030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-09-06T14:28:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138089766",
      "id" : 138089766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-06T14:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138089766",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "jamesob: I would implement it at the LevelDB wrapper layer, rather than\nCCoinsViewDB, as that would be more generic and IMHO easier.\n\nThe xor value could be cached inside the wrapper object - there is no need\nto read it over and over again. You'd read it when opening the database,\nand if it doesn't exist, generate and write it.\n\nAs Luke mentions, you also need to deal with non-obfuscated values. I\nsuppose we can institute a rule that a key value cannot start with a null\nbyte, and then store obfuscated values using (nullbyte + key) as key.\nLevelDB is efficient for large amounts of keys that start with the same\nsequence of bytes, so this would not hurt storage. You do need some\nmechanism for erasing the old unobfuscated key when the new one is written.\nThis may have some performance impact...\n\nAlso, would it be overkill to use AES-CTR instead?\n",
      "created_at" : "2015-09-06T14:38:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138090166",
      "id" : 138090166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-06T14:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138090166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@luke-jr @sipa good points, thanks.\r\n\r\n@sipa, I think given the discussion in #4069 AES might be more than we need right now, and definitely has different performance characteristics than XOR does. Maybe something like that will be called for down the road, but for now it seems like an XOR should do the job.\r\n\r\nIt would be nice if we could somehow indicate obfuscation in the value itself, so that way we won't have to do two reads (and a potential write) for correction, but I think that may be a little too tricky, and we should just keep this as simple as performance constraints will allow.\r\n\r\nShould we generalize the the obfuscation mechanism to the `CLevelDBWrapper`, maybe adding an `obfuscate` bool parameter to its constructor? or should we keep this fairly contained as a one-off solution for `CCoinsViewDB`? If anyone has any strong opinions, I'd like to hear them. Otherwise I'm going to move forward with a draft of the more general approach.",
      "created_at" : "2015-09-07T05:27:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138190305",
      "id" : 138190305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-07T05:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138190305",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "> Where are you handling un-obfuscated reads (eg, those written with older versions) after initialising the xor_obfuscate key?\r\n\r\nI'd say: make a database either obfuscated or not obfuscated.  Partially obfuscated databases are as incompatible with older versions as completely obfuscated ones (plus there is danger it would work partially and error out later), so there is no use for the middle road.\r\n\r\nA new database would be 'born' obfuscated. An old database would be kept unobfuscated unless the user gives a command line option to obfuscate, which would obfuscate the entire database in one go in an upgrade process. This loses backward compatibility.\r\n\r\nThe two cases can be distinguished by the presence/non-presence of the obfuscation key, or e.g. add a MIN_VERSION like in the wallet. I think this makes implementation a lot easier and less error-prone.\r\n\r\n> Also, would it be overkill to use AES-CTR instead?\r\n\r\nAs this is meant as a fast, lightweight obfuscation mechanism, using AES seems like overkill. The goal is to avoid trivial signature matching. I don't see what using a stronger crypto-system would add.\r\n",
      "created_at" : "2015-09-07T09:45:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138254105",
      "id" : 138254105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-07T09:46:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138254105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj any examples of \"upgrade processes\" in the codebase that I can reference for this implementation?",
      "created_at" : "2015-09-07T18:06:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138350514",
      "id" : 138350514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-07T18:06:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138350514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "@sipa \"LevelDB is efficient for large amounts of keys that start with the same sequence of bytes, so this would not hurt storage.\"\r\n\r\nDoes leveldb merge prefixes or something?",
      "created_at" : "2015-09-08T01:38:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138403964",
      "id" : 138403964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T01:38:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138403964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@pstratem Yes.",
      "created_at" : "2015-09-08T01:39:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138404025",
      "id" : 138404025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T01:39:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138404025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa it looks like there are already some special keys in the chainstate database?",
      "created_at" : "2015-09-08T01:45:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138405240",
      "id" : 138405240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T01:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138405240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@laanwj There's certainly a disadvantage to not supporting mixed obfuscation databases.\r\n\r\nSpecifically if this is switched to the default then everybody is going to need to do the upgrade procedure, which is potentially slow and expensive.",
      "created_at" : "2015-09-08T01:54:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138407434",
      "id" : 138407434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T01:54:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138407434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@pstratem What special keys?",
      "created_at" : "2015-09-08T01:56:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138408028",
      "id" : 138408028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T01:56:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138408028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa 'B' is the best block 'l' is the last block\r\n\r\nEverything else seems to be prefix || hash -> value",
      "created_at" : "2015-09-08T02:01:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138408370",
      "id" : 138408370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:01:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138408370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "All keys are serialize(something), whether that something is a character or something more complex.",
      "created_at" : "2015-09-08T02:04:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138408610",
      "id" : 138408610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:04:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138408610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Transition thinking...\r\n* Mixed obfuscation creates a mixed situation that lingers forever.\r\n* Mixed obfuscation does not eliminate the problem for a user, even after the user upgrades.\r\n* A one-time upgrade is painful only if done in the foreground",
      "created_at" : "2015-09-08T02:09:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138409602",
      "id" : 138409602,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:09:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138409602",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@sipa right but the serialization of a single charater is ... a single character",
      "created_at" : "2015-09-08T02:12:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138409832",
      "id" : 138409832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:12:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138409832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@jgarzik The upgrade being done in the background seems optimal.",
      "created_at" : "2015-09-08T02:14:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138410000",
      "id" : 138410000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138410000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "Doing this in the background is pretty hard, as you need to prevent writing entries that a concurrent modification may be updating.",
      "created_at" : "2015-09-08T02:24:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138411783",
      "id" : 138411783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:24:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138411783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Then don't do it that way.  You also said -reindex was hard :)\r\n\r\ne.g. create a unified view of new + old database; old db under the hood becomes read-only, all updates go to new db.\r\n\r\nThere are other approaches as well.\r\n",
      "created_at" : "2015-09-08T02:28:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138412092",
      "id" : 138412092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138412092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik I agree, a partial state does not fix the problem. A UTXO entry that is not touched is never overwritten, so creating a UTXO with a virus signature in it, and then never spending it would leave AV software detecting the file as problematic until reindex anyway.",
      "created_at" : "2015-09-08T02:28:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138412096",
      "id" : 138412096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:28:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138412096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jgarzik Didn't say it was impossible, but it's a non-trivial thing to do that requires careful testing (UTXO database errors can lead to consensus failure). I think for now I'm perfectly fine with an opt-in approach. We can add updating later.",
      "created_at" : "2015-09-08T02:36:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138412844",
      "id" : 138412844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:36:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138412844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "So: opt-in, atomic obfuscation for now, more sophisticated obfuscation-by-default scheme later?",
      "created_at" : "2015-09-08T02:42:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138414543",
      "id" : 138414543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:42:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138414543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "IMO:\r\n- NAK mixed obfuscation - all or none is cleaner, less complex and better reflects the future\r\n- if all-or-none, obfuscation could easily become encryption with a swap of layers, without touching low-level db or upper-level bitcoin.\r\n- turn on by default for new db or -reindex\r\n",
      "created_at" : "2015-09-08T02:42:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138414891",
      "id" : 138414891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138414891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Enabling by default on -reindex should be easy to do in this PR.",
      "created_at" : "2015-09-08T02:46:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138415736",
      "id" : 138415736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:46:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138415736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Another issue: we need a clean failure when downgrading. I don't think the chainstate has a version number, so that's problematic.",
      "created_at" : "2015-09-08T02:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138415787",
      "id" : 138415787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138415787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Presumably the failure mode is database-appears-totally-empty?\r\n",
      "created_at" : "2015-09-08T02:50:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138416170",
      "id" : 138416170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:50:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138416170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Hmm, no, it would read random garbage and try to deserialize it.",
      "created_at" : "2015-09-08T02:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138416361",
      "id" : 138416361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138416361",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "What's the usecase for a downgrade? When would that actually happen?",
      "created_at" : "2015-09-08T02:56:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138416987",
      "id" : 138416987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:56:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138416987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "People tend to try a new version but then find a problem, so need to revert to an earlier version of the client.",
      "created_at" : "2015-09-08T02:58:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138417141",
      "id" : 138417141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T02:58:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138417141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "My thought was that if there is no obf key, we set one and set it to all zeros.  Tada. Everyone is \"obfuscated\".   On reindex we should reset the key.    Downgrade works fine, so long as you haven't reindexed since.  If you do downgrade after one you'll fail right away, on the chainstate check ... and it'll tell you to reindex! \r\n\r\nLog the OBF key so that when troubleshooting we can see if you were still AV exposed.\r\n\r\nI do not think more complexity than this is justified. The users this helps are primarily ones where the software currently immediately fails.  If you suffer a latent AV incident, the result will be to need a reindex in any case... which will helpfully fix you here too.  Considering how much data corruption problems we currently have with LevelDB on windows already, this sounds pretty complete.",
      "created_at" : "2015-09-08T03:20:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138420036",
      "id" : 138420036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T03:23:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138420036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Ha that's a nice solution.",
      "created_at" : "2015-09-08T03:24:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138420268",
      "id" : 138420268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T03:24:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138420268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@gmaxwell very slick :). I'll get to implementing.",
      "created_at" : "2015-09-08T03:24:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138420279",
      "id" : 138420279,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T03:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138420279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=3",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "body" : "@gmaxwell ha, :+1: good solution.",
      "created_at" : "2015-09-08T03:49:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6613#issuecomment-138422531",
      "id" : 138422531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6613",
      "updated_at" : "2015-09-08T03:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138422531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   }
]
