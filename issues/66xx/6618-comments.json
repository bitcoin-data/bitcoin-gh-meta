[
   {
      "body" : "oops, was trying to bump travis",
      "created_at" : "2015-09-09T17:33:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-138985306",
      "id" : 138985306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-09T17:33:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138985306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "> the recent stress test has shown that 85% is not conservative enough\r\n\r\nAre you aware of anyone reporting missed targets? (Haven't searched, excuse my laziness)",
      "created_at" : "2015-09-10T23:05:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-139406997",
      "id" : 139406997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-10T23:05:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139406997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke Yes.  During the mid-July stress tests I had several reports of people placing transactions in accordance with fees returned by the estimation algo and waiting much longer than the expected number of blocks.   This patch is not going to completely solve the problem that the current fee estimation logic can only provide a rough answer of what has happened historically, but its actually a very simple change and is worth it for the improvement.  Better logic is waiting for a sorted mempool (and ideas about what to do with it).",
      "created_at" : "2015-09-15T22:20:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-140562367",
      "id" : 140562367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-15T22:20:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140562367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "concept ACK if some data can be provided to demonstrate tip-over points",
      "created_at" : "2015-09-16T08:32:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-140669012",
      "id" : 140669012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-16T08:32:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140669012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens sorry, what's a tip-over point?",
      "created_at" : "2015-09-17T22:06:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-141246963",
      "id" : 141246963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-17T22:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141246963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos good question!\r\n\r\nI meant to ask if you had any data related to the quote:\r\n\r\n> Yes. During the mid-July stress tests I had several reports of people placing transactions in accordance with fees returned by the estimation algo and waiting much longer than the expected number of blocks.",
      "created_at" : "2015-09-19T08:51:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-141636624",
      "id" : 141636624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-19T08:51:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141636624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens This is the kind of data analysis I've looked at.  Here's some data showing fee estimates in early July when one of the spam attacks started.  The green line represents a much more recent history of transaction confirmation times (half-life of 36 blocks or so).  You can see from the green line that once the attack starts around block 364130, you pretty immediately need a significantly higher fee to be confirmed within 5 blocks.  However the old fee estimates don't really start increasing for about 50 blocks.  The new fee estimates react much quicker.  This is because if, historically, close to 100% of your transactions were being confirmed within the target, even if the number all of a sudden becomes 0%, it can take some time for the moving history to drop below 85% over the time horizon we use.  Dropping below 95% happens much more quickly.  I experimented with using a shorter time horizon but there was a lot of noise in the data.  In the absence of this effect, I think its kind of an arbitrary choice as to what percentage of recent transactions should have been confirmed within the target number of blocks is the right answer to the fee estimate question.\r\n![fee estimation changes](https://cloud.githubusercontent.com/assets/4360349/9999778/41351c24-6066-11e5-8f83-e02ec12618a3.jpg)\r\n",
      "created_at" : "2015-09-21T17:41:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142055323",
      "id" : 142055323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-21T17:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142055323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "I assume the bottom axis is the block height, and the left is the fee estimate?\r\nWhy is the new 95% fee estimate higher before the peak (assumed peak at ~364140)?\r\nOr is there a subset of the data that I am not aware of?\r\n\r\n**edit:** thanks for going into detail on this",
      "created_at" : "2015-09-22T01:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142156250",
      "id" : 142156250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-22T01:39:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142156250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Concept ACK.",
      "created_at" : "2015-09-22T12:28:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142273077",
      "id" : 142273077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-22T12:28:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142273077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@dcousens Correct on the axes. It's not surprising that the estimate can be higher even in the \"steady state\".  It's answering a slightly different question.  It may be that at block 364050 about 86% of transactions of feerate around 14K are being confirmed within 2 blocks.  Passes the old test and not the new.\r\n",
      "created_at" : "2015-09-22T13:26:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142289242",
      "id" : 142289242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-22T13:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142289242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos thanks for the explanation.\r\nHowever I feel the \"steady state\" being higher to start with doesn't agree with the statement you made earlier:\r\n>  I think its kind of an arbitrary choice as to what percentage of recent transactions should have been confirmed\r\n\r\nI don't necessarily have a strong opinion on this,  as the intent seems to be to improve UX,  but noticeably at the cost of higher fees by default.",
      "created_at" : "2015-09-22T13:58:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142296837",
      "id" : 142296837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-22T13:58:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142296837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens Fair enough, perhaps that is worth pointing out.  I edited the initial PR comment.  By arbitrary I just meant it's not clear what more closely maps to what people expect the answer for fee estimation to mean.",
      "created_at" : "2015-09-22T15:18:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-142321204",
      "id" : 142321204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-09-22T15:18:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142321204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "I'd like this to be merged, but I'm going to include it in a new and improved #6134 ",
      "created_at" : "2015-10-15T14:58:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6618#issuecomment-148412228",
      "id" : 148412228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6618",
      "updated_at" : "2015-10-15T14:58:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148412228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
