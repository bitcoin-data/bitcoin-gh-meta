[
   {
      "author_association" : "MEMBER",
      "body" : "I'm just guessing here, but if this is related to RPC over SSL, then I think support for that was dropped in 0.12, see #5677. (No idea why this wouldn't affect OS X as well though, so maybe this is a bad guess.)\n\nOnly other thing I can think of is if this is somehow related to the new cookie file stuff, which would allow you to start up bitcoind without an rpcuser/password in the config (a departure from older versions), though in that case I'd expect curl to not work either unless you were using the credentials from the .cookie file.\n\nEDIT: another guess -- perhaps you're encountering some platform-specific libevent bug?\n",
      "created_at" : "2016-02-03T20:01:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-179432735",
      "id" : 179432735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE3OTQzMjczNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179432735/reactions"
      },
      "updated_at" : "2016-02-03T20:07:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179432735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It's definitely not SSL - never used SSL for RPC. Both of the bitcoind instances I'm testing on have an rpcuser and password set, so it shouldn't be using the cookie.\n",
      "created_at" : "2016-02-03T20:29:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-179446281",
      "id" : 179446281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE3OTQ0NjI4MQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179446281/reactions"
      },
      "updated_at" : "2016-02-03T20:29:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179446281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/288011?v=4",
         "events_url" : "https://api.github.com/users/jlopp/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jlopp/followers",
         "following_url" : "https://api.github.com/users/jlopp/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jlopp/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jlopp",
         "id" : 288011,
         "login" : "jlopp",
         "node_id" : "MDQ6VXNlcjI4ODAxMQ==",
         "organizations_url" : "https://api.github.com/users/jlopp/orgs",
         "received_events_url" : "https://api.github.com/users/jlopp/received_events",
         "repos_url" : "https://api.github.com/users/jlopp/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jlopp/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jlopp/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jlopp"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To diagnose it would be useful to have an intercept using tcpdump/wireshark of the HTTP session (both the request line and the headers, back and forth).\n",
      "created_at" : "2016-02-04T07:41:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-179693375",
      "id" : 179693375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE3OTY5MzM3NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179693375/reactions"
      },
      "updated_at" : "2016-02-04T07:42:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/179693375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not familiar with the tools so let me know if I need to change anything to get better info. Here's the output I get when running 0.12rc2:\n\n```\n19:26:15.615855 POST / HTTP/1.1\nContent-Type: application/json-rpc\nCache-Control: no-cache, no-store\nAccept: application/json-rpc\nPragma: no-cache\nUser-Agent: Java/1.8.0_72\nHost: 127.0.0.1:18332\nConnection: keep-alive\nContent-Length: 34\n\n{\"method\":\"getrawmempool\",\"id\":\"\"}\n\n19:26:15.615877 POST / HTTP/1.1\nContent-Type: application/json-rpc\nCache-Control: no-cache, no-store\nAccept: application/json-rpc\nPragma: no-cache\nUser-Agent: Java/1.8.0_72\nHost: 127.0.0.1:18332\nConnection: keep-alive\nContent-Length: 45\n\n{\"method\":\"estimatefee\",\"id\":\"\",\"params\":[1]}\n\n19:26:15.616042 HTTP/1.1 401 Unauthorized\nDate: Thu, 04 Feb 2016 19:26:15 GMT\nContent-Length: 0\nContent-Type: text/html; charset=ISO-8859-1\n\n19:26:15.616082 HTTP/1.1 401 Unauthorized\nDate: Thu, 04 Feb 2016 19:26:15 GMT\nContent-Length: 0\nContent-Type: text/html; charset=ISO-8859-1\n```\n\nOn the other hand, here's the output I see when I run my service against 0.11.2:\n\n```\n19:31:40.206717 POST / HTTP/1.1\nContent-Type: application/json-rpc\nCache-Control: no-cache, no-store\nAccept: application/json-rpc\nPragma: no-cache\nUser-Agent: Java/1.8.0_72\nHost: 127.0.0.1:18332\nConnection: keep-alive\nContent-Length: 45\n\n{\"method\":\"estimatefee\",\"id\":\"\",\"params\":[1]}\n\n19:31:40.206868 HTTP/1.0 401 Authorization Required\nDate: Thu, 04 Feb 2016 19:31:40 +0000\nServer: bitcoin-json-rpc/v0.11.2\nWWW-Authenticate: Basic realm=\"jsonrpc\"\nContent-Type: text/html\nContent-Length: 296\n\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n\"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd\">\n<HTML>\n<HEAD>\n<TITLE>Error</TITLE>\n<META HTTP-EQUIV='Content-Type' CONTENT='text/html; charset=ISO-8859-1'>\n</HEAD>\n<BODY><H1>401 Unauthorized.</H1></BODY>\n</HTML>\n\n19:31:40.210566 POST / HTTP/1.1\nContent-Type: application/json-rpc\nCache-Control: no-cache, no-store\nAccept: application/json-rpc\nPragma: no-cache\nUser-Agent: Java/1.8.0_72\nHost: 127.0.0.1:18332\nConnection: keep-alive\nContent-Length: 45\nAuthorization: Basic Yml0Y29pbnJwYzphc2Rm\n\n{\"method\":\"estimatefee\",\"id\":\"\",\"params\":[1]}\n\n19:31:40.210753 HTTP/1.1 200 OK\nDate: Thu, 04 Feb 2016 19:31:40 +0000\nConnection: keep-alive\nContent-Length: 44\nContent-Type: application/json\nServer: bitcoin-json-rpc/v0.11.2\n\n{\"result\":-1.00000000,\"error\":null,\"id\":\"\"}\n\n19:31:40.231422 POST / HTTP/1.1\nContent-Type: application/json-rpc\nCache-Control: no-cache, no-store\nAccept: application/json-rpc\nPragma: no-cache\nUser-Agent: Java/1.8.0_72\nHost: 127.0.0.1:18332\nConnection: keep-alive\nAuthorization: Basic Yml0Y29pbnJwYzphc2Rm\nContent-Length: 45\n\n{\"method\":\"estimatefee\",\"id\":\"\",\"params\":[2]}\n\n19:31:40.231624 HTTP/1.1 200 OK\nDate: Thu, 04 Feb 2016 19:31:40 +0000\nConnection: keep-alive\nContent-Length: 43\nContent-Type: application/json\nServer: bitcoin-json-rpc/v0.11.2\n\n{\"result\":0.00022187,\"error\":null,\"id\":\"\"}\n```\n\nSo, offhand there is a clear difference in the response from bitcoind; it seems to be no longer returning the HTML. I'm not completely sure that this is what causes Java's Authenticator class to break, but it sounds like a distinct possibility. It /appears/ that the way Java's Authenticator class works is that it makes an initial unauthenticated request, then upon parsing a 401 response it sets the Authorization header on future requests. Still not sure why this would be a problem on Linux but not OS X.\n\nHowever, this does explain why I can upgrade my node from 0.11.2 to 0.12 while the service is still running and the RPC requests continue to work - it's only after restarting my service that the calls fail.\n\n**Edit:@laanwj** cleaned up the post a bit to manually demux the TCP streams; the transport-layer details make it hard to see the forest for the trees. I think tcpdump has an option to show TCP stream content instead of raw packets, but this will do.\n",
      "created_at" : "2016-02-04T19:44:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-180019559",
      "id" : 180019559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4MDAxOTU1OQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180019559/reactions"
      },
      "updated_at" : "2016-02-05T09:35:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180019559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/288011?v=4",
         "events_url" : "https://api.github.com/users/jlopp/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jlopp/followers",
         "following_url" : "https://api.github.com/users/jlopp/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jlopp/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jlopp",
         "id" : 288011,
         "login" : "jlopp",
         "node_id" : "MDQ6VXNlcjI4ODAxMQ==",
         "organizations_url" : "https://api.github.com/users/jlopp/orgs",
         "received_events_url" : "https://api.github.com/users/jlopp/received_events",
         "repos_url" : "https://api.github.com/users/jlopp/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jlopp/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jlopp/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jlopp"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think this is the key `WWW-Authenticate: Basic realm=\"jsonrpc\"`. No such header in the new response.\n",
      "created_at" : "2016-02-05T09:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-180272208",
      "id" : 180272208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4MDI3MjIwOA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180272208/reactions"
      },
      "updated_at" : "2016-02-05T09:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180272208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jlopp Can you test if  #7472 solves your problem?\n",
      "created_at" : "2016-02-05T09:53:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-180277627",
      "id" : 180277627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4MDI3NzYyNw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180277627/reactions"
      },
      "updated_at" : "2016-02-05T09:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180277627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ":+1: Confirmed fixed; thanks!\n",
      "created_at" : "2016-02-05T18:05:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7462#issuecomment-180473251",
      "id" : 180473251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7462",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4MDQ3MzI1MQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180473251/reactions"
      },
      "updated_at" : "2016-02-05T18:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/180473251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/288011?v=4",
         "events_url" : "https://api.github.com/users/jlopp/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jlopp/followers",
         "following_url" : "https://api.github.com/users/jlopp/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jlopp/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jlopp",
         "id" : 288011,
         "login" : "jlopp",
         "node_id" : "MDQ6VXNlcjI4ODAxMQ==",
         "organizations_url" : "https://api.github.com/users/jlopp/orgs",
         "received_events_url" : "https://api.github.com/users/jlopp/received_events",
         "repos_url" : "https://api.github.com/users/jlopp/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jlopp/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jlopp/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jlopp"
      }
   }
]
