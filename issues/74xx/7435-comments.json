[
   {
      "author_association" : "MEMBER",
      "body" : "@theuni Do you know if libevent has built-in IPv4/IPv6 address parsing, or does it suffer from the same issue, that it's completely OS dependent?\n",
      "created_at" : "2016-01-29T12:29:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7435#issuecomment-176729859",
      "id" : 176729859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7435",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE3NjcyOTg1OQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/176729859/reactions"
      },
      "updated_at" : "2016-01-29T12:29:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/176729859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This problem results from the relaxed parsing standard OS provided IPv4 libraries perform for backwards compatibility reasons. As Zalewski points out in The Tangled Web:\n\n> Although the RFC permits only canonical notations for IP addresses, standard C libraries used by most applications are much more relaxed, accepting noncanonical IPv4 addresses that octal, decimal and hexadecimal notation. [..] As a result the following options are recognized as equivalent: https://127.0.0.1/, http://0x7f.1/, http://017700000001/.\n\nLibevent has a switch to use its own very strict IP parser rather than the standard relaxed ones which are causing this issue:\n\n``` c++\nint\nevutil_inet_pton(int af, const char *src, void *dst)\n{\n#if defined(EVENT__HAVE_INET_PTON) && !defined(USE_INTERNAL_PTON)\n    return inet_pton(af, src, dst);\n#else\n    if (af == AF_INET) {\n        unsigned a,b,c,d;\n        char more;\n        struct in_addr *addr = dst;\n        if (sscanf(src, \"%u.%u.%u.%u%c\", &a,&b,&c,&d,&more) != 4)\n            return 0;\n        if (a > 255) return 0;\n        if (b > 255) return 0;\n        if (c > 255) return 0;\n        if (d > 255) return 0;\n        addr->s_addr = htonl((a<<24) | (b<<16) | (c<<8) | d);\n        return 1;\n#ifdef AF_INET6\n    } else if (af == AF_INET6) {\n```\n\nhttps://github.com/libevent/libevent/blob/1c17cfdd2bea34089f303a2dcbcb05fcacf46cd6/evutil.c#L1933\n\nWe should switch to using the libevent parser.\n",
      "created_at" : "2016-01-29T16:05:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7435#issuecomment-176838330",
      "id" : 176838330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7435",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE3NjgzODMzMA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/176838330/reactions"
      },
      "updated_at" : "2016-01-29T16:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/176838330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=4",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "node_id" : "MDQ6VXNlcjI3NDgxNA==",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   }
]
