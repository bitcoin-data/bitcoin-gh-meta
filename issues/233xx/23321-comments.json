[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for reporting! I tried to reproduce this behaviour (both on master branch and v22.0 tag), but with my setup the `importdescriptors` call is successful:\r\n```\r\n$ ./src/bitcoind -daemon -regtest\r\nBitcoin Core starting\r\n$ ./src/bitcoin-cli -regtest -named createwallet wallet_name=wallet descriptors=true blank=true\r\n{\r\n  \"name\": \"wallet\",\r\n  \"warning\": \"Wallet is an experimental descriptor wallet\"\r\n}\r\n$ cat regtest-descriptors.txt\r\n[\r\n  {\r\n    \"desc\": \"tr([e4445899/49'/1'/0']tprv8ZgxMBicQKsPd8jCeBWsYLEoWxbVgzJDatJ7XkwQ6G3uF4FsHuaziHQ5JZAW4K515nj6kVVwPaNWZSMEcR7aFCwL4tQqTcaoprMKTTtm6Zg/1/*)#mr3llm7f\",\r\n    \"timestamp\": 1634652324,\r\n    \"active\": true,\r\n    \"internal\": true,\r\n    \"range\": [\r\n      0,\r\n      999\r\n    ],\r\n    \"next\": 0\r\n  }\r\n]\r\n$ ./src/bitcoin-cli -regtest importdescriptors \"$(cat regtest-descriptors.txt)\"\r\n[\r\n  {\r\n    \"success\": true\r\n  }\r\n]\r\n```\r\n\r\nWould you mind sharing more information, e.g. the content of your `bitcoin.conf` (obviously you use it, since you didn't start bitcoind with `-regtest` explicitely)?",
      "created_at" : "2021-10-20T13:48:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23321#issuecomment-947685777",
      "id" : 947685777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23321",
      "node_id" : "IC_kwDOABII5844fImR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947685777/reactions"
      },
      "updated_at" : "2021-10-20T13:48:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947685777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok, this is kind of awkward. After few hours of trying to reproduce this issue on my machine, I have found out this only happens in one of our docker images. I haven't found the real reason yet but it seems that `bitcoind` doesn't like something that our data scraping tool for prometheus does. And it also happens only if it's regtest and if wallet with tr descriptor is loaded.\r\nI am going to investigate on this issue tomorrow, it still might be a bug in `bitcoind`. Or in our tool...\r\nAnyway, thanks for your time. I'll let you know as soon as possible.",
      "created_at" : "2021-10-20T16:24:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23321#issuecomment-947830651",
      "id" : 947830651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23321",
      "node_id" : "IC_kwDOABII5844fr97",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947830651/reactions"
      },
      "updated_at" : "2021-10-20T16:24:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947830651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/52073977?v=4",
         "events_url" : "https://api.github.com/users/josef-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josef-v/followers",
         "following_url" : "https://api.github.com/users/josef-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josef-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josef-v",
         "id" : 52073977,
         "login" : "josef-v",
         "node_id" : "MDQ6VXNlcjUyMDczOTc3",
         "organizations_url" : "https://api.github.com/users/josef-v/orgs",
         "received_events_url" : "https://api.github.com/users/josef-v/received_events",
         "repos_url" : "https://api.github.com/users/josef-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josef-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josef-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josef-v"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "As I have promised:\r\nAnother necessary step to reproduce the issue is to call `getwalletinfo` after setting up the wallet and importing the descriptor.\r\nI was able to reproduce it on plain `debian:buster` image with official binaries. I was also able to reproduce it with `pkh` descriptor, so it's probably not related to taproot itself but to descriptor wallet. Wallet with `wpkh` descriptor worked fine (at least `getwalletinfo`), I didn't try any other descriptors.",
      "created_at" : "2021-10-21T07:13:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23321#issuecomment-948323794",
      "id" : 948323794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23321",
      "node_id" : "IC_kwDOABII5844hkXS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948323794/reactions"
      },
      "updated_at" : "2021-10-21T07:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948323794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/52073977?v=4",
         "events_url" : "https://api.github.com/users/josef-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josef-v/followers",
         "following_url" : "https://api.github.com/users/josef-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josef-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josef-v",
         "id" : 52073977,
         "login" : "josef-v",
         "node_id" : "MDQ6VXNlcjUyMDczOTc3",
         "organizations_url" : "https://api.github.com/users/josef-v/orgs",
         "received_events_url" : "https://api.github.com/users/josef-v/received_events",
         "repos_url" : "https://api.github.com/users/josef-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josef-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josef-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josef-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@josef-v: Thanks, with the additional call to `getwalletinfo` I can reproduce it now. Proposed a fix in #23333.",
      "created_at" : "2021-10-21T14:41:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23321#issuecomment-948687406",
      "id" : 948687406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23321",
      "node_id" : "IC_kwDOABII5844i9Iu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948687406/reactions"
      },
      "updated_at" : "2021-10-21T14:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948687406",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
