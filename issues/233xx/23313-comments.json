[
   {
      "author_association" : "MEMBER",
      "body" : "> a. Was I do the right thing to restore the wallet?\r\n\r\nNo. You used `importwallet` which imports a wallet given a text dump file generated by `dumpwallet`. You did not restore your wallet. Because you provided it your wallet file and not a proper dump file, it did nothing. `importwallet` could be better at communicating that, but the RPC is being phased out as it is specific to the legacy wallet which is slated for removal.\r\n\r\n#22541 introduced a proper `restorewallet` RPC which will be available in 23.0.",
      "created_at" : "2021-10-20T02:42:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23313#issuecomment-947270667",
      "id" : 947270667,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313",
      "node_id" : "IC_kwDOABII5844djQL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947270667/reactions"
      },
      "updated_at" : "2021-10-20T02:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947270667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@achow101 @fanquake \r\n\r\nThanks a lot! According to #22541, I tested the methodââjust replace the `wallet.dat`.  It works! Here are some example codes, which I hope can help rookies of bitcoin like me :\r\n\r\nNote: you should leave a `blank space` in front of the codes if you want them private! Or the shell would record it, which may be not safe. Or you can use `-stdin` if necessary. You can check the book 'Groking Bitcoin' for advanced usage.\r\n\r\nFirst, create and use a wallet:\r\n```\r\n# Create a wallet\r\n<blank space>bitcoin-cli createwallet testwallet false false -passphrase=test111 false false true false\r\n\r\n# Unlock it for a while\r\n<blank space>bitcoin-cli -rpcwallet=testwallet walletpassphrase -passphrase=test111 120 \r\n\r\n# Backup and kept `wallet.dat` safe\r\n<blank space>bitcoin-cli -rpcwallet=testwallet backupwallet <your path>/testwallet.dat\r\n\r\n# Get an address for someone who would send me bitcoins\r\nbitcoin-cli -rpcwallet=\"testwallet\" -named getnewaddress address_type=bech32\r\nbc1q7y3uj...unpn9\r\n\r\n# check the private key\r\nbitcoin-cli -rpcwallet=\"testwallet\" dumpprivkey \"bc1q7y3uj...unpn9\"  \r\nKzqZ3UoP...98K\r\n```\r\n\r\nThen, delete the `testwallet` document to mimic the solution that you lost the wallet:\r\n```\r\n# Delete the raw dir\r\n<blank space>rm -r <path of Bitcoin core datadir>/testwallet\r\n\r\n# restart Bitcoin core\r\nbitcoin-cli stop\r\nbitcoind -daemon -conf=<path of the bitcoin.conf file>\r\n```\r\n\r\nNext, create a new wallet:\r\n```\r\n# Create a new wallet\r\n$ <blank space>bitcoin-cli createwallet testwallet2 false false -passphrase=test444 false false true false\r\n\r\n```\r\n\r\nreplace the new `wallet.dat` with the old one and restart `Bitcoin core`\r\n```\r\n# Replace wallet.dat\r\ncd <path of Bitcoin core datadir>/testwallet2\r\nrm wallet.dat\r\n<blank space>cp <your path>/testwallet.dat wallet.dat\r\n\r\n# Restart Bitcoin core\r\nbitcoin-cli stop\r\nbitcoind -daemon -conf=<path of the bitcoin.conf file>\r\n```\r\n\r\nNow, check whether the new wallet could get the same private key of the old address\r\n```\r\n# Unlock it for a while\r\n<blank space>bitcoin-cli -rpcwallet=testwallet2 walletpassphrase -passphrase=test111 120 # You have to use the old passphrase of 'testwallet.dat'\r\n\r\nbitcoin-cli -rpcwallet=\"testwallet2\" dumpprivkey \"bc1q7y3uj...unpn9\"  \r\nKzqZ3UoP...98K\r\n```\r\nDone!\r\n\r\nI think it should be the right way for restoring wallets in current version of `Bitcoin core`, because the old address could be identified by the new, restored-version wallet.\r\n\r\nAlso, the people who owns both the `wallet.dat` and the `passphrase` of the wallet have its despositon. Even though somebody (hakers for example) gets the `wallet.dat`,  it could do nothing about the wallet without the  `passphrase`, because It's hard to use `wallet.dat` to decrypt private keys without `passphrase` mathematically. Am I correct?\r\n\r\nBy the way, it's nice for the developers to add new functions like `restorewallet` in the future, which would be more convenient!\r\n\r\nHere are some other questions:\r\na. Could I backup the wallet just for once? When restoring the wallet, the status of the wallet would be the time I backup, or the latest one of the account?\r\nb. As the `Bitcoin core` project  developing rapidly, is it possible that users could not restore an old wallet in a brand-new version of the software?\r\n\r\n\r\n",
      "created_at" : "2021-10-20T04:00:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23313#issuecomment-947303553",
      "id" : 947303553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313",
      "node_id" : "IC_kwDOABII5844drSB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947303553/reactions"
      },
      "updated_at" : "2021-10-20T04:00:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947303553",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/35643122?v=4",
         "events_url" : "https://api.github.com/users/huangwb8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/huangwb8/followers",
         "following_url" : "https://api.github.com/users/huangwb8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/huangwb8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/huangwb8",
         "id" : 35643122,
         "login" : "huangwb8",
         "node_id" : "MDQ6VXNlcjM1NjQzMTIy",
         "organizations_url" : "https://api.github.com/users/huangwb8/orgs",
         "received_events_url" : "https://api.github.com/users/huangwb8/received_events",
         "repos_url" : "https://api.github.com/users/huangwb8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/huangwb8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/huangwb8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/huangwb8"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This issue tracker is for problems / technical questions related to Bitcoin Core, not for general usage help. You might be better asking your questions on the Bitcoin StackExchange, or IRC.",
      "created_at" : "2021-10-22T12:40:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23313#issuecomment-949594236",
      "id" : 949594236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313",
      "node_id" : "IC_kwDOABII5844mah8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/949594236/reactions"
      },
      "updated_at" : "2021-10-22T12:40:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/949594236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
