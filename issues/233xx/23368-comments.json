[
   {
      "author_association" : "MEMBER",
      "body" : "Looks like a race where the wallet is deleted before the scheduler thread exits and flushes all events?",
      "created_at" : "2021-10-27T11:09:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-952808824",
      "id" : 952808824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII5844yrV4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952808824/reactions"
      },
      "updated_at" : "2021-10-27T11:09:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952808824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~I've bisected it down to #23336.~\r\n\r\nUPDATE. See #23403.",
      "created_at" : "2021-10-28T06:50:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953551644",
      "id" : 953551644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58441gsc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953551644/reactions"
      },
      "updated_at" : "2021-10-31T12:01:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953551644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I've bisected it down to #23336.\r\n\r\nIf this is intermittent, how did you bisect? If there are steps to reproduce, then it would be good to run in valgrind to debug the segmentation fault.\r\n\r\nI couldn't reproduce this locally yet.",
      "created_at" : "2021-10-28T11:37:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953761870",
      "id" : 953761870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58442UBO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953761870/reactions"
      },
      "updated_at" : "2021-10-28T11:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953761870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If this is intermittent, how did you bisect?\r\n\r\nBy looping `make check` :tiger2: ",
      "created_at" : "2021-10-28T12:05:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953780849",
      "id" : 953780849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58442Ypx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953780849/reactions"
      },
      "updated_at" : "2021-10-28T12:05:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953780849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\nCould this [log](https://api.cirrus-ci.com/v1/task/4535156796030976/logs/ci.log) be relevant?",
      "created_at" : "2021-10-28T12:21:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953792472",
      "id" : 953792472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58442bfY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953792472/reactions"
      },
      "updated_at" : "2021-10-28T12:21:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953792472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, as I said before this looks like a race where the wallet is deleted before stopping the scheduler: https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-952808824\r\n\r\nIIRC, the order should be:\r\n\r\n* stop scheduler\r\n* delete wallet\r\n* delete scheduler",
      "created_at" : "2021-10-28T12:27:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953796339",
      "id" : 953796339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58442cbz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953796339/reactions"
      },
      "updated_at" : "2021-10-28T12:27:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953796339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "<details><summary>Reproduced locally in valgrind</summary>\r\n\r\n```diff\r\ndiff --git a/src/scheduler.cpp b/src/scheduler.cpp\r\nindex 162cced6c7..fa1864822f 100644\r\n--- a/src/scheduler.cpp\r\n+++ b/src/scheduler.cpp\r\n@@ -57,6 +57,7 @@ void CScheduler::serviceQueue()\r\n             Function f = taskQueue.begin()->second;\r\n             taskQueue.erase(taskQueue.begin());\r\n \r\n+    UninterruptibleSleep(10ms);\r\n             {\r\n                 // Unlock before calling f, so it can reschedule itself or another task\r\n                 // without deadlocking:\r\ndiff --git a/src/wallet/test/wallet_test_fixture.cpp b/src/wallet/test/wallet_test_fixture.cpp\r\nindex fc744ebe5b..c9cecdb15c 100644\r\n--- a/src/wallet/test/wallet_test_fixture.cpp\r\n+++ b/src/wallet/test/wallet_test_fixture.cpp\r\n@@ -8,7 +8,11 @@ WalletTestingSetup::WalletTestingSetup(const std::string& chainName)\r\n     : TestingSetup(chainName),\r\n       m_wallet(m_node.chain.get(), \"\", CreateMockWalletDatabase())\r\n {\r\n+    UninterruptibleSleep(10ms);\r\n     m_wallet.LoadWallet();\r\n+    UninterruptibleSleep(10ms);\r\n     m_chain_notifications_handler = m_node.chain->handleNotifications({ &m_wallet, [](CWallet*) {} });\r\n+    UninterruptibleSleep(10ms);\r\n     m_wallet_client->registerRpcs();\r\n+    UninterruptibleSleep(10ms);\r\n }\r\n```\r\n\r\nCMD:\r\n\r\n```\r\nwhile ( make &&  valgrind ./src/test/test_bitcoin -t psbt_wallet_tests --catch_system_errors=no -l test_suite -- DEBUG_LOG_OUT ) ; do true ; done\r\n```\r\n\r\n\r\n```\r\n2021-10-28T12:31:41.480133Z [scheduler] [validationinterface.cpp:226] [operator()] BlockConnected: block hash=000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f block height=0\r\n2021-10-28T12:31:43.918896Z [scheduler] [logging/timer.h:51] [Log] Enter: lock contention cs_wallet, wallet/wallet.cpp:1263 started\r\n2021-10-28T12:31:51.669069Z [test] [wallet/scriptpubkeyman.h:233] [WalletLogPrintf] [default wallet] keypool added 1000 keys (0 internal), size=1000 (0 internal)\r\n2021-10-28T12:31:51.675717Z [test] [wallet/scriptpubkeyman.h:233] [WalletLogPrintf] [default wallet] LegacyScriptPubKeyMan::NewKeyPool rewrote keypool\r\n2021-10-28T12:31:52.210553Z [scheduler] [logging/timer.h:51] [Log] Enter: lock contention cs_wallet, wallet/wallet.cpp:1263 completed (7131451Î¼s)\r\n==516904== Thread 2 b-scheduler:\r\n==516904== Invalid read of size 8\r\n==516904==    at 0x484995B: bcmp (vg_replace_strmem.c:1203)\r\n==516904==    by 0xCA6B80: Compare (uint256.h:44)\r\n==516904==    by 0xCA6B80: operator< (uint256.h:48)\r\n==516904==    by 0xCA6B80: operator() (stl_function.h:386)\r\n==516904==    by 0xCA6B80: _M_lower_bound (stl_tree.h:1919)\r\n==516904==    by 0xCA6B80: find (stl_tree.h:2534)\r\n==516904==    by 0xCA6B80: count (stl_map.h:1216)\r\n==516904==    by 0xCA6B80: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1054)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==  Address 0x1e9659a0 is 32 bytes inside a block of size 536 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A42A0: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A42A0: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A42A0: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A42A0: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A42A0: std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AAF: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AAF: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AAF: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0x6CB2DA: allocate (new_allocator.h:127)\r\n==516904==    by 0x6CB2DA: allocate (alloc_traits.h:460)\r\n==516904==    by 0x6CB2DA: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0x6CB2DA: std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >* std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_create_node<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:611)\r\n==516904==    by 0x6CB1A7: std::pair<std::_Rb_tree_iterator<std::pair<uint256 const, CWalletTx> >, bool> std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_emplace_unique<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:2382)\r\n==516904==    by 0x6C3C9D: emplace<const std::piecewise_construct_t &, std::tuple<const uint256 &>, std::tuple<std::shared_ptr<const CTransaction> &> > (stl_map.h:577)\r\n==516904==    by 0x6C3C9D: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:25)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904== \r\n==516904== Invalid read of size 1\r\n==516904==    at 0x4849929: bcmp (vg_replace_strmem.c:1203)\r\n==516904==    by 0xCA6B80: Compare (uint256.h:44)\r\n==516904==    by 0xCA6B80: operator< (uint256.h:48)\r\n==516904==    by 0xCA6B80: operator() (stl_function.h:386)\r\n==516904==    by 0xCA6B80: _M_lower_bound (stl_tree.h:1919)\r\n==516904==    by 0xCA6B80: find (stl_tree.h:2534)\r\n==516904==    by 0xCA6B80: count (stl_map.h:1216)\r\n==516904==    by 0xCA6B80: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1054)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==  Address 0x1e9659a0 is 32 bytes inside a block of size 536 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A42A0: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A42A0: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A42A0: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A42A0: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A42A0: std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AAF: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AAF: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AAF: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0x6CB2DA: allocate (new_allocator.h:127)\r\n==516904==    by 0x6CB2DA: allocate (alloc_traits.h:460)\r\n==516904==    by 0x6CB2DA: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0x6CB2DA: std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >* std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_create_node<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:611)\r\n==516904==    by 0x6CB1A7: std::pair<std::_Rb_tree_iterator<std::pair<uint256 const, CWalletTx> >, bool> std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_emplace_unique<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:2382)\r\n==516904==    by 0x6C3C9D: emplace<const std::piecewise_construct_t &, std::tuple<const uint256 &>, std::tuple<std::shared_ptr<const CTransaction> &> > (stl_map.h:577)\r\n==516904==    by 0x6C3C9D: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:25)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904== \r\n==516904== Invalid read of size 8\r\n==516904==    at 0xCA6B93: _M_lower_bound (stl_tree.h:0)\r\n==516904==    by 0xCA6B93: find (stl_tree.h:2534)\r\n==516904==    by 0xCA6B93: count (stl_map.h:1216)\r\n==516904==    by 0xCA6B93: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1054)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==    by 0x4DD5C83: execute_native_thread_routine (thread.cc:82)\r\n==516904==  Address 0x1e965990 is 16 bytes inside a block of size 536 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A42A0: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A42A0: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A42A0: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A42A0: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A42A0: std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AAF: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AAF: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AAF: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0x6CB2DA: allocate (new_allocator.h:127)\r\n==516904==    by 0x6CB2DA: allocate (alloc_traits.h:460)\r\n==516904==    by 0x6CB2DA: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0x6CB2DA: std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >* std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_create_node<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:611)\r\n==516904==    by 0x6CB1A7: std::pair<std::_Rb_tree_iterator<std::pair<uint256 const, CWalletTx> >, bool> std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_emplace_unique<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:2382)\r\n==516904==    by 0x6C3C9D: emplace<const std::piecewise_construct_t &, std::tuple<const uint256 &>, std::tuple<std::shared_ptr<const CTransaction> &> > (stl_map.h:577)\r\n==516904==    by 0x6C3C9D: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:25)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904== \r\n==516904== Invalid read of size 8\r\n==516904==    at 0x4849958: bcmp (vg_replace_strmem.c:1203)\r\n==516904==    by 0xCA6BB0: Compare (uint256.h:44)\r\n==516904==    by 0xCA6BB0: operator< (uint256.h:48)\r\n==516904==    by 0xCA6BB0: operator() (stl_function.h:386)\r\n==516904==    by 0xCA6BB0: find (stl_tree.h:2536)\r\n==516904==    by 0xCA6BB0: count (stl_map.h:1216)\r\n==516904==    by 0xCA6BB0: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1054)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==  Address 0x1e966410 is 32 bytes inside a block of size 536 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A42A0: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A42A0: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A42A0: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A42A0: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A42A0: std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AAF: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AAF: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AAF: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0x6CB2DA: allocate (new_allocator.h:127)\r\n==516904==    by 0x6CB2DA: allocate (alloc_traits.h:460)\r\n==516904==    by 0x6CB2DA: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0x6CB2DA: std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >* std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_create_node<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:611)\r\n==516904==    by 0x6CB1A7: std::pair<std::_Rb_tree_iterator<std::pair<uint256 const, CWalletTx> >, bool> std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_emplace_unique<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:2382)\r\n==516904==    by 0x6C3DC6: emplace<const std::piecewise_construct_t &, std::tuple<const uint256 &>, std::tuple<std::shared_ptr<const CTransaction> &> > (stl_map.h:577)\r\n==516904==    by 0x6C3DC6: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:30)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904== \r\n==516904== Invalid read of size 1\r\n==516904==    at 0x484992D: bcmp (vg_replace_strmem.c:1203)\r\n==516904==    by 0xCA6BB0: Compare (uint256.h:44)\r\n==516904==    by 0xCA6BB0: operator< (uint256.h:48)\r\n==516904==    by 0xCA6BB0: operator() (stl_function.h:386)\r\n==516904==    by 0xCA6BB0: find (stl_tree.h:2536)\r\n==516904==    by 0xCA6BB0: count (stl_map.h:1216)\r\n==516904==    by 0xCA6BB0: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1054)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==  Address 0x1e966410 is 32 bytes inside a block of size 536 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A42A0: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A42A0: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A42A0: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A42A0: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A42A0: std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AAF: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AAF: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AAF: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0x6CB2DA: allocate (new_allocator.h:127)\r\n==516904==    by 0x6CB2DA: allocate (alloc_traits.h:460)\r\n==516904==    by 0x6CB2DA: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0x6CB2DA: std::_Rb_tree_node<std::pair<uint256 const, CWalletTx> >* std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_create_node<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:611)\r\n==516904==    by 0x6CB1A7: std::pair<std::_Rb_tree_iterator<std::pair<uint256 const, CWalletTx> >, bool> std::_Rb_tree<uint256, std::pair<uint256 const, CWalletTx>, std::_Select1st<std::pair<uint256 const, CWalletTx> >, std::less<uint256>, std::allocator<std::pair<uint256 const, CWalletTx> > >::_M_emplace_unique<std::piecewise_construct_t const&, std::tuple<uint256 const&>, std::tuple<std::shared_ptr<CTransaction const>&> >(std::piecewise_construct_t const&, std::tuple<uint256 const&>&&, std::tuple<std::shared_ptr<CTransaction const>&>&&) (stl_tree.h:2382)\r\n==516904==    by 0x6C3DC6: emplace<const std::piecewise_construct_t &, std::tuple<const uint256 &>, std::tuple<std::shared_ptr<const CTransaction> &> > (stl_map.h:577)\r\n==516904==    by 0x6C3DC6: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:30)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904== \r\n==516904== Invalid read of size 8\r\n==516904==    at 0xCA6C20: _M_ptr (unique_ptr.h:173)\r\n==516904==    by 0xCA6C20: get (unique_ptr.h:422)\r\n==516904==    by 0xCA6C20: operator-> (unique_ptr.h:416)\r\n==516904==    by 0xCA6C20: IsMine (wallet.cpp:1339)\r\n==516904==    by 0xCA6C20: IsMine (wallet.cpp:1325)\r\n==516904==    by 0xCA6C20: IsMine (wallet.cpp:1348)\r\n==516904==    by 0xCA6C20: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1056)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==    by 0x4DD5C83: execute_native_thread_routine (thread.cc:82)\r\n==516904==  Address 0x1e965000 is 64 bytes inside a block of size 72 free'd\r\n==516904==    at 0x4843669: operator delete(void*) (vg_replace_malloc.c:923)\r\n==516904==    by 0x1A455F: deallocate (new_allocator.h:145)\r\n==516904==    by 0x1A455F: deallocate (alloc_traits.h:492)\r\n==516904==    by 0x1A455F: _M_put_node (stl_tree.h:565)\r\n==516904==    by 0x1A455F: _M_drop_node (stl_tree.h:632)\r\n==516904==    by 0x1A455F: std::_Rb_tree<uint256, std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > >, std::_Select1st<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > >, std::less<uint256>, std::allocator<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > > >::_M_erase(std::_Rb_tree_node<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > >*) (stl_tree.h:1889)\r\n==516904==    by 0x1A4AD5: ~_Rb_tree (stl_tree.h:984)\r\n==516904==    by 0x1A4AD5: ~map (stl_map.h:302)\r\n==516904==    by 0x1A4AD5: CWallet::~CWallet() (wallet.h:375)\r\n==516904==    by 0x6C39D9: psbt_wallet_tests::psbt_updater_test_invoker() (wallet_test_fixture.h:20)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904==    by 0x48F112A: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:815)\r\n==516904==    by 0x48F13F6: boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) [clone .constprop.0] (framework.ipp:740)\r\n==516904==  Block was alloc'd at\r\n==516904==    at 0x4840FF5: operator new(unsigned long) (vg_replace_malloc.c:422)\r\n==516904==    by 0xCC5731: allocate (new_allocator.h:127)\r\n==516904==    by 0xCC5731: allocate (alloc_traits.h:460)\r\n==516904==    by 0xCC5731: _M_get_node (stl_tree.h:561)\r\n==516904==    by 0xCC5731: _M_create_node<const std::piecewise_construct_t &, std::tuple<uint256 &&>, std::tuple<> > (stl_tree.h:611)\r\n==516904==    by 0xCC5731: std::_Rb_tree_iterator<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > > std::_Rb_tree<uint256, std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > >, std::_Select1st<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > >, std::less<uint256>, std::allocator<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > > >::_M_emplace_hint_unique<std::piecewise_construct_t const&, std::tuple<uint256&&>, std::tuple<> >(std::_Rb_tree_const_iterator<std::pair<uint256 const, std::unique_ptr<ScriptPubKeyMan, std::default_delete<ScriptPubKeyMan> > > >, std::piecewise_construct_t const&, std::tuple<uint256&&>&&, std::tuple<>&&) (stl_tree.h:2429)\r\n==516904==    by 0xCB269C: operator[] (stl_map.h:520)\r\n==516904==    by 0xCB269C: CWallet::SetupLegacyScriptPubKeyMan() (wallet.cpp:3118)\r\n==516904==    by 0xCB42EE: CWallet::GetOrCreateLegacyScriptPubKeyMan() (wallet.cpp:3103)\r\n==516904==    by 0x6C3AF7: psbt_wallet_tests::psbt_updater_test::test_method() (psbt_wallet_tests.cpp:18)\r\n==516904==    by 0x6C3706: psbt_wallet_tests::psbt_updater_test_invoker() (psbt_wallet_tests.cpp:16)\r\n==516904==    by 0x1CF036: boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:117)\r\n==516904==    by 0x48AF1D1: boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) (function_template.hpp:763)\r\n==516904==    by 0x48B59E0: boost::execution_monitor::catch_signals(boost::function<int ()> const&) (function_template.hpp:763)\r\n==516904==    by 0x48B5F20: boost::execution_monitor::execute(boost::function<int ()> const&) (execution_monitor.ipp:1301)\r\n==516904==    by 0x48B5FD9: boost::execution_monitor::vexecute(boost::function<void ()> const&) (execution_monitor.ipp:1397)\r\n==516904==    by 0x48D59B1: boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) (unit_test_monitor.ipp:49)\r\n==516904== \r\n==516904== Invalid read of size 8\r\n==516904==    at 0xCA6C24: IsMine (wallet.cpp:1339)\r\n==516904==    by 0xCA6C24: IsMine (wallet.cpp:1325)\r\n==516904==    by 0xCA6C24: IsMine (wallet.cpp:1348)\r\n==516904==    by 0xCA6C24: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1056)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==    by 0x4DD5C83: execute_native_thread_routine (thread.cc:82)\r\n==516904==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\r\n==516904== \r\n==516904== \r\n==516904== Process terminating with default action of signal 11 (SIGSEGV): dumping core\r\n==516904==  Access not within mapped region at address 0x0\r\n==516904==    at 0xCA6C24: IsMine (wallet.cpp:1339)\r\n==516904==    by 0xCA6C24: IsMine (wallet.cpp:1325)\r\n==516904==    by 0xCA6C24: IsMine (wallet.cpp:1348)\r\n==516904==    by 0xCA6C24: CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool, bool) (wallet.cpp:1056)\r\n==516904==    by 0xCA8460: SyncTransaction (wallet.cpp:1204)\r\n==516904==    by 0xCA8460: CWallet::blockConnected(CBlock const&, int) (wallet.cpp:1268)\r\n==516904==    by 0xCA864D: non-virtual thunk to CWallet::blockConnected(CBlock const&, int) (gthr-default.h:0)\r\n==516904==    by 0x84DEF4: node::(anonymous namespace)::NotificationsProxy::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*) (interfaces.cpp:357)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: Iterate<(lambda at validationinterface.cpp:222:30)> (validationinterface.cpp:83)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:222)\r\n==516904==    by 0xA3AE33: operator() (validationinterface.cpp:224)\r\n==516904==    by 0xA3AE33: __invoke_impl<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:61)\r\n==516904==    by 0xA3AE33: __invoke_r<void, (lambda at validationinterface.cpp:224:5) &> (invoke.h:111)\r\n==516904==    by 0xA3AE33: std::_Function_handler<void (), CMainSignals::BlockConnected(std::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_9>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB857D: operator() (std_function.h:560)\r\n==516904==    by 0xAB857D: SingleThreadedSchedulerClient::ProcessQueue() (scheduler.cpp:177)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:74)\r\n==516904==    by 0xAB99A0: __invoke<void (SingleThreadedSchedulerClient::*&)(), SingleThreadedSchedulerClient *&> (invoke.h:96)\r\n==516904==    by 0xAB99A0: __call<void, 0UL> (functional:420)\r\n==516904==    by 0xAB99A0: operator()<, void> (functional:503)\r\n==516904==    by 0xAB99A0: __invoke_impl<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:61)\r\n==516904==    by 0xAB99A0: __invoke_r<void, std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient *))()> &> (invoke.h:111)\r\n==516904==    by 0xAB99A0: std::_Function_handler<void (), std::_Bind<void (SingleThreadedSchedulerClient::*(SingleThreadedSchedulerClient*))()> >::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xAB7870: operator() (std_function.h:560)\r\n==516904==    by 0xAB7870: CScheduler::serviceQueue() (scheduler.cpp:64)\r\n==516904==    by 0x734480: operator() (setup_common.cpp:140)\r\n==516904==    by 0x734480: __invoke_impl<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:61)\r\n==516904==    by 0x734480: __invoke_r<void, (lambda at test/util/setup_common.cpp:140:86) &> (invoke.h:111)\r\n==516904==    by 0x734480: std::_Function_handler<void (), ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0>::_M_invoke(std::_Any_data const&) (std_function.h:291)\r\n==516904==    by 0xB2164F: util::TraceThread(char const*, std::function<void ()>) (std_function.h:560)\r\n==516904==    by 0x7343E6: __invoke_impl<void, void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:61)\r\n==516904==    by 0x7343E6: __invoke<void (*)(const char *, std::function<void ()>), const char *, (lambda at test/util/setup_common.cpp:140:86)> (invoke.h:96)\r\n==516904==    by 0x7343E6: _M_invoke<0UL, 1UL, 2UL> (std_thread.h:253)\r\n==516904==    by 0x7343E6: operator() (std_thread.h:260)\r\n==516904==    by 0x7343E6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(char const*, std::function<void ()>), char const*, ChainTestingSetup::ChainTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&)::$_0> > >::_M_run() (std_thread.h:211)\r\n==516904==    by 0x4DD5C83: execute_native_thread_routine (thread.cc:82)\r\n==516904==  If you believe this happened as a result of a stack\r\n==516904==  overflow in your program's main thread (unlikely but\r\n==516904==  possible), you can try to increase the size of the\r\n==516904==  main thread stack using the --main-stacksize= flag.\r\n==516904==  The main thread stack size used in this run was 8388608.\r\n==516904== \r\n==516904== HEAP SUMMARY:\r\n==516904==     in use at exit: 41,357,628 bytes in 7,056 blocks\r\n==516904==   total heap usage: 181,382 allocs, 174,326 frees, 261,014,118 bytes allocated\r\n==516904== \r\n==516904== LEAK SUMMARY:\r\n==516904==    definitely lost: 216 bytes in 1 blocks\r\n==516904==    indirectly lost: 61 bytes in 3 blocks\r\n==516904==      possibly lost: 65,444 bytes in 699 blocks\r\n==516904==    still reachable: 41,291,907 bytes in 6,353 blocks\r\n==516904==         suppressed: 0 bytes in 0 blocks\r\n==516904== Rerun with --leak-check=full to see details of leaked memory\r\n==516904== \r\n==516904== Use --track-origins=yes to see where uninitialised values come from\r\n==516904== For lists of detected and suppressed errors, rerun with: -s\r\n==516904== ERROR SUMMARY: 95 errors from 10 contexts (suppressed: 0 from 0)\r\n\r\n```\r\n\r\n</details>",
      "created_at" : "2021-10-28T12:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953803873",
      "id" : 953803873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58442eRh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953803873/reactions"
      },
      "updated_at" : "2021-10-28T12:37:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953803873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Another case of this here https://cirrus-ci.com/task/6184680090238976\r\n\r\nre: https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953551644\r\n\r\n> I've bisected it down to #23336.\r\n\r\nJust to clarify, I think based on recent comments we do not actually think this issue relates to #23336. Bisect result was just from failure happening unreliably.",
      "created_at" : "2021-10-29T17:52:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-954934965",
      "id" : 954934965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58446ya1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954934965/reactions"
      },
      "updated_at" : "2021-10-29T17:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954934965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n> CMD:\r\n> \r\n> ```\r\n> while ( make &&  valgrind ./src/test/test_bitcoin -t psbt_wallet_tests --catch_system_errors=no -l test_suite -- DEBUG_LOG_OUT ) ; do true ; done\r\n> ```\r\n\r\nWhat are your `configure` options? \r\n\r\n",
      "created_at" : "2021-10-31T08:06:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-955655491",
      "id" : 955655491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58449iVD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955655491/reactions"
      },
      "updated_at" : "2021-10-31T08:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955655491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Another case of this here https://cirrus-ci.com/task/6184680090238976\r\n> \r\n> re: [#23368 (comment)](https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-953551644)\r\n> \r\n> > I've bisected it down to #23336.\r\n> \r\n> Just to clarify, I think based on recent comments we do not actually think this issue relates to #23336. Bisect result was just from failure happening unreliably.\r\n\r\nCorrect. See #23403.",
      "created_at" : "2021-10-31T12:00:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-955686487",
      "id" : 955686487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58449p5X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955686487/reactions"
      },
      "updated_at" : "2021-10-31T12:00:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955686487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "One more CI [failure](https://api.cirrus-ci.com/v1/task/6245565043310592/logs/ci.log).",
      "created_at" : "2021-10-31T18:37:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23368#issuecomment-955771368",
      "id" : 955771368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23368",
      "node_id" : "IC_kwDOABII58449-no",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955771368/reactions"
      },
      "updated_at" : "2021-10-31T18:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955771368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
