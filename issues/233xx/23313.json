{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Hi~\r\nI just have some questions about restoring a wallet. Most users had showed how to use Bitcoin core, but few focus on how to restore the wallet. I've read the book \"grokking Bitcoin\", where Kalle said that we should keep `wallet.dat` file safe. My try is as following: \r\n\r\nFirst I create a test wallet:\r\n```\r\n$ bitcoin-cli createwallet testwallet false false -passphrase=test111 false false true false\r\n```\r\n\r\nNext, I started to backup the wallet and kept it safe. This step seemed that the passphrase was not necessary.\r\n```\r\n$  bitcoin-cli -rpcwallet=testwallet backupwallet ~/testwallet.dat\r\n```\r\n\r\nGet an adress for someone who would send me some bitcoins:\r\n```\r\n$ bitcoin-cli -rpcwallet=\"testwallet\" -named getnewaddress address_type=bech32\r\nbc1q7y3uj...unpn9\r\n\r\n# Get private key\r\n$ bitcoin-cli -rpcwallet=\"testwallet\" dumpprivkey \"bc1q7y3uj...unpn9\"  \r\nKzqZ3UoP...98K\r\n```\r\n\r\nSupposed that I've got the pay, but suddenly my server was exploded. I decided to restore the wallet in a new Linux server. After install `Bitcoin core` software completely, I created a new wallet:\r\n```\r\n$ bitcoin-cli createwallet testwallet2 false false -passphrase=test444 false false true false \r\n```\r\n\r\nUnlock it for 120s:\r\n```\r\n$ bitcoin-cli -rpcwallet=testwallet2 walletpassphrase -passphrase=test444 120 \r\n```\r\n\r\nRestored the wallet:\r\n```\r\n$ bitcoin-cli -rpcwallet=testwallet2 importwallet <testwallet.dat> \r\n# without any error information\r\n```\r\n\r\nHowever, it seemed that the wallet could not access the private key\r\n```\r\n$ bitcoin-cli -rpcwallet=\"testwallet2\" dumpprivkey \"bc1q7y3uj...unpn9\"  \r\nerror code: -4\r\nerror message:\r\nPrivate key for address bc1q7y3uj...unpn9 is not known\r\n```\r\n\r\nHere are some questions:\r\na. Was I do the right thing to restore the wallet?\r\nb. If I was right, it means that anyone (hackers of my servers, for example) who own the `testwallet.dat` file could get all the bitcoins. In the `importwallet` step, I didn't need to use any passphrase (test111) of the previous wallet. It seemed not very safe, because my server may be easy to be cracked. So I guess I was wrong, but I have no idea how to do this. Any suggestions?\r\n\r\nMy `Bitcoin core` version is :\r\n```\r\n\"version\": 220000,\r\n\"subversion\": \"/Satoshi:22.0.0/\"\r\n```\r\n\r\n",
   "closed_at" : "2021-10-22T12:40:05Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313/comments",
   "created_at" : "2021-10-20T02:03:03Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/23313",
   "id" : 1030892273,
   "labels" : [
      {
         "color" : "006688",
         "default" : false,
         "description" : null,
         "id" : 477890092,
         "name" : "Questions and Help",
         "node_id" : "MDU6TGFiZWw0Nzc4OTAwOTI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII5849cirx",
   "number" : 23313,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313/timeline",
   "title" : "About restore the wallet",
   "updated_at" : "2021-10-22T12:40:05Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23313",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/35643122?v=4",
      "events_url" : "https://api.github.com/users/huangwb8/events{/privacy}",
      "followers_url" : "https://api.github.com/users/huangwb8/followers",
      "following_url" : "https://api.github.com/users/huangwb8/following{/other_user}",
      "gists_url" : "https://api.github.com/users/huangwb8/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/huangwb8",
      "id" : 35643122,
      "login" : "huangwb8",
      "node_id" : "MDQ6VXNlcjM1NjQzMTIy",
      "organizations_url" : "https://api.github.com/users/huangwb8/orgs",
      "received_events_url" : "https://api.github.com/users/huangwb8/received_events",
      "repos_url" : "https://api.github.com/users/huangwb8/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/huangwb8/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/huangwb8/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/huangwb8"
   }
}
