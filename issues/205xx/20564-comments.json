[
   {
      "author_association" : "MEMBER",
      "body" : "I'm deliberately not introducing a name for the 70016 constant, or reuse any of the existing constants. The number isn't tied to any of those; it's just... we're observing that no clients below this number exist that support it.",
      "created_at" : "2020-12-03T23:11:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738437273",
      "id" : 738437273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODQzNzI3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T23:11:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738437273",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Reluctant ACK. I think this is very messed up for reasons mentioned by Matt [here](https://github.com/btcsuite/btcd/issues/1661#issuecomment-737242665). I think a P2P protocol that is not permissionlessly extensible is unworthy of bitcoin.",
      "created_at" : "2020-12-03T23:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738456560",
      "id" : 738456560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODQ1NjU2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T23:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738456560",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not even sure what's best here, considering an issue with another implementation.\r\nI think considering that this code is non-consensus, very simple, and won't degrade much further âÂ it's fine we pay this cost.\r\nReluctant ACK as well.",
      "created_at" : "2020-12-04T01:06:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738483669",
      "id" : 738483669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODQ4MzY2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T01:06:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738483669",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "While this patch is technically sound and it will most likely make it in 0.21, the problem with protocol version bumps exists in the long term.\r\n\r\nA central body deciding what version numbers are and what goes in them is not suitable for a protocol that is developed in a decentralized manner. Eventually some disagreement may tear apart the sequentiality of the protocol version resulting in something like:\r\n* implementation1 uses `70019` for feature X and Y\r\n* implementation2 uses `70019` for feature A and B\r\n* implementation3 uses `80123` for baking potatoes\r\n\r\nMaybe it would be more flexible to introduce new functionality via service bits. Hopefully nobody will disconnect if they see an unknown service bit set. Also, they are gossiped, so one can have an idea what to expect from a peer before connecting and choose peers based on their advertised capabilities.",
      "created_at" : "2020-12-04T04:50:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738563105",
      "id" : 738563105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODU2MzEwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T04:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738563105",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild I completely agree with the flaws of using protocol versions for feature negotiation. That's not what this is about.\n\nThis is a one-time courtesy for existing clients on the network to not cause disruption. It isn't tying features to versions, and perhaps this patch can even be temporary.",
      "created_at" : "2020-12-04T04:55:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738564357",
      "id" : 738564357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODU2NDM1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T04:55:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738564357",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r535865759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535865759"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Could mention that this is a temporary workaround, safe to be reverted end of 2021 or beginning of 2022",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-04T06:26:55Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r535865759",
      "id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg2NTc1OQ==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 544686148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535865759",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(Added 0.21 milestone for now)",
      "created_at" : "2020-12-04T06:29:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738594859",
      "id" : 738594859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODU5NDg1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T06:29:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738594859",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 152b0be70ab5e910a6682d2178c2e81c781a2f9b - agree with @laanwj about @TheBlueMatt [point](https://github.com/btcsuite/btcd/issues/1661#issuecomment-737242665). - Though this \"we-fix-your-software\" seems acceptable. I already stated my concerns and long term risks with doing such \"fixes\" (it leads to lesser attention on p2p changes and probably fewer interoperability tests with alternative implementations [because things magically work, a.k.a. Core fixes it]).",
      "created_at" : "2020-12-04T08:11:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738634379",
      "id" : 738634379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODYzNDM3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T08:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738634379",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Maybe it would be more flexible to introduce new functionality via service bits. \r\n \r\nThe problem with service bits is that there are (by definition) too few of them, and allocation of them is also a centralized project (lacking centralized allocation, or in presence of disagreement, the meaning of those bits starts to be ambiguous very soonâwe've seen this with block versions). I do not think it would have been a better choice.",
      "created_at" : "2020-12-04T09:24:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738672922",
      "id" : 738672922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODY3MjkyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T09:24:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738672922",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Also, avoiding to connect to \"unknown\" service bits is worse than disconnection on an unknown message, because it makes sybil attacks easier. An attacker might pollute the service bits in your p2p-address manager.",
      "created_at" : "2020-12-04T09:38:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738680446",
      "id" : 738680446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODY4MDQ0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T09:38:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738680446",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I wish we would use this as an opportunity to do sendaddrv2 negotiation in the right place (between version and verack). We're having to change the code and BIP already, and the logic of \"no software is known to support BIP155 that doesn't announce at least that protocol version number\" means that such a change would be safe.\r\n\r\nNegotiating the addr relay version up front and treating it as const for the peer's lifetime is a much simpler mental model. It means we can be sure that a peer's addr relay version won't change between receiving an addr and trying to relay it to that peer.\r\n\r\nCurrently, if we receive a tor3 address, we'll choose which peers to relay it to in RelayAddress() without consideration of whether those peers support addrv2. When it's time to send our addrs to those peers in SendMessages(), we won't be able to serialize them. I think that effectively means any non-addrv2 peers become black holes for addrv2 addresses.\r\n\r\nWe solve that by only considering addrv2 peers as the relays on RelayAddress(), and that's much easier to reason about if we know that the peer's address relay version is constant and won't change out under us.",
      "created_at" : "2020-12-04T10:33:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738707025",
      "id" : 738707025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODcwNzAyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T10:33:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738707025",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery I vaguely remember that there were some problems with sending messages between `version` and `verack`, but not sure.",
      "created_at" : "2020-12-04T10:36:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738708445",
      "id" : 738708445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODcwODQ0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T10:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738708445",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested 152b0be70ab5e910a6682d2178c2e81c781a2f9b against [Breez](https://breez.technology) and a standalone Lnd  0.11.1-beta in neutrino mode (which uses btcd as a library). They no longer hang up on my bitcoind.",
      "created_at" : "2020-12-04T16:57:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738894472",
      "id" : 738894472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODg5NDQ3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T16:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738894472",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK. I am currently implementing BIP 155 in NBitcoin which announces version 70012. This means that even when some clients implement addrv2 they will not receive the signal and share addrv2 addresses. @NicolasDorier what do you thing?\r\n\r\nFwiw I agree with @vasild that signaling new functionality via service bits would be more flexible. Signaling a feature with a new message was surprising to me.",
      "created_at" : "2020-12-04T17:45:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738922020",
      "id" : 738922020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODkyMjAyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T17:45:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738922020",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/127973?v=4",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "node_id" : "MDQ6VXNlcjEyNzk3Mw==",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is not the time and place to discuss how version negotiation should be done in general. But to avoid reiterating things elsewhere: service flags are for feature discovery, not for feature negotiation. There are only a limited number of them, and for the purpose of negotiation they have no advantage over just send* messages like sendcmpct, sendheaders, ...\n\n@laanwj Sending between version and verack works, we do it for wtxid relay. I don' think there is a particularly strong reason to change that for BIP155 at this point though.\n\n@jnewbery I agree that would be slightly cleaner, but I don't think we should make such a change at this point in an rc anymore.\n\n@lontivero That's a good point against this, philosophically. In practice there is no problem for you though - you can announce 70016 as soon as you support BIP155. As all protocol changes since 70012 were just enabling new messages, there would be no other action required from you (70013 adds feefilter, 70014 adds compact blocks, 70016 adds wtxid relay; but if you don't care about any of these, just ignore the messages they send to negotiate support - they only actually change behavior if you respond to those negotiation messages).",
      "created_at" : "2020-12-04T17:57:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738928981",
      "id" : 738928981,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODkyODk4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T17:59:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738928981",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK then. ",
      "created_at" : "2020-12-04T18:04:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-738932473",
      "id" : 738932473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODkzMjQ3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T18:04:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738932473",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/127973?v=4",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "node_id" : "MDQ6VXNlcjEyNzk3Mw==",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "A swift Concept ACK for purely practical reasons!",
      "created_at" : "2020-12-04T23:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-739079337",
      "id" : 739079337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTA3OTMzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T23:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739079337",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537081970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537081970"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We're not prophets...",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-06T17:08:55Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537081970",
      "id" : 537081970,
      "in_reply_to_id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA4MTk3MA==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 545728654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537081970",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537092645"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537092645"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This change literally violates the bip, keeping the hack longer than one or two major versions would be problematic for too many reasons",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-06T18:06:05Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537092645",
      "id" : 537092645,
      "in_reply_to_id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5MjY0NQ==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 545733268,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537092645",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537095131"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537095131"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see how it violates the BIP. It just chooses to only use the feature in some cases.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-06T18:19:19Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537095131",
      "id" : 537095131,
      "in_reply_to_id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5NTEzMQ==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 545734386,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537095131",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537096452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537096452"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, closing discussion. I still think this should be reverted eventually.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-06T18:27:13Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537096452",
      "id" : 537096452,
      "in_reply_to_id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5NjQ1Mg==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 545735002,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537096452",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537096650"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537096650"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, agree with that, but I don't know the time frame.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-06T18:28:15Z",
      "diff_hunk" : "@@ -2365,7 +2365,13 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::VERACK));\n \n         // Signal ADDRv2 support (BIP155).\n-        m_connman.PushMessage(&pfrom, msg_maker.Make(NetMsgType::SENDADDRV2));\n+        if (greatest_common_version >= 70016) {\n+            // BIP155 defines addrv2 and sendaddrv2 for all protocol versions, but some\n+            // implementations reject messages they don't know. As a courtesy, don't send\n+            // it to nodes with a version before 70016, as no software is known to support\n+            // BIP155 that doesn't announce at least that protocol version number.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537096650",
      "id" : 537096650,
      "in_reply_to_id" : 535865759,
      "line" : 2370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5NjY1MA==",
      "original_commit_id" : "152b0be70ab5e910a6682d2178c2e81c781a2f9b",
      "original_line" : 2370,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 545735085,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537096650",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj Sending between version and verack works, we do it for wtxid relay. I don' think there is a particularly strong reason to change that for BIP155 at this point though.\r\n\r\nMaybe, I don't know, it makes some sense to handle different extensions in a consistent way.",
      "created_at" : "2020-12-07T08:46:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-739769975",
      "id" : 739769975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTc2OTk3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T08:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739769975",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK 152b0be70ab5e910a6682d2178c2e81c781a2f9b\r\n\r\nBitcoin-S needed to [update to allow parsing of unknown messages](https://github.com/bitcoin-s/bitcoin-s/pull/2315) to be able to sync with 0.21.0rc2. I think this change makes sense so clients don't receive messages they aren't expecting.",
      "created_at" : "2020-12-07T14:05:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-739938627",
      "id" : 739938627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTkzODYyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T14:18:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739938627",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added a commit to move the sending of sendaddrv2 to before sending verack, matching https://github.com/bitcoin/bips/pull/1043.",
      "created_at" : "2020-12-07T17:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740056596",
      "id" : 740056596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDA1NjU5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T17:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740056596",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK b2eae522631289a9e4b7a2e80a0f761a86b65093",
      "created_at" : "2020-12-07T17:21:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740059824",
      "id" : 740059824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDA1OTgyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T17:21:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740059824",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK b2eae522631289a9e4b7a2e80a0f761a86b65093",
      "created_at" : "2020-12-07T17:22:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740060537",
      "id" : 740060537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDA2MDUzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T17:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740060537",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK b2eae522631289a9e4b7a2e80a0f761a86b65093 ",
      "created_at" : "2020-12-07T17:55:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740079093",
      "id" : 740079093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDA3OTA5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T17:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740079093",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK ccd0eaab953e77d80891702243835a548708a365",
      "created_at" : "2020-12-07T18:01:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740082454",
      "id" : 740082454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDA4MjQ1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T18:01:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740082454",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537713661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537713661"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we want to disconnect here if the sendaddrv2 message is received after VERACK (assuming that the suggested change to the BIP here: https://github.com/bitcoin/bips/pull/1043#discussion_r537711662 is taken)",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-07T18:01:50Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537713661",
      "id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcxMzY2MQ==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 546400144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537713661",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537730772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537730772"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In theory we are free to not strictly enforce the BIP. So even with the suggested BIP change, the code here as is shouldn't cause any issues.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-07T18:27:50Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r537730772",
      "id" : 537730772,
      "in_reply_to_id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzczMDc3Mg==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 546420322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537730772",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK deef9340aede6503951b133d8ef24686f833946d\r\n",
      "created_at" : "2020-12-07T18:50:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740109219",
      "id" : 740109219,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDEwOTIxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T18:50:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740109219",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK deef9340aede65039",
      "created_at" : "2020-12-07T18:58:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740114271",
      "id" : 740114271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDExNDI3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T18:58:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740114271",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sorry for the extra pushes. I didn't at first change the message handling to accept incoming sendaddrv2 before verack (thanks @jnewbery), and that the tests needed adapting as well. Making the test changes without the corresponding net_processing changes fails the tests now.",
      "created_at" : "2020-12-07T19:00:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740115323",
      "id" : 740115323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDExNTMyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T19:00:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740115323",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK deef9340aede6503951b133d8ef24686f833946d",
      "created_at" : "2020-12-08T00:14:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740260587",
      "id" : 740260587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDI2MDU4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T00:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740260587",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538120123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538120123"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Disconnecting if we receive `sendaddrv2` after `verack` might make sense for the following reasons:\r\n\r\n* Allowing `sendaddrv2` after `verack` defeats the purpose of knowing for sure that the peer does not support `addrv2` (if we don't receive `sendaddrv2` before `verack`)\r\n* If an odd implementation starts sending `sendaddrv2` after `verack` and we accept it, then we would be forever doomed to accept it because if we start disconnecting at some point in the future, then we would \"break the existent app and network\" (sounds familiar?). \r\n* It is what we do wrt wtxidrelay",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T08:08:21Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538120123",
      "id" : 538120123,
      "in_reply_to_id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODEyMDEyMw==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 546837814,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538120123",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20599 (net processing: Tolerate sendheaders and sendcmpct messages before verack by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-08T12:32:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740592609",
      "id" : 740592609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDU5MjYwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T20:03:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740592609",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538607510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538607510"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed. I'd be in favor of aligning BIPs 155 and 339 on this, and their implementations, unless there is a good reason not to.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T17:03:30Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538607510",
      "id" : 538607510,
      "in_reply_to_id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODYwNzUxMA==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 547439921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538607510",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to require SENDADDRV2 to arrive before VERACK.",
      "created_at" : "2020-12-08T17:38:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740788505",
      "id" : 740788505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDc4ODUwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T17:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740788505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538650420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538650420"
         }
      },
      "author_association" : "MEMBER",
      "body" : "closing as resolved",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T17:43:05Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538650420",
      "id" : 538650420,
      "in_reply_to_id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1MDQyMA==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 547475219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T17:43:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538650420",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T17:45:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740793220",
      "id" : 740793220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDc5MzIyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T17:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740793220",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T18:30:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-740823622",
      "id" : 740823622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDgyMzYyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T18:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740823622",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538768255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538768255"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe refer to BIP155 here if you retouch; if you do I'll update #20592 similarly to refer to BIP339",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T20:03:35Z",
      "diff_hunk" : "@@ -2535,6 +2541,17 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {\n+        if (pfrom.fSuccessfullyConnected) {\n+            // Disconnect peers that send SENDADDRV2 message after VERACK; this\n+            // must be negotiated between VERSION and VERACK.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538768255",
      "id" : 538768255,
      "line" : 2547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2ODI1NQ==",
      "original_commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "original_line" : 2547,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 547586048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T20:06:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538768255",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538803403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538803403"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'll do so if the BIP change is merged before this PR is.",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-08T20:59:34Z",
      "diff_hunk" : "@@ -2535,6 +2541,17 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {\n+        if (pfrom.fSuccessfullyConnected) {\n+            // Disconnect peers that send SENDADDRV2 message after VERACK; this\n+            // must be negotiated between VERSION and VERACK.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r538803403",
      "id" : 538803403,
      "in_reply_to_id" : 538768255,
      "line" : 2547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwMzQwMw==",
      "original_commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "original_line" : 2547,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 547626876,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-08T20:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/538803403",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Backported in #20612",
      "created_at" : "2020-12-10T10:50:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#issuecomment-742443410",
      "id" : 742443410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20564",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjQ0MzQxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T10:50:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742443410",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r542471462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542471462"
         }
      },
      "author_association" : "MEMBER",
      "body" : "proposed in #20646",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-14T15:25:35Z",
      "diff_hunk" : "@@ -2535,6 +2541,17 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {\n+        if (pfrom.fSuccessfullyConnected) {\n+            // Disconnect peers that send SENDADDRV2 message after VERACK; this\n+            // must be negotiated between VERSION and VERACK.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r542471462",
      "id" : 542471462,
      "in_reply_to_id" : 538768255,
      "line" : 2547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ3MTQ2Mg==",
      "original_commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "original_line" : 2547,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 551477398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-14T15:25:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542471462",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r542786655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542786655"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See this comment which provides reasons not to disconnect: https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744704209",
      "commit_id" : "1583498fb6781c01ca2f33c09319ed793964c574",
      "created_at" : "2020-12-14T21:06:40Z",
      "diff_hunk" : "@@ -2535,6 +2541,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    if (msg_type == NetMsgType::SENDADDRV2) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20564#discussion_r542786655",
      "id" : 542786655,
      "in_reply_to_id" : 537713661,
      "line" : 2544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4NjY1NQ==",
      "original_commit_id" : "ccd0eaab953e77d80891702243835a548708a365",
      "original_line" : 2544,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 24,
      "pull_request_review_id" : 551892813,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20564",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-14T21:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542786655",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
