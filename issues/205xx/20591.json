{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "The function ComputeTimeSmart in wallet.cpp assume that transaction are discovered in the right order.\r\nMoreover the 'smarttime' determination algorithm is coded with realtime scenario in mind and not rescanning of old block.\r\n\r\nThe functional test demonstrate that if the user import a wallet, then rescan only recent history, and then rescan the entire history, the older transaction discovered would have an incorrect time determination.\r\nIn the context of rescanning old block, the only time value that as a meaning is the blocktime.\r\n\r\nThat's why I've fixed the problem with a simple separation between rescanning of old block and realtime time determination. The fix is written to have no impact on every realtime scenario and only impact the behaviour during a rescanning process.\r\nThis PR Fixes #20181.\r\n\r\nTo be fair, I don't think that this bug could be triggered with the wallet GUI, because it always proceed with a proper rescan.\r\nBut RPC API provide the possibility to trigger it. I've discovered it, because Specter desktop v0.10.0 was impacted. (https://github.com/cryptoadvance/specter-desktop/issues/680).",
   "closed_at" : "2021-09-28T22:18:52Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
      "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
      "followers_url" : "https://api.github.com/users/meshcollider/followers",
      "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/meshcollider",
      "id" : 3211283,
      "login" : "meshcollider",
      "node_id" : "MDQ6VXNlcjMyMTEyODM=",
      "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
      "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
      "repos_url" : "https://api.github.com/users/meshcollider/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/meshcollider"
   },
   "comments" : 30,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20591/comments",
   "created_at" : "2020-12-07T17:31:11Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20591/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/20591",
   "id" : 758704104,
   "labels" : [
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20591/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NTMzODMyNDg1",
   "number" : 20591,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/20591.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20591",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/20591.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20591"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20591/timeline",
   "title" : "wallet, bugfix: fix ComputeTimeSmart function during rescanning process.",
   "updated_at" : "2021-09-28T22:18:52Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20591",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/75384375?v=4",
      "events_url" : "https://api.github.com/users/BitcoinTsunami/events{/privacy}",
      "followers_url" : "https://api.github.com/users/BitcoinTsunami/followers",
      "following_url" : "https://api.github.com/users/BitcoinTsunami/following{/other_user}",
      "gists_url" : "https://api.github.com/users/BitcoinTsunami/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/BitcoinTsunami",
      "id" : 75384375,
      "login" : "BitcoinTsunami",
      "node_id" : "MDQ6VXNlcjc1Mzg0Mzc1",
      "organizations_url" : "https://api.github.com/users/BitcoinTsunami/orgs",
      "received_events_url" : "https://api.github.com/users/BitcoinTsunami/received_events",
      "repos_url" : "https://api.github.com/users/BitcoinTsunami/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/BitcoinTsunami/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/BitcoinTsunami/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/BitcoinTsunami"
   }
}
