[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21302 (wallet: createwallet examples for descriptor wallets by S3RK)\n* #20892 (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n* #20773 (refactor: split CWallet::Create by S3RK)\n* #17211 (Allow fundrawtransaction and walletcreatefundedpsbt to take external inputs by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-02T15:58:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737322770",
      "id" : 737322770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzMyMjc3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-22T15:54:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737322770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "the error message and error code should be the same when an invalid BTC/kb amount is rejected",
      "created_at" : "2020-12-02T16:19:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737336814",
      "id" : 737336814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzMzNjgxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T16:19:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737336814",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK ",
      "created_at" : "2020-12-02T16:22:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737338817",
      "id" : 737338817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzMzODgxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T16:22:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737338817",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> the error message and error code should be the same when an invalid BTC/kb amount is rejected\r\n\r\nThe other \"too-low\" fee messages I am aware of are:\r\n\r\nAmount out of range\r\nFee rate (%s) is lower than the minimum fee rate setting\r\ntxfee cannot be less than min relay tx fee\r\ntxfee cannot be less than wallet min fee\r\nInvalid amount\r\nInvalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\r\nInvalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\r\nInvalid amount for -fallbackfee=<amount>: '%s'\r\nInvalid amount for -%s=<amount>: '%s\r\n",
      "created_at" : "2020-12-02T16:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737352141",
      "id" : 737352141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzM1MjE0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T20:41:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737352141",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It would be confusing if 0.00000001 and 0.000000001 produced different error messages",
      "created_at" : "2020-12-02T16:45:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737354096",
      "id" : 737354096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzM1NDA5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T16:45:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737354096",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fee_rate=0.000000001\r\n```\r\nerror code: -3\r\nerror message:\r\nInvalid amount\r\n```\r\n...which is not a great error message, as it indicates neither which argument is invalid, nor why. How about:\r\n\r\nfee_rate=0.00000001\r\n```\r\nerror code: -3\r\nerror message:\r\nInvalid amount for fee_rate (must be at least 0.001 sat/vB)\r\n```\r\n\r\nThis is close to these similar error messages:\r\n\r\nInvalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\r\nInvalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\r\nInvalid amount for -fallbackfee=<amount>: '%s'\r\nInvalid amount for -%s=<amount>: '%s",
      "created_at" : "2020-12-02T20:52:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-737488369",
      "id" : 737488369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzQ4ODM2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T00:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737488369",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just found a bug in RPC send. It only allows fee rates to be passed as a number, not as a string. Fixing with a commit here since it fits with the changes. Edit: fixed in #20573 (merged).",
      "created_at" : "2020-12-03T17:00:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-738139238",
      "id" : 738139238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODEzOTIzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-05T17:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738139238",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ...which is not a great error message, as it indicates neither which argument is invalid, nor why.\r\n\r\nThen the error message should be fixed. But that is an issue that can be solve completely separate. It shouldn't be a reason to make the behaviour inconsistent.",
      "created_at" : "2020-12-03T17:38:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-738168517",
      "id" : 738168517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODE2ODUxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T17:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738168517",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > ...which is not a great error message, as it indicates neither which argument is invalid, nor why.\r\n> \r\n> Then the error message should be fixed. But that is an issue that can be solve completely separate. It shouldn't be a reason to make the behaviour inconsistent.\r\n\r\nDone. Fixing the rpc send bug and improving the AmountFromValue error messages in separate pulls.",
      "created_at" : "2020-12-04T12:28:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-738757772",
      "id" : 738757772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODc1Nzc3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T12:28:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738757772",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536067105"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536067105"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Am testing CFeeRate errors separately from AmountFromValue errors, as a follow-up PR will improve the messages of both.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-04T12:33:05Z",
      "diff_hunk" : "@@ -252,9 +252,15 @@ def run_test(self):\n         assert_raises_rpc_error(-6, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\",\n             self.nodes[2].sendmany, amounts={address: 10}, fee_rate=0.99999999)\n \n-        self.log.info(\"Test sendmany raises if fee_rate of 0 or -1 is passed\")\n-        assert_raises_rpc_error(-6, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\",\n-            self.nodes[2].sendmany, amounts={address: 10}, fee_rate=0)\n+        self.log.info(\"Test sendmany raises RPC error when invalid fee rates are passed\")\n+        msg = \"Invalid amount\"\n+        # Test zero and values non-representable by CFeeRate\n+        for invalid_value in [\"0\", 0, 0.00000001, 0.0009, 0.00099999]:\n+            assert_raises_rpc_error(-3, msg, self.nodes[2].sendmany, amounts={address: 10}, fee_rate=invalid_value)\n+        # Test values rejected by ParseFixedPoint() called in AmountFromValue()\n+        for invalid_value in [\"\", 0.000000001, 1.111111111, 11111111111]:\n+            assert_raises_rpc_error(-3, msg, self.nodes[2].sendmany, amounts={address: 1.0}, fee_rate=invalid_value)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536067105",
      "id" : 536067105,
      "line" : 279,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA2NzEwNQ==",
      "original_commit_id" : "03b30e978a1379bde09b80ce38f70d317d974ec1",
      "original_line" : 279,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : 26,
      "pull_request_review_id" : 544918906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536067105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536699356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536699356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In b70a0e1b3bdb3aff4f3b41dc7a0bd6e52d67e6af:\r\n\r\nThis is C++ code internals referenced in the functional test comments. IMO that doesn't belong here since it's basically unmaintainable and I don't think we do this anywhere else. Unless there is a really strong reason I am not seeing, please remove it. IMO the test with the log message above is explanatory enough.\r\n\r\nSame for all the other places this occurs in this commit.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-05T11:33:23Z",
      "diff_hunk" : "@@ -765,8 +765,9 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: -1, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Amount is not a number or string\",\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n-            assert_raises_rpc_error(-3, \"Invalid amount\",\n-                node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+            # Test values rejected by ParseFixedPoint() called in AmountFromValue()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536699356",
      "id" : 536699356,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjY5OTM1Ng==",
      "original_commit_id" : "b70a0e1b3bdb3aff4f3b41dc7a0bd6e52d67e6af",
      "original_line" : 768,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 545580473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536699356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The bug fix is that the response is consistent, though I agree it somewhat less user friendly. I have a follow-up that improves the error responses here and in AmountFromValue.",
      "created_at" : "2020-12-05T12:10:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739242928",
      "id" : 739242928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTI0MjkyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-05T12:10:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739242928",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536719700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536719700"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We do refer to the implementation sometimes, perhaps most often when defining constants. \n\nThis is to document why these values are tested separately for the same message. I have a follow-up to improve these messages in different ways, e.g. not just \"Invalid amount\" but also provide context to the user about which field and in some cases the valid range or values. Could remove the documentation in the follow-up if it's not useful, or provide more general info on what is being tested.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-05T12:16:29Z",
      "diff_hunk" : "@@ -765,8 +765,9 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: -1, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Amount is not a number or string\",\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n-            assert_raises_rpc_error(-3, \"Invalid amount\",\n-                node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+            # Test values rejected by ParseFixedPoint() called in AmountFromValue()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r536719700",
      "id" : 536719700,
      "in_reply_to_id" : 536699356,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjcxOTcwMA==",
      "original_commit_id" : "b70a0e1b3bdb3aff4f3b41dc7a0bd6e52d67e6af",
      "original_line" : 768,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 545583045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536719700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I wonder if this check shouldn't be in AmountFromValue and apply to fundrawtransaction and walletcreatefundedpsbt as well.ï¿¼ï¿¼",
      "created_at" : "2020-12-05T13:27:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739251112",
      "id" : 739251112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTI1MTExMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-05T13:27:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739251112",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "E.g. zero is ok for those but between zero and 0.001 sat/vB is invalid.",
      "created_at" : "2020-12-05T13:29:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739251362",
      "id" : 739251362,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTI1MTM2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-05T13:30:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739251362",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "the check should be in AmountFromValue. My issue is purely about parsing decimals, not about specific rpcs.\r\n\r\nTo clarify, I might be misunderstanding what you fix here, but approach NACK if this is a fix for the parsing issue I created.",
      "created_at" : "2020-12-05T13:49:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739253473",
      "id" : 739253473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTI1MzQ3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-06T18:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739253473",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pulled in the `CFeeRate::FromSatB` and `CFeeRate::FromBtcKb` named constructors from the setfeerate PR, added a `CFeeRate::IsZero()` class member helper, and used these to build a `FeeRateFromValueInSatB()` utility function. Added unit test coverage for each of these. This should handle the case of parsing decimals for fee rates constructed from sat/vB UniValue values.",
      "created_at" : "2020-12-06T19:59:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739554863",
      "id" : 739554863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTU1NDg2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-06T19:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739554863",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r537455026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537455026"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note to self: update this line after #20573 is merged and `send` can take string fee rate values\r\n```suggestion\r\n        for zero_value in [0, 0.000, 0.00000000, \"0\", \"0.000\", \"0.00000000\"]:\r\n```",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-07T12:05:29Z",
      "diff_hunk" : "@@ -302,16 +302,31 @@ def run_test(self):\n                 self.test_send(from_wallet=w0, to_wallet=w1, amount=1, conf_target=v, estimate_mode=mode,\n                     expect_error=(-3, \"Expected type number for conf_target, got {}\".format(k)))\n \n-        # Test setting explicit fee rate just below the minimum and at zero.\n+        # Test setting explicit fee rate just below the minimum.\n         self.log.info(\"Explicit fee rate raises RPC error 'fee rate too low' if fee_rate of 0.99999999 is passed\")\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n+        msg = \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999, expect_error=(-4, msg))\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999, expect_error=(-4, msg))\n+\n+        self.log.info(\"Explicit fee rate raises RPC error when invalid fee rates are passed\")\n+        # Test fee_rate with zero values\n+        msg = \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        for zero_value in [0, 0.000, 0.00000000]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r537455026",
      "id" : 537455026,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ1NTAyNg==",
      "original_commit_id" : "7d6c6aaa646b2b589a91d40c38a58803d26cc9a8",
      "original_line" : 314,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 546085946,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537455026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r537455711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537455711"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note to self: update this line as well after #20573 is merged\r\n```suggestion\r\n        for invalid_value in [\"\", 0.000000001, 1.111111111, 11111111111]:\r\n```",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-07T12:06:37Z",
      "diff_hunk" : "@@ -302,16 +302,31 @@ def run_test(self):\n                 self.test_send(from_wallet=w0, to_wallet=w1, amount=1, conf_target=v, estimate_mode=mode,\n                     expect_error=(-3, \"Expected type number for conf_target, got {}\".format(k)))\n \n-        # Test setting explicit fee rate just below the minimum and at zero.\n+        # Test setting explicit fee rate just below the minimum.\n         self.log.info(\"Explicit fee rate raises RPC error 'fee rate too low' if fee_rate of 0.99999999 is passed\")\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n+        msg = \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999, expect_error=(-4, msg))\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999, expect_error=(-4, msg))\n+\n+        self.log.info(\"Explicit fee rate raises RPC error when invalid fee rates are passed\")\n+        # Test fee_rate with zero values\n+        msg = \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        for zero_value in [0, 0.000, 0.00000000]:\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=zero_value, expect_error=(-4, msg))\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=zero_value, expect_error=(-4, msg))\n+        # Test fee_rate values non-representable by CFeeRate\n+        msg = \"Invalid amount\"\n+        for invalid_value in [0.00000001, 0.0009, 0.00099999]:\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=invalid_value, expect_error=(-3, msg))\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=invalid_value, expect_error=(-3, msg))\n+        # Test fee_rate values rejected by ParseFixedPoint\n+        for invalid_value in [0.000000001, 1.111111111, 11111111111]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r537455711",
      "id" : 537455711,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ1NTcxMQ==",
      "original_commit_id" : "7d6c6aaa646b2b589a91d40c38a58803d26cc9a8",
      "original_line" : 323,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 546086727,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/537455711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-07T13:03:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739905294",
      "id" : 739905294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTkwNTI5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T13:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739905294",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2020-12-07T14:58:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739970803",
      "id" : 739970803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczOTk3MDgwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-07T14:58:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/739970803",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-10T08:19:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-742361285",
      "id" : 742361285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjM2MTI4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T08:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742361285",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r540426017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540426017"
         }
      },
      "author_association" : "MEMBER",
      "body" : "updated",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-10T19:08:55Z",
      "diff_hunk" : "@@ -302,16 +302,31 @@ def run_test(self):\n                 self.test_send(from_wallet=w0, to_wallet=w1, amount=1, conf_target=v, estimate_mode=mode,\n                     expect_error=(-3, \"Expected type number for conf_target, got {}\".format(k)))\n \n-        # Test setting explicit fee rate just below the minimum and at zero.\n+        # Test setting explicit fee rate just below the minimum.\n         self.log.info(\"Explicit fee rate raises RPC error 'fee rate too low' if fee_rate of 0.99999999 is passed\")\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n+        msg = \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999, expect_error=(-4, msg))\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999, expect_error=(-4, msg))\n+\n+        self.log.info(\"Explicit fee rate raises RPC error when invalid fee rates are passed\")\n+        # Test fee_rate with zero values\n+        msg = \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        for zero_value in [0, 0.000, 0.00000000]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r540426017",
      "id" : 540426017,
      "in_reply_to_id" : 537455026,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQyNjAxNw==",
      "original_commit_id" : "7d6c6aaa646b2b589a91d40c38a58803d26cc9a8",
      "original_line" : 314,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 549517140,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540426017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r540426078"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540426078"
         }
      },
      "author_association" : "MEMBER",
      "body" : "updated",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2020-12-10T19:09:04Z",
      "diff_hunk" : "@@ -302,16 +302,31 @@ def run_test(self):\n                 self.test_send(from_wallet=w0, to_wallet=w1, amount=1, conf_target=v, estimate_mode=mode,\n                     expect_error=(-3, \"Expected type number for conf_target, got {}\".format(k)))\n \n-        # Test setting explicit fee rate just below the minimum and at zero.\n+        # Test setting explicit fee rate just below the minimum.\n         self.log.info(\"Explicit fee rate raises RPC error 'fee rate too low' if fee_rate of 0.99999999 is passed\")\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999,\n-            expect_error=(-4, \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n-        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0,\n-            expect_error=(-4, \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"))\n+        msg = \"Fee rate (0.999 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=0.99999999, expect_error=(-4, msg))\n+        self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=0.99999999, expect_error=(-4, msg))\n+\n+        self.log.info(\"Explicit fee rate raises RPC error when invalid fee rates are passed\")\n+        # Test fee_rate with zero values\n+        msg = \"Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\"\n+        for zero_value in [0, 0.000, 0.00000000]:\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=zero_value, expect_error=(-4, msg))\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=zero_value, expect_error=(-4, msg))\n+        # Test fee_rate values non-representable by CFeeRate\n+        msg = \"Invalid amount\"\n+        for invalid_value in [0.00000001, 0.0009, 0.00099999]:\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, fee_rate=invalid_value, expect_error=(-3, msg))\n+            self.test_send(from_wallet=w0, to_wallet=w1, amount=1, arg_fee_rate=invalid_value, expect_error=(-3, msg))\n+        # Test fee_rate values rejected by ParseFixedPoint\n+        for invalid_value in [0.000000001, 1.111111111, 11111111111]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r540426078",
      "id" : 540426078,
      "in_reply_to_id" : 537455711,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQyNjA3OA==",
      "original_commit_id" : "7d6c6aaa646b2b589a91d40c38a58803d26cc9a8",
      "original_line" : 323,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 549517224,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540426078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated now that #20573 has been merged.\r\n",
      "created_at" : "2020-12-10T20:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-742768770",
      "id" : 742768770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0Mjc2ODc3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-17T11:37:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742768770",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The ZMQ data race that causes the CI failure in https://cirrus-ci.com/task/6709748533821440?command=ci#L4578 is unrelated.",
      "created_at" : "2020-12-11T00:06:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-742879118",
      "id" : 742879118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0Mjg3OTExOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-11T00:06:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742879118",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I really like these changes that do a lot of good things in ~40 lines (not counting tests) and fix #20534, but seeing no enthusiasm here, closing.",
      "created_at" : "2021-01-03T16:05:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-753638965",
      "id" : 753638965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYzODk2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T16:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753638965",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-opening for review club to hopefully get some eyes here.\r\n",
      "created_at" : "2021-01-14T11:12:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-760129376",
      "id" : 760129376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDEyOTM3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-14T11:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760129376",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Suggest the following labels be added, please: `TX fees and policy`, `Refactoring`, `Review club`",
      "created_at" : "2021-01-15T12:30:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-760914983",
      "id" : 760914983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDkxNDk4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-15T12:30:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760914983",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @fanquake ",
      "created_at" : "2021-01-15T16:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-761050539",
      "id" : 761050539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MTA1MDUzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-15T16:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/761050539",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560603365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560603365"
         }
      },
      "author_association" : "MEMBER",
      "body" : "54dcf5ab2e25f6eacf8955ab18a0cd92ef165a4e: Is there anything special about `11111111111` that wont be caught by one of the existing `AmountFromValue` tests? Looks like it's just a big number. Same for `1e-9`, which is tested above.\r\n\r\nNot sure about the value of comments like `values rejected by ParseFixedPoint raise invalid amount`. What's useful about naming the function called internally by `AmountFromValue` and the runtime error? We don't actually check for `invalid amount`, just that something throws. None of these tests will fail with:\r\n```diff\r\ndiff --git a/src/rpc/util.cpp b/src/rpc/util.cpp\r\nindex 1a83b9222..0199fd539 100644\r\n--- a/src/rpc/util.cpp\r\n+++ b/src/rpc/util.cpp\r\n@@ -81,7 +81,7 @@ CAmount AmountFromValue(const UniValue& value)\r\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Amount is not a number or string\");\r\n     CAmount amount;\r\n     if (!ParseFixedPoint(value.getValStr(), 8, &amount))\r\n-        throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount\");\r\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"just throw whatever!\");\r\n     if (!MoneyRange(amount))\r\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Amount out of range\");\r\n     return amount;\r\n```\r\nIn general these seem like notes that will likely just become outdated in regards to the code.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T01:02:31Z",
      "diff_hunk" : "@@ -214,6 +217,30 @@ BOOST_AUTO_TEST_CASE(rpc_parse_monetary_values)\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e+11\")), UniValue); //overflow error\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e11\")), UniValue); //overflow error signless\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"93e+9\")), UniValue); //overflow error\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560603365",
      "id" : 560603365,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDYwMzM2NQ==",
      "original_commit_id" : "54dcf5ab2e25f6eacf8955ab18a0cd92ef165a4e",
      "original_line" : 222,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 571785019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560603365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560606792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560606792"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In d2b40010fab5a1ef7f6d946da076d4de6b442e09: This is simple enough that you can combine e4a3bceef3d9483961c1f0a2f70b6a4e9a225acd and ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b into it. Otherwise we are starting to get very granular commits.\r\n\r\nIt's also inconsistent with other changes in this PR, as in 85e0fe3f783ebaabbf9b27e0b452ba8073905db5 you add the `FromSatB` & `FromBtcKb` constructors and refactor to use them at the same time.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T01:12:25Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ class CFeeRate\n public:\n     /** Fee rate of 0 satoshis per kB */\n     CFeeRate() : nSatoshisPerK(0) { }\n+    bool IsZero() const { return nSatoshisPerK == 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560606792",
      "id" : 560606792,
      "line" : 37,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDYwNjc5Mg==",
      "original_commit_id" : "d2b40010fab5a1ef7f6d946da076d4de6b442e09",
      "original_line" : 37,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 4,
      "pull_request_review_id" : 571785019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560606792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560613154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560613154"
         }
      },
      "author_association" : "MEMBER",
      "body" : "3df75585cc2595ff3d1065e6fdaa4e9df8716594:\r\n\r\n> [Am testing CFeeRate errors separately from AmountFromValue errors, as a follow-up PR will improve the messages of both.](https://github.com/bitcoin/bitcoin/pull/20546/commits/3df75585cc2595ff3d1065e6fdaa4e9df8716594#r536067105)\r\n\r\nI think it'd be better to add the additional tests when the different error messages are added. Otherwise at the moment we've got 24 additional \"tests\" which just pass values into wallet RPCs, and check that `invalid value` is thrown. Basically all following the same code path.\r\n\r\nSame point as in a different commit, I don't think details like `ParseFixedPoint()` belong in comments here.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T01:30:47Z",
      "diff_hunk" : "@@ -273,6 +273,9 @@ def run_test(self):\n         msg = \"Invalid amount\"\n         for invalid_value in [0.00000001, 0.00099999, \"0.00000001\", \"0.00099999\"]:\n             assert_raises_rpc_error(-3, msg, self.nodes[2].sendmany, amounts={address: 10}, fee_rate=invalid_value)\n+        # Test fee_rate values rejected by ParseFixedPoint",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560613154",
      "id" : 560613154,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDYxMzE1NA==",
      "original_commit_id" : "3df75585cc2595ff3d1065e6fdaa4e9df8716594",
      "original_line" : 276,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : null,
      "pull_request_review_id" : 571785019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560613154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560616468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560616468"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8: I must be misunderstanding this, otherwise it looks like it just does the same thing twice. i.e:\r\n```python\r\nnode.fundrawtransaction(fee_rate: 0.00000001) -> throw(\"Invalid amount\")\r\nnode.fundrawtransaction(fee_rate: 0.00099999) -> throw(\"Invalid amount\")\r\nnode.fundrawtransaction(fee_rate: 0.00000001) -> throw(\"Invalid amount\")\r\nnode.fundrawtransaction(fee_rate: 0.00099999) -> throw(\"Invalid amount\")\r\n```\r\n\r\nSame for most of the other files in this commit. ",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T01:40:46Z",
      "diff_hunk" : "@@ -768,6 +768,10 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Invalid amount\",\n                 node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+        # Test fee_rate values non-representable by CFeeRate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560616468",
      "id" : 560616468,
      "line" : 772,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDYxNjQ2OA==",
      "original_commit_id" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8",
      "original_line" : 772,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 571785019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560616468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560628056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560628056"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How far do we want to reach with these tests. This is basically \"testing\" that `FeeRateFromValueInSatB()` calls `AmountFromValue()` calls `ParseFixedPoint()` & `throw`s. Which is the same as:\r\n```cpp\r\nBOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);\r\n```\r\nabove, with an additional function call to get to `throw`.\r\n\r\nHowever, because nothing specific is being checked, you could imagine how `FeeRateFromValueInSatB()` may end up being refactored such that there is some other throwing call, i.e:\r\n```diff\r\ndiff --git a/src/rpc/util.cpp b/src/rpc/util.cpp\r\nindex 1a83b9222..02604b595 100644\r\n--- a/src/rpc/util.cpp\r\n+++ b/src/rpc/util.cpp\r\n@@ -89,6 +89,7 @@ CAmount AmountFromValue(const UniValue& value)\r\n \r\n CFeeRate FeeRateFromValueInSatB(const UniValue& value)\r\n {\r\n+    this_might_throw();\r\n     const CAmount amount{AmountFromValue(value)};\r\n     const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\r\n```\r\n\r\nand the tests still pass, but only because `this_might_throw()` throws for some reason. Now what are we testing? This is also why I'm not a fan of the `raise invalid amount` type comments. That might be what we want the code to be testing, but that doesn't mean that's what it's doing.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T02:16:33Z",
      "diff_hunk" : "@@ -214,6 +217,32 @@ BOOST_AUTO_TEST_CASE(rpc_parse_monetary_values)\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e+11\")), UniValue); //overflow error\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e11\")), UniValue); //overflow error signless\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"93e+9\")), UniValue); //overflow error\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1.111111111\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"11111111111\")), UniValue);\n+\n+    // Test FeeRateFromValueInSatB\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.001\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00100000\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1\")) == CFeeRate{1000});\n+    BOOST_CHECK(!FeeRateFromValueInSatB(ValueFromString(\"1\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.000\")) == CFeeRate{1000});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.2340000\")) == CFeeRate{1234});\n+\n+    // values not representable by CFeeRate raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00099999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00000001\")), UniValue);\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000999999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000000001\")), UniValue);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560628056",
      "id" : 560628056,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDYyODA1Ng==",
      "original_commit_id" : "ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b",
      "original_line" : 243,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 571785019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560628056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560876606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560876606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fee rates should be accepted as an amount, e.g. a string or a number, as documented in the sendtoaddress, sendmany, fundrawtransaction, walletcreatefundedpsbt, send, and bumpfee helps. Adding this testing found the bug in #20573.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T11:07:40Z",
      "diff_hunk" : "@@ -768,6 +768,10 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Invalid amount\",\n                 node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+        # Test fee_rate values non-representable by CFeeRate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560876606",
      "id" : 560876606,
      "in_reply_to_id" : 560616468,
      "line" : 772,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg3NjYwNg==",
      "original_commit_id" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8",
      "original_line" : 772,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 572111158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560876606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560891095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560891095"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this is just to test that both amount and string fee rates are accepted, isn't that also tested by either\r\n```python\r\nfor param, zero_value in product([\"fee_rate\", \"feeRate\"], [0, 0.000, 0.00000000, \"0\", \"0.000\", \"0.00000000\"]):\r\n```\r\nor\r\n```python\r\nfor invalid_value in [\"\", 0.000000001, 1.111111111, 11111111111]:\r\n```\r\n\r\n(both added above) which use a mix of strings and numbers? Or the test changes made in #20573, which added specific tests for [\"Test passing fee_rate as an integer\"](https://github.com/bitcoin/bitcoin/blob/80486e7e2d8c360839cffc5a0c597b5c745433a7/test/functional/wallet_basic.py#L248) and [\"Test passing fee_rate as a string\"](https://github.com/bitcoin/bitcoin/blob/80486e7e2d8c360839cffc5a0c597b5c745433a7/test/functional/wallet_basic.py#L238)?",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T11:32:24Z",
      "diff_hunk" : "@@ -768,6 +768,10 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Invalid amount\",\n                 node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+        # Test fee_rate values non-representable by CFeeRate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560891095",
      "id" : 560891095,
      "in_reply_to_id" : 560616468,
      "line" : 772,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg5MTA5NQ==",
      "original_commit_id" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8",
      "original_line" : 772,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 572130089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560891095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560891825"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560891825"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think all the coverage is relevant? The documentation is helpful to me when coming back to this months later (like now) to regain context. When I'm done with the fee rate work, I'm happy to remove the documentation.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T11:33:42Z",
      "diff_hunk" : "@@ -273,6 +273,9 @@ def run_test(self):\n         msg = \"Invalid amount\"\n         for invalid_value in [0.00000001, 0.00099999, \"0.00000001\", \"0.00099999\"]:\n             assert_raises_rpc_error(-3, msg, self.nodes[2].sendmany, amounts={address: 10}, fee_rate=invalid_value)\n+        # Test fee_rate values rejected by ParseFixedPoint",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560891825",
      "id" : 560891825,
      "in_reply_to_id" : 560613154,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg5MTgyNQ==",
      "original_commit_id" : "3df75585cc2595ff3d1065e6fdaa4e9df8716594",
      "original_line" : 276,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : null,
      "pull_request_review_id" : 572131040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560891825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560894048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560894048"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Relooking at it in light of your thoughts here.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T11:37:52Z",
      "diff_hunk" : "@@ -214,6 +217,32 @@ BOOST_AUTO_TEST_CASE(rpc_parse_monetary_values)\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e+11\")), UniValue); //overflow error\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e11\")), UniValue); //overflow error signless\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"93e+9\")), UniValue); //overflow error\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1.111111111\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"11111111111\")), UniValue);\n+\n+    // Test FeeRateFromValueInSatB\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.001\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00100000\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1\")) == CFeeRate{1000});\n+    BOOST_CHECK(!FeeRateFromValueInSatB(ValueFromString(\"1\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.000\")) == CFeeRate{1000});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.2340000\")) == CFeeRate{1234});\n+\n+    // values not representable by CFeeRate raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00099999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00000001\")), UniValue);\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000999999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000000001\")), UniValue);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560894048",
      "id" : 560894048,
      "in_reply_to_id" : 560628056,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg5NDA0OA==",
      "original_commit_id" : "ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b",
      "original_line" : 243,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 572134283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560894048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560899511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560899511"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think they are testing different cases/codepaths, as documented, reverifying (I'm grateful for the documentation in picking up the context again nearly two months later.)",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T11:47:41Z",
      "diff_hunk" : "@@ -768,6 +768,10 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Invalid amount\",\n                 node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+        # Test fee_rate values non-representable by CFeeRate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560899511",
      "id" : 560899511,
      "in_reply_to_id" : 560616468,
      "line" : 772,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg5OTUxMQ==",
      "original_commit_id" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8",
      "original_line" : 772,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 572141232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560899511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It would seem like we could do with some sort of fee rate specific functional test, as we are getting to the point where basically all wallet RPC related functional tests are having (essentially) the same blocks copied and pasted between all of them. This seems like an awful lot of duplication, where code easily get out of \"sync\", for not much additional coverage.\r\n\r\nWell, only six (sendtoaddress, sendmany, send, fundrawtransaction, walletcreatefundedpsbt, and bumpfee) out of the sixty-some wallet/rpc functional tests, e.g. only for each of the send calls where it is important to have coverage.\r\n\r\nMost of the work in #20220, #20305, #20426, and #20573 was writing tests, but the tests found a number of issues in different calls because coverage was previously partial or absent.\r\n\r\nWhile grouping the coverage into a fee rate specific test file is out of scope of this patch, I'm not sure it would reduce much duplication. Functional tests are end-to-end and need to exercise the endpoints or we'll end up back at square one with bugs. The coverage is unfortunately not copy-and-paste (I wish it were!), but having the test blocks look similar and cover evenly was a goal, because where the coverage was previously uneven, I came across issues, and it's pretty easy to omit coverage somewhere...gaps in coverage here tend to come back and bite and can affect users. It's also nice to have coverage to protect against future regressions and help changes be easier and safer.",
      "created_at" : "2021-01-20T12:01:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-763557396",
      "id" : 763557396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MzU1NzM5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-23T07:50:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/763557396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560964468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560964468"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I reverified that:\r\n\r\n- the \"Test fee_rate values non-representable by CFeeRate\" section verifies the exception raised in the new `FeeRateFromValueInSatB()` function (one can test this by changing the error message that function returns)\r\n- the \"Test fee_rate values rejected by ParseFixedPoint\" section verifies the rejection by `ParseFixedPoint()` in `AmountFromValue()`\r\n \r\nI'd like these cases to be tested separately to make sure the new function is raising on the amounts it is intended to. The next step is for both exceptions to raise better, more specific error messages.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-20T13:37:20Z",
      "diff_hunk" : "@@ -768,6 +768,10 @@ def test_option_feerate(self):\n                 node.fundrawtransaction, rawtx, {param: {\"foo\": \"bar\"}, \"add_inputs\": True})\n             assert_raises_rpc_error(-3, \"Invalid amount\",\n                 node.fundrawtransaction, rawtx, {param: \"\", \"add_inputs\": True})\n+        # Test fee_rate values non-representable by CFeeRate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r560964468",
      "id" : 560964468,
      "in_reply_to_id" : 560616468,
      "line" : 772,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDk2NDQ2OA==",
      "original_commit_id" : "d7c2399f3e23ce54d27f8ef26077e58324b991d8",
      "original_line" : 772,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 572225285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/560964468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r561087453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/561087453"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Will do :+1: ",
      "commit_id" : "ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b",
      "created_at" : "2021-01-20T16:10:40Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ class CFeeRate\n public:\n     /** Fee rate of 0 satoshis per kB */\n     CFeeRate() : nSatoshisPerK(0) { }\n+    bool IsZero() const { return nSatoshisPerK == 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r561087453",
      "id" : 561087453,
      "in_reply_to_id" : 560606792,
      "line" : 37,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA4NzQ1Mw==",
      "original_commit_id" : "d2b40010fab5a1ef7f6d946da076d4de6b442e09",
      "original_line" : 37,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 4,
      "pull_request_review_id" : 572386210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-20T16:10:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/561087453",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK!\r\nUnfortunately I missed the [review club for this PR](https://bitcoincore.reviews/20546) today, but went over the logs and it was a very interesting read.\r\n\r\nSome thoughts:\r\n* agree with [fanquake's suggestion](https://github.com/bitcoin/bitcoin/pull/20546/commits/d2b40010fab5a1ef7f6d946da076d4de6b442e09#r560606792) that commits https://github.com/bitcoin/bitcoin/pull/20546/commits/d2b40010fab5a1ef7f6d946da076d4de6b442e09 and https://github.com/bitcoin/bitcoin/pull/20546/commits/ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b should be squashed; for newly introduced methods/functions that are really short, I barely see any benefit in splitting up the usage of it into another commit (other potential candidates are https://github.com/bitcoin/bitcoin/pull/20546/commits/ec62ce0997167b6110e029cc3b55afd97482fe4c + https://github.com/bitcoin/bitcoin/pull/20546/commits/ab4b12823dee3b8659ea2bc1fae43fb4efb6ecfb) generally for a merely 40 LOC change the number of commits seems quite large\r\n* nice idea to introduce named constructors, makes the code way more readable ð \r\n* with those, do we still need the two-parameter ctor `CFeeRate(const CAmount& nFeePaid, size_t nBytes)` to be public? all instances I see are either in test code or can be replaced by the named constructors now, so I guess there is not much point in exposing it",
      "created_at" : "2021-01-20T23:16:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-764016917",
      "id" : 764016917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NDAxNjkxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-20T23:16:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/764016917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562903395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562903395"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dropped these assertions and comments.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-22T20:50:20Z",
      "diff_hunk" : "@@ -214,6 +217,30 @@ BOOST_AUTO_TEST_CASE(rpc_parse_monetary_values)\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e+11\")), UniValue); //overflow error\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e11\")), UniValue); //overflow error signless\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"93e+9\")), UniValue); //overflow error\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562903395",
      "id" : 562903395,
      "in_reply_to_id" : 560603365,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjkwMzM5NQ==",
      "original_commit_id" : "54dcf5ab2e25f6eacf8955ab18a0cd92ef165a4e",
      "original_line" : 222,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 574610485,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562903395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562903962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562903962"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Combined the `CFeeRate::IsZero()` creation, unit tests, and codebase updates into a single commit.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-22T20:51:40Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ class CFeeRate\n public:\n     /** Fee rate of 0 satoshis per kB */\n     CFeeRate() : nSatoshisPerK(0) { }\n+    bool IsZero() const { return nSatoshisPerK == 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562903962",
      "id" : 562903962,
      "in_reply_to_id" : 560606792,
      "line" : 37,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjkwMzk2Mg==",
      "original_commit_id" : "d2b40010fab5a1ef7f6d946da076d4de6b442e09",
      "original_line" : 37,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 4,
      "pull_request_review_id" : 574611279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562903962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562904697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562904697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Idem for the named ctors and for the `FeeRateFromValueInSatB` utility function: creation, unit tests, and codebase updates all in a single commit.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-22T20:53:08Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ class CFeeRate\n public:\n     /** Fee rate of 0 satoshis per kB */\n     CFeeRate() : nSatoshisPerK(0) { }\n+    bool IsZero() const { return nSatoshisPerK == 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562904697",
      "id" : 562904697,
      "in_reply_to_id" : 560606792,
      "line" : 37,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjkwNDY5Nw==",
      "original_commit_id" : "d2b40010fab5a1ef7f6d946da076d4de6b442e09",
      "original_line" : 37,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 4,
      "pull_request_review_id" : 574612228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562904697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562905300"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562905300"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Changed the comments in this commit to not name the specific function: \"Test fee_rate values that don't pass fixed-point parsing checks\".",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-22T20:54:23Z",
      "diff_hunk" : "@@ -273,6 +273,9 @@ def run_test(self):\n         msg = \"Invalid amount\"\n         for invalid_value in [0.00000001, 0.00099999, \"0.00000001\", \"0.00099999\"]:\n             assert_raises_rpc_error(-3, msg, self.nodes[2].sendmany, amounts={address: 10}, fee_rate=invalid_value)\n+        # Test fee_rate values rejected by ParseFixedPoint",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562905300",
      "id" : 562905300,
      "in_reply_to_id" : 560613154,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjkwNTMwMA==",
      "original_commit_id" : "3df75585cc2595ff3d1065e6fdaa4e9df8716594",
      "original_line" : 276,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : null,
      "pull_request_review_id" : 574613004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562905300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562906186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562906186"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dropped these unit tests and comments and combined the tests into the same commit as the function creation and the codebase updates.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-22T20:56:16Z",
      "diff_hunk" : "@@ -214,6 +217,32 @@ BOOST_AUTO_TEST_CASE(rpc_parse_monetary_values)\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e+11\")), UniValue); //overflow error\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1e11\")), UniValue); //overflow error signless\n     BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"93e+9\")), UniValue); //overflow error\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"0.000000001\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"1.111111111\")), UniValue);\n+    BOOST_CHECK_THROW(AmountFromValue(ValueFromString(\"11111111111\")), UniValue);\n+\n+    // Test FeeRateFromValueInSatB\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")) == CFeeRate{0});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00000000\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.001\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"0.00100000\")) == CFeeRate{1});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1\")) == CFeeRate{1000});\n+    BOOST_CHECK(!FeeRateFromValueInSatB(ValueFromString(\"1\")).IsZero());\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.000\")) == CFeeRate{1000});\n+    BOOST_CHECK(FeeRateFromValueInSatB(ValueFromString(\"1.2340000\")) == CFeeRate{1234});\n+\n+    // values not representable by CFeeRate raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00099999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.00000001\")), UniValue);\n+\n+    // values rejected by ParseFixedPoint raise invalid amount\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000999999\")), UniValue);\n+    BOOST_CHECK_THROW(FeeRateFromValueInSatB(ValueFromString(\"0.000000001\")), UniValue);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r562906186",
      "id" : 562906186,
      "in_reply_to_id" : 560628056,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjkwNjE4Ng==",
      "original_commit_id" : "ed414f6dd72c103b5ba9e17c6b6bd2bcc8548b5b",
      "original_line" : 243,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 574614114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562906186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The first commit now applies the named ctor `CFeeRate::FromBtcKb` to two additional calls in `wallet/wallet.cpp` where it can replace the two-parameter (fee, 1000) ctor. \r\n\r\n> do we still need the two-parameter ctor `CFeeRate(const CAmount& nFeePaid, size_t nBytes)` to be public? all instances I see are either in test code or can be replaced by the named constructors now, so I guess there is not much point in exposing it\r\n\r\nI looked at making it private but it is still used extensively in the codebase with the transaction size passed in as nBytes:\r\n```\r\nsrc/miner.cpp::L241\r\nsrc/node/psbt.cpp::L140\r\nsrc/policy/fees.cpp::L549,579\r\nsrc/txmempool.cpp::L1037\r\nsrc/validation.cpp::L816,834\r\nsrc/wallet/feebumper.cpp::L86,120\r\n```\r\n(and in these tests)\r\n```\r\nsrc/test/amount_tests.cpp\r\nsrc/test/mempool_tests.cpp\r\nsrc/test/amount_tests.cpp\r\nsrc/test/policyestimator_tests.cpp\r\n```\r\n",
      "created_at" : "2021-01-22T21:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-765681556",
      "id" : 765681556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTY4MTU1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T21:18:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765681556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Squashed a bunch of commits from 12 down to 7. Hopefully this is more pleasing to reviewers while remaining easy to review.",
      "created_at" : "2021-01-22T21:10:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-765686085",
      "id" : 765686085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NTY4NjA4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-22T22:12:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/765686085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564123092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564123092"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in afba3e188fcb14236324a0d1355445a99b85d155:\r\n\r\nWhy not just have the body of the ctor in the class?",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-25T23:57:18Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564123092",
      "id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEyMzA5Mg==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 575904026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564123092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564129105"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564129105"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in b427ce178592283b9211b9fbd19874c7349bfd7e:\r\n\r\nnit: I would have stuck these `IsZero()` tests in one place below since they are testing the function and not the ctor.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T00:15:01Z",
      "diff_hunk" : "@@ -67,12 +72,14 @@ BOOST_AUTO_TEST_CASE(GetFeeTest)\n     feeRate = CFeeRate(1000);\n     altFeeRate = CFeeRate(feeRate);\n     BOOST_CHECK_EQUAL(feeRate.GetFee(100), altFeeRate.GetFee(100));\n+    BOOST_CHECK(!altFeeRate.IsZero());\n }\n \n BOOST_AUTO_TEST_CASE(CFeeRateConstructorTest)\n {\n     // Test CFeeRate(CAmount fee_rate, size_t bytes) constructor\n     // full constructor\n+    BOOST_CHECK(CFeeRate(CAmount(0), 0).IsZero());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564129105",
      "id" : 564129105,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEyOTEwNQ==",
      "original_commit_id" : "b427ce178592283b9211b9fbd19874c7349bfd7e",
      "original_line" : 82,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/test/amount_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 575904026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564129105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564131145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564131145"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in afba3e188fcb14236324a0d1355445a99b85d155:\r\n\r\nAren't we already testing somewhere that `CFeeRate(-1) == CFeeRate(-1, 1000)`? Then I think we could save one of those and some other similar lines following.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T00:20:50Z",
      "diff_hunk" : "@@ -86,6 +90,31 @@ BOOST_AUTO_TEST_CASE(GetFeeTest)\n     CFeeRate(MAX_MONEY, std::numeric_limits<size_t>::max() >> 1).GetFeePerK();\n }\n \n+BOOST_AUTO_TEST_CASE(CFeeRateNamedConstructorsTest)\n+{\n+    // Test CFeerate(CAmount fee_rate, FeeEstimatemode mode) constructor\n+    // with BTC/kvB, returns same values as CFeeRate(amount) or CFeeRate(amount, 1000)\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(-1)) == CFeeRate(-1));\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(-1)) == CFeeRate(-1, 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564131145",
      "id" : 564131145,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEzMTE0NQ==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 98,
      "original_position" : 23,
      "original_start_line" : 97,
      "path" : "src/test/amount_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 575904026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564131145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564599507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564599507"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here is a better explanation than I could provide: https://isocpp.org/wiki/faq/ctors#named-ctor-idiom by Stroustrup, Cline, Sutter and Alexandrescu. This is an implementation of that idiom.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T15:26:59Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564599507",
      "id" : 564599507,
      "in_reply_to_id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDU5OTUwNw==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 576463921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:39:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564599507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564610287"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564610287"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T15:40:13Z",
      "diff_hunk" : "@@ -67,12 +72,14 @@ BOOST_AUTO_TEST_CASE(GetFeeTest)\n     feeRate = CFeeRate(1000);\n     altFeeRate = CFeeRate(feeRate);\n     BOOST_CHECK_EQUAL(feeRate.GetFee(100), altFeeRate.GetFee(100));\n+    BOOST_CHECK(!altFeeRate.IsZero());\n }\n \n BOOST_AUTO_TEST_CASE(CFeeRateConstructorTest)\n {\n     // Test CFeeRate(CAmount fee_rate, size_t bytes) constructor\n     // full constructor\n+    BOOST_CHECK(CFeeRate(CAmount(0), 0).IsZero());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564610287",
      "id" : 564610287,
      "in_reply_to_id" : 564129105,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDYxMDI4Nw==",
      "original_commit_id" : "b427ce178592283b9211b9fbd19874c7349bfd7e",
      "original_line" : 82,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/test/amount_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 576477960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564610287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564652634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564652634"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dropped that line and three other ones from this test.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T16:31:12Z",
      "diff_hunk" : "@@ -86,6 +90,31 @@ BOOST_AUTO_TEST_CASE(GetFeeTest)\n     CFeeRate(MAX_MONEY, std::numeric_limits<size_t>::max() >> 1).GetFeePerK();\n }\n \n+BOOST_AUTO_TEST_CASE(CFeeRateNamedConstructorsTest)\n+{\n+    // Test CFeerate(CAmount fee_rate, FeeEstimatemode mode) constructor\n+    // with BTC/kvB, returns same values as CFeeRate(amount) or CFeeRate(amount, 1000)\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(-1)) == CFeeRate(-1));\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(-1)) == CFeeRate(-1, 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564652634",
      "id" : 564652634,
      "in_reply_to_id" : 564131145,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDY1MjYzNA==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 98,
      "original_position" : 23,
      "original_start_line" : 97,
      "path" : "src/test/amount_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 576532782,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-26T16:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564652634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for reviewing @fjahr, updated with your feedback per `git diff 1fc25a4 236f556`",
      "created_at" : "2021-01-26T16:33:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-767665398",
      "id" : 767665398,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NzY2NTM5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-26T16:33:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767665398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564881274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564881274"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I did understand the idiom, the point I was trying to make that this should be functionally equivalent but just a bit simpler:\r\n\r\n```\r\n@ src/policy/feerate.h:43 @ public:\r\n         // We've previously had bugs creep in from silent double->int conversion...\r\n         static_assert(std::is_integral<I>::value, \"CFeeRate should be used without floats\");\r\n     }\r\n-    static CFeeRate FromSatB(CAmount fee_rate);\r\n-    static CFeeRate FromBtcKb(CAmount fee_rate);\r\n+    /** Construct a CFeeRate from a CAmount in sat/vB */\r\n+    static CFeeRate FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); };\r\n+    /** Construct a CFeeRate from a CAmount in BTC/kvB */\r\n+    static CFeeRate FromBtcKb(CAmount fee_rate) { return CFeeRate(fee_rate, 1000); };\r\n     /** Constructor for a fee rate in satoshis per kvB (sat/kvB). The size in bytes must not exceed (2^63 - 1).\r\n      *\r\n      *  Passing an nBytes value of COIN (1e8) returns a fee rate in satoshis per vB (sat/vB),\r\n@ src/policy/feerate.h:80 @ public:\r\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\r\n };\r\n\r\n-/** Construct a CFeeRate from a CAmount in sat/vB */\r\n-inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }\r\n-\r\n-/** Construct a CFeeRate from a CAmount in BTC/kvB */\r\n-inline CFeeRate CFeeRate::FromBtcKb(CAmount fee_rate) { return CFeeRate(fee_rate, 1000); }\r\n-\r\n #endif //  BITCOIN_POLICY_FEERATE_H\r\n```\r\n\r\nIt seems the inline definition outside of the body is mostly interesting if you want to do that multiple times in different translation units.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T22:35:38Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564881274",
      "id" : 564881274,
      "in_reply_to_id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDg4MTI3NA==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 576820285,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T22:37:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564881274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code review ACK 236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T22:36:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-767872921",
      "id" : 767872921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2Nzg3MjkyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-26T22:36:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767872921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564889801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564889801"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh! I'll look into it.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-26T22:52:52Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r564889801",
      "id" : 564889801,
      "in_reply_to_id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDg4OTgwMQ==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 576830680,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-26T22:52:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564889801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(changed title because the only behaviour changes are in the wallet and this is not a refactor)",
      "created_at" : "2021-01-27T07:43:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-768100297",
      "id" : 768100297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODEwMDI5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T07:43:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768100297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565097257"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565097257"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in commit 83fb6101f0768e8f540e187caa2679c9f0b98c20: CAmount can't represent floats. This would be a compile error, if you didn't use a c-style-narrowing-cast",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T08:00:21Z",
      "diff_hunk" : "@@ -111,6 +111,19 @@ BOOST_AUTO_TEST_CASE(CFeeRateNamedConstructorsTest)\n     BOOST_CHECK(CFeeRate::FromSatB(CAmount(123456789)) == CFeeRate(1234, 1000));\n }\n \n+BOOST_AUTO_TEST_CASE(CFeeRateIsZeroTest)\n+{\n+    BOOST_CHECK(CFeeRate(0).IsZero());\n+    BOOST_CHECK(!CFeeRate(1000).IsZero());\n+    BOOST_CHECK(!CFeeRate(-1000).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(0), 0).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(1), 1001).IsZero());\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(0)).IsZero());\n+    BOOST_CHECK(!CFeeRate::FromBtcKb(CAmount(1)).IsZero());\n+    BOOST_CHECK(CFeeRate::FromSatB(CAmount(0.000)).IsZero());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565097257",
      "id" : 565097257,
      "line" : 123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA5NzI1Nw==",
      "original_commit_id" : "83fb6101f0768e8f540e187caa2679c9f0b98c20",
      "original_line" : 123,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/test/amount_tests.cpp",
      "position" : 48,
      "pull_request_review_id" : 577066335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T08:05:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565097257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565098880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565098880"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8885b724eaaba5ce610521d0ee00ce29a16310cc: Whether a feerate is representable or not has nothing to do with 0\r\n\r\n9.99999999999999999999999999999 isn't representable and also isn't zero",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T08:03:35Z",
      "diff_hunk" : "@@ -86,6 +87,17 @@ CAmount AmountFromValue(const UniValue& value)\n     return amount;\n }\n \n+CFeeRate FeeRateFromValueInSatB(const UniValue& value)\n+{\n+    const CAmount amount{AmountFromValue(value)};\n+    const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\n+    if (fee_rate.IsZero() && amount != 0) {\n+        // passed value is an unrepresentable fee rate between 0 and 0.001 sat/vB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565098880",
      "id" : 565098880,
      "line" : 95,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA5ODg4MA==",
      "original_commit_id" : "8885b724eaaba5ce610521d0ee00ce29a16310cc",
      "original_line" : 95,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 17,
      "pull_request_review_id" : 577066335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T08:05:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565098880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565099676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565099676"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You need to fix this in `AmountFromValue`, as I pointed out earlier: https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-739253473",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T08:05:14Z",
      "diff_hunk" : "@@ -86,6 +87,17 @@ CAmount AmountFromValue(const UniValue& value)\n     return amount;\n }\n \n+CFeeRate FeeRateFromValueInSatB(const UniValue& value)\n+{\n+    const CAmount amount{AmountFromValue(value)};\n+    const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\n+    if (fee_rate.IsZero() && amount != 0) {\n+        // passed value is an unrepresentable fee rate between 0 and 0.001 sat/vB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565099676",
      "id" : 565099676,
      "in_reply_to_id" : 565098880,
      "line" : 95,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA5OTY3Ng==",
      "original_commit_id" : "8885b724eaaba5ce610521d0ee00ce29a16310cc",
      "original_line" : 95,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 17,
      "pull_request_review_id" : 577066335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T08:05:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565099676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565100754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565100754"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For reference:\r\n\r\n```\r\ntest/amount_tests.cpp:123:44: error: type 'double' cannot be narrowed to 'CAmount' (aka 'long') in initializer list [-Wc++11-narrowing]\r\n    BOOST_CHECK(CFeeRate::FromSatB(CAmount{0.000}).IsZero());\r\n                                           ^~~~~\r\n```",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T08:07:11Z",
      "diff_hunk" : "@@ -111,6 +111,19 @@ BOOST_AUTO_TEST_CASE(CFeeRateNamedConstructorsTest)\n     BOOST_CHECK(CFeeRate::FromSatB(CAmount(123456789)) == CFeeRate(1234, 1000));\n }\n \n+BOOST_AUTO_TEST_CASE(CFeeRateIsZeroTest)\n+{\n+    BOOST_CHECK(CFeeRate(0).IsZero());\n+    BOOST_CHECK(!CFeeRate(1000).IsZero());\n+    BOOST_CHECK(!CFeeRate(-1000).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(0), 0).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(1), 1001).IsZero());\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(0)).IsZero());\n+    BOOST_CHECK(!CFeeRate::FromBtcKb(CAmount(1)).IsZero());\n+    BOOST_CHECK(CFeeRate::FromSatB(CAmount(0.000)).IsZero());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565100754",
      "id" : 565100754,
      "in_reply_to_id" : 565097257,
      "line" : 123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEwMDc1NA==",
      "original_commit_id" : "83fb6101f0768e8f540e187caa2679c9f0b98c20",
      "original_line" : 123,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/test/amount_tests.cpp",
      "position" : 48,
      "pull_request_review_id" : 577070857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T08:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565100754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This PR fixes the behavior shown in #20534\r\n> \r\n> **Master:** Not representable, should through `error code: -3`\r\n> \r\n> ```\r\n> ./src/bitcoin-cli -regtest -named sendtoaddress address=<addr> amount=1.23 fee_rate=0.0009\r\n> \r\n> error code: -6\r\n> error message:\r\n> Fee rate (0.000 sat/vB) is lower than the minimum fee rate setting (1.000 sat/vB)\r\n> ```\r\n> \r\n> **PR:** throws `error code: -3`\r\n> \r\n> ```\r\n> ./src/bitcoin-cli -regtest -named sendtoaddress address=<addr> amount=1.23 fee_rate=0.0009\r\n> \r\n> error code: -3\r\n> error message:\r\n> Invalid amount\r\n> ```\r\n\r\nThanks for testing! This shows that the error message here isn't as helpful as it could be, but I have a branch that improves the various error messages as a follow-up.",
      "created_at" : "2021-01-27T11:27:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-768221818",
      "id" : 768221818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODIyMTgxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T11:27:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768221818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565235588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565235588"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you explain how and why this needs to be in `AmountFromValue`? Do we pass in an `is_sat_b_fee_rate` bool to it, so it has context? Is that an improvement over a dedicated function? I feel like I'm failing to read your mind on this since a couple months now.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T11:30:49Z",
      "diff_hunk" : "@@ -86,6 +87,17 @@ CAmount AmountFromValue(const UniValue& value)\n     return amount;\n }\n \n+CFeeRate FeeRateFromValueInSatB(const UniValue& value)\n+{\n+    const CAmount amount{AmountFromValue(value)};\n+    const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\n+    if (fee_rate.IsZero() && amount != 0) {\n+        // passed value is an unrepresentable fee rate between 0 and 0.001 sat/vB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565235588",
      "id" : 565235588,
      "in_reply_to_id" : 565098880,
      "line" : 95,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTIzNTU4OA==",
      "original_commit_id" : "8885b724eaaba5ce610521d0ee00ce29a16310cc",
      "original_line" : 95,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 17,
      "pull_request_review_id" : 577241424,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T11:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565235588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> NACK 236f556\r\n\r\nCan you explain why?\r\n",
      "created_at" : "2021-01-27T11:55:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-768236137",
      "id" : 768236137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODIzNjEzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T11:55:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768236137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565257521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565257521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changed to 0",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T12:08:37Z",
      "diff_hunk" : "@@ -111,6 +111,19 @@ BOOST_AUTO_TEST_CASE(CFeeRateNamedConstructorsTest)\n     BOOST_CHECK(CFeeRate::FromSatB(CAmount(123456789)) == CFeeRate(1234, 1000));\n }\n \n+BOOST_AUTO_TEST_CASE(CFeeRateIsZeroTest)\n+{\n+    BOOST_CHECK(CFeeRate(0).IsZero());\n+    BOOST_CHECK(!CFeeRate(1000).IsZero());\n+    BOOST_CHECK(!CFeeRate(-1000).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(0), 0).IsZero());\n+    BOOST_CHECK(CFeeRate(CAmount(1), 1001).IsZero());\n+    BOOST_CHECK(CFeeRate::FromBtcKb(CAmount(0)).IsZero());\n+    BOOST_CHECK(!CFeeRate::FromBtcKb(CAmount(1)).IsZero());\n+    BOOST_CHECK(CFeeRate::FromSatB(CAmount(0.000)).IsZero());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565257521",
      "id" : 565257521,
      "in_reply_to_id" : 565097257,
      "line" : 123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTI1NzUyMQ==",
      "original_commit_id" : "83fb6101f0768e8f540e187caa2679c9f0b98c20",
      "original_line" : 123,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/test/amount_tests.cpp",
      "position" : 48,
      "pull_request_review_id" : 577269397,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T12:08:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565257521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565257893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565257893"
         }
      },
      "author_association" : "MEMBER",
      "body" : "dropped the comment",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T12:09:11Z",
      "diff_hunk" : "@@ -86,6 +87,17 @@ CAmount AmountFromValue(const UniValue& value)\n     return amount;\n }\n \n+CFeeRate FeeRateFromValueInSatB(const UniValue& value)\n+{\n+    const CAmount amount{AmountFromValue(value)};\n+    const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\n+    if (fee_rate.IsZero() && amount != 0) {\n+        // passed value is an unrepresentable fee rate between 0 and 0.001 sat/vB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565257893",
      "id" : 565257893,
      "in_reply_to_id" : 565098880,
      "line" : 95,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTI1Nzg5Mw==",
      "original_commit_id" : "8885b724eaaba5ce610521d0ee00ce29a16310cc",
      "original_line" : 95,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 17,
      "pull_request_review_id" : 577269831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T12:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565257893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565260456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565260456"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`AmountFromValue` parses the string and fails if the amount is not representable, thus any check about representability should be in `AmountFromValue`.\r\n\r\nbtc/kb are representable when there are at most 8 digits. sat/b are representable when there are at most 3 digits. How you pass in the digits shouldn't matter. Can be done as normal argument or template argument (and function alias, if this makes the code easier to read).",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T12:13:48Z",
      "diff_hunk" : "@@ -86,6 +87,17 @@ CAmount AmountFromValue(const UniValue& value)\n     return amount;\n }\n \n+CFeeRate FeeRateFromValueInSatB(const UniValue& value)\n+{\n+    const CAmount amount{AmountFromValue(value)};\n+    const CFeeRate fee_rate{CFeeRate::FromSatB(amount)};\n+    if (fee_rate.IsZero() && amount != 0) {\n+        // passed value is an unrepresentable fee rate between 0 and 0.001 sat/vB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565260456",
      "id" : 565260456,
      "in_reply_to_id" : 565098880,
      "line" : 95,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTI2MDQ1Ng==",
      "original_commit_id" : "8885b724eaaba5ce610521d0ee00ce29a16310cc",
      "original_line" : 95,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 17,
      "pull_request_review_id" : 577273146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T12:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565260456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > NACK [236f556](https://github.com/bitcoin/bitcoin/commit/236f556708fb619167b72cca451d0048a9274646)\r\n> \r\n> Can you explain why?\r\n\r\nbecause it doesn't fix the bug. See:\r\n\r\n```\r\n$ ./src/bitcoin-cli -named sendtoaddress address=bcrt1qwkmhqum095zau5rf2velq55cq938vrd7uw8m4r amount=1.23 fee_rate=31.999999999999999999999\r\nerror code: -3\r\nerror message:\r\nInvalid amount\r\n$ ./src/bitcoin-cli -named sendtoaddress address=bcrt1qwkmhqum095zau5rf2velq55cq938vrd7uw8m4r amount=1.23 fee_rate=31.99999999\r\nac1ee7d06c8a276a148bf2378539c957bba643ba343f102779d618d5c95b9049\r\n```\r\n\r\nBoth calls should fail because the amount is not representable\r\n",
      "created_at" : "2021-01-27T13:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-768282869",
      "id" : 768282869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODI4Mjg2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T13:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768282869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565305128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565305128"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I also prefer what @fjahr suggested, assuming it compiles",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-01-27T13:25:53Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r565305128",
      "id" : 565305128,
      "in_reply_to_id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTMwNTEyOA==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 577330873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T13:25:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565305128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah, thanks for explaining. I thought that comment was referring to the commit.",
      "created_at" : "2021-01-27T13:46:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-768295481",
      "id" : 768295481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODI5NTQ4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T13:46:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768295481",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-04-05T14:50:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-813434301",
      "id" : 813434301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzQzNDMwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T14:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813434301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r621327293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/621327293"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @fjahr. Your suggestion works; will use it if named constructors are needed in the future. Currently trying a different approach to this issue.",
      "commit_id" : "236f556708fb619167b72cca451d0048a9274646",
      "created_at" : "2021-04-27T15:31:17Z",
      "diff_hunk" : "@@ -70,4 +72,10 @@ class CFeeRate\n     SERIALIZE_METHODS(CFeeRate, obj) { READWRITE(obj.nSatoshisPerK); }\n };\n \n+/** Construct a CFeeRate from a CAmount in sat/vB */\n+inline CFeeRate CFeeRate::FromSatB(CAmount fee_rate) { return CFeeRate(fee_rate, COIN); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#discussion_r621327293",
      "id" : 621327293,
      "in_reply_to_id" : 564123092,
      "line" : 77,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMTMyNzI5Mw==",
      "original_commit_id" : "afba3e188fcb14236324a0d1355445a99b85d155",
      "original_line" : 77,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/policy/feerate.h",
      "position" : 20,
      "pull_request_review_id" : 646012665,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20546",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-27T15:31:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/621327293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Can you explain why?\r\n> \r\n> because it doesn't fix the bug. See:\r\n> ```\r\n> $ ./src/bitcoin-cli -named sendtoaddress address=bcrt1qwkmhqum095zau5rf2velq55cq938vrd7uw8m4r amount=1.23 fee_rate=31.99999999\r\n> ac1ee7d06c8a276a148bf2378539c957bba643ba343f102779d618d5c95b9049\r\n> ```\r\n\r\nThis patch fixes the issue described in #20534 \"values smaller than 0.001 sat/B can't be represented by CFeeRate, but they are not rejected\" but I agree this should also be fixed. The approach here won't suffice so am trying a different one.",
      "created_at" : "2021-04-27T15:39:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-827707338",
      "id" : 827707338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNzcwNzMzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-27T15:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/827707338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing for now in favor of #21786.",
      "created_at" : "2021-04-27T15:56:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20546#issuecomment-827719646",
      "id" : 827719646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20546",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyNzcxOTY0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-27T15:56:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/827719646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
