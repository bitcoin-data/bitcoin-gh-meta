{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "`listreceivedbyaddress` & `listreceivedbylabel` RPCs list balances by receiving address and label respectively. That works by creating a tally (`mapTally[address]`) from all the transaction outputs in the wallet and then cross-reference that with the address book in order to calculate which addresses received funds.\r\n\r\nIf an address is in the address book but not in the tally, it's considered empty (never received funds) and is not returned unless `include_empty=true`. That effectively means that when `include_empty=true` the entire address book is included in the result.\r\n\r\n**This creates 2 issues:**\r\n\r\n1. As reported in https://github.com/bitcoin/bitcoin/issues/16159, the address book also includes addresses with a \"send\" purpose which should not be part of the response.\r\n2. As reported in https://github.com/bitcoin/bitcoin/issues/10468, if `include_watchonly=false` [the watchonly addresses are not included in `mapTally`](https://github.com/bitcoin/bitcoin/blob/fa5c224d444802dabec5841009e029b9754c92f1/src/wallet/rpc/transactions.cpp#L120-L122 ) leading to them being considered empty during the subsequent cross-reference with the address book thus becoming part of the result when `include_empty=true`.\r\n\r\nThis PR fixes https://github.com/bitcoin/bitcoin/issues/16159 by filtering-out \"send\" addresses, see https://github.com/bitcoin/bitcoin/issues/16159#issuecomment-1234405923 for more details on the issue. I haven't thought of a nice solution to fix (2) yet.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/comments",
   "created_at" : "2022-09-01T15:15:02Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/25973",
   "id" : 1359015170,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII584-OGE6",
   "number" : 25973,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/25973.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25973",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/25973.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25973"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/timeline",
   "title" : "wallet: Filter-out \"send\" addresses from `listreceivedby*`",
   "updated_at" : "2022-09-01T15:23:01Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25973",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/18506343?v=4",
      "events_url" : "https://api.github.com/users/kouloumos/events{/privacy}",
      "followers_url" : "https://api.github.com/users/kouloumos/followers",
      "following_url" : "https://api.github.com/users/kouloumos/following{/other_user}",
      "gists_url" : "https://api.github.com/users/kouloumos/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/kouloumos",
      "id" : 18506343,
      "login" : "kouloumos",
      "node_id" : "MDQ6VXNlcjE4NTA2MzQz",
      "organizations_url" : "https://api.github.com/users/kouloumos/orgs",
      "received_events_url" : "https://api.github.com/users/kouloumos/received_events",
      "repos_url" : "https://api.github.com/users/kouloumos/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/kouloumos/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/kouloumos/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/kouloumos"
   }
}
