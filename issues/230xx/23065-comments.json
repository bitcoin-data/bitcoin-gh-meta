[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713893867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713893867"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Univalue get_* will already do type checking, so can drop `RPCTypeCheckArgument`.\r\n\r\n```suggestion\r\n    const bool store_lock{request.params[2].isNull() ? false : request.params[2].get_bool()};\r\n```",
      "commit_id" : "94b6c8db5010bf1f38f1458866575cb599d17326",
      "created_at" : "2021-09-22T12:33:59Z",
      "diff_hunk" : "@@ -2183,9 +2185,17 @@ static RPCHelpMan lockunspent()\n \n     bool fUnlock = request.params[0].get_bool();\n \n+    bool store_lock = false;\n+    if (!request.params[2].isNull()) {\n+        RPCTypeCheckArgument(request.params[2], UniValue::VBOOL);\n+        store_lock = request.params[2].get_bool();\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713893867",
      "id" : 713893867,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qjSfr",
      "original_commit_id" : "9e3eac0b09f3aa9ff9ffcbc7b9620a4149b5042b",
      "original_line" : 2192,
      "original_position" : 28,
      "original_start_line" : 2188,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 760848794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-22T12:34:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713893867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713895402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713895402"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Would a unique_ptr work here?",
      "commit_id" : "94b6c8db5010bf1f38f1458866575cb599d17326",
      "created_at" : "2021-09-22T12:35:52Z",
      "diff_hunk" : "@@ -2244,10 +2254,15 @@ static RPCHelpMan lockunspent()\n     }\n \n     // Atomically set (un)locked status for the outputs.\n+    WalletBatch* batch = store_lock ? new WalletBatch(pwallet->GetDatabase()) : nullptr;\n     for (const COutPoint& outpt : outputs) {\n-        if (fUnlock) pwallet->UnlockCoin(outpt);\n-        else pwallet->LockCoin(outpt);\n+        if (fUnlock) {\n+            if (!pwallet->UnlockCoin(outpt, batch)) throw JSONRPCError(RPC_WALLET_ERROR, \"Unlocking coin failed\");\n+        } else {\n+            if (!pwallet->LockCoin(outpt, batch)) throw JSONRPCError(RPC_WALLET_ERROR, \"Locking coin failed\");\n+        }\n     }\n+    if (batch) delete batch;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713895402",
      "id" : 713895402,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qjS3q",
      "original_commit_id" : "9e3eac0b09f3aa9ff9ffcbc7b9620a4149b5042b",
      "original_line" : 2265,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 760850896,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-22T12:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713895402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713913249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713913249"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point!",
      "commit_id" : "94b6c8db5010bf1f38f1458866575cb599d17326",
      "created_at" : "2021-09-22T12:56:41Z",
      "diff_hunk" : "@@ -2183,9 +2185,17 @@ static RPCHelpMan lockunspent()\n \n     bool fUnlock = request.params[0].get_bool();\n \n+    bool store_lock = false;\n+    if (!request.params[2].isNull()) {\n+        RPCTypeCheckArgument(request.params[2], UniValue::VBOOL);\n+        store_lock = request.params[2].get_bool();\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r713913249",
      "id" : 713913249,
      "in_reply_to_id" : 713893867,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qjXOh",
      "original_commit_id" : "9e3eac0b09f3aa9ff9ffcbc7b9620a4149b5042b",
      "original_line" : 2192,
      "original_position" : 28,
      "original_start_line" : 2188,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 760875134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-22T12:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/713913249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK \r\n\r\nThanks a lot for improving privacy and working on this issue. Will test it in few minutes.",
      "created_at" : "2021-09-22T15:40:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925049449",
      "id" : 925049449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843IyJp",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T15:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925049449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714133225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714133225"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 94b6c8db5010bf1f38f1458866575cb599d17326 \"Update lockunspent tests for lock persistence\"\r\n\r\nnit:\r\n\r\n```suggestion\r\n        # Restarting the node with the lock written to the wallet should keep the lock\r\n```",
      "commit_id" : "94b6c8db5010bf1f38f1458866575cb599d17326",
      "created_at" : "2021-09-22T16:51:56Z",
      "diff_hunk" : "@@ -121,13 +121,40 @@ def run_test(self):\n         # Exercise locking of unspent outputs\n         unspent_0 = self.nodes[2].listunspent()[0]\n         unspent_0 = {\"txid\": unspent_0[\"txid\"], \"vout\": unspent_0[\"vout\"]}\n+        # Trying to unlock an output which isn't locked should error\n         assert_raises_rpc_error(-8, \"Invalid parameter, expected locked output\", self.nodes[2].lockunspent, True, [unspent_0])\n+\n+        # Locking an already-locked output should error\n         self.nodes[2].lockunspent(False, [unspent_0])\n         assert_raises_rpc_error(-8, \"Invalid parameter, output already locked\", self.nodes[2].lockunspent, False, [unspent_0])\n+\n+        # Restarting the node should clear the lock\n+        self.restart_node(2)\n+        self.nodes[2].lockunspent(False, [unspent_0], True)\n+\n+        # Restarting the node now the lock is stored in memory should keep the lock",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714133225",
      "id" : 714133225,
      "line" : 135,
      "node_id" : "PRRC_kwDOABII584qkM7p",
      "original_commit_id" : "94b6c8db5010bf1f38f1458866575cb599d17326",
      "original_line" : 135,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : 15,
      "pull_request_review_id" : 761173080,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-22T16:51:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714133225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22929](https://github.com/bitcoin/bitcoin/pull/22929) (wallet: Automatically add receiving destinations to the address book by S3RK)\n* [#22693](https://github.com/bitcoin/bitcoin/pull/22693) (RPC/Wallet: Add \"use_txids\" to output of getaddressinfo by luke-jr)\n* [#20591](https://github.com/bitcoin/bitcoin/pull/20591) (wallet, bugfix: fix ComputeTimeSmart function during rescanning process. by BitcoinTsunami)\n* [#20205](https://github.com/bitcoin/bitcoin/pull/20205) (wallet: Properly support a wallet id by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-22T17:29:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925134299",
      "id" : 925134299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843JG3b",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T15:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925134299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714168388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714168388"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Can add one example here for new argument",
      "commit_id" : "687d65f910755ae4c73db1cfe6b4ffaf351ce297",
      "created_at" : "2021-09-22T17:38:13Z",
      "diff_hunk" : "@@ -2152,6 +2153,7 @@ static RPCHelpMan lockunspent()\n                             },\n                         },\n                     },\n+                    {\"store_lock\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Whether to write/erase this lock in the wallet database, or keep the change in memory only.\"},\n                 },\n                 RPCResult{\n                     RPCResult::Type::BOOL, \"\", \"Whether the command was successful or not\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714168388",
      "id" : 714168388,
      "line" : 2159,
      "node_id" : "PRRC_kwDOABII584qkVhE",
      "original_commit_id" : "5324c28eaaa12df2ea6630571136091e79f4db68",
      "original_line" : 2159,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 761219673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-22T19:00:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714168388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested on Pop!_OS and everything works as expected. \r\n\r\nSteps that I followed for testing:\r\n\r\n### Check default behavior :white_check_mark: \r\n\r\n```\r\nbitcoin-cli -rpcwallet=W1 listunspent\r\n\r\n[\r\n  {\r\n    \"txid\": \"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\",\r\n    \"vout\": 0,\r\n    \"address\": \"bcrt1qa8xy0hlvlsr66yvv80h3qxp9stq68aef6pzvjt\",\r\n    \"label\": \"\",\r\n    \"scriptPubKey\": \"0014e9cc47dfecfc07ad118c3bef10182582c1a3f729\",\r\n    \"amount\": 0.00010000,\r\n    \"confirmations\": 1003,\r\n    \"spendable\": true,\r\n    \"solvable\": true,\r\n    \"desc\": \"wpkh([0ab0c859/0'/0'/2']03c65a6e4a66a4a6b4af981c5e81632bb2d7336bc75d7ccf83e055006a2693050f)#6z2c6spl\",\r\n    \"safe\": true\r\n  }\r\n]\r\n\r\n$ bitcoin-cli -rpcwallet=W1 lockunspent false \"[{\\\"txid\\\":\\\"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\\\",\\\"vout\\\":0}]\"\r\ntrue\r\n\r\n$ bitcoin-cli -rpcwallet=W1 listlockunspent\r\n[\r\n  {\r\n    \"txid\": \"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\",\r\n    \"vout\": 0\r\n  }\r\n]\r\n\r\n$ bitcoin-cli stop\r\nBitcoin Core stopping\r\n\r\n$ bitcoind\r\n\r\n$ bitcoin-cli -rpcwallet=W1 listlockunspent\r\n[\r\n]\r\n```\r\n### Use the new argument to save locked UTXO in database :white_check_mark: \r\n\r\n```\r\n$ bitcoin-cli -rpcwallet=W1 lockunspent false \"[{\\\"txid\\\":\\\"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\\\",\\\"vout\\\":0}]\" true\r\ntrue\r\n\r\n$ bitcoin-cli -rpcwallet=W1 listlockunspent\r\n[\r\n  {\r\n    \"txid\": \"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\",\r\n    \"vout\": 0\r\n  }\r\n]\r\n\r\n$ bitcoin-cli stop\r\nBitcoin Core stopping\r\n\r\n$ bitcoind\r\n\r\n$ bitcoin-cli -rpcwallet=W1 listlockunspent\r\n[\r\n  {\r\n    \"txid\": \"752871b9f6aeacbd1d60a0154aabd098cd7b172b74928f9af0a6104af0dbf9ff\",\r\n    \"vout\": 0\r\n  }\r\n]\r\n```\r\n### Errors :white_check_mark: \r\n\r\n1. Trying to unlock a UTXO which isn't locked\r\n\r\n```\r\n$ bitcoin-cli -rpcwallet=W1 lockunspent true \"[{\\\"txid\\\":\\\"f3c7ab973f3f1857135ae9e9b10da8e85f6482a2a5d45d22d3aa20609e408ef7\\\",\\\"vout\\\":1}]\" true\r\n\r\nerror code: -8\r\nerror message:\r\nInvalid parameter, expected locked output\r\n```\r\n2. Trying to lock a UTXO which is already locked\r\n\r\n```\r\n$ bitcoin-cli -rpcwallet=Wallet1 lockunspent false \"[{\\\"txid\\\":\\\"f3c7ab973f3f1857135ae9e9b10da8e85f6482a2a5d45d22d3aa20609e408ef7\\\",\\\"vout\\\":1}]\" true\r\n\r\nerror code: -8\r\nerror message:\r\nInvalid parameter, output already locked\r\n```\r\n\r\n:information_source: It also works for descriptor wallets\r\n\r\n:warning: There are some issues with GUI but I guess they can be addressed in https://github.com/bitcoin-core/gui\r\n\r\n- No option to use this new argument and save locked coins in db\r\n- If UTXO is locked in db is `bitcoin-cli` its greyed out and there is an option to unlock it. This unlocked state won't be saved in db and will remain until GUI is running.\r\n\r\n@meshcollider Thanks for adding this option :) It will improve privacy and few projects were also dependent on this feature. Example: https://github.com/p2pderivatives/p2pderivatives-client#known-limitations\r\n\r\n",
      "created_at" : "2021-09-22T19:04:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925224499",
      "id" : 925224499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843Jc4z",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T19:04:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925224499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-09-22T19:11:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925233945",
      "id" : 925233945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843JfMZ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T19:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925233945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks, addressed both review suggestions.\r\n\r\nHappy to make GUI changes persistent too, it would be a very simple change. Can discuss if it is a useful change.",
      "created_at" : "2021-09-23T00:10:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925417204",
      "id" : 925417204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843KL70",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T00:10:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925417204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Happy to make GUI changes persistent too, it would be a very simple change. Can discuss if it is a useful change.\r\n\r\nI think it is. People who use manual coin control will likely manually selected specfic UTXOs for single tx and lock unspent for longer term. And longer term should survive bitcoin-qt restarts. At least that looks to me more intuitive. Also, from privacy perspective, it is better to have some unwanted UTXO locked longer than spend it accidentally.",
      "created_at" : "2021-09-23T01:09:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925439096",
      "id" : 925439096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843KRR4",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T01:09:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925439096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sure, added persistent locking to the GUI now then ð ",
      "created_at" : "2021-09-23T03:00:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925471896",
      "id" : 925471896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843KZSY",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T03:00:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925471896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK https://github.com/bitcoin/bitcoin/pull/23065/commits/687d65f910755ae4c73db1cfe6b4ffaf351ce297\r\n\r\nChanges since last review:\r\n\r\n- GUI\r\n- Release notes\r\n- Comment in test\r\n- Example\r\n\r\n<details>\r\n  <summary>Tried locking/unlocking UTXOs in GUI (No issues)</summary>\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/134467429-b3c1144f-63ff-4b92-b652-923766f37cee.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/134467482-2c3ed8f1-78b3-433f-9ca1-9a94d742932c.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/134467555-a43bf310-580c-4d09-aa24-ab11e515f2af.png)\r\n  \r\n</details>\r\n\r\n\r\n",
      "created_at" : "2021-09-23T07:14:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925559102",
      "id" : 925559102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843Kuk-",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T07:14:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925559102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> wallet_address_types.py --descriptors              | â Failed  | 25 s\r\n\r\nNot sure if this error in CI is related to PR: https://github.com/bitcoin/bitcoin/pull/23065/checks?check_run_id=3682608670",
      "created_at" : "2021-09-23T07:15:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925559783",
      "id" : 925559783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843Kuvn",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T07:15:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925559783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @prayank23 Not sure if this error in CI is related to PR\r\n\r\nLooks unrelated, it looks like some random windows socket issue:\r\n> OSError: [WinError 10048] Only one usage of each socket address (protocol/network address/port) is normally permitted\r\n",
      "created_at" : "2021-09-23T07:27:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-925565997",
      "id" : 925565997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843KwQt",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T07:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925565997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714714304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714714304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I would slightly prefer for this parameter to be called \"persistent\". I think it better captures the meaning.",
      "commit_id" : "687d65f910755ae4c73db1cfe6b4ffaf351ce297",
      "created_at" : "2021-09-23T11:45:52Z",
      "diff_hunk" : "@@ -2152,6 +2153,7 @@ static RPCHelpMan lockunspent()\n                             },\n                         },\n                     },\n+                    {\"store_lock\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Whether to write/erase this lock in the wallet database, or keep the change in memory only.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r714714304",
      "id" : 714714304,
      "line" : 2156,
      "node_id" : "PRRC_kwDOABII584qmazA",
      "original_commit_id" : "687d65f910755ae4c73db1cfe6b4ffaf351ce297",
      "original_line" : 2156,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 761907474,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-23T11:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/714714304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r715251615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/715251615"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure, done ",
      "commit_id" : "2d3ed88667eeaeb692581a11550f87e77d7ae6a1",
      "created_at" : "2021-09-24T01:06:48Z",
      "diff_hunk" : "@@ -2152,6 +2153,7 @@ static RPCHelpMan lockunspent()\n                             },\n                         },\n                     },\n+                    {\"store_lock\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Whether to write/erase this lock in the wallet database, or keep the change in memory only.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r715251615",
      "id" : 715251615,
      "in_reply_to_id" : 714714304,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qod-f",
      "original_commit_id" : "687d65f910755ae4c73db1cfe6b4ffaf351ce297",
      "original_line" : 2156,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 762618065,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-24T01:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/715251615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this needs also release note about existing behaviour change in the GUI.",
      "created_at" : "2021-09-24T05:46:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926362818",
      "id" : 926362818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843NyzC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T05:47:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926362818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> lock(utxo, persistent=false) but utxo already has persisted lock - should delete from db?\r\n\r\nI don't think we should allow re-locking in any case, better to require explicitly unlocking then locking again.\r\n\r\n> unlock(utxo, persistent=false) but utxo already has persisted lock - should delete from db?\r\n\r\nI was thinking a lot about this while writing the PR. It does make sense to me that unlock would simply remove any locks, persistent or not. But I am not sure if there are some use cases that would benefit from the functionality - persistently lock a UTXO and then temporarily unlock it for a while for some reason? I'm happy to change this if people agree.\r\n\r\nGood points about AddToSpends and the release notes, will fix.",
      "created_at" : "2021-09-24T10:08:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926508651",
      "id" : 926508651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843OWZr",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T10:08:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926508651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Why not just always persist? What are the cons of that? If someone wants no locks then just call lockunspent true after load.\r\n\r\nNot sure about this. It's a much larger behavior change (downstream software probably relies on starting with a clean slate after restart), and if this behavior really turns out to be more popular it could always be done later.",
      "created_at" : "2021-09-24T11:44:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926560757",
      "id" : 926560757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843OjH1",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T11:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926560757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Why not just always persist? What are the cons of that? If someone wants no locks then just call lockunspent true after load.\r\n> \r\n> Not sure about this. It's a much larger behavior change (downstream software probably relies on starting with a clean slate after restart), and if this behavior really turns out to be more popular it could always be done later.\r\n\r\nNot only restart, even `loadwallet` after unloading.\r\n\r\nHow about a startup flag like `--persist-unspent-locks`?\r\n\r\nIf we keep this approach then it needs a way to select `persist=true` in all calls that eventually lock coins, like `fundrawtransaction lockUnspents=true`. Suddenly there's a lot of options around.\r\n\r\nI just think a (good) behavior change looks saner to reason about. ",
      "created_at" : "2021-09-24T11:54:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926566188",
      "id" : 926566188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843Okcs",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T11:54:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926566188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> How about a startup flag like --persist-unspent-locks?\r\n\r\nPlease don't add another startup option that subtly changes behavior over all wallets :smile: \r\nI was actually fearing this when I looked at this PR, and was pleasantly surprised it's a flag per utxo.",
      "created_at" : "2021-09-24T13:00:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926605696",
      "id" : 926605696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843OuGA",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T13:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926605696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@meshcollider I think you should mention that only manual locks can be persisted. Funding calls result in memory-only locks.",
      "created_at" : "2021-09-24T15:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926723004",
      "id" : 926723004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843PKu8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T15:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926723004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The GUI change needs a release note.",
      "created_at" : "2021-09-24T18:11:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926828146",
      "id" : 926828146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843PkZy",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T18:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926828146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'll leave any potential behaviour changes with `fundrawtransaction`/`send` RPCs and lock reasons for a follow-up PR, to keep this change simpler. Storing the reason should be easy, just using the value of the LOCKED_UTXO DB field which is currently just always `1`.",
      "created_at" : "2021-09-25T00:49:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926984334",
      "id" : 926984334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843QKiO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T00:49:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926984334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716022097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716022097"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could have a duplicate test that unloads and loads the wallet instead of restarting the node.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T10:15:01Z",
      "diff_hunk" : "@@ -121,13 +121,34 @@ def run_test(self):\n         # Exercise locking of unspent outputs\n         unspent_0 = self.nodes[2].listunspent()[0]\n         unspent_0 = {\"txid\": unspent_0[\"txid\"], \"vout\": unspent_0[\"vout\"]}\n+        # Trying to unlock an output which isn't locked should error\n         assert_raises_rpc_error(-8, \"Invalid parameter, expected locked output\", self.nodes[2].lockunspent, True, [unspent_0])\n+\n+        # Locking an already-locked output should error\n         self.nodes[2].lockunspent(False, [unspent_0])\n         assert_raises_rpc_error(-8, \"Invalid parameter, output already locked\", self.nodes[2].lockunspent, False, [unspent_0])\n+\n+        # Restarting the node should clear the lock\n+        self.restart_node(2)\n+        self.nodes[2].lockunspent(False, [unspent_0], True)\n+\n+        # Restarting the node with the lock written to the wallet should keep the lock",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716022097",
      "id" : 716022097,
      "line" : 145,
      "node_id" : "PRRC_kwDOABII584qraFR",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 145,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/wallet_basic.py",
      "position" : 25,
      "pull_request_review_id" : 763580141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T10:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716022097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716022534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716022534"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If the output is not locked (erase returns zero) then it could early return `false` or you can avoid `EraseLockedUTXO`.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T10:19:22Z",
      "diff_hunk" : "@@ -2260,22 +2260,36 @@ bool CWallet::DisplayAddress(const CTxDestination& dest)\n     return signer_spk_man->DisplayAddress(scriptPubKey, signer);\n }\n \n-void CWallet::LockCoin(const COutPoint& output)\n+bool CWallet::LockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.insert(output);\n+    if (batch) {\n+        return batch->WriteLockedUTXO(output);\n+    }\n+    return true;\n }\n \n-void CWallet::UnlockCoin(const COutPoint& output)\n+bool CWallet::UnlockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.erase(output);\n+    if (batch) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716022534",
      "id" : 716022534,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qraMG",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 2277,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 763580141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T10:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716022534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716024371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716024371"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-926508651\r\n\r\n> > lock(utxo, persistent=false) but utxo already has persisted lock - should delete from db?\r\n> \r\n> I don't think we should allow re-locking in any case, better to require explicitly unlocking then locking again.\r\n\r\nIf you want to implement this breaking change then use the return value of `insert()` to know if the output was already locked and return false.\r\n\r\nOtherwise, the lock can be persisted but not in memory.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T10:37:22Z",
      "diff_hunk" : "@@ -2260,22 +2260,36 @@ bool CWallet::DisplayAddress(const CTxDestination& dest)\n     return signer_spk_man->DisplayAddress(scriptPubKey, signer);\n }\n \n-void CWallet::LockCoin(const COutPoint& output)\n+bool CWallet::LockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.insert(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716024371",
      "id" : 716024371,
      "line" : 2271,
      "node_id" : "PRRC_kwDOABII584qraoz",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 2271,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 54,
      "pull_request_review_id" : 763580141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T10:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716024371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716026664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716026664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Otherwise, the lock can be persisted but not in memory.\r\n\r\nSorry, I'm not sure how this could happen. Upon thinking further, I think its fine to upgrade a memory-only lock to a persistent lock (this is useful if fundrawtransaction locked the spends and we want to persistently lock them afterward). But how could we end up with a persistent lock not in memory?\r\n\r\nEDIT: I've updated the PR to allow persistently locking even if we already have a lock, to allow upgrading.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T10:58:57Z",
      "diff_hunk" : "@@ -2260,22 +2260,36 @@ bool CWallet::DisplayAddress(const CTxDestination& dest)\n     return signer_spk_man->DisplayAddress(scriptPubKey, signer);\n }\n \n-void CWallet::LockCoin(const COutPoint& output)\n+bool CWallet::LockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.insert(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716026664",
      "id" : 716026664,
      "in_reply_to_id" : 716024371,
      "line" : 2271,
      "node_id" : "PRRC_kwDOABII584qrbMo",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 2271,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 54,
      "pull_request_review_id" : 763582815,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T11:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716026664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716040761"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716040761"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> But how could we end up with a persistent lock not in memory?\r\n\r\nRight, doesn't happen now that unlock clears from memory and db.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T13:16:06Z",
      "diff_hunk" : "@@ -2260,22 +2260,36 @@ bool CWallet::DisplayAddress(const CTxDestination& dest)\n     return signer_spk_man->DisplayAddress(scriptPubKey, signer);\n }\n \n-void CWallet::LockCoin(const COutPoint& output)\n+bool CWallet::LockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.insert(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716040761",
      "id" : 716040761,
      "in_reply_to_id" : 716024371,
      "line" : 2271,
      "node_id" : "PRRC_kwDOABII584qreo5",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 2271,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 54,
      "pull_request_review_id" : 763591481,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T13:16:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716040761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716040997"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716040997"
         }
      },
      "author_association" : "MEMBER",
      "body" : "But does it make sense to allow memory-only lock if it is already persisted?\r\n\r\nEDIT: looks like this is not possible since lockunspent RPC checks if unspent is already locked.",
      "commit_id" : "d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T13:18:08Z",
      "diff_hunk" : "@@ -2260,22 +2260,36 @@ bool CWallet::DisplayAddress(const CTxDestination& dest)\n     return signer_spk_man->DisplayAddress(scriptPubKey, signer);\n }\n \n-void CWallet::LockCoin(const COutPoint& output)\n+bool CWallet::LockCoin(const COutPoint& output, WalletBatch* batch)\n {\n     AssertLockHeld(cs_wallet);\n     setLockedCoins.insert(output);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#discussion_r716040997",
      "id" : 716040997,
      "in_reply_to_id" : 716024371,
      "line" : 2271,
      "node_id" : "PRRC_kwDOABII584qresl",
      "original_commit_id" : "99b81a2faf87db7132e4817405a495bc05674943",
      "original_line" : 2271,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 54,
      "pull_request_review_id" : 763591593,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-25T13:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716040997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "gh pr checkout 23065",
      "created_at" : "2021-09-25T16:19:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927144073",
      "id" : 927144073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843QxiJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T16:19:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927144073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89661772?v=4",
         "events_url" : "https://api.github.com/users/Pob1212/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Pob1212/followers",
         "following_url" : "https://api.github.com/users/Pob1212/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Pob1212/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Pob1212",
         "id" : 89661772,
         "login" : "Pob1212",
         "node_id" : "MDQ6VXNlcjg5NjYxNzcy",
         "organizations_url" : "https://api.github.com/users/Pob1212/orgs",
         "received_events_url" : "https://api.github.com/users/Pob1212/received_events",
         "repos_url" : "https://api.github.com/users/Pob1212/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Pob1212/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Pob1212/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Pob1212"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK d96b000e94d72d041689c5c47e374df2ebc0e011",
      "created_at" : "2021-09-25T18:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927164312",
      "id" : 927164312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843Q2eY",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T18:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927164312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Many changes since last review: https://github.com/bitcoin/bitcoin/compare/2d3ed88..d96b000, agree that changes about GUI should be mentioned in release notes and few things looked confusing in above discussion so tested again.\r\n\r\n1. **GUI only** : Lock/Unlock no issues.\r\n2. **CLI**:\r\n   2.1 Errors: `Invalid parameter, output already locked` this is not printed in one case when when you try to lock UTXO which is already locked with new parameter set as trueâ ï¸ \r\n\r\n   2.2 Locking UTXO without using new parameter works as expected and reset to unlocked on restart\r\n   2.3 Locking UTXO with new parameter set as true works as expected. Locked state is saved in db and remains even after restart.\r\n\r\n   2.4 Lock UTXO without new parameter. Unlock UTXO with new parameter set as true. Unlocked state remains after restart.\r\n   2.5 Lock UTXO with new parameter (db). Unlock UTXO without new parameter. Unlocked state remains after restart :x:\r\n\r\n3. **CLI + GUI**:\r\n   3.1 Lock UTXO with and without new parameter. Stop `bitcoind`. Launch `bitcoin-qt` and check if state remains as expected. No issues.\r\n\r\n   3.2 Lock UTXO from CLI (with new param). Stop `bitcoind`. Unlock from GUI. Restart `bitcoind`. Check if unlocked state remains. No issues.\r\n   3.3 Unlock UTXO from CLI (with new param). Stop `bitcoind`. Lock from GUI. Restart `bitcoind`. Check if locked state remains. No issues.\r\n\r\n   3.4 Lock UTXO from CLI (without new param). Stop `bitcoind`. Lock from GUI. Restart `bitcoind`. Check if locked state remains. No issues.\r\n   3.5 Unlock UTXO from CLI (without new param). Stop `bitcoind` and check state in `bitcoin-qt`. It remains locked :x:\r\n\r\n2.5 and 3.5 doesn't look correct IMO. Also agree with @promag that very few people will be affected if this is made persistent by default in CLI and GUI. Infact people might start using this after this change.",
      "created_at" : "2021-09-26T04:22:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927228484",
      "id" : 927228484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RGJE",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T04:22:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927228484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Lock UTXO with new parameter (db). Unlock UTXO without new parameter. Unlocked state remains after restart x\r\n\r\nNo? There's also a test for that case. Perhaps you are looking at a previous revision.",
      "created_at" : "2021-09-26T04:46:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927230675",
      "id" : 927230675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RGrT",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T04:46:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927230675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @prayank23 for your detailed testing!\r\n\r\n> 2.1 Errors: Invalid parameter, output already locked this is not printed in one case when when you try to lock UTXO which is already locked with new parameter set as trueâ ï¸\r\n\r\nYes, I decided it isn't worth the overhead of checking if the persistent lock exists in the database, if someone wants to lock the same output twice persistently then I don't see why that should error. It will, however, error if you try and lock un-persistently if the lock already exists -- this is to avoid confusion about downgrading a persistent lock to non-persistent (not allowed).\r\n\r\n> 2.5 and 3.5 doesn't look correct IMO.\r\n\r\nAs @achow101 mentioned, this doesn't seem to be the case. I manually tested 3.5 and cannot replicate the issue -- the lock is definitely cleared persistently and does not remain locked for me. Could you check you built the latest version?\r\n",
      "created_at" : "2021-09-26T05:30:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927235252",
      "id" : 927235252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RHy0",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T05:30:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927235252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Steps that I did for 2.5:\r\n\r\n```\r\n$ bitcoind --version\r\nBitcoin Core version v22.99.0-d96b000e94d7\r\n\r\n$ bitcoind\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 listlockunspent\r\n[\r\n]\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 lockunspent false \"[{\\\"txid\\\":\\\"f3c7ab973f3f1857135ae9e9b10da8e85f6482a2a5d45d22d3aa20609e408ef7\\\",\\\"vout\\\":1}]\" true\r\n\r\ntrue\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 listlockunspent\r\n\r\n[\r\n  {\r\n    \"txid\": \"f3c7ab973f3f1857135ae9e9b10da8e85f6482a2a5d45d22d3aa20609e408ef7\",\r\n    \"vout\": 1\r\n  }\r\n]\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 lockunspent true \"[{\\\"txid\\\":\\\"f3c7ab973f3f1857135ae9e9b10da8e85f6482a2a5d45d22d3aa20609e408ef7\\\",\\\"vout\\\":1}]\"\r\n\r\ntrue\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 listlockunspent\r\n\r\n[\r\n]\r\n\r\n$ bitcoin-cli stop\r\n\r\n$ bitcoind\r\n\r\n$ bitcoin-cli -rpcwallet=Wallet1 listlockunspent\r\n\r\n[\r\n]\r\n```\r\n\r\nhttps://user-images.githubusercontent.com/13405205/134797022-ad41c58a-0028-4361-b19b-0c8c2e311fc2.mp4\r\n",
      "created_at" : "2021-09-26T06:55:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927245864",
      "id" : 927245864,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RKYo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T06:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927245864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, apologies @prayank23 , I misread your comment. That behaviour is intended:\r\n\r\n> I was thinking a lot about this while writing the PR. It does make sense to me that unlock would simply remove any locks, persistent or not.\r\n\r\nWe discussed this briefly on IRC at the wallet meeting and decided this approach made the most sense.\r\n\r\n(By the way, if you start bitcoind with the -daemon flag you don't need to use two terminal windows :) )",
      "created_at" : "2021-09-26T07:22:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927249213",
      "id" : 927249213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RLM9",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T07:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927249213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@prayank23 Thanks! Happy to discuss changing the default after this is merged as a follow-up.",
      "created_at" : "2021-09-26T07:42:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23065#issuecomment-927251609",
      "id" : 927251609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23065",
      "node_id" : "IC_kwDOABII5843RLyZ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T07:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927251609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   }
]
