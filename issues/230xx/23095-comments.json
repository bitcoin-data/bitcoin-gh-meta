[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#10443](https://github.com/bitcoin/bitcoin/pull/10443) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-25T14:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927130703",
      "id" : 927130703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843QuRP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927130703/reactions"
      },
      "updated_at" : "2021-11-13T07:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927130703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-09-26T21:03:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927370277",
      "id" : 927370277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843Rowl",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-26T21:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927370277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n`std::clamp` is standard in C++17 and is certainly a nice cleanup versus the existing code. Additionally, this is not a breaking change for windows builders as this is available since VS2015.",
      "created_at" : "2021-09-27T02:38:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927464779",
      "id" : 927464779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843R_1L",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T02:38:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927464779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI wonder whether this is a good candidate or not: https://github.com/bitcoin/bitcoin/blob/58c25bdcea9b95348e639180932b388d4bda8157/src/rpc/blockchain.cpp#L1859 ",
      "created_at" : "2021-09-27T07:43:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927614230",
      "id" : 927614230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843SkUW",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T07:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927614230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kiminuo \r\n\r\n> I wonder whether this is a good candidate or not:\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/58c25bdcea9b95348e639180932b388d4bda8157/src/rpc/blockchain.cpp#L1859\r\n\r\nSome tests fail with this line being changed.",
      "created_at" : "2021-09-27T08:24:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927644289",
      "id" : 927644289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843SrqB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T08:24:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927644289",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @kiminuo\r\n> \r\n> > I wonder whether this is a good candidate or not:\r\n> > https://github.com/bitcoin/bitcoin/blob/58c25bdcea9b95348e639180932b388d4bda8157/src/rpc/blockchain.cpp#L1859\r\n\r\nIn case you think it is a good candidate for changing to `std::clamp`, it would be helpful to post how you changed the line and a test failure details. ",
      "created_at" : "2021-09-27T08:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927651324",
      "id" : 927651324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843StX8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T08:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927651324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kiminuo \r\n> In case you think it is a good candidate for changing to `std::clamp`, it would be helpful to post how you changed the line and a test failure details.\r\n\r\n~Here are the [branch](https://github.com/hebasto/bitcoin/commits/210925-clamp-DEMO) and [tests](https://cirrus-ci.com/build/4764240100720640).~\r\n\r\nBranch: 7583dee2776b053928542cd82bf89e053cf4388d\r\nCI tests: https://cirrus-ci.com/build/4594368825786368",
      "created_at" : "2021-09-27T08:43:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927656832",
      "id" : 927656832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843SuuA",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T11:53:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927656832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ouch-if tests fail that means the behavior is not the same. I think we should be careful here. For the C++11 transition we even had an explicit rule not to do all-over-the-place code modernization like this, it's very easy to accidentally introduce a bug. I'm all for using `clamp` but might be better to introduce it when code is changed anyway.",
      "created_at" : "2021-09-27T11:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927761870",
      "id" : 927761870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843TIXO",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T11:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927761870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is not a trivial replacement. With std::min/max the argument order doesn't matter (min(a,b)==min(b,a)). However, with `std::clamp`, the order must be exactly right and there is only one correct order.",
      "created_at" : "2021-09-27T11:22:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927779377",
      "id" : 927779377,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843TMox",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T11:22:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927779377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the test has failed because `std::clamp`'s behavior is undefined when when the lo value is bigger than the hi value. For `std::clamp(blockcount, 0, pindex->nHeight - 1)` this is possible when `pindex->nHeight==0`\r\n\r\n> the order must be exactly right and there is only one correct order.\r\n\r\nNot only that, there can be cases where there is no order that is always correct :)",
      "created_at" : "2021-09-27T11:23:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927780250",
      "id" : 927780250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843TM2a",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T11:25:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927780250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716603915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716603915"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure if this can ever happen, but when `nBatchSize==0` this will now have undefined behavior. Previously the result used to be 1.",
      "commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "created_at" : "2021-09-27T11:31:49Z",
      "diff_hunk" : "@@ -109,7 +109,7 @@ class CCheckQueue\n                 //   all workers finish approximately simultaneously.\n                 // * Try to account for idle jobs which will instantly start helping.\n                 // * Don't do batches smaller than 1 (duh), or larger than nBatchSize.\n-                nNow = std::max(1U, std::min(nBatchSize, (unsigned int)queue.size() / (nTotal + nIdle + 1)));\n+                nNow = std::clamp<unsigned int>(queue.size() / (nTotal + nIdle + 1), 1, nBatchSize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716603915",
      "id" : 716603915,
      "line" : 112,
      "node_id" : "PRRC_kwDOABII584qtoIL",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 112,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 5,
      "pull_request_review_id" : 764156390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-27T11:36:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716603915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716606412"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716606412"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If `fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS - NUM_FDS_MESSAGE_CAPTURE` is negative then `nMaxConnections` used to be 0, but now the result is undefined",
      "commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "created_at" : "2021-09-27T11:35:56Z",
      "diff_hunk" : "@@ -880,7 +881,7 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n #else\n     int fd_max = FD_SETSIZE;\n #endif\n-    nMaxConnections = std::max(std::min<int>(nMaxConnections, fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS - NUM_FDS_MESSAGE_CAPTURE), 0);\n+    nMaxConnections = std::clamp<int>(nMaxConnections, 0, fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS - NUM_FDS_MESSAGE_CAPTURE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716606412",
      "id" : 716606412,
      "line" : 884,
      "node_id" : "PRRC_kwDOABII584qtovM",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 884,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 764156390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-27T11:36:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716606412",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716612774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716612774"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right. Would `assert(nBatchSize >= 1);` in the `CCheckQueue` constructor be enough?",
      "commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "created_at" : "2021-09-27T11:46:05Z",
      "diff_hunk" : "@@ -109,7 +109,7 @@ class CCheckQueue\n                 //   all workers finish approximately simultaneously.\n                 // * Try to account for idle jobs which will instantly start helping.\n                 // * Don't do batches smaller than 1 (duh), or larger than nBatchSize.\n-                nNow = std::max(1U, std::min(nBatchSize, (unsigned int)queue.size() / (nTotal + nIdle + 1)));\n+                nNow = std::clamp<unsigned int>(queue.size() / (nTotal + nIdle + 1), 1, nBatchSize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r716612774",
      "id" : 716612774,
      "in_reply_to_id" : 716603915,
      "line" : 112,
      "node_id" : "PRRC_kwDOABII584qtqSm",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 112,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 5,
      "pull_request_review_id" : 764168104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-27T11:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/716612774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-27T13:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927873644",
      "id" : 927873644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843Tjps",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T13:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927873644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717219327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717219327"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd put it right above the clamp, or not use clamp when there's a possibility that that could happen",
      "commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "created_at" : "2021-09-28T04:45:52Z",
      "diff_hunk" : "@@ -109,7 +109,7 @@ class CCheckQueue\n                 //   all workers finish approximately simultaneously.\n                 // * Try to account for idle jobs which will instantly start helping.\n                 // * Don't do batches smaller than 1 (duh), or larger than nBatchSize.\n-                nNow = std::max(1U, std::min(nBatchSize, (unsigned int)queue.size() / (nTotal + nIdle + 1)));\n+                nNow = std::clamp<unsigned int>(queue.size() / (nTotal + nIdle + 1), 1, nBatchSize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717219327",
      "id" : 717219327,
      "in_reply_to_id" : 716603915,
      "line" : 112,
      "node_id" : "PRRC_kwDOABII584qv-X_",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 112,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 5,
      "pull_request_review_id" : 764962839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T04:46:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717219327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 82c4e71025d0958b4066325731874863e1323a0e -> bf4838e6456fa744911a886356529656a16c19ed ([pr23095.04](https://github.com/hebasto/bitcoin/commits/pr23095.04) -> [pr23095.05](https://github.com/hebasto/bitcoin/commits/pr23095.05)):\r\n\r\n- rebased\r\n- addressed comments",
      "created_at" : "2021-09-28T07:54:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-928946761",
      "id" : 928946761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843XppJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-28T07:54:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/928946761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717322471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717322471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I thought again, and [put the assertion into the constructor](https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-928946761) because it is constructor's job to establish safe invariants for a class instance.",
      "commit_id" : "bf4838e6456fa744911a886356529656a16c19ed",
      "created_at" : "2021-09-28T07:58:41Z",
      "diff_hunk" : "@@ -109,7 +109,7 @@ class CCheckQueue\n                 //   all workers finish approximately simultaneously.\n                 // * Try to account for idle jobs which will instantly start helping.\n                 // * Don't do batches smaller than 1 (duh), or larger than nBatchSize.\n-                nNow = std::max(1U, std::min(nBatchSize, (unsigned int)queue.size() / (nTotal + nIdle + 1)));\n+                nNow = std::clamp<unsigned int>(queue.size() / (nTotal + nIdle + 1), 1, nBatchSize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717322471",
      "id" : 717322471,
      "in_reply_to_id" : 716603915,
      "line" : 113,
      "node_id" : "PRRC_kwDOABII584qwXjn",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 113,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/checkqueue.h",
      "position" : 13,
      "pull_request_review_id" : 765097015,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T08:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717322471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717323624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717323624"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This change [dropped](https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-928946761).",
      "commit_id" : "bf4838e6456fa744911a886356529656a16c19ed",
      "created_at" : "2021-09-28T08:00:11Z",
      "diff_hunk" : "@@ -880,7 +881,7 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n #else\n     int fd_max = FD_SETSIZE;\n #endif\n-    nMaxConnections = std::max(std::min<int>(nMaxConnections, fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS - NUM_FDS_MESSAGE_CAPTURE), 0);\n+    nMaxConnections = std::clamp<int>(nMaxConnections, 0, fd_max - nBind - MIN_CORE_FILEDESCRIPTORS - MAX_ADDNODE_CONNECTIONS - NUM_FDS_MESSAGE_CAPTURE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r717323624",
      "id" : 717323624,
      "in_reply_to_id" : 716606412,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qwX1o",
      "original_commit_id" : "82c4e71025d0958b4066325731874863e1323a0e",
      "original_line" : 884,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 765098659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T08:00:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717323624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated bf4838e6456fa744911a886356529656a16c19ed -> 665353fa65da110a9bd2b981029bf5ba9e1b9de3 ([pr23095.05](https://github.com/hebasto/bitcoin/commits/pr23095.05) -> [pr23095.06](https://github.com/hebasto/bitcoin/commits/pr23095.06), [diff](https://github.com/hebasto/bitcoin/compare/pr23095.05..pr23095.06)):\r\n\r\n- fixed fuzz test",
      "created_at" : "2021-09-29T08:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-929953601",
      "id" : 929953601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5843bfdB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T08:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/929953601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-10-21T03:52:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-948234478",
      "id" : 948234478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5844hOju",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948234478/reactions"
      },
      "updated_at" : "2021-10-21T03:52:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948234478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 665353fa65da110a9bd2b981029bf5ba9e1b9de3 -> 512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33 ([pr23095.06](https://github.com/hebasto/bitcoin/commits/pr23095.06) -> [pr23095.07](https://github.com/hebasto/bitcoin/commits/pr23095.07)) due to the conflict with #23137.",
      "created_at" : "2021-10-27T06:14:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-952575636",
      "id" : 952575636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5844xyaU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952575636/reactions"
      },
      "updated_at" : "2021-10-27T06:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952575636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r745621563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745621563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can we please add a static assert that `MAX_BLOCK_WEIGHT >= 8000`?",
      "commit_id" : "512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33",
      "created_at" : "2021-11-09T13:36:53Z",
      "diff_hunk" : "@@ -64,7 +64,7 @@ BlockAssembler::BlockAssembler(CChainState& chainstate, const CTxMemPool& mempoo\n {\n     blockMinFeeRate = options.blockMinFeeRate;\n     // Limit weight to between 4K and MAX_BLOCK_WEIGHT-4K for sanity:\n-    nBlockMaxWeight = std::max<size_t>(4000, std::min<size_t>(MAX_BLOCK_WEIGHT - 4000, options.nBlockMaxWeight));\n+    nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, MAX_BLOCK_WEIGHT - 4000);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r745621563",
      "id" : 745621563,
      "line" : 67,
      "node_id" : "PRRC_kwDOABII584scUg7",
      "original_commit_id" : "512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33",
      "original_line" : 67,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/miner.cpp",
      "position" : 5,
      "pull_request_review_id" : 801286428,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745621563/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T13:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745621563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33\r\nI checked all the changes and they look correct to me.",
      "created_at" : "2021-11-09T13:38:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-964159995",
      "id" : 964159995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5845d-n7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964159995/reactions"
      },
      "updated_at" : "2021-11-09T13:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964159995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Slightly tend toward NACK. It is non-trivial to review (https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927779377) and easily introduces UB, if the second or third argument are not compile time constants (https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927780250).\r\n\r\n",
      "created_at" : "2021-11-09T13:48:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-964167867",
      "id" : 964167867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5845eAi7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964167867/reactions"
      },
      "updated_at" : "2021-11-09T13:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964167867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r745633506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745633506"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't it be better to have a clamp function that does this by default, internally and at compile time? The condition must hold for all call sites.",
      "commit_id" : "512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33",
      "created_at" : "2021-11-09T13:50:36Z",
      "diff_hunk" : "@@ -64,7 +64,7 @@ BlockAssembler::BlockAssembler(CChainState& chainstate, const CTxMemPool& mempoo\n {\n     blockMinFeeRate = options.blockMinFeeRate;\n     // Limit weight to between 4K and MAX_BLOCK_WEIGHT-4K for sanity:\n-    nBlockMaxWeight = std::max<size_t>(4000, std::min<size_t>(MAX_BLOCK_WEIGHT - 4000, options.nBlockMaxWeight));\n+    nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, 4000, MAX_BLOCK_WEIGHT - 4000);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#discussion_r745633506",
      "id" : 745633506,
      "in_reply_to_id" : 745621563,
      "line" : 67,
      "node_id" : "PRRC_kwDOABII584scXbi",
      "original_commit_id" : "512dcf7d5b7ff815ce4fec2d6fe27cbb13aa3e33",
      "original_line" : 67,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/miner.cpp",
      "position" : 5,
      "pull_request_review_id" : 801301940,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745633506/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T13:50:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745633506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It is non-trivial to review ([#23095 (comment)](https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-927779377)) and easily introduces UB.\r\n\r\nClosing.",
      "created_at" : "2021-11-21T19:49:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-974883196",
      "id" : 974883196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5846G4l8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/974883196/reactions"
      },
      "updated_at" : "2021-11-21T19:49:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/974883196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe write a `Clamp<int64_t, /*min=*/-1, /*max=*/3>(var);` wrapper that has static asserts built in, and another one `Clamp` that copies `std::clamp`'s signature that asserts/throws/returns optional on UB?",
      "created_at" : "2021-11-22T10:09:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23095#issuecomment-975360161",
      "id" : 975360161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23095",
      "node_id" : "IC_kwDOABII5846ItCh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975360161/reactions"
      },
      "updated_at" : "2021-11-22T10:09:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975360161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
