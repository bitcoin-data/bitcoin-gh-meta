[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23474](https://github.com/bitcoin/bitcoin/pull/23474) (test: scripted-diff cleanups after generate* changes by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-23T22:13:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-926201551",
      "id" : 926201551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5843NLbP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926201551/reactions"
      },
      "updated_at" : "2021-11-15T11:32:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926201551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nAfter #22539 is merged, I'd suggest to also replace bare asserts with assert_equal()/assert_greater_than() helpers in the newly introduced subtest `sanity_check_rbf_estimates` (plus other fixups proposed in #22539).",
      "created_at" : "2021-10-04T22:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-933906604",
      "id" : 933906604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5843qkis",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933906604/reactions"
      },
      "updated_at" : "2021-10-04T22:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933906604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-10-07T19:40:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-938099109",
      "id" : 938099109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII58436kGl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938099109/reactions"
      },
      "updated_at" : "2021-10-07T19:40:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938099109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and addressed @theStack 's feedback from both here and #22539. But i forgot https://github.com/bitcoin/bitcoin/pull/22539#discussion_r719418075, will address but i think it can start to be reviewed in the meantime.",
      "created_at" : "2021-10-15T10:56:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-944205924",
      "id" : 944205924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5844R3Bk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/944205924/reactions"
      },
      "updated_at" : "2021-10-15T10:56:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/944205924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-11-09T10:41:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-964025782",
      "id" : 964025782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5845dd22",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964025782/reactions"
      },
      "updated_at" : "2021-11-09T10:41:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/964025782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased. Gave a look to replacing the use of the P2SH anyonecanspend by Miniwallet and it's actually a pretty invasive refactoring of the test.",
      "created_at" : "2021-11-15T00:09:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-968396689",
      "id" : 968396689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5845uI-R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968396689/reactions"
      },
      "updated_at" : "2021-11-15T00:09:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968396689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-11-16T04:02:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-969836862",
      "id" : 969836862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5845zok-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969836862/reactions"
      },
      "updated_at" : "2021-11-16T04:02:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969836862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.  In a future PR, I think the `initial_split` function could be moved to the MiniWallet since other tests could benefit from it too. ",
      "created_at" : "2021-12-01T22:22:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-984106955",
      "id" : 984106955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5846qEfL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984106955/reactions"
      },
      "updated_at" : "2021-12-01T22:22:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984106955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/41220998?v=4",
         "events_url" : "https://api.github.com/users/DariusParvin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DariusParvin/followers",
         "following_url" : "https://api.github.com/users/DariusParvin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DariusParvin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DariusParvin",
         "id" : 41220998,
         "login" : "DariusParvin",
         "node_id" : "MDQ6VXNlcjQxMjIwOTk4",
         "organizations_url" : "https://api.github.com/users/DariusParvin/orgs",
         "received_events_url" : "https://api.github.com/users/DariusParvin/received_events",
         "repos_url" : "https://api.github.com/users/DariusParvin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DariusParvin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DariusParvin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2021-12-09T12:27:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-989806538",
      "id" : 989806538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5846_z_K",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989806538/reactions"
      },
      "updated_at" : "2021-12-09T12:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989806538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r765775398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765775398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This change is in \"split coins in a single tx in fee estimation test\" but should be in \"use a single p2sh script in fee estimation test\" instead, yes?",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2021-12-09T13:13:12Z",
      "diff_hunk" : "@@ -158,8 +140,10 @@ def send_tx(node, utxo, feerate):\n     fee = tx_size * feerate\n \n     tx = CTransaction()\n-    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n-    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n+    tx.vin = [\n+        CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), REDEEM_SCRIPT)\n+    ]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH)]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r765775398",
      "id" : 765775398,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tpM4m",
      "original_commit_id" : "7b077e21f89abafe5609f37455cdbe26c00b74ae",
      "original_line" : 146,
      "original_position" : 102,
      "original_start_line" : 162,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : null,
      "pull_request_review_id" : 827662306,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765775398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2021-12-09T13:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765775398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r765783895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765783895"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in 7ccd775dcc5f363c9f35409e9170b1e07bfdc753:\r\n\r\nWhy not just use `tx.get_vsize()` ?",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2021-12-09T13:24:29Z",
      "diff_hunk" : "@@ -131,18 +131,17 @@ def check_estimates(node, fees_seen):\n \n def send_tx(node, utxo, feerate):\n     \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n-    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n-    tx_size = overhead + op + scriptsig + nseq + value + spk\n-    fee = tx_size * feerate\n-\n     tx = CTransaction()\n     tx.vin = [\n         CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), REDEEM_SCRIPT)\n     ]\n-    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH)]\n-    txid = node.sendrawtransaction(tx.serialize().hex())\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN), P2SH)]\n+\n+    # vbytes == bytes as we are using legacy transactions\n+    fee = len(tx.serialize()) * feerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r765783895",
      "id" : 765783895,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tpO9X",
      "original_commit_id" : "7ccd775dcc5f363c9f35409e9170b1e07bfdc753",
      "original_line" : 141,
      "original_position" : 17,
      "original_start_line" : 140,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : null,
      "pull_request_review_id" : 827662306,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765783895/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-12-09T13:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/765783895",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Also seems like you tried to co-author @theStack in 7ccd775dcc5f363c9f35409e9170b1e07bfdc753, but it needs to be on the 1st line maybe?",
      "created_at" : "2021-12-09T13:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-989861354",
      "id" : 989861354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5847ABXq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989861354/reactions"
      },
      "updated_at" : "2021-12-09T13:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989861354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Also seems like you tried to co-author\r\n\r\nThe issue is that `Co-Atuhored-By:` is spelt wrong.",
      "created_at" : "2021-12-09T13:41:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-989862752",
      "id" : 989862752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5847ABtg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989862752/reactions"
      },
      "updated_at" : "2021-12-09T13:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989862752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks you both! Done.",
      "created_at" : "2021-12-09T14:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#issuecomment-989909963",
      "id" : 989909963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23075",
      "node_id" : "IC_kwDOABII5847ANPL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989909963/reactions"
      },
      "updated_at" : "2021-12-09T14:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989909963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r776754747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776754747"
         }
      },
      "author_association" : "NONE",
      "body" : "Is the node \"state\" here expected to exactly the same before and after changes in https://github.com/bitcoin/bitcoin/pull/23075/commits/1fc03155e53f4f0a7f0a2529e55e802f49260b23? If so, how to test?\r\n\r\nE.g. this is what I tried to compare:\r\n\r\n- before\r\n\r\n`node.getbalance()` returns `Decimal('1200.00000000')`\r\n`len(node.listunspent())` returns `24`\r\n\r\n- after\r\n\r\n`node.getbalance()` returns `Decimal('1150.00000000')`\r\n`len(node.listunspent())` returns `23`",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2021-12-30T14:44:02Z",
      "diff_hunk" : "@@ -229,46 +205,45 @@ def transact_and_mine(self, numblocks, mining_node):\n \n     def initial_split(self, node):\n         \"\"\"Split two coinbase UTxOs into many small coins\"\"\"\n-        self.txouts = []\n-        self.txouts2 = []\n-        # Split a coinbase into two transaction puzzle outputs\n-        split_inputs(node, node.listunspent(0), self.txouts, True)\n-\n-        # Mine\n+        utxo_count = 2048\n+        self.confutxo = []\n+        splitted_amount = Decimal(\"0.04\")\n+        fee = Decimal(\"0.1\")\n+        change = Decimal(\"100\") - splitted_amount * utxo_count - fee\n+        tx = CTransaction()\n+        tx.vin = [\n+            CTxIn(COutPoint(int(cb[\"txid\"], 16), cb[\"vout\"]))\n+            for cb in node.listunspent()[:2]\n+        ]\n+        tx.vout = [CTxOut(int(splitted_amount * COIN), P2SH) for _ in range(utxo_count)]\n+        tx.vout.append(CTxOut(int(change * COIN), P2SH))\n+        txhex = node.signrawtransactionwithwallet(tx.serialize().hex())[\"hex\"]\n+        txid = node.sendrawtransaction(txhex)\n+        self.confutxo = [\n+            {\"txid\": txid, \"vout\": i, \"amount\": splitted_amount}\n+            for i in range(utxo_count)\n+        ]\n         while len(node.getrawmempool()) > 0:\n             self.generate(node, 1, sync_fun=self.no_op)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r776754747",
      "id" : 776754747,
      "line" : 227,
      "node_id" : "PRRC_kwDOABII584uTFY7",
      "original_commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "original_line" : 227,
      "original_position" : 230,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 230,
      "pull_request_review_id" : 841944432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776754747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-30T15:30:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776754747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91135419?v=4",
         "events_url" : "https://api.github.com/users/pg156/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pg156/followers",
         "following_url" : "https://api.github.com/users/pg156/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pg156/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pg156",
         "id" : 91135419,
         "login" : "pg156",
         "node_id" : "MDQ6VXNlcjkxMTM1NDE5",
         "organizations_url" : "https://api.github.com/users/pg156/orgs",
         "received_events_url" : "https://api.github.com/users/pg156/received_events",
         "repos_url" : "https://api.github.com/users/pg156/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pg156/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pg156/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pg156"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r776767017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776767017"
         }
      },
      "author_association" : "NONE",
      "body" : "@darosior said \"since we use legacy txs in this test it's indeed much cleaner\" in https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917349. Does this mean for non-legacy txs, we can no longer use the same logic `     fee = tx.get_vsize() * feerate` to calculate fee?",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2021-12-30T15:15:31Z",
      "diff_hunk" : "@@ -125,61 +89,67 @@ def check_raw_estimates(node, fees_seen):\n             assert_greater_than(feerate, 0)\n \n             if feerate + delta < min(fees_seen) or feerate - delta > max(fees_seen):\n-                raise AssertionError(f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\")\n+                raise AssertionError(\n+                    f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\"\n+                )\n+\n \n def check_smart_estimates(node, fees_seen):\n     \"\"\"Call estimatesmartfee and verify that the estimates meet certain invariants.\"\"\"\n \n     delta = 1.0e-6  # account for rounding error\n     last_feerate = float(max(fees_seen))\n     all_smart_estimates = [node.estimatesmartfee(i) for i in range(1, 26)]\n-    mempoolMinFee = node.getmempoolinfo()['mempoolminfee']\n-    minRelaytxFee = node.getmempoolinfo()['minrelaytxfee']\n+    mempoolMinFee = node.getmempoolinfo()[\"mempoolminfee\"]\n+    minRelaytxFee = node.getmempoolinfo()[\"minrelaytxfee\"]\n     for i, e in enumerate(all_smart_estimates):  # estimate is for i+1\n         feerate = float(e[\"feerate\"])\n         assert_greater_than(feerate, 0)\n         assert_greater_than_or_equal(feerate, float(mempoolMinFee))\n         assert_greater_than_or_equal(feerate, float(minRelaytxFee))\n \n         if feerate + delta < min(fees_seen) or feerate - delta > max(fees_seen):\n-            raise AssertionError(f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\")\n+            raise AssertionError(\n+                f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\"\n+            )\n         if feerate - delta > last_feerate:\n-            raise AssertionError(f\"Estimated fee ({feerate}) larger than last fee ({last_feerate}) for lower number of confirms\")\n+            raise AssertionError(\n+                f\"Estimated fee ({feerate}) larger than last fee ({last_feerate}) for lower number of confirms\"\n+            )\n         last_feerate = feerate\n \n         if i == 0:\n             assert_equal(e[\"blocks\"], 2)\n         else:\n             assert_greater_than_or_equal(i + 1, e[\"blocks\"])\n \n+\n def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n \n def send_tx(node, utxo, feerate):\n     \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n-    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n-    tx_size = overhead + op + scriptsig + nseq + value + spk\n-    fee = tx_size * feerate\n-\n     tx = CTransaction()\n-    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n-    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n-    txid = node.sendrawtransaction(tx.serialize().hex())\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), REDEEM_SCRIPT)]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN), P2SH)]\n+\n+    # vbytes == bytes as we are using legacy transactions\n+    fee = tx.get_vsize() * feerate\n+    tx.vout[0].nValue -= fee\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r776767017",
      "id" : 776767017,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII584uTIYp",
      "original_commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "original_line" : 141,
      "original_position" : 160,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 160,
      "pull_request_review_id" : 841944432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776767017/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-30T15:30:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/776767017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91135419?v=4",
         "events_url" : "https://api.github.com/users/pg156/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pg156/followers",
         "following_url" : "https://api.github.com/users/pg156/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pg156/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pg156",
         "id" : 91135419,
         "login" : "pg156",
         "node_id" : "MDQ6VXNlcjkxMTM1NDE5",
         "organizations_url" : "https://api.github.com/users/pg156/orgs",
         "received_events_url" : "https://api.github.com/users/pg156/received_events",
         "repos_url" : "https://api.github.com/users/pg156/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pg156/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pg156/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pg156"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r777972458"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777972458"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yus :rocket: big fan of removing `-acceptnonstdtxn`",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2022-01-04T10:24:59Z",
      "diff_hunk" : "@@ -146,12 +146,11 @@ def send_tx(node, utxo, feerate):\n class EstimateFeeTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 3\n-        # mine non-standard txs (e.g. txs with \"dust\" outputs)\n         # Force fSendTrickle to true (via whitelist.noban)\n         self.extra_args = [\n-            [\"-acceptnonstdtxn\", \"-whitelist=noban@127.0.0.1\"],\n-            [\"-acceptnonstdtxn\", \"-whitelist=noban@127.0.0.1\", \"-blockmaxweight=68000\"],\n-            [\"-acceptnonstdtxn\", \"-whitelist=noban@127.0.0.1\", \"-blockmaxweight=32000\"],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r777972458",
      "id" : 777972458,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII584uXurq",
      "original_commit_id" : "15f5fd62afb57ec501dc8c6706999d4c83e58414",
      "original_line" : 154,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 9,
      "pull_request_review_id" : 843407432,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777972458/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T11:07:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777972458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779514399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779514399"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the previous wording was correct. Redeem script refers to the thing that is hashed (serialized), see also BIP 16:\r\n\r\n> serialized script - also referred to as the redeemScript ",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2022-01-06T12:31:29Z",
      "diff_hunk" : "@@ -36,16 +35,14 @@\n # Construct 2 trivial P2SH's and the ScriptSigs that spend them\n # So we can create many transactions without needing to spend\n # time signing.\n-REDEEM_SCRIPT_1 = CScript([OP_1, OP_DROP])\n-REDEEM_SCRIPT_2 = CScript([OP_2, OP_DROP])\n-P2SH_1 = script_to_p2sh_script(REDEEM_SCRIPT_1)\n-P2SH_2 = script_to_p2sh_script(REDEEM_SCRIPT_2)\n+SCRIPT = CScript([OP_1, OP_DROP])\n+P2SH = script_to_p2sh_script(SCRIPT)\n+REDEEM_SCRIPT = CScript([OP_TRUE, SCRIPT])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779514399",
      "id" : 779514399,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII584udnIf",
      "original_commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "original_line" : 40,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 18,
      "pull_request_review_id" : 845580019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779514399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-06T12:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779514399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779526253"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779526253"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Is the node \"state\" here expected to exactly the same before and after changes in 1fc0315?\r\n\r\nIt's not. At least, it was not my intention.",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2022-01-06T12:53:58Z",
      "diff_hunk" : "@@ -229,46 +205,45 @@ def transact_and_mine(self, numblocks, mining_node):\n \n     def initial_split(self, node):\n         \"\"\"Split two coinbase UTxOs into many small coins\"\"\"\n-        self.txouts = []\n-        self.txouts2 = []\n-        # Split a coinbase into two transaction puzzle outputs\n-        split_inputs(node, node.listunspent(0), self.txouts, True)\n-\n-        # Mine\n+        utxo_count = 2048\n+        self.confutxo = []\n+        splitted_amount = Decimal(\"0.04\")\n+        fee = Decimal(\"0.1\")\n+        change = Decimal(\"100\") - splitted_amount * utxo_count - fee\n+        tx = CTransaction()\n+        tx.vin = [\n+            CTxIn(COutPoint(int(cb[\"txid\"], 16), cb[\"vout\"]))\n+            for cb in node.listunspent()[:2]\n+        ]\n+        tx.vout = [CTxOut(int(splitted_amount * COIN), P2SH) for _ in range(utxo_count)]\n+        tx.vout.append(CTxOut(int(change * COIN), P2SH))\n+        txhex = node.signrawtransactionwithwallet(tx.serialize().hex())[\"hex\"]\n+        txid = node.sendrawtransaction(txhex)\n+        self.confutxo = [\n+            {\"txid\": txid, \"vout\": i, \"amount\": splitted_amount}\n+            for i in range(utxo_count)\n+        ]\n         while len(node.getrawmempool()) > 0:\n             self.generate(node, 1, sync_fun=self.no_op)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779526253",
      "id" : 779526253,
      "in_reply_to_id" : 776754747,
      "line" : 227,
      "node_id" : "PRRC_kwDOABII584udqBt",
      "original_commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "original_line" : 227,
      "original_position" : 230,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 230,
      "pull_request_review_id" : 845596551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779526253/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-06T12:53:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779526253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779527313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779527313"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/22539#discussion_r720917349 was refering to using the length of the serialized transaction. This works only for legacy transactions as there is no witness data discount (hence 1 byte == 1 vbyte).",
      "commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "created_at" : "2022-01-06T12:55:43Z",
      "diff_hunk" : "@@ -125,61 +89,67 @@ def check_raw_estimates(node, fees_seen):\n             assert_greater_than(feerate, 0)\n \n             if feerate + delta < min(fees_seen) or feerate - delta > max(fees_seen):\n-                raise AssertionError(f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\")\n+                raise AssertionError(\n+                    f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\"\n+                )\n+\n \n def check_smart_estimates(node, fees_seen):\n     \"\"\"Call estimatesmartfee and verify that the estimates meet certain invariants.\"\"\"\n \n     delta = 1.0e-6  # account for rounding error\n     last_feerate = float(max(fees_seen))\n     all_smart_estimates = [node.estimatesmartfee(i) for i in range(1, 26)]\n-    mempoolMinFee = node.getmempoolinfo()['mempoolminfee']\n-    minRelaytxFee = node.getmempoolinfo()['minrelaytxfee']\n+    mempoolMinFee = node.getmempoolinfo()[\"mempoolminfee\"]\n+    minRelaytxFee = node.getmempoolinfo()[\"minrelaytxfee\"]\n     for i, e in enumerate(all_smart_estimates):  # estimate is for i+1\n         feerate = float(e[\"feerate\"])\n         assert_greater_than(feerate, 0)\n         assert_greater_than_or_equal(feerate, float(mempoolMinFee))\n         assert_greater_than_or_equal(feerate, float(minRelaytxFee))\n \n         if feerate + delta < min(fees_seen) or feerate - delta > max(fees_seen):\n-            raise AssertionError(f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\")\n+            raise AssertionError(\n+                f\"Estimated fee ({feerate}) out of range ({min(fees_seen)},{max(fees_seen)})\"\n+            )\n         if feerate - delta > last_feerate:\n-            raise AssertionError(f\"Estimated fee ({feerate}) larger than last fee ({last_feerate}) for lower number of confirms\")\n+            raise AssertionError(\n+                f\"Estimated fee ({feerate}) larger than last fee ({last_feerate}) for lower number of confirms\"\n+            )\n         last_feerate = feerate\n \n         if i == 0:\n             assert_equal(e[\"blocks\"], 2)\n         else:\n             assert_greater_than_or_equal(i + 1, e[\"blocks\"])\n \n+\n def check_estimates(node, fees_seen):\n     check_raw_estimates(node, fees_seen)\n     check_smart_estimates(node, fees_seen)\n \n \n def send_tx(node, utxo, feerate):\n     \"\"\"Broadcast a 1in-1out transaction with a specific input and feerate (sat/vb).\"\"\"\n-    overhead, op, scriptsig, nseq, value, spk = 10, 36, 5, 4, 8, 24\n-    tx_size = overhead + op + scriptsig + nseq + value + spk\n-    fee = tx_size * feerate\n-\n     tx = CTransaction()\n-    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), SCRIPT_SIG[utxo[\"vout\"]])]\n-    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN) - fee, P2SH_1)]\n-    txid = node.sendrawtransaction(tx.serialize().hex())\n+    tx.vin = [CTxIn(COutPoint(int(utxo[\"txid\"], 16), utxo[\"vout\"]), REDEEM_SCRIPT)]\n+    tx.vout = [CTxOut(int(utxo[\"amount\"] * COIN), P2SH)]\n+\n+    # vbytes == bytes as we are using legacy transactions\n+    fee = tx.get_vsize() * feerate\n+    tx.vout[0].nValue -= fee\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23075#discussion_r779527313",
      "id" : 779527313,
      "in_reply_to_id" : 776767017,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII584udqSR",
      "original_commit_id" : "60ae1161a4c415cc73f47df95598f3688e8d34df",
      "original_line" : 141,
      "original_position" : 160,
      "original_start_line" : null,
      "path" : "test/functional/feature_fee_estimation.py",
      "position" : 160,
      "pull_request_review_id" : 845597899,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23075",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779527313/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-06T12:55:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779527313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
