[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18606 (test: checks that bitcoin-cli autocomplete is in sync by pierreN)\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-26T20:26:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#issuecomment-650384229",
      "id" : 650384229,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19386",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDM4NDIyOQ==",
      "updated_at" : "2020-06-26T20:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650384229",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\n>   Here or follow up, makes sense to also assert type of returned UniValue?\r\n\r\nFWIW I dislike the idea of doing this at run-time. We don't want RPC to suddenly crash because an argument doesn't match its specified type in the help.\r\nThe extra checking also adds overhead on every RPC call.\r\nIt might make sense for something that is enabled with other heavier debug checks, enabled during the tests.\r\n\r\n> Removing all python regex linters on the args, now that RPCMan can be used to generate any output, including the cli.cpp table\r\n\r\nThis is somewhat difficult. It was considered in the past but\r\n\r\n- It would be undesirable to link the server-side tables into the CLI, as this either pulls in the associated implementations or splits the table in yet another way.\r\n- The CLI table could be spit out by some command line flag to `bitcoin`, however because of cross-compilation we don't want the build process to depend on being able to run the generated executable (and it needs to be possible to build -cli without -d).\r\n- `bitcoin-cli` could stop hardcoding the table completely but request it, over the network, from `bitcoind`. This is the most elegant option in a certain regard, but, one would want to cache this table (and not load it on every request). Getting the cache invalidation strategy (when changes) right is non-trivia,l though.\r\n",
      "created_at" : "2020-06-29T14:27:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#issuecomment-651157811",
      "id" : 651157811,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19386",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTE1NzgxMQ==",
      "updated_at" : "2020-06-29T14:27:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651157811",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  It might make sense for something that is enabled with other heavier debug checks, enabled during the tests.\r\n\r\nGood idea. This could be hidden behind `--enable-debug` or some other option\r\n\r\n> The CLI table could be spit out by some command line flag to bitcoin, however because of cross-compilation we don't want the build process to depend on being able to run the generated executable (and it needs to be possible to build -cli without -d).\r\n\r\nMakes sense. I think I will keep the linter/test around, but make it less fragile by removing the regex parsing, which has been broken in the past at least once.",
      "created_at" : "2020-06-29T14:38:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#issuecomment-651164029",
      "id" : 651164029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19386",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTE2NDAyOQ==",
      "updated_at" : "2020-06-29T14:38:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651164029",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447739187"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447739187"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: Add CRPCCommand constructor which takes RPCHelpMan\" (fac1bf1a08ea9cb5a62889e61696d9503338c105)\r\n\r\nIMO, it'd be nicer if this were not a macro. Seems like this could be a RPCHelpMan method or standalone function:\r\n\r\n```c++\r\nUniValue HandleRequest(const RPCHelpMan& man, const JSONRPCRequest& request)\r\n{\r\n    return man.m_fun(request);\r\n}\r\n```\r\n\r\nAlso, maybe in the future it would be nice to add `man.Check(request);` here so it can be removed from all the individual RPC methods.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T14:43:12Z",
      "diff_hunk" : "@@ -322,10 +322,14 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+#define CALL_RPC_METHOD(rpc_name, json_request) [&] { const RPCHelpMan& man = rpc_name(); return man.m_fun(man, json_request); }()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447739187",
      "id" : 447739187,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzczOTE4Nw==",
      "original_commit_id" : "fac1bf1a08ea9cb5a62889e61696d9503338c105",
      "original_line" : 325,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 440088800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447739187",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447743298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447743298"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: Add CRPCCommand constructor which takes RPCHelpMan\" (fac1bf1a08ea9cb5a62889e61696d9503338c105)\r\n\r\nI think `RPCMethod m_method` would be more obvious naming than `RPCMethod m_fun`. Also in the future I'd consider a broader name cleanup, like renaming `RPCHelpMan` to `RPCMethod` and renaming `RPCMethod` to `RPCMethodImpl`",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T14:48:28Z",
      "diff_hunk" : "@@ -340,6 +344,8 @@ class RPCHelpMan\n         }\n     }\n \n+    const RPCMethod m_fun;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447743298",
      "id" : 447743298,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc0MzI5OA==",
      "original_commit_id" : "fac1bf1a08ea9cb5a62889e61696d9503338c105",
      "original_line" : 347,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 440088800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447743298",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447749612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447749612"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: Update server to use new RPCHelpMan\" (fa0ae5063f4d4eae429b33d4375fd8101adb8150)\r\n\r\nThis is just being kept for consistency right? It seems like it should be redundant with the self.Check call immediately above.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T14:56:08Z",
      "diff_hunk" : "@@ -143,44 +141,54 @@ UniValue help(const JSONRPCRequest& jsonRequest)\n                     RPCResult::Type::STR, \"\", \"The help text\"\n                 },\n                 RPCExamples{\"\"},\n-            }.ToString()\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& jsonRequest) -> UniValue\n+{\n+    self.Check(jsonRequest);\n+    if (jsonRequest.fHelp || jsonRequest.params.size() > 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447749612",
      "id" : 447749612,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc0OTYxMg==",
      "original_commit_id" : "fa0ae5063f4d4eae429b33d4375fd8101adb8150",
      "original_line" : 147,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 440088800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447749612",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447756565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447756565"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \" rpc: Assert that passed arg names are equal to hardcoded ones (server)\" (fac2edbd5fc8075647e90e90d49b3cd910bdbbb7)\r\n\r\nIt seems like it might be cleaner if instead of adding a new HiddenArg struct, and new RPCHelpMan constructor and special case code for m_hidden_arg in GetArgNames, this just added a new `RPCArg::Type::HIDDEN` type. This would also support multiple hidden args, or hidden args after non-hidden args.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T15:05:02Z",
      "diff_hunk" : "@@ -329,6 +329,11 @@ class RPCHelpMan\n public:\n     RPCHelpMan(std::string name, std::string description, std::vector<RPCArg> args, RPCResults results, RPCExamples examples);\n     using RPCMethod = std::function<UniValue(const RPCHelpMan&, const JSONRPCRequest&)>;\n+    struct HiddenArg {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447756565",
      "id" : 447756565,
      "line" : 330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc1NjU2NQ==",
      "original_commit_id" : "fac2edbd5fc8075647e90e90d49b3cd910bdbbb7",
      "original_line" : 330,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 5,
      "pull_request_review_id" : 440088800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447756565",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447851960"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447851960"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hidden args should not be a thing, because I can't imagine a use case for them.\r\n\r\nIf they are needed for testing, a new (hidden) RPC method with un-hidden RPC arguments should be added.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T17:19:28Z",
      "diff_hunk" : "@@ -329,6 +329,11 @@ class RPCHelpMan\n public:\n     RPCHelpMan(std::string name, std::string description, std::vector<RPCArg> args, RPCResults results, RPCExamples examples);\n     using RPCMethod = std::function<UniValue(const RPCHelpMan&, const JSONRPCRequest&)>;\n+    struct HiddenArg {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447851960",
      "id" : 447851960,
      "in_reply_to_id" : 447756565,
      "line" : 330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg1MTk2MA==",
      "original_commit_id" : "fac2edbd5fc8075647e90e90d49b3cd910bdbbb7",
      "original_line" : 330,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 5,
      "pull_request_review_id" : 440229846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447851960",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447886121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447886121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thx. Done in faaeb2b0b347b40ce456a951eec5e820587e5b02",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T18:14:56Z",
      "diff_hunk" : "@@ -322,10 +322,14 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+#define CALL_RPC_METHOD(rpc_name, json_request) [&] { const RPCHelpMan& man = rpc_name(); return man.m_fun(man, json_request); }()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447886121",
      "id" : 447886121,
      "in_reply_to_id" : 447739187,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg4NjEyMQ==",
      "original_commit_id" : "fac1bf1a08ea9cb5a62889e61696d9503338c105",
      "original_line" : 325,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 440270911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447886121",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447886463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447886463"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, renamed to `RPCMethodImpl` in faaeb2b0b347b40ce456a951eec5e820587e5b02",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T18:15:30Z",
      "diff_hunk" : "@@ -340,6 +344,8 @@ class RPCHelpMan\n         }\n     }\n \n+    const RPCMethod m_fun;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447886463",
      "id" : 447886463,
      "in_reply_to_id" : 447743298,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg4NjQ2Mw==",
      "original_commit_id" : "fac1bf1a08ea9cb5a62889e61696d9503338c105",
      "original_line" : 347,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 440271316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447886463",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447890090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447890090"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thx, done in fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-06-30T18:21:32Z",
      "diff_hunk" : "@@ -143,44 +141,54 @@ UniValue help(const JSONRPCRequest& jsonRequest)\n                     RPCResult::Type::STR, \"\", \"The help text\"\n                 },\n                 RPCExamples{\"\"},\n-            }.ToString()\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& jsonRequest) -> UniValue\n+{\n+    self.Check(jsonRequest);\n+    if (jsonRequest.fHelp || jsonRequest.params.size() > 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447890090",
      "id" : 447890090,
      "in_reply_to_id" : 447749612,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg5MDA5MA==",
      "original_commit_id" : "fa0ae5063f4d4eae429b33d4375fd8101adb8150",
      "original_line" : 147,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 440275563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-30T18:33:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447890090",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed feedback. Sorry for the intermediate force-pushes",
      "created_at" : "2020-06-30T19:36:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#issuecomment-652000512",
      "id" : 652000512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19386",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MjAwMDUxMg==",
      "updated_at" : "2020-06-30T19:36:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/652000512",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r449214349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449214349"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447851960\r\n\r\n> Hidden args should not be a thing, because I can't imagine a use case for them.\r\n> \r\n> If they are needed for testing, a new (hidden) RPC method with un-hidden RPC arguments should be added.\r\n\r\nBeyond testing, undocumented hidden args also seem useful as a way of removing options we no longer want to support like wallet account and min_conf arguments in some places, and still maintaining compatibility when arguments are set to specific values (e.g. min_conf=1, account=\"*\").\r\n\r\nBut regardless of whether hidden args will be used in the future, adding a `Type::HIDDEN` enum value seems like a simpler way to implement hidden args now than adding a `HiddenArg` struct and alternate code path.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-07-02T19:04:09Z",
      "diff_hunk" : "@@ -329,6 +329,11 @@ class RPCHelpMan\n public:\n     RPCHelpMan(std::string name, std::string description, std::vector<RPCArg> args, RPCResults results, RPCExamples examples);\n     using RPCMethod = std::function<UniValue(const RPCHelpMan&, const JSONRPCRequest&)>;\n+    struct HiddenArg {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r449214349",
      "id" : 449214349,
      "in_reply_to_id" : 447756565,
      "line" : 330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIxNDM0OQ==",
      "original_commit_id" : "fac2edbd5fc8075647e90e90d49b3cd910bdbbb7",
      "original_line" : 330,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 5,
      "pull_request_review_id" : 441952566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-02T19:31:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449214349",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r449249758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449249758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Beyond testing, undocumented hidden args also seem useful as a way of removing options\r\n\r\nI disagree. The RPC interface seems the wrong place to hide options in the documentation but then still accept them. For deprecation we use `-rpcdeprecated` and proper updates to the documentation to say an argument has been deprecated or is discouraged. (Edit: Making an option hidden will only hide the documentation that says the argument has been deprecated and thus will have the opposite effect of what was intended, no?)\r\n\r\nI plan to remove `HiddenArg` before the next release, so the implementation shouldn't matter as long as it is minimal and correct.",
      "commit_id" : "fa87adf7c6433517a8ed56f0c93560bc9837ad64",
      "created_at" : "2020-07-02T20:26:38Z",
      "diff_hunk" : "@@ -329,6 +329,11 @@ class RPCHelpMan\n public:\n     RPCHelpMan(std::string name, std::string description, std::vector<RPCArg> args, RPCResults results, RPCExamples examples);\n     using RPCMethod = std::function<UniValue(const RPCHelpMan&, const JSONRPCRequest&)>;\n+    struct HiddenArg {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#discussion_r449249758",
      "id" : 449249758,
      "in_reply_to_id" : 447756565,
      "line" : 330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI0OTc1OA==",
      "original_commit_id" : "fac2edbd5fc8075647e90e90d49b3cd910bdbbb7",
      "original_line" : 330,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 5,
      "pull_request_review_id" : 441998057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19386",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-02T20:27:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449249758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So suggestion from #19386 (comment) doesn't get lost, I think HandleRequest(request) method could call Check(request), so every individual method doesn't have to check its own arguments.\r\n\r\nThanks. Fixed and force pushed",
      "created_at" : "2020-07-03T15:54:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19386#issuecomment-653605788",
      "id" : 653605788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19386",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MzYwNTc4OA==",
      "updated_at" : "2020-07-03T15:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/653605788",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
