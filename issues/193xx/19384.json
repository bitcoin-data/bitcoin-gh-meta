{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Rationale: faster functional test shutdown\r\n\r\nWe don't need to wait for clean nodes shutdown during test shutdown,\r\nso just send kill signal and move on with the next test. Because we\r\nalready allow to run tests in parallel there is no possible problems\r\ndue to resource contention.\r\n\r\nI did a simple measurement of shutdown time. Waiting for a clean shutdown takes on average about 0.4-0.6s on my system depending on amount of nodes. Just sending a SIGKILL is <1ms.\r\n\r\nFor the whole test suite this gives ~80s speed up, which is about 2% improvement. I understand that is not much, but the change is also very small and all future tests will automatically benefit from this change. \r\n\r\nThis is how a measured nodes shutdown time:\r\n```diff\r\ndiff --git a/test/functional/test_framework/test_framework.py b/test/functional/test_framework/test_framework.py\r\nindex 9d9e06515..09721ee34 100755\r\n--- a/test/functional/test_framework/test_framework.py\r\n+++ b/test/functional/test_framework/test_framework.py\r\n@@ -260,8 +260,11 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n         self.network_thread.close()\r\n         if not self.options.noshutdown:\r\n             self.log.info(\"Stopping nodes\")\r\n+            start = time.time()\r\n             if self.nodes:\r\n                 self.stop_nodes()\r\n+            end = time.time()\r\n+            print(\"Stop time: %f\" % (end - start))\r\n         else:\r\n             for node in self.nodes:\r\n                 node.cleanup_on_exit = False\r\n```",
   "closed_at" : "2020-08-17T11:22:23Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
      "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
      "followers_url" : "https://api.github.com/users/S3RK/followers",
      "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/S3RK",
      "id" : 1466284,
      "login" : "S3RK",
      "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
      "organizations_url" : "https://api.github.com/users/S3RK/orgs",
      "received_events_url" : "https://api.github.com/users/S3RK/received_events",
      "repos_url" : "https://api.github.com/users/S3RK/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/S3RK"
   },
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19384/comments",
   "created_at" : "2020-06-26T10:20:24Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19384/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/19384",
   "id" : 646162871,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "description" : null,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19384/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NDQwNTAzNjU1",
   "number" : 19384,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/19384.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19384",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/19384.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19384"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "test: speed up functional tests",
   "updated_at" : "2020-08-17T11:22:23Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19384",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
      "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
      "followers_url" : "https://api.github.com/users/S3RK/followers",
      "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/S3RK",
      "id" : 1466284,
      "login" : "S3RK",
      "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
      "organizations_url" : "https://api.github.com/users/S3RK/orgs",
      "received_events_url" : "https://api.github.com/users/S3RK/received_events",
      "repos_url" : "https://api.github.com/users/S3RK/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/S3RK"
   }
}
