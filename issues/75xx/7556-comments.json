[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\n",
      "created_at" : "2016-02-26T07:20:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189144012",
      "id" : 189144012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTE0NDAxMg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189144012/reactions"
      },
      "updated_at" : "2016-02-26T07:20:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189144012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I still disagree that storing the last sizelimit passed to CTxMemPool::TrimToSize() are the right semantics. It strikes me as hackish, unclean and not very reusable.\nI would prefer any of the multiple solutions I offered in #7115. But at that point none of the solutions were acceptable to you, in fact, you were strongly opposed to https://github.com/morcos/bitcoin/commit/cf95aa1225df59139c774ca98d6a24fba88a5d4f unless I was open to \"concede\" your https://github.com/morcos/bitcoin/commit/a8261aea4a67d3482893b01c6583b58048b10b95 .\nMay I ask what has made you change your mind about decoupling CBlockPolicyEstimator from CTxMemPool ?\nAt the same time, that change of opinion seems in direct contradiction with #7557.\n\nIf anyone else prefers the solution in #7115, I'm happy to rebase and reopen (or open a new one replacing it, whatever is preferred).\n\nAlso, morcos, last time we discussed, you didn't had time to collaborate with me on policy encapsulation. If that's not the case anymore, would you mind to share your thoughts on #7145 and  #6423 (based on the apparently-impossible-to-merge #6068) now?\n\nThat would probably help me understand the differences in #7557 much better.\n",
      "created_at" : "2016-02-26T17:30:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189383217",
      "id" : 189383217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTM4MzIxNw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189383217/reactions"
      },
      "updated_at" : "2016-02-26T17:30:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189383217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jtimon Actually the only piece of this I care about is the first commit, storing the sizeLimit in TrimToSize and not having to pass it into GetMinFee.  In my opinion that is the design of the code:\n- The mempool is limited (there is no reason for that limit to be static).  \n- The size of that limit is set with TrimToSize. (unchanged in this PR)\n- GetMinFee does some calculations based on the mempool's current limit (oddly passed in from the outside before this PR)\n\nI added your two commits because I thought you wanted them and they were made easier after my commit.  I am still hesitant to think that the CBlockPolicyEstimator won't need to depend on the mempool, but as I'd said before, I'm willing to cross that bridge when we get to it.\n\nI'm happy to help with your other refactor commits, but my hesitation has been not wanting to review the code without knowing that is the direction other contributors want to go.  If you could get a couple concept ACK's, I'd be happy to dive in more.  I tried to limit this and #7557 to the parts that I understand well and trusted my own opinion on direction.\n",
      "created_at" : "2016-02-26T18:26:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189412762",
      "id" : 189412762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTQxMjc2Mg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189412762/reactions"
      },
      "updated_at" : "2016-02-26T18:26:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189412762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "node_id" : "MDQ6VXNlcjQzNjAzNDk=",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The mempool is limited (there is no reason for that limit to be static).\n\nTrue, but is currently static. Are there any plans to make it dynamic? Can you share more about that?\n\n> The size of that limit is set with TrimToSize. (unchanged in this PR)\n\nNo, before this PR, it is set in `GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE)`, not in TrimToSize (apart from the unittests). I disagree that https://github.com/morcos/bitcoin/commit/a8261aea4a67d3482893b01c6583b58048b10b95#diff-ca74c4b28865382863b8fe7633a85cd6R958 is not change. It is a change that I'm still not able to understand. I also think it is a very counter-intuitive design and will cause confusion no matter how well is documented (by the way, you haven't updated CTxMemPool::TrimToSize's documentation when making this change).\n\n> GetMinFee does some calculations based on the mempool's current limit (oddly passed in from the outside before this PR)\n\nOddly indeed, I'm glad that you are not opposed to changing it anymore like you were in the past when you nacked https://github.com/bitcoin/bitcoin/commit/30ac1d378c71fcf84999d119f341e8e46b4022bf in  https://github.com/bitcoin/bitcoin/pull/7115#issuecomment-161045375\nI solved this in multiple alternative ways (none of them including your weird [at least to me] design choice of setting the value every time) and none of them was satisfactory to you at the time.\nSetting the max size in TrimToSize like you do here is NOT a requirement for cleaning up GetMinFee.\n\nI strongly dislike that design choice. As said, if there's interest, I'm happy to rebase/rewrite an alternative without that design choice. In the meantime, NACK from me on that particular change (although if other people understand and like that decision there's no point for me to work on an alternative without it).\n\nBtw, @laanwj shouldn't this have the \"refactoring\" label just like #7115 had?\n",
      "created_at" : "2016-02-26T19:59:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189457683",
      "id" : 189457683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTQ1NzY4Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189457683/reactions"
      },
      "updated_at" : "2016-02-26T20:01:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189457683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jtimon I don't mean to be difficult but I would like to get a8261ae merged.  Will it be easier for me to achieve that if I keep your commits in this PR or if I remove them?  I am indifferent.  I'll add the commenting you suggest either way.\n",
      "created_at" : "2016-02-26T20:38:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189474952",
      "id" : 189474952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTQ3NDk1Mg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189474952/reactions"
      },
      "updated_at" : "2016-02-26T20:38:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189474952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "node_id" : "MDQ6VXNlcjQzNjAzNDk=",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @jtimon I don't mean to be difficult but I would like to get a8261ae merged. \n\nI know, you've been wanting it since at least #7115.\nI don't want to be difficult myself, but I still don't understand  https://github.com/morcos/bitcoin/commit/a8261aea4a67d3482893b01c6583b58048b10b95#diff-ca74c4b28865382863b8fe7633a85cd6R958 and I highly dislike it as previously explained.\n\n> Will it be easier for me to achieve that if I keep your commits in this PR or if I remove them? I am indifferent.\n\nI don't see how adding other things that I like to a PR can make me like the one particular line I still highly dislike. I thank you for rebasing my commits on top of your desired change, because that makes it clearer where our disagreement is, but I think we already discovered this disagreement when discussing #7115.\nThe only thing that could change my mind on this is an explanation that I can understand and agree with for https://github.com/morcos/bitcoin/commit/a8261aea4a67d3482893b01c6583b58048b10b95#diff-ca74c4b28865382863b8fe7633a85cd6R958 . Bargaining with other changes won't help. Telling me that \"it is the current design\" or \"it is the most clean design\" or something vague of the sort, or \"to solve X\" (X being something that #7115 also solves) won't help.\nIf you ever provided a more reasonable explanation, I'm very sorry but I must confess that I missed it.\n\nMaybe someone else understanding and liking your choice can help me understand, assuming this is preferred to a rebased version of #7115.\n\n> I'll add the commenting you suggest either way.\n\nThank you, hopefully I'm wrong about the \"counter-intuitive-ness\" of your choice and documentation is enough to avoid confusing people reading the code. \n",
      "created_at" : "2016-02-26T21:11:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-189484836",
      "id" : 189484836,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDE4OTQ4NDgzNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189484836/reactions"
      },
      "updated_at" : "2016-02-26T21:11:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189484836",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing.  I'd still really like a8261ae but it doesn't seem to be generally approved.\n",
      "created_at" : "2016-04-01T02:34:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7556#issuecomment-204219387",
      "id" : 204219387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7556",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDIwNDIxOTM4Nw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204219387/reactions"
      },
      "updated_at" : "2016-04-01T02:34:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204219387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "node_id" : "MDQ6VXNlcjQzNjAzNDk=",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
