[
   {
      "author_association" : "MEMBER",
      "body" : "I'm surprised that `-zapwallettxes` worked with multiwallet. Are you sure that you were running with multiple `-wallet` arguments when you started with `-zapwallettxes`? Are you able to share your debug.log?\r\n\r\nI agree that `zapwallettxes` should trigger a backup.\r\n\r\nLonger term, `zapwallettxes` should move to a separate bitcoin-wallet-tool utility. See #8745.",
      "created_at" : "2018-04-04T17:36:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-378683286",
      "id" : 378683286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-04T17:36:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378683286",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I was loading the wallets via bitcoin.conf rather than `-wallet`. The `-zapwallettxes` sanity checks appear to only look at command line args for conflicts and ignore conf file options.",
      "created_at" : "2018-04-16T21:17:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-381752768",
      "id" : 381752768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-16T21:17:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381752768",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/8334203?v=4",
         "events_url" : "https://api.github.com/users/bpay/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bpay/followers",
         "following_url" : "https://api.github.com/users/bpay/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bpay/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bpay",
         "id" : 8334203,
         "login" : "bpay",
         "organizations_url" : "https://api.github.com/users/bpay/orgs",
         "received_events_url" : "https://api.github.com/users/bpay/received_events",
         "repos_url" : "https://api.github.com/users/bpay/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bpay/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bpay/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bpay"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The -zapwallettxes sanity checks appear to only look at command line args\r\n\r\nI don't think that's it. All the `gArgs` functions work on the combined command line and conf file arguments.\r\n\r\nI've tried this myself (with the following config):\r\n\r\n```\r\ndaemon=1\r\ndebug=all\r\nserver=1\r\nregtest=1\r\n\r\n[regtest]\r\nwallet=w1\r\nwallet=w2\r\nzapwallettxes=1\r\n```\r\nand bitcoind refuses to start as expected:\r\n```\r\nError: -zapwallettxes is only allowed with a single wallet file\r\n```",
      "created_at" : "2018-04-16T21:49:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-381761439",
      "id" : 381761439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-16T21:49:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381761439",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Jup, that check was added in 9cbe8c80bad1b55557a91db65a06b66ec4743f18 and is thus in 0.15.0 and later.\r\n\r\nMarking \"good first issue\", since those are untested right now. Could add a test by modifying `./test/functional/wallet_multiwallet.py`",
      "created_at" : "2018-04-16T21:58:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-381763403",
      "id" : 381763403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-16T21:58:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381763403",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'm starting bitcoin with `bitcoin-qt -datadir=c:\\bitcoindata -zapwallettxes` and with config\r\n```\r\nwallet=wallet1.dat\r\nwallet=wallet2.dat\r\nprune=1\r\n```",
      "created_at" : "2018-04-16T22:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-381773295",
      "id" : 381773295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-16T22:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381773295",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/8334203?v=4",
         "events_url" : "https://api.github.com/users/bpay/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bpay/followers",
         "following_url" : "https://api.github.com/users/bpay/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bpay/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bpay",
         "id" : 8334203,
         "login" : "bpay",
         "organizations_url" : "https://api.github.com/users/bpay/orgs",
         "received_events_url" : "https://api.github.com/users/bpay/received_events",
         "repos_url" : "https://api.github.com/users/bpay/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bpay/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bpay/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bpay"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "[debug.log](https://github.com/bitcoin/bitcoin/files/1917576/debug.log)\r\n",
      "created_at" : "2018-04-16T22:47:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-381773933",
      "id" : 381773933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-16T22:51:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381773933",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/8334203?v=4",
         "events_url" : "https://api.github.com/users/bpay/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bpay/followers",
         "following_url" : "https://api.github.com/users/bpay/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bpay/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bpay",
         "id" : 8334203,
         "login" : "bpay",
         "organizations_url" : "https://api.github.com/users/bpay/orgs",
         "received_events_url" : "https://api.github.com/users/bpay/received_events",
         "repos_url" : "https://api.github.com/users/bpay/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bpay/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bpay/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bpay"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@bpay - thanks for reporting this and providing the debug.log trace. I've reproduced and PR'ed a fix at #13030.\r\n\r\nThe bug is that the `-zapwallettxes` multiwallet check works when providing `zapwallettxes=1` (which is always the case in .conf files), but not when providing `-zapwallettxes`.",
      "created_at" : "2018-04-19T15:22:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12505#issuecomment-382776952",
      "id" : 382776952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12505",
      "updated_at" : "2018-04-19T15:22:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382776952",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
