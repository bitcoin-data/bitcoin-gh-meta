[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nVery nice find @TheBlueMatt \r\n",
      "created_at" : "2018-08-26T19:55:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#issuecomment-416065899",
      "id" : 416065899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14073",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjA2NTg5OQ==",
      "updated_at" : "2018-08-26T19:55:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416065899",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 40a9c6c38c6aeaac83fe2639c9ac2d2b262296fc",
      "created_at" : "2018-08-27T08:50:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#issuecomment-416159867",
      "id" : 416159867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14073",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjE1OTg2Nw==",
      "updated_at" : "2018-08-27T08:50:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416159867",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213025877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213025877"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Now it looks like it adds size 0 entries to the filter, which is a violation of BIP158.\r\n\r\nI believe this should be \"script.size() < 1 ||\". No?",
      "commit_id" : "f05599557a8305d16bd5965921583af9d012fc27",
      "created_at" : "2018-08-27T15:57:38Z",
      "diff_hunk" : "@@ -208,7 +208,7 @@ static GCSFilter::ElementSet BasicFilterElements(const CBlock& block,\n     for (const CTransactionRef& tx : block.vtx) {\n         for (const CTxOut& txout : tx->vout) {\n             const CScript& script = txout.scriptPubKey;\n-            if (script[0] == OP_RETURN) continue;\n+            if (script.size() > 0 && script[0] == OP_RETURN) continue;\n             elements.emplace(script.begin(), script.end());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213025877",
      "id" : 213025877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMzAyNTg3Nw==",
      "original_commit_id" : "40a9c6c38c6aeaac83fe2639c9ac2d2b262296fc",
      "original_position" : 6,
      "path" : "src/blockfilter.cpp",
      "position" : null,
      "pull_request_review_id" : 149773457,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073",
      "updated_at" : "2018-08-28T19:13:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213025877",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213090719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213090719"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit to @gmaxwell comment, `script.empty() || ...`.",
      "commit_id" : "f05599557a8305d16bd5965921583af9d012fc27",
      "created_at" : "2018-08-27T19:41:28Z",
      "diff_hunk" : "@@ -208,7 +208,7 @@ static GCSFilter::ElementSet BasicFilterElements(const CBlock& block,\n     for (const CTransactionRef& tx : block.vtx) {\n         for (const CTxOut& txout : tx->vout) {\n             const CScript& script = txout.scriptPubKey;\n-            if (script[0] == OP_RETURN) continue;\n+            if (script.size() > 0 && script[0] == OP_RETURN) continue;\n             elements.emplace(script.begin(), script.end());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213090719",
      "id" : 213090719,
      "in_reply_to_id" : 213025877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMzA5MDcxOQ==",
      "original_commit_id" : "40a9c6c38c6aeaac83fe2639c9ac2d2b262296fc",
      "original_position" : 6,
      "path" : "src/blockfilter.cpp",
      "position" : null,
      "pull_request_review_id" : 149854375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073",
      "updated_at" : "2018-08-28T19:13:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213090719",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213093598"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213093598"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So this should be `excluded_scripts[2]`?\r\n\r\nnit, above in L62 add something along\r\n```cpp\r\n// This script is left empty.\r\n// excluded_scripts[2];\r\n```",
      "commit_id" : "f05599557a8305d16bd5965921583af9d012fc27",
      "created_at" : "2018-08-27T19:51:31Z",
      "diff_hunk" : "@@ -67,6 +67,7 @@ BOOST_AUTO_TEST_CASE(blockfilter_basic_test)\n     CMutableTransaction tx_2;\n     tx_2.vout.emplace_back(300, included_scripts[2]);\n     tx_2.vout.emplace_back(0, excluded_scripts[0]);\n+    tx_2.vout.emplace_back(600, included_scripts[5]); // Script is empty",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#discussion_r213093598",
      "id" : 213093598,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMzA5MzU5OA==",
      "original_commit_id" : "40a9c6c38c6aeaac83fe2639c9ac2d2b262296fc",
      "original_position" : 13,
      "path" : "src/test/blockfilter_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 149854375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14073",
      "updated_at" : "2018-08-28T19:13:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213093598",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK f055995.",
      "created_at" : "2018-08-28T23:14:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#issuecomment-416770465",
      "id" : 416770465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14073",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjc3MDQ2NQ==",
      "updated_at" : "2018-08-28T23:14:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416770465",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK",
      "created_at" : "2018-08-29T08:00:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#issuecomment-416862145",
      "id" : 416862145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14073",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjg2MjE0NQ==",
      "updated_at" : "2018-08-29T08:00:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416862145",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK f05599557a8305d16bd5965921583af9d012fc27",
      "created_at" : "2018-08-31T11:29:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14073#issuecomment-417636334",
      "id" : 417636334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14073",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNzYzNjMzNA==",
      "updated_at" : "2018-08-31T11:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417636334",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
