[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2018-11-01T19:34:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-435159631",
      "id" : 435159631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTE1OTYzMQ==",
      "updated_at" : "2019-06-10T09:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435159631",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK f151162",
      "created_at" : "2018-11-02T10:33:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-435337160",
      "id" : 435337160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTMzNzE2MA==",
      "updated_at" : "2018-11-02T10:33:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435337160",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/756391?v=4",
         "events_url" : "https://api.github.com/users/Gnappuraz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Gnappuraz/followers",
         "following_url" : "https://api.github.com/users/Gnappuraz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Gnappuraz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Gnappuraz",
         "id" : 756391,
         "login" : "Gnappuraz",
         "node_id" : "MDQ6VXNlcjc1NjM5MQ==",
         "organizations_url" : "https://api.github.com/users/Gnappuraz/orgs",
         "received_events_url" : "https://api.github.com/users/Gnappuraz/received_events",
         "repos_url" : "https://api.github.com/users/Gnappuraz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Gnappuraz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Gnappuraz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Gnappuraz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's not clear to me that moving further away from canonical encoding would be a good idea.",
      "created_at" : "2018-11-03T21:19:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-435621686",
      "id" : 435621686,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTYyMTY4Ng==",
      "updated_at" : "2018-11-03T21:19:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435621686",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK f151162\r\n\r\nI very much appreciate this change. In the end it does not change anything in bitcoin (height above 16 is serialized the same way), but it adheres to the specification in BIP34 which explicitly states:\r\n\r\n> The format of the height is \"serialized CScript\" -- first byte is number of bytes in the number (will be 0x03 on main net for the next 150 or so years with 223-1 blocks), following bytes are little-endian representation of the number (including a sign bit).\r\n\r\nThat clearly says the serialization is: `first byte is the number of bytes in the number`.\r\n\r\nIf I, say, wanted to start a testnet and start from scratch, and have a blockchain explorer for this which parses the height form the coinbase, then this would be one strange issue less I'd have to combat.",
      "created_at" : "2018-11-05T13:21:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-435871327",
      "id" : 435871327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTg3MTMyNw==",
      "updated_at" : "2018-11-05T13:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435871327",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/295504?v=4",
         "events_url" : "https://api.github.com/users/scravy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scravy/followers",
         "following_url" : "https://api.github.com/users/scravy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scravy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scravy",
         "id" : 295504,
         "login" : "scravy",
         "node_id" : "MDQ6VXNlcjI5NTUwNA==",
         "organizations_url" : "https://api.github.com/users/scravy/orgs",
         "received_events_url" : "https://api.github.com/users/scravy/received_events",
         "repos_url" : "https://api.github.com/users/scravy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scravy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scravy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scravy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It's not clear to me that moving further away from canonical encoding would be a good idea.\r\n\r\nThis has been in the implementation so long, and for bitcoin the implementation is the final 'spec'. Might be better to update the BIP at this point.",
      "created_at" : "2018-11-06T15:09:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-436285863",
      "id" : 436285863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjI4NTg2Mw==",
      "updated_at" : "2018-11-06T15:09:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436285863",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I tend to agree with @laanwj -- seems to me there is more benefit in updating the BIP (and/or adding a comment to the code, highlighting the issue) than in changing the behavior.",
      "created_at" : "2018-11-07T16:36:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-436688939",
      "id" : 436688939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjY4ODkzOQ==",
      "updated_at" : "2018-11-07T16:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436688939",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It doesn't change the behavior of the bitcoin as existing implementation also invokes `CScriptNum::serialize` for numbers larger than 16, I don't see how it can affect the network.\r\n\r\nThe good thing is that it allows testing BIP34 starting from the first block after the genesis. This can be convenient once it's decided to enable BIP34 from the height=1 in regtest. And it seems there is an intention of doing this as `create_coinbase(height, pubkey=None)` accepts the height and its value is correctly incremented in tests. Otherwise, we would need to pre-mine 16 blocks with BIP34 off in all functional tests. It looks like a weird workaround that can be avoided.\r\n\r\nHowever, I see it's a minor change, and there are ways to work around it if needed. Let me know if there is anything I can help here.",
      "created_at" : "2018-11-07T17:41:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-436712142",
      "id" : 436712142,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjcxMjE0Mg==",
      "updated_at" : "2018-11-07T17:41:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436712142",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/296795?v=4",
         "events_url" : "https://api.github.com/users/kostyantyn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kostyantyn/followers",
         "following_url" : "https://api.github.com/users/kostyantyn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kostyantyn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kostyantyn",
         "id" : 296795,
         "login" : "kostyantyn",
         "node_id" : "MDQ6VXNlcjI5Njc5NQ==",
         "organizations_url" : "https://api.github.com/users/kostyantyn/orgs",
         "received_events_url" : "https://api.github.com/users/kostyantyn/received_events",
         "repos_url" : "https://api.github.com/users/kostyantyn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kostyantyn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kostyantyn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kostyantyn"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj The implementation does not enforce BIP34 code for the affected blocks, so the \"code trumps the spec\" logic does not apply.\r\n\r\n* Eloipool implements this according to BIP34.\r\n* ckpool implements this according to BIP34.\r\n* libblkmaker implements this according to BIP34.\r\n* cgminer implements this according to BIP34.\r\n\r\nIn other words, the *only* violation of this is in a hypothetical (dead code) path in Bitcoin Core.\r\n\r\nAdditionally, using the \"canonical\" encoding would significantly complicate implementation.\r\n\r\nFor the reasons above, I think fixing this in Core is the correct solution. (Or at least documenting it as a known limitation tolerated because BIP34 isn't active at such heights.)\r\n\r\nutACK",
      "created_at" : "2018-12-20T05:07:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-448875711",
      "id" : 448875711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0ODg3NTcxMQ==",
      "updated_at" : "2018-12-20T05:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448875711",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> (Or at least documenting it as a known limitation tolerated because BIP34 isn't active at such heights.)\r\n\r\nI think documentation (in the form of a code comment) is exactly what is called for if we want to improve things, rather than a code change.  There is no benefit to users of our software from changing this consensus-critical code as proposed, but there is a higher review burden -- I think we should avoid making these kind of changes.",
      "created_at" : "2019-01-07T13:57:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-451942481",
      "id" : 451942481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTk0MjQ4MQ==",
      "updated_at" : "2019-01-07T13:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451942481",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this, the change is controversial and (at best) wouldn't make any difference, at worst it'd introduce a consensus bug. Pros/cons just don't weight up.\r\n\r\n> I think documentation (in the form of a code comment) is exactly what is called for if we want to improve things\r\n\r\nYes.",
      "created_at" : "2019-07-03T10:15:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14633#issuecomment-508033297",
      "id" : 508033297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14633",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwODAzMzI5Nw==",
      "updated_at" : "2019-07-03T10:15:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508033297",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
