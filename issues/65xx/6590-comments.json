[
   {
      "body" : "Grr, I forgot to mention here that this is only known to fix issues with running the Windows tests on Linux via Wine. This isn't a substitute for #6548 which aims to fix them when running natively.\r\n\r\nImo it'd be easier to make sure they work with Travis first, so we can ensure that any fixes for native Windows don't cause any regressions.",
      "created_at" : "2015-08-25T16:22:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134658174",
      "id" : 134658174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-25T16:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134658174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Cory,\n\nFrom you pull request I downloaded and built on native windows and can\nconfirm that those changes do \"not\" fix issue 6554\n\nhowever,\n\nI saw that the tests for windows, \"on linux\" did pass, so that was good.\n\nThe only request I have is that you try running that build with your\nchanges at least 2 more times.  The reason is that the issue, at least\nwith 6554, is only intermittent and happens roughly 30 to 50% of the time.\n\nOn 25/08/2015 9:23 AM, Cory Fields wrote:\n>\n> Grr, I forgot to mention here that this is only known to fix issues\n> with running the Windows tests on Linux via Wine. This isn't a\n> substitute for #6548 <https://github.com/bitcoin/bitcoin/pull/6548>\n> which aims to fix them when running natively.\n>\n> Imo it'd be easier to make sure they work with Travis first, so we can\n> ensure that any fixes for native Windows don't cause any regressions.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134658174>.\n>\n\n",
      "created_at" : "2015-08-25T17:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134679371",
      "id" : 134679371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-25T17:33:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134679371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "The issue that this fixes is 100% reproducible, it happens every time without the fix, and never with it. I'll admit that I'm puzzled as to why it doesn't happen on native Windows, though. Maybe it has to do with how quickly the processes are spun up.\r\n\r\nI think it's safe to say they're separate issues.",
      "created_at" : "2015-08-25T18:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134694249",
      "id" : 134694249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-25T18:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134694249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "That's great...when this fix get's merged I'll make the changes to the \"enable python scripts for windows\" without the travis.yml updates.",
      "created_at" : "2015-08-25T18:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134698976",
      "id" : 134698976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-25T18:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134698976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12862928?v=3",
         "events_url" : "https://api.github.com/users/ptschip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ptschip/followers",
         "following_url" : "https://api.github.com/users/ptschip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ptschip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ptschip",
         "id" : 12862928,
         "login" : "ptschip",
         "organizations_url" : "https://api.github.com/users/ptschip/orgs",
         "received_events_url" : "https://api.github.com/users/ptschip/received_events",
         "repos_url" : "https://api.github.com/users/ptschip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ptschip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ptschip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ptschip"
      }
   },
   {
      "body" : "IMHO this change wont hurt even when applied to native Windows. I'm going to integrate it into my local build and will run my 2 partially online nodes with it applied and see what happens ;). Perhaps there are other ifdef cases that apply settings/state for Linux but not Windows...",
      "created_at" : "2015-08-25T20:06:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134722332",
      "id" : 134722332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-25T20:06:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134722332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6590#discussion_r37963639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6590"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37963639"
         }
      },
      "body" : "Verified that this is the correct type: type of `SO_REUSEADDR`'s value is a `BOOL` according to MS' API docs, and `BOOL` is a typedef of `int`. `nOne` is an `int`.",
      "commit_id" : "bd30c3dced21fca869a14c75081f15195762afe1",
      "created_at" : "2015-08-26T09:44:34Z",
      "diff_hunk" : "@@ -1625,8 +1625,10 @@ bool BindListenPort(const CService &addrBind, string& strError, bool fWhiteliste\n     setsockopt(hListenSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&nOne, sizeof(int));\n #endif\n     // Allow binding if the port is still in TIME_WAIT state after\n-    // the program was closed and restarted. Not an issue on windows!\n+    // the program was closed and restarted.\n     setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (void*)&nOne, sizeof(int));\n+#else\n+    setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (const char*)&nOne, sizeof(int));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#discussion_r37963639",
      "id" : 37963639,
      "original_commit_id" : "bd30c3dced21fca869a14c75081f15195762afe1",
      "original_position" : 8,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6590",
      "updated_at" : "2015-08-26T09:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37963639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-08-26T09:59:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6590#issuecomment-134930758",
      "id" : 134930758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6590",
      "updated_at" : "2015-08-26T09:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134930758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
