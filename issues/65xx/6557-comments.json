[
   {
      "body" : "Concept ACK. It'll take me more time to go through the code.",
      "created_at" : "2015-08-17T16:13:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-131875983",
      "id" : 131875983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-08-17T16:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/131875983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "First #6201\r\nthen #6455 \r\nand now #6470 \r\nall closed out and leading here\r\n- will this one be closed also and lead to yet another one?  \r\nAt any rate, please recall [a resolution](https://github.com/bitcoin/bitcoin/pull/6201#issuecomment-122512074) from the original one (6201) which stated,\r\n\"Mempool limiting and dynamic fee determination are superior to a static parameter change\"\r\nThank you.",
      "created_at" : "2015-09-03T06:14:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-137346508",
      "id" : 137346508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-03T06:14:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137346508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "@ABISprotocol please be constructive and help reviewing/testing this pull instead of criticizing, this isn't helping.",
      "created_at" : "2015-09-03T15:59:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-137494770",
      "id" : 137494770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-03T15:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137494770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "As an alternative, https://github.com/TheBlueMatt/bitcoin/commit/88a3b8d52432f437a3d194748e446461f721cf9b is much, much simpler (based on the first two commits from here). It is mostly untested, but should work well and doesnt have any obviously exploitable flaws as far as I know. Decendant package tracking and limiting should also be limited on top of it, but I really dont think mempool limiting itself needs to be this complicated.",
      "created_at" : "2015-09-06T04:36:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-138040333",
      "id" : 138040333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-06T04:36:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138040333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I really prefer to merge something simple first and work on more complex solution later on top of those initial changes, utACK to @TheBlueMatt 's alternative. That seems a path that is less conflicting with other related changes like simplifying free transaction's management or making the min relay fee dynamic, than blocking all the other changes while the more complex solution is not fully ready for whatever reason. ",
      "created_at" : "2015-09-06T17:00:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-138100292",
      "id" : 138100292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-06T17:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138100292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "NACK on TheBlueMatt@88a3b8d. \r\n-Amount of work done trying to fine a transaction to evict is not reasonably bounded.\r\n-Relay fee can (and likely will) be effectively set very high when a high fee transaction happens to evict a high fee package.  This will render relay impossible for most normal transactions.\r\n\r\nI do however agree that mempool limiting doesn't have to be this complicated as long as we have the descendant package tracking/limiting first.",
      "created_at" : "2015-09-08T20:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-138691474",
      "id" : 138691474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-08T20:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138691474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Yea, turns out I was naive and didn't spend time to think about how sipa's removal code actually worked :/. I don't agree it's not trivial to appropriately limit it's runtime, but that's not so relevant since it doesn't with to begin with. In any case, my point was more that, yes, let's do descendant package tracking separately first, and then discuss how to do mempool limiting.\n\nOn September 8, 2015 1:34:39 PM PDT, Alex Morcos <notifications@github.com> wrote:\n>NACK on TheBlueMatt@88a3b8d. \n>-Amount of work done trying to fine a transaction to evict is not\n>reasonably bounded.\n>-Relay fee can (and likely will) be effectively set very high when a\n>high fee transaction happens to evict a high fee package.  This will\n>render relay impossible for most normal transactions.\n>\n>I do however agree that mempool limiting doesn't have to be this\n>complicated as long as we have the descendant package tracking/limiting\n>first.\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-138691474\n",
      "created_at" : "2015-09-08T21:38:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-138710746",
      "id" : 138710746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-08T21:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138710746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Why not this one also: https://github.com/sipa/bitcoin/commit/6498673f99da9976df170052648ff2f0026210d2",
      "created_at" : "2015-09-15T09:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-140336241",
      "id" : 140336241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-15T09:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140336241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "concept ACK, will review",
      "created_at" : "2015-09-16T07:08:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-140650700",
      "id" : 140650700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-16T07:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140650700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens TY",
      "created_at" : "2015-09-16T23:25:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-140924763",
      "id" : 140924763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-16T23:25:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140924763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "@sdaftuar should this be rebased on https://github.com/bitcoin/bitcoin/pull/6654?",
      "created_at" : "2015-09-19T03:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-141616133",
      "id" : 141616133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-19T03:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141616133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@morcos and I have reworked this pull, now that #6654 has been merged, to try to simplify the code.\r\n\r\nThe overall approach is as follows:\r\n* Limit the mempool to some hard cap (default: 500MB).\r\n* Set a \"soft cap\" equal to 1/2 the maximum.  Space above the soft cap is \"reserve\" space, which can be used for transactions that have some multiple of the relay fee.\r\n  * When a new tx arrives, if we're under the soft cap, let it in as usual.\r\n  * If we're above the soft cap, let it in if it can evict enough room for itself in the mempool, using eviction rules that are designed to prevent free relay attacks.\r\n  * If eviction fails, still let it in if the fee on the transaction exceeds the higher relay fee required to take up reserve space (the threshold increases exponentially as usage grows).\r\n* Periodically use transactions in the \"reserve\" space to trim the mempool, by aggregating them together as though they are one large transaction with one large fee (which is more likely to be able to evict transaction packages than individual small transactions could).\r\n\r\nThere's also a commit here which will expire old transactions (default: 1 week) from the mempool.\r\n\r\nStill to do:\r\n* Consider carefully how we want wallet transactions to interact with this behavior.  In the current version, wallet transactions (and transaction from a disconnected block) get to bypass the mempool limits.  It's not clear that this is being done the right way, and if the right thing happens when wallet transactions get evicted, etc.  Also, we reused the ```fLimitFree``` variable to accomplish this, which maybe should be renamed if we stick with this approach.",
      "created_at" : "2015-09-25T20:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143348700",
      "id" : 143348700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T20:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143348700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "There are a few basic things that we should probably unify across mempool limiting pulls - how wallet is handled (calling a transaction \"conflicted\" (or rewording that a bit) if it gets dropped from mempool because it has too little fee is probably not a bad thing, IMO, especially when the obvious alternative is a deanonymization attack).\nAlso, and I don't think this is a hard patch, we should probably all be handling orphans as blocks when considering fees, so that CPFP txn can be related as a block by sending them in reverse dependency order.\n\nOn September 25, 2015 1:43:14 PM PDT, Suhas Daftuar <notifications@github.com> wrote:\n>@morcos and I have reworked this pull, now that #6654 has been merged,\n>to try to simplify the code.\n>\n>The overall approach is as follows:\n>* Limit the mempool to some hard cap (default: 500MB).\n>* Set a \"soft cap\" equal to 1/2 the maximum.  Space above the soft cap\n>is \"reserve\" space, which can be used for transactions that have some\n>multiple of the relay fee.\n>* When a new tx arrives, if we're under the soft cap, let it in as\n>usual.\n>* If we're above the soft cap, let it in if it can evict enough room\n>for itself in the mempool, using eviction rules that are designed to\n>prevent free relay attacks.\n>* If eviction fails, still let it in if the fee on the transaction\n>exceeds the higher relay fee required to take up reserve space (the\n>threshold increases exponentially as usage grows).\n>* Periodically use transactions in the \"reserve\" space to trim the\n>mempool, by aggregating them together as though they are one large\n>transaction with one large fee (which is more likely to be able to\n>evict transaction packages than individual small transactions could).\n>\n>There's also a commit here which will expire old transactions (default:\n>1 week) from the mempool.\n>\n>Still to do:\n>* Consider carefully how we want wallet transactions to interact with\n>this behavior.  In the current version, wallet transactions (and\n>transaction from a disconnected block) get to bypass the mempool\n>limits.  It's not clear that this is being done the right way, and if\n>the right thing happens when wallet transactions get evicted, etc. \n>Also, we reused the ```fLimitFree``` variable to accomplish this, which\n>maybe should be renamed if we stick with this approach.\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143348700\n",
      "created_at" : "2015-09-25T22:25:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143367283",
      "id" : 143367283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T22:25:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143367283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I'm generally pleased to see where this has gone, however ~ these remarks intended for @sdaftuar and @morcos ~ I am interested in seeing the concerns inherent [in my remarks here](https://github.com/bitcoin/bitcoin/pull/6201#issuecomment-122438594) addressed as well as the [statement clarifying that \"mempool limiting and dynamic fee determination are superior to a static parameter change\"](https://github.com/bitcoin/bitcoin/pull/6201#issuecomment-122512074).  To this end I am curious if there will be incorporated a floating relay fee ~ e.g., @sipa's https://github.com/sipa/bitcoin/commit/6498673f99da9976df170052648ff2f0026210d2 ~ which was removed by @morcos from a prior iteration in the process of getting to this point.  Shouldn't this (or something like it) be reincorporated at this point, or am I misunderstanding / jumping the gun?",
      "created_at" : "2015-09-25T23:00:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143372030",
      "id" : 143372030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T23:00:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143372030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "@ABISprotocol This PR effectively results in a floating relay fee, by not accepting lower fee transactions anymore as the mempool grows fuller, but without explicitly changing the \"nMinRelayFee\" variable.\r\n",
      "created_at" : "2015-09-25T23:05:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143372608",
      "id" : 143372608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T23:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143372608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@ABISprotocol For the rest of your comments, the mailing list is probably better suited.",
      "created_at" : "2015-09-25T23:06:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143372733",
      "id" : 143372733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T23:06:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143372733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa TY",
      "created_at" : "2015-09-25T23:07:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143372838",
      "id" : 143372838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-25T23:07:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143372838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "@TheBlueMatt  Agreed, the right wallet behavior should likely be the same regardless of which mempool limiting approach we take.  I think this pull is now in good enough shape to try to digest, so that people who are interested can look at this, #6673, #6722, or any other suggestions that are proposed so that we we can pick an approach to focus on, which we can then try to refine.  \r\n\r\nI am definitely curious if people have ideas about whether it's problematic for a wallet's transactions to not make it into the mempool in the first place, or get evicted from the mempool?  Or if there are downsides to accepting one's own transactions into your mempool if you can only do so by bypassing the limiting logic?\r\n\r\nRegarding your CPFP comment, that seems like an interesting idea but I don't have a clear picture in my head of how that could actually be implemented.  Seems like the tx relay logic would need to be reworked (along with the logic for not re-requesting rejected transactions), and I'm not sure what the logic would be of how to figure out which combinations of transaction bundles to try (the naive algorithm seems like it's n^2 in the length of the chain?  maybe I'm missing something....).",
      "created_at" : "2015-09-26T01:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143388342",
      "id" : 143388342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-26T01:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143388342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Unfortunately this needs a bit more work, so please don't do extensive code review yet.  But in terms of strategy direction, still looking for input on this vs #6722 (and possibly vs #6673).\r\n\r\nUpcoming changes.  \r\n- When considering a new tx and the mempool is over the soft cap, use the minimum of its feerate and its ancestor package feerate for eviction code and the reserve space check.\r\n- Use exact counting of the surplus fees paid in the reserve space to be more effective at periodic evictions.\r\n",
      "created_at" : "2015-09-28T22:34:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143892896",
      "id" : 143892896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-28T22:34:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143892896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nKeep / focus on #6557.\n\nAlex Morcos:\n> Unfortunately this needs a bit more work, so please don't do\n> extensive code review yet.  But in terms of strategy direction,\n> still looking for input on this vs #6722 (and possibly vs #6673).\n> \n> Upcoming changes. - When considering a new tx and the mempool is\n> over the soft cap, use the minimum of its feerate and its ancestor\n> package feerate for eviction code and the reserve space check. -\n> Use exact counting of the surplus fees paid in the reserve space to\n> be more effective at periodic evictions.\n> \n> \n> --- Reply to this email directly or view it on GitHub: \n> https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143892896\n>\n> \n- -- \nhttp://abis.io ~\n\"a protocol concept to enable decentralization\nand expansion of a giving economy, and a new social good\"\nhttps://keybase.io/odinn\n-----BEGIN PGP SIGNATURE-----\n\niQEcBAEBCgAGBQJWCdqoAAoJEGxwq/inSG8CMOYH/3qihbcGRIWLdgvjTOBOWfhU\nm/zPV2GWTXwo73k4UcXXBfFPlFXtr7WzHs6BEGTbtS6WscuOemIuEPM/ev/fRtWF\nI9joIcNlSvYuRteJ+iCKL7uxV2R5ji6cT/kQMgiuB4hMR8ubQ9pJ+St0RTY1d7ZN\njkxFv4UIHFHZqUzKH9TC1NqVHw4gh+/Sp59aI3KcCoQk6zvFHAOWjbDexPwgrzPd\nxEZHJ6z5PsViExTh+Mz4z3vmCpANngNsstIX9geY/f/6FJP4QoGTSgUpIiHAlTHY\nOM0qj9IEhBYKWQjp+lWKr/zj/vbk74JPZU95L0Nt5v8bC2wGJPIMG/K2OmqJWbw=\n=cNWF\n-----END PGP SIGNATURE-----\n",
      "created_at" : "2015-09-29T00:26:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-143909984",
      "id" : 143909984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-29T00:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143909984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "Added two commits that address the points @morcos mentioned above.",
      "created_at" : "2015-09-30T14:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-144429245",
      "id" : 144429245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-30T14:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/144429245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I think this pull works and accomplishes the job.\r\nHowever #6722 seems to also achieve the same goals and may be a better solution due to its simpler design.  I'll leave this open for now, but will close if consensus appears to converge on #6722.",
      "created_at" : "2015-09-30T17:52:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-144489739",
      "id" : 144489739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-09-30T17:52:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/144489739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Closing in favor of #6722.",
      "created_at" : "2015-10-20T16:18:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6557#issuecomment-149620543",
      "id" : 149620543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6557",
      "updated_at" : "2015-10-20T16:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/149620543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
