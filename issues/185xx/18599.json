{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "\r\n**Is your feature request related to a problem? Please describe.**\r\nSome clients that use a bitcoin node might require full block data for blocks they have not retrieved yet. A common solution to this is to use manual pruning with the \"pruneblockchain\" RPC, making the client responsible for pruning blocks once they are no longer needed. However, this does not work when multiple clients are involved. For example, if we have both c-lightning and wasabi wallet syncing against the pruned node, c-lightning has the possibility of pruning blocks that wasabi wallet still needs.\r\n\r\n**Describe the solution you'd like**\r\nThe best solution I can imagine would be something like the `keepheight` RPC call proposed in #13943. Each client could register a blockheight that it needs to not be pruned, with some sort of client identifier. Then, as the client syncs, it can update it's `keepheight` value by passing along the new height along with its client identifier. The node will then only prune blocks below the minimum `keepheight`.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18599/comments",
   "created_at" : "2020-04-11T20:25:52Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18599/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/18599",
   "id" : 598344540,
   "labels" : [
      {
         "color" : "7cf575",
         "default" : false,
         "description" : null,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18599/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU1OTgzNDQ1NDA=",
   "number" : 18599,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Better manual pruning when multiple clients require unpruned history",
   "updated_at" : "2020-04-11T20:32:45Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18599",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/3732071?v=4",
      "events_url" : "https://api.github.com/users/dr-bonez/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dr-bonez/followers",
      "following_url" : "https://api.github.com/users/dr-bonez/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dr-bonez/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dr-bonez",
      "id" : 3732071,
      "login" : "dr-bonez",
      "node_id" : "MDQ6VXNlcjM3MzIwNzE=",
      "organizations_url" : "https://api.github.com/users/dr-bonez/orgs",
      "received_events_url" : "https://api.github.com/users/dr-bonez/received_events",
      "repos_url" : "https://api.github.com/users/dr-bonez/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dr-bonez/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dr-bonez/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dr-bonez"
   }
}
