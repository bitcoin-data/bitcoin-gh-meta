[
   {
      "author_association" : "MEMBER",
      "body" : "(intentionally left empty)\r\n\r\n<!---\r\n\r\ndiff --git a/tmp/getblockchaininfo.before b/tmp/getblockchaininfo.after\r\nindex 105067ae72..feda6acb22 100644\r\n--- a/tmp/getblockchaininfo.before\r\n+++ b/tmp/getblockchaininfo.after\r\n@@ -5,7 +5,7 @@\r\n   \"bestblockhash\": \"0000000057d420c4cc0108470cf834dcd995e4d78efbda46b683df27f6ee2974\",\r\n   \"difficulty\": 1,\r\n   \"mediantime\": 1590788299,\r\n-  \"verificationprogress\": 0.9995059441787998,\r\n+  \"verificationprogress\": 0.9995034411929307,\r\n   \"initialblockdownload\": true,\r\n   \"chainwork\": \"00000000000000000000000000000000000000000000015b6e40ba6cc8caf405\",\r\n   \"size_on_disk\": 27436174483,\r\n[marco@kscrwn btc_bitcoin_core]$ git diff --  /tmp/gettxoutsetinfo.{b,a}*\r\ndiff --git a/tmp/gettxoutsetinfo.before b/tmp/gettxoutsetinfo.after\r\nindex 1f3738c856..6b7b2c9dbe 100644\r\n--- a/tmp/gettxoutsetinfo.before\r\n+++ b/tmp/gettxoutsetinfo.after\r\n@@ -5,6 +5,6 @@\r\n   \"txouts\": 23926548,\r\n   \"bogosize\": 1794967757,\r\n   \"hash_serialized_2\": \"df4142cdb729b6d302b279e82f6e64563064fa2dcddd29e9b86bf3e4ed02810f\",\r\n-  \"disk_size\": 1312573410,\r\n+  \"disk_size\": 1306908070,\r\n   \"total_amount\": 20930150.29591721\r\n }\r\n",
      "created_at" : "2020-06-02T18:26:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-637725774",
      "id" : 637725774,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNzcyNTc3NA==",
      "updated_at" : "2020-06-02T18:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637725774",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nIn fa6e9b84ef25b266729dd03337ae00c0ab44e52a:\r\n> ActivateBestChain is only called in the \"msghand\" or one of the RPC\r\nthreads, neither of which is a boost::thread.\r\n\r\nIs this correct? ActivateBestChain() is also called by [`ThreadImport()`](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L693), both directly as well via `LoadExternalBlockFile`. `ThreadImport` is run in the `boost::thread_group`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/657b82cef0e8e8695fc189d013a4353bdbebb041/src/init.cpp#L1847-L1849\r\n\r\n> VerifyDB is only called in the main thread (\"init\") or one of the RPC\r\nthreads, neither of which is a boost::thread.\r\n\r\nChecked that the calls to CVerifyDB().VerifyDB() are in the `init` thread and `verifychain` RPC call.",
      "created_at" : "2020-06-03T08:32:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-638047447",
      "id" : 638047447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODA0NzQ0Nw==",
      "updated_at" : "2020-06-03T08:32:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638047447",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is this correct? ActivateBestChain() is also called by ThreadImport(), both directly as well via LoadExternalBlockFile. ThreadImport is run in the boost::thread_group:\r\n\r\nGood catch, you are correct. However, after #18786 (init: Remove boost from ThreadImport), it should be possible to simply switch `ThreadImport` to a std::thread. Also see that in line 2929 there is another non-boost breakpoint: `if (ShutdownRequested()) break;`.\r\n\r\nI will adjust the commit message accordingly.\r\n",
      "created_at" : "2020-06-03T09:53:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-638090759",
      "id" : 638090759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODA5MDc1OQ==",
      "updated_at" : "2020-06-03T09:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638090759",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Done. Force pushed a commit message change:\r\n\r\n```\r\n$ git range-diff bitcoin-core/master  faed13ea16 fa3b4f9b8e\r\n1:  fa6e9b84ef ! 1:  fa1d5800d9 validation: Remove unused boost interruption_point\r\n    @@ Metadata\r\n      ## Commit message ##\r\n         validation: Remove unused boost interruption_point\r\n     \r\n    -    ActivateBestChain is only called in the \"msghand\" or one of the RPC\r\n    -    threads, neither of which is a boost::thread.\r\n    +    ActivateBestChain (ABC) is only called in the \"msghand\" or one of the\r\n    +    RPC threads, neither of which is a boost::thread. However, ABC is also\r\n    +    called in ThreadImport (which currently happens to be a boost::thread).\r\n    +    In all cases, the interruption_point is redundant with the breakpoint in\r\n    +    ABC that triggers when ShutdownRequested()\r\n     \r\n         VerifyDB is only called in the main thread (\"init\") or one of the RPC\r\n         threads, neither of which is a boost::thread.\r\n2:  faed13ea16 = 2:  fa3b4f9b8e validation: Make VerifyDB level 4 interruptible\r\n",
      "created_at" : "2020-06-03T10:07:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-638097892",
      "id" : 638097892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODA5Nzg5Mg==",
      "updated_at" : "2020-06-03T10:07:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638097892",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18731 (refactor: Make CCheckQueue RAII-styled by hebasto)\n* #18710 (Add local thread pool to CCheckQueue by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-04T12:28:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-638816576",
      "id" : 638816576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODgxNjU3Ng==",
      "updated_at" : "2020-06-04T12:28:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638816576",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK fa3b4f9b8e54ec07aeb2e5e2333da3e784f7be12\r\nThank you for cleaning up more boost interruption point usage.",
      "created_at" : "2020-06-04T12:48:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19142#issuecomment-638826100",
      "id" : 638826100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODgyNjEwMA==",
      "updated_at" : "2020-06-04T12:48:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638826100",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
