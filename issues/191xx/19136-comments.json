[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19651 (wallet: importdescriptors update existing by S3RK)\n* #19602 (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-02T01:19:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-637211318",
      "id" : 637211318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNzIxMTMxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T18:39:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637211318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do we need a whole new RPC for this? Why not expand `getaddressinfo`?",
      "created_at" : "2020-06-08T11:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-640541064",
      "id" : 640541064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDU0MTA2NA==",
      "updated_at" : "2020-06-08T11:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640541064",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Agree with Sjors, unless you have plans to somehow build upon this later, I think it might as well just be added to getaddressinfo",
      "created_at" : "2020-07-11T11:39:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-657050785",
      "id" : 657050785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzA1MDc4NQ==",
      "updated_at" : "2020-07-11T11:39:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657050785",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Changed this to be a new field `parent_desc` in `getaddressinfo`. Also rebased.",
      "created_at" : "2020-07-21T22:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-662141773",
      "id" : 662141773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MjE0MTc3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-21T22:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662141773",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480073542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480073542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure I fully understand this part. From what I figured here you're handling a case when we wrap another `OriginPubkeyProvider`. If so, I have a few questions:\r\n\r\n1) What do we even expect to happen in such case? I can't think of realistic scenario\r\n2) Why handle it here if we don't handle it in other methods, like `ToPrivateString` or `ToString()`\r\n3) Why do you think the origin from wrapped provider is exactly `10` chars long? Even if so, than there is a closing bracket missing\r\n\r\nHope my questions make at least some sense\r\n\r\n\r\n",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T11:41:00Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480073542",
      "id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA3MzU0Mg==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478542521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480073542",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. This has a silent merge conflict with either #19373 or #19660: `script/descriptor.cpp:455:34: error: no matching function for call to 'HexStr'`",
      "created_at" : "2020-08-31T12:41:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-683753659",
      "id" : 683753659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Mzc1MzY1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-31T12:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683753659",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480135676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480135676"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```cpp\r\nif (priv) return ToPrivateString(arg, ret);\r\nret = ToString();\r\nreturn true;\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T13:36:33Z",
      "diff_hunk" : "@@ -243,6 +258,15 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         ret = EncodeSecret(key);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        if (priv) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480135676",
      "id" : 480135676,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDEzNTY3Ng==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 263,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478622105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480135676",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480232822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480232822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The goal of `ToNormalizedString` is to create a descriptor that can be imported into another wallet. A descriptor might not be able to be imported because hardened derivation is in use. So for `BIP32PubkeyProvider::ToNormalizedString`, we are deriving the key at the last hardened step and returning that key. As we did additional derivation not present in the original descriptor, we are generating new origin info that needs to be combined with any existing origin info.\r\n\r\n1. We don't actually wrap another `OriginPubkeyProvider`. Rather we might be wrapping a `BIP32PubkeyProvider` where it's `ToNormalizedString` might return us a string containing origin info as it did additional derivation.\r\n2. `ToPrivateString` and `ToString` return the descriptor as-is, no additional derivation is done. Thus there is no need to handle this \"origin within the origin provider.\"\r\n3. This is to cut off the first 10 characters because we don't need them. Specifically, that's the `[` followed by 8 characters for the fingerprint, followed by the first `/`. Actually, there might be an off-by-one here as I think we need that `/`.\r\n\r\nEdit: Fixed the off by one.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T16:07:20Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480232822",
      "id" : 480232822,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIzMjgyMg==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478747328,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480232822",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480266150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480266150"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T17:05:36Z",
      "diff_hunk" : "@@ -243,6 +258,15 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         ret = EncodeSecret(key);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        if (priv) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480266150",
      "id" : 480266150,
      "in_reply_to_id" : 480135676,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI2NjE1MA==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 263,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478788706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480266150",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept ACK. This has a silent merge conflict with either #19373 or #19660: `script/descriptor.cpp:455:34: error: no matching function for call to 'HexStr'`\r\n\r\nRebased and fixed.",
      "created_at" : "2020-08-31T17:12:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-683911531",
      "id" : 683911531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MzkxMTUzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-31T17:12:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683911531",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482705678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482705678"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I created and verified a test case to cover this part of code and which would have exposed the bug as well.\r\nFeel free to add it.\r\n\r\n```cpp\r\nCheck(\r\n\"pkh([01234567/10/20]xprv9s21ZrQH143K31xYSDQpPDxsXRTUcvj2iNHm5NUtrGiGG5e2DtALGdso3pGz6ssrdK4PFmM8NSpSBHNqPqm55Qn3LqFtT2emdEXVYsCzC2U/2147483647'/0)\",\r\n\"pkh([01234567/10/20]xpub661MyMwAqRbcFW31YEwpkMuc5THy2PSt5bDMsktWQcFF8syAmRUapSCGu8ED9W6oDMSgv6Zz8idoc4a6mr8BDzTJY47LJhkJ8UB7WEGuduB/2147483647'/0)\",\r\n\"pkh([01234567/10/20/2147483647']xprv9vHkqa6XAPwKqSKSEJMcAB3yoCZhaSVsGZbSkFY5L3Lfjjk8sjZucbsbvEw5o3QrSA69nPfZDCgFnNnLhQ2ohpZuwummndnPasDw2Qr6dC2/0)\",\r\n\"pkh([01234567/10/20/2147483647']xpub69H7F5dQzmVd3vPuLKtcXJziMEQByuDidnX3YdwgtNsecY5HRGtAAQC5mXTt4dsv9RzyjgDjAQs9VGVV6ydYCHnprc9vvaA5YtqWyL6hyds/0)\",\r\nHARDENED,\r\n{{\"76a914ebdc90806a9c4356c1c88e42216611e1cb4c1c1788ac\"}},\r\nOutputType::LEGACY,\r\n{{10,20,0xFFFFFFFFUL,0}}\r\n);\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-09-03T05:02:58Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482705678",
      "id" : 482705678,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcwNTY3OA==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 481494014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482705678",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482710563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482710563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added this test.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-09-03T05:21:04Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482710563",
      "id" : 482710563,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcxMDU2Mw==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 481499860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482710563",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@S3RK I originally attempted an approach like that but was not able to make it work well. The problem is largely in the same place that the problem with this PR is: nested origin pubkey providers. In both this PR and your proposal, you will still have some weirdness to handle when the bip32 pubkey provider returns an origin pubkey provider, but this itself is already within an origin pubkey provider.",
      "created_at" : "2020-09-14T16:46:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692178992",
      "id" : 692178992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjE3ODk5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-14T16:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692178992",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@achow101 I understand that it's an intrinsic part of the logic here. However my point is that we need to strive to make that weird part as easy to understand as possible. And this is why I believe working with objects/structs is better. When you work with `KeyOriginInfo` you don't need to rely on a magic number to strip the info from a string. Even bigger issue is not even the constant itself, but tight coupling of unrelated parts of the codebase âÂ `BIP32PubkeyProvider` and `OriginPubkeyProvider` are now invisibly tied together by the convention of formatting origin info as a string.\r\n\r\nThe other benefits hold up as well: single responsibility and less cyclomatic complexity for functions, self-documented code.",
      "created_at" : "2020-09-15T08:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692550435",
      "id" : 692550435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjU1MDQzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T08:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692550435",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@S3RK If you think you have a better solution, feel free to open a PR with it. I can close this one in favor of that if it does look better.",
      "created_at" : "2020-09-15T15:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692809717",
      "id" : 692809717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjgwOTcxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T15:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692809717",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @S3RK If you think you have a better solution, feel free to open a PR with it. I can close this one in favor of that if it does look better.\r\n\r\nFor history. I tried to implement [alternative version](https://github.com/bitcoin/bitcoin/compare/master...S3RK:normalized_descriptor), and indeed it also has its own problems. Both with nested origin/bip32 providers and also with private key management for intermediate xpub. And the diff is bigger ð",
      "created_at" : "2020-10-01T10:21:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-702039234",
      "id" : 702039234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjAzOTIzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T10:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702039234",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502285179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502285179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: `fail` -> `fails`\r\n\r\nCould document the arguments.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T08:54:03Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502285179",
      "id" : 502285179,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4NTE3OQ==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 96,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502285179",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502286158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502286158"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`provier` -> `provider`",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T08:55:40Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */\n+    virtual bool ToNormalizedString(const SigningProvider& provier, std::string& out, bool priv) const = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502286158",
      "id" : 502286158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4NjE1OA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 97,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502286158",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502305915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502305915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034 : I'm confused about what's going on here. I assume related to this comment:\r\n> you will still have some weirdness to handle when the bip32 pubkey provider returns an origin pubkey provider, but this itself is already within an origin pubkey provider.\r\n\r\nMaybe explain the \"weirdness\" in a comment, and add a comment to the relevant test vector.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T09:30:22Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502305915",
      "id" : 502305915,
      "line" : 225,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMwNTkxNQ==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 225,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 21,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502305915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412344"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412344"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:04:28Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412344",
      "id" : 502412344,
      "in_reply_to_id" : 502285179,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjM0NA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 96,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505652247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412344",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:04:34Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */\n+    virtual bool ToNormalizedString(const SigningProvider& provier, std::string& out, bool priv) const = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412398",
      "id" : 502412398,
      "in_reply_to_id" : 502286158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjM5OA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 97,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505652336,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412398",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a comment.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:05:02Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412664",
      "id" : 502412664,
      "in_reply_to_id" : 502305915,
      "line" : 225,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjY2NA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 225,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 21,
      "pull_request_review_id" : 505652677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-09T13:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412664",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T15:11:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-706238797",
      "id" : 706238797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjIzODc5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-09T15:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706238797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK de6b389\r\n",
      "created_at" : "2021-02-09T08:36:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-775765969",
      "id" : 775765969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTc2NTk2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-09T08:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775765969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> à¹à¸à¸´à¹à¸¡`parent_desc`à¸à¸´à¸¥à¸à¹à¹à¸à¸¢à¸±à¸`getaddressinfo`RPC à¹à¸à¸·à¹à¸­à¹à¸­à¹à¸à¸à¹à¸à¸­à¸£à¹à¸à¸à¸±à¸§à¸à¸­à¸à¸ªà¸à¸²à¸à¸°à¸ªà¸²à¸à¸²à¸£à¸à¸° à¹à¸¡à¸·à¹à¸­à¹à¸à¹à¸à¸µà¹à¸­à¸¢à¸¹à¹à¸à¸µà¹à¸£à¸°à¸à¸¸`getaddressinfo`à¸à¸°à¸à¹à¸à¸«à¸²à¸à¸¶à¹à¸`DescriptorScriptPubKeyMan`à¸ªà¸²à¸¡à¸²à¸£à¸à¹à¸à¹à¸ªà¸£à¹à¸²à¸à¸à¸µà¹à¸­à¸¢à¸¹à¹à¸à¸±à¹à¸à¹à¸à¹ à¸à¸²à¸à¸à¸±à¹à¸à¸à¸°à¸ªà¹à¸à¸à¸·à¸ descriptor à¸ªà¸³à¸«à¸£à¸±à¸à¸ªà¸´à¹à¸à¸à¸±à¹à¸`DescriptorScriptPubKeyMan`à¹à¸`parent_desc`à¸à¸´à¸¥à¸à¹ descriptor à¸à¸°à¸­à¸¢à¸¹à¹à¹à¸à¸£à¸¹à¸à¹à¸à¸à¸à¸µà¹à¹à¸à¹à¸à¸¡à¸²à¸à¸£à¸à¸²à¸à¹à¸à¸¢à¸à¸µà¹ xpub à¹à¸à¸à¸±à¹à¸à¸à¸­à¸à¸à¸²à¸£à¸à¸¸à¸à¹à¸à¹à¸à¸ªà¸¸à¸à¸à¹à¸²à¸¢à¹à¸à¹à¸£à¸±à¸à¸¡à¸²à¹à¸à¸·à¹à¸­à¹à¸«à¹à¸ªà¸²à¸¡à¸²à¸£à¸à¸à¸³à¹à¸à¹à¸² descriptor à¹à¸à¸¢à¸±à¸à¸à¸£à¸°à¹à¸à¹à¸²à¹à¸à¸´à¸à¸­à¸·à¹à¸ à¹ à¹à¸à¹ à¸¡à¸µà¸à¸²à¸£à¹à¸à¸´à¹à¸¡à¸à¸²à¸£à¸à¸à¸ªà¸­à¸à¹à¸à¸·à¹à¸­à¸à¸£à¸§à¸à¸ªà¸­à¸à¸§à¹à¸²à¸¡à¸µà¸à¸²à¸£à¸ªà¹à¸à¸à¸·à¸à¸à¸±à¸§à¸à¸­à¸à¸à¸µà¹à¸à¸¹à¸à¸à¹à¸­à¸à¸ªà¸³à¸«à¸£à¸±à¸à¸à¸µà¹à¸­à¸¢à¸¹à¹à¸à¸­à¸à¸à¸£à¸°à¹à¸à¹à¸²à¹à¸à¸´à¸à¹à¸¥à¸°à¸à¸±à¸§à¸à¹à¸à¸à¸µà¹à¹à¸«à¸¥à¹à¸²à¸à¸µà¹à¸ªà¸²à¸¡à¸²à¸£à¸à¸à¸³à¹à¸à¹à¸²à¹à¸¥à¸°à¹à¸à¹à¹à¸à¸à¸£à¸°à¹à¸à¹à¸²à¹à¸à¸´à¸à¸­à¸·à¹à¸ à¹ à¹à¸à¹\r\n> \r\n> à¹à¸à¸à¸²à¸à¸°à¸à¸µà¹à¹à¸à¹à¸à¸ªà¹à¸§à¸à¸«à¸à¸¶à¹à¸à¸à¸­à¸ PR à¸à¸µà¹`ToNormalizedString`à¸à¸±à¸à¸à¹à¸à¸±à¸à¸à¸°à¸à¸¹à¸à¹à¸à¸´à¹à¸¡à¸¥à¸à¹à¸à¸à¸¥à¸²à¸ª descriptor à¸ªà¸´à¹à¸à¸à¸µà¹à¸¡à¸µà¸à¸¥à¹à¸à¸à¸²à¸°à¸à¸±à¸`BIP32PubkeyProvider`s à¸à¸µà¹à¸¡à¸µà¸à¸±à¹à¸à¸à¸­à¸à¸à¸²à¸£à¸à¸³à¹à¸«à¹à¹à¸à¹à¸à¸à¸¶à¹à¸à¹à¸à¹à¸²à¸à¸±à¹à¸ à¸¡à¸µà¸à¸²à¸£à¹à¸à¸´à¹à¸¡à¸à¸²à¸£à¸à¸à¸ªà¸­à¸à¹à¸à¸·à¹à¸­à¸à¸£à¸§à¸à¸ªà¸­à¸à¸§à¹à¸²à¸¡à¸µà¸à¸²à¸£à¸ªà¹à¸à¸à¸·à¸à¸à¸±à¸§à¸à¸­à¸à¸ªà¸à¸²à¸à¸°à¸à¸à¸à¸´\r\n\r\n",
      "created_at" : "2021-03-15T17:45:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-799617328",
      "id" : 799617328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5OTYxNzMyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-15T17:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799617328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/77863173?v=4",
         "events_url" : "https://api.github.com/users/Priroch1979/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Priroch1979/followers",
         "following_url" : "https://api.github.com/users/Priroch1979/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Priroch1979/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Priroch1979",
         "id" : 77863173,
         "login" : "Priroch1979",
         "node_id" : "MDQ6VXNlcjc3ODYzMTcz",
         "organizations_url" : "https://api.github.com/users/Priroch1979/orgs",
         "received_events_url" : "https://api.github.com/users/Priroch1979/received_events",
         "repos_url" : "https://api.github.com/users/Priroch1979/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Priroch1979/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Priroch1979/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Priroch1979"
      }
   }
]
