[
   {
      "author_association" : "MEMBER",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19651 (wallet: importdescriptors update existing by S3RK)\n* #19602 (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-02T01:19:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-637211318",
      "id" : 637211318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNzIxMTMxOA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637211318/reactions"
      },
      "updated_at" : "2020-12-03T18:39:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637211318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do we need a whole new RPC for this? Why not expand `getaddressinfo`?",
      "created_at" : "2020-06-08T11:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-640541064",
      "id" : 640541064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDU0MTA2NA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640541064/reactions"
      },
      "updated_at" : "2020-06-08T11:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640541064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree with Sjors, unless you have plans to somehow build upon this later, I think it might as well just be added to getaddressinfo",
      "created_at" : "2020-07-11T11:39:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-657050785",
      "id" : 657050785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzA1MDc4NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657050785/reactions"
      },
      "updated_at" : "2020-07-11T11:39:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657050785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Changed this to be a new field `parent_desc` in `getaddressinfo`. Also rebased.",
      "created_at" : "2020-07-21T22:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-662141773",
      "id" : 662141773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MjE0MTc3Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662141773/reactions"
      },
      "updated_at" : "2020-07-21T22:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662141773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480073542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480073542"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure I fully understand this part. From what I figured here you're handling a case when we wrap another `OriginPubkeyProvider`. If so, I have a few questions:\r\n\r\n1) What do we even expect to happen in such case? I can't think of realistic scenario\r\n2) Why handle it here if we don't handle it in other methods, like `ToPrivateString` or `ToString()`\r\n3) Why do you think the origin from wrapped provider is exactly `10` chars long? Even if so, than there is a closing bracket missing\r\n\r\nHope my questions make at least some sense\r\n\r\n\r\n",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T11:41:00Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480073542",
      "id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA3MzU0Mg==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478542521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480073542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480073542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. This has a silent merge conflict with either #19373 or #19660: `script/descriptor.cpp:455:34: error: no matching function for call to 'HexStr'`",
      "created_at" : "2020-08-31T12:41:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-683753659",
      "id" : 683753659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Mzc1MzY1OQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683753659/reactions"
      },
      "updated_at" : "2020-08-31T12:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683753659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480135676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480135676"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```cpp\r\nif (priv) return ToPrivateString(arg, ret);\r\nret = ToString();\r\nreturn true;\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T13:36:33Z",
      "diff_hunk" : "@@ -243,6 +258,15 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         ret = EncodeSecret(key);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        if (priv) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480135676",
      "id" : 480135676,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDEzNTY3Ng==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 263,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478622105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480135676/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480135676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480232822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480232822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The goal of `ToNormalizedString` is to create a descriptor that can be imported into another wallet. A descriptor might not be able to be imported because hardened derivation is in use. So for `BIP32PubkeyProvider::ToNormalizedString`, we are deriving the key at the last hardened step and returning that key. As we did additional derivation not present in the original descriptor, we are generating new origin info that needs to be combined with any existing origin info.\r\n\r\n1. We don't actually wrap another `OriginPubkeyProvider`. Rather we might be wrapping a `BIP32PubkeyProvider` where it's `ToNormalizedString` might return us a string containing origin info as it did additional derivation.\r\n2. `ToPrivateString` and `ToString` return the descriptor as-is, no additional derivation is done. Thus there is no need to handle this \"origin within the origin provider.\"\r\n3. This is to cut off the first 10 characters because we don't need them. Specifically, that's the `[` followed by 8 characters for the fingerprint, followed by the first `/`. Actually, there might be an off-by-one here as I think we need that `/`.\r\n\r\nEdit: Fixed the off by one.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T16:07:20Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480232822",
      "id" : 480232822,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIzMjgyMg==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478747328,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480232822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480232822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480266150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480266150"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-08-31T17:05:36Z",
      "diff_hunk" : "@@ -243,6 +258,15 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         ret = EncodeSecret(key);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        if (priv) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r480266150",
      "id" : 480266150,
      "in_reply_to_id" : 480135676,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI2NjE1MA==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 263,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 478788706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480266150/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/480266150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept ACK. This has a silent merge conflict with either #19373 or #19660: `script/descriptor.cpp:455:34: error: no matching function for call to 'HexStr'`\r\n\r\nRebased and fixed.",
      "created_at" : "2020-08-31T17:12:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-683911531",
      "id" : 683911531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MzkxMTUzMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683911531/reactions"
      },
      "updated_at" : "2020-08-31T17:12:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/683911531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482705678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482705678"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I created and verified a test case to cover this part of code and which would have exposed the bug as well.\r\nFeel free to add it.\r\n\r\n```cpp\r\nCheck(\r\n\"pkh([01234567/10/20]xprv9s21ZrQH143K31xYSDQpPDxsXRTUcvj2iNHm5NUtrGiGG5e2DtALGdso3pGz6ssrdK4PFmM8NSpSBHNqPqm55Qn3LqFtT2emdEXVYsCzC2U/2147483647'/0)\",\r\n\"pkh([01234567/10/20]xpub661MyMwAqRbcFW31YEwpkMuc5THy2PSt5bDMsktWQcFF8syAmRUapSCGu8ED9W6oDMSgv6Zz8idoc4a6mr8BDzTJY47LJhkJ8UB7WEGuduB/2147483647'/0)\",\r\n\"pkh([01234567/10/20/2147483647']xprv9vHkqa6XAPwKqSKSEJMcAB3yoCZhaSVsGZbSkFY5L3Lfjjk8sjZucbsbvEw5o3QrSA69nPfZDCgFnNnLhQ2ohpZuwummndnPasDw2Qr6dC2/0)\",\r\n\"pkh([01234567/10/20/2147483647']xpub69H7F5dQzmVd3vPuLKtcXJziMEQByuDidnX3YdwgtNsecY5HRGtAAQC5mXTt4dsv9RzyjgDjAQs9VGVV6ydYCHnprc9vvaA5YtqWyL6hyds/0)\",\r\nHARDENED,\r\n{{\"76a914ebdc90806a9c4356c1c88e42216611e1cb4c1c1788ac\"}},\r\nOutputType::LEGACY,\r\n{{10,20,0xFFFFFFFFUL,0}}\r\n);\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-09-03T05:02:58Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482705678",
      "id" : 482705678,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcwNTY3OA==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 481494014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482705678/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482705678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482710563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482710563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added this test.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-09-03T05:21:04Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {\n+            sub = sub.substr(10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r482710563",
      "id" : 482710563,
      "in_reply_to_id" : 480073542,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcxMDU2Mw==",
      "original_commit_id" : "fc2f2a008f4680f56b5c05fd8786cc4a252c823b",
      "original_line" : 223,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 481499860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482710563/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482710563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@S3RK I originally attempted an approach like that but was not able to make it work well. The problem is largely in the same place that the problem with this PR is: nested origin pubkey providers. In both this PR and your proposal, you will still have some weirdness to handle when the bip32 pubkey provider returns an origin pubkey provider, but this itself is already within an origin pubkey provider.",
      "created_at" : "2020-09-14T16:46:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692178992",
      "id" : 692178992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjE3ODk5Mg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692178992/reactions"
      },
      "updated_at" : "2020-09-14T16:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692178992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 I understand that it's an intrinsic part of the logic here. However my point is that we need to strive to make that weird part as easy to understand as possible. And this is why I believe working with objects/structs is better. When you work with `KeyOriginInfo` you don't need to rely on a magic number to strip the info from a string. Even bigger issue is not even the constant itself, but tight coupling of unrelated parts of the codebase âÂ `BIP32PubkeyProvider` and `OriginPubkeyProvider` are now invisibly tied together by the convention of formatting origin info as a string.\r\n\r\nThe other benefits hold up as well: single responsibility and less cyclomatic complexity for functions, self-documented code.",
      "created_at" : "2020-09-15T08:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692550435",
      "id" : 692550435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjU1MDQzNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692550435/reactions"
      },
      "updated_at" : "2020-09-15T08:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692550435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@S3RK If you think you have a better solution, feel free to open a PR with it. I can close this one in favor of that if it does look better.",
      "created_at" : "2020-09-15T15:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-692809717",
      "id" : 692809717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjgwOTcxNw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692809717/reactions"
      },
      "updated_at" : "2020-09-15T15:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692809717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @S3RK If you think you have a better solution, feel free to open a PR with it. I can close this one in favor of that if it does look better.\r\n\r\nFor history. I tried to implement [alternative version](https://github.com/bitcoin/bitcoin/compare/master...S3RK:normalized_descriptor), and indeed it also has its own problems. Both with nested origin/bip32 providers and also with private key management for intermediate xpub. And the diff is bigger ð",
      "created_at" : "2020-10-01T10:21:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-702039234",
      "id" : 702039234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjAzOTIzNA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702039234/reactions"
      },
      "updated_at" : "2020-10-01T10:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702039234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502285179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502285179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: `fail` -> `fails`\r\n\r\nCould document the arguments.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T08:54:03Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502285179",
      "id" : 502285179,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4NTE3OQ==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 96,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502285179/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502285179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502286158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502286158"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`provier` -> `provider`",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T08:55:40Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */\n+    virtual bool ToNormalizedString(const SigningProvider& provier, std::string& out, bool priv) const = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502286158",
      "id" : 502286158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4NjE1OA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 97,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502286158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502286158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502305915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502305915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034 : I'm confused about what's going on here. I assume related to this comment:\r\n> you will still have some weirdness to handle when the bip32 pubkey provider returns an origin pubkey provider, but this itself is already within an origin pubkey provider.\r\n\r\nMaybe explain the \"weirdness\" in a comment, and add a comment to the relevant test vector.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T09:30:22Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502305915",
      "id" : 502305915,
      "line" : 225,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMwNTkxNQ==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 225,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 21,
      "pull_request_review_id" : 505484804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502305915/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502305915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412344"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412344"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:04:28Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412344",
      "id" : 502412344,
      "in_reply_to_id" : 502285179,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjM0NA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 96,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505652247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412344/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:04:34Z",
      "diff_hunk" : "@@ -93,6 +93,9 @@ struct Descriptor {\n     /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n     virtual bool ToPrivateString(const SigningProvider& provider, std::string& out) const = 0;\n \n+    /** Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fail if the provided provider does not have the private keys to derive that xpub. */\n+    virtual bool ToNormalizedString(const SigningProvider& provier, std::string& out, bool priv) const = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412398",
      "id" : 502412398,
      "in_reply_to_id" : 502286158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjM5OA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 97,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/descriptor.h",
      "position" : null,
      "pull_request_review_id" : 505652336,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a comment.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T13:05:02Z",
      "diff_hunk" : "@@ -212,6 +215,18 @@ class OriginPubkeyProvider final : public PubkeyProvider\n         ret = \"[\" + OriginString() + \"]\" + std::move(sub);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override\n+    {\n+        std::string sub;\n+        if (!m_provider->ToNormalizedString(arg, sub, priv)) return false;\n+        if (sub[0] == '[') {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r502412664",
      "id" : 502412664,
      "in_reply_to_id" : 502305915,
      "line" : 225,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMjY2NA==",
      "original_commit_id" : "6f5d66d2abfe241df9f27bf2b1e62e6604918034",
      "original_line" : 225,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 21,
      "pull_request_review_id" : 505652677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412664/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-10-09T13:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/502412664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-10-09T15:11:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-706238797",
      "id" : 706238797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjIzODc5Nw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706238797/reactions"
      },
      "updated_at" : "2020-10-09T15:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706238797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550611741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550611741"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9be1437c named cast per https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines.html#Res-casts-named\r\n``` suggestion\r\n        int i = static_cast<int>(m_path.size()) - 1;\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:08:34Z",
      "diff_hunk" : "@@ -386,6 +410,56 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n         }\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& out, bool priv) const override\n+    {\n+        // For hardened derivation type, just return the typical string, nothing to normalize\n+        if (m_derive == DeriveType::HARDENED) {\n+            if (priv) return ToPrivateString(arg, out);\n+            out = ToString();\n+            return true;\n+        }\n+        // Step backwards to find the last hardened step in the path\n+        int i = (int)m_path.size() - 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550611741",
      "id" : 550611741,
      "line" : 422,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYxMTc0MQ==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 422,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 58,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550611741/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550611741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550613468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550613468"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9be1437c49f986e8ed964d5f863b4bbcec340751\r\n```suggestion\r\n        const std::string origin_str = HexStr(origin.fingerprint) + FormatHDKeypath(origin.path);\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:10:55Z",
      "diff_hunk" : "@@ -386,6 +410,56 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n         }\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& out, bool priv) const override\n+    {\n+        // For hardened derivation type, just return the typical string, nothing to normalize\n+        if (m_derive == DeriveType::HARDENED) {\n+            if (priv) return ToPrivateString(arg, out);\n+            out = ToString();\n+            return true;\n+        }\n+        // Step backwards to find the last hardened step in the path\n+        int i = (int)m_path.size() - 1;\n+        for (; i >= 0; --i) {\n+            if (m_path.at(i) >> 31) {\n+                break;\n+            }\n+        }\n+        // Either no derivation or all unhardened derivation\n+        if (i == -1) {\n+            if (priv) return ToPrivateString(arg, out);\n+            out = ToString();\n+            return true;\n+        }\n+        // Derive the xpub at the last hardened step\n+        CExtKey xprv;\n+        if (!GetExtKey(arg, xprv)) return false;\n+        KeyOriginInfo origin;\n+        int k = 0;\n+        for (; k <= i; ++k) {\n+            // Derive\n+            xprv.Derive(xprv, m_path.at(k));\n+            // Add to the path\n+            origin.path.push_back(m_path.at(k));\n+            // First derivation element, get the fingerprint for origin\n+            if (k == 0) {\n+                std::copy(xprv.vchFingerprint, xprv.vchFingerprint + 4, origin.fingerprint);\n+            }\n+        }\n+        // Build the remaining path\n+        KeyPath end_path;\n+        for (; k < (int)m_path.size(); ++k) {\n+            end_path.push_back(m_path.at(k));\n+        }\n+        // Build the string\n+        std::string origin_str = HexStr(origin.fingerprint) + FormatHDKeypath(origin.path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550613468",
      "id" : 550613468,
      "line" : 455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYxMzQ2OA==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 455,
      "original_position" : 91,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 91,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550613468/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550613468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550615435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550615435"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9be1437c49f986e8ed964d5f863b4bbcec340751 here and L218, maybe name the arg `out` rather than `ret` like the header file declaration and the other definitions\r\n```suggestion\r\n    bool ToNormalizedString(const SigningProvider& arg, std::string& out, bool priv) const override\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:13:30Z",
      "diff_hunk" : "@@ -243,6 +261,12 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         ret = EncodeSecret(key);\n         return true;\n     }\n+    bool ToNormalizedString(const SigningProvider& arg, std::string& ret, bool priv) const override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550615435",
      "id" : 550615435,
      "line" : 264,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYxNTQzNQ==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 264,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 36,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550615435/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T19:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550615435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550616623"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550616623"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e4ac869\r\n\r\n- missing period like the neighboring sentences and maybe add a comma\r\n```suggestion\r\n                        {RPCResult::Type::STR, \"parent_desc\", /* optional */ true, \"The descriptor used to derive this address, if this is a descriptor wallet.\"},\r\n```\r\n\r\n- not sure, but maybe change from:\r\n\r\n  \"The descriptor used to derive this address, if this is a descriptor wallet.\"\r\n\r\n  to\r\n\r\n  \"The descriptor used to derive this address, if generated by a descriptor wallet.\"",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:14:59Z",
      "diff_hunk" : "@@ -3663,6 +3663,7 @@ UniValue getaddressinfo(const JSONRPCRequest& request)\n                         {RPCResult::Type::BOOL, \"iswatchonly\", \"If the address is watchonly.\"},\n                         {RPCResult::Type::BOOL, \"solvable\", \"If we know how to spend coins sent to this address, ignoring the possible lack of private keys.\"},\n                         {RPCResult::Type::STR, \"desc\", /* optional */ true, \"A descriptor for spending coins sent to this address (only when solvable).\"},\n+                        {RPCResult::Type::STR, \"parent_desc\", /* optional */ true, \"The descriptor used to derive this address if this is a descriptor wallet\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550616623",
      "id" : 550616623,
      "line" : 3666,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYxNjYyMw==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 3666,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550616623/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550616623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550626144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550626144"
         }
      },
      "author_association" : "MEMBER",
      "body" : "de6b389 nit, if iterator is not used in the for-loop block\r\n```suggestion\r\n            for _ in range(0, 10):\r\n```",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:27:32Z",
      "diff_hunk" : "@@ -140,5 +140,62 @@ def run_test(self):\n         nopriv_rpc = self.nodes[0].get_wallet_rpc('desc_no_priv')\n         assert_raises_rpc_error(-4, 'This wallet has no available keys', nopriv_rpc.getnewaddress)\n \n+        self.log.info(\"Test descriptor exports\")\n+        self.nodes[0].createwallet(wallet_name='desc_export', descriptors=True)\n+        exp_rpc = self.nodes[0].get_wallet_rpc('desc_export')\n+        self.nodes[0].createwallet(wallet_name='desc_import', disable_private_keys=True, descriptors=True)\n+        imp_rpc = self.nodes[0].get_wallet_rpc('desc_import')\n+\n+        addr_types = [('legacy', False, 'pkh(', '44\\'/1\\'/0\\'', -13),\n+                      ('p2sh-segwit', False, 'sh(wpkh(', '49\\'/1\\'/0\\'', -14),\n+                      ('bech32', False, 'wpkh(', '84\\'/1\\'/0\\'', -13),\n+                      ('legacy', True, 'pkh(', '44\\'/1\\'/0\\'', -13),\n+                      ('p2sh-segwit', True, 'sh(wpkh(', '49\\'/1\\'/0\\'', -14),\n+                      ('bech32', True, 'wpkh(', '84\\'/1\\'/0\\'', -13)]\n+\n+        for addr_type, internal, desc_prefix, deriv_path, int_idx in addr_types:\n+            int_str = 'internal' if internal else 'external'\n+\n+            self.log.info(\"Testing descriptor address type for {} {}\".format(addr_type, int_str))\n+            if internal:\n+                addr = exp_rpc.getrawchangeaddress(address_type=addr_type)\n+            else:\n+                addr = exp_rpc.getnewaddress(address_type=addr_type)\n+            desc = exp_rpc.getaddressinfo(addr)['parent_desc']\n+            assert_equal(desc_prefix, desc[0:len(desc_prefix)])\n+            idx = desc.index('/') + 1\n+            assert_equal(deriv_path, desc[idx:idx + 9])\n+            if internal:\n+                assert_equal('1', desc[int_idx])\n+            else:\n+                assert_equal('0', desc[int_idx])\n+\n+            self.log.info(\"Testing the same descriptor is returned for address type {} {}\".format(addr_type, int_str))\n+            for i in range(0, 10):\n+                if internal:\n+                    addr = exp_rpc.getrawchangeaddress(address_type=addr_type)\n+                else:\n+                    addr = exp_rpc.getnewaddress(address_type=addr_type)\n+                test_desc = exp_rpc.getaddressinfo(addr)['parent_desc']\n+                assert_equal(desc, test_desc)\n+\n+            self.log.info(\"Testing import of exported {} descriptor\".format(addr_type))\n+            imp_rpc.importdescriptors([{\n+                'desc': desc,\n+                'active': True,\n+                'next_index': 11,\n+                'timestamp': 'now',\n+                'internal': internal\n+            }])\n+\n+            for i in range(0, 10):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550626144",
      "id" : 550626144,
      "line" : 191,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYyNjE0NA==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 191,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "test/functional/wallet_descriptor.py",
      "position" : 52,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550626144/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550626144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550628152"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550628152"
         }
      },
      "author_association" : "MEMBER",
      "body" : "de6b389 nit, the `if internal...else...assert_equal` logic is repeated 4 times, maybe extract to a helper",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2020-12-31T18:30:24Z",
      "diff_hunk" : "@@ -140,5 +140,62 @@ def run_test(self):\n         nopriv_rpc = self.nodes[0].get_wallet_rpc('desc_no_priv')\n         assert_raises_rpc_error(-4, 'This wallet has no available keys', nopriv_rpc.getnewaddress)\n \n+        self.log.info(\"Test descriptor exports\")\n+        self.nodes[0].createwallet(wallet_name='desc_export', descriptors=True)\n+        exp_rpc = self.nodes[0].get_wallet_rpc('desc_export')\n+        self.nodes[0].createwallet(wallet_name='desc_import', disable_private_keys=True, descriptors=True)\n+        imp_rpc = self.nodes[0].get_wallet_rpc('desc_import')\n+\n+        addr_types = [('legacy', False, 'pkh(', '44\\'/1\\'/0\\'', -13),\n+                      ('p2sh-segwit', False, 'sh(wpkh(', '49\\'/1\\'/0\\'', -14),\n+                      ('bech32', False, 'wpkh(', '84\\'/1\\'/0\\'', -13),\n+                      ('legacy', True, 'pkh(', '44\\'/1\\'/0\\'', -13),\n+                      ('p2sh-segwit', True, 'sh(wpkh(', '49\\'/1\\'/0\\'', -14),\n+                      ('bech32', True, 'wpkh(', '84\\'/1\\'/0\\'', -13)]\n+\n+        for addr_type, internal, desc_prefix, deriv_path, int_idx in addr_types:\n+            int_str = 'internal' if internal else 'external'\n+\n+            self.log.info(\"Testing descriptor address type for {} {}\".format(addr_type, int_str))\n+            if internal:\n+                addr = exp_rpc.getrawchangeaddress(address_type=addr_type)\n+            else:\n+                addr = exp_rpc.getnewaddress(address_type=addr_type)\n+            desc = exp_rpc.getaddressinfo(addr)['parent_desc']\n+            assert_equal(desc_prefix, desc[0:len(desc_prefix)])\n+            idx = desc.index('/') + 1\n+            assert_equal(deriv_path, desc[idx:idx + 9])\n+            if internal:\n+                assert_equal('1', desc[int_idx])\n+            else:\n+                assert_equal('0', desc[int_idx])\n+\n+            self.log.info(\"Testing the same descriptor is returned for address type {} {}\".format(addr_type, int_str))\n+            for i in range(0, 10):\n+                if internal:\n+                    addr = exp_rpc.getrawchangeaddress(address_type=addr_type)\n+                else:\n+                    addr = exp_rpc.getnewaddress(address_type=addr_type)\n+                test_desc = exp_rpc.getaddressinfo(addr)['parent_desc']\n+                assert_equal(desc, test_desc)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r550628152",
      "id" : 550628152,
      "line" : 180,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDYyODE1Mg==",
      "original_commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "original_line" : 180,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/wallet_descriptor.py",
      "position" : 41,
      "pull_request_review_id" : 560528552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550628152/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-12-31T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550628152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r568216501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568216501"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in e4ac869a0a0083e2e3af3b56301bd5c8e0cf650b:\r\n\r\nBelow, on line 3742, there is another call to `GetScriptPubKeyMan()`. Maybe move that one up here to save one.",
      "commit_id" : "de6b389d5db7b8426313c5be6fbd290f992c5aa8",
      "created_at" : "2021-02-01T23:34:38Z",
      "diff_hunk" : "@@ -3732,6 +3733,14 @@ UniValue getaddressinfo(const JSONRPCRequest& request)\n        ret.pushKV(\"desc\", InferDescriptor(scriptPubKey, *provider)->ToString());\n     }\n \n+    DescriptorScriptPubKeyMan* desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(pwallet->GetScriptPubKeyMan(scriptPubKey));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#discussion_r568216501",
      "id" : 568216501,
      "line" : 3736,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODIxNjUwMQ==",
      "original_commit_id" : "e4ac869a0a0083e2e3af3b56301bd5c8e0cf650b",
      "original_line" : 3736,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 580863388,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19136",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568216501/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2021-02-07T17:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568216501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK de6b389\r\n",
      "created_at" : "2021-02-09T08:36:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19136#issuecomment-775765969",
      "id" : 775765969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19136",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTc2NTk2OQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775765969/reactions"
      },
      "updated_at" : "2021-02-09T08:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775765969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   }
]
