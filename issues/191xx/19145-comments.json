[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19806 (validation: UTXO snapshot activation by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-03T01:22:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-637898492",
      "id" : 637898492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNzg5ODQ5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-05T02:49:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637898492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added another more extensive test, now ready for review.",
      "created_at" : "2020-06-04T13:32:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-638849647",
      "id" : 638849647,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODg0OTY0Nw==",
      "updated_at" : "2020-06-04T13:32:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638849647",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. In the followup PR that adds a MuHash index, the RPC documentation should point out that this index can be used to dramatically speed up the RPC call when used with `muhash`. And that `muhash` and `none` will be more responsive than the default (or just change the default, and note that as a breaking change to anyone who uses the legacy hash).",
      "created_at" : "2020-06-09T12:55:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-641272589",
      "id" : 641272589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTI3MjU4OQ==",
      "updated_at" : "2020-06-09T12:58:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641272589",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I would like to hear your thoughts on 2109165e3b61d26a0496d5a1efd1c635a7f6a76a. I had it only in the test at first but put it into the framework because I think it could be useful for other tests as well and since it's just a method it does not affect the use of `P2PDataStore` in other tests. But the data it returns on each UTXO is kind of specific to my test.",
      "created_at" : "2020-06-11T23:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-642974787",
      "id" : 642974787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0Mjk3NDc4Nw==",
      "updated_at" : "2020-06-11T23:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/642974787",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems fine to put it wherever you want, as long as reviewers are happy. I guess the decision mostly depends on whether this will be used by other tests.",
      "created_at" : "2020-06-11T23:22:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-642978673",
      "id" : 642978673,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0Mjk3ODY3Mw==",
      "updated_at" : "2020-06-11T23:22:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/642978673",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-06-24T21:38:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-649086956",
      "id" : 649086956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0OTA4Njk1Ng==",
      "updated_at" : "2020-06-24T21:38:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/649086956",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "rebased",
      "created_at" : "2020-06-29T19:21:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-651310798",
      "id" : 651310798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTMxMDc5OA==",
      "updated_at" : "2020-06-29T19:21:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651310798",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed a merge issue and pulled in latest changes from dependency PRs.",
      "created_at" : "2020-06-30T14:26:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-651827590",
      "id" : 651827590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MTgyNzU5MA==",
      "updated_at" : "2020-06-30T14:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/651827590",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Removed some code dublication",
      "created_at" : "2020-07-05T11:46:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-653878504",
      "id" : 653878504,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1Mzg3ODUwNA==",
      "updated_at" : "2020-07-05T11:46:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/653878504",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-06T13:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-654227890",
      "id" : 654227890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDIyNzg5MA==",
      "updated_at" : "2020-07-06T13:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654227890",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and made small style fix in rpc/util.cpp.",
      "created_at" : "2020-07-06T14:00:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-654257382",
      "id" : 654257382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDI1NzM4Mg==",
      "updated_at" : "2020-07-06T14:00:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654257382",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-07-30T14:29:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-666400276",
      "id" : 666400276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NjQwMDI3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-30T14:29:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666400276",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-26T09:02:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-680755003",
      "id" : 680755003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDc1NTAwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-26T09:02:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680755003",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased after #19105 was merged.",
      "created_at" : "2020-09-02T11:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-685674442",
      "id" : 685674442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTY3NDQ0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T11:39:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685674442",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529577405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529577405"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should be alphabetical order?",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2020-11-24T14:16:29Z",
      "diff_hunk" : "@@ -397,6 +397,8 @@ crypto_libbitcoin_crypto_base_a_SOURCES = \\\n   crypto/hmac_sha512.h \\\n   crypto/poly1305.h \\\n   crypto/poly1305.cpp \\\n+  crypto/muhash.h \\\n+  crypto/muhash.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529577405",
      "id" : 529577405,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU3NzQwNQ==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 421,
      "original_position" : 5,
      "original_start_line" : 400,
      "path" : "src/Makefile.am",
      "position" : null,
      "pull_request_review_id" : 537533528,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529577405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529760469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529760469"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Isn't this sort of a roundabout way to setup what seems to be the actual test, at lines 74-87? I'm not seeing why `conn = node.add_p2p_connection(P2PDataStore())` is necessary for what's being tested here, and if the method added in this PR `def estimate_utxo_set(self):` is needed.\r\n\r\nWould something like this do what you need:\r\n```python\r\ncoinbase_blocks = list(map(lambda block: node.getblock(block), node.generate(100)))\r\nspending = next(filter(lambda block: block[\"confirmations\"] == 100, coinbase_blocks))\r\ncoinbase_blocks.remove(spending)\r\n\r\ntx = node.gettransaction(spending[\"tx\"][0])\r\nvtx = FromHex(CTransaction(), tx[\"hex\"])\r\nvtx.rehash()\r\ntx1 = create_tx_with_script(vtx, 0, script_sig=b'\\x51', amount=25 * COIN)\r\ntx2 = create_tx_with_script(tx1, 0, script_sig=b'\\x51', amount=25 * COIN)\r\n\r\ntx1id = node.sendrawtransaction(hexstring=tx1.serialize().hex(), maxfeerate=0)['hex']\r\ntx2id = node.sendrawtransaction(hexstring=tx2.serialize().hex(), maxfeerate=0)['hex']\r\nnode.generateblock(output=node.getnewaddress(), transactions=[tx1id, tx2id])\r\n```\r\n and then you form `utxo_set` here from `coinbase_blocks`, and `tx`, `tx1`, `tx2` to calculate the MuHash of the set",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2020-11-24T17:40:22Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Based on the UTXO set of a P2P connection serialize and calculate a hash\n+for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import (\n+    create_block,\n+    create_coinbase,\n+    create_tx_with_script,\n+)\n+from test_framework.messages import (\n+    COIN,\n+)\n+from test_framework.p2p import P2PDataStore\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import hashlib\n+import struct\n+\n+class UTXOSetHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        conn = node.add_p2p_connection(P2PDataStore())\n+\n+        # Get tip information (Genesis) to build the next block.\n+        best_block_hash = node.getbestblockhash()\n+        tip = int(best_block_hash, 16)\n+        best_block = node.getblock(best_block_hash)\n+        height = best_block[\"height\"] + 1\n+        block_time = best_block[\"time\"] + 1\n+\n+        # Generate 100 blocks so the first coinbase is matured. We have to do\n+        # it in a way that conn knows about them so we use\n+        # send_blocks_and_test.\n+        for i in range(100):\n+            # Coinbases are anyone can spend.\n+            block = create_block(tip, create_coinbase(height), block_time)\n+            block.solve()\n+            conn.send_blocks_and_test([block], node, success=True)\n+\n+            tip = block.sha256\n+            best_block = block\n+            height += 1\n+            block_time += 1\n+\n+            # Save first block because we want to spend its coinbase.\n+            if i == 0:\n+                block1 = block",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529760469",
      "id" : 529760469,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDQ2OQ==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 59,
      "original_position" : 59,
      "original_start_line" : 34,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 537533528,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529760469",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529803891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529803891"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would this test be a little better if instead of forming the utxo set at the end, you maintained a running sum and added as blocks were mined, and then added/subtracted when UTXOs were spent and created in `tx1`, `tx2`?",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2020-11-24T18:50:27Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Based on the UTXO set of a P2P connection serialize and calculate a hash\n+for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import (\n+    create_block,\n+    create_coinbase,\n+    create_tx_with_script,\n+)\n+from test_framework.messages import (\n+    COIN,\n+)\n+from test_framework.p2p import P2PDataStore\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import hashlib\n+import struct\n+\n+class UTXOSetHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        conn = node.add_p2p_connection(P2PDataStore())\n+\n+        # Get tip information (Genesis) to build the next block.\n+        best_block_hash = node.getbestblockhash()\n+        tip = int(best_block_hash, 16)\n+        best_block = node.getblock(best_block_hash)\n+        height = best_block[\"height\"] + 1\n+        block_time = best_block[\"time\"] + 1\n+\n+        # Generate 100 blocks so the first coinbase is matured. We have to do\n+        # it in a way that conn knows about them so we use\n+        # send_blocks_and_test.\n+        for i in range(100):\n+            # Coinbases are anyone can spend.\n+            block = create_block(tip, create_coinbase(height), block_time)\n+            block.solve()\n+            conn.send_blocks_and_test([block], node, success=True)\n+\n+            tip = block.sha256\n+            best_block = block\n+            height += 1\n+            block_time += 1\n+\n+            # Save first block because we want to spend its coinbase.\n+            if i == 0:\n+                block1 = block\n+\n+        # Generate another block with one tx spending a coinbase and another\n+        # spending that tx's output.\n+        tx1 = create_tx_with_script(block1.vtx[0], 0, script_sig=b'\\x51', amount=25 * COIN)\n+        tx2 = create_tx_with_script(tx1, 0, script_sig=b'\\x51', amount=25 * COIN)\n+\n+        block2 = create_block(tip, create_coinbase(height), block_time)\n+        block2.vtx.extend([tx1, tx2])\n+        block2.hashMerkleRoot = block2.calc_merkle_root()\n+        block2.rehash()\n+        block2.solve()\n+\n+        conn.send_blocks_and_test([block2], node, success=True)\n+\n+        # Calculate the MuHash of the UTXO set estimate\n+        muhash = MuHash3072()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r529803891",
      "id" : 529803891,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgwMzg5MQ==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 54,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : 54,
      "pull_request_review_id" : 537810550,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/529803891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-07T17:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-756252659",
      "id" : 756252659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NjI1MjY1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-07T17:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/756252659",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556966308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556966308"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry, this was part of a previous PR that this one is based on, so I don't want to touch this anymore.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-14T00:30:08Z",
      "diff_hunk" : "@@ -397,6 +397,8 @@ crypto_libbitcoin_crypto_base_a_SOURCES = \\\n   crypto/hmac_sha512.h \\\n   crypto/poly1305.h \\\n   crypto/poly1305.cpp \\\n+  crypto/muhash.h \\\n+  crypto/muhash.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556966308",
      "id" : 556966308,
      "in_reply_to_id" : 529577405,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2NjMwOA==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 421,
      "original_position" : 5,
      "original_start_line" : 400,
      "path" : "src/Makefile.am",
      "position" : null,
      "pull_request_review_id" : 567765856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556966308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556967317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556967317"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It was and I did it because I thought there was a good chance that this code could be used for other tests as well and it also made some things a bit easier. But overall of course it adds complexity and I am lacking a specific example where it would be used so I have removed the P2P based implementation and simplified it in a similar way as you imagined, I think. Please check it out.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-14T00:33:19Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Based on the UTXO set of a P2P connection serialize and calculate a hash\n+for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import (\n+    create_block,\n+    create_coinbase,\n+    create_tx_with_script,\n+)\n+from test_framework.messages import (\n+    COIN,\n+)\n+from test_framework.p2p import P2PDataStore\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import hashlib\n+import struct\n+\n+class UTXOSetHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        conn = node.add_p2p_connection(P2PDataStore())\n+\n+        # Get tip information (Genesis) to build the next block.\n+        best_block_hash = node.getbestblockhash()\n+        tip = int(best_block_hash, 16)\n+        best_block = node.getblock(best_block_hash)\n+        height = best_block[\"height\"] + 1\n+        block_time = best_block[\"time\"] + 1\n+\n+        # Generate 100 blocks so the first coinbase is matured. We have to do\n+        # it in a way that conn knows about them so we use\n+        # send_blocks_and_test.\n+        for i in range(100):\n+            # Coinbases are anyone can spend.\n+            block = create_block(tip, create_coinbase(height), block_time)\n+            block.solve()\n+            conn.send_blocks_and_test([block], node, success=True)\n+\n+            tip = block.sha256\n+            best_block = block\n+            height += 1\n+            block_time += 1\n+\n+            # Save first block because we want to spend its coinbase.\n+            if i == 0:\n+                block1 = block",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556967317",
      "id" : 556967317,
      "in_reply_to_id" : 529760469,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2NzMxNw==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 59,
      "original_position" : 59,
      "original_start_line" : 34,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 567767058,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556967317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556968008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556968008"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think so because we need to somehow keep track of what is really in the UTXO set and I think this would make test harder to follow if I did it this way. And I feel like this is more of the standard way of how we structure our tests.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-14T00:35:36Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Based on the UTXO set of a P2P connection serialize and calculate a hash\n+for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import (\n+    create_block,\n+    create_coinbase,\n+    create_tx_with_script,\n+)\n+from test_framework.messages import (\n+    COIN,\n+)\n+from test_framework.p2p import P2PDataStore\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import hashlib\n+import struct\n+\n+class UTXOSetHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        conn = node.add_p2p_connection(P2PDataStore())\n+\n+        # Get tip information (Genesis) to build the next block.\n+        best_block_hash = node.getbestblockhash()\n+        tip = int(best_block_hash, 16)\n+        best_block = node.getblock(best_block_hash)\n+        height = best_block[\"height\"] + 1\n+        block_time = best_block[\"time\"] + 1\n+\n+        # Generate 100 blocks so the first coinbase is matured. We have to do\n+        # it in a way that conn knows about them so we use\n+        # send_blocks_and_test.\n+        for i in range(100):\n+            # Coinbases are anyone can spend.\n+            block = create_block(tip, create_coinbase(height), block_time)\n+            block.solve()\n+            conn.send_blocks_and_test([block], node, success=True)\n+\n+            tip = block.sha256\n+            best_block = block\n+            height += 1\n+            block_time += 1\n+\n+            # Save first block because we want to spend its coinbase.\n+            if i == 0:\n+                block1 = block\n+\n+        # Generate another block with one tx spending a coinbase and another\n+        # spending that tx's output.\n+        tx1 = create_tx_with_script(block1.vtx[0], 0, script_sig=b'\\x51', amount=25 * COIN)\n+        tx2 = create_tx_with_script(tx1, 0, script_sig=b'\\x51', amount=25 * COIN)\n+\n+        block2 = create_block(tip, create_coinbase(height), block_time)\n+        block2.vtx.extend([tx1, tx2])\n+        block2.hashMerkleRoot = block2.calc_merkle_root()\n+        block2.rehash()\n+        block2.solve()\n+\n+        conn.send_blocks_and_test([block2], node, success=True)\n+\n+        # Calculate the MuHash of the UTXO set estimate\n+        muhash = MuHash3072()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r556968008",
      "id" : 556968008,
      "in_reply_to_id" : 529803891,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2ODAwOA==",
      "original_commit_id" : "9a06f21e6b80711e6afe0eb445b07843ab691c86",
      "original_line" : 54,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : 54,
      "pull_request_review_id" : 567767877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556968008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and addressed feedback by @mjdietzx . Thanks for reviewing and sorry for the long wait, I was focussing on #19055 which is now merged and which makes this one my high prio. I also added a small refactor commit to improve encapsulation between `MuHash3072` and `Num3072`.",
      "created_at" : "2021-01-14T00:38:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-759847750",
      "id" : 759847750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1OTg0Nzc1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-14T00:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/759847750",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r557075154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557075154"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `CCoinsStats& stats`",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-14T06:48:03Z",
      "diff_hunk" : "@@ -24,31 +25,47 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r557075154",
      "id" : 557075154,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA3NTE1NA==",
      "original_commit_id" : "62e0f39510324731753e0dcfe5cef177a9681b56",
      "original_line" : 28,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 567889155,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557075154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/551068?v=4",
         "events_url" : "https://api.github.com/users/FelixWeis/events{/privacy}",
         "followers_url" : "https://api.github.com/users/FelixWeis/followers",
         "following_url" : "https://api.github.com/users/FelixWeis/following{/other_user}",
         "gists_url" : "https://api.github.com/users/FelixWeis/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/FelixWeis",
         "id" : 551068,
         "login" : "FelixWeis",
         "node_id" : "MDQ6VXNlcjU1MTA2OA==",
         "organizations_url" : "https://api.github.com/users/FelixWeis/orgs",
         "received_events_url" : "https://api.github.com/users/FelixWeis/received_events",
         "repos_url" : "https://api.github.com/users/FelixWeis/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/FelixWeis/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/FelixWeis/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/FelixWeis"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r557765138"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557765138"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-14T23:27:12Z",
      "diff_hunk" : "@@ -24,31 +25,47 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r557765138",
      "id" : 557765138,
      "in_reply_to_id" : 557075154,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Nzc2NTEzOA==",
      "original_commit_id" : "62e0f39510324731753e0dcfe5cef177a9681b56",
      "original_line" : 28,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 568709005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557765138",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> There is a deterministic regtest blockchain for the test `rpc_getblockstats.py` which could (additionally) test the finalized hash against constants, especially in the future when one tests for correct rolling behaviour between blocks.\r\n\r\nThanks, that's a good point but I think this will be even more interesting when we get to the actual index when the RPC can give hashes for specific heights so I think I will leave this for one of the follow-ups of this one.",
      "created_at" : "2021-01-14T23:29:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-760543243",
      "id" : 760543243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDU0MzI0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-14T23:29:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760543243",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed Feedback by @FelixWeis and fixed the functional test for the no-wallet case.",
      "created_at" : "2021-01-14T23:30:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-760543610",
      "id" : 760543610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MDU0MzYxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-14T23:30:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760543610",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562219674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562219674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit \" refactor: Improve encapsulation between MuHash3072 and Num3072\"\r\n\r\nI recommend against passing C-style arrays, as despite its notation, it's not passing an array but a pointer. For example, this works with no warning: https://godbolt.org/z/YrMvfE\r\n\r\nAn alternative is using a C++ reference-to-array:\r\n\r\n```c++\r\n Num3072::Num3072(const unsigned char (&data)[BYTE_SIZE]) { \r\n```\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-21T21:49:18Z",
      "diff_hunk" : "@@ -276,18 +275,33 @@ void Num3072::Divide(const Num3072& a)\n     if (this->IsOverflow()) this->FullReduce();\n }\n \n-Num3072 MuHash3072::ToNum3072(Span<const unsigned char> in) {\n-    Num3072 out{};\n-    uint256 hashed_in = (CHashWriter(SER_DISK, 0) << in).GetSHA256();\n-    unsigned char tmp[BYTE_SIZE];\n-    ChaCha20(hashed_in.data(), hashed_in.size()).Keystream(tmp, BYTE_SIZE);\n+Num3072::Num3072(const unsigned char data[BYTE_SIZE]) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562219674",
      "id" : 562219674,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjIxOTY3NA==",
      "original_commit_id" : "6995fbd687e6c72cbe2297a7cbaeb787b4a55742",
      "original_line" : 278,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/crypto/muhash.cpp",
      "position" : null,
      "pull_request_review_id" : 573764459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562219674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562230000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562230000"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit \"rpc: Add hash_type MUHASH to gettxoutsetinfo\"\r\n\r\nI think extracting an `std::string` here is unnecessary. \r\n\r\n```c++\r\nmuhash.Insert(MakeUCharSpan(ss));\r\n```\r\n\r\nshould work just as well, and avoid the copy.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-21T22:09:23Z",
      "diff_hunk" : "@@ -42,8 +43,20 @@ static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash,\n \n static void ApplyHash(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it) {}\n \n+static void ApplyHash(CCoinsStats& stats, MuHash3072& muhash, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+{\n+    COutPoint outpoint = COutPoint(hash, it->first);\n+    Coin coin = it->second;\n+\n+    CDataStream ss(SER_DISK, PROTOCOL_VERSION);\n+    ss << outpoint;\n+    ss << (uint32_t)(coin.nHeight * 2 + coin.fCoinBase);\n+    ss << coin.out;\n+    muhash.Insert(MakeUCharSpan(ss.str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562230000",
      "id" : 562230000,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjIzMDAwMA==",
      "original_commit_id" : "d20438fd837850a28193c2cfc01abe10fbef42ec",
      "original_line" : 55,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 573764459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562230000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562231321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562231321"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit \"refactor: Seperate hash and stats calculation in coinstats\"\r\n\r\nNit: seperate -> separate in commit title",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-21T22:11:59Z",
      "diff_hunk" : "@@ -24,31 +24,35 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562231321",
      "id" : 562231321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjIzMTMyMQ==",
      "original_commit_id" : "9470df12ecc0d05ee42d9eb8a89d8106e59f6493",
      "original_line" : 27,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 573764459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562231321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278316"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278316"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-22T00:06:15Z",
      "diff_hunk" : "@@ -24,31 +24,35 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278316",
      "id" : 562278316,
      "in_reply_to_id" : 562231321,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjI3ODMxNg==",
      "original_commit_id" : "9470df12ecc0d05ee42d9eb8a89d8106e59f6493",
      "original_line" : 27,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 573835704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278387"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-22T00:06:29Z",
      "diff_hunk" : "@@ -42,8 +43,20 @@ static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash,\n \n static void ApplyHash(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it) {}\n \n+static void ApplyHash(CCoinsStats& stats, MuHash3072& muhash, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+{\n+    COutPoint outpoint = COutPoint(hash, it->first);\n+    Coin coin = it->second;\n+\n+    CDataStream ss(SER_DISK, PROTOCOL_VERSION);\n+    ss << outpoint;\n+    ss << (uint32_t)(coin.nHeight * 2 + coin.fCoinBase);\n+    ss << coin.out;\n+    muhash.Insert(MakeUCharSpan(ss.str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278387",
      "id" : 562278387,
      "in_reply_to_id" : 562230000,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjI3ODM4Nw==",
      "original_commit_id" : "d20438fd837850a28193c2cfc01abe10fbef42ec",
      "original_line" : 55,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 573835792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278427"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-22T00:06:37Z",
      "diff_hunk" : "@@ -276,18 +275,33 @@ void Num3072::Divide(const Num3072& a)\n     if (this->IsOverflow()) this->FullReduce();\n }\n \n-Num3072 MuHash3072::ToNum3072(Span<const unsigned char> in) {\n-    Num3072 out{};\n-    uint256 hashed_in = (CHashWriter(SER_DISK, 0) << in).GetSHA256();\n-    unsigned char tmp[BYTE_SIZE];\n-    ChaCha20(hashed_in.data(), hashed_in.size()).Keystream(tmp, BYTE_SIZE);\n+Num3072::Num3072(const unsigned char data[BYTE_SIZE]) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r562278427",
      "id" : 562278427,
      "in_reply_to_id" : 562219674,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjI3ODQyNw==",
      "original_commit_id" : "6995fbd687e6c72cbe2297a7cbaeb787b4a55742",
      "original_line" : 278,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/crypto/muhash.cpp",
      "position" : null,
      "pull_request_review_id" : 573835848,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562278427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563176885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563176885"
         }
      },
      "author_association" : "MEMBER",
      "body" : "f8e4e369 nit, this is the only occurrence in the codebase documentation where MuHash is written Muhash\r\n```diff\r\n  * efficiently combined later.\r\n  *\r\n- * Muhash does not support checking if an element is already part of the\r\n+ * MuHash does not support checking if an element is already part of the\r\n  * set. That is why this class does not enforce the use of a set as the\r\n  * data it represents because there is no efficient way to do so.\r\n```\r\n(the other place is in the python code)\r\n```python\r\ntest/functional/test_framework/muhash.py:95:class TestFrameworkMuhash(unittest.TestCase):\r\n```",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T17:22:38Z",
      "diff_hunk" : "@@ -91,8 +94,6 @@ class Num3072\n class MuHash3072",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563176885",
      "id" : 563176885,
      "line" : 94,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE3Njg4NQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 94,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/crypto/muhash.h",
      "position" : 29,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563176885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563181113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563181113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "bde3feba should `assert 'muhash' not in` be added to any of res-res4\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:03:25Z",
      "diff_hunk" : "@@ -267,6 +267,13 @@ def _test_gettxoutsetinfo(self):\n         # hash_type none should not return a UTXO set hash.\n         res5 = node.gettxoutsetinfo(hash_type='none')\n         assert 'hash_serialized_2' not in res5\n+        assert 'muhash' not in res5",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563181113",
      "id" : 563181113,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4MTExMw==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 270,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563181113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563183184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563183184"
         }
      },
      "author_association" : "MEMBER",
      "body" : "bde3febaf this could perhaps be a bit simpler\r\n\r\n<details><summary>diff</summary><p>\r\n\r\n```diff\r\ndiff --git a/src/rpc/blockchain.cpp b/src/rpc/blockchain.cpp\r\nindex 576dabc349..3a07e5620d 100644\r\n--- a/src/rpc/blockchain.cpp\r\n+++ b/src/rpc/blockchain.cpp\r\n@@ -1079,7 +1079,7 @@ static RPCHelpMan gettxoutsetinfo()\r\n     CCoinsStats stats;\r\n     ::ChainstateActive().ForceFlushStateToDisk();\r\n \r\n-    const CoinStatsHashType hash_type = ParseHashType(request.params[0], CoinStatsHashType::HASH_SERIALIZED);\r\n+    const CoinStatsHashType hash_type{request.params[0].isNull() ? CoinStatsHashType::HASH_SERIALIZED : ParseHashType(request.params[0].get_str())};\r\n \r\n     CCoinsView* coins_view = WITH_LOCK(cs_main, return &ChainstateActive().CoinsDB());\r\n     NodeContext& node = EnsureNodeContext(request.context);\r\ndiff --git a/src/rpc/util.cpp b/src/rpc/util.cpp\r\nindex 30e09a9aac..d8dadf41f7 100644\r\n--- a/src/rpc/util.cpp\r\n+++ b/src/rpc/util.cpp\r\n@@ -113,14 +113,8 @@ std::vector<unsigned char> ParseHexO(const UniValue& o, std::string strKey)\r\n     return ParseHexV(find_value(o, strKey), strKey);\r\n }\r\n \r\n-CoinStatsHashType ParseHashType(const UniValue& param, const CoinStatsHashType default_type)\r\n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\r\n {\r\n-    if (param.isNull()) {\r\n-        return default_type;\r\n-    }\r\n-\r\n-    std::string hash_type_input = param.get_str();\r\n-\r\n     if (hash_type_input == \"hash_serialized_2\") {\r\n         return CoinStatsHashType::HASH_SERIALIZED;\r\n     } else if (hash_type_input == \"none\") {\r\ndiff --git a/src/rpc/util.h b/src/rpc/util.h\r\nindex 942c243718..611d281014 100644\r\n--- a/src/rpc/util.h\r\n+++ b/src/rpc/util.h\r\n@@ -77,7 +77,7 @@ extern uint256 ParseHashO(const UniValue& o, std::string strKey);\r\n extern std::vector<unsigned char> ParseHexV(const UniValue& v, std::string strName);\r\n extern std::vector<unsigned char> ParseHexO(const UniValue& o, std::string strKey);\r\n \r\n-CoinStatsHashType ParseHashType(const UniValue& param, const CoinStatsHashType default_type);\r\n+CoinStatsHashType ParseHashType(const std::string& hash_type_input);\r\n \r\n extern CAmount AmountFromValue(const UniValue& value);\r\n extern std::string HelpExampleCli(const std::string& methodname, const std::string& args);\r\n```\r\n</p></details>\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:23:33Z",
      "diff_hunk" : "@@ -117,16 +117,18 @@ CoinStatsHashType ParseHashType(const UniValue& param, const CoinStatsHashType d\n {\n     if (param.isNull()) {\n         return default_type;\n-    } else {\n-        std::string hash_type_input = param.get_str();\n+    }\n \n-        if (hash_type_input == \"hash_serialized_2\") {\n-            return CoinStatsHashType::HASH_SERIALIZED;\n-        } else if (hash_type_input == \"none\") {\n-            return CoinStatsHashType::NONE;\n-        } else {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));\n-        }\n+    std::string hash_type_input = param.get_str();\n+\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563183184",
      "id" : 563183184,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4MzE4NA==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 131,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563183184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563184155"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563184155"
         }
      },
      "author_association" : "MEMBER",
      "body" : "bde3febaf pass as optional results\r\n```diff\r\n-                        {RPCResult::Type::STR_HEX, \"muhash\", \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},\r\n-                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\r\n+                        {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},\r\n+                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", /* optional */ true, \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\r\n```\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:32:55Z",
      "diff_hunk" : "@@ -1063,6 +1063,7 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},\n                         {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563184155",
      "id" : 563184155,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4NDE1NQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 1067,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563184155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563184536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563184536"
         }
      },
      "author_association" : "MEMBER",
      "body" : "bde3feba [named cast](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines.html#Res-casts-named)\r\n```suggestion\r\n    ss << static_cast<uint32_t>(coin.nHeight * 2 + coin.fCoinBase);\r\n```",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:36:31Z",
      "diff_hunk" : "@@ -24,31 +25,47 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n {\n-    assert(!outputs.empty());\n-    ss << hash;\n-    ss << VARINT(outputs.begin()->second.nHeight * 2 + outputs.begin()->second.fCoinBase ? 1u : 0u);\n-    stats.nTransactions++;\n-    for (const auto& output : outputs) {\n-        ss << VARINT(output.first + 1);\n-        ss << output.second.out.scriptPubKey;\n-        ss << VARINT_MODE(output.second.out.nValue, VarIntMode::NONNEGATIVE_SIGNED);\n-        stats.nTransactionOutputs++;\n-        stats.nTotalAmount += output.second.out.nValue;\n-        stats.nBogoSize += GetBogoSize(output.second.out.scriptPubKey);\n+    if (it == outputs.begin()) {\n+        ss << hash;\n+        ss << VARINT(it->second.nHeight * 2 + it->second.fCoinBase ? 1u : 0u);\n+    }\n+\n+    ss << VARINT(it->first + 1);\n+    ss << it->second.out.scriptPubKey;\n+    ss << VARINT_MODE(it->second.out.nValue, VarIntMode::NONNEGATIVE_SIGNED);\n+\n+    if (it == outputs.end()) {\n+        ss << VARINT(0u);\n     }\n-    ss << VARINT(0u);\n }\n \n-static void ApplyStats(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it) {}\n+\n+static void ApplyHash(CCoinsStats& stats, MuHash3072& muhash, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+{\n+    COutPoint outpoint = COutPoint(hash, it->first);\n+    Coin coin = it->second;\n+\n+    CDataStream ss(SER_DISK, PROTOCOL_VERSION);\n+    ss << outpoint;\n+    ss << (uint32_t)(coin.nHeight * 2 + coin.fCoinBase);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563184536",
      "id" : 563184536,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4NDUzNg==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 53,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563184536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563185041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563185041"
         }
      },
      "author_association" : "MEMBER",
      "body" : "7a96f77c nit, sort",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:41:19Z",
      "diff_hunk" : "@@ -0,0 +1,75 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Serialize and calculate a hash for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import create_transaction\n+from test_framework.messages import (\n+    COutPoint,\n+    FromHex,\n+    CBlock,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563185041",
      "id" : 563185041,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4NTA0MQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563185041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563185104"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563185104"
         }
      },
      "author_association" : "MEMBER",
      "body" : "7a96f77c nit, place standard library imports before application/library specific imports per https://www.python.org/dev/peps/pep-0008/#imports",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-23T18:42:14Z",
      "diff_hunk" : "@@ -0,0 +1,75 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Serialize and calculate a hash for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import create_transaction\n+from test_framework.messages import (\n+    COutPoint,\n+    FromHex,\n+    CBlock,\n+)\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import struct",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563185104",
      "id" : 563185104,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzE4NTEwNA==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 574862235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563185104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563247377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563247377"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could also drop the header file declaration and move the function into the same file as the caller, unless you expect it to have callers in other files.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T06:53:08Z",
      "diff_hunk" : "@@ -117,16 +117,18 @@ CoinStatsHashType ParseHashType(const UniValue& param, const CoinStatsHashType d\n {\n     if (param.isNull()) {\n         return default_type;\n-    } else {\n-        std::string hash_type_input = param.get_str();\n+    }\n \n-        if (hash_type_input == \"hash_serialized_2\") {\n-            return CoinStatsHashType::HASH_SERIALIZED;\n-        } else if (hash_type_input == \"none\") {\n-            return CoinStatsHashType::NONE;\n-        } else {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));\n-        }\n+    std::string hash_type_input = param.get_str();\n+\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563247377",
      "id" : 563247377,
      "in_reply_to_id" : 563183184,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzI0NzM3Nw==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 131,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 574900863,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563247377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324903"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324903"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You're right, I don't foresee any other callers at the moment so I moved the function into `rpc/blockchain.cpp`.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:38:59Z",
      "diff_hunk" : "@@ -117,16 +117,18 @@ CoinStatsHashType ParseHashType(const UniValue& param, const CoinStatsHashType d\n {\n     if (param.isNull()) {\n         return default_type;\n-    } else {\n-        std::string hash_type_input = param.get_str();\n+    }\n \n-        if (hash_type_input == \"hash_serialized_2\") {\n-            return CoinStatsHashType::HASH_SERIALIZED;\n-        } else if (hash_type_input == \"none\") {\n-            return CoinStatsHashType::NONE;\n-        } else {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));\n-        }\n+    std::string hash_type_input = param.get_str();\n+\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324903",
      "id" : 563324903,
      "in_reply_to_id" : 563183184,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDkwMw==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 131,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 574952695,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324906"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324906"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:04Z",
      "diff_hunk" : "@@ -91,8 +94,6 @@ class Num3072\n class MuHash3072",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324906",
      "id" : 563324906,
      "in_reply_to_id" : 563176885,
      "line" : 94,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDkwNg==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 94,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/crypto/muhash.h",
      "position" : 29,
      "pull_request_review_id" : 574952697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324919"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:09Z",
      "diff_hunk" : "@@ -267,6 +267,13 @@ def _test_gettxoutsetinfo(self):\n         # hash_type none should not return a UTXO set hash.\n         res5 = node.gettxoutsetinfo(hash_type='none')\n         assert 'hash_serialized_2' not in res5\n+        assert 'muhash' not in res5",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324919",
      "id" : 563324919,
      "in_reply_to_id" : 563181113,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDkxOQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 270,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 574952708,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:21Z",
      "diff_hunk" : "@@ -24,31 +25,47 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n {\n-    assert(!outputs.empty());\n-    ss << hash;\n-    ss << VARINT(outputs.begin()->second.nHeight * 2 + outputs.begin()->second.fCoinBase ? 1u : 0u);\n-    stats.nTransactions++;\n-    for (const auto& output : outputs) {\n-        ss << VARINT(output.first + 1);\n-        ss << output.second.out.scriptPubKey;\n-        ss << VARINT_MODE(output.second.out.nValue, VarIntMode::NONNEGATIVE_SIGNED);\n-        stats.nTransactionOutputs++;\n-        stats.nTotalAmount += output.second.out.nValue;\n-        stats.nBogoSize += GetBogoSize(output.second.out.scriptPubKey);\n+    if (it == outputs.begin()) {\n+        ss << hash;\n+        ss << VARINT(it->second.nHeight * 2 + it->second.fCoinBase ? 1u : 0u);\n+    }\n+\n+    ss << VARINT(it->first + 1);\n+    ss << it->second.out.scriptPubKey;\n+    ss << VARINT_MODE(it->second.out.nValue, VarIntMode::NONNEGATIVE_SIGNED);\n+\n+    if (it == outputs.end()) {\n+        ss << VARINT(0u);\n     }\n-    ss << VARINT(0u);\n }\n \n-static void ApplyStats(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats& stats, std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it) {}\n+\n+static void ApplyHash(CCoinsStats& stats, MuHash3072& muhash, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+{\n+    COutPoint outpoint = COutPoint(hash, it->first);\n+    Coin coin = it->second;\n+\n+    CDataStream ss(SER_DISK, PROTOCOL_VERSION);\n+    ss << outpoint;\n+    ss << (uint32_t)(coin.nHeight * 2 + coin.fCoinBase);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324941",
      "id" : 563324941,
      "in_reply_to_id" : 563184536,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDk0MQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 53,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 574952721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:28Z",
      "diff_hunk" : "@@ -1063,6 +1063,7 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},\n                         {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324945",
      "id" : 563324945,
      "in_reply_to_id" : 563184155,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDk0NQ==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 1067,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 574952725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324952"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:33Z",
      "diff_hunk" : "@@ -0,0 +1,75 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Serialize and calculate a hash for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import create_transaction\n+from test_framework.messages import (\n+    COutPoint,\n+    FromHex,\n+    CBlock,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324952",
      "id" : 563324952,
      "in_reply_to_id" : 563185041,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDk1Mg==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 574952732,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324957"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T17:39:37Z",
      "diff_hunk" : "@@ -0,0 +1,75 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation.\n+\n+Serialize and calculate a hash for the UTXO set and compare it with the actual node's hash.\n+\"\"\"\n+\n+from test_framework.blocktools import create_transaction\n+from test_framework.messages import (\n+    COutPoint,\n+    FromHex,\n+    CBlock,\n+)\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+import struct",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563324957",
      "id" : 563324957,
      "in_reply_to_id" : 563185104,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMyNDk1Nw==",
      "original_commit_id" : "7a96f77c00dcb24fe0aa033482b1728d1f1d28ed",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : null,
      "pull_request_review_id" : 574952739,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563324957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed feedback by @jonatack ",
      "created_at" : "2021-01-24T17:39:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-766400514",
      "id" : 766400514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjQwMDUxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-24T17:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766400514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563335364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563335364"
         }
      },
      "author_association" : "MEMBER",
      "body" : "good catch in the latest push\r\n```diff\r\n- Options: 'hash_serialized_2' (the legacy algorithm), 'none'.\"},\r\n+ Options: 'hash_serialized_2' (the legacy algorithm), 'muhash', 'none'.\"},\r\n```\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T19:06:58Z",
      "diff_hunk" : "@@ -1047,13 +1047,26 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n+{\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));\n+    }\n+}\n+\n static RPCHelpMan gettxoutsetinfo()\n {\n     return RPCHelpMan{\"gettxoutsetinfo\",\n                 \"\\nReturns statistics about the unspent transaction output set.\\n\"\n                 \"Note this call may take some time.\\n\",\n                 {\n-                    {\"hash_type\", RPCArg::Type::STR, /* default */ \"hash_serialized_2\", \"Which UTXO set hash should be calculated. Options: 'hash_serialized_2' (the legacy algorithm), 'none'.\"},\n+                    {\"hash_type\", RPCArg::Type::STR, /* default */ \"hash_serialized_2\", \"Which UTXO set hash should be calculated. Options: 'hash_serialized_2' (the legacy algorithm), 'muhash', 'none'.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563335364",
      "id" : 563335364,
      "line" : 1069,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMzNTM2NA==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 1069,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 574959517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563335364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563335899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563335899"
         }
      },
      "author_association" : "MEMBER",
      "body" : "726c9504 I overlooked this in my first review, perhaps add a functional test assertion on this output\r\n```suggestion\r\n        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%s is not a valid hash_type\", hash_type_input));\r\n```",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T19:11:06Z",
      "diff_hunk" : "@@ -1047,13 +1047,26 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n+{\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563335899",
      "id" : 563335899,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMzNTg5OQ==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 1059,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 574959844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563335899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563336751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563336751"
         }
      },
      "author_association" : "MEMBER",
      "body" : "726c9504 pico-nit, feel free to ignore, s/Muhash/MuHash/",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T19:18:32Z",
      "diff_hunk" : "@@ -117,9 +138,17 @@ static void PrepareHash(CHashWriter& ss, const CCoinsStats& stats)\n     ss << stats.hashBlock;\n }\n static void PrepareHash(std::nullptr_t, CCoinsStats& stats) {}\n+// Muhash does not need the prepare step",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563336751",
      "id" : 563336751,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMzNjc1MQ==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 141,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 574960410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563336751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563338135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563338135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, maybe it works anyway\r\n```\r\n./src/bitcoin-cli -signet gettxoutsetinfo MuHash\r\nerror code: -8\r\nerror message:\r\nMuHash is not a valid hash_type\r\n```",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T19:29:35Z",
      "diff_hunk" : "@@ -1047,13 +1047,26 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n+{\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563338135",
      "id" : 563338135,
      "in_reply_to_id" : 563335899,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMzODEzNQ==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 1059,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 574961334,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563338135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 2e5617f7f4bcece4834852cc925068e47ceeffa3 code review, reviewed diff last review per `git diff 7a96f77 2e5617f`, tested rebased on current master\r\n\r\nHappy to re-ACK for the changes above.\r\n\r\n<details><summary>Some manual command line testing.</summary><p>\r\n\r\n```\r\n# bsi is an alias for ./src/bitcoin-cli -signet\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi help gettxoutsetinfo\r\ngettxoutsetinfo ( \"hash_type\" )\r\n\r\nReturns statistics about the unspent transaction output set.\r\nNote this call may take some time.\r\n\r\nArguments:\r\n1. hash_type    (string, optional, default=hash_serialized_2) Which UTXO set hash should be calculated. Options: 'hash_serialized_2' (the legacy algorithm), 'muhash', 'none'.\r\n\r\nResult:\r\n{                                 (json object)\r\n  \"height\" : n,                   (numeric) The current block height (index)\r\n  \"bestblock\" : \"hex\",            (string) The hash of the block at the tip of the chain\r\n  \"transactions\" : n,             (numeric) The number of transactions with unspent outputs\r\n  \"txouts\" : n,                   (numeric) The number of unspent transaction outputs\r\n  \"bogosize\" : n,                 (numeric) A meaningless metric for UTXO set size\r\n  \"muhash\" : \"hex\",               (string, optional) The serialized hash (only present if 'muhash' hash_type is chosen)\r\n  \"hash_serialized_2\" : \"hex\",    (string, optional) The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\r\n  \"disk_size\" : n,                (numeric) The estimated size of the chainstate on disk\r\n  \"total_amount\" : n              (numeric) The total amount\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli gettxoutsetinfo \r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"gettxoutsetinfo\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo\r\n{\r\n  \"height\": 21927,\r\n  \"bestblock\": \"0000000d69e0c1800fd7103a7f1aaf24ec7b8c1db92257bda1035dcfd8e71c30\",\r\n  \"transactions\": 17430,\r\n  \"txouts\": 17550,\r\n  \"bogosize\": 1263989,\r\n  \"hash_serialized_2\": \"c8dbf6ab5094c36935ca89fc8e347b65ab17320f0937c5ac942274a1a0027892\",\r\n  \"disk_size\": 1264123,\r\n  \"total_amount\": 1096350.00000000\r\n}\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo hash_serialized_2\r\n{\r\n  \"height\": 21928,\r\n  \"bestblock\": \"000000c3c7e614717b8cdf6c33de7a8a7d97a856eba6640b481a0029fc774249\",\r\n  \"transactions\": 17431,\r\n  \"txouts\": 17551,\r\n  \"bogosize\": 1264061,\r\n  \"hash_serialized_2\": \"3e31af57df9dac6bf8924560b647fc81f01bdac1c0fe4af2bc12b61c81d87d61\",\r\n  \"disk_size\": 1264123,\r\n  \"total_amount\": 1096400.00000000\r\n}\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo muhash\r\n{\r\n  \"height\": 21927,\r\n  \"bestblock\": \"0000000d69e0c1800fd7103a7f1aaf24ec7b8c1db92257bda1035dcfd8e71c30\",\r\n  \"transactions\": 17430,\r\n  \"txouts\": 17550,\r\n  \"bogosize\": 1263989,\r\n  \"muhash\": \"cd74b9cfe35dfee561ed730953ed15085e83c096db30d5c03a8ab1a6a137077a\",\r\n  \"disk_size\": 1264123,\r\n  \"total_amount\": 1096350.00000000\r\n}\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo none\r\n{\r\n  \"height\": 21927,\r\n  \"bestblock\": \"0000000d69e0c1800fd7103a7f1aaf24ec7b8c1db92257bda1035dcfd8e71c30\",\r\n  \"transactions\": 17430,\r\n  \"txouts\": 17550,\r\n  \"bogosize\": 1263989,\r\n  \"disk_size\": 1264123,\r\n  \"total_amount\": 1096350.00000000\r\n}\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo non\r\nerror code: -8\r\nerror message:\r\nnon is not a valid hash_type\r\n\r\n((HEAD detached at origin/pr/19145))$ bsi gettxoutsetinfo MuHash\r\nerror code: -8\r\nerror message:\r\nMuHash is not a valid hash_type\r\n```\r\n</p></details>\r\n",
      "created_at" : "2021-01-24T19:41:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-766419585",
      "id" : 766419585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjQxOTU4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-24T19:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766419585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394287"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394287"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I feel like I fixed this before but I guess I messed up a rebase somewhere ;)",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T22:22:07Z",
      "diff_hunk" : "@@ -1047,13 +1047,26 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n+{\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));\n+    }\n+}\n+\n static RPCHelpMan gettxoutsetinfo()\n {\n     return RPCHelpMan{\"gettxoutsetinfo\",\n                 \"\\nReturns statistics about the unspent transaction output set.\\n\"\n                 \"Note this call may take some time.\\n\",\n                 {\n-                    {\"hash_type\", RPCArg::Type::STR, /* default */ \"hash_serialized_2\", \"Which UTXO set hash should be calculated. Options: 'hash_serialized_2' (the legacy algorithm), 'none'.\"},\n+                    {\"hash_type\", RPCArg::Type::STR, /* default */ \"hash_serialized_2\", \"Which UTXO set hash should be calculated. Options: 'hash_serialized_2' (the legacy algorithm), 'muhash', 'none'.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394287",
      "id" : 563394287,
      "in_reply_to_id" : 563335364,
      "line" : 1069,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzM5NDI4Nw==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 1069,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 574996784,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394341"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T22:22:29Z",
      "diff_hunk" : "@@ -1047,13 +1047,26 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n+{\n+    if (hash_type_input == \"hash_serialized_2\") {\n+        return CoinStatsHashType::HASH_SERIALIZED;\n+    } else if (hash_type_input == \"none\") {\n+        return CoinStatsHashType::NONE;\n+    } else if (hash_type_input == \"muhash\") {\n+        return CoinStatsHashType::MUHASH;\n+    } else {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"%d is not a valid hash_type\", hash_type_input));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394341",
      "id" : 563394341,
      "in_reply_to_id" : 563335899,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzM5NDM0MQ==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 1059,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 574996797,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394355"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394355"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-24T22:22:39Z",
      "diff_hunk" : "@@ -117,9 +138,17 @@ static void PrepareHash(CHashWriter& ss, const CCoinsStats& stats)\n     ss << stats.hashBlock;\n }\n static void PrepareHash(std::nullptr_t, CCoinsStats& stats) {}\n+// Muhash does not need the prepare step",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r563394355",
      "id" : 563394355,
      "in_reply_to_id" : 563336751,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzM5NDM1NQ==",
      "original_commit_id" : "2e5617f7f4bcece4834852cc925068e47ceeffa3",
      "original_line" : 141,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 574996835,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563394355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 3506d9080166bc250e941d791e3e8a2b85d5bd6b per `git diff 2e5617f 3506d90`\r\n\r\nThanks for updating.",
      "created_at" : "2021-01-25T10:53:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-766730597",
      "id" : 766730597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjczMDU5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T10:53:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766730597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This might need a release note (even if the note will be updated in planned follow-ups to this).",
      "created_at" : "2021-01-25T13:04:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-766801722",
      "id" : 766801722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NjgwMTcyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-25T13:04:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/766801722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Muhash at height 668,047: `c263d20036cc983510e9b347cb88e947168dd5665ed00b0e6118d07a7704f810`",
      "created_at" : "2021-01-28T13:46:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-769063314",
      "id" : 769063314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2OTA2MzMxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-28T13:46:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/769063314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566892821"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566892821"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625: nit this undoes the move of `&` in the previous commit",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-29T15:17:50Z",
      "diff_hunk" : "@@ -24,7 +25,7 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+static void ApplyHash(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566892821",
      "id" : 566892821,
      "line" : 28,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Njg5MjgyMQ==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 28,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : 13,
      "pull_request_review_id" : 579351730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566892821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566895459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566895459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625 nit: handle `MUHASH` before `NONE`? (same with `PrepareHash ` and `ParseHashType`)",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-29T15:21:34Z",
      "diff_hunk" : "@@ -111,6 +124,10 @@ bool GetUTXOStats(CCoinsView* view, CCoinsStats& stats, CoinStatsHashType hash_t\n     case(CoinStatsHashType::NONE): {\n         return GetUTXOStats(view, stats, nullptr, interruption_point);\n     }\n+    case(CoinStatsHashType::MUHASH): {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566895459",
      "id" : 566895459,
      "line" : 124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Njg5NTQ1OQ==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 124,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : 77,
      "pull_request_review_id" : 579351730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566895459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566897773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566897773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625 nit: move down?",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-29T15:25:00Z",
      "diff_hunk" : "@@ -1063,7 +1076,8 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n-                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566897773",
      "id" : 566897773,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Njg5Nzc3Mw==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 1079,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 579351730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566897773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566912424"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566912424"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This (?) changes the result of `gettxoutsetinfo hash_serialized_2` (probably something else)\r\n",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-29T15:46:02Z",
      "diff_hunk" : "@@ -117,9 +138,17 @@ static void PrepareHash(CHashWriter& ss, const CCoinsStats& stats)\n     ss << stats.hashBlock;\n }\n static void PrepareHash(std::nullptr_t, CCoinsStats& stats) {}\n+// MuHash does not need the prepare step\n+static void PrepareHash(MuHash3072& muhash, CCoinsStats& stats) {}\n \n static void FinalizeHash(CHashWriter& ss, CCoinsStats& stats)\n {\n-    stats.hashSerialized = ss.GetHash();\n+    stats.hashSerialized = ss.GetSHA256();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r566912424",
      "id" : 566912424,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjkxMjQyNA==",
      "original_commit_id" : "3506d9080166bc250e941d791e3e8a2b85d5bd6b",
      "original_line" : 146,
      "original_position" : 94,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 579351730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/566912424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341317"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Huh, no idea how that happened, makes no sense at all, especially inside that commit. Fixed.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-31T00:00:29Z",
      "diff_hunk" : "@@ -117,9 +138,17 @@ static void PrepareHash(CHashWriter& ss, const CCoinsStats& stats)\n     ss << stats.hashBlock;\n }\n static void PrepareHash(std::nullptr_t, CCoinsStats& stats) {}\n+// MuHash does not need the prepare step\n+static void PrepareHash(MuHash3072& muhash, CCoinsStats& stats) {}\n \n static void FinalizeHash(CHashWriter& ss, CCoinsStats& stats)\n {\n-    stats.hashSerialized = ss.GetHash();\n+    stats.hashSerialized = ss.GetSHA256();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341317",
      "id" : 567341317,
      "in_reply_to_id" : 566912424,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM0MTMxNw==",
      "original_commit_id" : "3506d9080166bc250e941d791e3e8a2b85d5bd6b",
      "original_line" : 146,
      "original_position" : 94,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : null,
      "pull_request_review_id" : 579841798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341329"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341329"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-31T00:00:35Z",
      "diff_hunk" : "@@ -1063,7 +1076,8 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n-                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341329",
      "id" : 567341329,
      "in_reply_to_id" : 566897773,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM0MTMyOQ==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 1079,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 579841803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341332"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341332"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-31T00:00:42Z",
      "diff_hunk" : "@@ -111,6 +124,10 @@ bool GetUTXOStats(CCoinsView* view, CCoinsStats& stats, CoinStatsHashType hash_t\n     case(CoinStatsHashType::NONE): {\n         return GetUTXOStats(view, stats, nullptr, interruption_point);\n     }\n+    case(CoinStatsHashType::MUHASH): {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341332",
      "id" : 567341332,
      "in_reply_to_id" : 566895459,
      "line" : 124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM0MTMzMg==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 124,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : 77,
      "pull_request_review_id" : 579841806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341344"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341344"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-01-31T00:00:50Z",
      "diff_hunk" : "@@ -24,7 +25,7 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyHash(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)\n+static void ApplyHash(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r567341344",
      "id" : 567341344,
      "in_reply_to_id" : 566892821,
      "line" : 28,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM0MTM0NA==",
      "original_commit_id" : "e6856a3809e54dc4de03cb4cd4f9d78495cc0625",
      "original_line" : 28,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : 13,
      "pull_request_review_id" : 579841809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-31T00:00:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/567341344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Reviewed [3506d90](https://github.com/bitcoin/bitcoin/commit/3506d9080166bc250e941d791e3e8a2b85d5bd6b), almost happy...\r\n> \r\n> Muhash at height 668,212: `d0192e6604c3dc9a78f47bfc5ae84b8c0f6baf960d7ba9305664bbb9f65ef092`.\r\n> \r\n> `hash_serialized_2` is `63fa057a656168ed832d8abbec8008948fc17aecde9f346d69043871a746941f` on master, but `15d3629db2fcbed27a1fd9d35c15b5ac6f0a70f5723ebf9cf87e3df0b0feb061` here (`efe73b1f89e82d65100c73c06d9a01ec19cc7e029d93caaa8bfded4d1723d484` if I revert `GetHash()`)\r\n> \r\n> You may want to hardcode a `hash_serialized_2` example in the test suite.\r\n\r\nThanks a lot for testing @Sjors ! I should have addressed all your comments.\r\n\r\nThe difference in that hash was caused by using `outputs.end()` where I should have used `std::prev(outputs.end())` in `ApplyHash()`. I was actually sure we had some deterministic tests in place for that hash already but obviously, we didn't. So I added a new commit with a small test calculating the hash based on the cached chain to add such coverage.",
      "created_at" : "2021-01-31T00:14:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-770301935",
      "id" : 770301935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3MDMwMTkzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-31T00:14:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770301935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r568113969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568113969"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, in these two lines, could replace the single quotes with double ones for consistency, e.g. `s/'/\\\"/`",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-02-01T20:21:21Z",
      "diff_hunk" : "@@ -1063,7 +1076,8 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n-                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", /* optional */ true, \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r568113969",
      "id" : 568113969,
      "line" : 1080,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODExMzk2OQ==",
      "original_commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "original_line" : 1080,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 34,
      "pull_request_review_id" : 580731840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-01T20:53:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568113969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r568152429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568152429"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, will do if I have to retouch! Thanks for re-reviewing!",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-02-01T21:30:15Z",
      "diff_hunk" : "@@ -1063,7 +1076,8 @@ static RPCHelpMan gettxoutsetinfo()\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n-                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"hash_serialized_2\", /* optional */ true, \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n+                        {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r568152429",
      "id" : 568152429,
      "in_reply_to_id" : 568113969,
      "line" : 1080,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODE1MjQyOQ==",
      "original_commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "original_line" : 1080,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 34,
      "pull_request_review_id" : 580781391,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-01T21:30:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568152429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK e987ae5\r\n\r\nI get the same MuHash as before for block 668,212 and `hash_serialized_2` now matches what I found on master.",
      "created_at" : "2021-02-03T10:19:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-772397861",
      "id" : 772397861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3MjM5Nzg2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-03T10:19:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/772397861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK e987ae5a554c9952812746c29f2766bacea4b727\r\n\r\nIt would be nice if the test used MiniWallet or otherwise didn't rely on the wallet, but it's fine for now.",
      "created_at" : "2021-02-08T22:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-775500995",
      "id" : 775500995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NTUwMDk5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-08T22:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775500995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r573951204"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573951204"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Improve encapsulation between MuHash3072 and Num3072\" (a1fcceac69097a8e6540a6fd8121a5d53022528f)\r\n\r\nNote in case it helps other reviewers: I found this commit easier to review rearranging the method order to `ToNum3072` `Num3072` `ToBytes` instead of `Num3072` `ToBytes` `ToNum3072` so diff was smaller with code moving around less.",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-02-10T17:59:26Z",
      "diff_hunk" : "@@ -276,18 +275,33 @@ void Num3072::Divide(const Num3072& a)\n     if (this->IsOverflow()) this->FullReduce();\n }\n \n-Num3072 MuHash3072::ToNum3072(Span<const unsigned char> in) {\n-    Num3072 out{};\n-    uint256 hashed_in = (CHashWriter(SER_DISK, 0) << in).GetSHA256();\n-    unsigned char tmp[BYTE_SIZE];\n-    ChaCha20(hashed_in.data(), hashed_in.size()).Keystream(tmp, BYTE_SIZE);\n+Num3072::Num3072(const unsigned char (&data)[BYTE_SIZE]) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r573951204",
      "id" : 573951204,
      "line" : 278,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mzk1MTIwNA==",
      "original_commit_id" : "a1fcceac69097a8e6540a6fd8121a5d53022528f",
      "original_line" : 278,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/crypto/muhash.cpp",
      "position" : 26,
      "pull_request_review_id" : 587895289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-10T18:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573951204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r573973968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573973968"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Separate hash and stats calculation in coinstats\" (2474645f3b15687e7f196b89eb935d6e6a98a9da)\r\n\r\n`stats` arguments in unused in all three overloads and could be dropped.\r\n\r\nAlso, passing iterators around like this seems unnecessarily elaborate. It makes sense to separate stats and hash computations, but is there a reason both computations need to share the a single `for` loop over the output map? I would think you could make all the functions separate like:\r\n\r\nstatic void ApplyHash(CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs);\r\nstatic void ApplyHash(MuHash3072& muhash, const uint256& hash, const std::map<uint32_t, Coin>& outputs);\r\nstatic void ApplyHash(std::nullptr_t, const uint256& hash, const std::map<uint32_t, Coin>& outputs);\r\nstatic void ApplyStats(CCoinsStats& stats, const uint256& hash, const std::map<uint32_t, Coin>& outputs);",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-02-10T18:32:02Z",
      "diff_hunk" : "@@ -24,31 +24,35 @@ static uint64_t GetBogoSize(const CScript& scriptPubKey)\n            scriptPubKey.size() /* scriptPubKey */;\n }\n \n-static void ApplyStats(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n+static void ApplyHash(CCoinsStats& stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs, std::map<uint32_t, Coin>::const_iterator it)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r573973968",
      "id" : 573973968,
      "line" : 28,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mzk3Mzk2OA==",
      "original_commit_id" : "2474645f3b15687e7f196b89eb935d6e6a98a9da",
      "original_line" : 27,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/coinstats.cpp",
      "position" : 13,
      "pull_request_review_id" : 587895289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-10T18:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573973968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks a lot for the reviews @achow101 and @ryanofsky ! I will add your suggestions if I have to push again, otherwise I will put them into the next PR in this series.",
      "created_at" : "2021-02-10T21:43:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#issuecomment-777056129",
      "id" : 777056129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19145",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NzA1NjEyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-10T21:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777056129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r575334728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575334728"
         }
      },
      "author_association" : "MEMBER",
      "body" : "there is no loaded chain and the utxo set is empty. Which is also useful to check, but doesn't check if the hash is deterministic?\r\n\r\n\r\nDid you forget to load the chain from `./test/functional/data/rpc_getblockstats.json`?",
      "commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "created_at" : "2021-02-12T16:12:00Z",
      "diff_hunk" : "@@ -0,0 +1,86 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test UTXO set hash value calculation in gettxoutsetinfo.\"\"\"\n+\n+import struct\n+\n+from test_framework.blocktools import create_transaction\n+from test_framework.messages import (\n+    CBlock,\n+    COutPoint,\n+    FromHex,\n+)\n+from test_framework.muhash import MuHash3072\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class UTXOSetHashTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def test_deterministic_hash_results(self):\n+        self.log.info(\"Test deterministic UTXO set hash results\")\n+\n+        # These depend on the setup_clean_chain option, the chain loaded from the cache",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19145#discussion_r575334728",
      "id" : 575334728,
      "line" : 30,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTMzNDcyOA==",
      "original_commit_id" : "e987ae5a554c9952812746c29f2766bacea4b727",
      "original_line" : 30,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "test/functional/feature_utxo_set_hash.py",
      "position" : 30,
      "pull_request_review_id" : 589609304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19145",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T16:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575334728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
