[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r434492868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/434492868"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you remove this line, you can also remove the whole \"Generate some coins on both wallets\" part",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-03T11:19:10Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r434492868",
      "id" : 434492868,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ5Mjg2OA==",
      "original_commit_id" : "fe4a271bf6ef36edfe43872fb2792349b3505393",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 423453998,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/434492868",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r434524436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/434524436"
         }
      },
      "author_association" : "NONE",
      "body" : "It didn't work for me for some reason, though I don't fully understand yet how chain generation works in tests. I'll try this again tomorrow and will get back with an update",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-03T12:20:46Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r434524436",
      "id" : 434524436,
      "in_reply_to_id" : 434492868,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUyNDQzNg==",
      "original_commit_id" : "fe4a271bf6ef36edfe43872fb2792349b3505393",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 423495335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/434524436",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nWhat a nice first-time contribution!\r\n\r\nWarm welcome as a contributor @S3RK - I hope to see more great contributions from you in the future :)",
      "created_at" : "2020-06-03T19:13:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#issuecomment-638405045",
      "id" : 638405045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19153",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODQwNTA0NQ==",
      "updated_at" : "2020-06-03T19:13:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638405045",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r435071695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435071695"
         }
      },
      "author_association" : "NONE",
      "body" : "I figured it out. I forgot to manually import coinbase keys in setup_nodes(), it works now.\r\nThanks for the suggestion.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-04T08:12:27Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r435071695",
      "id" : 435071695,
      "in_reply_to_id" : 434492868,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3MTY5NQ==",
      "original_commit_id" : "fe4a271bf6ef36edfe43872fb2792349b3505393",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 424203459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435071695",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I don't think we can always guarantee that the mempool file will be backwards compatible, but it's good to have a test to be sure that compatibility at least isn't accidentally broken.",
      "created_at" : "2020-06-04T14:59:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#issuecomment-638906121",
      "id" : 638906121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19153",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODkwNjEyMQ==",
      "updated_at" : "2020-06-04T14:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638906121",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436616252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436616252"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I prefer to have the same instruction in all test files that require previous releases, because otherwise other tests fail when they have some versions but not all. Try:\r\n```\r\ncontrib/devtools/previous_release.sh -b v0.19.1 v0.18.1 v0.17.1 v0.16.3 v0.15.2\r\n\r\nOnly v0.19.1 is required by this test. The rest is used in other backwards compatibility tests.\r\n```",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-08T11:03:36Z",
      "diff_hunk" : "@@ -0,0 +1,69 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436616252",
      "id" : 436616252,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxNjI1Mg==",
      "original_commit_id" : "cd583385b76eed7192c5d3078d7945d7848a5162",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 426123570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436616252",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436617268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436617268"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest documenting what's interesting about that version, could be a link to Github issue.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-08T11:05:58Z",
      "diff_hunk" : "@@ -0,0 +1,69 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_previous_releases()\n+\n+    def setup_nodes(self):\n+        self.add_nodes(self.num_nodes, versions=[\n+            190100,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436617268",
      "id" : 436617268,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxNzI2OA==",
      "original_commit_id" : "cd583385b76eed7192c5d3078d7945d7848a5162",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 426123570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436617268",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436617847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436617847"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest adding a comment like what @laanwj said:\r\n\r\n> I don't think we can always guarantee that the mempool file will be backwards compatible, but it's good to have a test to be sure that compatibility at least isn't accidentally broken.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-08T11:07:07Z",
      "diff_hunk" : "@@ -0,0 +1,69 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is compatible between versions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r436617847",
      "id" : 436617847,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxNzg0Nw==",
      "original_commit_id" : "cd583385b76eed7192c5d3078d7945d7848a5162",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 426123570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-10T04:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436617847",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@Sjors thanks for the review. I've pushed a fixup commit to address your suggestions. Once the PR is ready to be merged I will squash it into the original commit.\r\n\r\n> Suggest making a separate PR for [cd58338](https://github.com/bitcoin/bitcoin/commit/cd583385b76eed7192c5d3078d7945d7848a5162), ideally with a test.\r\n\r\nI'm not sure this tiny change deserves a PR and a separate discussion on its own ð. To clarify the impact to log chattiness, the code path in question is executed only during initial mempool load, so it won't repeatedly produce tons of logs. But maybe I'm failing to consider some other possible negative outcomes.",
      "created_at" : "2020-06-09T08:10:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#issuecomment-641111771",
      "id" : 641111771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19153",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTExMTc3MQ==",
      "updated_at" : "2020-06-09T08:10:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641111771",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The new changes look good.\r\n\r\nLog chattiness could be one concern, e.g. when loading a 1 GB mempool with broken entries, but also there's no test. Touching validation.cpp generally instills fear :-)\r\n",
      "created_at" : "2020-06-09T15:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#issuecomment-641354624",
      "id" : 641354624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19153",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTM1NDYyNA==",
      "updated_at" : "2020-06-09T15:00:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641354624",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Squashed the changes, removed log commit",
      "created_at" : "2020-06-10T04:06:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#issuecomment-641707429",
      "id" : 641707429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19153",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MTcwNzQyOQ==",
      "updated_at" : "2020-06-10T04:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641707429",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r438817234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438817234"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It looks like [other](https://github.com/bitcoin/bitcoin/blob/16d4b3fd6d5aad18ebb731a5006a15180d3661ef/test/functional/wallet_upgradewallet.py#L49) [instances](https://github.com/bitcoin/bitcoin/blob/16d4b3fd6d5aad18ebb731a5006a15180d3661ef/test/functional/feature_backwards_compatibility.py#L63) of `adjust_bitcoin_conf_for_pre_17` have left comments as to why it's used. I think it'd be helpful to include here as well.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-11T14:12:22Z",
      "diff_hunk" : "@@ -0,0 +1,78 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is both backward and forward compatible between versions\n+\n+NOTE: The test is designed to prevent cases when compatibility is broken accidentally.\n+In case we need to break mempool compatibility we can continue to use the test by just bumping the version number.\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1 v0.18.1 v0.17.1 v0.16.3 v0.15.2\n+\n+Only v0.15.2 is required by this test. The rest is used in other backwards compatibility tests.\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_17\n+)\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_previous_releases()\n+\n+    def setup_network(self):\n+        self.add_nodes(self.num_nodes, versions=[\n+            150200, # oldest version supported by the test framework\n+            None,\n+        ])\n+        adjust_bitcoin_conf_for_pre_17(self.nodes[0].bitcoinconf)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r438817234",
      "id" : 438817234,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgxNzIzNA==",
      "original_commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : 36,
      "pull_request_review_id" : 428953831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T14:12:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438817234",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r439420712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439420712"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If you believe the code is unclear, we need to think of a better way to fix it rather than putting the same comment before each function call. For example: give this function a better name. But as for me, I think the function name speaks for itself and it doesn't need any clarifying comment.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-12T13:33:19Z",
      "diff_hunk" : "@@ -0,0 +1,78 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is both backward and forward compatible between versions\n+\n+NOTE: The test is designed to prevent cases when compatibility is broken accidentally.\n+In case we need to break mempool compatibility we can continue to use the test by just bumping the version number.\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1 v0.18.1 v0.17.1 v0.16.3 v0.15.2\n+\n+Only v0.15.2 is required by this test. The rest is used in other backwards compatibility tests.\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_17\n+)\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_previous_releases()\n+\n+    def setup_network(self):\n+        self.add_nodes(self.num_nodes, versions=[\n+            150200, # oldest version supported by the test framework\n+            None,\n+        ])\n+        adjust_bitcoin_conf_for_pre_17(self.nodes[0].bitcoinconf)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r439420712",
      "id" : 439420712,
      "in_reply_to_id" : 438817234,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQyMDcxMg==",
      "original_commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : 36,
      "pull_request_review_id" : 429743235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T13:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439420712",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r440753310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440753310"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it's fine to call this without comment; it's always necessary for nodes before 0.17. Ideally the test framework (`add_nodes`) takes care of it automagically.",
      "commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "created_at" : "2020-06-16T10:37:06Z",
      "diff_hunk" : "@@ -0,0 +1,78 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that mempool.dat is both backward and forward compatible between versions\n+\n+NOTE: The test is designed to prevent cases when compatibility is broken accidentally.\n+In case we need to break mempool compatibility we can continue to use the test by just bumping the version number.\n+\n+Download node binaries:\n+contrib/devtools/previous_release.sh -b v0.19.1 v0.18.1 v0.17.1 v0.16.3 v0.15.2\n+\n+Only v0.15.2 is required by this test. The rest is used in other backwards compatibility tests.\n+\"\"\"\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_17\n+)\n+\n+class MempoolCompatibilityTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_previous_releases()\n+\n+    def setup_network(self):\n+        self.add_nodes(self.num_nodes, versions=[\n+            150200, # oldest version supported by the test framework\n+            None,\n+        ])\n+        adjust_bitcoin_conf_for_pre_17(self.nodes[0].bitcoinconf)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19153#discussion_r440753310",
      "id" : 440753310,
      "in_reply_to_id" : 438817234,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc1MzMxMA==",
      "original_commit_id" : "16d4b3fd6d5aad18ebb731a5006a15180d3661ef",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/mempool_compatibility.py",
      "position" : 36,
      "pull_request_review_id" : 431374708,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19153",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-16T10:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440753310",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
