[
   {
      "author_association" : "MEMBER",
      "body" : "`announce_block()` is only called from one place. I'd be tempted to remove the method entirely and explicitly call `send_message(<msg_header>)` from the test case so it's obvious to the reader what's happening.",
      "created_at" : "2017-03-31T20:14:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#issuecomment-290818298",
      "id" : 290818298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10134",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI5MDgxODI5OA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290818298/reactions"
      },
      "updated_at" : "2017-03-31T20:14:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290818298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to remove `announce_block()`.",
      "created_at" : "2017-04-14T16:21:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#issuecomment-294183972",
      "id" : 294183972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10134",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI5NDE4Mzk3Mg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294183972/reactions"
      },
      "updated_at" : "2017-04-14T16:21:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294183972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10134#discussion_r111740271"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111740271"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: spaces aren't required around list elements within brackets: https://www.python.org/dev/peps/pep-0008/#pet-peeves",
      "commit_id" : "f19abd90537fe71e757fdbfc52cd2288e967bb6e",
      "created_at" : "2017-04-17T13:18:25Z",
      "diff_hunk" : "@@ -1092,13 +1082,18 @@ def test_block_relay(self, segwit_activated):\n             block4 = self.build_next_block(nVersion=4)\n             block4.solve()\n             self.old_node.getdataset = set()\n+\n             # Blocks can be requested via direct-fetch (immediately upon processing the announcement)\n             # or via parallel download (with an indeterminate delay from processing the announcement)\n             # so to test that a block is NOT requested, we could guess a time period to sleep for,\n             # and then check. We can avoid the sleep() by taking advantage of transaction getdata's\n             # being processed after block getdata's, and announce a transaction as well,\n             # and then check to see if that particular getdata has been received.\n-            self.old_node.announce_block(block4, use_header=False)\n+            # Since 0.14, inv's will only be responded to with a getheaders, so send a header\n+            # to announce this block.\n+            msg = msg_headers()\n+            msg.headers = [ CBlockHeader(block4) ]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#discussion_r111740271",
      "id" : 111740271,
      "line" : 1032,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMTc0MDI3MQ==",
      "original_commit_id" : "c8e316bc3dd152a2d36a947195fe4b96ca4d34db",
      "original_line" : 1032,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/p2p-segwit.py",
      "position" : 32,
      "pull_request_review_id" : 33001680,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10134",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111740271/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2017-05-06T09:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/111740271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10134#discussion_r112008672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112008672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I prefer the space there, otherwisethetextlookstoosquishedtome, so I'll leave this (until we merge a style guide for the project that calls for removing them).",
      "commit_id" : "f19abd90537fe71e757fdbfc52cd2288e967bb6e",
      "created_at" : "2017-04-18T17:01:19Z",
      "diff_hunk" : "@@ -1092,13 +1082,18 @@ def test_block_relay(self, segwit_activated):\n             block4 = self.build_next_block(nVersion=4)\n             block4.solve()\n             self.old_node.getdataset = set()\n+\n             # Blocks can be requested via direct-fetch (immediately upon processing the announcement)\n             # or via parallel download (with an indeterminate delay from processing the announcement)\n             # so to test that a block is NOT requested, we could guess a time period to sleep for,\n             # and then check. We can avoid the sleep() by taking advantage of transaction getdata's\n             # being processed after block getdata's, and announce a transaction as well,\n             # and then check to see if that particular getdata has been received.\n-            self.old_node.announce_block(block4, use_header=False)\n+            # Since 0.14, inv's will only be responded to with a getheaders, so send a header\n+            # to announce this block.\n+            msg = msg_headers()\n+            msg.headers = [ CBlockHeader(block4) ]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#discussion_r112008672",
      "id" : 112008672,
      "in_reply_to_id" : 111740271,
      "line" : 1032,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjAwODY3Mg==",
      "original_commit_id" : "c8e316bc3dd152a2d36a947195fe4b96ca4d34db",
      "original_line" : 1032,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/p2p-segwit.py",
      "position" : 32,
      "pull_request_review_id" : 33290850,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10134",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112008672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2017-05-06T09:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112008672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2017-05-06T09:26:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#issuecomment-299627653",
      "id" : 299627653,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10134",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI5OTYyNzY1Mw==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299627653/reactions"
      },
      "updated_at" : "2017-05-06T09:26:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299627653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK f19abd90537fe71e757fdbfc52cd2288e967bb6e",
      "created_at" : "2017-05-06T10:07:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10134#issuecomment-299629605",
      "id" : 299629605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10134",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI5OTYyOTYwNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299629605/reactions"
      },
      "updated_at" : "2017-05-06T10:07:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299629605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
