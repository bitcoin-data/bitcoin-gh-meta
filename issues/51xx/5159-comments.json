[
   {
      "body" : "Ooh, that sounds like a pretty slick improvement!",
      "created_at" : "2014-10-30T17:37:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61135038",
      "id" : 61135038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-10-30T17:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61135038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1916835?v=3",
         "events_url" : "https://api.github.com/users/bmos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bmos/followers",
         "following_url" : "https://api.github.com/users/bmos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bmos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bmos",
         "id" : 1916835,
         "login" : "bmos",
         "organizations_url" : "https://api.github.com/users/bmos/orgs",
         "received_events_url" : "https://api.github.com/users/bmos/received_events",
         "repos_url" : "https://api.github.com/users/bmos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bmos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bmos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bmos"
      }
   },
   {
      "body" : "@gavinandresen can you have a look here?\r\n",
      "created_at" : "2014-11-03T12:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61471755",
      "id" : 61471755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-03T12:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61471755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj : yes, I'll review, but that might not happen until next week (I'm headed to Dublin tomorrow).",
      "created_at" : "2014-11-03T19:41:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61535689",
      "id" : 61535689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-03T19:41:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61535689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Thanks.  I really like the new GUI in #5200.  I think we should also change `txconfirmtarget` to default to 2 or higher for non QT usage.  1 is just dangerous given the fact that it's often impossible to be reliably confirmed in 1 transaction.    Separately, #4082 is a somewhat substantial problem though.   Is anyone working on the fixes @gavinandresen and @gmaxwell suggested?  I just want to be sure we tie all these changes together to work well.",
      "created_at" : "2014-11-03T20:27:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61542781",
      "id" : 61542781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-03T20:27:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61542781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos best to ask @cozz there I think",
      "created_at" : "2014-11-04T09:08:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61611361",
      "id" : 61611361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-04T09:08:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61611361",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Code review mostly ACK, apart from a couple of nits.\r\n\r\nI'll try to get a node up and running, generating estimates over time, to see how this behaves compared to the existing estimation code.\r\n",
      "created_at" : "2014-11-04T15:50:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61660562",
      "id" : 61660562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-04T15:50:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61660562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "OK, I moved the dependency checking logic to main.cpp.  It was a pretty clean change I think, and is more efficient because it saves us looping through all the inputs again.  If that code ever gets moved out of main, I think it makes sense for those two checks on inputs to stay together.  However if you don't like that, I can revert back to putting the logic inside `CTxMemPoolEntry` and I'll just call the constructor with a reference to the mempool itself.  In both cases it now checks to be sure inputs aren't in the mempool as you suggest, as opposed to checking that they are in the chain as in my original version.  I renamed the variable and also fixed the portability issue I think.\r\n\r\n ",
      "created_at" : "2014-11-05T20:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-61874052",
      "id" : 61874052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-05T20:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61874052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Node running this code and generating graphs at:  http://core2.bitcoincore.org/smartfee/\r\n\r\n(current HEAD code is running at http://bitcoincore.org/smartfee/ )",
      "created_at" : "2014-11-11T22:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-62632547",
      "id" : 62632547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-11T22:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/62632547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen How come the fee for 3 confirmation txs has stayed constant over the entire period. That can't be right, can it?",
      "created_at" : "2014-11-14T04:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-63007646",
      "id" : 63007646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-14T04:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63007646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "@rebroad The reason that happens is there aren't enough data points for transactions with lower fee rates.   As people start placing transactions with lower fees, there will be more data points in the lower fee rate ranges and the estimate will get lower.  I believe it makes sense for all of the 3+ confirmation estimates to be the same, because basically any fee will be confirmed within 3 confirms right now, so its just a matter of how low an estimate can you accurately give.",
      "created_at" : "2014-11-14T12:01:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-63052197",
      "id" : 63052197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-11-14T12:01:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63052197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "This doesn't seem to work well with #5200 currently. Even after leaving the node running for a while, the fee estimation doesn't kick in for anything other than 2 confirms. So sliding the slider to 20 gives the same fee as sliding it to 2, and then sliding it to 1 makes it say it needs longer to calculate (which then never happens).",
      "created_at" : "2014-12-11T00:11:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-66548851",
      "id" : 66548851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-12-11T00:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66548851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "I'm curious what fee its returning for you and how long it's been running.  You can see by Gavin's charts linked above what the estimates are over time.  But I do agree that if/when this is going to be merged, the GUI could be slightly modified to better handle the case where 1 doesn't give an estimate.  It's not always a matter of not having enough data, but sometimes there really is no answer to the question, because  there is no fee that is high enough that you'll reliably (> 85%) get confirmed within 1 block.  In any case, I was operating under the assumption that this wasn't making it in for 0.10, so I was planning on waiting for that and then rebasing.  I also have a couple small improvements to make.",
      "created_at" : "2014-12-11T01:36:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-66556388",
      "id" : 66556388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-12-11T01:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66556388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "OK I rebased off 0.10 (so the first 3 commits should still be what you reviewed Gavin).  But then the 4th commit is new.  It's addressing your comments above in a better way than I had previously done.",
      "created_at" : "2014-12-11T22:08:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-66698105",
      "id" : 66698105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2014-12-11T22:08:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66698105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@gavinandresen, I've rebased this and added a couple of improvements, most notably, doing some tracking of transactions that are in the mempool and haven't been mined yet.  So in particular the are code changes from what you reviewed before.  ",
      "created_at" : "2015-03-13T20:47:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-79374855",
      "id" : 79374855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-03-13T20:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/79374855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "My compiler is unhappy.\r\nCompiler:\r\n```\r\nApple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\r\n```\r\nUnhappiness:\r\n```\r\n./streams.h:406:9: error: call to 'Serialize' is ambiguous\r\n        ::Serialize(*this, obj, nType, nVersion);\r\n        ^~~~~~~~~~~\r\npolicyestimator.cpp:175:13: note: in instantiation of function template specialization 'CAutoFile::operator<<<unsigned long>' requested here\r\n    fileout << confAvg.size();\r\n            ^\r\n```\r\n\r\n... and:\r\n\r\n```\r\n./serialize.h:555:6: error: member reference base type 'unsigned long' is not a structure or union\r\n    a.Unserialize(is, (int)nType, nVersion);\r\n    ~^~~~~~~~~~~~\r\n./streams.h:416:11: note: in instantiation of function template specialization 'Unserialize<CAutoFile, unsigned long>' requested here\r\n        ::Unserialize(*this, obj, nType, nVersion);\r\n          ^\r\npolicyestimator.cpp:197:12: note: in instantiation of function template specialization 'CAutoFile::operator>><unsigned long>' requested here\r\n    filein >> maxConfirms;\r\n           ^\r\n```\r\n",
      "created_at" : "2015-03-17T14:39:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-82387916",
      "id" : 82387916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-03-17T14:39:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/82387916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Since the format of fee_estimates.dat will change, CTxMemPool::WriteFeeEstimates should change:\r\n```\r\nfileout << 99900; // version required to read: 0.9.99 or later\r\n .... should be\r\nfileout << 109900; // version required to read: 0.10.99 or later\r\n```",
      "created_at" : "2015-03-17T14:46:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-82390552",
      "id" : 82390552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-03-17T14:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/82390552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "ah sorry, pushed too fast, i'd noticed that compilation problem, not sure why it was a problem, but i think i just pushed a fix...   will wait for more comments before adding more fixes.",
      "created_at" : "2015-03-17T14:58:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-82394536",
      "id" : 82394536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-03-17T14:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/82394536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Been running this at home for a couple of days, estimates look reasonable.\r\n\r\nI've updated the bitcoind on core2.bitcoincore.org; as soon as it catches up with the chain it will start generating new fee/priority estimate charts again.\r\n",
      "created_at" : "2015-03-19T16:34:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-83652951",
      "id" : 83652951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-03-19T16:34:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83652951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Any thoughts on whether this is something we'd like to merge?  I'd like to get it in early enough in the 0.11 release cycle that it gets some usage.  I realize its a lot of complicated code, but it really only affects fee and priority estimates.  I think the increased accuracy of the estimates makes it worthwhile.  Compare (core2.) and bitcoincore.org/smartfee/fee_graph.html.",
      "created_at" : "2015-04-06T20:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-90237497",
      "id" : 90237497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-06T20:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90237497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "I'd like to see this in the 0.11 release.\r\n",
      "created_at" : "2015-04-06T22:13:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-90261515",
      "id" : 90261515,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-06T22:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90261515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Could you rename src/policyestimator.o to src/policy/estimator.o ?\r\nI was planning on doing such a code movement and this seems like a perfect opportunity.\r\nA later step would be to take the policy estimator out of the txmempool object, but this movement already helps with that independently of what you're doing inside the the estimator itself which I haven't reviewed.\r\nThis is what I had in mind after the movement: https://github.com/jtimon/bitcoin/commit/ba88aa141985bfba94a67289cf176e3a562971da\r\n\r\nIt will obviously have to change after this PR, but maybe you can get some ideas from there as well, and hopefully make the \"rebase/rewrite\" of that encapsulation easier. If you manage to incorporate the essence of that commit in your PR, I would love you for it, but that's probably too much to ask at this point.\r\nIn any case, I would already be happy with the file rename.",
      "created_at" : "2015-04-08T22:29:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-91054878",
      "id" : 91054878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-08T22:29:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91054878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I'd be happy to give it shot.  I'll ping you when I get around to it.",
      "created_at" : "2015-04-09T01:59:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-91089623",
      "id" : 91089623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-09T01:59:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91089623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Rebased, cleaned up and squashed original commits.\r\n\r\nAdded 3 new commits.\r\nThis is ready for more review.\r\n@jtimon I made the move you asked for but held off for now on the other changes until I know what the right way to couple the mempool to the estimator is.  There are now 3 interface points instead of the previous 1 that the old code had.",
      "created_at" : "2015-04-20T19:40:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-94550340",
      "id" : 94550340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-20T19:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/94550340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "I had more time to review this.\r\nI don't understand what you mean by the 3 interface points but BlockPolicyEstimator is already decoupled from CTxMemPool with your current code.\r\nYou made the mistake of coupling CTxMemPoolEntry with CTxMemPool in https://github.com/morcos/bitcoin/commit/ff34d782517f9cabed87772db96a7e7a76ac5db0\r\nand although you fix it in https://github.com/morcos/bitcoin/commit/64bf2bbe4400d1c4da23f56ebb8dee595f5055fe that mistake should never reach the history. I'm not sure if you planned to squash that commit or leave it separate.\r\n\r\nSo to decouple BlockPolicyEstimator from txmempool.o you just need to also take AllowFreeThreshold and AllowFree with you, and separate CTxMemPoolEntry to a different file.\r\nAt that point, maybe something like policy/fees makes more sense than policy/estimator, we can put more fee-related stuff there later (like CFeeRate, once CTxOut gets decoupled from it).\r\n\r\nAlso, why couple CBlockPolicyEstimator to the minRelayTxFee global when it can take CTxMemPool::minRelayFee (which is only used to pass it to CBlockPolicyEstimator::Read which ends up not using it) ??\r\n\r\nYou have some good opportunities to reduce dependency on boost or at least not increase it (I'm talking about the foreach loops), but if you don't want to do it you can at least explicitly include the dependency in the new file.\r\n\r\nI have created a branch with my many suggestions in form of code:\r\n\r\nhttps://github.com/jtimon/bitcoin/commits/morcos_new-estimates\r\n\r\nThe last commit doesn't pass the tests because mempool.HasNoInputsOf(tx) is always called when creating a new entry: CTxMemPoolEntry::hadNoDependencies is never set to false by default.\r\nThe rest of the commits compile individually although some of them would increase your total diff to master more than others (some are \"free\" in that sense, like the file rename one) so it's up which one you include.\r\nFeel free to squash, edit, reword, kill or reorder the commits as you think it's best.\r\n",
      "created_at" : "2015-04-22T09:51:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-95104343",
      "id" : 95104343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-22T09:51:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95104343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Thanks @jtimon.  I included several of your commits in an all purpose SQUASHME fixup.  I also changed my move commit to yours.  My original commit and 2 recent additions are unchanged.   I think we can PR your other changes separately afterwards.  I have them rebased on top of this here:\r\nhttps://github.com/morcos/bitcoin/commits/new-estimates_jtimon\r\n\r\n@gavinandresen, if you wouldn't mind reviewing the new commits.  The first commit should be what you reviewed already (rebased and tidied a little).   \r\n",
      "created_at" : "2015-04-23T17:28:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-95663638",
      "id" : 95663638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-23T17:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95663638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r28984461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28984461"
         }
      },
      "body" : "The transaction being added to the mempool has actually been copied twice at this point.  The first time when the CTxMemPoolEntry was created, and now again when its copied into the map, which will be its permanent home.  This was not introduced by this PR, but a further PR should consider eliminating one of the copy operations.",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-04-23T17:33:45Z",
      "diff_hunk" : "@@ -419,20 +92,20 @@ void CTxMemPool::AddTransactionsUpdated(unsigned int n)\n }\n \n \n-bool CTxMemPool::addUnchecked(const uint256& hash, const CTxMemPoolEntry &entry)\n+bool CTxMemPool::addUnchecked(const uint256& hash, const CTxMemPoolEntry &entry, bool fCurrentEstimate)\n {\n     // Add to memory pool without checking anything.\n     // Used by main.cpp AcceptToMemoryPool(), which DOES do\n     // all the appropriate checks.\n     LOCK(cs);\n-    {\n-        mapTx[hash] = entry;\n-        const CTransaction& tx = mapTx[hash].GetTx();\n-        for (unsigned int i = 0; i < tx.vin.size(); i++)\n-            mapNextTx[tx.vin[i].prevout] = CInPoint(&tx, i);\n-        nTransactionsUpdated++;\n-        totalTxSize += entry.GetTxSize();\n-    }\n+    mapTx[hash] = entry;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r28984461",
      "id" : 28984461,
      "original_commit_id" : "a992a72aadb67387f0fc2e2315748ae5fd334ac7",
      "original_position" : 398,
      "path" : "src/txmempool.cpp",
      "position" : 402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28984461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Thanks for incorporating some of my suggestions, I'm specially happy about not using the minRelayTxFee global inside the estimator which was the most important nit. I agree all the suggestions not incorporated can wait and it's better not to slow this down.",
      "created_at" : "2015-04-23T21:30:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-95725039",
      "id" : 95725039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-23T21:30:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95725039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29149942"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29149942"
         }
      },
      "body" : "The comment above is no longer relevant here.",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-04-27T14:20:55Z",
      "diff_hunk" : "@@ -385,7 +58,7 @@ CTxMemPool::CTxMemPool(const CFeeRate& _minRelayFee) :\n     // to wait a day or two to save a fraction of a penny in fees.\n     // Confirmation times for very-low-fee transactions that take more\n     // than an hour or three to confirm are highly variable.\n-    minerPolicyEstimator = new CMinerPolicyEstimator(25);\n+    minerPolicyEstimator = new CBlockPolicyEstimator(_minRelayFee);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29149942",
      "id" : 29149942,
      "original_commit_id" : "a992a72aadb67387f0fc2e2315748ae5fd334ac7",
      "original_position" : 375,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29149942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29161022"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29161022"
         }
      },
      "body" : "nit: this forward declaration doesn't appear to be necessary",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-04-27T16:06:43Z",
      "diff_hunk" : "@@ -30,6 +30,8 @@ inline bool AllowFree(double dPriority)\n /** Fake height value used in CCoins to signify they are only in the memory pool (since 0.8) */\n static const unsigned int MEMPOOL_HEIGHT = 0x7FFFFFFF;\n \n+class CTxMemPool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29161022",
      "id" : 29161022,
      "original_commit_id" : "a992a72aadb67387f0fc2e2315748ae5fd334ac7",
      "original_position" : 4,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29161022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Addressed nits (above and offline) by @sdaftuar and improved the readability of the rpc test.\r\n@gavinandresen, I know there are a lot of small added commits here, and I'd like to squash them all down but just wanted to be sure you saw the changes in 64bf2bb.  This slightly changes the startup behavior, but otherwise all other changes we just cleanups, and no change to behavior.  ",
      "created_at" : "2015-04-29T13:56:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-97433682",
      "id" : 97433682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-29T13:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97433682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29346655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29346655"
         }
      },
      "body" : "nit: succeess -> success",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-04-29T15:22:28Z",
      "diff_hunk" : "@@ -0,0 +1,529 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2015 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"policy/fees.h\"\n+\n+#include \"amount.h\"\n+#include \"primitives/transaction.h\"\n+#include \"streams.h\"\n+#include \"txmempool.h\"\n+#include \"util.h\"\n+\n+void TxConfirmStats::Initialize(std::vector<double>& defaultBuckets,\n+                                unsigned int maxConfirms, double _decay, std::string _dataTypeString)\n+{\n+    decay = _decay;\n+    dataTypeString = _dataTypeString;\n+    for (unsigned int i = 0; i < defaultBuckets.size(); i++) {\n+        buckets.push_back(defaultBuckets[i]);\n+        bucketMap[defaultBuckets[i]] = i;\n+    }\n+    confAvg.resize(maxConfirms);\n+    curBlockConf.resize(maxConfirms);\n+    unconfTxs.resize(maxConfirms);\n+    for (unsigned int i = 0; i < maxConfirms; i++) {\n+        confAvg[i].resize(buckets.size());\n+        curBlockConf[i].resize(buckets.size());\n+        unconfTxs[i].resize(buckets.size());\n+    }\n+\n+    oldUnconfTxs.resize(buckets.size());\n+    curBlockTxCt.resize(buckets.size());\n+    txCtAvg.resize(buckets.size());\n+    curBlockVal.resize(buckets.size());\n+    avg.resize(buckets.size());\n+}\n+\n+// Zero out the data for the current block\n+void TxConfirmStats::ClearCurrent(unsigned int nBlockHeight)\n+{\n+    for (unsigned int j = 0; j < buckets.size(); j++) {\n+        oldUnconfTxs[j] += unconfTxs[nBlockHeight%unconfTxs.size()][j];\n+        unconfTxs[nBlockHeight%unconfTxs.size()][j] = 0;\n+        for (unsigned int i = 0; i < curBlockConf.size(); i++)\n+            curBlockConf[i][j] = 0;\n+        curBlockTxCt[j] = 0;\n+        curBlockVal[j] = 0;\n+    }\n+}\n+\n+\n+void TxConfirmStats::Record(int blocksToConfirm, double val)\n+{\n+    // blocksToConfirm is 1-based\n+    if (blocksToConfirm < 1)\n+        return;\n+    unsigned int bucketindex = bucketMap.lower_bound(val)->second;\n+    for (size_t i = blocksToConfirm; i <= curBlockConf.size(); i++) {\n+        curBlockConf[i - 1][bucketindex]++;\n+    }\n+    curBlockTxCt[bucketindex]++;\n+    curBlockVal[bucketindex] += val;\n+}\n+\n+void TxConfirmStats::UpdateMovingAverages()\n+{\n+    for (unsigned int j = 0; j < buckets.size(); j++) {\n+        for (unsigned int i = 0; i < confAvg.size(); i++)\n+            confAvg[i][j] = confAvg[i][j] * decay + curBlockConf[i][j];\n+        avg[j] = avg[j] * decay + curBlockVal[j];\n+        txCtAvg[j] = txCtAvg[j] * decay + curBlockTxCt[j];\n+    }\n+}\n+\n+// returns -1 on error conditions\n+double TxConfirmStats::EstimateMedianVal(int confTarget, double sufficientTxVal,\n+                                         double successBreakPoint, bool requireGreater,\n+                                         unsigned int nBlockHeight)\n+{\n+    // Counters for a bucket (or range of buckets)\n+    double nConf = 0; // Number of tx's confirmed within the confTarget\n+    double totalNum = 0; // Total number of tx's that were ever confirmed\n+    int extraNum = 0;  // Number of tx's still in mempool for confTarget or longer\n+\n+    int maxbucketindex = buckets.size() - 1;\n+\n+    // requireGreater means we are looking for the lowest fee/priority such that all higher\n+    // values pass, so we start at maxbucketindex (highest fee) and look at succesively\n+    // smaller buckets until we reach failure.  Otherwise, we are looking for the highest\n+    // fee/priority such that all lower values fail, and we go in the opposite direction.\n+    unsigned int startbucket = requireGreater ? maxbucketindex : 0;\n+    int step = requireGreater ? -1 : 1;\n+\n+    // We'll combine buckets until we have enough samples.\n+    // The near and far variables will define the range we've combined\n+    // The best variables are the last range we saw which still had a high\n+    // enough confirmation rate to count as success.\n+    // The cur variables are the current range we're counting.\n+    unsigned int curNearBucket = startbucket;\n+    unsigned int bestNearBucket = startbucket;\n+    unsigned int curFarBucket = startbucket;\n+    unsigned int bestFarBucket = startbucket;\n+\n+    bool foundAnswer = false;\n+    unsigned int bins = unconfTxs.size();\n+\n+    // Start counting from highest(default) or lowest fee/pri transactions\n+    for (int bucket = startbucket; bucket >= 0 && bucket <= maxbucketindex; bucket += step) {\n+        curFarBucket = bucket;\n+        nConf += confAvg[confTarget - 1][bucket];\n+        totalNum += txCtAvg[bucket];\n+        for (unsigned int confct = confTarget; confct < GetMaxConfirms(); confct++)\n+            extraNum += unconfTxs[(nBlockHeight - confct)%bins][bucket];\n+        extraNum += oldUnconfTxs[bucket];\n+        // If we have enough transaction data points in this range of buckets,\n+        // we can test for success\n+        // (Only count the confirmed data points, so that each confirmation count\n+        // will be looking at the same amount of data and same bucket breaks)\n+        if (totalNum >= sufficientTxVal / (1 - decay)) {\n+            double curPct = nConf / (totalNum + extraNum);\n+\n+            // Check to see if we are no longer getting confirmed at the success rate\n+            if (requireGreater && curPct < successBreakPoint)\n+                break;\n+            if (!requireGreater && curPct > successBreakPoint)\n+                break;\n+\n+            // Otherwise update the cumulative stats, and the bucket variables\n+            // and reset the counters\n+            else {\n+                foundAnswer = true;\n+                nConf = 0;\n+                totalNum = 0;\n+                extraNum = 0;\n+                bestNearBucket = curNearBucket;\n+                bestFarBucket = curFarBucket;\n+                curNearBucket = bucket + step;\n+            }\n+        }\n+    }\n+\n+    double median = -1;\n+    double txSum = 0;\n+\n+    // Calculate the \"average\" fee of the best bucket range that met success conditions\n+    // Find the bucket with the median transaction and then report the average fee from that bucket\n+    // This is a compromise between finding the median which we can't since we don't save all tx's\n+    // and reporting the average which is less accurate\n+    unsigned int minBucket = bestNearBucket < bestFarBucket ? bestNearBucket : bestFarBucket;\n+    unsigned int maxBucket = bestNearBucket > bestFarBucket ? bestNearBucket : bestFarBucket;\n+    for (unsigned int j = minBucket; j <= maxBucket; j++) {\n+        txSum += txCtAvg[j];\n+    }\n+    if (foundAnswer && txSum != 0) {\n+        txSum = txSum / 2;\n+        for (unsigned int j = minBucket; j <= maxBucket; j++) {\n+            if (txCtAvg[j] < txSum)\n+                txSum -= txCtAvg[j];\n+            else { // we're in the right bucket\n+                median = avg[j] / txCtAvg[j];\n+                break;\n+            }\n+        }\n+    }\n+\n+    LogPrint(\"estimatefee\", \"%3d: For conf succeess %s %4.2f need %s %s: %12.5g from buckets %8g - %8g  Cur Bucket stats %6.2f%%  %8.1f/(%.1f+%d mempool)\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r29346655",
      "id" : 29346655,
      "original_commit_id" : "17e8c84e8af968bb80845325176d7ca51c201a88",
      "original_position" : 167,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29346655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I've reviewed the code (particularly to understand the details of the calculations in policy/fees.cpp), and I've tested by running a node with this code, and this looks good to me (and improves the estimates substantially).  ACK. ",
      "created_at" : "2015-04-29T20:05:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-97566880",
      "id" : 97566880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-29T20:05:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97566880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I'm going to make a summary of my review of this PR, hopefully it helps getting it merged soon.\r\nAlthough, I have not reviewed or tested the changes in the estimator itself, I have paid special attention on making sure that it only changed fee policy behavior, so I'm convinced that this is completely consensus and network safe, anything-non-fee-estimator-related safe.\r\nReaching this conclusion was not hard because although coupled with txmempool, the estimator is encapsulated.\r\nApart from the changes in the estimator, this is an improvement in modularity, and will open the door to further improvements in fee policy encapsulation (the min relay fee should stop being a global, all functions using it should be methods of the estimator class, but one step at a time).\r\nI repeated the moveonly part of this PR manually so if it had been separated in an individual commit I could have easily verified it, but then I git pruned that (I should have kept it).\r\n\r\nIn summary, still-untested-but-pretty-confident-ACK.\r\n",
      "created_at" : "2015-04-29T21:12:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-97586795",
      "id" : 97586795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-29T21:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97586795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I didn't try to check or understand that code, but wanted to ask if the GUI (e.g. coincontrol and smart fees) is working with this without problems or if that needs to be verified.",
      "created_at" : "2015-04-30T06:13:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-97672025",
      "id" : 97672025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-30T06:14:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97672025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo Thanks for thinking about that.  I think it could certainly use some more testing.  There are two things in my mind that could use improving.\r\n1) I think the default txConfirmTarget should be greater than 1.  There are periods of time when 1 can be quite a high fee temporarily.  I plan to open this discussion in a different PR at some point, because its a bit of a separate discussion.  This doesn't really affect the GUI, though since that uses a default of 25.\r\n2) It's also possible at times to not have an answer for `estimatefee 1` but to have answer for all other estimates.  This is a feature not a bug, but I think it would be possible to design a better UI experience in that case.  Perhaps the slider bounces back to the first legitimate estimate, or gives you a helpful message such as \"No amount of fee will get you reliably confirmed in the next block\".\r\n",
      "created_at" : "2015-04-30T15:08:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-97830555",
      "id" : 97830555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-04-30T15:08:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97830555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : ">  There are periods of time when 1 can be quite a high fee temporarily\r\n\r\nA suggestion: if fractional arguments are allowed for `estimatefee`, it could avoid the need for `MIN_SUCCESS_PCT`, which in my view discards useful information, and perhaps is the reason for these kinds of problems (e.g. a fee bucket which for a given `confTarget` has a `curPct` that is close to the 0.85 threshold would result in unstable behavior, if I've understood properly).\r\n\r\nWith fractional `confTarget`, each fee bucket could be represented by its mean conf, and compared to `confTarget` directly to determine success. The default `txConfirmTarget` could then be set to fractional values, e.g. 1.2, which would perhaps result in greater stability.",
      "created_at" : "2015-05-10T10:05:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-100616441",
      "id" : 100616441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-10T10:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100616441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9492819?v=3",
         "events_url" : "https://api.github.com/users/bitcoinfees/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bitcoinfees/followers",
         "following_url" : "https://api.github.com/users/bitcoinfees/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bitcoinfees/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bitcoinfees",
         "id" : 9492819,
         "login" : "bitcoinfees",
         "organizations_url" : "https://api.github.com/users/bitcoinfees/orgs",
         "received_events_url" : "https://api.github.com/users/bitcoinfees/received_events",
         "repos_url" : "https://api.github.com/users/bitcoinfees/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bitcoinfees/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bitcoinfees/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bitcoinfees"
      }
   },
   {
      "body" : "> not have an answer for estimatefee 1\r\n\r\nWith regard to fee buckets clearing the `MIN_SUCCESS_PCT` hurdle of 0.85, I've found in my own studies that the main reason why transactions with relatively high fees don't make it into the next block is because of the interval between miners updating their block transaction lists, which I believe is on the order of 30-60 seconds ([source](http://bitcoin.stackexchange.com/questions/32892/how-often-do-miners-update-their-block-transaction-list)). \r\n\r\nThis means that if a transaction has been in the mempool for less than 60 seconds, there is a chance it won't be considered for block inclusion at all by the miner, regardless of the tx fee. After removing these transactions from the estimation, I've found that the relative frequency of high-fee transactions being included in the next block is pretty high and consistent, typically > 95%. ",
      "created_at" : "2015-05-10T10:28:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-100619322",
      "id" : 100619322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-10T10:28:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100619322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9492819?v=3",
         "events_url" : "https://api.github.com/users/bitcoinfees/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bitcoinfees/followers",
         "following_url" : "https://api.github.com/users/bitcoinfees/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bitcoinfees/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bitcoinfees",
         "id" : 9492819,
         "login" : "bitcoinfees",
         "organizations_url" : "https://api.github.com/users/bitcoinfees/orgs",
         "received_events_url" : "https://api.github.com/users/bitcoinfees/received_events",
         "repos_url" : "https://api.github.com/users/bitcoinfees/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bitcoinfees/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bitcoinfees/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bitcoinfees"
      }
   },
   {
      "body" : "@bitcoinfees, thanks for the comments.  I think asking for the mean number of blocks to confirmation is a slightly different question than I answered.  It's not clear if one question is better than another, but the way I defined the question is what fee would you need to have a sufficiently high percentage chance of getting confirmed in the desired number of blocks, so it kind of requires a MIN_SUCCESS_PCT.  But to your point, I do think that there could be a lot of improvements to this estimation algorithm, and hopefully they could build off the framework it provides.\r\n\r\nI agree with your conclusion on why the success percentage has a ceiling around 90%.  Hopefully with an improved transaction selection algorithm for mining in the future that will get better.",
      "created_at" : "2015-05-11T14:58:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-100936299",
      "id" : 100936299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-11T14:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100936299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Code review and lightly tested ACK.\r\n\r\nI'm updating core2.bitcoincore.org to run this version of the code now.",
      "created_at" : "2015-05-12T18:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-101384840",
      "id" : 101384840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-12T18:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101384840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "squashed to hopefully make it mergeable",
      "created_at" : "2015-05-12T19:13:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-101391282",
      "id" : 101391282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-12T19:13:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101391282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r30235629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30235629"
         }
      },
      "body" : "nit: just MIT",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-05-13T14:29:02Z",
      "diff_hunk" : "@@ -0,0 +1,529 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2015 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r30235629",
      "id" : 30235629,
      "original_commit_id" : "df623a549b7477c0b3bf3648a7eaa84a898d6e8b",
      "original_position" : 3,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30235629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r30235763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30235763"
         }
      },
      "body" : "also here",
      "commit_id" : "b649e0395464a659f4b3485ec71d28dc95ba48bd",
      "created_at" : "2015-05-13T14:30:09Z",
      "diff_hunk" : "@@ -0,0 +1,276 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2015 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#discussion_r30235763",
      "id" : 30235763,
      "original_commit_id" : "df623a549b7477c0b3bf3648a7eaa84a898d6e8b",
      "original_position" : 3,
      "path" : "src/policy/fees.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5159",
      "updated_at" : "2015-05-13T14:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30235763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "nits addressed",
      "created_at" : "2015-05-13T14:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-101692736",
      "id" : 101692736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-13T14:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101692736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-05-13T15:01:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5159#issuecomment-101704877",
      "id" : 101704877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5159",
      "updated_at" : "2015-05-13T15:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101704877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
