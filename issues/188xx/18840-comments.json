[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the description of this change is misleading. With this change the wallet isn't just waiting to \"fuly process previous RPCs\" it's also waiting for the node to process it's own internal events, and is waiting for other external listeners like the GUI, the transaction index, p2p networking code, and other wallets that are loaded.\r\n\r\nI'm also not sure if the change reliably fixes the reported problem, or just fixes it by accidentally by adding a delay. How does SyncWithValidationInterfaceQueue() ensure the new transaction is added to the mempool? And could there be a more direct fix for the `abandontransaction` error like having `bumpfee` update the old transaction's `fInMempool` flag directly after the new transaction is added?",
      "created_at" : "2020-05-01T14:29:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18840#issuecomment-622410773",
      "id" : 622410773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjQxMDc3Mw==",
      "updated_at" : "2020-05-01T14:29:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622410773",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ok, closing then",
      "created_at" : "2020-05-01T14:52:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18840#issuecomment-622419717",
      "id" : 622419717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjQxOTcxNw==",
      "updated_at" : "2020-05-01T14:52:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622419717",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> How does SyncWithValidationInterfaceQueue() ensure the new transaction is added to the mempool?\r\n\r\nThis is not about the new transaction, it is about the replaced transaction (`txid` in my example that fails). So `SyncWithValidationInterfaceQueue` ensures that the transaction is properly marked as *removed* from the mempool when it has in fact been removed.\r\n\r\n> And could there be a more direct fix for the abandontransaction error like having bumpfee update the old transaction's fInMempool flag directly after the new transaction is added?\r\n\r\nSure, see #18842. But keep in mind that #18842 is less correct, as a transaction that is still in the mempool and has been marked as removed will never be correctly marked as in mempool again.",
      "created_at" : "2020-05-01T15:32:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18840#issuecomment-622435932",
      "id" : 622435932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjQzNTkzMg==",
      "updated_at" : "2020-05-01T15:32:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622435932",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think something like this pull request could help with some (but not all) RPC request isolation issues like https://github.com/bitcoin/bitcoin/issues/9197#issuecomment-612984066",
      "created_at" : "2020-05-01T19:17:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18840#issuecomment-622524854",
      "id" : 622524854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18840",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjUyNDg1NA==",
      "updated_at" : "2020-05-01T19:17:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622524854",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/101238?v=4",
         "events_url" : "https://api.github.com/users/kanzure/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kanzure/followers",
         "following_url" : "https://api.github.com/users/kanzure/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kanzure/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kanzure",
         "id" : 101238,
         "login" : "kanzure",
         "node_id" : "MDQ6VXNlcjEwMTIzOA==",
         "organizations_url" : "https://api.github.com/users/kanzure/orgs",
         "received_events_url" : "https://api.github.com/users/kanzure/received_events",
         "repos_url" : "https://api.github.com/users/kanzure/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kanzure/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kanzure/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kanzure"
      }
   }
]
