{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "## Rationale\r\n\r\nThe CLI can provide you with everything about transactions and blocks that you need to reconstruct the block structure and raw block itself **except** for the witness commitment nonce which is stored in the `scriptWitness` of the coinbase and is not printed. You could manually parse the raw `\"hex\"` fields for transactions if you really wanted to, but this seems to defeat the point of having a JSONification of the raw block/transaction data.\r\n\r\nWithout the nonce you can't:\r\n\r\n1. calculate and validate the witness commitment yourself, you can generate the witness tx merkle root but you don't have the nonce to combine it with\r\n2. reconstruct the raw block form because you don't have `scriptWitness` stack associated with the coinbase (although you know how big it will be and can guess the common case of `[0x000...000]`)\r\n\r\nI'm building some archiving tooling for block data and being able to do a validated two-way conversion is very helpful.\r\n\r\n## What\r\n\r\nThis PR simply makes the `txinwitness` field not dependent on whether we are working with the coinbase or not. So you get it for the coinbase as well as the rest.\r\n\r\n## Examples\r\n\r\nCommon case of a `[0x000...000]` nonce: 00000000000000000000140a7289f3aada855dfd23b0bb13bb5502b0ca60cdd7\r\n\r\n```json\r\n      \"vin\": [\r\n        {\r\n          \"coinbase\": \"0368890904c1fe8d5e2f706f6f6c696e2e636f6d2ffabe6d6d5565843a681160cf7b08b1b74ac90a719e6d6ab28c16d336b924f0dc2fcabdc6010000000000000051bf2ad74af345dbe642154b2658931612a70d195e007add0100ffffffff\",\r\n          \"txinwitness\": [\r\n            \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n          ],\r\n          \"sequence\": 4294967295\r\n        }\r\n      ],\r\n...\r\n```\r\n\r\nNovel nonce value: 000000000000000000008c31945b2012258366cc600a3e9a3ee0598e8f797731\r\n\r\n```json\r\n      \"vin\": [\r\n        {\r\n          \"coinbase\": \"031862082cfabe6d6d80c099b5e21f4c186d54eb292e17026932e52b1b807fa1380574c5adc1c843450200000000000000\",\r\n          \"txinwitness\": [\r\n            \"5b5032506f6f6c5d5b5032506f6f6c5d5b5032506f6f6c5d5b5032506f6f6c5d\"\r\n          ],\r\n          \"sequence\": 4294967295\r\n        }\r\n      ],\r\n...\r\n```\r\n\r\n## Alternatives\r\n\r\nThis field could be renamed for the coinbase, `\"witnessnonce\"` perhaps. It could also be omitted when null/zero (`0x000...000`).\r\n\r\n## Tests\r\n\r\nThis didn't break any tests and I couldn't find an obvious way to include a test for this. If this is desired I'd apreicate some pointers.",
   "closed_at" : "2020-06-08T14:20:52Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18826/comments",
   "created_at" : "2020-04-30T09:53:18Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18826/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/18826",
   "id" : 609773439,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "description" : null,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18826/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NDExMzAzNTI4",
   "number" : 18826,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/18826.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18826",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/18826.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18826"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Expose txinwitness for coinbase in JSON form from RPC",
   "updated_at" : "2020-06-08T14:20:52Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18826",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/495647?v=4",
      "events_url" : "https://api.github.com/users/rvagg/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rvagg/followers",
      "following_url" : "https://api.github.com/users/rvagg/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rvagg/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rvagg",
      "id" : 495647,
      "login" : "rvagg",
      "node_id" : "MDQ6VXNlcjQ5NTY0Nw==",
      "organizations_url" : "https://api.github.com/users/rvagg/orgs",
      "received_events_url" : "https://api.github.com/users/rvagg/received_events",
      "repos_url" : "https://api.github.com/users/rvagg/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rvagg/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rvagg/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rvagg"
   }
}
