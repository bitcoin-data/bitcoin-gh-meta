[
   {
      "author_association" : "MEMBER",
      "body" : "Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\r\n\r\n`--with-incompatible-bdb` *isn't* \"needed\" - it's available, and not recommended.\r\nOnly BDB 4.8 *should* be used.",
      "created_at" : "2020-05-01T19:47:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622536272",
      "id" : 622536272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjUzNjI3Mg==",
      "updated_at" : "2020-05-01T19:47:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622536272",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\r\n\r\nThis is maybe addressed in the PR description, which says that database format hasn't actually changes just log format.\r\n\r\nI'm confused about motivation for this PR though. The goal of this is to make database writes more reliable? Have we seen cases where data has been lost and we think this change would fix? What exactly is the case where this would happen? Or is the goal something different like making writes more efficient?\r\n",
      "created_at" : "2020-05-01T19:53:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622538604",
      "id" : 622538604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjUzODYwNA==",
      "updated_at" : "2020-05-01T19:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622538604",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\r\n\r\nIt doesn't and testing that is incredibly easy. You don't even need the changes in this PR to find that out for yourself. The log changes here aren't strictly necessary for BDB 5.3 The wallet.dat files themselves are portable between these versions. From the documentation that I've found, we should be able to use the same wallet.dat files down to BDB 4.0, and up to the latest version of BDB\r\n\r\n> I'm confused about motivation for this PR though.\r\n\r\nThe goal is to remove the strict requirement for BDB 4.8.\r\n\r\n> The goal of this is to make database writes more reliable?\r\n\r\nIt actually does the opposite currently, which is why I added the section at the bottom about alternatives. When I wrote this, I assumed that flushes were occurring immediately after we were done writing a record, but this appears to not be the case. There is a bit of a delay which is mostly not human noticeable but this has an effect on a test like `feature_backwards_compatibility` where a wallet file ends up being copied before it's flushed so is missing data.",
      "created_at" : "2020-05-01T21:36:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622578361",
      "id" : 622578361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjU3ODM2MQ==",
      "updated_at" : "2020-05-01T21:46:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622578361",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n> the Oracle keeps changing the log file format\r\n\r\n> From the documentation that I've found, we should be able to use the same wallet.dat files down to BDB 4.0, and up to the latest version of BDB\r\n\r\nMind pointing to the docs?",
      "created_at" : "2020-05-01T22:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622597301",
      "id" : 622597301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjU5NzMwMQ==",
      "updated_at" : "2020-05-01T22:41:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622597301",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, so disabling the logs fixes the compatibility problem? :o",
      "created_at" : "2020-05-01T23:03:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622603597",
      "id" : 622603597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjYwMzU5Nw==",
      "updated_at" : "2020-05-01T23:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622603597",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "My recollection is that the log files have _no_ compatibility guarantees, not even backward compatibility for minor versions (i.e. you can't use a database+log from 4.7 in 4.8) - which is why we flush logs on exit. The database itself is backward compatible, but not forward compatible (you can use db files from 4.7 in 4.8 but not the other way around).\r\n\r\nI'm unsure about the goal here. There used to be frequent issues with wallets being unable to be opened, and we ended up making several frequent changes to the BDB settings we open envs/databases with. At some point those issues stopped, so I suspect we found a fairly stable configuration. I wouldn't touch these things without going back through history to see what has been tried before.",
      "created_at" : "2020-05-01T23:10:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622605523",
      "id" : 622605523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjYwNTUyMw==",
      "updated_at" : "2020-05-01T23:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622605523",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Mind pointing to the docs?\r\n\r\nThere are some changelogs on the previous releases page: https://www.oracle.com/database/technologies/related/berkeleydb-release-history.html. There is more documentation in the source downloads themselves.\r\n\r\n> Oh, so disabling the logs fixes the compatibility problem? :o\r\n\r\nThat is what I have found in my experimentation and dive through their source code.\r\n\r\n> The database itself is backward compatible, but not forward compatible (you can use db files from 4.7 in 4.8 but not the other way around).\r\n\r\nThis isn't true for 5.3 -> 4.8, I've tested this. A quick look through the code for 4.7 and 4.8 indicate that it should be compatible too. I'm pretty sure the incompatibility there is with the logs.",
      "created_at" : "2020-05-01T23:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622610813",
      "id" : 622610813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjYxMDgxMw==",
      "updated_at" : "2020-05-01T23:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622610813",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Back in 2012 I had hoped we'd switch away from BerkeleyDB before needing to bump it ever.\r\n\r\nI'm still not convinced this is a particular thing that needs to be changed. I'm kind of scared of these kind of foundational changes to the wallet format and all the unknown issues it might cause downstream.\r\n\r\nSo concept NACK, sorry.",
      "created_at" : "2020-05-02T09:04:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622913190",
      "id" : 622913190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjkxMzE5MA==",
      "updated_at" : "2020-05-02T09:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622913190",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've gone through their older versions to check compatibility. The only changes that were made were the depends package for BDB and `configure.ac` to allow other versions. The following versions could be compiled and `feature_backwards_compatibility.py` passes with a minor change to unload the `w3` wallets before the files are copied. `feature_backwards_compatibility.py` opens new wallets from the branch in 0.19, 0.18, and 0.17 and the reverse. So this tests the compatibility of the wallet.dat file.\r\n\r\n* 4.7.25\r\n* 4.8.30\r\n* 5.0.32\r\n* 5.1.29\r\n* 5.2.42\r\n* 5.3.29\r\n\r\nVersions 6.0 introduces a new database file version which is not backwards compatible. But it is possible to take an existing wallet.dat, use it with 6.0+, and then go back to the older BDB versions. BDB won't change a database's format without an explicit upgrade.\r\n\r\nVersions 4.6 and lower have API differences. 4.6.21 had a minimal change and after applying it, the wallet.dat file still worked. 4.5.20 and lower have further API differences that I didn't feel like going through to check the database file compatibility.\r\n\r\n***\r\n\r\nGiven this information, I think that something reasonable to do is to remove `--with-incompatible-db` and the messaging about the wallet.dat file not being portable. As these tests show, the wallet.dat file is portable across many versions. **Only the log files are not portable and those are removed upon clean shutdown**. Thus I think we should let people use system BDB instead of recommending 4.8. We can still ship 4.8 in release builds.",
      "created_at" : "2020-05-02T19:43:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623004113",
      "id" : 623004113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzAwNDExMw==",
      "updated_at" : "2020-05-03T03:51:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623004113",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I think everyone compiling from source is using bdb 5.3 and I haven't heard of any issues with that.\r\n\r\nPlease include tests to check that bitcoin core master (bdb5.3) can load bitcoin core 0.20.0 (bdb4.8) wallets (and vice-versa).\r\n\r\nIf there are concerns that removing the `--with-incompatible-bdb` flag (added in 941dba17838a1a40f5a5862eb2f84ffec511911e) is going to make people use bdb4.5 or other untested configurations, then maybe an option would be to only whitelist 4.8 and 5.3, but keep the `--with-incompatible-bdb` flag for all other bdb versions.",
      "created_at" : "2020-05-03T14:51:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623121856",
      "id" : 623121856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzEyMTg1Ng==",
      "updated_at" : "2020-05-03T14:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623121856",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">I think everyone compiling from source is using bdb 5.3\r\n\r\nWhat is the basis for this assumption? I don't know how people are building on Fedora/etc, but Gentoo still has bdb 4.8, and there are Ubuntu PPAs with it.",
      "created_at" : "2020-05-04T19:42:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623665949",
      "id" : 623665949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzY2NTk0OQ==",
      "updated_at" : "2020-05-04T19:42:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623665949",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I can't remember the last time I built without --with-incompatible-bdb.",
      "created_at" : "2020-05-04T19:51:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623670395",
      "id" : 623670395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzY3MDM5NQ==",
      "updated_at" : "2020-05-04T19:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623670395",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The [backwards compatibility test](https://github.com/bitcoin/bitcoin/blob/master/test/functional/feature_backwards_compatibility.py) creates a wallet on master (or the PR) and then opens it with an older release. Those older releases are downloaded binaries which ship with BDB 4.8.\r\n\r\nSo as long as this PR doesn't break that test, the change is probably backwards compatible.\r\n\r\nNarrator: it does break the test: https://travis-ci.org/github/bitcoin/bitcoin/jobs/682087327#L9993",
      "created_at" : "2020-05-04T19:58:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623673826",
      "id" : 623673826,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzY3MzgyNg==",
      "updated_at" : "2020-05-04T19:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623673826",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What is the basis for this assumption? I don't know how people are building on Fedora/etc, but Gentoo still has bdb 4.8, and there are Ubuntu PPAs with it.\r\n\r\n> I can't remember the last time I built without --with-incompatible-bdb.\r\n\r\nI installed BDB 4.8 so I never build with `--with-incompatible-bdb`.\r\n\r\n> So as long as this PR doesn't break that test, the change is probably backwards compatible.\r\n>\r\n> Narrator: it does break the test: https://travis-ci.org/github/bitcoin/bitcoin/jobs/682087327#L9993\r\n\r\nYes, this particular change is not backwards compatible, so I will be closing it. However, the particular thing it is failing on is the log files as the `w3*` wallets as those wallets are not being unloaded before they are copied. If you change the test to unload them first, it will pass. That's because unloading the wallet flushes them and then removes the log file.",
      "created_at" : "2020-05-04T20:03:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623676429",
      "id" : 623676429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18844",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzY3NjQyOQ==",
      "updated_at" : "2020-05-04T20:03:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623676429",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
