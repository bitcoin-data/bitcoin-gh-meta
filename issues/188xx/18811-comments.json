[
   {
      "author_association" : "MEMBER",
      "body" : "~~In that run it took more than 10 seconds which is the unlock timeout.~~\r\n```\r\n2020-04-28T17:12:01.196000Z TestFramework (INFO): Test that unlock is needed when deriving only hardened keys in an encrypted wallet\r\n2020-04-28T17:12:01.345000Z TestFramework (ERROR): JSONRPC error\r\n```\r\nAnd on my system it took around 3 seconds.\r\n\r\nSo maybe just increase the timeout (if this happens often) in  https://github.com/bitcoin/bitcoin/blob/ba348dbc518b8e082a5dc3a225432fdacf859a13/test/functional/wallet_descriptor.py#L114",
      "created_at" : "2020-04-29T02:07:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18811#issuecomment-620952056",
      "id" : 620952056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDk1MjA1Ng==",
      "updated_at" : "2020-04-29T02:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620952056",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No? It took 0.149000 seconds?",
      "created_at" : "2020-04-29T02:16:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18811#issuecomment-620955176",
      "id" : 620955176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDk1NTE3Ng==",
      "updated_at" : "2020-04-29T02:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620955176",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh right!",
      "created_at" : "2020-04-29T02:21:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18811#issuecomment-620956337",
      "id" : 620956337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDk1NjMzNw==",
      "updated_at" : "2020-04-29T02:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620956337",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The issue is a race between the 2nd `walletpassphrase` and the 1st lock callback. This was introduced in #18481. \r\n\r\nFrom the logs\r\n```\r\n2020-04-28T17:11:50.607000Z TestFramework (INFO): Test encryption\r\n2020-04-28T17:11:51.349000Z TestFramework (INFO): Test that getnewaddress still works after keypool is exhausted in an encrypted wallet\r\n2020-04-28T17:12:01.196000Z TestFramework (INFO): Test that unlock is needed when deriving only hardened keys in an encrypted wallet\r\n2020-04-28T17:12:01.345000Z TestFramework (ERROR): JSONRPC error\r\n```\r\nLittle more than 10 seconds passed between the 1st `walletpassphrase` and the error, so in practice, the 2nd `walletpassphrase` was canceled by the 1st timeout.\r\n\r\nI'll submit a possible fix.",
      "created_at" : "2020-04-29T02:55:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18811#issuecomment-620963614",
      "id" : 620963614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDk2MzYxNA==",
      "updated_at" : "2020-04-29T02:55:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620963614",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
